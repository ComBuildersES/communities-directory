import"./index-BoqepOWk.js";import"./customElement-gnwNU0iV.js";import{n as Ae,i as _e,k as $,x as P,p as Pe,gj as ni,r as it}from"./index-D77Qk2xM.js";import{i as Pt}from"./keyed-B1WflM9H.js";import{b as ft,p as Mi}from"./dom-kPrPk8ai.js";import"./index-BfdRwHIr.js";import"./index-D9v_zJuO.js";import{n as Re}from"./index-BT2YK8VI.js";import{e as Ni,n as ve}from"./ref-wtGsxjYW.js";import{i as ki,S as je,a as ri,b as Oe,c as Fe,r as Ri,f as ji,d as ai}from"./debounce-D0G5qrda.js";import{u as oi,I as si}from"./interactive-VQERGdBX.js";import{c as li}from"./component-DQXsSP4v.js";import{a as ci}from"./useT9n-CUIs3K86.js";import{c as Hi}from"./observers-BRYpkLvy.js";import{b as xt,l as ae,c as ye,i as He,e as Bi,u as Gi}from"./utils-DN5InVx8.js";import{g as Xi}from"./guid-BhCGcoGA.js";import"./static-BZKF42xi.js";import"./form-BCCcSR8B.js";import"./key-CBbE744k.js";import"./label-CQbeNvqR.js";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.0 */const ht={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},bt={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.0 */const zi=Ae`:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`,ee=class ee extends _e{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}handleActionsStartSlotChange(t){this.hasActionsStart=ft(t)}handleActionsEndSlotChange(t){this.hasActionsEnd=ft(t)}handleContentStartSlotChange(t){this.hasContentStart=ft(t)}handleContentEndSlotChange(t){this.hasContentEnd=ft(t)}renderActionsStart(){const{hasActionsStart:t}=this;return Pt("actions-start-container",P`<div class=${$(ht.actionsStart)} .hidden=${!t}><slot name=${bt.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:t}=this;return Pt("actions-end-container",P`<div class=${$(ht.actionsEnd)} .hidden=${!t}><slot name=${bt.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:t}=this;return P`<div class=${$(ht.contentStart)} .hidden=${!t}><slot name=${bt.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return P`<div class=${$(ht.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:t}=this;return P`<div class=${$(ht.contentEnd)} .hidden=${!t}><slot name=${bt.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return P`<div class=${$(ht.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}};ee.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]},ee.styles=zi;let Ee=ee;Pe("calcite-stack",Ee);function Yi(i,t){for(var e=-1,n=i==null?0:i.length,r=Array(n);++e<n;)r[e]=t(i[e],e,i);return r}var di=Array.isArray,Be=je?je.prototype:void 0,Ge=Be?Be.toString:void 0;function ui(i){if(typeof i=="string")return i;if(di(i))return Yi(i,ui)+"";if(ki(i))return Ge?Ge.call(i):"";var t=i+"";return t=="0"&&1/i==-1/0?"-0":t}function Ui(i){return i}var Wi="[object AsyncFunction]",qi="[object Function]",Vi="[object GeneratorFunction]",Ki="[object Proxy]";function Zi(i){if(!ri(i))return!1;var t=Oe(i);return t==qi||t==Vi||t==Wi||t==Ki}var Qi=9007199254740991,Ji=/^(?:0|[1-9]\d*)$/;function tn(i,t){var e=typeof i;return t=t??Qi,!!t&&(e=="number"||e!="symbol"&&Ji.test(i))&&i>-1&&i%1==0&&i<t}var en=9007199254740991;function fi(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=en}function nn(i){return i!=null&&fi(i.length)&&!Zi(i)}var rn=Object.prototype;function an(i){var t=i&&i.constructor,e=typeof t=="function"&&t.prototype||rn;return i===e}function on(i,t){for(var e=-1,n=Array(i);++e<i;)n[e]=t(e);return n}var sn="[object Arguments]";function Xe(i){return Fe(i)&&Oe(i)==sn}var hi=Object.prototype,ln=hi.hasOwnProperty,cn=hi.propertyIsEnumerable,dn=Xe(function(){return arguments}())?Xe:function(i){return Fe(i)&&ln.call(i,"callee")&&!cn.call(i,"callee")};function un(){return!1}var pi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ze=pi&&typeof module=="object"&&module&&!module.nodeType&&module,fn=ze&&ze.exports===pi,Ye=fn?Ri.Buffer:void 0,hn=Ye?Ye.isBuffer:void 0,pn=hn||un,gn="[object Arguments]",mn="[object Array]",bn="[object Boolean]",vn="[object Date]",yn="[object Error]",En="[object Function]",Sn="[object Map]",In="[object Number]",wn="[object Object]",Dn="[object RegExp]",Cn="[object Set]",xn="[object String]",Tn="[object WeakMap]",An="[object ArrayBuffer]",_n="[object DataView]",Pn="[object Float32Array]",On="[object Float64Array]",Fn="[object Int8Array]",$n="[object Int16Array]",Ln="[object Int32Array]",Mn="[object Uint8Array]",Nn="[object Uint8ClampedArray]",kn="[object Uint16Array]",Rn="[object Uint32Array]",I={};I[Pn]=I[On]=I[Fn]=I[$n]=I[Ln]=I[Mn]=I[Nn]=I[kn]=I[Rn]=!0;I[gn]=I[mn]=I[An]=I[bn]=I[_n]=I[vn]=I[yn]=I[En]=I[Sn]=I[In]=I[wn]=I[Dn]=I[Cn]=I[xn]=I[Tn]=!1;function jn(i){return Fe(i)&&fi(i.length)&&!!I[Oe(i)]}function Hn(i){return function(t){return i(t)}}var gi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ot=gi&&typeof module=="object"&&module&&!module.nodeType&&module,Bn=Ot&&Ot.exports===gi,oe=Bn&&ji.process,Ue=function(){try{var i=Ot&&Ot.require&&Ot.require("util").types;return i||oe&&oe.binding&&oe.binding("util")}catch{}}(),We=Ue&&Ue.isTypedArray,Gn=We?Hn(We):jn;function Xn(i,t){var e=di(i),n=!e&&dn(i),r=!e&&!n&&pn(i),a=!e&&!n&&!r&&Gn(i),o=e||n||r||a,s=o?on(i.length,String):[],l=s.length;for(var c in i)o&&(c=="length"||r&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||tn(c,l))||s.push(c);return s}function zn(i){var t=[];if(i!=null)for(var e in Object(i))t.push(e);return t}var Yn=Object.prototype,Un=Yn.hasOwnProperty;function Wn(i){if(!ri(i))return zn(i);var t=an(i),e=[];for(var n in i)n=="constructor"&&(t||!Un.call(i,n))||e.push(n);return e}function qn(i){return nn(i)?Xn(i):Wn(i)}function Vn(i){return i==null?"":ui(i)}function Kn(i){return function(t,e,n){for(var r=-1,a=Object(t),o=n(t),s=o.length;s--;){var l=o[++r];if(e(a[l],l,a)===!1)break}return t}}var Zn=Kn();function Qn(i){return typeof i=="function"?i:Ui}var mi=/[\\^$.*+?()[\]{}|]/g,Jn=RegExp(mi.source);function tr(i){return i=Vn(i),i&&Jn.test(i)?i.replace(mi,"\\$&"):i}function er(i,t){return i==null?i:Zn(i,Qn(t),qn)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.0 */const se=(i,t,e)=>{const n=tr(t),r=new RegExp(n,"i");i.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const a=(o,s,l)=>{if(o!=null&&o.constant||o!=null&&o.filterDisabled)return!0;let c=!1;return er(o,(u,f)=>{typeof u=="function"||u==null||l&&!l.includes(f)||(Array.isArray(u)||typeof u=="object"&&u!==null?a(u,s)&&(c=!0):s.test(u)&&(c=!0))}),c};return i.filter(o=>a(o,r,e))};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.0 */const ir={container:"container"},nr={search:"search"},rr=Ae`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`,kt=class kt extends _e{constructor(){super(...arguments),this.filterDebounced=ai((t,e=!1,n)=>this.updateFiltered(se(this.items??[],t,this.filterProps),e,n),ni.filter),this.textInput=Ni(),this._value="",this.messages=ci(),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale="m",this.calciteFilterChange=it({cancelable:!1})}get value(){return this._value}set value(t){const e=this._value;t!==e&&(this._value=t,this.valueHandler(t))}async filter(t=this.value){return new Promise(e=>{this.value=t,this.updateFiltered(se(this.items??[],t,this.filterProps),!1,e)})}async setFocus(){var t;return await li(this),(t=this.textInput.value)==null?void 0:t.setFocus()}async load(){this.updateFiltered(se(this.items??[],this.value,this.filterProps))}willUpdate(t){var e;(t.has("items")&&(this.hasUpdated||((e=this.items)==null?void 0:e.length)>0)||t.has("filterProps"))&&this.filterDebounced(this.value)}updated(){oi(this)}disconnectedCallback(){super.disconnectedCallback(),this.filterDebounced.cancel()}valueHandler(t){this.filterDebounced(t)}inputHandler(t){const e=t.target;this.value=e.value,this.filterDebounced(e.value,!0)}keyDownHandler(t){t.defaultPrevented||(t.key==="Escape"&&(this.clear(),t.preventDefault()),t.key==="Enter"&&t.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(t,e=!1,n){this.filteredItems=t,e&&this.calciteFilterChange.emit(),n==null||n()}render(){const{disabled:t,scale:e}=this;return si({disabled:t,children:P`<div class=${$(ir.container)}><label><calcite-input clearable .disabled=${t} .icon=${nr.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${e} type=text .value=${this.value} ${ve(this.textInput)}></calcite-input></label></div>`})}};kt.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1},kt.shadowRootOptions={mode:"open",delegatesFocus:!0},kt.styles=rr;let Se=kt;Pe("calcite-filter",Se);/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function qe(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,n)}return e}function W(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?qe(Object(e),!0).forEach(function(n){ar(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):qe(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function Yt(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yt=function(t){return typeof t}:Yt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(i)}function ar(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Z(){return Z=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Z.apply(this,arguments)}function or(i,t){if(i==null)return{};var e={},n=Object.keys(i),r,a;for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&(e[r]=i[r]);return e}function sr(i,t){if(i==null)return{};var e=or(i,t),n,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(e[n]=i[n])}return e}var lr="1.15.6";function K(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var Q=K(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Rt=K(/Edge/i),Ve=K(/firefox/i),Ft=K(/safari/i)&&!K(/chrome/i)&&!K(/android/i),$e=K(/iP(ad|od|hone)/i),bi=K(/chrome/i)&&K(/android/i),vi={capture:!1,passive:!1};function v(i,t,e){i.addEventListener(t,e,!Q&&vi)}function b(i,t,e){i.removeEventListener(t,e,!Q&&vi)}function Kt(i,t){if(t){if(t[0]===">"&&(t=t.substring(1)),i)try{if(i.matches)return i.matches(t);if(i.msMatchesSelector)return i.msMatchesSelector(t);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(t)}catch{return!1}return!1}}function yi(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function z(i,t,e,n){if(i){e=e||document;do{if(t!=null&&(t[0]===">"?i.parentNode===e&&Kt(i,t):Kt(i,t))||n&&i===e)return i;if(i===e)break}while(i=yi(i))}return null}var Ke=/\s+/g;function R(i,t,e){if(i&&t)if(i.classList)i.classList[e?"add":"remove"](t);else{var n=(" "+i.className+" ").replace(Ke," ").replace(" "+t+" "," ");i.className=(n+(e?" "+t:"")).replace(Ke," ")}}function p(i,t,e){var n=i&&i.style;if(n){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(e=i.currentStyle),t===void 0?e:e[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=e+(typeof e=="string"?"":"px")}}function yt(i,t){var e="";if(typeof i=="string")e=i;else do{var n=p(i,"transform");n&&n!=="none"&&(e=n+" "+e)}while(!t&&(i=i.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(e)}function Ei(i,t,e){if(i){var n=i.getElementsByTagName(t),r=0,a=n.length;if(e)for(;r<a;r++)e(n[r],r);return n}return[]}function U(){var i=document.scrollingElement;return i||document.documentElement}function T(i,t,e,n,r){if(!(!i.getBoundingClientRect&&i!==window)){var a,o,s,l,c,u,f;if(i!==window&&i.parentNode&&i!==U()?(a=i.getBoundingClientRect(),o=a.top,s=a.left,l=a.bottom,c=a.right,u=a.height,f=a.width):(o=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,f=window.innerWidth),(t||e)&&i!==window&&(r=r||i.parentNode,!Q))do if(r&&r.getBoundingClientRect&&(p(r,"transform")!=="none"||e&&p(r,"position")!=="static")){var h=r.getBoundingClientRect();o-=h.top+parseInt(p(r,"border-top-width")),s-=h.left+parseInt(p(r,"border-left-width")),l=o+a.height,c=s+a.width;break}while(r=r.parentNode);if(n&&i!==window){var E=yt(r||i),y=E&&E.a,S=E&&E.d;E&&(o/=S,s/=y,f/=y,u/=S,l=o+u,c=s+f)}return{top:o,left:s,bottom:l,right:c,width:f,height:u}}}function Ze(i,t,e){for(var n=at(i,!0),r=T(i)[t];n;){var a=T(n)[e],o=void 0;if(o=r>=a,!o)return n;if(n===U())break;n=at(n,!1)}return!1}function Et(i,t,e,n){for(var r=0,a=0,o=i.children;a<o.length;){if(o[a].style.display!=="none"&&o[a]!==g.ghost&&(n||o[a]!==g.dragged)&&z(o[a],e.draggable,i,!1)){if(r===t)return o[a];r++}a++}return null}function Le(i,t){for(var e=i.lastElementChild;e&&(e===g.ghost||p(e,"display")==="none"||t&&!Kt(e,t));)e=e.previousElementSibling;return e||null}function H(i,t){var e=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==g.clone&&(!t||Kt(i,t))&&e++;return e}function Qe(i){var t=0,e=0,n=U();if(i)do{var r=yt(i),a=r.a,o=r.d;t+=i.scrollLeft*a,e+=i.scrollTop*o}while(i!==n&&(i=i.parentNode));return[t,e]}function cr(i,t){for(var e in i)if(i.hasOwnProperty(e)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===i[e][n])return Number(e)}return-1}function at(i,t){if(!i||!i.getBoundingClientRect)return U();var e=i,n=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var r=p(e);if(e.clientWidth<e.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return U();if(n||t)return e;n=!0}}while(e=e.parentNode);return U()}function dr(i,t){if(i&&t)for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function le(i,t){return Math.round(i.top)===Math.round(t.top)&&Math.round(i.left)===Math.round(t.left)&&Math.round(i.height)===Math.round(t.height)&&Math.round(i.width)===Math.round(t.width)}var $t;function Si(i,t){return function(){if(!$t){var e=arguments,n=this;e.length===1?i.call(n,e[0]):i.apply(n,e),$t=setTimeout(function(){$t=void 0},t)}}}function ur(){clearTimeout($t),$t=void 0}function Ii(i,t,e){i.scrollLeft+=t,i.scrollTop+=e}function wi(i){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(i).cloneNode(!0):e?e(i).clone(!0)[0]:i.cloneNode(!0)}function Di(i,t,e){var n={};return Array.from(i.children).forEach(function(r){var a,o,s,l;if(!(!z(r,t.draggable,i,!1)||r.animated||r===e)){var c=T(r);n.left=Math.min((a=n.left)!==null&&a!==void 0?a:1/0,c.left),n.top=Math.min((o=n.top)!==null&&o!==void 0?o:1/0,c.top),n.right=Math.max((s=n.right)!==null&&s!==void 0?s:-1/0,c.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var M="Sortable"+new Date().getTime();function fr(){var i=[],t;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(p(r,"display")==="none"||r===g.ghost)){i.push({target:r,rect:T(r)});var a=W({},i[i.length-1].rect);if(r.thisAnimationDuration){var o=yt(r,!0);o&&(a.top-=o.f,a.left-=o.e)}r.fromRect=a}})}},addAnimationState:function(n){i.push(n)},removeAnimationState:function(n){i.splice(cr(i,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var a=!1,o=0;i.forEach(function(s){var l=0,c=s.target,u=c.fromRect,f=T(c),h=c.prevFromRect,E=c.prevToRect,y=s.rect,S=yt(c,!0);S&&(f.top-=S.f,f.left-=S.e),c.toRect=f,c.thisAnimationDuration&&le(h,f)&&!le(u,f)&&(y.top-f.top)/(y.left-f.left)===(u.top-f.top)/(u.left-f.left)&&(l=pr(y,h,E,r.options)),le(f,u)||(c.prevFromRect=u,c.prevToRect=f,l||(l=r.options.animation),r.animate(c,y,f,l)),l&&(a=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),a?t=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),i=[]},animate:function(n,r,a,o){if(o){p(n,"transition",""),p(n,"transform","");var s=yt(this.el),l=s&&s.a,c=s&&s.d,u=(r.left-a.left)/(l||1),f=(r.top-a.top)/(c||1);n.animatingX=!!u,n.animatingY=!!f,p(n,"transform","translate3d("+u+"px,"+f+"px,0)"),this.forRepaintDummy=hr(n),p(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),p(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){p(n,"transition",""),p(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function hr(i){return i.offsetWidth}function pr(i,t,e,n){return Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*n.animation}var pt=[],ce={initializeByDefault:!0},jt={mount:function(t){for(var e in ce)ce.hasOwnProperty(e)&&!(e in t)&&(t[e]=ce[e]);pt.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),pt.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var a=t+"Global";pt.forEach(function(o){e[o.pluginName]&&(e[o.pluginName][a]&&e[o.pluginName][a](W({sortable:e},n)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](W({sortable:e},n)))})},initializePlugins:function(t,e,n,r){pt.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var c=new s(t,e,t.options);c.sortable=t,c.options=t.options,t[l]=c,Z(n,c.defaults)}});for(var a in t.options)if(t.options.hasOwnProperty(a)){var o=this.modifyOption(t,a,t.options[a]);typeof o<"u"&&(t.options[a]=o)}},getEventProperties:function(t,e){var n={};return pt.forEach(function(r){typeof r.eventProperties=="function"&&Z(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return pt.forEach(function(a){t[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[e]=="function"&&(r=a.optionListeners[e].call(t[a.pluginName],n))}),r}};function gr(i){var t=i.sortable,e=i.rootEl,n=i.name,r=i.targetEl,a=i.cloneEl,o=i.toEl,s=i.fromEl,l=i.oldIndex,c=i.newIndex,u=i.oldDraggableIndex,f=i.newDraggableIndex,h=i.originalEvent,E=i.putSortable,y=i.extraEventProperties;if(t=t||e&&e[M],!!t){var S,B=t.options,q="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Q&&!Rt?S=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(n,!0,!0)),S.to=o||e,S.from=s||e,S.item=r||e,S.clone=a,S.oldIndex=l,S.newIndex=c,S.oldDraggableIndex=u,S.newDraggableIndex=f,S.originalEvent=h,S.pullMode=E?E.lastPutMode:void 0;var O=W(W({},y),jt.getEventProperties(n,t));for(var G in O)S[G]=O[G];e&&e.dispatchEvent(S),B[q]&&B[q].call(t,S)}}var mr=["evt"],L=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,a=sr(n,mr);jt.pluginEvent.bind(g)(t,e,W({dragEl:d,parentEl:C,ghostEl:m,rootEl:w,nextEl:ut,lastDownEl:Ut,cloneEl:D,cloneHidden:rt,dragStarted:Tt,putSortable:A,activeSortable:g.active,originalEvent:r,oldIndex:vt,oldDraggableIndex:Lt,newIndex:j,newDraggableIndex:nt,hideGhostForTarget:Ai,unhideGhostForTarget:_i,cloneNowHidden:function(){rt=!0},cloneNowShown:function(){rt=!1},dispatchSortableEvent:function(s){F({sortable:e,name:s,originalEvent:r})}},a))};function F(i){gr(W({putSortable:A,cloneEl:D,targetEl:d,rootEl:w,oldIndex:vt,oldDraggableIndex:Lt,newIndex:j,newDraggableIndex:nt},i))}var d,C,m,w,ut,Ut,D,rt,vt,j,Lt,nt,Bt,A,mt=!1,Zt=!1,Qt=[],ct,X,de,ue,Je,ti,Tt,gt,Mt,Nt=!1,Gt=!1,Wt,_,fe=[],Ie=!1,Jt=[],ne=typeof document<"u",Xt=$e,ei=Rt||Q?"cssFloat":"float",br=ne&&!bi&&!$e&&"draggable"in document.createElement("div"),Ci=function(){if(ne){if(Q)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),xi=function(t,e){var n=p(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=Et(t,0,e),o=Et(t,1,e),s=a&&p(a),l=o&&p(o),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+T(a).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+T(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return a&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=r&&n[ei]==="none"||o&&n[ei]==="none"&&c+u>r)?"vertical":"horizontal"},vr=function(t,e,n){var r=n?t.left:t.top,a=n?t.right:t.bottom,o=n?t.width:t.height,s=n?e.left:e.top,l=n?e.right:e.bottom,c=n?e.width:e.height;return r===s||a===l||r+o/2===s+c/2},yr=function(t,e){var n;return Qt.some(function(r){var a=r[M].options.emptyInsertThreshold;if(!(!a||Le(r))){var o=T(r),s=t>=o.left-a&&t<=o.right+a,l=e>=o.top-a&&e<=o.bottom+a;if(s&&l)return n=r}}),n},Ti=function(t){function e(a,o){return function(s,l,c,u){var f=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(a==null&&(o||f))return!0;if(a==null||a===!1)return!1;if(o&&a==="clone")return a;if(typeof a=="function")return e(a(s,l,c,u),o)(s,l,c,u);var h=(o?s:l).options.group.name;return a===!0||typeof a=="string"&&a===h||a.join&&a.indexOf(h)>-1}}var n={},r=t.group;(!r||Yt(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},Ai=function(){!Ci&&m&&p(m,"display","none")},_i=function(){!Ci&&m&&p(m,"display","")};ne&&!bi&&document.addEventListener("click",function(i){if(Zt)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),Zt=!1,!1},!0);var dt=function(t){if(d){t=t.touches?t.touches[0]:t;var e=yr(t.clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[M]._onDragOver(n)}}},Er=function(t){d&&d.parentNode[M]._isOutsideThisEl(t.target)};function g(i,t){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=t=Z({},t),i[M]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return xi(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:g.supportPointer!==!1&&"PointerEvent"in window&&(!Ft||$e),emptyInsertThreshold:5};jt.initializePlugins(this,i,e);for(var n in e)!(n in t)&&(t[n]=e[n]);Ti(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:br,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?v(i,"pointerdown",this._onTapStart):(v(i,"mousedown",this._onTapStart),v(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(v(i,"dragover",this),v(i,"dragenter",this)),Qt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Z(this,fr())}g.prototype={constructor:g,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(gt=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,d):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,a=r.preventOnFilter,o=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=r.filter;if(Ar(n),!d&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Ft&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=z(l,r.draggable,n,!1),!(l&&l.animated)&&Ut!==l)){if(vt=H(l),Lt=H(l,r.draggable),typeof u=="function"){if(u.call(this,t,l,this)){F({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),L("filter",e,{evt:t}),a&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(f){if(f=z(c,f.trim(),n,!1),f)return F({sortable:e,rootEl:f,name:"filter",targetEl:l,fromEl:n,toEl:n}),L("filter",e,{evt:t}),!0}),u)){a&&t.preventDefault();return}r.handle&&!z(c,r.handle,n,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,n){var r=this,a=r.el,o=r.options,s=a.ownerDocument,l;if(n&&!d&&n.parentNode===a){var c=T(n);if(w=a,d=n,C=d.parentNode,ut=d.nextSibling,Ut=n,Bt=o.group,g.dragged=d,ct={target:d,clientX:(e||t).clientX,clientY:(e||t).clientY},Je=ct.clientX-c.left,ti=ct.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,d.style["will-change"]="all",l=function(){if(L("delayEnded",r,{evt:t}),g.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Ve&&r.nativeDraggable&&(d.draggable=!0),r._triggerDragStart(t,e),F({sortable:r,name:"choose",originalEvent:t}),R(d,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){Ei(d,u.trim(),he)}),v(s,"dragover",dt),v(s,"mousemove",dt),v(s,"touchmove",dt),o.supportPointer?(v(s,"pointerup",r._onDrop),!this.nativeDraggable&&v(s,"pointercancel",r._onDrop)):(v(s,"mouseup",r._onDrop),v(s,"touchend",r._onDrop),v(s,"touchcancel",r._onDrop)),Ve&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),L("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Rt||Q))){if(g.eventCanceled){this._onDrop();return}o.supportPointer?(v(s,"pointerup",r._disableDelayedDrag),v(s,"pointercancel",r._disableDelayedDrag)):(v(s,"mouseup",r._disableDelayedDrag),v(s,"touchend",r._disableDelayedDrag),v(s,"touchcancel",r._disableDelayedDrag)),v(s,"mousemove",r._delayedDragTouchMoveHandler),v(s,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&v(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&he(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._disableDelayedDrag),b(t,"touchend",this._disableDelayedDrag),b(t,"touchcancel",this._disableDelayedDrag),b(t,"pointerup",this._disableDelayedDrag),b(t,"pointercancel",this._disableDelayedDrag),b(t,"mousemove",this._delayedDragTouchMoveHandler),b(t,"touchmove",this._delayedDragTouchMoveHandler),b(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?v(document,"pointermove",this._onTouchMove):e?v(document,"touchmove",this._onTouchMove):v(document,"mousemove",this._onTouchMove):(v(d,"dragend",this),v(w,"dragstart",this._onDragStart));try{document.selection?qt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(mt=!1,w&&d){L("dragStarted",this,{evt:e}),this.nativeDraggable&&v(document,"dragover",Er);var n=this.options;!t&&R(d,n.dragClass,!1),R(d,n.ghostClass,!0),g.active=this,t&&this._appendGhost(),F({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(X){this._lastX=X.clientX,this._lastY=X.clientY,Ai();for(var t=document.elementFromPoint(X.clientX,X.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(X.clientX,X.clientY),t!==e);)e=t;if(d.parentNode[M]._isOutsideThisEl(t),e)do{if(e[M]){var n=void 0;if(n=e[M]._onDragOver({clientX:X.clientX,clientY:X.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=yi(e));_i()}},_onTouchMove:function(t){if(ct){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,a=t.touches?t.touches[0]:t,o=m&&yt(m,!0),s=m&&o&&o.a,l=m&&o&&o.d,c=Xt&&_&&Qe(_),u=(a.clientX-ct.clientX+r.x)/(s||1)+(c?c[0]-fe[0]:0)/(s||1),f=(a.clientY-ct.clientY+r.y)/(l||1)+(c?c[1]-fe[1]:0)/(l||1);if(!g.active&&!mt){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(m){o?(o.e+=u-(de||0),o.f+=f-(ue||0)):o={a:1,b:0,c:0,d:1,e:u,f};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");p(m,"webkitTransform",h),p(m,"mozTransform",h),p(m,"msTransform",h),p(m,"transform",h),de=u,ue=f,X=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!m){var t=this.options.fallbackOnBody?document.body:w,e=T(d,!0,Xt,!0,t),n=this.options;if(Xt){for(_=t;p(_,"position")==="static"&&p(_,"transform")==="none"&&_!==document;)_=_.parentNode;_!==document.body&&_!==document.documentElement?(_===document&&(_=U()),e.top+=_.scrollTop,e.left+=_.scrollLeft):_=U(),fe=Qe(_)}m=d.cloneNode(!0),R(m,n.ghostClass,!1),R(m,n.fallbackClass,!0),R(m,n.dragClass,!0),p(m,"transition",""),p(m,"transform",""),p(m,"box-sizing","border-box"),p(m,"margin",0),p(m,"top",e.top),p(m,"left",e.left),p(m,"width",e.width),p(m,"height",e.height),p(m,"opacity","0.8"),p(m,"position",Xt?"absolute":"fixed"),p(m,"zIndex","100000"),p(m,"pointerEvents","none"),g.ghost=m,t.appendChild(m),p(m,"transform-origin",Je/parseInt(m.style.width)*100+"% "+ti/parseInt(m.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,a=n.options;if(L("dragStart",this,{evt:t}),g.eventCanceled){this._onDrop();return}L("setupClone",this),g.eventCanceled||(D=wi(d),D.removeAttribute("id"),D.draggable=!1,D.style["will-change"]="",this._hideClone(),R(D,this.options.chosenClass,!1),g.clone=D),n.cloneId=qt(function(){L("clone",n),!g.eventCanceled&&(n.options.removeCloneOnHide||w.insertBefore(D,d),n._hideClone(),F({sortable:n,name:"clone"}))}),!e&&R(d,a.dragClass,!0),e?(Zt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(b(document,"mouseup",n._onDrop),b(document,"touchend",n._onDrop),b(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(n,r,d)),v(document,"drop",n),p(d,"transform","translateZ(0)")),mt=!0,n._dragStartId=qt(n._dragStarted.bind(n,e,t)),v(document,"selectstart",n),Tt=!0,window.getSelection().removeAllRanges(),Ft&&p(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,r,a,o,s=this.options,l=s.group,c=g.active,u=Bt===l,f=s.sort,h=A||c,E,y=this,S=!1;if(Ie)return;function B(Ct,$i){L(Ct,y,W({evt:t,isOwner:u,axis:E?"vertical":"horizontal",revert:o,dragRect:r,targetRect:a,canSort:f,fromSortable:h,target:n,completed:O,onMove:function(ke,Li){return zt(w,e,d,r,ke,T(ke),t,Li)},changed:G},$i))}function q(){B("dragOverAnimationCapture"),y.captureAnimationState(),y!==h&&h.captureAnimationState()}function O(Ct){return B("dragOverCompleted",{insertion:Ct}),Ct&&(u?c._hideClone():c._showClone(y),y!==h&&(R(d,A?A.options.ghostClass:c.options.ghostClass,!1),R(d,s.ghostClass,!0)),A!==y&&y!==g.active?A=y:y===g.active&&A&&(A=null),h===y&&(y._ignoreWhileAnimating=n),y.animateAll(function(){B("dragOverAnimationComplete"),y._ignoreWhileAnimating=null}),y!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(n===d&&!d.animated||n===e&&!n.animated)&&(gt=null),!s.dragoverBubble&&!t.rootEl&&n!==document&&(d.parentNode[M]._isOutsideThisEl(t.target),!Ct&&dt(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),S=!0}function G(){j=H(d),nt=H(d,s.draggable),F({sortable:y,name:"change",toEl:e,newIndex:j,newDraggableIndex:nt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=z(n,s.draggable,e,!0),B("dragOver"),g.eventCanceled)return S;if(d.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||y._ignoreWhileAnimating===n)return O(!1);if(Zt=!1,c&&!s.disabled&&(u?f||(o=C!==w):A===this||(this.lastPutMode=Bt.checkPull(this,c,d,t))&&l.checkPut(this,c,d,t))){if(E=this._getDirection(t,n)==="vertical",r=T(d),B("dragOverValid"),g.eventCanceled)return S;if(o)return C=w,q(),this._hideClone(),B("revert"),g.eventCanceled||(ut?w.insertBefore(d,ut):w.appendChild(d)),O(!0);var N=Le(e,s.draggable);if(!N||Dr(t,E,this)&&!N.animated){if(N===d)return O(!1);if(N&&e===t.target&&(n=N),n&&(a=T(n)),zt(w,e,d,r,n,a,t,!!n)!==!1)return q(),N&&N.nextSibling?e.insertBefore(d,N.nextSibling):e.appendChild(d),C=e,G(),O(!0)}else if(N&&wr(t,E,this)){var ot=Et(e,0,s,!0);if(ot===d)return O(!1);if(n=ot,a=T(n),zt(w,e,d,r,n,a,t,!1)!==!1)return q(),e.insertBefore(d,ot),C=e,G(),O(!0)}else if(n.parentNode===e){a=T(n);var Y=0,st,St=d.parentNode!==e,k=!vr(d.animated&&d.toRect||r,n.animated&&n.toRect||a,E),It=E?"top":"left",J=Ze(n,"top","top")||Ze(d,"top","top"),wt=J?J.scrollTop:void 0;gt!==n&&(st=a[It],Nt=!1,Gt=!k&&s.invertSwap||St),Y=Cr(t,n,a,E,k?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Gt,gt===n);var V;if(Y!==0){var lt=H(d);do lt-=Y,V=C.children[lt];while(V&&(p(V,"display")==="none"||V===m))}if(Y===0||V===n)return O(!1);gt=n,Mt=Y;var Dt=n.nextElementSibling,tt=!1;tt=Y===1;var Ht=zt(w,e,d,r,n,a,t,tt);if(Ht!==!1)return(Ht===1||Ht===-1)&&(tt=Ht===1),Ie=!0,setTimeout(Ir,30),q(),tt&&!Dt?e.appendChild(d):n.parentNode.insertBefore(d,tt?Dt:n),J&&Ii(J,0,wt-J.scrollTop),C=d.parentNode,st!==void 0&&!Gt&&(Wt=Math.abs(st-T(n)[It])),G(),O(!0)}if(e.contains(d))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",dt),b(document,"mousemove",dt),b(document,"touchmove",dt)},_offUpEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._onDrop),b(t,"touchend",this._onDrop),b(t,"pointerup",this._onDrop),b(t,"pointercancel",this._onDrop),b(t,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(j=H(d),nt=H(d,n.draggable),L("drop",this,{evt:t}),C=d&&d.parentNode,j=H(d),nt=H(d,n.draggable),g.eventCanceled){this._nulling();return}mt=!1,Gt=!1,Nt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),we(this.cloneId),we(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ft&&p(document.body,"user-select",""),p(d,"transform",""),t&&(Tt&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),m&&m.parentNode&&m.parentNode.removeChild(m),(w===C||A&&A.lastPutMode!=="clone")&&D&&D.parentNode&&D.parentNode.removeChild(D),d&&(this.nativeDraggable&&b(d,"dragend",this),he(d),d.style["will-change"]="",Tt&&!mt&&R(d,A?A.options.ghostClass:this.options.ghostClass,!1),R(d,this.options.chosenClass,!1),F({sortable:this,name:"unchoose",toEl:C,newIndex:null,newDraggableIndex:null,originalEvent:t}),w!==C?(j>=0&&(F({rootEl:C,name:"add",toEl:C,fromEl:w,originalEvent:t}),F({sortable:this,name:"remove",toEl:C,originalEvent:t}),F({rootEl:C,name:"sort",toEl:C,fromEl:w,originalEvent:t}),F({sortable:this,name:"sort",toEl:C,originalEvent:t})),A&&A.save()):j!==vt&&j>=0&&(F({sortable:this,name:"update",toEl:C,originalEvent:t}),F({sortable:this,name:"sort",toEl:C,originalEvent:t})),g.active&&((j==null||j===-1)&&(j=vt,nt=Lt),F({sortable:this,name:"end",toEl:C,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){L("nulling",this),w=d=C=m=ut=D=Ut=rt=ct=X=Tt=j=nt=vt=Lt=gt=Mt=A=Bt=g.dragged=g.ghost=g.clone=g.active=null,Jt.forEach(function(t){t.checked=!0}),Jt.length=de=ue=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":d&&(this._onDragOver(t),Sr(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,r=0,a=n.length,o=this.options;r<a;r++)e=n[r],z(e,o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Tr(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(a,o){var s=r.children[o];z(s,this.options.draggable,r,!1)&&(n[a]=s)},this),e&&this.captureAnimationState(),t.forEach(function(a){n[a]&&(r.removeChild(n[a]),r.appendChild(n[a]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return z(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var r=jt.modifyOption(this,t,e);typeof r<"u"?n[t]=r:n[t]=e,t==="group"&&Ti(n)},destroy:function(){L("destroy",this);var t=this.el;t[M]=null,b(t,"mousedown",this._onTapStart),b(t,"touchstart",this._onTapStart),b(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(t,"dragover",this),b(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qt.splice(Qt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!rt){if(L("hideClone",this),g.eventCanceled)return;p(D,"display","none"),this.options.removeCloneOnHide&&D.parentNode&&D.parentNode.removeChild(D),rt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(rt){if(L("showClone",this),g.eventCanceled)return;d.parentNode==w&&!this.options.group.revertClone?w.insertBefore(D,d):ut?w.insertBefore(D,ut):w.appendChild(D),this.options.group.revertClone&&this.animate(d,D),p(D,"display",""),rt=!1}}};function Sr(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function zt(i,t,e,n,r,a,o,s){var l,c=i[M],u=c.options.onMove,f;return window.CustomEvent&&!Q&&!Rt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=i,l.dragged=e,l.draggedRect=n,l.related=r||t,l.relatedRect=a||T(t),l.willInsertAfter=s,l.originalEvent=o,i.dispatchEvent(l),u&&(f=u.call(c,l,o)),f}function he(i){i.draggable=!1}function Ir(){Ie=!1}function wr(i,t,e){var n=T(Et(e.el,0,e.options,!0)),r=Di(e.el,e.options,m),a=10;return t?i.clientX<r.left-a||i.clientY<n.top&&i.clientX<n.right:i.clientY<r.top-a||i.clientY<n.bottom&&i.clientX<n.left}function Dr(i,t,e){var n=T(Le(e.el,e.options.draggable)),r=Di(e.el,e.options,m),a=10;return t?i.clientX>r.right+a||i.clientY>n.bottom&&i.clientX>n.left:i.clientY>r.bottom+a||i.clientX>n.right&&i.clientY>n.top}function Cr(i,t,e,n,r,a,o,s){var l=n?i.clientY:i.clientX,c=n?e.height:e.width,u=n?e.top:e.left,f=n?e.bottom:e.right,h=!1;if(!o){if(s&&Wt<c*r){if(!Nt&&(Mt===1?l>u+c*a/2:l<f-c*a/2)&&(Nt=!0),Nt)h=!0;else if(Mt===1?l<u+Wt:l>f-Wt)return-Mt}else if(l>u+c*(1-r)/2&&l<f-c*(1-r)/2)return xr(t)}return h=h||o,h&&(l<u+c*a/2||l>f-c*a/2)?l>u+c/2?1:-1:0}function xr(i){return H(d)<H(i)?1:-1}function Tr(i){for(var t=i.tagName+i.className+i.src+i.href+i.textContent,e=t.length,n=0;e--;)n+=t.charCodeAt(e);return n.toString(36)}function Ar(i){Jt.length=0;for(var t=i.getElementsByTagName("input"),e=t.length;e--;){var n=t[e];n.checked&&Jt.push(n)}}function qt(i){return setTimeout(i,0)}function we(i){return clearTimeout(i)}ne&&v(document,"touchmove",function(i){(g.active||mt)&&i.cancelable&&i.preventDefault()});g.utils={on:v,off:b,css:p,find:Ei,is:function(t,e){return!!z(t,e,t,!1)},extend:dr,throttle:Si,closest:z,toggleClass:R,clone:wi,index:H,nextTick:qt,cancelNextTick:we,detectDirection:xi,getChild:Et,expando:M};g.get=function(i){return i[M]};g.mount=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(g.utils=W(W({},g.utils),n.utils)),jt.mount(n)})};g.create=function(i,t){return new g(i,t)};g.version=lr;var x=[],At,De,Ce=!1,pe,ge,te,_t;function _r(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return i.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):this.options.supportPointer?v(document,"pointermove",this._handleFallbackAutoScroll):n.touches?v(document,"touchmove",this._handleFallbackAutoScroll):v(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),ii(),Vt(),ur()},nulling:function(){te=De=At=Ce=_t=pe=ge=null,x.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(a,o);if(te=e,n||this.options.forceAutoScrollFallback||Rt||Q||Ft){me(e,this.options,s,n);var l=at(s,!0);Ce&&(!_t||a!==pe||o!==ge)&&(_t&&ii(),_t=setInterval(function(){var c=at(document.elementFromPoint(a,o),!0);c!==l&&(l=c,Vt()),me(e,r.options,c,n)},10),pe=a,ge=o)}else{if(!this.options.bubbleScroll||at(s,!0)===U()){Vt();return}me(e,this.options,at(s,!1),!1)}}},Z(i,{pluginName:"scroll",initializeByDefault:!0})}function Vt(){x.forEach(function(i){clearInterval(i.pid)}),x=[]}function ii(){clearInterval(_t)}var me=Si(function(i,t,e,n){if(t.scroll){var r=(i.touches?i.touches[0]:i).clientX,a=(i.touches?i.touches[0]:i).clientY,o=t.scrollSensitivity,s=t.scrollSpeed,l=U(),c=!1,u;De!==e&&(De=e,Vt(),At=t.scroll,u=t.scrollFn,At===!0&&(At=at(e,!0)));var f=0,h=At;do{var E=h,y=T(E),S=y.top,B=y.bottom,q=y.left,O=y.right,G=y.width,N=y.height,ot=void 0,Y=void 0,st=E.scrollWidth,St=E.scrollHeight,k=p(E),It=E.scrollLeft,J=E.scrollTop;E===l?(ot=G<st&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),Y=N<St&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(ot=G<st&&(k.overflowX==="auto"||k.overflowX==="scroll"),Y=N<St&&(k.overflowY==="auto"||k.overflowY==="scroll"));var wt=ot&&(Math.abs(O-r)<=o&&It+G<st)-(Math.abs(q-r)<=o&&!!It),V=Y&&(Math.abs(B-a)<=o&&J+N<St)-(Math.abs(S-a)<=o&&!!J);if(!x[f])for(var lt=0;lt<=f;lt++)x[lt]||(x[lt]={});(x[f].vx!=wt||x[f].vy!=V||x[f].el!==E)&&(x[f].el=E,x[f].vx=wt,x[f].vy=V,clearInterval(x[f].pid),(wt!=0||V!=0)&&(c=!0,x[f].pid=setInterval((function(){n&&this.layer===0&&g.active._onTouchMove(te);var Dt=x[this.layer].vy?x[this.layer].vy*s:0,tt=x[this.layer].vx?x[this.layer].vx*s:0;typeof u=="function"&&u.call(g.dragged.parentNode[M],tt,Dt,i,te,x[this.layer].el)!=="continue"||Ii(x[this.layer].el,tt,Dt)}).bind({layer:f}),24))),f++}while(t.bubbleScroll&&h!==l&&(h=at(h,!1)));Ce=c}},30),Pi=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,a=t.activeSortable,o=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var c=n||a;s();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,f=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(f)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Me(){}Me.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Et(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Pi};Z(Me,{pluginName:"revertOnSpill"});function Ne(){}Ne.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:Pi};Z(Ne,{pluginName:"removeOnSpill"});g.mount(new _r);g.mount(Ne,Me);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.0 */const re=new Set,Pr={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function Or(i){if(Fi(i))return;Oi(i),re.add(i);const t="id",{group:e,handleSelector:n,dragSelector:r}=i;i.sortable=g.create(i.el,{dataIdAttr:t,...Pr,...!!r&&{draggable:r},...!!e&&{group:{name:e,...!!i.canPull&&{pull:(a,o,s,{newDraggableIndex:l,oldDraggableIndex:c})=>i.canPull({toEl:a.el,fromEl:o.el,dragEl:s,newIndex:l,oldIndex:c})},...!!i.canPut&&{put:(a,o,s,{newDraggableIndex:l,oldDraggableIndex:c})=>i.canPut({toEl:a.el,fromEl:o.el,dragEl:s,newIndex:l,oldIndex:c})}}},onMove:({from:a,dragged:o,to:s,related:l})=>{i.onDragMove&&i.onDragMove({fromEl:a,dragEl:o,toEl:s,relatedEl:l})},handle:n,filter:`${n}[disabled]`,onStart:({from:a,item:o,to:s,newDraggableIndex:l,oldDraggableIndex:c})=>{xe.active=!0,Fr(),i.onDragStart({fromEl:a,dragEl:o,toEl:s,newIndex:l,oldIndex:c})},onEnd:({from:a,item:o,to:s,newDraggableIndex:l,oldDraggableIndex:c})=>{xe.active=!1,$r(),i.onDragEnd({fromEl:a,dragEl:o,toEl:s,newIndex:l,oldIndex:c})},onSort:({from:a,item:o,to:s,newDraggableIndex:l,oldDraggableIndex:c})=>{i.onDragSort({fromEl:a,dragEl:o,toEl:s,newIndex:l,oldIndex:c})}})}function Oi(i){var t;Fi(i)||(re.delete(i),(t=i.sortable)==null||t.destroy(),i.sortable=null)}const xe={active:!1};function Fi(i){return i.dragEnabled&&xe.active}function Fr(){Array.from(re).forEach(i=>i.onGlobalDragStart())}function $r(){Array.from(re).forEach(i=>i.onGlobalDragEnd())}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.0 */const et={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text"},be={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},Lr=Ae`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,Mr=`${ye}, ${xt}`,ie=class ie extends _e{constructor(){super(),this.dragSelector=xt,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=Hi("mutation",()=>{this.willPerformFilter=!0,this.updateListItems()}),this.updateListItems=ai(()=>{this.updateGroupItems();const{selectionAppearance:t,selectionMode:e,interactionMode:n,dragEnabled:r,el:a,filterEl:o,moveToItems:s,displayMode:l,scale:c,defaultSlotEl:u}=this,f=Array.from(this.el.querySelectorAll(xt));if(f.forEach(h=>{h.scale=c,h.selectionAppearance=t,h.selectionMode=e,h.interactionMode=n,h.closest(ae)===a&&(h.moveToItems=s.filter(E=>E.element!==a&&!h.contains(E.element)),h.dragHandle=r,h.displayMode=l)}),this.parentListEl){this.setUpSorting();return}this.listItems=f,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),o&&(o.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(h=>!h.closed&&!h.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(h=>!h.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting(),u&&Gi(u)},ni.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=ci({blocking:!0}),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.moveToItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.calciteInternalListDefaultSlotChange=it({cancelable:!1}),this.calciteListChange=it({cancelable:!1}),this.calciteListDragEnd=it({cancelable:!1}),this.calciteListDragStart=it({cancelable:!1}),this.calciteListFilter=it({cancelable:!1}),this.calciteListMoveHalt=it({cancelable:!1}),this.calciteListOrderChange=it({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}putFailed(t){this.calciteListMoveHalt.emit(t)}async setFocus(){var t,e;return await li(this),this.filterEnabled?(t=this.filterEl)==null?void 0:t.setFocus():(e=this.focusableItems.find(n=>n.active))==null?void 0:e.setFocus()}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItems(),this.setUpSorting(),this.setParentList(),this.setListItemGroups()}async load(){this.handleInteractionModeWarning()}willUpdate(t){(t.has("filterText")||t.has("filterProps")||t.has("filterPredicate"))&&this.performFilter(),(t.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||t.has("group")||t.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||t.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||t.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||t.has("displayMode")&&this.hasUpdated||t.has("scale")&&this.hasUpdated||t.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){oi(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),Oi(this)}handleListItemChange(){this.willPerformFilter=!0,this.updateListItems()}handleCalciteListItemToggle(t){this.parentListEl||(t.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(t){if(this.parentListEl)return;t.stopPropagation();const{focusableItems:e}=this,r=e.findIndex(a=>a.active)-1;e[r]&&this.focusRow(e[r])}handleCalciteInternalListItemActive(t){if(this.parentListEl)return;t.stopPropagation();const e=t.target,{listItems:n}=this;n.forEach(r=>{r.active=r===e})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(t){this.assistiveText=t.detail.message,t.stopPropagation()}handleSortReorder(t){this.parentListEl||t.defaultPrevented||(t.preventDefault(),this.handleReorder(t))}handleSortMove(t){this.parentListEl||t.defaultPrevented||(t.preventDefault(),this.handleMove(t))}handleCalciteInternalListItemSelect(t){if(this.parentListEl)return;t.stopPropagation();const e=t.target,{listItems:n,selectionMode:r}=this;e.selected&&(r==="single"||r==="single-persist")&&n.forEach(a=>a.selected=a===e),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(t){if(this.parentListEl)return;t.stopPropagation();const{target:e,detail:n}=t,{focusableItems:r,lastSelectedInfo:a}=this,o=e;if(n.selectMultiple&&a){const s=r.indexOf(o),l=r.indexOf(a.selectedItem),c=Math.min(l,s),u=Math.max(l,s);r.slice(c,u+1).forEach(f=>f.selected=a.selected)}else this.lastSelectedInfo={selectedItem:o,selected:o.selected}}handleCalciteInternalListItemChange(t){this.parentListEl||(t.stopPropagation(),this.updateListItems())}handleCalciteInternalListItemGroupDefaultSlotChange(t){t.stopPropagation()}connectObserver(){var t;(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){var t;(t=this.mutationObserver)==null||t.disconnect()}setUpSorting(){const{dragEnabled:t}=this;t&&Or(this)}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(t){this.calciteListDragEnd.emit(t)}onDragStart(t){t.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(t)}onDragSort(t){this.setParentList(),this.updateListItems(),this.calciteListOrderChange.emit(t)}setParentList(){var t;this.parentListEl=(t=this.el.parentElement)==null?void 0:t.closest(ae)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(ye))}handleFilterActionsStartSlotChange(t){this.hasFilterActionsStart=ft(t)}handleFilterActionsEndSlotChange(t){this.hasFilterActionsEnd=ft(t)}handleFilterNoResultsSlotChange(t){this.hasFilterNoResults=ft(t)}setActiveListItem(){const{focusableItems:t}=this;t.some(e=>e.active)||t[0]&&(t[0].active=!0)}async updateSelectedItems(t=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(e=>e.selected),t&&this.calciteListChange.emit()}filterElements({el:t,filteredItems:e,visibleParents:n}){const r=!n.has(t)&&!e.includes(t);t.filterHidden=r;const a=t.parentElement.closest(Mr);a&&(r||n.add(a),this.filterElements({el:a,filteredItems:e,visibleParents:n}))}allParentListItemsExpanded(t){var n;const e=(n=t.parentElement)==null?void 0:n.closest(xt);if(e){if(!e.expanded)return!1}else return!0;return this.allParentListItemsExpanded(e)}borderItems(){const t=this.visibleItems.filter(e=>!e.filterHidden&&this.allParentListItemsExpanded(e));t.forEach(e=>e.bordered=e!==t[t.length-1])}updateFilteredItems(){const{visibleItems:t,filteredData:e,filterText:n,filterPredicate:r}=this,a=t==null?void 0:t.filter(l=>t.every(c=>c===l||!l.contains(c))),o=r?t.filter(r):n?e.map(l=>l.el):t||[],s=new WeakSet;a.forEach(l=>this.filterElements({el:l,filteredItems:o,visibleParents:s})),this.filteredItems=o,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:t}=this;t&&(t.filteredItems&&(this.filteredData=t.filteredItems),this.updateListItems())}async filterAndUpdateData(){var t;await((t=this.filterEl)==null?void 0:t.filter(this.filterText)),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(t=>t!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:t,filterText:e,effectiveFilterProps:n}=this;t&&(t.value=e,t.filterProps=n,this.filterAndUpdateData())}setDefaultSlotEl(t){this.defaultSlotEl=t}setFilterEl(t){this.filterEl=t,this.performFilter()}handleFilterChange(t){t.stopPropagation();const{value:e}=t.currentTarget;this.filterText=e,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(t=>({label:t.label,description:t.description,metadata:t.metadata,heading:this.getGroupHeading(t),el:t}))}getGroupHeading(t){return this.listItemGroups.filter(n=>n.contains(t)).map(n=>n.heading)}updateGroupItems(){const{el:t,group:e,scale:n}=this,r=Mi(t),a=e?Array.from(r.querySelectorAll(`${ae}[group="${e}"]`)).filter(s=>!s.disabled&&s.dragEnabled):[];this.moveToItems=a.map(s=>({element:s,label:s.label??s.id,id:Xi()})),Array.from(this.el.querySelectorAll(ye)).forEach(s=>{s.scale=n})}focusRow(t){const{focusableItems:e}=this;t&&(e.forEach(n=>n.active=n===t),t.setFocus())}isNavigable(t){var n;const e=(n=t.parentElement)==null?void 0:n.closest(xt);return e?e.expanded&&this.isNavigable(e):!0}handleListKeydown(t){var a;if(t.defaultPrevented||this.parentListEl)return;const{key:e}=t,n=this.focusableItems.filter(o=>this.isNavigable(o)),r=n.findIndex(o=>o.active);if(e==="ArrowDown"){t.preventDefault();const o=t.target===this.filterEl?0:r+1;n[o]&&this.focusRow(n[o])}else if(e==="ArrowUp"){if(t.preventDefault(),r===0&&this.filterEnabled){(a=this.filterEl)==null||a.setFocus();return}const o=r-1;n[o]&&this.focusRow(n[o])}else if(e==="Home"){t.preventDefault();const o=n[0];o&&this.focusRow(o)}else if(e==="End"){t.preventDefault();const o=n[n.length-1];o&&this.focusRow(o)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}handleMove(t){var c,u;const{moveTo:e}=t.detail,n=t.target,r=n==null?void 0:n.parentElement,a=e.element,s=Array.from(r.children).filter(He).indexOf(n),l=0;if(r){if(((c=r.canPull)==null?void 0:c.call(r,{toEl:a,fromEl:r,dragEl:n,newIndex:l,oldIndex:s}))===!1){this.calciteListMoveHalt.emit({toEl:a,fromEl:r,dragEl:n,oldIndex:s,newIndex:l});return}if(((u=a.canPut)==null?void 0:u.call(a,{toEl:a,fromEl:r,dragEl:n,newIndex:l,oldIndex:s}))===!1){a.putFailed({toEl:a,fromEl:r,dragEl:n,oldIndex:s,newIndex:l});return}n.sortHandleOpen=!1,this.disconnectObserver(),a.prepend(n),Bi(n),this.updateListItems(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:n,fromEl:r,toEl:a,newIndex:l,oldIndex:s})}}handleReorder(t){const{reorder:e}=t.detail,n=t.target,r=n==null?void 0:n.parentElement;if(!r)return;n.sortHandleOpen=!1;const a=Array.from(r.children).filter(He),o=a.length-1,s=a.indexOf(n);let l=s;switch(e){case"top":l=0;break;case"bottom":l=o;break;case"up":l=s===0?0:s-1;break;case"down":l=s===o?o:s+1;break}this.disconnectObserver();const c=e==="up"||e==="top"?a[l]:a[l].nextSibling;r.insertBefore(n,c),this.updateListItems(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:n,fromEl:r,toEl:r,newIndex:l,oldIndex:s})}render(){const{loading:t,label:e,disabled:n,dataForFilter:r,filterEnabled:a,filterPlaceholder:o,filterText:s,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:u,effectiveFilterProps:f}=this;return si({disabled:this.disabled,children:P`<div class=${$(et.container)}>${this.dragEnabled?P`<span aria-live=assertive class=${$(et.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${t?P`<calcite-scrim class=${$(et.scrim)} .loading=${t}></calcite-scrim>`:null}<div .ariaBusy=${t} .ariaLabel=${e||""} class=${$(et.table)} @keydown=${this.handleListKeydown} role=treegrid>${a||c||u?P`<div class=${$(et.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${$(et.stack)}><slot name=${be.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${bt.actionsStart}></slot><calcite-filter .ariaLabel=${o} .disabled=${n} .filterProps=${f} .items=${r} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${o} .scale=${this.scale} .value=${s} ${ve(this.setFilterEl)}></calcite-filter><slot name=${be.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${bt.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${$(et.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${ve(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${be.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:t,filteredItems:e,parentListEl:n,messages:{_lang:r},numberingSystem:a}=this;return Re.numberFormatOptions={locale:r,numberingSystem:a},n?null:P`<div aria-live=polite class=${$(et.assistiveText)}>${this.hasActiveFilter?Pt("aria-filter-enabled",P`<div>${t.filterEnabled}</div>`):null}${Pt("aria-item-count",P`<div>${t.total.replace("{count}",Re.localize(e.length.toString()))}</div>`)}${e.length?Pt("aria-item-list",P`<ol>${e.map(o=>P`<li>${o.label}</li>`)}</ol>`):null}</div>`}};ie.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],moveToItems:[16,{},{state:!0}],hasActiveFilter:[16,{},{state:!0}],showNoResultsContainer:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}]},ie.styles=Lr;let Te=ie;Pe("calcite-list",Te);export{Te as List};
