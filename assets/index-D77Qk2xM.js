const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pe-wasm-Co3DzcyP.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/geometryEngineWorker-DGYEKZlV.js","assets/geometryEngineJSON-AYJgUR1P.js","assets/geometryEngineBase-B0ZyeKAX.js","assets/CSVSourceWorker-CjVq4rMZ.js","assets/date-Ctp1FiBW.js","assets/executeQueryForSnapping-DoX56w2I.js","assets/QueryEngine-CIobbzAF.js","assets/featureConversionUtils-7ujoQGPj.js","assets/WhereClauseCache-Bt6mJBRp.js","assets/WhereClause-Bnjj42_y.js","assets/timeSupport-BVRI-VWs.js","assets/QueryEngineCapabilities-B_pTbIiR.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FeatureStore-CU-iaDRJ.js","assets/BoundsStore-D5YUlbFA.js","assets/PooledRBush-BnUMvRdB.js","assets/optimizedFeatureQueryEngineAdapter-Dg_THz17.js","assets/number-CrMiD1jB.js","assets/clientSideDefaults-Bl8dLGZy.js","assets/EdgeProcessingWorker-BFkK-1lq.js","assets/workerHelper-BqAqig0G.js","assets/InterleavedLayout-b80wfF4t.js","assets/BufferView-eFVUqZ0D.js","assets/types-D0PSWh4d.js","assets/edgeProcessing-CDFGvNyI.js","assets/deduplicate-BSb6YvdC.js","assets/Indices-CelQ_OxP.js","assets/VertexAttribute-Cq4MnHjR.js","assets/glUtil-DlWbl9f7.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/Normals-CI9HJtrQ.js","assets/ElevationSamplerWorker-rtwxZux2.js","assets/MeshLocalVertexSpace-DEQMfurH.js","assets/vertexSpaceConversion-BO7Fjk0f.js","assets/mat3f64-q3fE-ZOt.js","assets/mat4f64-Dk4dwAN8.js","assets/spatialReferenceEllipsoidUtils-D7u-ThqM.js","assets/computeTranslationToOriginAndRotation-rsZlXdZC.js","assets/projectPointToVector-JDItmsu6.js","assets/meshVertexSpaceUtils-BCsRrXFI.js","assets/vec3-CJN5Ncyk.js","assets/vec4-CNyetFRJ.js","assets/FeatureServiceSnappingSourceWorker-Devp7NIC.js","assets/symbologySnappingCandidates-BilIbvOt.js","assets/GeoJSONSourceWorker-DAyJOPIr.js","assets/geojson-BJYTQWiZ.js","assets/sourceUtils-ByJyOhZZ.js","assets/MemorySourceWorker-Or9DgF0C.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-DvaDDxl6.js","assets/dehydratedFeatures-CqTeOKOG.js","assets/FeaturePipelineWorker-BMExkxCo.js","assets/FeatureMetadata-lEonpNo-.js","assets/dataViewUtils-ZnAD8eGl.js","assets/UpdateTracking2D-VRwfTMLD.js","assets/BidiEngine-QXap_35O.js","assets/GeometryUtils-DEuLeBMh.js","assets/rasterizingUtils-BjddakVt.js","assets/floatRGBA-DMzzif2Q.js","assets/streamLayerUtils-CKwt2uXH.js","assets/MeshWriterRegistry-Cdeyzr-I.js","assets/TechniqueType-uMFRS8dR.js","assets/PieChartMeshWriter-CV0cO2El.js","assets/libtess-DSWHEAtW.js","assets/utils-Cf-QQ8pg.js","assets/earcut-D9gy186-.js","assets/grouping-DfAeoFin.js","assets/QueueProcessor-BPrPah2z.js","assets/operatorGeodeticDensify-dB0WFG7C.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-DikVqawO.js","assets/ogcFeatureUtils-CXdIG9Hz.js","assets/parquet-BZqdauXZ.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-BGmZItqK.js","assets/PointCloudWorker-DP6SHLlD.js","assets/quat-BQB_t3ds.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-nZdmKIgz.js","assets/PointCloudUniqueValueRenderer-BV-0SKFy.js","assets/I3SBinaryReader-DBeL-geA.js","assets/orientedBoundingBox-GucVNkmP.js","assets/plane-DLSlJ1Ps.js","assets/RasterWorker-CzuJtYE2.js","assets/dataUtils-vF4xY8X_.js","assets/RasterSymbolizer-DcMj-1mY.js","assets/rasterFunctionHelper-BI6vU-Vj.js","assets/rasterProjectionHelper-RYmstkN9.js","assets/GCSShiftTransform-GaAYo-G3.js","assets/SceneLayerSnappingSourceWorker-52B3WnZ1.js","assets/lineSegment-DfqfIaUf.js","assets/sphere-C0EZKXiP.js","assets/Octree-TGmjEAm3.js","assets/SceneLayerWorker-ubx_9vHh.js","assets/projectVectorToVector-lcyZvA_j.js","assets/I3SUtil-BxFlh8hB.js","assets/edgeUtils-DM-JDjtr.js","assets/NormalAttribute.glsl-CezO5OEH.js","assets/glsl-BH37Aalp.js","assets/ShaderOutput-DnYY5J1_.js","assets/BindType-BBwFZqyN.js","assets/WFSSourceWorker-CItcqZGQ.js","assets/wfsUtils-DDJ7_YHZ.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-CQhqGbzn.js","assets/enums-BRzLM11V.js","assets/config-BOD8--da.js","assets/StyleDefinition-DeMozHGu.js","assets/SourceLayerData-bu6k-16c.js","assets/StyleRepository-H60Xsdkg.js","assets/Feature3DPipelineWorker-Bd7KIG4W.js","assets/LodRenderer-kHD8sqRW.js","assets/VerticalOffset.glsl-DG9T5glP.js","assets/triangle-D_Xi4TUP.js","assets/basicInterfaces-CZwQPxTp.js","assets/boundedPlane-BSzEv0V9.js","assets/requestImageUtils-De5bT4qm.js","assets/TextureFormat-1mYWTFa-.js","assets/renderState-D4T-ZhU9.js","assets/HUDMaterial.glsl-CnwLPo6Y.js","assets/VertexArrayObject-D1IEO_DV.js","assets/HUDVisibility.glsl-Cssh5VkM.js","assets/doublePrecisionUtils-B0owpBza.js","assets/hydratedFeatures-Ms-n0nXv.js","assets/ShaderBuilder-NneB8bb2.js","assets/IntersectorInterfaces-CmNINbyF.js","assets/RealisticTree.glsl-BaWb-P8A.js","assets/LodResources-Cf3pH50o.js","assets/TextureCompressionWorker-ujR8JZU0.js","assets/ElevationLayer-BQtPGVOO.js","assets/ArcGISCachedService-DAdamAcx.js","assets/TileInfoTilemapCache-Cv03Giv9.js","assets/TilemapCache-BVYbfEXy.js","assets/WorkerHandle-DNH9lJk-.js","assets/layersCreator-Cogw1XcB.js","assets/loadUtils-Bi7MazHR.js","assets/fetchService-VM-as0HE.js","assets/associatedFeatureServiceUtils-BLWds9NF.js","assets/lazyLayerLoader-B6gUuQQ7.js","assets/portalLayers-Ckyjdqs-.js","assets/arcgisLayers-CIS-k77z.js","assets/arcadeUtils-CN3rYIOT.js","assets/arcade-CduS4V6m.js","assets/unitConversion-CmzdKsn5.js","assets/ImmutableArray-BPVd6ESQ.js","assets/webStyleSymbolUtils-B9r2VOrf.js","assets/devEnvironmentUtils-CnNDiFMM.js","assets/webStyleAcceptedFormats-CG7ZQ6BV.js","assets/webglDeps-BHKNIgvu.js","assets/FramebufferObject-D7Barkrt.js","assets/ProgramTemplate-CBJnDEpo.js","assets/NestedMap-GuqgquCN.js","assets/mapViewDeps-DGg9pBDs.js","assets/FeatureCommandQueue-Pg3fwwXd.js","assets/GraphShaderModule-D0zqxKvF.js","assets/WGLContainer-CCktxbtT.js","assets/Container-BYXb5EbL.js","assets/SDFHelper-CY-KYFe-.js","assets/OverrideHelper-Ckd7dcDj.js","assets/GridShader-DLmILeqg.js","assets/testSVGPremultipliedAlpha-eh8PlV0R.js","assets/MaterialPrograms-schR8Ptp.js","assets/CIMResourceManager-MRCpGtPB.js","assets/utils-DevB7HS-.js","assets/VertexStream-sxVJWHxF.js","assets/utils-ehcGqGxa.js","assets/GraphicsView2D-Cub8Vc8T.js","assets/GraphicContainer-BtgVs5Xq.js","assets/AGraphicContainer-D3JZTs9q.js","assets/TechniqueInstance-sVgUwOuv.js","assets/TileContainer-CLNDlmdy.js","assets/gridUtils-Bg7Ee9P6.js","assets/geodesicUtils-sGXN_I8S.js","assets/TileLayerView2D-Bg_GeBbs.js","assets/imageUtils-DGNlEhRQ.js","assets/BitmapTechnique-DYcIgkNk.js","assets/LayerView-CIJ9wB3N.js","assets/HighlightGraphicContainer-BkxRcc9y.js","assets/RefreshableLayerView-5jYOaTey.js","assets/MapServiceLayerViewHelper-COybbRjZ.js","assets/floorFilterUtils-DZ5C6FQv.js","assets/drapedUtils-CSzgK25_.js","assets/sublayerUtils-DJgRpMeL.js","assets/popupUtils-CdM1HcWZ.js","assets/FeatureLayerView2D-CsYHVRXV.js","assets/timeSupport-aPDBp_2Z.js","assets/AttributeBinsFeatureSet-D3-q1yHX.js","assets/constants-B4mRqufT.js","assets/BaseDynamicLayerView2D-CemgqSev.js","assets/BitmapContainer-CvMrVgaE.js","assets/ExportStrategy-DV3uHz7u.js","assets/CatalogLayerView2D-BB9_dGAY.js","assets/CatalogDynamicGroupLayerView2D-BAHuitsH.js","assets/CatalogFootprintLayerView2D-DC3pxkCH.js","assets/GeoRSSLayerView2D-CHCbR0wM.js","assets/GraphicsLayerView2D-BMThjiHf.js","assets/GroupLayerView2D-D4nQwj_t.js","assets/ImageryLayerView2D-GtFKVRqM.js","assets/RasterVFDisplayObject-t51_y8cB.js","assets/ImageryTileLayerView2D-Zsefcexl.js","assets/multidimensionalUtils-vzsl55VZ.js","assets/rasterUtils-CW4x3GK9.js","assets/RawBlockCache-BxgDmKK-.js","assets/KMLLayerView2D-4fmtvwmQ.js","assets/kmlUtils-BgPsIMx7.js","assets/KnowledgeGraphLayerView2D-jAnjwgR8.js","assets/MapImageLayerView2D-CSRTKAUo.js","assets/ExportImageParameters-C4Il8aia.js","assets/MapNotesLayerView2D-DV7UXjfM.js","assets/MediaLayerView2D-DXPHqA6F.js","assets/MediaElementView-58ff4AS1.js","assets/OverlayContainer-D0swuIxw.js","assets/OGCFeatureLayerView2D-KdWzAIkC.js","assets/RouteLayerView2D-DtJvQigE.js","assets/Stop-D4IXx8kl.js","assets/networkEnums-CE1T8H7a.js","assets/StreamLayerView2D-BDkCz2aA.js","assets/SubtypeGroupLayerView2D-C74B7cWL.js","assets/VectorTileLayerView2D-BaL9L30q.js","assets/VideoLayerView2D-CBPYd0Ap.js","assets/GraphicsLayer-DV48kVG3.js","assets/TelemetryDisplay-B4QCAZTx.js","assets/WMSLayerView2D-B2uH2iSj.js","assets/ExportWMSImageParameters-DHwtvSqC.js","assets/WMTSLayerView2D-Cfw-RHge.js","assets/apng-Cgk9zy7x.js","assets/index-hq8MlZzV.js","assets/index-BoqepOWk.js","assets/guid-BhCGcoGA.js","assets/useT9n-CUIs3K86.js","assets/index-BfdRwHIr.js","assets/dom-kPrPk8ai.js","assets/observers-BRYpkLvy.js","assets/ref-wtGsxjYW.js","assets/static-BZKF42xi.js","assets/form-BCCcSR8B.js","assets/interactive-VQERGdBX.js","assets/label-CQbeNvqR.js","assets/component-DQXsSP4v.js","assets/webdocSaveUtils-BeNDgZpY.js","assets/originUtils-D69mHv66.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw.js","assets/resourceUtils-CkRHDzyF.js","assets/resourceUtils-DSbdjJt0.js","assets/saveUtils-BvtmV5R4.js","assets/layersLoader-UiDGdE-6.js","assets/featureLayerUtils-l0lPt551.js","assets/utils-DZYK9zW0.js","assets/FeatureLayerSource-HruBMUao.js","assets/External-DQs06hzh.js","assets/MeshTransform-D1xzwKLS.js","assets/axisAngleDegrees-0lBvlDuq.js","assets/editingSupport-YV5t1_jO.js","assets/QueryTask-B5qYOSeZ.js","assets/executeForIds-Bezv3G22.js","assets/queryAssociations-DoO-v906.js","assets/Association-CHSn3rvi.js","assets/synthesizeAssociationGeometries-5mRODmyH.js","assets/chartUtilsAm5-CNe_CkvU.js","assets/Theme-CHFuc7KR.js","assets/Tooltip-CFwP5q6J.js","assets/DefaultTheme-BwXOxRc2.js","assets/chartCommon-BFzd5PHy.js","assets/Button-BYVp-0Pr.js","assets/ColorSet-BY-51m_g.js","assets/pieChart-CwbHcKbV.js","assets/Tick-Cy1YMN3J.js","assets/xyChart-Dman9EDQ.js","assets/arcade-Dg4pDIel.js","assets/index-ME-QAhQ9.js","assets/key-CBbE744k.js","assets/index-0TAyCnuH.js","assets/customElement-gnwNU0iV.js","assets/keyed-B1WflM9H.js","assets/index-D9v_zJuO.js","assets/index-BT2YK8VI.js","assets/debounce-D0G5qrda.js","assets/utils-DN5InVx8.js","assets/index-zXIHAONi.js","assets/index-Fv6GV2-c.js","assets/floating-ui-BevX_ci3.js","assets/openCloseComponent-C-_kOeNK.js","assets/dynamicClasses-C87yapic.js","assets/index-Dzq-Cn3p.js","assets/index-DlC-SZ2H.js","assets/resources6-DQOeuhPV.js","assets/index-BA-S-VP6.js","assets/resources5-DVzWIMkH.js","assets/index-sDT6dSkA.js","assets/index-pu4ZAHVc.js","assets/customElement-BBUj0o5-.js","assets/FloatingArrow-CpOYZl06.js","assets/index-LaZv9kIs.js","assets/index-CpuGw6FZ.js","assets/customElement-D8mxFZS8.js","assets/index-Cf55l1We.js","assets/index-BaU-fQKA.js","assets/geodesicBufferOperator-Dyff5OAq.js","assets/operatorGeodesicBuffer-djQaCJln.js"])))=>i.map(i=>d[i]);
var Mde=Object.getPrototypeOf;var Ade=Reflect.get;var r6=e=>{throw TypeError(e)};var hC=(e,t,i)=>t.has(e)||r6("Cannot "+i);var re=(e,t,i)=>(hC(e,t,"read from private field"),i?i.call(e):t.get(e)),vt=(e,t,i)=>t.has(e)?r6("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),tt=(e,t,i,r)=>(hC(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),hc=(e,t,i)=>(hC(e,t,"access private method"),i);var s6=(e,t,i)=>Ade(Mde(e),i,t);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();function Ide(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var WW={exports:{}},cA={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cde=Symbol.for("react.transitional.element"),Ode=Symbol.for("react.fragment");function ZW(e,t,i){var r=null;if(i!==void 0&&(r=""+i),t.key!==void 0&&(r=""+t.key),"key"in t){i={};for(var s in t)s!=="key"&&(i[s]=t[s])}else i=t;return t=i.ref,{$$typeof:Cde,type:e,key:r,ref:t!==void 0?t:null,props:i}}cA.Fragment=Ode;cA.jsx=ZW;cA.jsxs=ZW;WW.exports=cA;var z=WW.exports,JW={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xD=Symbol.for("react.transitional.element"),Rde=Symbol.for("react.portal"),Fde=Symbol.for("react.fragment"),Nde=Symbol.for("react.strict_mode"),Lde=Symbol.for("react.profiler"),kde=Symbol.for("react.consumer"),Pde=Symbol.for("react.context"),Dde=Symbol.for("react.forward_ref"),jde=Symbol.for("react.suspense"),Vde=Symbol.for("react.memo"),YW=Symbol.for("react.lazy"),n6=Symbol.iterator;function zde(e){return e===null||typeof e!="object"?null:(e=n6&&e[n6]||e["@@iterator"],typeof e=="function"?e:null)}var QW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XW=Object.assign,KW={};function Hv(e,t,i){this.props=e,this.context=t,this.refs=KW,this.updater=i||QW}Hv.prototype.isReactComponent={};Hv.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hv.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function eZ(){}eZ.prototype=Hv.prototype;function $D(e,t,i){this.props=e,this.context=t,this.refs=KW,this.updater=i||QW}var ED=$D.prototype=new eZ;ED.constructor=$D;XW(ED,Hv.prototype);ED.isPureReactComponent=!0;var o6=Array.isArray,Gt={H:null,A:null,T:null,S:null,V:null},tZ=Object.prototype.hasOwnProperty;function MD(e,t,i,r,s,n){return i=n.ref,{$$typeof:xD,type:e,key:t,ref:i!==void 0?i:null,props:n}}function Ude(e,t){return MD(e.type,t,void 0,void 0,void 0,e.props)}function AD(e){return typeof e=="object"&&e!==null&&e.$$typeof===xD}function qde(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var a6=/\/+/g;function pC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?qde(""+e.key):t.toString(36)}function l6(){}function Gde(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(l6,l6):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Dm(e,t,i,r,s){var n=typeof e;(n==="undefined"||n==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(n){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case xD:case Rde:o=!0;break;case YW:return o=e._init,Dm(o(e._payload),t,i,r,s)}}if(o)return s=s(e),o=r===""?"."+pC(e,0):r,o6(s)?(i="",o!=null&&(i=o.replace(a6,"$&/")+"/"),Dm(s,t,i,"",function(c){return c})):s!=null&&(AD(s)&&(s=Ude(s,i+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(a6,"$&/")+"/")+o)),t.push(s)),1;o=0;var a=r===""?".":r+":";if(o6(e))for(var u=0;u<e.length;u++)r=e[u],n=a+pC(r,u),o+=Dm(r,t,i,n,s);else if(u=zde(e),typeof u=="function")for(e=u.call(e),u=0;!(r=e.next()).done;)r=r.value,n=a+pC(r,u++),o+=Dm(r,t,i,n,s);else if(n==="object"){if(typeof e.then=="function")return Dm(Gde(e),t,i,r,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function _T(e,t,i){if(e==null)return e;var r=[],s=0;return Dm(e,r,"","",function(n){return t.call(i,n,s++)}),r}function Bde(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var u6=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Hde(){}Ve.Children={map:_T,forEach:function(e,t,i){_T(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return _T(e,function(){t++}),t},toArray:function(e){return _T(e,function(t){return t})||[]},only:function(e){if(!AD(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ve.Component=Hv;Ve.Fragment=Fde;Ve.Profiler=Lde;Ve.PureComponent=$D;Ve.StrictMode=Nde;Ve.Suspense=jde;Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Gt;Ve.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Gt.H.useMemoCache(e)}};Ve.cache=function(e){return function(){return e.apply(null,arguments)}};Ve.cloneElement=function(e,t,i){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var r=XW({},e.props),s=e.key,n=void 0;if(t!=null)for(o in t.ref!==void 0&&(n=void 0),t.key!==void 0&&(s=""+t.key),t)!tZ.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(r[o]=t[o]);var o=arguments.length-2;if(o===1)r.children=i;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];r.children=a}return MD(e.type,s,void 0,void 0,n,r)};Ve.createContext=function(e){return e={$$typeof:Pde,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:kde,_context:e},e};Ve.createElement=function(e,t,i){var r,s={},n=null;if(t!=null)for(r in t.key!==void 0&&(n=""+t.key),t)tZ.call(t,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(s[r]=t[r]);var o=arguments.length-2;if(o===1)s.children=i;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];s.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return MD(e,n,void 0,void 0,null,s)};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(e){return{$$typeof:Dde,render:e}};Ve.isValidElement=AD;Ve.lazy=function(e){return{$$typeof:YW,_payload:{_status:-1,_result:e},_init:Bde}};Ve.memo=function(e,t){return{$$typeof:Vde,type:e,compare:t===void 0?null:t}};Ve.startTransition=function(e){var t=Gt.T,i={};Gt.T=i;try{var r=e(),s=Gt.S;s!==null&&s(i,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(Hde,u6)}catch(n){u6(n)}finally{Gt.T=t}};Ve.unstable_useCacheRefresh=function(){return Gt.H.useCacheRefresh()};Ve.use=function(e){return Gt.H.use(e)};Ve.useActionState=function(e,t,i){return Gt.H.useActionState(e,t,i)};Ve.useCallback=function(e,t){return Gt.H.useCallback(e,t)};Ve.useContext=function(e){return Gt.H.useContext(e)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(e,t){return Gt.H.useDeferredValue(e,t)};Ve.useEffect=function(e,t,i){var r=Gt.H;if(typeof i=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)};Ve.useId=function(){return Gt.H.useId()};Ve.useImperativeHandle=function(e,t,i){return Gt.H.useImperativeHandle(e,t,i)};Ve.useInsertionEffect=function(e,t){return Gt.H.useInsertionEffect(e,t)};Ve.useLayoutEffect=function(e,t){return Gt.H.useLayoutEffect(e,t)};Ve.useMemo=function(e,t){return Gt.H.useMemo(e,t)};Ve.useOptimistic=function(e,t){return Gt.H.useOptimistic(e,t)};Ve.useReducer=function(e,t,i){return Gt.H.useReducer(e,t,i)};Ve.useRef=function(e){return Gt.H.useRef(e)};Ve.useState=function(e){return Gt.H.useState(e)};Ve.useSyncExternalStore=function(e,t,i){return Gt.H.useSyncExternalStore(e,t,i)};Ve.useTransition=function(){return Gt.H.useTransition()};Ve.version="19.1.0";JW.exports=Ve;var vr=JW.exports;const c6=Ide(vr);var iZ={exports:{}},dA={},rZ={exports:{}},sZ={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ie,ae){var ne=ie.length;ie.push(ae);e:for(;0<ne;){var De=ne-1>>>1,Ht=ie[De];if(0<s(Ht,ae))ie[De]=ae,ie[ne]=Ht,ne=De;else break e}}function i(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ae=ie[0],ne=ie.pop();if(ne!==ae){ie[0]=ne;e:for(var De=0,Ht=ie.length,Ml=Ht>>>1;De<Ml;){var Al=2*(De+1)-1,Il=ie[Al],Fn=Al+1,Cl=ie[Fn];if(0>s(Il,ne))Fn<Ht&&0>s(Cl,Il)?(ie[De]=Cl,ie[Fn]=ne,De=Fn):(ie[De]=Il,ie[Al]=ne,De=Al);else if(Fn<Ht&&0>s(Cl,ne))ie[De]=Cl,ie[Fn]=ne,De=Fn;else break e}}return ae}function s(ie,ae){var ne=ie.sortIndex-ae.sortIndex;return ne!==0?ne:ie.id-ae.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var n=performance;e.unstable_now=function(){return n.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,p=null,m=3,y=!1,g=!1,v=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function T(ie){for(var ae=i(c);ae!==null;){if(ae.callback===null)r(c);else if(ae.startTime<=ie)r(c),ae.sortIndex=ae.expirationTime,t(u,ae);else break;ae=i(c)}}function E(ie){if(v=!1,T(ie),!g)if(i(u)!==null)g=!0,A||(A=!0,te());else{var ae=i(c);ae!==null&&Qe(E,ae.startTime-ie)}}var A=!1,C=-1,O=5,U=-1;function V(){return b?!0:!(e.unstable_now()-U<O)}function H(){if(b=!1,A){var ie=e.unstable_now();U=ie;var ae=!0;try{e:{g=!1,v&&(v=!1,_(C),C=-1),y=!0;var ne=m;try{t:{for(T(ie),p=i(u);p!==null&&!(p.expirationTime>ie&&V());){var De=p.callback;if(typeof De=="function"){p.callback=null,m=p.priorityLevel;var Ht=De(p.expirationTime<=ie);if(ie=e.unstable_now(),typeof Ht=="function"){p.callback=Ht,T(ie),ae=!0;break t}p===i(u)&&r(u),T(ie)}else r(u);p=i(u)}if(p!==null)ae=!0;else{var Ml=i(c);Ml!==null&&Qe(E,Ml.startTime-ie),ae=!1}}break e}finally{p=null,m=ne,y=!1}ae=void 0}}finally{ae?te():A=!1}}}var te;if(typeof S=="function")te=function(){S(H)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,ce=ye.port2;ye.port1.onmessage=H,te=function(){ce.postMessage(null)}}else te=function(){w(H,0)};function Qe(ie,ae){C=w(function(){ie(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(ie){switch(m){case 1:case 2:case 3:var ae=3;break;default:ae=m}var ne=m;m=ae;try{return ie()}finally{m=ne}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(ie,ae){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ne=m;m=ie;try{return ae()}finally{m=ne}},e.unstable_scheduleCallback=function(ie,ae,ne){var De=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?De+ne:De):ne=De,ie){case 1:var Ht=-1;break;case 2:Ht=250;break;case 5:Ht=1073741823;break;case 4:Ht=1e4;break;default:Ht=5e3}return Ht=ne+Ht,ie={id:h++,callback:ae,priorityLevel:ie,startTime:ne,expirationTime:Ht,sortIndex:-1},ne>De?(ie.sortIndex=ne,t(c,ie),i(u)===null&&ie===i(c)&&(v?(_(C),C=-1):v=!0,Qe(E,ne-De))):(ie.sortIndex=Ht,t(u,ie),g||y||(g=!0,A||(A=!0,te()))),ie},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(ie){var ae=m;return function(){var ne=m;m=ae;try{return ie.apply(this,arguments)}finally{m=ne}}}})(sZ);rZ.exports=sZ;var Wde=rZ.exports,nZ={exports:{}},fs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zde=vr;function oZ(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function pc(){}var us={d:{f:pc,r:function(){throw Error(oZ(522))},D:pc,C:pc,L:pc,m:pc,X:pc,S:pc,M:pc},p:0,findDOMNode:null},Jde=Symbol.for("react.portal");function Yde(e,t,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jde,key:r==null?null:""+r,children:e,containerInfo:t,implementation:i}}var Wb=Zde.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function hA(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}fs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=us;fs.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(oZ(299));return Yde(e,t,null,i)};fs.flushSync=function(e){var t=Wb.T,i=us.p;try{if(Wb.T=null,us.p=2,e)return e()}finally{Wb.T=t,us.p=i,us.d.f()}};fs.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,us.d.C(e,t))};fs.prefetchDNS=function(e){typeof e=="string"&&us.d.D(e)};fs.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var i=t.as,r=hA(i,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,n=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;i==="style"?us.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:n}):i==="script"&&us.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:n,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};fs.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var i=hA(t.as,t.crossOrigin);us.d.M(e,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&us.d.M(e)};fs.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var i=t.as,r=hA(i,t.crossOrigin);us.d.L(e,i,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};fs.preloadModule=function(e,t){if(typeof e=="string")if(t){var i=hA(t.as,t.crossOrigin);us.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else us.d.m(e)};fs.requestFormReset=function(e){us.d.r(e)};fs.unstable_batchedUpdates=function(e,t){return e(t)};fs.useFormState=function(e,t,i){return Wb.H.useFormState(e,t,i)};fs.useFormStatus=function(){return Wb.H.useHostTransitionStatus()};fs.version="19.1.0";function aZ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aZ)}catch(e){console.error(e)}}aZ(),nZ.exports=fs;var Qde=nZ.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hi=Wde,lZ=vr,Xde=Qde;function Z(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function uZ(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function G1(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function cZ(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d6(e){if(G1(e)!==e)throw Error(Z(188))}function Kde(e){var t=e.alternate;if(!t){if(t=G1(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var i=e,r=t;;){var s=i.return;if(s===null)break;var n=s.alternate;if(n===null){if(r=s.return,r!==null){i=r;continue}break}if(s.child===n.child){for(n=s.child;n;){if(n===i)return d6(s),e;if(n===r)return d6(s),t;n=n.sibling}throw Error(Z(188))}if(i.return!==r.return)i=s,r=n;else{for(var o=!1,a=s.child;a;){if(a===i){o=!0,i=s,r=n;break}if(a===r){o=!0,r=s,i=n;break}a=a.sibling}if(!o){for(a=n.child;a;){if(a===i){o=!0,i=n,r=s;break}if(a===r){o=!0,r=n,i=s;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(i.alternate!==r)throw Error(Z(190))}if(i.tag!==3)throw Error(Z(188));return i.stateNode.current===i?e:t}function dZ(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=dZ(e),t!==null)return t;e=e.sibling}return null}var Dt=Object.assign,ehe=Symbol.for("react.element"),ST=Symbol.for("react.transitional.element"),mw=Symbol.for("react.portal"),Wy=Symbol.for("react.fragment"),hZ=Symbol.for("react.strict_mode"),lR=Symbol.for("react.profiler"),the=Symbol.for("react.provider"),pZ=Symbol.for("react.consumer"),Ru=Symbol.for("react.context"),ID=Symbol.for("react.forward_ref"),uR=Symbol.for("react.suspense"),cR=Symbol.for("react.suspense_list"),CD=Symbol.for("react.memo"),cd=Symbol.for("react.lazy"),dR=Symbol.for("react.activity"),ihe=Symbol.for("react.memo_cache_sentinel"),h6=Symbol.iterator;function R0(e){return e===null||typeof e!="object"?null:(e=h6&&e[h6]||e["@@iterator"],typeof e=="function"?e:null)}var rhe=Symbol.for("react.client.reference");function hR(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===rhe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wy:return"Fragment";case lR:return"Profiler";case hZ:return"StrictMode";case uR:return"Suspense";case cR:return"SuspenseList";case dR:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case mw:return"Portal";case Ru:return(e.displayName||"Context")+".Provider";case pZ:return(e._context.displayName||"Context")+".Consumer";case ID:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case CD:return t=e.displayName||null,t!==null?t:hR(e.type)||"Memo";case cd:t=e._payload,e=e._init;try{return hR(e(t))}catch{}}return null}var yw=Array.isArray,Ae=lZ.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut=Xde.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,hf={pending:!1,data:null,method:null,action:null},pR=[],Zy=-1;function Sl(e){return{current:e}}function ur(e){0>Zy||(e.current=pR[Zy],pR[Zy]=null,Zy--)}function Bt(e,t){Zy++,pR[Zy]=e.current,e.current=t}var cl=Sl(null),V_=Sl(null),Bd=Sl(null),oE=Sl(null);function aE(e,t){switch(Bt(Bd,t),Bt(V_,e),Bt(cl,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gz(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=gz(t),e=CY(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ur(cl),Bt(cl,e)}function av(){ur(cl),ur(V_),ur(Bd)}function fR(e){e.memoizedState!==null&&Bt(oE,e);var t=cl.current,i=CY(t,e.type);t!==i&&(Bt(V_,e),Bt(cl,i))}function lE(e){V_.current===e&&(ur(cl),ur(V_)),oE.current===e&&(ur(oE),Y_._currentValue=hf)}var mR=Object.prototype.hasOwnProperty,OD=Hi.unstable_scheduleCallback,fC=Hi.unstable_cancelCallback,she=Hi.unstable_shouldYield,nhe=Hi.unstable_requestPaint,dl=Hi.unstable_now,ohe=Hi.unstable_getCurrentPriorityLevel,fZ=Hi.unstable_ImmediatePriority,mZ=Hi.unstable_UserBlockingPriority,uE=Hi.unstable_NormalPriority,ahe=Hi.unstable_LowPriority,yZ=Hi.unstable_IdlePriority,lhe=Hi.log,uhe=Hi.unstable_setDisableYieldValue,B1=null,gn=null;function Id(e){if(typeof lhe=="function"&&uhe(e),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(B1,e)}catch{}}var vn=Math.clz32?Math.clz32:hhe,che=Math.log,dhe=Math.LN2;function hhe(e){return e>>>=0,e===0?32:31-(che(e)/dhe|0)|0}var TT=256,xT=4194304;function Zh(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function pA(e,t,i){var r=e.pendingLanes;if(r===0)return 0;var s=0,n=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=r&134217727;return a!==0?(r=a&~n,r!==0?s=Zh(r):(o&=a,o!==0?s=Zh(o):i||(i=a&~e,i!==0&&(s=Zh(i))))):(a=r&~n,a!==0?s=Zh(a):o!==0?s=Zh(o):i||(i=r&~e,i!==0&&(s=Zh(i)))),s===0?0:t!==0&&t!==s&&!(t&n)&&(n=s&-s,i=t&-t,n>=i||n===32&&(i&4194048)!==0)?t:s}function H1(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function phe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gZ(){var e=TT;return TT<<=1,!(TT&4194048)&&(TT=256),e}function vZ(){var e=xT;return xT<<=1,!(xT&62914560)&&(xT=4194304),e}function mC(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function W1(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function fhe(e,t,i,r,s,n){var o=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var a=e.entanglements,u=e.expirationTimes,c=e.hiddenUpdates;for(i=o&~i;0<i;){var h=31-vn(i),p=1<<h;a[h]=0,u[h]=-1;var m=c[h];if(m!==null)for(c[h]=null,h=0;h<m.length;h++){var y=m[h];y!==null&&(y.lane&=-536870913)}i&=~p}r!==0&&wZ(e,r,0),n!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=n&~(o&~t))}function wZ(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-vn(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|i&4194090}function bZ(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-vn(i),s=1<<r;s&t|e[r]&t&&(e[r]|=t),i&=~s}}function RD(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function FD(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function _Z(){var e=ut.p;return e!==0?e:(e=window.event,e===void 0?32:VY(e.type))}function mhe(e,t){var i=ut.p;try{return ut.p=e,t()}finally{ut.p=i}}var _h=Math.random().toString(36).slice(2),Vr="__reactFiber$"+_h,qs="__reactProps$"+_h,Wv="__reactContainer$"+_h,yR="__reactEvents$"+_h,yhe="__reactListeners$"+_h,ghe="__reactHandles$"+_h,p6="__reactResources$"+_h,Z1="__reactMarker$"+_h;function ND(e){delete e[Vr],delete e[qs],delete e[yR],delete e[yhe],delete e[ghe]}function Jy(e){var t=e[Vr];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Wv]||i[Vr]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=bz(e);e!==null;){if(i=e[Vr])return i;e=bz(e)}return t}e=i,i=e.parentNode}return null}function Zv(e){if(e=e[Vr]||e[Wv]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function gw(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(Z(33))}function gg(e){var t=e[p6];return t||(t=e[p6]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function sr(e){e[Z1]=!0}var SZ=new Set,TZ={};function im(e,t){lv(e,t),lv(e+"Capture",t)}function lv(e,t){for(TZ[e]=t,e=0;e<t.length;e++)SZ.add(t[e])}var vhe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),f6={},m6={};function whe(e){return mR.call(m6,e)?!0:mR.call(f6,e)?!1:vhe.test(e)?m6[e]=!0:(f6[e]=!0,!1)}function nx(e,t,i){if(whe(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function $T(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Rl(e,t,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+r)}}var yC,y6;function jm(e){if(yC===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);yC=t&&t[1]||"",y6=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yC+e+y6}var gC=!1;function vC(e,t){if(!e||gC)return"";gC=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(y){var m=y}Reflect.construct(e,[],p)}else{try{p.call()}catch(y){m=y}e.call(p.prototype)}}else{try{throw Error()}catch(y){m=y}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(y){if(y&&m&&typeof y.stack=="string")return[y.stack,m.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var n=r.DetermineComponentFrameRoot(),o=n[0],a=n[1];if(o&&a){var u=o.split(`
`),c=a.split(`
`);for(s=r=0;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===u.length||s===c.length)for(r=u.length-1,s=c.length-1;1<=r&&0<=s&&u[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(u[r]!==c[s]){if(r!==1||s!==1)do if(r--,s--,0>s||u[r]!==c[s]){var h=`
`+u[r].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=r&&0<=s);break}}}finally{gC=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?jm(i):""}function bhe(e){switch(e.tag){case 26:case 27:case 5:return jm(e.type);case 16:return jm("Lazy");case 13:return jm("Suspense");case 19:return jm("SuspenseList");case 0:case 15:return vC(e.type,!1);case 11:return vC(e.type.render,!1);case 1:return vC(e.type,!0);case 31:return jm("Activity");default:return""}}function g6(e){try{var t="";do t+=bhe(e),e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function to(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xZ(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _he(e){var t=xZ(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,n=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,n.call(this,o)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cE(e){e._valueTracker||(e._valueTracker=_he(e))}function $Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=xZ(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function dE(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var She=/[\n"\\]/g;function so(e){return e.replace(She,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function gR(e,t,i,r,s,n,o,a){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+to(t)):e.value!==""+to(t)&&(e.value=""+to(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?vR(e,o,to(t)):i!=null?vR(e,o,to(i)):r!=null&&e.removeAttribute("value"),s==null&&n!=null&&(e.defaultChecked=!!n),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+to(a):e.removeAttribute("name")}function EZ(e,t,i,r,s,n,o,a){if(n!=null&&typeof n!="function"&&typeof n!="symbol"&&typeof n!="boolean"&&(e.type=n),t!=null||i!=null){if(!(n!=="submit"&&n!=="reset"||t!=null))return;i=i!=null?""+to(i):"",t=t!=null?""+to(t):i,a||t===e.value||(e.value=t),e.defaultValue=t}r=r??s,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function vR(e,t,i){t==="number"&&dE(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function vg(e,t,i,r){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&r&&(e[i].defaultSelected=!0)}else{for(i=""+to(i),t=null,s=0;s<e.length;s++){if(e[s].value===i){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function MZ(e,t,i){if(t!=null&&(t=""+to(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+to(i):""}function AZ(e,t,i,r){if(t==null){if(r!=null){if(i!=null)throw Error(Z(92));if(yw(r)){if(1<r.length)throw Error(Z(93));r=r[0]}i=r}i==null&&(i=""),t=i}i=to(t),e.defaultValue=i,r=e.textContent,r===i&&r!==""&&r!==null&&(e.value=r)}function uv(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var The=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function v6(e,t,i){var r=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,i):typeof i!="number"||i===0||The.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function IZ(e,t,i){if(t!=null&&typeof t!="object")throw Error(Z(62));if(e=e.style,i!=null){for(var r in i)!i.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&i[s]!==r&&v6(e,s,r)}else for(var n in t)t.hasOwnProperty(n)&&v6(e,n,t[n])}function LD(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xhe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$he=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ox(e){return $he.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var wR=null;function kD(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yy=null,wg=null;function w6(e){var t=Zv(e);if(t&&(e=t.stateNode)){var i=e[qs]||null;e:switch(e=t.stateNode,t.type){case"input":if(gR(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+so(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var s=r[qs]||null;if(!s)throw Error(Z(90));gR(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<i.length;t++)r=i[t],r.form===e.form&&$Z(r)}break e;case"textarea":MZ(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&vg(e,!!i.multiple,t,!1)}}}var wC=!1;function CZ(e,t,i){if(wC)return e(t,i);wC=!0;try{var r=e(t);return r}finally{if(wC=!1,(Yy!==null||wg!==null)&&(TA(),Yy&&(t=Yy,e=wg,wg=Yy=null,w6(t),e)))for(t=0;t<e.length;t++)w6(e[t])}}function z_(e,t){var i=e.stateNode;if(i===null)return null;var r=i[qs]||null;if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Z(231,t,typeof i));return i}var Zu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bR=!1;if(Zu)try{var F0={};Object.defineProperty(F0,"passive",{get:function(){bR=!0}}),window.addEventListener("test",F0,F0),window.removeEventListener("test",F0,F0)}catch{bR=!1}var Cd=null,PD=null,ax=null;function OZ(){if(ax)return ax;var e,t=PD,i=t.length,r,s="value"in Cd?Cd.value:Cd.textContent,n=s.length;for(e=0;e<i&&t[e]===s[e];e++);var o=i-e;for(r=1;r<=o&&t[i-r]===s[n-r];r++);return ax=s.slice(e,1<r?1-r:void 0)}function lx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ET(){return!0}function b6(){return!1}function Js(e){function t(i,r,s,n,o){this._reactName=i,this._targetInst=s,this.type=r,this.nativeEvent=n,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(i=e[a],this[a]=i?i(n):n[a]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?ET:b6,this.isPropagationStopped=b6,this}return Dt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ET)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ET)},persist:function(){},isPersistent:ET}),t}var rm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fA=Js(rm),J1=Dt({},rm,{view:0,detail:0}),Ehe=Js(J1),bC,_C,N0,mA=Dt({},J1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DD,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==N0&&(N0&&e.type==="mousemove"?(bC=e.screenX-N0.screenX,_C=e.screenY-N0.screenY):_C=bC=0,N0=e),bC)},movementY:function(e){return"movementY"in e?e.movementY:_C}}),_6=Js(mA),Mhe=Dt({},mA,{dataTransfer:0}),Ahe=Js(Mhe),Ihe=Dt({},J1,{relatedTarget:0}),SC=Js(Ihe),Che=Dt({},rm,{animationName:0,elapsedTime:0,pseudoElement:0}),Ohe=Js(Che),Rhe=Dt({},rm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fhe=Js(Rhe),Nhe=Dt({},rm,{data:0}),S6=Js(Nhe),Lhe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},khe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Phe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dhe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Phe[e])?!!t[e]:!1}function DD(){return Dhe}var jhe=Dt({},J1,{key:function(e){if(e.key){var t=Lhe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=lx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?khe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DD,charCode:function(e){return e.type==="keypress"?lx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?lx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vhe=Js(jhe),zhe=Dt({},mA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T6=Js(zhe),Uhe=Dt({},J1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DD}),qhe=Js(Uhe),Ghe=Dt({},rm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bhe=Js(Ghe),Hhe=Dt({},mA,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Whe=Js(Hhe),Zhe=Dt({},rm,{newState:0,oldState:0}),Jhe=Js(Zhe),Yhe=[9,13,27,32],jD=Zu&&"CompositionEvent"in window,Zb=null;Zu&&"documentMode"in document&&(Zb=document.documentMode);var Qhe=Zu&&"TextEvent"in window&&!Zb,RZ=Zu&&(!jD||Zb&&8<Zb&&11>=Zb),x6=" ",$6=!1;function FZ(e,t){switch(e){case"keyup":return Yhe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NZ(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qy=!1;function Xhe(e,t){switch(e){case"compositionend":return NZ(t);case"keypress":return t.which!==32?null:($6=!0,x6);case"textInput":return e=t.data,e===x6&&$6?null:e;default:return null}}function Khe(e,t){if(Qy)return e==="compositionend"||!jD&&FZ(e,t)?(e=OZ(),ax=PD=Cd=null,Qy=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return RZ&&t.locale!=="ko"?null:t.data;default:return null}}var epe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E6(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!epe[e.type]:t==="textarea"}function LZ(e,t,i,r){Yy?wg?wg.push(r):wg=[r]:Yy=r,t=IE(t,"onChange"),0<t.length&&(i=new fA("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var Jb=null,U_=null;function tpe(e){MY(e,0)}function yA(e){var t=gw(e);if($Z(t))return e}function M6(e,t){if(e==="change")return t}var kZ=!1;if(Zu){var TC;if(Zu){var xC="oninput"in document;if(!xC){var A6=document.createElement("div");A6.setAttribute("oninput","return;"),xC=typeof A6.oninput=="function"}TC=xC}else TC=!1;kZ=TC&&(!document.documentMode||9<document.documentMode)}function I6(){Jb&&(Jb.detachEvent("onpropertychange",PZ),U_=Jb=null)}function PZ(e){if(e.propertyName==="value"&&yA(U_)){var t=[];LZ(t,U_,e,kD(e)),CZ(tpe,t)}}function ipe(e,t,i){e==="focusin"?(I6(),Jb=t,U_=i,Jb.attachEvent("onpropertychange",PZ)):e==="focusout"&&I6()}function rpe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yA(U_)}function spe(e,t){if(e==="click")return yA(t)}function npe(e,t){if(e==="input"||e==="change")return yA(t)}function ope(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $n=typeof Object.is=="function"?Object.is:ope;function q_(e,t){if($n(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var s=i[r];if(!mR.call(t,s)||!$n(e[s],t[s]))return!1}return!0}function C6(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function O6(e,t){var i=C6(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=C6(i)}}function DZ(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?DZ(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jZ(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=dE(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=dE(e.document)}return t}function VD(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ape=Zu&&"documentMode"in document&&11>=document.documentMode,Xy=null,_R=null,Yb=null,SR=!1;function R6(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;SR||Xy==null||Xy!==dE(r)||(r=Xy,"selectionStart"in r&&VD(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yb&&q_(Yb,r)||(Yb=r,r=IE(_R,"onSelect"),0<r.length&&(t=new fA("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=Xy)))}function Fh(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ky={animationend:Fh("Animation","AnimationEnd"),animationiteration:Fh("Animation","AnimationIteration"),animationstart:Fh("Animation","AnimationStart"),transitionrun:Fh("Transition","TransitionRun"),transitionstart:Fh("Transition","TransitionStart"),transitioncancel:Fh("Transition","TransitionCancel"),transitionend:Fh("Transition","TransitionEnd")},$C={},VZ={};Zu&&(VZ=document.createElement("div").style,"AnimationEvent"in window||(delete Ky.animationend.animation,delete Ky.animationiteration.animation,delete Ky.animationstart.animation),"TransitionEvent"in window||delete Ky.transitionend.transition);function sm(e){if($C[e])return $C[e];if(!Ky[e])return e;var t=Ky[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in VZ)return $C[e]=t[i];return e}var zZ=sm("animationend"),UZ=sm("animationiteration"),qZ=sm("animationstart"),lpe=sm("transitionrun"),upe=sm("transitionstart"),cpe=sm("transitioncancel"),GZ=sm("transitionend"),BZ=new Map,TR="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");TR.push("scrollEnd");function Sa(e,t){BZ.set(e,t),im(t,[e])}var F6=new WeakMap;function no(e,t){if(typeof e=="object"&&e!==null){var i=F6.get(e);return i!==void 0?i:(t={value:e,source:t,stack:g6(t)},F6.set(e,t),t)}return{value:e,source:t,stack:g6(t)}}var Qn=[],eg=0,zD=0;function gA(){for(var e=eg,t=zD=eg=0;t<e;){var i=Qn[t];Qn[t++]=null;var r=Qn[t];Qn[t++]=null;var s=Qn[t];Qn[t++]=null;var n=Qn[t];if(Qn[t++]=null,r!==null&&s!==null){var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}n!==0&&HZ(i,s,n)}}function vA(e,t,i,r){Qn[eg++]=e,Qn[eg++]=t,Qn[eg++]=i,Qn[eg++]=r,zD|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function UD(e,t,i,r){return vA(e,t,i,r),hE(e)}function Jv(e,t){return vA(e,null,null,t),hE(e)}function HZ(e,t,i){e.lanes|=i;var r=e.alternate;r!==null&&(r.lanes|=i);for(var s=!1,n=e.return;n!==null;)n.childLanes|=i,r=n.alternate,r!==null&&(r.childLanes|=i),n.tag===22&&(e=n.stateNode,e===null||e._visibility&1||(s=!0)),e=n,n=n.return;return e.tag===3?(n=e.stateNode,s&&t!==null&&(s=31-vn(i),e=n.hiddenUpdates,r=e[s],r===null?e[s]=[t]:r.push(t),t.lane=i|536870912),n):null}function hE(e){if(50<o_)throw o_=0,GR=null,Error(Z(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var tg={};function dpe(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(e,t,i,r){return new dpe(e,t,i,r)}function qD(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Du(e,t){var i=e.alternate;return i===null?(i=mn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function WZ(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ux(e,t,i,r,s,n){var o=0;if(r=e,typeof e=="function")qD(e)&&(o=1);else if(typeof e=="string")o=pfe(e,i,cl.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case dR:return e=mn(31,i,t,s),e.elementType=dR,e.lanes=n,e;case Wy:return pf(i.children,s,n,t);case hZ:o=8,s|=24;break;case lR:return e=mn(12,i,t,s|2),e.elementType=lR,e.lanes=n,e;case uR:return e=mn(13,i,t,s),e.elementType=uR,e.lanes=n,e;case cR:return e=mn(19,i,t,s),e.elementType=cR,e.lanes=n,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case the:case Ru:o=10;break e;case pZ:o=9;break e;case ID:o=11;break e;case CD:o=14;break e;case cd:o=16,r=null;break e}o=29,i=Error(Z(130,e===null?"null":typeof e,"")),r=null}return t=mn(o,i,t,s),t.elementType=e,t.type=r,t.lanes=n,t}function pf(e,t,i,r){return e=mn(7,e,r,t),e.lanes=i,e}function EC(e,t,i){return e=mn(6,e,null,t),e.lanes=i,e}function MC(e,t,i){return t=mn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ig=[],rg=0,pE=null,fE=0,io=[],ro=0,ff=null,Fu=1,Nu="";function Jh(e,t){ig[rg++]=fE,ig[rg++]=pE,pE=e,fE=t}function ZZ(e,t,i){io[ro++]=Fu,io[ro++]=Nu,io[ro++]=ff,ff=e;var r=Fu;e=Nu;var s=32-vn(r)-1;r&=~(1<<s),i+=1;var n=32-vn(t)+s;if(30<n){var o=s-s%5;n=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fu=1<<32-vn(t)+s|i<<s|r,Nu=n+e}else Fu=1<<n|i<<s|r,Nu=e}function GD(e){e.return!==null&&(Jh(e,1),ZZ(e,1,0))}function BD(e){for(;e===pE;)pE=ig[--rg],ig[rg]=null,fE=ig[--rg],ig[rg]=null;for(;e===ff;)ff=io[--ro],io[ro]=null,Nu=io[--ro],io[ro]=null,Fu=io[--ro],io[ro]=null}var ls=null,di=null,lt=!1,mf=null,sl=!1,xR=Error(Z(519));function If(e){var t=Error(Z(418,""));throw G_(no(t,e)),xR}function N6(e){var t=e.stateNode,i=e.type,r=e.memoizedProps;switch(t[Vr]=e,t[qs]=r,i){case"dialog":We("cancel",t),We("close",t);break;case"iframe":case"object":case"embed":We("load",t);break;case"video":case"audio":for(i=0;i<W_.length;i++)We(W_[i],t);break;case"source":We("error",t);break;case"img":case"image":case"link":We("error",t),We("load",t);break;case"details":We("toggle",t);break;case"input":We("invalid",t),EZ(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),cE(t);break;case"select":We("invalid",t);break;case"textarea":We("invalid",t),AZ(t,r.value,r.defaultValue,r.children),cE(t)}i=r.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||r.suppressHydrationWarning===!0||IY(t.textContent,i)?(r.popover!=null&&(We("beforetoggle",t),We("toggle",t)),r.onScroll!=null&&We("scroll",t),r.onScrollEnd!=null&&We("scrollend",t),r.onClick!=null&&(t.onclick=EA),t=!0):t=!1,t||If(e)}function L6(e){for(ls=e.return;ls;)switch(ls.tag){case 5:case 13:sl=!1;return;case 27:case 3:sl=!0;return;default:ls=ls.return}}function L0(e){if(e!==ls)return!1;if(!lt)return L6(e),lt=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||YR(e.type,e.memoizedProps)),i=!i),i&&di&&If(e),L6(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(t===0){di=pa(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++;e=e.nextSibling}di=null}}else t===27?(t=di,Sh(e.type)?(e=KR,KR=null,di=e):di=t):di=ls?pa(e.stateNode.nextSibling):null;return!0}function Y1(){di=ls=null,lt=!1}function k6(){var e=mf;return e!==null&&(Ns===null?Ns=e:Ns.push.apply(Ns,e),mf=null),e}function G_(e){mf===null?mf=[e]:mf.push(e)}var $R=Sl(null),nm=null,Lu=null;function bd(e,t,i){Bt($R,t._currentValue),t._currentValue=i}function ju(e){e._currentValue=$R.current,ur($R)}function ER(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function MR(e,t,i,r){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var n=s.dependencies;if(n!==null){var o=s.child;n=n.firstContext;e:for(;n!==null;){var a=n;n=s;for(var u=0;u<t.length;u++)if(a.context===t[u]){n.lanes|=i,a=n.alternate,a!==null&&(a.lanes|=i),ER(n.return,i,e),r||(o=null);break e}n=a.next}}else if(s.tag===18){if(o=s.return,o===null)throw Error(Z(341));o.lanes|=i,n=o.alternate,n!==null&&(n.lanes|=i),ER(o,i,e),o=null}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}}function Q1(e,t,i,r){e=null;for(var s=t,n=!1;s!==null;){if(!n){if(s.flags&524288)n=!0;else if(s.flags&262144)break}if(s.tag===10){var o=s.alternate;if(o===null)throw Error(Z(387));if(o=o.memoizedProps,o!==null){var a=s.type;$n(s.pendingProps.value,o.value)||(e!==null?e.push(a):e=[a])}}else if(s===oE.current){if(o=s.alternate,o===null)throw Error(Z(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Y_):e=[Y_])}s=s.return}e!==null&&MR(t,e,i,r),t.flags|=262144}function mE(e){for(e=e.firstContext;e!==null;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cf(e){nm=e,Lu=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function zr(e){return JZ(nm,e)}function MT(e,t){return nm===null&&Cf(e),JZ(e,t)}function JZ(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Lu===null){if(e===null)throw Error(Z(308));Lu=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Lu=Lu.next=t;return i}var hpe=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},ppe=Hi.unstable_scheduleCallback,fpe=Hi.unstable_NormalPriority,qi={$$typeof:Ru,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function HD(){return{controller:new hpe,data:new Map,refCount:0}}function X1(e){e.refCount--,e.refCount===0&&ppe(fpe,function(){e.controller.abort()})}var Qb=null,AR=0,cv=0,bg=null;function mpe(e,t){if(Qb===null){var i=Qb=[];AR=0,cv=m5(),bg={status:"pending",value:void 0,then:function(r){i.push(r)}}}return AR++,t.then(P6,P6),t}function P6(){if(--AR===0&&Qb!==null){bg!==null&&(bg.status="fulfilled");var e=Qb;Qb=null,cv=0,bg=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ype(e,t){var i=[],r={status:"pending",value:null,reason:null,then:function(s){i.push(s)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var s=0;s<i.length;s++)(0,i[s])(t)},function(s){for(r.status="rejected",r.reason=s,s=0;s<i.length;s++)(0,i[s])(void 0)}),r}var D6=Ae.S;Ae.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&mpe(e,t),D6!==null&&D6(e,t)};var yf=Sl(null);function WD(){var e=yf.current;return e!==null?e:It.pooledCache}function cx(e,t){t===null?Bt(yf,yf.current):Bt(yf,t.pool)}function YZ(){var e=WD();return e===null?null:{parent:qi._currentValue,pool:e}}var K1=Error(Z(460)),QZ=Error(Z(474)),wA=Error(Z(542)),IR={then:function(){}};function j6(e){return e=e.status,e==="fulfilled"||e==="rejected"}function AT(){}function XZ(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(AT,AT),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,z6(e),e;default:if(typeof t.status=="string")t.then(AT,AT);else{if(e=It,e!==null&&100<e.shellSuspendCounter)throw Error(Z(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=r}},function(r){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,z6(e),e}throw Xb=t,K1}}var Xb=null;function V6(){if(Xb===null)throw Error(Z(459));var e=Xb;return Xb=null,e}function z6(e){if(e===K1||e===wA)throw Error(Z(483))}var dd=!1;function ZD(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function CR(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Hd(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wd(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ft&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=hE(e),HZ(e,null,i),t}return vA(e,r,t,i),hE(e)}function Kb(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,bZ(e,i)}}function AC(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var s=null,n=null;if(i=i.firstBaseUpdate,i!==null){do{var o={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};n===null?s=n=o:n=n.next=o,i=i.next}while(i!==null);n===null?s=n=t:n=n.next=t}else s=n=t;i={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:n,shared:r.shared,callbacks:r.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var OR=!1;function e_(){if(OR){var e=bg;if(e!==null)throw e}}function t_(e,t,i,r){OR=!1;var s=e.updateQueue;dd=!1;var n=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?n=c:o.next=c,o=u;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(n!==null){var p=s.baseState;o=0,h=c=u=null,a=n;do{var m=a.lane&-536870913,y=m!==a.lane;if(y?(Xe&m)===m:(r&m)===m){m!==0&&m===cv&&(OR=!0),h!==null&&(h=h.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,v=a;m=t;var b=i;switch(v.tag){case 1:if(g=v.payload,typeof g=="function"){p=g.call(b,p,m);break e}p=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(b,p,m):g,m==null)break e;p=Dt({},p,m);break e;case 2:dd=!0}}m=a.callback,m!==null&&(e.flags|=64,y&&(e.flags|=8192),y=s.callbacks,y===null?s.callbacks=[m]:y.push(m))}else y={lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,u=p):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;y=a,a=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);h===null&&(u=p),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,n===null&&(s.shared.lanes=0),uh|=o,e.lanes=o,e.memoizedState=p}}function KZ(e,t){if(typeof e!="function")throw Error(Z(191,e));e.call(t)}function eJ(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)KZ(i[e],t)}var dv=Sl(null),yE=Sl(0);function U6(e,t){e=Qu,Bt(yE,e),Bt(dv,t),Qu=e|t.baseLanes}function RR(){Bt(yE,Qu),Bt(dv,dv.current)}function JD(){Qu=yE.current,ur(dv),ur(yE)}var ah=0,Ge=null,_t=null,Ci=null,gE=!1,_g=!1,Of=!1,vE=0,B_=0,Sg=null,gpe=0;function mi(){throw Error(Z(321))}function YD(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!$n(e[i],t[i]))return!1;return!0}function QD(e,t,i,r,s,n){return ah=n,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ae.H=e===null||e.memoizedState===null?OJ:RJ,Of=!1,n=i(r,s),Of=!1,_g&&(n=iJ(t,i,r,s)),tJ(e),n}function tJ(e){Ae.H=wE;var t=_t!==null&&_t.next!==null;if(ah=0,Ci=_t=Ge=null,gE=!1,B_=0,Sg=null,t)throw Error(Z(300));e===null||or||(e=e.dependencies,e!==null&&mE(e)&&(or=!0))}function iJ(e,t,i,r){Ge=e;var s=0;do{if(_g&&(Sg=null),B_=0,_g=!1,25<=s)throw Error(Z(301));if(s+=1,Ci=_t=null,e.updateQueue!=null){var n=e.updateQueue;n.lastEffect=null,n.events=null,n.stores=null,n.memoCache!=null&&(n.memoCache.index=0)}Ae.H=xpe,n=t(i,r)}while(_g);return n}function vpe(){var e=Ae.H,t=e.useState()[0];return t=typeof t.then=="function"?eS(t):t,e=e.useState()[0],(_t!==null?_t.memoizedState:null)!==e&&(Ge.flags|=1024),t}function XD(){var e=vE!==0;return vE=0,e}function KD(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function e5(e){if(gE){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}gE=!1}ah=0,Ci=_t=Ge=null,_g=!1,B_=vE=0,Sg=null}function Os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?Ge.memoizedState=Ci=e:Ci=Ci.next=e,Ci}function Ri(){if(_t===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=_t.next;var t=Ci===null?Ge.memoizedState:Ci.next;if(t!==null)Ci=t,_t=e;else{if(e===null)throw Ge.alternate===null?Error(Z(467)):Error(Z(310));_t=e,e={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Ci===null?Ge.memoizedState=Ci=e:Ci=Ci.next=e}return Ci}function t5(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eS(e){var t=B_;return B_+=1,Sg===null&&(Sg=[]),e=XZ(Sg,e,t),t=Ge,(Ci===null?t.memoizedState:Ci.next)===null&&(t=t.alternate,Ae.H=t===null||t.memoizedState===null?OJ:RJ),e}function bA(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return eS(e);if(e.$$typeof===Ru)return zr(e)}throw Error(Z(438,String(e)))}function i5(e){var t=null,i=Ge.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var r=Ge.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=t5(),Ge.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),r=0;r<e;r++)i[r]=ihe;return t.index++,i}function Ju(e,t){return typeof t=="function"?t(e):t}function dx(e){var t=Ri();return r5(t,_t,e)}function r5(e,t,i){var r=e.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=i;var s=e.baseQueue,n=r.pending;if(n!==null){if(s!==null){var o=s.next;s.next=n.next,n.next=o}t.baseQueue=s=n,r.pending=null}if(n=e.baseState,s===null)e.memoizedState=n;else{t=s.next;var a=o=null,u=null,c=t,h=!1;do{var p=c.lane&-536870913;if(p!==c.lane?(Xe&p)===p:(ah&p)===p){var m=c.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),p===cv&&(h=!0);else if((ah&m)===m){c=c.next,m===cv&&(h=!0);continue}else p={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(a=u=p,o=n):u=u.next=p,Ge.lanes|=m,uh|=m;p=c.action,Of&&i(n,p),n=c.hasEagerState?c.eagerState:i(n,p)}else m={lane:p,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(a=u=m,o=n):u=u.next=m,Ge.lanes|=p,uh|=p;c=c.next}while(c!==null&&c!==t);if(u===null?o=n:u.next=a,!$n(n,e.memoizedState)&&(or=!0,h&&(i=bg,i!==null)))throw i;e.memoizedState=n,e.baseState=o,e.baseQueue=u,r.lastRenderedState=n}return s===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function IC(e){var t=Ri(),i=t.queue;if(i===null)throw Error(Z(311));i.lastRenderedReducer=e;var r=i.dispatch,s=i.pending,n=t.memoizedState;if(s!==null){i.pending=null;var o=s=s.next;do n=e(n,o.action),o=o.next;while(o!==s);$n(n,t.memoizedState)||(or=!0),t.memoizedState=n,t.baseQueue===null&&(t.baseState=n),i.lastRenderedState=n}return[n,r]}function rJ(e,t,i){var r=Ge,s=Ri(),n=lt;if(n){if(i===void 0)throw Error(Z(407));i=i()}else i=t();var o=!$n((_t||s).memoizedState,i);o&&(s.memoizedState=i,or=!0),s=s.queue;var a=oJ.bind(null,r,s,e);if(tS(2048,8,a,[e]),s.getSnapshot!==t||o||Ci!==null&&Ci.memoizedState.tag&1){if(r.flags|=2048,hv(9,_A(),nJ.bind(null,r,s,i,t),null),It===null)throw Error(Z(349));n||ah&124||sJ(r,t,i)}return i}function sJ(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ge.updateQueue,t===null?(t=t5(),Ge.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function nJ(e,t,i,r){t.value=i,t.getSnapshot=r,aJ(t)&&lJ(e)}function oJ(e,t,i){return i(function(){aJ(t)&&lJ(e)})}function aJ(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!$n(e,i)}catch{return!0}}function lJ(e){var t=Jv(e,2);t!==null&&bn(t,e,2)}function FR(e){var t=Os();if(typeof e=="function"){var i=e;if(e=i(),Of){Id(!0);try{i()}finally{Id(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:e},t}function uJ(e,t,i,r){return e.baseState=i,r5(e,_t,typeof r=="function"?r:Ju)}function wpe(e,t,i,r,s){if(SA(e))throw Error(Z(485));if(e=t.action,e!==null){var n={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){n.listeners.push(o)}};Ae.T!==null?i(!0):n.isTransition=!1,r(n),i=t.pending,i===null?(n.next=t.pending=n,cJ(t,n)):(n.next=i.next,t.pending=i.next=n)}}function cJ(e,t){var i=t.action,r=t.payload,s=e.state;if(t.isTransition){var n=Ae.T,o={};Ae.T=o;try{var a=i(s,r),u=Ae.S;u!==null&&u(o,a),q6(e,t,a)}catch(c){NR(e,t,c)}finally{Ae.T=n}}else try{n=i(s,r),q6(e,t,n)}catch(c){NR(e,t,c)}}function q6(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(r){G6(e,t,r)},function(r){return NR(e,t,r)}):G6(e,t,i)}function G6(e,t,i){t.status="fulfilled",t.value=i,dJ(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,cJ(e,i)))}function NR(e,t,i){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=i,dJ(t),t=t.next;while(t!==r)}e.action=null}function dJ(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function hJ(e,t){return t}function B6(e,t){if(lt){var i=It.formState;if(i!==null){e:{var r=Ge;if(lt){if(di){t:{for(var s=di,n=sl;s.nodeType!==8;){if(!n){s=null;break t}if(s=pa(s.nextSibling),s===null){s=null;break t}}n=s.data,s=n==="F!"||n==="F"?s:null}if(s){di=pa(s.nextSibling),r=s.data==="F!";break e}}If(r)}r=!1}r&&(t=i[0])}}return i=Os(),i.memoizedState=i.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hJ,lastRenderedState:t},i.queue=r,i=AJ.bind(null,Ge,r),r.dispatch=i,r=FR(!1),n=a5.bind(null,Ge,!1,r.queue),r=Os(),s={state:t,dispatch:null,action:e,pending:null},r.queue=s,i=wpe.bind(null,Ge,s,n,i),s.dispatch=i,r.memoizedState=e,[t,i,!1]}function H6(e){var t=Ri();return pJ(t,_t,e)}function pJ(e,t,i){if(t=r5(e,t,hJ)[0],e=dx(Ju)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=eS(t)}catch(o){throw o===K1?wA:o}else r=t;t=Ri();var s=t.queue,n=s.dispatch;return i!==t.memoizedState&&(Ge.flags|=2048,hv(9,_A(),bpe.bind(null,s,i),null)),[r,n,e]}function bpe(e,t){e.action=t}function W6(e){var t=Ri(),i=_t;if(i!==null)return pJ(t,i,e);Ri(),t=t.memoizedState,i=Ri();var r=i.queue.dispatch;return i.memoizedState=e,[t,r,!1]}function hv(e,t,i,r){return e={tag:e,create:i,deps:r,inst:t,next:null},t=Ge.updateQueue,t===null&&(t=t5(),Ge.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e),e}function _A(){return{destroy:void 0,resource:void 0}}function fJ(){return Ri().memoizedState}function hx(e,t,i,r){var s=Os();r=r===void 0?null:r,Ge.flags|=e,s.memoizedState=hv(1|t,_A(),i,r)}function tS(e,t,i,r){var s=Ri();r=r===void 0?null:r;var n=s.memoizedState.inst;_t!==null&&r!==null&&YD(r,_t.memoizedState.deps)?s.memoizedState=hv(t,n,i,r):(Ge.flags|=e,s.memoizedState=hv(1|t,n,i,r))}function Z6(e,t){hx(8390656,8,e,t)}function mJ(e,t){tS(2048,8,e,t)}function yJ(e,t){return tS(4,2,e,t)}function gJ(e,t){return tS(4,4,e,t)}function vJ(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wJ(e,t,i){i=i!=null?i.concat([e]):null,tS(4,4,vJ.bind(null,t,e),i)}function s5(){}function bJ(e,t){var i=Ri();t=t===void 0?null:t;var r=i.memoizedState;return t!==null&&YD(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function _J(e,t){var i=Ri();t=t===void 0?null:t;var r=i.memoizedState;if(t!==null&&YD(t,r[1]))return r[0];if(r=e(),Of){Id(!0);try{e()}finally{Id(!1)}}return i.memoizedState=[r,t],r}function n5(e,t,i){return i===void 0||ah&1073741824?e.memoizedState=t:(e.memoizedState=i,e=dY(),Ge.lanes|=e,uh|=e,i)}function SJ(e,t,i,r){return $n(i,t)?i:dv.current!==null?(e=n5(e,i,r),$n(e,t)||(or=!0),e):ah&42?(e=dY(),Ge.lanes|=e,uh|=e,t):(or=!0,e.memoizedState=i)}function TJ(e,t,i,r,s){var n=ut.p;ut.p=n!==0&&8>n?n:8;var o=Ae.T,a={};Ae.T=a,a5(e,!1,t,i);try{var u=s(),c=Ae.S;if(c!==null&&c(a,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=ype(u,r);i_(e,t,h,wn(e))}else i_(e,t,r,wn(e))}catch(p){i_(e,t,{then:function(){},status:"rejected",reason:p},wn())}finally{ut.p=n,Ae.T=o}}function _pe(){}function LR(e,t,i,r){if(e.tag!==5)throw Error(Z(476));var s=xJ(e).queue;TJ(e,s,t,hf,i===null?_pe:function(){return $J(e),i(r)})}function xJ(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:hf,baseState:hf,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:hf},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function $J(e){var t=xJ(e).next.queue;i_(e,t,{},wn())}function o5(){return zr(Y_)}function EJ(){return Ri().memoizedState}function MJ(){return Ri().memoizedState}function Spe(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=wn();e=Hd(i);var r=Wd(t,e,i);r!==null&&(bn(r,t,i),Kb(r,t,i)),t={cache:HD()},e.payload=t;return}t=t.return}}function Tpe(e,t,i){var r=wn();i={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},SA(e)?IJ(t,i):(i=UD(e,t,i,r),i!==null&&(bn(i,e,r),CJ(i,t,r)))}function AJ(e,t,i){var r=wn();i_(e,t,i,r)}function i_(e,t,i,r){var s={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(SA(e))IJ(t,s);else{var n=e.alternate;if(e.lanes===0&&(n===null||n.lanes===0)&&(n=t.lastRenderedReducer,n!==null))try{var o=t.lastRenderedState,a=n(o,i);if(s.hasEagerState=!0,s.eagerState=a,$n(a,o))return vA(e,t,s,0),It===null&&gA(),!1}catch{}finally{}if(i=UD(e,t,s,r),i!==null)return bn(i,e,r),CJ(i,t,r),!0}return!1}function a5(e,t,i,r){if(r={lane:2,revertLane:m5(),action:r,hasEagerState:!1,eagerState:null,next:null},SA(e)){if(t)throw Error(Z(479))}else t=UD(e,i,r,2),t!==null&&bn(t,e,2)}function SA(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function IJ(e,t){_g=gE=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function CJ(e,t,i){if(i&4194048){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,bZ(e,i)}}var wE={readContext:zr,use:bA,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useLayoutEffect:mi,useInsertionEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useSyncExternalStore:mi,useId:mi,useHostTransitionStatus:mi,useFormState:mi,useActionState:mi,useOptimistic:mi,useMemoCache:mi,useCacheRefresh:mi},OJ={readContext:zr,use:bA,useCallback:function(e,t){return Os().memoizedState=[e,t===void 0?null:t],e},useContext:zr,useEffect:Z6,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,hx(4194308,4,vJ.bind(null,t,e),i)},useLayoutEffect:function(e,t){return hx(4194308,4,e,t)},useInsertionEffect:function(e,t){hx(4,2,e,t)},useMemo:function(e,t){var i=Os();t=t===void 0?null:t;var r=e();if(Of){Id(!0);try{e()}finally{Id(!1)}}return i.memoizedState=[r,t],r},useReducer:function(e,t,i){var r=Os();if(i!==void 0){var s=i(t);if(Of){Id(!0);try{i(t)}finally{Id(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Tpe.bind(null,Ge,e),[r.memoizedState,e]},useRef:function(e){var t=Os();return e={current:e},t.memoizedState=e},useState:function(e){e=FR(e);var t=e.queue,i=AJ.bind(null,Ge,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:s5,useDeferredValue:function(e,t){var i=Os();return n5(i,e,t)},useTransition:function(){var e=FR(!1);return e=TJ.bind(null,Ge,e.queue,!0,!1),Os().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var r=Ge,s=Os();if(lt){if(i===void 0)throw Error(Z(407));i=i()}else{if(i=t(),It===null)throw Error(Z(349));Xe&124||sJ(r,t,i)}s.memoizedState=i;var n={value:i,getSnapshot:t};return s.queue=n,Z6(oJ.bind(null,r,n,e),[e]),r.flags|=2048,hv(9,_A(),nJ.bind(null,r,n,i,t),null),i},useId:function(){var e=Os(),t=It.identifierPrefix;if(lt){var i=Nu,r=Fu;i=(r&~(1<<32-vn(r)-1)).toString(32)+i,t=""+t+"R"+i,i=vE++,0<i&&(t+="H"+i.toString(32)),t+=""}else i=gpe++,t=""+t+"r"+i.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:o5,useFormState:B6,useActionState:B6,useOptimistic:function(e){var t=Os();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=a5.bind(null,Ge,!0,i),i.dispatch=t,[e,t]},useMemoCache:i5,useCacheRefresh:function(){return Os().memoizedState=Spe.bind(null,Ge)}},RJ={readContext:zr,use:bA,useCallback:bJ,useContext:zr,useEffect:mJ,useImperativeHandle:wJ,useInsertionEffect:yJ,useLayoutEffect:gJ,useMemo:_J,useReducer:dx,useRef:fJ,useState:function(){return dx(Ju)},useDebugValue:s5,useDeferredValue:function(e,t){var i=Ri();return SJ(i,_t.memoizedState,e,t)},useTransition:function(){var e=dx(Ju)[0],t=Ri().memoizedState;return[typeof e=="boolean"?e:eS(e),t]},useSyncExternalStore:rJ,useId:EJ,useHostTransitionStatus:o5,useFormState:H6,useActionState:H6,useOptimistic:function(e,t){var i=Ri();return uJ(i,_t,e,t)},useMemoCache:i5,useCacheRefresh:MJ},xpe={readContext:zr,use:bA,useCallback:bJ,useContext:zr,useEffect:mJ,useImperativeHandle:wJ,useInsertionEffect:yJ,useLayoutEffect:gJ,useMemo:_J,useReducer:IC,useRef:fJ,useState:function(){return IC(Ju)},useDebugValue:s5,useDeferredValue:function(e,t){var i=Ri();return _t===null?n5(i,e,t):SJ(i,_t.memoizedState,e,t)},useTransition:function(){var e=IC(Ju)[0],t=Ri().memoizedState;return[typeof e=="boolean"?e:eS(e),t]},useSyncExternalStore:rJ,useId:EJ,useHostTransitionStatus:o5,useFormState:W6,useActionState:W6,useOptimistic:function(e,t){var i=Ri();return _t!==null?uJ(i,_t,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:i5,useCacheRefresh:MJ},Tg=null,H_=0;function IT(e){var t=H_;return H_+=1,Tg===null&&(Tg=[]),XZ(Tg,e,t)}function k0(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function CT(e,t){throw t.$$typeof===ehe?Error(Z(525)):(e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function J6(e){var t=e._init;return t(e._payload)}function FJ(e){function t(w,_){if(e){var S=w.deletions;S===null?(w.deletions=[_],w.flags|=16):S.push(_)}}function i(w,_){if(!e)return null;for(;_!==null;)t(w,_),_=_.sibling;return null}function r(w){for(var _=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(w,_){return w=Du(w,_),w.index=0,w.sibling=null,w}function n(w,_,S){return w.index=S,e?(S=w.alternate,S!==null?(S=S.index,S<_?(w.flags|=67108866,_):S):(w.flags|=67108866,_)):(w.flags|=1048576,_)}function o(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function a(w,_,S,T){return _===null||_.tag!==6?(_=EC(S,w.mode,T),_.return=w,_):(_=s(_,S),_.return=w,_)}function u(w,_,S,T){var E=S.type;return E===Wy?h(w,_,S.props.children,T,S.key):_!==null&&(_.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===cd&&J6(E)===_.type)?(_=s(_,S.props),k0(_,S),_.return=w,_):(_=ux(S.type,S.key,S.props,null,w.mode,T),k0(_,S),_.return=w,_)}function c(w,_,S,T){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=MC(S,w.mode,T),_.return=w,_):(_=s(_,S.children||[]),_.return=w,_)}function h(w,_,S,T,E){return _===null||_.tag!==7?(_=pf(S,w.mode,T,E),_.return=w,_):(_=s(_,S),_.return=w,_)}function p(w,_,S){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=EC(""+_,w.mode,S),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ST:return S=ux(_.type,_.key,_.props,null,w.mode,S),k0(S,_),S.return=w,S;case mw:return _=MC(_,w.mode,S),_.return=w,_;case cd:var T=_._init;return _=T(_._payload),p(w,_,S)}if(yw(_)||R0(_))return _=pf(_,w.mode,S,null),_.return=w,_;if(typeof _.then=="function")return p(w,IT(_),S);if(_.$$typeof===Ru)return p(w,MT(w,_),S);CT(w,_)}return null}function m(w,_,S,T){var E=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return E!==null?null:a(w,_,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ST:return S.key===E?u(w,_,S,T):null;case mw:return S.key===E?c(w,_,S,T):null;case cd:return E=S._init,S=E(S._payload),m(w,_,S,T)}if(yw(S)||R0(S))return E!==null?null:h(w,_,S,T,null);if(typeof S.then=="function")return m(w,_,IT(S),T);if(S.$$typeof===Ru)return m(w,_,MT(w,S),T);CT(w,S)}return null}function y(w,_,S,T,E){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return w=w.get(S)||null,a(_,w,""+T,E);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ST:return w=w.get(T.key===null?S:T.key)||null,u(_,w,T,E);case mw:return w=w.get(T.key===null?S:T.key)||null,c(_,w,T,E);case cd:var A=T._init;return T=A(T._payload),y(w,_,S,T,E)}if(yw(T)||R0(T))return w=w.get(S)||null,h(_,w,T,E,null);if(typeof T.then=="function")return y(w,_,S,IT(T),E);if(T.$$typeof===Ru)return y(w,_,S,MT(_,T),E);CT(_,T)}return null}function g(w,_,S,T){for(var E=null,A=null,C=_,O=_=0,U=null;C!==null&&O<S.length;O++){C.index>O?(U=C,C=null):U=C.sibling;var V=m(w,C,S[O],T);if(V===null){C===null&&(C=U);break}e&&C&&V.alternate===null&&t(w,C),_=n(V,_,O),A===null?E=V:A.sibling=V,A=V,C=U}if(O===S.length)return i(w,C),lt&&Jh(w,O),E;if(C===null){for(;O<S.length;O++)C=p(w,S[O],T),C!==null&&(_=n(C,_,O),A===null?E=C:A.sibling=C,A=C);return lt&&Jh(w,O),E}for(C=r(C);O<S.length;O++)U=y(C,w,O,S[O],T),U!==null&&(e&&U.alternate!==null&&C.delete(U.key===null?O:U.key),_=n(U,_,O),A===null?E=U:A.sibling=U,A=U);return e&&C.forEach(function(H){return t(w,H)}),lt&&Jh(w,O),E}function v(w,_,S,T){if(S==null)throw Error(Z(151));for(var E=null,A=null,C=_,O=_=0,U=null,V=S.next();C!==null&&!V.done;O++,V=S.next()){C.index>O?(U=C,C=null):U=C.sibling;var H=m(w,C,V.value,T);if(H===null){C===null&&(C=U);break}e&&C&&H.alternate===null&&t(w,C),_=n(H,_,O),A===null?E=H:A.sibling=H,A=H,C=U}if(V.done)return i(w,C),lt&&Jh(w,O),E;if(C===null){for(;!V.done;O++,V=S.next())V=p(w,V.value,T),V!==null&&(_=n(V,_,O),A===null?E=V:A.sibling=V,A=V);return lt&&Jh(w,O),E}for(C=r(C);!V.done;O++,V=S.next())V=y(C,w,O,V.value,T),V!==null&&(e&&V.alternate!==null&&C.delete(V.key===null?O:V.key),_=n(V,_,O),A===null?E=V:A.sibling=V,A=V);return e&&C.forEach(function(te){return t(w,te)}),lt&&Jh(w,O),E}function b(w,_,S,T){if(typeof S=="object"&&S!==null&&S.type===Wy&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ST:e:{for(var E=S.key;_!==null;){if(_.key===E){if(E=S.type,E===Wy){if(_.tag===7){i(w,_.sibling),T=s(_,S.props.children),T.return=w,w=T;break e}}else if(_.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===cd&&J6(E)===_.type){i(w,_.sibling),T=s(_,S.props),k0(T,S),T.return=w,w=T;break e}i(w,_);break}else t(w,_);_=_.sibling}S.type===Wy?(T=pf(S.props.children,w.mode,T,S.key),T.return=w,w=T):(T=ux(S.type,S.key,S.props,null,w.mode,T),k0(T,S),T.return=w,w=T)}return o(w);case mw:e:{for(E=S.key;_!==null;){if(_.key===E)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){i(w,_.sibling),T=s(_,S.children||[]),T.return=w,w=T;break e}else{i(w,_);break}else t(w,_);_=_.sibling}T=MC(S,w.mode,T),T.return=w,w=T}return o(w);case cd:return E=S._init,S=E(S._payload),b(w,_,S,T)}if(yw(S))return g(w,_,S,T);if(R0(S)){if(E=R0(S),typeof E!="function")throw Error(Z(150));return S=E.call(S),v(w,_,S,T)}if(typeof S.then=="function")return b(w,_,IT(S),T);if(S.$$typeof===Ru)return b(w,_,MT(w,S),T);CT(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,_!==null&&_.tag===6?(i(w,_.sibling),T=s(_,S),T.return=w,w=T):(i(w,_),T=EC(S,w.mode,T),T.return=w,w=T),o(w)):i(w,_)}return function(w,_,S,T){try{H_=0;var E=b(w,_,S,T);return Tg=null,E}catch(C){if(C===K1||C===wA)throw C;var A=mn(29,C,null,w.mode);return A.lanes=T,A.return=w,A}finally{}}}var pv=FJ(!0),NJ=FJ(!1),vo=Sl(null),hl=null;function _d(e){var t=e.alternate;Bt(Gi,Gi.current&1),Bt(vo,e),hl===null&&(t===null||dv.current!==null||t.memoizedState!==null)&&(hl=e)}function LJ(e){if(e.tag===22){if(Bt(Gi,Gi.current),Bt(vo,e),hl===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(hl=e)}}else Sd()}function Sd(){Bt(Gi,Gi.current),Bt(vo,vo.current)}function ku(e){ur(vo),hl===e&&(hl=null),ur(Gi)}var Gi=Sl(0);function bE(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||XR(i)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function CC(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:Dt({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var kR={enqueueSetState:function(e,t,i){e=e._reactInternals;var r=wn(),s=Hd(r);s.payload=t,i!=null&&(s.callback=i),t=Wd(e,s,r),t!==null&&(bn(t,e,r),Kb(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=wn(),s=Hd(r);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=Wd(e,s,r),t!==null&&(bn(t,e,r),Kb(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=wn(),r=Hd(i);r.tag=2,t!=null&&(r.callback=t),t=Wd(e,r,i),t!==null&&(bn(t,e,i),Kb(t,e,i))}};function Y6(e,t,i,r,s,n,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,n,o):t.prototype&&t.prototype.isPureReactComponent?!q_(i,r)||!q_(s,n):!0}function Q6(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&kR.enqueueReplaceState(t,t.state,null)}function Rf(e,t){var i=t;if("ref"in t){i={};for(var r in t)r!=="ref"&&(i[r]=t[r])}if(e=e.defaultProps){i===t&&(i=Dt({},i));for(var s in e)i[s]===void 0&&(i[s]=e[s])}return i}var _E=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function kJ(e){_E(e)}function PJ(e){console.error(e)}function DJ(e){_E(e)}function SE(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function X6(e,t,i){try{var r=e.onCaughtError;r(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function PR(e,t,i){return i=Hd(i),i.tag=3,i.payload={element:null},i.callback=function(){SE(e,t)},i}function jJ(e){return e=Hd(e),e.tag=3,e}function VJ(e,t,i,r){var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var n=r.value;e.payload=function(){return s(n)},e.callback=function(){X6(t,i,r)}}var o=i.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){X6(t,i,r),typeof s!="function"&&(Zd===null?Zd=new Set([this]):Zd.add(this));var a=r.stack;this.componentDidCatch(r.value,{componentStack:a!==null?a:""})})}function $pe(e,t,i,r,s){if(i.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=i.alternate,t!==null&&Q1(t,i,s,!0),i=vo.current,i!==null){switch(i.tag){case 13:return hl===null?BR():i.alternate===null&&hi===0&&(hi=3),i.flags&=-257,i.flags|=65536,i.lanes=s,r===IR?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([r]):t.add(r),zC(e,r,s)),!1;case 22:return i.flags|=65536,r===IR?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([r]):i.add(r)),zC(e,r,s)),!1}throw Error(Z(435,i.tag))}return zC(e,r,s),BR(),!1}if(lt)return t=vo.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==xR&&(e=Error(Z(422),{cause:r}),G_(no(e,i)))):(r!==xR&&(t=Error(Z(423),{cause:r}),G_(no(t,i))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,r=no(r,i),s=PR(e.stateNode,r,s),AC(e,s),hi!==4&&(hi=2)),!1;var n=Error(Z(520),{cause:r});if(n=no(n,i),n_===null?n_=[n]:n_.push(n),hi!==4&&(hi=2),t===null)return!0;r=no(r,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=s&-s,i.lanes|=e,e=PR(i.stateNode,r,e),AC(i,e),!1;case 1:if(t=i.type,n=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||n!==null&&typeof n.componentDidCatch=="function"&&(Zd===null||!Zd.has(n))))return i.flags|=65536,s&=-s,i.lanes|=s,s=jJ(s),VJ(s,e,i,r),AC(i,s),!1}i=i.return}while(i!==null);return!1}var zJ=Error(Z(461)),or=!1;function wr(e,t,i,r){t.child=e===null?NJ(t,null,i,r):pv(t,e.child,i,r)}function K6(e,t,i,r,s){i=i.render;var n=t.ref;if("ref"in r){var o={};for(var a in r)a!=="ref"&&(o[a]=r[a])}else o=r;return Cf(t),r=QD(e,t,i,o,n,s),a=XD(),e!==null&&!or?(KD(e,t,s),Yu(e,t,s)):(lt&&a&&GD(t),t.flags|=1,wr(e,t,r,s),t.child)}function ez(e,t,i,r,s){if(e===null){var n=i.type;return typeof n=="function"&&!qD(n)&&n.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=n,UJ(e,t,n,r,s)):(e=ux(i.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(n=e.child,!l5(e,s)){var o=n.memoizedProps;if(i=i.compare,i=i!==null?i:q_,i(o,r)&&e.ref===t.ref)return Yu(e,t,s)}return t.flags|=1,e=Du(n,r),e.ref=t.ref,e.return=t,t.child=e}function UJ(e,t,i,r,s){if(e!==null){var n=e.memoizedProps;if(q_(n,r)&&e.ref===t.ref)if(or=!1,t.pendingProps=r=n,l5(e,s))e.flags&131072&&(or=!0);else return t.lanes=e.lanes,Yu(e,t,s)}return DR(e,t,i,r,s)}function qJ(e,t,i){var r=t.pendingProps,s=r.children,n=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if(t.flags&128){if(r=n!==null?n.baseLanes|i:i,e!==null){for(s=t.child=e.child,n=0;s!==null;)n=n|s.lanes|s.childLanes,s=s.sibling;t.childLanes=n&~r}else t.childLanes=0,t.child=null;return tz(e,t,r,i)}if(i&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&cx(t,n!==null?n.cachePool:null),n!==null?U6(t,n):RR(),LJ(t);else return t.lanes=t.childLanes=536870912,tz(e,t,n!==null?n.baseLanes|i:i,i)}else n!==null?(cx(t,n.cachePool),U6(t,n),Sd(),t.memoizedState=null):(e!==null&&cx(t,null),RR(),Sd());return wr(e,t,s,i),t.child}function tz(e,t,i,r){var s=WD();return s=s===null?null:{parent:qi._currentValue,pool:s},t.memoizedState={baseLanes:i,cachePool:s},e!==null&&cx(t,null),RR(),LJ(t),e!==null&&Q1(e,t,r,!0),null}function px(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(Z(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function DR(e,t,i,r,s){return Cf(t),i=QD(e,t,i,r,void 0,s),r=XD(),e!==null&&!or?(KD(e,t,s),Yu(e,t,s)):(lt&&r&&GD(t),t.flags|=1,wr(e,t,i,s),t.child)}function iz(e,t,i,r,s,n){return Cf(t),t.updateQueue=null,i=iJ(t,r,i,s),tJ(e),r=XD(),e!==null&&!or?(KD(e,t,n),Yu(e,t,n)):(lt&&r&&GD(t),t.flags|=1,wr(e,t,i,n),t.child)}function rz(e,t,i,r,s){if(Cf(t),t.stateNode===null){var n=tg,o=i.contextType;typeof o=="object"&&o!==null&&(n=zr(o)),n=new i(r,n),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=kR,t.stateNode=n,n._reactInternals=t,n=t.stateNode,n.props=r,n.state=t.memoizedState,n.refs={},ZD(t),o=i.contextType,n.context=typeof o=="object"&&o!==null?zr(o):tg,n.state=t.memoizedState,o=i.getDerivedStateFromProps,typeof o=="function"&&(CC(t,i,o,r),n.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(o=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),o!==n.state&&kR.enqueueReplaceState(n,n.state,null),t_(t,r,n,s),e_(),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){n=t.stateNode;var a=t.memoizedProps,u=Rf(i,a);n.props=u;var c=n.context,h=i.contextType;o=tg,typeof h=="object"&&h!==null&&(o=zr(h));var p=i.getDerivedStateFromProps;h=typeof p=="function"||typeof n.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,h||typeof n.UNSAFE_componentWillReceiveProps!="function"&&typeof n.componentWillReceiveProps!="function"||(a||c!==o)&&Q6(t,n,r,o),dd=!1;var m=t.memoizedState;n.state=m,t_(t,r,n,s),e_(),c=t.memoizedState,a||m!==c||dd?(typeof p=="function"&&(CC(t,i,p,r),c=t.memoizedState),(u=dd||Y6(t,i,u,r,m,c,o))?(h||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount()),typeof n.componentDidMount=="function"&&(t.flags|=4194308)):(typeof n.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),n.props=r,n.state=c,n.context=o,r=u):(typeof n.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{n=t.stateNode,CR(e,t),o=t.memoizedProps,h=Rf(i,o),n.props=h,p=t.pendingProps,m=n.context,c=i.contextType,u=tg,typeof c=="object"&&c!==null&&(u=zr(c)),a=i.getDerivedStateFromProps,(c=typeof a=="function"||typeof n.getSnapshotBeforeUpdate=="function")||typeof n.UNSAFE_componentWillReceiveProps!="function"&&typeof n.componentWillReceiveProps!="function"||(o!==p||m!==u)&&Q6(t,n,r,u),dd=!1,m=t.memoizedState,n.state=m,t_(t,r,n,s),e_();var y=t.memoizedState;o!==p||m!==y||dd||e!==null&&e.dependencies!==null&&mE(e.dependencies)?(typeof a=="function"&&(CC(t,i,a,r),y=t.memoizedState),(h=dd||Y6(t,i,h,r,m,y,u)||e!==null&&e.dependencies!==null&&mE(e.dependencies))?(c||typeof n.UNSAFE_componentWillUpdate!="function"&&typeof n.componentWillUpdate!="function"||(typeof n.componentWillUpdate=="function"&&n.componentWillUpdate(r,y,u),typeof n.UNSAFE_componentWillUpdate=="function"&&n.UNSAFE_componentWillUpdate(r,y,u)),typeof n.componentDidUpdate=="function"&&(t.flags|=4),typeof n.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof n.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof n.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),n.props=r,n.state=y,n.context=u,r=h):(typeof n.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof n.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return n=r,px(e,t),r=(t.flags&128)!==0,n||r?(n=t.stateNode,i=r&&typeof i.getDerivedStateFromError!="function"?null:n.render(),t.flags|=1,e!==null&&r?(t.child=pv(t,e.child,null,s),t.child=pv(t,null,i,s)):wr(e,t,i,s),t.memoizedState=n.state,e=t.child):e=Yu(e,t,s),e}function sz(e,t,i,r){return Y1(),t.flags|=256,wr(e,t,i,r),t.child}var OC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function RC(e){return{baseLanes:e,cachePool:YZ()}}function FC(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=lo),e}function GJ(e,t,i){var r=t.pendingProps,s=!1,n=(t.flags&128)!==0,o;if((o=n)||(o=e!==null&&e.memoizedState===null?!1:(Gi.current&2)!==0),o&&(s=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(lt){if(s?_d(t):Sd(),lt){var a=di,u;if(u=a){e:{for(u=a,a=sl;u.nodeType!==8;){if(!a){a=null;break e}if(u=pa(u.nextSibling),u===null){a=null;break e}}a=u}a!==null?(t.memoizedState={dehydrated:a,treeContext:ff!==null?{id:Fu,overflow:Nu}:null,retryLane:536870912,hydrationErrors:null},u=mn(18,null,null,0),u.stateNode=a,u.return=t,t.child=u,ls=t,di=null,u=!0):u=!1}u||If(t)}if(a=t.memoizedState,a!==null&&(a=a.dehydrated,a!==null))return XR(a)?t.lanes=32:t.lanes=536870912,null;ku(t)}return a=r.children,r=r.fallback,s?(Sd(),s=t.mode,a=TE({mode:"hidden",children:a},s),r=pf(r,s,i,null),a.return=t,r.return=t,a.sibling=r,t.child=a,s=t.child,s.memoizedState=RC(i),s.childLanes=FC(e,o,i),t.memoizedState=OC,r):(_d(t),jR(t,a))}if(u=e.memoizedState,u!==null&&(a=u.dehydrated,a!==null)){if(n)t.flags&256?(_d(t),t.flags&=-257,t=NC(e,t,i)):t.memoizedState!==null?(Sd(),t.child=e.child,t.flags|=128,t=null):(Sd(),s=r.fallback,a=t.mode,r=TE({mode:"visible",children:r.children},a),s=pf(s,a,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,pv(t,e.child,null,i),r=t.child,r.memoizedState=RC(i),r.childLanes=FC(e,o,i),t.memoizedState=OC,t=s);else if(_d(t),XR(a)){if(o=a.nextSibling&&a.nextSibling.dataset,o)var c=o.dgst;o=c,r=Error(Z(419)),r.stack="",r.digest=o,G_({value:r,source:null,stack:null}),t=NC(e,t,i)}else if(or||Q1(e,t,i,!1),o=(i&e.childLanes)!==0,or||o){if(o=It,o!==null&&(r=i&-i,r=r&42?1:RD(r),r=r&(o.suspendedLanes|i)?0:r,r!==0&&r!==u.retryLane))throw u.retryLane=r,Jv(e,r),bn(o,e,r),zJ;a.data==="$?"||BR(),t=NC(e,t,i)}else a.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,di=pa(a.nextSibling),ls=t,lt=!0,mf=null,sl=!1,e!==null&&(io[ro++]=Fu,io[ro++]=Nu,io[ro++]=ff,Fu=e.id,Nu=e.overflow,ff=t),t=jR(t,r.children),t.flags|=4096);return t}return s?(Sd(),s=r.fallback,a=t.mode,u=e.child,c=u.sibling,r=Du(u,{mode:"hidden",children:r.children}),r.subtreeFlags=u.subtreeFlags&65011712,c!==null?s=Du(c,s):(s=pf(s,a,i,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a===null?a=RC(i):(u=a.cachePool,u!==null?(c=qi._currentValue,u=u.parent!==c?{parent:c,pool:c}:u):u=YZ(),a={baseLanes:a.baseLanes|i,cachePool:u}),s.memoizedState=a,s.childLanes=FC(e,o,i),t.memoizedState=OC,r):(_d(t),i=e.child,e=i.sibling,i=Du(i,{mode:"visible",children:r.children}),i.return=t,i.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=i,t.memoizedState=null,i)}function jR(e,t){return t=TE({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function TE(e,t){return e=mn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function NC(e,t,i){return pv(t,e.child,null,i),e=jR(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nz(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ER(e.return,t,i)}function LC(e,t,i,r,s){var n=e.memoizedState;n===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:s}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=r,n.tail=i,n.tailMode=s)}function BJ(e,t,i){var r=t.pendingProps,s=r.revealOrder,n=r.tail;if(wr(e,t,r.children,i),r=Gi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nz(e,i,t);else if(e.tag===19)nz(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(Bt(Gi,r),s){case"forwards":for(i=t.child,s=null;i!==null;)e=i.alternate,e!==null&&bE(e)===null&&(s=i),i=i.sibling;i=s,i===null?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),LC(t,!1,s,i,n);break;case"backwards":for(i=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&bE(e)===null){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}LC(t,!0,i,null,n);break;case"together":LC(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yu(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),uh|=t.lanes,!(i&t.childLanes))if(e!==null){if(Q1(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,i=Du(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Du(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function l5(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&mE(e)))}function Epe(e,t,i){switch(t.tag){case 3:aE(t,t.stateNode.containerInfo),bd(t,qi,e.memoizedState.cache),Y1();break;case 27:case 5:fR(t);break;case 4:aE(t,t.stateNode.containerInfo);break;case 10:bd(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(_d(t),t.flags|=128,null):i&t.child.childLanes?GJ(e,t,i):(_d(t),e=Yu(e,t,i),e!==null?e.sibling:null);_d(t);break;case 19:var s=(e.flags&128)!==0;if(r=(i&t.childLanes)!==0,r||(Q1(e,t,i,!1),r=(i&t.childLanes)!==0),s){if(r)return BJ(e,t,i);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Bt(Gi,Gi.current),r)break;return null;case 22:case 23:return t.lanes=0,qJ(e,t,i);case 24:bd(t,qi,e.memoizedState.cache)}return Yu(e,t,i)}function HJ(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)or=!0;else{if(!l5(e,i)&&!(t.flags&128))return or=!1,Epe(e,t,i);or=!!(e.flags&131072)}else or=!1,lt&&t.flags&1048576&&ZZ(t,fE,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,typeof r=="function")qD(r)?(e=Rf(r,e),t.tag=1,t=rz(null,t,r,e,i)):(t.tag=0,t=DR(null,t,r,e,i));else{if(r!=null){if(s=r.$$typeof,s===ID){t.tag=11,t=K6(null,t,r,e,i);break e}else if(s===CD){t.tag=14,t=ez(null,t,r,e,i);break e}}throw t=hR(r)||r,Error(Z(306,t,""))}}return t;case 0:return DR(e,t,t.type,t.pendingProps,i);case 1:return r=t.type,s=Rf(r,t.pendingProps),rz(e,t,r,s,i);case 3:e:{if(aE(t,t.stateNode.containerInfo),e===null)throw Error(Z(387));r=t.pendingProps;var n=t.memoizedState;s=n.element,CR(e,t),t_(t,r,null,i);var o=t.memoizedState;if(r=o.cache,bd(t,qi,r),r!==n.cache&&MR(t,[qi],i,!0),e_(),r=o.element,n.isDehydrated)if(n={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=n,t.memoizedState=n,t.flags&256){t=sz(e,t,r,i);break e}else if(r!==s){s=no(Error(Z(424)),t),G_(s),t=sz(e,t,r,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(di=pa(e.firstChild),ls=t,lt=!0,mf=null,sl=!0,i=NJ(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Y1(),r===s){t=Yu(e,t,i);break e}wr(e,t,r,i)}t=t.child}return t;case 26:return px(e,t),e===null?(i=Sz(t.type,null,t.pendingProps,null))?t.memoizedState=i:lt||(i=t.type,e=t.pendingProps,r=CE(Bd.current).createElement(i),r[Vr]=t,r[qs]=e,Tr(r,i,e),sr(r),t.stateNode=r):t.memoizedState=Sz(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return fR(t),e===null&&lt&&(r=t.stateNode=RY(t.type,t.pendingProps,Bd.current),ls=t,sl=!0,s=di,Sh(t.type)?(KR=s,di=pa(r.firstChild)):di=s),wr(e,t,t.pendingProps.children,i),px(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&lt&&((s=r=di)&&(r=efe(r,t.type,t.pendingProps,sl),r!==null?(t.stateNode=r,ls=t,di=pa(r.firstChild),sl=!1,s=!0):s=!1),s||If(t)),fR(t),s=t.type,n=t.pendingProps,o=e!==null?e.memoizedProps:null,r=n.children,YR(s,n)?r=null:o!==null&&YR(s,o)&&(t.flags|=32),t.memoizedState!==null&&(s=QD(e,t,vpe,null,null,i),Y_._currentValue=s),px(e,t),wr(e,t,r,i),t.child;case 6:return e===null&&lt&&((e=i=di)&&(i=tfe(i,t.pendingProps,sl),i!==null?(t.stateNode=i,ls=t,di=null,e=!0):e=!1),e||If(t)),null;case 13:return GJ(e,t,i);case 4:return aE(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=pv(t,null,r,i):wr(e,t,r,i),t.child;case 11:return K6(e,t,t.type,t.pendingProps,i);case 7:return wr(e,t,t.pendingProps,i),t.child;case 8:return wr(e,t,t.pendingProps.children,i),t.child;case 12:return wr(e,t,t.pendingProps.children,i),t.child;case 10:return r=t.pendingProps,bd(t,t.type,r.value),wr(e,t,r.children,i),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Cf(t),s=zr(s),r=r(s),t.flags|=1,wr(e,t,r,i),t.child;case 14:return ez(e,t,t.type,t.pendingProps,i);case 15:return UJ(e,t,t.type,t.pendingProps,i);case 19:return BJ(e,t,i);case 31:return r=t.pendingProps,i=t.mode,r={mode:r.mode,children:r.children},e===null?(i=TE(r,i),i.ref=t.ref,t.child=i,i.return=t,t=i):(i=Du(e.child,r),i.ref=t.ref,t.child=i,i.return=t,t=i),t;case 22:return qJ(e,t,i);case 24:return Cf(t),r=zr(qi),e===null?(s=WD(),s===null&&(s=It,n=HD(),s.pooledCache=n,n.refCount++,n!==null&&(s.pooledCacheLanes|=i),s=n),t.memoizedState={parent:r,cache:s},ZD(t),bd(t,qi,s)):(e.lanes&i&&(CR(e,t),t_(t,null,null,i),e_()),s=e.memoizedState,n=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),bd(t,qi,r)):(r=n.cache,bd(t,qi,r),r!==s.cache&&MR(t,[qi],i,!0))),wr(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(Z(156,t.tag))}function Fl(e){e.flags|=4}function oz(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!LY(t)){if(t=vo.current,t!==null&&((Xe&4194048)===Xe?hl!==null:(Xe&62914560)!==Xe&&!(Xe&536870912)||t!==hl))throw Xb=IR,QZ;e.flags|=8192}}function OT(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?vZ():536870912,e.lanes|=t,fv|=t)}function P0(e,t){if(!lt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var s=e.child;s!==null;)i|=s.lanes|s.childLanes,r|=s.subtreeFlags&65011712,r|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)i|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function Mpe(e,t,i){var r=t.pendingProps;switch(BD(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(t),null;case 1:return Wt(t),null;case 3:return i=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ju(qi),av(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(L0(t)?Fl(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,k6())),Wt(t),null;case 26:return i=t.memoizedState,e===null?(Fl(t),i!==null?(Wt(t),oz(t,i)):(Wt(t),t.flags&=-16777217)):i?i!==e.memoizedState?(Fl(t),Wt(t),oz(t,i)):(Wt(t),t.flags&=-16777217):(e.memoizedProps!==r&&Fl(t),Wt(t),t.flags&=-16777217),null;case 27:lE(t),i=Bd.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Fl(t);else{if(!r){if(t.stateNode===null)throw Error(Z(166));return Wt(t),null}e=cl.current,L0(t)?N6(t):(e=RY(s,r,i),t.stateNode=e,Fl(t))}return Wt(t),null;case 5:if(lE(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Fl(t);else{if(!r){if(t.stateNode===null)throw Error(Z(166));return Wt(t),null}if(e=cl.current,L0(t))N6(t);else{switch(s=CE(Bd.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof r.is=="string"?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e=typeof r.is=="string"?s.createElement(i,{is:r.is}):s.createElement(i)}}e[Vr]=t,e[qs]=r;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(Tr(e,i,r),i){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Fl(t)}}return Wt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Fl(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Z(166));if(e=Bd.current,L0(t)){if(e=t.stateNode,i=t.memoizedProps,r=null,s=ls,s!==null)switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Vr]=t,e=!!(e.nodeValue===i||r!==null&&r.suppressHydrationWarning===!0||IY(e.nodeValue,i)),e||If(t)}else e=CE(e).createTextNode(r),e[Vr]=t,t.stateNode=e}return Wt(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=L0(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Z(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[Vr]=t}else Y1(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wt(t),s=!1}else s=k6(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(ku(t),t):(ku(t),null)}if(ku(t),t.flags&128)return t.lanes=i,t;if(i=r!==null,e=e!==null&&e.memoizedState!==null,i){r=t.child,s=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(s=r.alternate.memoizedState.cachePool.pool);var n=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==s&&(r.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),OT(t,t.updateQueue),Wt(t),null;case 4:return av(),e===null&&y5(t.stateNode.containerInfo),Wt(t),null;case 10:return ju(t.type),Wt(t),null;case 19:if(ur(Gi),s=t.memoizedState,s===null)return Wt(t),null;if(r=(t.flags&128)!==0,n=s.rendering,n===null)if(r)P0(s,!1);else{if(hi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(n=bE(e),n!==null){for(t.flags|=128,P0(s,!1),e=n.updateQueue,t.updateQueue=e,OT(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)WZ(i,e),i=i.sibling;return Bt(Gi,Gi.current&1|2),t.child}e=e.sibling}s.tail!==null&&dl()>$E&&(t.flags|=128,r=!0,P0(s,!1),t.lanes=4194304)}else{if(!r)if(e=bE(n),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,OT(t,e),P0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!n.alternate&&!lt)return Wt(t),null}else 2*dl()-s.renderingStartTime>$E&&i!==536870912&&(t.flags|=128,r=!0,P0(s,!1),t.lanes=4194304);s.isBackwards?(n.sibling=t.child,t.child=n):(e=s.last,e!==null?e.sibling=n:t.child=n,s.last=n)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=dl(),t.sibling=null,e=Gi.current,Bt(Gi,r?e&1|2:e&1),t):(Wt(t),null);case 22:case 23:return ku(t),JD(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?i&536870912&&!(t.flags&128)&&(Wt(t),t.subtreeFlags&6&&(t.flags|=8192)):Wt(t),i=t.updateQueue,i!==null&&OT(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==i&&(t.flags|=2048),e!==null&&ur(yf),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ju(qi),Wt(t),null;case 25:return null;case 30:return null}throw Error(Z(156,t.tag))}function Ape(e,t){switch(BD(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ju(qi),av(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return lE(t),null;case 13:if(ku(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));Y1()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ur(Gi),null;case 4:return av(),null;case 10:return ju(t.type),null;case 22:case 23:return ku(t),JD(),e!==null&&ur(yf),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ju(qi),null;case 25:return null;default:return null}}function WJ(e,t){switch(BD(t),t.tag){case 3:ju(qi),av();break;case 26:case 27:case 5:lE(t);break;case 4:av();break;case 13:ku(t);break;case 19:ur(Gi);break;case 10:ju(t.type);break;case 22:case 23:ku(t),JD(),e!==null&&ur(yf);break;case 24:ju(qi)}}function iS(e,t){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){r=void 0;var n=i.create,o=i.inst;r=n(),o.destroy=r}i=i.next}while(i!==s)}}catch(a){$t(t,t.return,a)}}function lh(e,t,i){try{var r=t.updateQueue,s=r!==null?r.lastEffect:null;if(s!==null){var n=s.next;r=n;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,s=t;var u=i,c=a;try{c()}catch(h){$t(s,u,h)}}}r=r.next}while(r!==n)}}catch(h){$t(t,t.return,h)}}function ZJ(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{eJ(t,i)}catch(r){$t(e,e.return,r)}}}function JJ(e,t,i){i.props=Rf(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){$t(e,t,r)}}function r_(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof i=="function"?e.refCleanup=i(r):i.current=r}}catch(s){$t(e,t,s)}}function ol(e,t){var i=e.ref,r=e.refCleanup;if(i!==null)if(typeof r=="function")try{r()}catch(s){$t(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(s){$t(e,t,s)}else i.current=null}function YJ(e){var t=e.type,i=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break e;case"img":i.src?r.src=i.src:i.srcSet&&(r.srcset=i.srcSet)}}catch(s){$t(e,e.return,s)}}function kC(e,t,i){try{var r=e.stateNode;Jpe(r,e.type,i,t),r[qs]=t}catch(s){$t(e,e.return,s)}}function QJ(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Sh(e.type)||e.tag===4}function PC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||QJ(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Sh(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function VR(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=EA));else if(r!==4&&(r===27&&Sh(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(VR(e,t,i),e=e.sibling;e!==null;)VR(e,t,i),e=e.sibling}function xE(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(r===27&&Sh(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(xE(e,t,i),e=e.sibling;e!==null;)xE(e,t,i),e=e.sibling}function XJ(e){var t=e.stateNode,i=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Tr(t,r,i),t[Vr]=e,t[qs]=i}catch(n){$t(e,e.return,n)}}var Au=!1,bi=!1,DC=!1,az=typeof WeakSet=="function"?WeakSet:Set,rr=null;function Ipe(e,t){if(e=e.containerInfo,ZR=NE,e=jZ(e),VD(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var s=r.anchorOffset,n=r.focusNode;r=r.focusOffset;try{i.nodeType,n.nodeType}catch{i=null;break e}var o=0,a=-1,u=-1,c=0,h=0,p=e,m=null;t:for(;;){for(var y;p!==i||s!==0&&p.nodeType!==3||(a=o+s),p!==n||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===e)break t;if(m===i&&++c===s&&(a=o),m===n&&++h===r&&(u=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}i=a===-1||u===-1?null:{start:a,end:u}}else i=null}i=i||{start:0,end:0}}else i=null;for(JR={focusedElem:e,selectionRange:i},NE=!1,rr=t;rr!==null;)if(t=rr,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,rr=e;else for(;rr!==null;){switch(t=rr,n=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&n!==null){e=void 0,i=t,s=n.memoizedProps,n=n.memoizedState,r=i.stateNode;try{var g=Rf(i.type,s,i.elementType===i.type);e=r.getSnapshotBeforeUpdate(g,n),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){$t(i,i.return,v)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)QR(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":QR(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(Z(163))}if(e=t.sibling,e!==null){e.return=t.return,rr=e;break}rr=t.return}}function KJ(e,t,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:fc(e,i),r&4&&iS(5,i);break;case 1:if(fc(e,i),r&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(o){$t(i,i.return,o)}else{var s=Rf(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){$t(i,i.return,o)}}r&64&&ZJ(i),r&512&&r_(i,i.return);break;case 3:if(fc(e,i),r&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{eJ(e,t)}catch(o){$t(i,i.return,o)}}break;case 27:t===null&&r&4&&XJ(i);case 26:case 5:fc(e,i),t===null&&r&4&&YJ(i),r&512&&r_(i,i.return);break;case 12:fc(e,i);break;case 13:fc(e,i),r&4&&iY(e,i),r&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Dpe.bind(null,i),ife(e,i))));break;case 22:if(r=i.memoizedState!==null||Au,!r){t=t!==null&&t.memoizedState!==null||bi,s=Au;var n=bi;Au=r,(bi=t)&&!n?Cc(e,i,(i.subtreeFlags&8772)!==0):fc(e,i),Au=s,bi=n}break;case 30:break;default:fc(e,i)}}function eY(e){var t=e.alternate;t!==null&&(e.alternate=null,eY(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ND(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ut=null,Rs=!1;function Nl(e,t,i){for(i=i.child;i!==null;)tY(e,t,i),i=i.sibling}function tY(e,t,i){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(B1,i)}catch{}switch(i.tag){case 26:bi||ol(i,t),Nl(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:bi||ol(i,t);var r=Ut,s=Rs;Sh(i.type)&&(Ut=i.stateNode,Rs=!1),Nl(e,t,i),a_(i.stateNode),Ut=r,Rs=s;break;case 5:bi||ol(i,t);case 6:if(r=Ut,s=Rs,Ut=null,Nl(e,t,i),Ut=r,Rs=s,Ut!==null)if(Rs)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(i.stateNode)}catch(n){$t(i,t,n)}else try{Ut.removeChild(i.stateNode)}catch(n){$t(i,t,n)}break;case 18:Ut!==null&&(Rs?(e=Ut,wz(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),K_(e)):wz(Ut,i.stateNode));break;case 4:r=Ut,s=Rs,Ut=i.stateNode.containerInfo,Rs=!0,Nl(e,t,i),Ut=r,Rs=s;break;case 0:case 11:case 14:case 15:bi||lh(2,i,t),bi||lh(4,i,t),Nl(e,t,i);break;case 1:bi||(ol(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"&&JJ(i,t,r)),Nl(e,t,i);break;case 21:Nl(e,t,i);break;case 22:bi=(r=bi)||i.memoizedState!==null,Nl(e,t,i),bi=r;break;default:Nl(e,t,i)}}function iY(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{K_(e)}catch(i){$t(t,t.return,i)}}function Cpe(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new az),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new az),t;default:throw Error(Z(435,e.tag))}}function jC(e,t){var i=Cpe(e);t.forEach(function(r){var s=jpe.bind(null,e,r);i.has(r)||(i.add(r),r.then(s,s))})}function Ys(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var s=i[r],n=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 27:if(Sh(a.type)){Ut=a.stateNode,Rs=!1;break e}break;case 5:Ut=a.stateNode,Rs=!1;break e;case 3:case 4:Ut=a.stateNode.containerInfo,Rs=!0;break e}a=a.return}if(Ut===null)throw Error(Z(160));tY(n,o,s),Ut=null,Rs=!1,n=s.alternate,n!==null&&(n.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)rY(t,e),t=t.sibling}var oa=null;function rY(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ys(t,e),Qs(e),r&4&&(lh(3,e,e.return),iS(3,e),lh(5,e,e.return));break;case 1:Ys(t,e),Qs(e),r&512&&(bi||i===null||ol(i,i.return)),r&64&&Au&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?r:i.concat(r))));break;case 26:var s=oa;if(Ys(t,e),Qs(e),r&512&&(bi||i===null||ol(i,i.return)),r&4){var n=i!==null?i.memoizedState:null;if(r=e.memoizedState,i===null)if(r===null)if(e.stateNode===null){e:{r=e.type,i=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":n=s.getElementsByTagName("title")[0],(!n||n[Z1]||n[Vr]||n.namespaceURI==="http://www.w3.org/2000/svg"||n.hasAttribute("itemprop"))&&(n=s.createElement(r),s.head.insertBefore(n,s.querySelector("head > title"))),Tr(n,r,i),n[Vr]=e,sr(n),r=n;break e;case"link":var o=xz("link","href",s).get(r+(i.href||""));if(o){for(var a=0;a<o.length;a++)if(n=o[a],n.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&n.getAttribute("rel")===(i.rel==null?null:i.rel)&&n.getAttribute("title")===(i.title==null?null:i.title)&&n.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){o.splice(a,1);break t}}n=s.createElement(r),Tr(n,r,i),s.head.appendChild(n);break;case"meta":if(o=xz("meta","content",s).get(r+(i.content||""))){for(a=0;a<o.length;a++)if(n=o[a],n.getAttribute("content")===(i.content==null?null:""+i.content)&&n.getAttribute("name")===(i.name==null?null:i.name)&&n.getAttribute("property")===(i.property==null?null:i.property)&&n.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&n.getAttribute("charset")===(i.charSet==null?null:i.charSet)){o.splice(a,1);break t}}n=s.createElement(r),Tr(n,r,i),s.head.appendChild(n);break;default:throw Error(Z(468,r))}n[Vr]=e,sr(n),r=n}e.stateNode=r}else $z(s,e.type,e.stateNode);else e.stateNode=Tz(s,r,e.memoizedProps);else n!==r?(n===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):n.count--,r===null?$z(s,e.type,e.stateNode):Tz(s,r,e.memoizedProps)):r===null&&e.stateNode!==null&&kC(e,e.memoizedProps,i.memoizedProps)}break;case 27:Ys(t,e),Qs(e),r&512&&(bi||i===null||ol(i,i.return)),i!==null&&r&4&&kC(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Ys(t,e),Qs(e),r&512&&(bi||i===null||ol(i,i.return)),e.flags&32){s=e.stateNode;try{uv(s,"")}catch(y){$t(e,e.return,y)}}r&4&&e.stateNode!=null&&(s=e.memoizedProps,kC(e,s,i!==null?i.memoizedProps:s)),r&1024&&(DC=!0);break;case 6:if(Ys(t,e),Qs(e),r&4){if(e.stateNode===null)throw Error(Z(162));r=e.memoizedProps,i=e.stateNode;try{i.nodeValue=r}catch(y){$t(e,e.return,y)}}break;case 3:if(yx=null,s=oa,oa=OE(t.containerInfo),Ys(t,e),oa=s,Qs(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{K_(t.containerInfo)}catch(y){$t(e,e.return,y)}DC&&(DC=!1,sY(e));break;case 4:r=oa,oa=OE(e.stateNode.containerInfo),Ys(t,e),Qs(e),oa=r;break;case 12:Ys(t,e),Qs(e);break;case 13:Ys(t,e),Qs(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(p5=dl()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,jC(e,r)));break;case 22:s=e.memoizedState!==null;var u=i!==null&&i.memoizedState!==null,c=Au,h=bi;if(Au=c||s,bi=h||u,Ys(t,e),bi=h,Au=c,Qs(e),r&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(i===null||u||Au||bi||Yh(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){u=i=t;try{if(n=u.stateNode,s)o=n.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{a=u.stateNode;var p=u.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;a.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(y){$t(u,u.return,y)}}}else if(t.tag===6){if(i===null){u=t;try{u.stateNode.nodeValue=s?"":u.memoizedProps}catch(y){$t(u,u.return,y)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(i=r.retryQueue,i!==null&&(r.retryQueue=null,jC(e,i))));break;case 19:Ys(t,e),Qs(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,jC(e,r)));break;case 30:break;case 21:break;default:Ys(t,e),Qs(e)}}function Qs(e){var t=e.flags;if(t&2){try{for(var i,r=e.return;r!==null;){if(QJ(r)){i=r;break}r=r.return}if(i==null)throw Error(Z(160));switch(i.tag){case 27:var s=i.stateNode,n=PC(e);xE(e,n,s);break;case 5:var o=i.stateNode;i.flags&32&&(uv(o,""),i.flags&=-33);var a=PC(e);xE(e,a,o);break;case 3:case 4:var u=i.stateNode.containerInfo,c=PC(e);VR(e,c,u);break;default:throw Error(Z(161))}}catch(h){$t(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sY(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;sY(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function fc(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)KJ(e,t.alternate,t),t=t.sibling}function Yh(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:lh(4,t,t.return),Yh(t);break;case 1:ol(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&JJ(t,t.return,i),Yh(t);break;case 27:a_(t.stateNode);case 26:case 5:ol(t,t.return),Yh(t);break;case 22:t.memoizedState===null&&Yh(t);break;case 30:Yh(t);break;default:Yh(t)}e=e.sibling}}function Cc(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,s=e,n=t,o=n.flags;switch(n.tag){case 0:case 11:case 15:Cc(s,n,i),iS(4,n);break;case 1:if(Cc(s,n,i),r=n,s=r.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(c){$t(r,r.return,c)}if(r=n,s=r.updateQueue,s!==null){var a=r.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)KZ(u[s],a)}catch(c){$t(r,r.return,c)}}i&&o&64&&ZJ(n),r_(n,n.return);break;case 27:XJ(n);case 26:case 5:Cc(s,n,i),i&&r===null&&o&4&&YJ(n),r_(n,n.return);break;case 12:Cc(s,n,i);break;case 13:Cc(s,n,i),i&&o&4&&iY(s,n);break;case 22:n.memoizedState===null&&Cc(s,n,i),r_(n,n.return);break;case 30:break;default:Cc(s,n,i)}t=t.sibling}}function u5(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&X1(i))}function c5(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&X1(e))}function xa(e,t,i,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)nY(e,t,i,r),t=t.sibling}function nY(e,t,i,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:xa(e,t,i,r),s&2048&&iS(9,t);break;case 1:xa(e,t,i,r);break;case 3:xa(e,t,i,r),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&X1(e)));break;case 12:if(s&2048){xa(e,t,i,r),e=t.stateNode;try{var n=t.memoizedProps,o=n.id,a=n.onPostCommit;typeof a=="function"&&a(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){$t(t,t.return,u)}}else xa(e,t,i,r);break;case 13:xa(e,t,i,r);break;case 23:break;case 22:n=t.stateNode,o=t.alternate,t.memoizedState!==null?n._visibility&2?xa(e,t,i,r):s_(e,t):n._visibility&2?xa(e,t,i,r):(n._visibility|=2,Vm(e,t,i,r,(t.subtreeFlags&10256)!==0)),s&2048&&u5(o,t);break;case 24:xa(e,t,i,r),s&2048&&c5(t.alternate,t);break;default:xa(e,t,i,r)}}function Vm(e,t,i,r,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var n=e,o=t,a=i,u=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Vm(n,o,a,u,s),iS(8,o);break;case 23:break;case 22:var h=o.stateNode;o.memoizedState!==null?h._visibility&2?Vm(n,o,a,u,s):s_(n,o):(h._visibility|=2,Vm(n,o,a,u,s)),s&&c&2048&&u5(o.alternate,o);break;case 24:Vm(n,o,a,u,s),s&&c&2048&&c5(o.alternate,o);break;default:Vm(n,o,a,u,s)}t=t.sibling}}function s_(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,r=t,s=r.flags;switch(r.tag){case 22:s_(i,r),s&2048&&u5(r.alternate,r);break;case 24:s_(i,r),s&2048&&c5(r.alternate,r);break;default:s_(i,r)}t=t.sibling}}var vw=8192;function ym(e){if(e.subtreeFlags&vw)for(e=e.child;e!==null;)oY(e),e=e.sibling}function oY(e){switch(e.tag){case 26:ym(e),e.flags&vw&&e.memoizedState!==null&&mfe(oa,e.memoizedState,e.memoizedProps);break;case 5:ym(e);break;case 3:case 4:var t=oa;oa=OE(e.stateNode.containerInfo),ym(e),oa=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=vw,vw=16777216,ym(e),vw=t):ym(e));break;default:ym(e)}}function aY(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function D0(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];rr=r,uY(r,e)}aY(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)lY(e),e=e.sibling}function lY(e){switch(e.tag){case 0:case 11:case 15:D0(e),e.flags&2048&&lh(9,e,e.return);break;case 3:D0(e);break;case 12:D0(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,fx(e)):D0(e);break;default:D0(e)}}function fx(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];rr=r,uY(r,e)}aY(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:lh(8,t,t.return),fx(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,fx(t));break;default:fx(t)}e=e.sibling}}function uY(e,t){for(;rr!==null;){var i=rr;switch(i.tag){case 0:case 11:case 15:lh(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var r=i.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:X1(i.memoizedState.cache)}if(r=i.child,r!==null)r.return=i,rr=r;else e:for(i=e;rr!==null;){r=rr;var s=r.sibling,n=r.return;if(eY(r),r===i){rr=null;break e}if(s!==null){s.return=n,rr=s;break e}rr=n}}}var Ope={getCacheForType:function(e){var t=zr(qi),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i}},Rpe=typeof WeakMap=="function"?WeakMap:Map,ft=0,It=null,Ze=null,Xe=0,pt=0,fn=null,Od=!1,Yv=!1,d5=!1,Qu=0,hi=0,uh=0,gf=0,h5=0,lo=0,fv=0,n_=null,Ns=null,zR=!1,p5=0,$E=1/0,EE=null,Zd=null,br=0,Jd=null,mv=null,xg=0,UR=0,qR=null,cY=null,o_=0,GR=null;function wn(){if(ft&2&&Xe!==0)return Xe&-Xe;if(Ae.T!==null){var e=cv;return e!==0?e:m5()}return _Z()}function dY(){lo===0&&(lo=!(Xe&536870912)||lt?gZ():536870912);var e=vo.current;return e!==null&&(e.flags|=32),lo}function bn(e,t,i){(e===It&&(pt===2||pt===9)||e.cancelPendingCommit!==null)&&(yv(e,0),Rd(e,Xe,lo,!1)),W1(e,i),(!(ft&2)||e!==It)&&(e===It&&(!(ft&2)&&(gf|=i),hi===4&&Rd(e,Xe,lo,!1)),Tl(e))}function hY(e,t,i){if(ft&6)throw Error(Z(327));var r=!i&&(t&124)===0&&(t&e.expiredLanes)===0||H1(e,t),s=r?Lpe(e,t):VC(e,t,!0),n=r;do{if(s===0){Yv&&!r&&Rd(e,t,0,!1);break}else{if(i=e.current.alternate,n&&!Fpe(i)){s=VC(e,t,!1),n=!1;continue}if(s===2){if(n=t,e.errorRecoveryDisabledLanes&n)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var a=e;s=n_;var u=a.current.memoizedState.isDehydrated;if(u&&(yv(a,o).flags|=256),o=VC(a,o,!1),o!==2){if(d5&&!u){a.errorRecoveryDisabledLanes|=n,gf|=n,s=4;break e}n=Ns,Ns=s,n!==null&&(Ns===null?Ns=n:Ns.push.apply(Ns,n))}s=o}if(n=!1,s!==2)continue}}if(s===1){yv(e,0),Rd(e,t,0,!0);break}e:{switch(r=e,n=s,n){case 0:case 1:throw Error(Z(345));case 4:if((t&4194048)!==t)break;case 6:Rd(r,t,lo,!Od);break e;case 2:Ns=null;break;case 3:case 5:break;default:throw Error(Z(329))}if((t&62914560)===t&&(s=p5+300-dl(),10<s)){if(Rd(r,t,lo,!Od),pA(r,0,!0)!==0)break e;r.timeoutHandle=OY(lz.bind(null,r,i,Ns,EE,zR,t,lo,gf,fv,Od,n,2,-0,0),s);break e}lz(r,i,Ns,EE,zR,t,lo,gf,fv,Od,n,0,-0,0)}}break}while(!0);Tl(e)}function lz(e,t,i,r,s,n,o,a,u,c,h,p,m,y){if(e.timeoutHandle=-1,p=t.subtreeFlags,(p&8192||(p&16785408)===16785408)&&(J_={stylesheets:null,count:0,unsuspend:ffe},oY(t),p=yfe(),p!==null)){e.cancelPendingCommit=p(cz.bind(null,e,t,n,i,r,s,o,a,u,h,1,m,y)),Rd(e,n,o,!c);return}cz(e,t,n,i,r,s,o,a,u)}function Fpe(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var r=0;r<i.length;r++){var s=i[r],n=s.getSnapshot;s=s.value;try{if(!$n(n(),s))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rd(e,t,i,r){t&=~h5,t&=~gf,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var n=31-vn(s),o=1<<n;r[n]=-1,s&=~o}i!==0&&wZ(e,i,t)}function TA(){return ft&6?!0:(rS(0),!1)}function f5(){if(Ze!==null){if(pt===0)var e=Ze.return;else e=Ze,Lu=nm=null,e5(e),Tg=null,H_=0,e=Ze;for(;e!==null;)WJ(e.alternate,e),e=e.return;Ze=null}}function yv(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Qpe(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),f5(),It=e,Ze=i=Du(e.current,null),Xe=t,pt=0,fn=null,Od=!1,Yv=H1(e,t),d5=!1,fv=lo=h5=gf=uh=hi=0,Ns=n_=null,zR=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var s=31-vn(r),n=1<<s;t|=e[s],r&=~n}return Qu=t,gA(),i}function pY(e,t){Ge=null,Ae.H=wE,t===K1||t===wA?(t=V6(),pt=3):t===QZ?(t=V6(),pt=4):pt=t===zJ?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,fn=t,Ze===null&&(hi=1,SE(e,no(t,e.current)))}function fY(){var e=Ae.H;return Ae.H=wE,e===null?wE:e}function mY(){var e=Ae.A;return Ae.A=Ope,e}function BR(){hi=4,Od||(Xe&4194048)!==Xe&&vo.current!==null||(Yv=!0),!(uh&134217727)&&!(gf&134217727)||It===null||Rd(It,Xe,lo,!1)}function VC(e,t,i){var r=ft;ft|=2;var s=fY(),n=mY();(It!==e||Xe!==t)&&(EE=null,yv(e,t)),t=!1;var o=hi;e:do try{if(pt!==0&&Ze!==null){var a=Ze,u=fn;switch(pt){case 8:f5(),o=6;break e;case 3:case 2:case 9:case 6:vo.current===null&&(t=!0);var c=pt;if(pt=0,fn=null,sg(e,a,u,c),i&&Yv){o=0;break e}break;default:c=pt,pt=0,fn=null,sg(e,a,u,c)}}Npe(),o=hi;break}catch(h){pY(e,h)}while(!0);return t&&e.shellSuspendCounter++,Lu=nm=null,ft=r,Ae.H=s,Ae.A=n,Ze===null&&(It=null,Xe=0,gA()),o}function Npe(){for(;Ze!==null;)yY(Ze)}function Lpe(e,t){var i=ft;ft|=2;var r=fY(),s=mY();It!==e||Xe!==t?(EE=null,$E=dl()+500,yv(e,t)):Yv=H1(e,t);e:do try{if(pt!==0&&Ze!==null){t=Ze;var n=fn;t:switch(pt){case 1:pt=0,fn=null,sg(e,t,n,1);break;case 2:case 9:if(j6(n)){pt=0,fn=null,uz(t);break}t=function(){pt!==2&&pt!==9||It!==e||(pt=7),Tl(e)},n.then(t,t);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:j6(n)?(pt=0,fn=null,uz(t)):(pt=0,fn=null,sg(e,t,n,7));break;case 5:var o=null;switch(Ze.tag){case 26:o=Ze.memoizedState;case 5:case 27:var a=Ze;if(!o||LY(o)){pt=0,fn=null;var u=a.sibling;if(u!==null)Ze=u;else{var c=a.return;c!==null?(Ze=c,xA(c)):Ze=null}break t}}pt=0,fn=null,sg(e,t,n,5);break;case 6:pt=0,fn=null,sg(e,t,n,6);break;case 8:f5(),hi=6;break e;default:throw Error(Z(462))}}kpe();break}catch(h){pY(e,h)}while(!0);return Lu=nm=null,Ae.H=r,Ae.A=s,ft=i,Ze!==null?0:(It=null,Xe=0,gA(),hi)}function kpe(){for(;Ze!==null&&!she();)yY(Ze)}function yY(e){var t=HJ(e.alternate,e,Qu);e.memoizedProps=e.pendingProps,t===null?xA(e):Ze=t}function uz(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=iz(i,t,t.pendingProps,t.type,void 0,Xe);break;case 11:t=iz(i,t,t.pendingProps,t.type.render,t.ref,Xe);break;case 5:e5(t);default:WJ(i,t),t=Ze=WZ(t,Qu),t=HJ(i,t,Qu)}e.memoizedProps=e.pendingProps,t===null?xA(e):Ze=t}function sg(e,t,i,r){Lu=nm=null,e5(t),Tg=null,H_=0;var s=t.return;try{if($pe(e,s,t,i,Xe)){hi=1,SE(e,no(i,e.current)),Ze=null;return}}catch(n){if(s!==null)throw Ze=s,n;hi=1,SE(e,no(i,e.current)),Ze=null;return}t.flags&32768?(lt||r===1?e=!0:Yv||Xe&536870912?e=!1:(Od=e=!0,(r===2||r===9||r===3||r===6)&&(r=vo.current,r!==null&&r.tag===13&&(r.flags|=16384))),gY(t,e)):xA(t)}function xA(e){var t=e;do{if(t.flags&32768){gY(t,Od);return}e=t.return;var i=Mpe(t.alternate,t,Qu);if(i!==null){Ze=i;return}if(t=t.sibling,t!==null){Ze=t;return}Ze=t=e}while(t!==null);hi===0&&(hi=5)}function gY(e,t){do{var i=Ape(e.alternate,e);if(i!==null){i.flags&=32767,Ze=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Ze=e;return}Ze=e=i}while(e!==null);hi=6,Ze=null}function cz(e,t,i,r,s,n,o,a,u){e.cancelPendingCommit=null;do $A();while(br!==0);if(ft&6)throw Error(Z(327));if(t!==null){if(t===e.current)throw Error(Z(177));if(n=t.lanes|t.childLanes,n|=zD,fhe(e,i,n,o,a,u),e===It&&(Ze=It=null,Xe=0),mv=t,Jd=e,xg=i,UR=n,qR=s,cY=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Vpe(uE,function(){return SY(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,t.subtreeFlags&13878||r){r=Ae.T,Ae.T=null,s=ut.p,ut.p=2,o=ft,ft|=4;try{Ipe(e,t,i)}finally{ft=o,ut.p=s,Ae.T=r}}br=1,vY(),wY(),bY()}}function vY(){if(br===1){br=0;var e=Jd,t=mv,i=(t.flags&13878)!==0;if(t.subtreeFlags&13878||i){i=Ae.T,Ae.T=null;var r=ut.p;ut.p=2;var s=ft;ft|=4;try{rY(t,e);var n=JR,o=jZ(e.containerInfo),a=n.focusedElem,u=n.selectionRange;if(o!==a&&a&&a.ownerDocument&&DZ(a.ownerDocument.documentElement,a)){if(u!==null&&VD(a)){var c=u.start,h=u.end;if(h===void 0&&(h=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(h,a.value.length);else{var p=a.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var y=m.getSelection(),g=a.textContent.length,v=Math.min(u.start,g),b=u.end===void 0?v:Math.min(u.end,g);!y.extend&&v>b&&(o=b,b=v,v=o);var w=O6(a,v),_=O6(a,b);if(w&&_&&(y.rangeCount!==1||y.anchorNode!==w.node||y.anchorOffset!==w.offset||y.focusNode!==_.node||y.focusOffset!==_.offset)){var S=p.createRange();S.setStart(w.node,w.offset),y.removeAllRanges(),v>b?(y.addRange(S),y.extend(_.node,_.offset)):(S.setEnd(_.node,_.offset),y.addRange(S))}}}}for(p=[],y=a;y=y.parentNode;)y.nodeType===1&&p.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<p.length;a++){var T=p[a];T.element.scrollLeft=T.left,T.element.scrollTop=T.top}}NE=!!ZR,JR=ZR=null}finally{ft=s,ut.p=r,Ae.T=i}}e.current=t,br=2}}function wY(){if(br===2){br=0;var e=Jd,t=mv,i=(t.flags&8772)!==0;if(t.subtreeFlags&8772||i){i=Ae.T,Ae.T=null;var r=ut.p;ut.p=2;var s=ft;ft|=4;try{KJ(e,t.alternate,t)}finally{ft=s,ut.p=r,Ae.T=i}}br=3}}function bY(){if(br===4||br===3){br=0,nhe();var e=Jd,t=mv,i=xg,r=cY;t.subtreeFlags&10256||t.flags&10256?br=5:(br=0,mv=Jd=null,_Y(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Zd=null),FD(i),t=t.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(B1,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=Ae.T,s=ut.p,ut.p=2,Ae.T=null;try{for(var n=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];n(a.value,{componentStack:a.stack})}}finally{Ae.T=t,ut.p=s}}xg&3&&$A(),Tl(e),s=e.pendingLanes,i&4194090&&s&42?e===GR?o_++:(o_=0,GR=e):o_=0,rS(0)}}function _Y(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,X1(t)))}function $A(e){return vY(),wY(),bY(),SY()}function SY(){if(br!==5)return!1;var e=Jd,t=UR;UR=0;var i=FD(xg),r=Ae.T,s=ut.p;try{ut.p=32>i?32:i,Ae.T=null,i=qR,qR=null;var n=Jd,o=xg;if(br=0,mv=Jd=null,xg=0,ft&6)throw Error(Z(331));var a=ft;if(ft|=4,lY(n.current),nY(n,n.current,o,i),ft=a,rS(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(B1,n)}catch{}return!0}finally{ut.p=s,Ae.T=r,_Y(e,t)}}function dz(e,t,i){t=no(i,t),t=PR(e.stateNode,t,2),e=Wd(e,t,2),e!==null&&(W1(e,2),Tl(e))}function $t(e,t,i){if(e.tag===3)dz(e,e,i);else for(;t!==null;){if(t.tag===3){dz(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zd===null||!Zd.has(r))){e=no(i,e),i=jJ(2),r=Wd(t,i,2),r!==null&&(VJ(i,r,t,e),W1(r,2),Tl(r));break}}t=t.return}}function zC(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new Rpe;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(i)||(d5=!0,s.add(i),e=Ppe.bind(null,e,t,i),t.then(e,e))}function Ppe(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,It===e&&(Xe&i)===i&&(hi===4||hi===3&&(Xe&62914560)===Xe&&300>dl()-p5?!(ft&2)&&yv(e,0):h5|=i,fv===Xe&&(fv=0)),Tl(e)}function TY(e,t){t===0&&(t=vZ()),e=Jv(e,t),e!==null&&(W1(e,t),Tl(e))}function Dpe(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),TY(e,i)}function jpe(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(i=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(Z(314))}r!==null&&r.delete(t),TY(e,i)}function Vpe(e,t){return OD(e,t)}var ME=null,zm=null,HR=!1,AE=!1,UC=!1,vf=0;function Tl(e){e!==zm&&e.next===null&&(zm===null?ME=zm=e:zm=zm.next=e),AE=!0,HR||(HR=!0,Upe())}function rS(e,t){if(!UC&&AE){UC=!0;do for(var i=!1,r=ME;r!==null;){if(e!==0){var s=r.pendingLanes;if(s===0)var n=0;else{var o=r.suspendedLanes,a=r.pingedLanes;n=(1<<31-vn(42|e)+1)-1,n&=s&~(o&~a),n=n&201326741?n&201326741|1:n?n|2:0}n!==0&&(i=!0,hz(r,n))}else n=Xe,n=pA(r,r===It?n:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(n&3)||H1(r,n)||(i=!0,hz(r,n));r=r.next}while(i);UC=!1}}function zpe(){xY()}function xY(){AE=HR=!1;var e=0;vf!==0&&(Ype()&&(e=vf),vf=0);for(var t=dl(),i=null,r=ME;r!==null;){var s=r.next,n=$Y(r,t);n===0?(r.next=null,i===null?ME=s:i.next=s,s===null&&(zm=i)):(i=r,(e!==0||n&3)&&(AE=!0)),r=s}rS(e)}function $Y(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,n=e.pendingLanes&-62914561;0<n;){var o=31-vn(n),a=1<<o,u=s[o];u===-1?(!(a&i)||a&r)&&(s[o]=phe(a,t)):u<=t&&(e.expiredLanes|=a),n&=~a}if(t=It,i=Xe,i=pA(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,i===0||e===t&&(pt===2||pt===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&fC(r),e.callbackNode=null,e.callbackPriority=0;if(!(i&3)||H1(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(r!==null&&fC(r),FD(i)){case 2:case 8:i=mZ;break;case 32:i=uE;break;case 268435456:i=yZ;break;default:i=uE}return r=EY.bind(null,e),i=OD(i,r),e.callbackPriority=t,e.callbackNode=i,t}return r!==null&&r!==null&&fC(r),e.callbackPriority=2,e.callbackNode=null,2}function EY(e,t){if(br!==0&&br!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if($A()&&e.callbackNode!==i)return null;var r=Xe;return r=pA(e,e===It?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(hY(e,r,t),$Y(e,dl()),e.callbackNode!=null&&e.callbackNode===i?EY.bind(null,e):null)}function hz(e,t){if($A())return null;hY(e,t,!0)}function Upe(){Xpe(function(){ft&6?OD(fZ,zpe):xY()})}function m5(){return vf===0&&(vf=gZ()),vf}function pz(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ox(""+e)}function fz(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function qpe(e,t,i,r,s){if(t==="submit"&&i&&i.stateNode===s){var n=pz((s[qs]||null).action),o=r.submitter;o&&(t=(t=o[qs]||null)?pz(t.formAction):o.getAttribute("formAction"),t!==null&&(n=t,o=null));var a=new fA("action","action",null,r,s);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(vf!==0){var u=o?fz(s,o):new FormData(s);LR(i,{pending:!0,data:u,method:s.method,action:n},null,u)}}else typeof n=="function"&&(a.preventDefault(),u=o?fz(s,o):new FormData(s),LR(i,{pending:!0,data:u,method:s.method,action:n},n,u))},currentTarget:s}]})}}for(var qC=0;qC<TR.length;qC++){var GC=TR[qC],Gpe=GC.toLowerCase(),Bpe=GC[0].toUpperCase()+GC.slice(1);Sa(Gpe,"on"+Bpe)}Sa(zZ,"onAnimationEnd");Sa(UZ,"onAnimationIteration");Sa(qZ,"onAnimationStart");Sa("dblclick","onDoubleClick");Sa("focusin","onFocus");Sa("focusout","onBlur");Sa(lpe,"onTransitionRun");Sa(upe,"onTransitionStart");Sa(cpe,"onTransitionCancel");Sa(GZ,"onTransitionEnd");lv("onMouseEnter",["mouseout","mouseover"]);lv("onMouseLeave",["mouseout","mouseover"]);lv("onPointerEnter",["pointerout","pointerover"]);lv("onPointerLeave",["pointerout","pointerover"]);im("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));im("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));im("onBeforeInput",["compositionend","keypress","textInput","paste"]);im("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));im("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));im("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var W_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hpe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(W_));function MY(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],s=r.event;r=r.listeners;e:{var n=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==n&&s.isPropagationStopped())break e;n=a,s.currentTarget=c;try{n(s)}catch(h){_E(h)}s.currentTarget=null,n=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==n&&s.isPropagationStopped())break e;n=a,s.currentTarget=c;try{n(s)}catch(h){_E(h)}s.currentTarget=null,n=u}}}}function We(e,t){var i=t[yR];i===void 0&&(i=t[yR]=new Set);var r=e+"__bubble";i.has(r)||(AY(t,e,2,!1),i.add(r))}function BC(e,t,i){var r=0;t&&(r|=4),AY(i,e,r,t)}var RT="_reactListening"+Math.random().toString(36).slice(2);function y5(e){if(!e[RT]){e[RT]=!0,SZ.forEach(function(i){i!=="selectionchange"&&(Hpe.has(i)||BC(i,!1,e),BC(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[RT]||(t[RT]=!0,BC("selectionchange",!1,t))}}function AY(e,t,i,r){switch(VY(t)){case 2:var s=wfe;break;case 8:s=bfe;break;default:s=b5}i=s.bind(null,t,i,e),s=void 0,!bR||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):s!==void 0?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function HC(e,t,i,r,s){var n=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&o.stateNode.containerInfo===s)return;o=o.return}for(;a!==null;){if(o=Jy(a),o===null)return;if(u=o.tag,u===5||u===6||u===26||u===27){r=n=o;continue e}a=a.parentNode}}r=r.return}CZ(function(){var c=n,h=kD(i),p=[];e:{var m=BZ.get(e);if(m!==void 0){var y=fA,g=e;switch(e){case"keypress":if(lx(i)===0)break e;case"keydown":case"keyup":y=Vhe;break;case"focusin":g="focus",y=SC;break;case"focusout":g="blur",y=SC;break;case"beforeblur":case"afterblur":y=SC;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=_6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Ahe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=qhe;break;case zZ:case UZ:case qZ:y=Ohe;break;case GZ:y=Bhe;break;case"scroll":case"scrollend":y=Ehe;break;case"wheel":y=Whe;break;case"copy":case"cut":case"paste":y=Fhe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=T6;break;case"toggle":case"beforetoggle":y=Jhe}var v=(t&4)!==0,b=!v&&(e==="scroll"||e==="scrollend"),w=v?m!==null?m+"Capture":null:m;v=[];for(var _=c,S;_!==null;){var T=_;if(S=T.stateNode,T=T.tag,T!==5&&T!==26&&T!==27||S===null||w===null||(T=z_(_,w),T!=null&&v.push(Z_(_,T,S))),b)break;_=_.return}0<v.length&&(m=new y(m,g,null,i,h),p.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&i!==wR&&(g=i.relatedTarget||i.fromElement)&&(Jy(g)||g[Wv]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(g=i.relatedTarget||i.toElement,y=c,g=g?Jy(g):null,g!==null&&(b=G1(g),v=g.tag,g!==b||v!==5&&v!==27&&v!==6)&&(g=null)):(y=null,g=c),y!==g)){if(v=_6,T="onMouseLeave",w="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(v=T6,T="onPointerLeave",w="onPointerEnter",_="pointer"),b=y==null?m:gw(y),S=g==null?m:gw(g),m=new v(T,_+"leave",y,i,h),m.target=b,m.relatedTarget=S,T=null,Jy(h)===c&&(v=new v(w,_+"enter",g,i,h),v.target=S,v.relatedTarget=b,T=v),b=T,y&&g)t:{for(v=y,w=g,_=0,S=v;S;S=gm(S))_++;for(S=0,T=w;T;T=gm(T))S++;for(;0<_-S;)v=gm(v),_--;for(;0<S-_;)w=gm(w),S--;for(;_--;){if(v===w||w!==null&&v===w.alternate)break t;v=gm(v),w=gm(w)}v=null}else v=null;y!==null&&mz(p,m,y,v,!1),g!==null&&b!==null&&mz(p,b,g,v,!0)}}e:{if(m=c?gw(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var E=M6;else if(E6(m))if(kZ)E=npe;else{E=rpe;var A=ipe}else y=m.nodeName,!y||y.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?c&&LD(c.elementType)&&(E=M6):E=spe;if(E&&(E=E(e,c))){LZ(p,E,i,h);break e}A&&A(e,m,c),e==="focusout"&&c&&m.type==="number"&&c.memoizedProps.value!=null&&vR(m,"number",m.value)}switch(A=c?gw(c):window,e){case"focusin":(E6(A)||A.contentEditable==="true")&&(Xy=A,_R=c,Yb=null);break;case"focusout":Yb=_R=Xy=null;break;case"mousedown":SR=!0;break;case"contextmenu":case"mouseup":case"dragend":SR=!1,R6(p,i,h);break;case"selectionchange":if(ape)break;case"keydown":case"keyup":R6(p,i,h)}var C;if(jD)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Qy?FZ(e,i)&&(O="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(O="onCompositionStart");O&&(RZ&&i.locale!=="ko"&&(Qy||O!=="onCompositionStart"?O==="onCompositionEnd"&&Qy&&(C=OZ()):(Cd=h,PD="value"in Cd?Cd.value:Cd.textContent,Qy=!0)),A=IE(c,O),0<A.length&&(O=new S6(O,e,null,i,h),p.push({event:O,listeners:A}),C?O.data=C:(C=NZ(i),C!==null&&(O.data=C)))),(C=Qhe?Xhe(e,i):Khe(e,i))&&(O=IE(c,"onBeforeInput"),0<O.length&&(A=new S6("onBeforeInput","beforeinput",null,i,h),p.push({event:A,listeners:O}),A.data=C)),qpe(p,e,c,i,h)}MY(p,t)})}function Z_(e,t,i){return{instance:e,listener:t,currentTarget:i}}function IE(e,t){for(var i=t+"Capture",r=[];e!==null;){var s=e,n=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||n===null||(s=z_(e,i),s!=null&&r.unshift(Z_(e,s,n)),s=z_(e,t),s!=null&&r.push(Z_(e,s,n))),e.tag===3)return r;e=e.return}return[]}function gm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function mz(e,t,i,r,s){for(var n=t._reactName,o=[];i!==null&&i!==r;){var a=i,u=a.alternate,c=a.stateNode;if(a=a.tag,u!==null&&u===r)break;a!==5&&a!==26&&a!==27||c===null||(u=c,s?(c=z_(i,n),c!=null&&o.unshift(Z_(i,c,u))):s||(c=z_(i,n),c!=null&&o.push(Z_(i,c,u)))),i=i.return}o.length!==0&&e.push({event:t,listeners:o})}var Wpe=/\r\n?/g,Zpe=/\u0000|\uFFFD/g;function yz(e){return(typeof e=="string"?e:""+e).replace(Wpe,`
`).replace(Zpe,"")}function IY(e,t){return t=yz(t),yz(e)===t}function EA(){}function bt(e,t,i,r,s,n){switch(i){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||uv(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&uv(e,""+r);break;case"className":$T(e,"class",r);break;case"tabIndex":$T(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":$T(e,i,r);break;case"style":IZ(e,r,n);break;case"data":if(t!=="object"){$T(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=ox(""+r),e.setAttribute(i,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof n=="function"&&(i==="formAction"?(t!=="input"&&bt(e,t,"name",s.name,s,null),bt(e,t,"formEncType",s.formEncType,s,null),bt(e,t,"formMethod",s.formMethod,s,null),bt(e,t,"formTarget",s.formTarget,s,null)):(bt(e,t,"encType",s.encType,s,null),bt(e,t,"method",s.method,s,null),bt(e,t,"target",s.target,s,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=ox(""+r),e.setAttribute(i,r);break;case"onClick":r!=null&&(e.onclick=EA);break;case"onScroll":r!=null&&We("scroll",e);break;case"onScrollEnd":r!=null&&We("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(Z(61));if(i=r.__html,i!=null){if(s.children!=null)throw Error(Z(60));e.innerHTML=i}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}i=ox(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""+r):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":r===!0?e.setAttribute(i,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,r):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(i,r):e.removeAttribute(i);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(i):e.setAttribute(i,r);break;case"popover":We("beforetoggle",e),We("toggle",e),nx(e,"popover",r);break;case"xlinkActuate":Rl(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Rl(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Rl(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Rl(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Rl(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Rl(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Rl(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Rl(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Rl(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":nx(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=xhe.get(i)||i,nx(e,i,r))}}function WR(e,t,i,r,s,n){switch(i){case"style":IZ(e,r,n);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(Z(61));if(i=r.__html,i!=null){if(s.children!=null)throw Error(Z(60));e.innerHTML=i}}break;case"children":typeof r=="string"?uv(e,r):(typeof r=="number"||typeof r=="bigint")&&uv(e,""+r);break;case"onScroll":r!=null&&We("scroll",e);break;case"onScrollEnd":r!=null&&We("scrollend",e);break;case"onClick":r!=null&&(e.onclick=EA);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!TZ.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(s=i.endsWith("Capture"),t=i.slice(2,s?i.length-7:void 0),n=e[qs]||null,n=n!=null?n[i]:null,typeof n=="function"&&e.removeEventListener(t,n,s),typeof r=="function")){typeof n!="function"&&n!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,r,s);break e}i in e?e[i]=r:r===!0?e.setAttribute(i,""):nx(e,i,r)}}}function Tr(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",e),We("load",e);var r=!1,s=!1,n;for(n in i)if(i.hasOwnProperty(n)){var o=i[n];if(o!=null)switch(n){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,t));default:bt(e,t,n,o,i,null)}}s&&bt(e,t,"srcSet",i.srcSet,i,null),r&&bt(e,t,"src",i.src,i,null);return;case"input":We("invalid",e);var a=n=o=s=null,u=null,c=null;for(r in i)if(i.hasOwnProperty(r)){var h=i[r];if(h!=null)switch(r){case"name":s=h;break;case"type":o=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":n=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(Z(137,t));break;default:bt(e,t,r,h,i,null)}}EZ(e,n,a,u,c,o,s,!1),cE(e);return;case"select":We("invalid",e),r=o=n=null;for(s in i)if(i.hasOwnProperty(s)&&(a=i[s],a!=null))switch(s){case"value":n=a;break;case"defaultValue":o=a;break;case"multiple":r=a;default:bt(e,t,s,a,i,null)}t=n,i=o,e.multiple=!!r,t!=null?vg(e,!!r,t,!1):i!=null&&vg(e,!!r,i,!0);return;case"textarea":We("invalid",e),n=s=r=null;for(o in i)if(i.hasOwnProperty(o)&&(a=i[o],a!=null))switch(o){case"value":r=a;break;case"defaultValue":s=a;break;case"children":n=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(Z(91));break;default:bt(e,t,o,a,i,null)}AZ(e,r,s,n),cE(e);return;case"option":for(u in i)if(i.hasOwnProperty(u)&&(r=i[u],r!=null))switch(u){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:bt(e,t,u,r,i,null)}return;case"dialog":We("beforetoggle",e),We("toggle",e),We("cancel",e),We("close",e);break;case"iframe":case"object":We("load",e);break;case"video":case"audio":for(r=0;r<W_.length;r++)We(W_[r],e);break;case"image":We("error",e),We("load",e);break;case"details":We("toggle",e);break;case"embed":case"source":case"link":We("error",e),We("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in i)if(i.hasOwnProperty(c)&&(r=i[c],r!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,t));default:bt(e,t,c,r,i,null)}return;default:if(LD(t)){for(h in i)i.hasOwnProperty(h)&&(r=i[h],r!==void 0&&WR(e,t,h,r,i,void 0));return}}for(a in i)i.hasOwnProperty(a)&&(r=i[a],r!=null&&bt(e,t,a,r,i,null))}function Jpe(e,t,i,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,n=null,o=null,a=null,u=null,c=null,h=null;for(y in i){var p=i[y];if(i.hasOwnProperty(y)&&p!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":u=p;default:r.hasOwnProperty(y)||bt(e,t,y,null,r,p)}}for(var m in r){var y=r[m];if(p=i[m],r.hasOwnProperty(m)&&(y!=null||p!=null))switch(m){case"type":n=y;break;case"name":s=y;break;case"checked":c=y;break;case"defaultChecked":h=y;break;case"value":o=y;break;case"defaultValue":a=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(Z(137,t));break;default:y!==p&&bt(e,t,m,y,r,p)}}gR(e,o,a,u,c,h,n,s);return;case"select":y=o=a=m=null;for(n in i)if(u=i[n],i.hasOwnProperty(n)&&u!=null)switch(n){case"value":break;case"multiple":y=u;default:r.hasOwnProperty(n)||bt(e,t,n,null,r,u)}for(s in r)if(n=r[s],u=i[s],r.hasOwnProperty(s)&&(n!=null||u!=null))switch(s){case"value":m=n;break;case"defaultValue":a=n;break;case"multiple":o=n;default:n!==u&&bt(e,t,s,n,r,u)}t=a,i=o,r=y,m!=null?vg(e,!!i,m,!1):!!r!=!!i&&(t!=null?vg(e,!!i,t,!0):vg(e,!!i,i?[]:"",!1));return;case"textarea":y=m=null;for(a in i)if(s=i[a],i.hasOwnProperty(a)&&s!=null&&!r.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:bt(e,t,a,null,r,s)}for(o in r)if(s=r[o],n=i[o],r.hasOwnProperty(o)&&(s!=null||n!=null))switch(o){case"value":m=s;break;case"defaultValue":y=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(Z(91));break;default:s!==n&&bt(e,t,o,s,r,n)}MZ(e,m,y);return;case"option":for(var g in i)if(m=i[g],i.hasOwnProperty(g)&&m!=null&&!r.hasOwnProperty(g))switch(g){case"selected":e.selected=!1;break;default:bt(e,t,g,null,r,m)}for(u in r)if(m=r[u],y=i[u],r.hasOwnProperty(u)&&m!==y&&(m!=null||y!=null))switch(u){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:bt(e,t,u,m,r,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in i)m=i[v],i.hasOwnProperty(v)&&m!=null&&!r.hasOwnProperty(v)&&bt(e,t,v,null,r,m);for(c in r)if(m=r[c],y=i[c],r.hasOwnProperty(c)&&m!==y&&(m!=null||y!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(Z(137,t));break;default:bt(e,t,c,m,r,y)}return;default:if(LD(t)){for(var b in i)m=i[b],i.hasOwnProperty(b)&&m!==void 0&&!r.hasOwnProperty(b)&&WR(e,t,b,void 0,r,m);for(h in r)m=r[h],y=i[h],!r.hasOwnProperty(h)||m===y||m===void 0&&y===void 0||WR(e,t,h,m,r,y);return}}for(var w in i)m=i[w],i.hasOwnProperty(w)&&m!=null&&!r.hasOwnProperty(w)&&bt(e,t,w,null,r,m);for(p in r)m=r[p],y=i[p],!r.hasOwnProperty(p)||m===y||m==null&&y==null||bt(e,t,p,m,r,y)}var ZR=null,JR=null;function CE(e){return e.nodeType===9?e:e.ownerDocument}function gz(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function CY(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function YR(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var WC=null;function Ype(){var e=window.event;return e&&e.type==="popstate"?e===WC?!1:(WC=e,!0):(WC=null,!1)}var OY=typeof setTimeout=="function"?setTimeout:void 0,Qpe=typeof clearTimeout=="function"?clearTimeout:void 0,vz=typeof Promise=="function"?Promise:void 0,Xpe=typeof queueMicrotask=="function"?queueMicrotask:typeof vz<"u"?function(e){return vz.resolve(null).then(e).catch(Kpe)}:OY;function Kpe(e){setTimeout(function(){throw e})}function Sh(e){return e==="head"}function wz(e,t){var i=t,r=0,s=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(0<r&&8>r){i=r;var o=e.ownerDocument;if(i&1&&a_(o.documentElement),i&2&&a_(o.body),i&4)for(i=o.head,a_(i),o=i.firstChild;o;){var a=o.nextSibling,u=o.nodeName;o[Z1]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&o.rel.toLowerCase()==="stylesheet"||i.removeChild(o),o=a}}if(s===0){e.removeChild(n),K_(t);return}s--}else i==="$"||i==="$?"||i==="$!"?s++:r=i.charCodeAt(0)-48;else r=0;i=n}while(i);K_(t)}function QR(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":QR(i),ND(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function efe(e,t,i,r){for(;e.nodeType===1;){var s=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Z1])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(n=e.getAttribute("rel"),n==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(n!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(n=e.getAttribute("src"),(n!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&n&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var n=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===n)return e}else return e;if(e=pa(e.nextSibling),e===null)break}return null}function tfe(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=pa(e.nextSibling),e===null))return null;return e}function XR(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function ife(e,t){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")t();else{var r=function(){t(),i.removeEventListener("DOMContentLoaded",r)};i.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function pa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var KR=null;function bz(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}function RY(e,t,i){switch(t=CE(i),e){case"html":if(e=t.documentElement,!e)throw Error(Z(452));return e;case"head":if(e=t.head,!e)throw Error(Z(453));return e;case"body":if(e=t.body,!e)throw Error(Z(454));return e;default:throw Error(Z(451))}}function a_(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ND(e)}var wo=new Map,_z=new Set;function OE(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var rc=ut.d;ut.d={f:rfe,r:sfe,D:nfe,C:ofe,L:afe,m:lfe,X:cfe,S:ufe,M:dfe};function rfe(){var e=rc.f(),t=TA();return e||t}function sfe(e){var t=Zv(e);t!==null&&t.tag===5&&t.type==="form"?$J(t):rc.r(e)}var Qv=typeof document>"u"?null:document;function FY(e,t,i){var r=Qv;if(r&&typeof t=="string"&&t){var s=so(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof i=="string"&&(s+='[crossorigin="'+i+'"]'),_z.has(s)||(_z.add(s),e={rel:e,crossOrigin:i,href:t},r.querySelector(s)===null&&(t=r.createElement("link"),Tr(t,"link",e),sr(t),r.head.appendChild(t)))}}function nfe(e){rc.D(e),FY("dns-prefetch",e,null)}function ofe(e,t){rc.C(e,t),FY("preconnect",e,t)}function afe(e,t,i){rc.L(e,t,i);var r=Qv;if(r&&e&&t){var s='link[rel="preload"][as="'+so(t)+'"]';t==="image"&&i&&i.imageSrcSet?(s+='[imagesrcset="'+so(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(s+='[imagesizes="'+so(i.imageSizes)+'"]')):s+='[href="'+so(e)+'"]';var n=s;switch(t){case"style":n=gv(e);break;case"script":n=Xv(e)}wo.has(n)||(e=Dt({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),wo.set(n,e),r.querySelector(s)!==null||t==="style"&&r.querySelector(sS(n))||t==="script"&&r.querySelector(nS(n))||(t=r.createElement("link"),Tr(t,"link",e),sr(t),r.head.appendChild(t)))}}function lfe(e,t){rc.m(e,t);var i=Qv;if(i&&e){var r=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+so(r)+'"][href="'+so(e)+'"]',n=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":n=Xv(e)}if(!wo.has(n)&&(e=Dt({rel:"modulepreload",href:e},t),wo.set(n,e),i.querySelector(s)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(nS(n)))return}r=i.createElement("link"),Tr(r,"link",e),sr(r),i.head.appendChild(r)}}}function ufe(e,t,i){rc.S(e,t,i);var r=Qv;if(r&&e){var s=gg(r).hoistableStyles,n=gv(e);t=t||"default";var o=s.get(n);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(sS(n)))a.loading=5;else{e=Dt({rel:"stylesheet",href:e,"data-precedence":t},i),(i=wo.get(n))&&g5(e,i);var u=o=r.createElement("link");sr(u),Tr(u,"link",e),u._p=new Promise(function(c,h){u.onload=c,u.onerror=h}),u.addEventListener("load",function(){a.loading|=1}),u.addEventListener("error",function(){a.loading|=2}),a.loading|=4,mx(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},s.set(n,o)}}}function cfe(e,t){rc.X(e,t);var i=Qv;if(i&&e){var r=gg(i).hoistableScripts,s=Xv(e),n=r.get(s);n||(n=i.querySelector(nS(s)),n||(e=Dt({src:e,async:!0},t),(t=wo.get(s))&&v5(e,t),n=i.createElement("script"),sr(n),Tr(n,"link",e),i.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},r.set(s,n))}}function dfe(e,t){rc.M(e,t);var i=Qv;if(i&&e){var r=gg(i).hoistableScripts,s=Xv(e),n=r.get(s);n||(n=i.querySelector(nS(s)),n||(e=Dt({src:e,async:!0,type:"module"},t),(t=wo.get(s))&&v5(e,t),n=i.createElement("script"),sr(n),Tr(n,"link",e),i.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},r.set(s,n))}}function Sz(e,t,i,r){var s=(s=Bd.current)?OE(s):null;if(!s)throw Error(Z(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=gv(i.href),i=gg(s).hoistableStyles,r=i.get(t),r||(r={type:"style",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=gv(i.href);var n=gg(s).hoistableStyles,o=n.get(e);if(o||(s=s.ownerDocument||s,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},n.set(e,o),(n=s.querySelector(sS(e)))&&!n._p&&(o.instance=n,o.state.loading=5),wo.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},wo.set(e,i),n||hfe(s,e,i,o.state))),t&&r===null)throw Error(Z(528,""));return o}if(t&&r!==null)throw Error(Z(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Xv(i),i=gg(s).hoistableScripts,r=i.get(t),r||(r={type:"script",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(Z(444,e))}}function gv(e){return'href="'+so(e)+'"'}function sS(e){return'link[rel="stylesheet"]['+e+"]"}function NY(e){return Dt({},e,{"data-precedence":e.precedence,precedence:null})}function hfe(e,t,i,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),Tr(t,"link",i),sr(t),e.head.appendChild(t))}function Xv(e){return'[src="'+so(e)+'"]'}function nS(e){return"script[async]"+e}function Tz(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+so(i.href)+'"]');if(r)return t.instance=r,sr(r),r;var s=Dt({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),sr(r),Tr(r,"style",s),mx(r,i.precedence,e),t.instance=r;case"stylesheet":s=gv(i.href);var n=e.querySelector(sS(s));if(n)return t.state.loading|=4,t.instance=n,sr(n),n;r=NY(i),(s=wo.get(s))&&g5(r,s),n=(e.ownerDocument||e).createElement("link"),sr(n);var o=n;return o._p=new Promise(function(a,u){o.onload=a,o.onerror=u}),Tr(n,"link",r),t.state.loading|=4,mx(n,i.precedence,e),t.instance=n;case"script":return n=Xv(i.src),(s=e.querySelector(nS(n)))?(t.instance=s,sr(s),s):(r=i,(s=wo.get(n))&&(r=Dt({},i),v5(r,s)),e=e.ownerDocument||e,s=e.createElement("script"),sr(s),Tr(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(Z(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,mx(r,i.precedence,e));return t.instance}function mx(e,t,i){for(var r=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,n=s,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)n=a;else if(n!==s)break}n?n.parentNode.insertBefore(e,n.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function g5(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function v5(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var yx=null;function xz(e,t,i){if(yx===null){var r=new Map,s=yx=new Map;s.set(i,r)}else s=yx,r=s.get(i),r||(r=new Map,s.set(i,r));if(r.has(e))return r;for(r.set(e,null),i=i.getElementsByTagName(e),s=0;s<i.length;s++){var n=i[s];if(!(n[Z1]||n[Vr]||e==="link"&&n.getAttribute("rel")==="stylesheet")&&n.namespaceURI!=="http://www.w3.org/2000/svg"){var o=n.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(n):r.set(o,[n])}}return r}function $z(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function pfe(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function LY(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var J_=null;function ffe(){}function mfe(e,t,i){if(J_===null)throw Error(Z(475));var r=J_;if(t.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=gv(i.href),n=e.querySelector(sS(s));if(n){e=n._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(r.count++,r=RE.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=n,sr(n);return}n=e.ownerDocument||e,i=NY(i),(s=wo.get(s))&&g5(i,s),n=n.createElement("link"),sr(n);var o=n;o._p=new Promise(function(a,u){o.onload=a,o.onerror=u}),Tr(n,"link",i),t.instance=n}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(r.count++,t=RE.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}function yfe(){if(J_===null)throw Error(Z(475));var e=J_;return e.stylesheets&&e.count===0&&eF(e,e.stylesheets),0<e.count?function(t){var i=setTimeout(function(){if(e.stylesheets&&eF(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}function RE(){if(this.count--,this.count===0){if(this.stylesheets)eF(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var FE=null;function eF(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,FE=new Map,t.forEach(gfe,e),FE=null,RE.call(e))}function gfe(e,t){if(!(t.state.loading&4)){var i=FE.get(e);if(i)var r=i.get(null);else{i=new Map,FE.set(e,i);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),n=0;n<s.length;n++){var o=s[n];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(i.set(o.dataset.precedence,o),r=o)}r&&i.set(null,r)}s=t.instance,o=s.getAttribute("data-precedence"),n=i.get(o)||r,n===r&&i.set(null,s),i.set(o,s),this.count++,r=RE.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),n?n.parentNode.insertBefore(s,n.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Y_={$$typeof:Ru,Provider:null,Consumer:null,_currentValue:hf,_currentValue2:hf,_threadCount:0};function vfe(e,t,i,r,s,n,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mC(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mC(0),this.hiddenUpdates=mC(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=n,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function kY(e,t,i,r,s,n,o,a,u,c,h,p){return e=new vfe(e,t,i,o,a,u,c,p),t=1,n===!0&&(t|=24),n=mn(3,null,null,t),e.current=n,n.stateNode=e,t=HD(),t.refCount++,e.pooledCache=t,t.refCount++,n.memoizedState={element:r,isDehydrated:i,cache:t},ZD(n),e}function PY(e){return e?(e=tg,e):tg}function DY(e,t,i,r,s,n){s=PY(s),r.context===null?r.context=s:r.pendingContext=s,r=Hd(t),r.payload={element:i},n=n===void 0?null:n,n!==null&&(r.callback=n),i=Wd(e,r,t),i!==null&&(bn(i,e,t),Kb(i,e,t))}function Ez(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function w5(e,t){Ez(e,t),(e=e.alternate)&&Ez(e,t)}function jY(e){if(e.tag===13){var t=Jv(e,67108864);t!==null&&bn(t,e,67108864),w5(e,67108864)}}var NE=!0;function wfe(e,t,i,r){var s=Ae.T;Ae.T=null;var n=ut.p;try{ut.p=2,b5(e,t,i,r)}finally{ut.p=n,Ae.T=s}}function bfe(e,t,i,r){var s=Ae.T;Ae.T=null;var n=ut.p;try{ut.p=8,b5(e,t,i,r)}finally{ut.p=n,Ae.T=s}}function b5(e,t,i,r){if(NE){var s=tF(r);if(s===null)HC(e,t,r,LE,i),Mz(e,r);else if(Sfe(s,e,t,i,r))r.stopPropagation();else if(Mz(e,r),t&4&&-1<_fe.indexOf(e)){for(;s!==null;){var n=Zv(s);if(n!==null)switch(n.tag){case 3:if(n=n.stateNode,n.current.memoizedState.isDehydrated){var o=Zh(n.pendingLanes);if(o!==0){var a=n;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var u=1<<31-vn(o);a.entanglements[1]|=u,o&=~u}Tl(n),!(ft&6)&&($E=dl()+500,rS(0))}}break;case 13:a=Jv(n,2),a!==null&&bn(a,n,2),TA(),w5(n,2)}if(n=tF(r),n===null&&HC(e,t,r,LE,i),n===s)break;s=n}s!==null&&r.stopPropagation()}else HC(e,t,r,null,i)}}function tF(e){return e=kD(e),_5(e)}var LE=null;function _5(e){if(LE=null,e=Jy(e),e!==null){var t=G1(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=cZ(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return LE=e,null}function VY(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ohe()){case fZ:return 2;case mZ:return 8;case uE:case ahe:return 32;case yZ:return 268435456;default:return 32}default:return 32}}var iF=!1,Yd=null,Qd=null,Xd=null,Q_=new Map,X_=new Map,Td=[],_fe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mz(e,t){switch(e){case"focusin":case"focusout":Yd=null;break;case"dragenter":case"dragleave":Qd=null;break;case"mouseover":case"mouseout":Xd=null;break;case"pointerover":case"pointerout":Q_.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":X_.delete(t.pointerId)}}function j0(e,t,i,r,s,n){return e===null||e.nativeEvent!==n?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:n,targetContainers:[s]},t!==null&&(t=Zv(t),t!==null&&jY(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Sfe(e,t,i,r,s){switch(t){case"focusin":return Yd=j0(Yd,e,t,i,r,s),!0;case"dragenter":return Qd=j0(Qd,e,t,i,r,s),!0;case"mouseover":return Xd=j0(Xd,e,t,i,r,s),!0;case"pointerover":var n=s.pointerId;return Q_.set(n,j0(Q_.get(n)||null,e,t,i,r,s)),!0;case"gotpointercapture":return n=s.pointerId,X_.set(n,j0(X_.get(n)||null,e,t,i,r,s)),!0}return!1}function zY(e){var t=Jy(e.target);if(t!==null){var i=G1(t);if(i!==null){if(t=i.tag,t===13){if(t=cZ(i),t!==null){e.blockedOn=t,mhe(e.priority,function(){if(i.tag===13){var r=wn();r=RD(r);var s=Jv(i,r);s!==null&&bn(s,i,r),w5(i,r)}});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=tF(e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);wR=r,i.target.dispatchEvent(r),wR=null}else return t=Zv(i),t!==null&&jY(t),e.blockedOn=i,!1;t.shift()}return!0}function Az(e,t,i){gx(e)&&i.delete(t)}function Tfe(){iF=!1,Yd!==null&&gx(Yd)&&(Yd=null),Qd!==null&&gx(Qd)&&(Qd=null),Xd!==null&&gx(Xd)&&(Xd=null),Q_.forEach(Az),X_.forEach(Az)}function FT(e,t){e.blockedOn===t&&(e.blockedOn=null,iF||(iF=!0,Hi.unstable_scheduleCallback(Hi.unstable_NormalPriority,Tfe)))}var NT=null;function Iz(e){NT!==e&&(NT=e,Hi.unstable_scheduleCallback(Hi.unstable_NormalPriority,function(){NT===e&&(NT=null);for(var t=0;t<e.length;t+=3){var i=e[t],r=e[t+1],s=e[t+2];if(typeof r!="function"){if(_5(r||i)===null)continue;break}var n=Zv(i);n!==null&&(e.splice(t,3),t-=3,LR(n,{pending:!0,data:s,method:i.method,action:r},r,s))}}))}function K_(e){function t(u){return FT(u,e)}Yd!==null&&FT(Yd,e),Qd!==null&&FT(Qd,e),Xd!==null&&FT(Xd,e),Q_.forEach(t),X_.forEach(t);for(var i=0;i<Td.length;i++){var r=Td[i];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Td.length&&(i=Td[0],i.blockedOn===null);)zY(i),i.blockedOn===null&&Td.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(r=0;r<i.length;r+=3){var s=i[r],n=i[r+1],o=s[qs]||null;if(typeof n=="function")o||Iz(i);else if(o){var a=null;if(n&&n.hasAttribute("formAction")){if(s=n,o=n[qs]||null)a=o.formAction;else if(_5(s)!==null)continue}else a=o.action;typeof a=="function"?i[r+1]=a:(i.splice(r,3),r-=3),Iz(i)}}}function S5(e){this._internalRoot=e}MA.prototype.render=S5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));var i=t.current,r=wn();DY(i,r,e,t,null,null)};MA.prototype.unmount=S5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;DY(e.current,2,null,e,null,null),TA(),t[Wv]=null}};function MA(e){this._internalRoot=e}MA.prototype.unstable_scheduleHydration=function(e){if(e){var t=_Z();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Td.length&&t!==0&&t<Td[i].priority;i++);Td.splice(i,0,e),i===0&&zY(e)}};var Cz=lZ.version;if(Cz!=="19.1.0")throw Error(Z(527,Cz,"19.1.0"));ut.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=Kde(t),e=e!==null?dZ(e):null,e=e===null?null:e.stateNode,e};var xfe={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var LT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!LT.isDisabled&&LT.supportsFiber)try{B1=LT.inject(xfe),gn=LT}catch{}}dA.createRoot=function(e,t){if(!uZ(e))throw Error(Z(299));var i=!1,r="",s=kJ,n=PJ,o=DJ,a=null;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(n=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(a=t.unstable_transitionCallbacks)),t=kY(e,1,!1,null,null,i,r,s,n,o,a,null),e[Wv]=t.current,y5(e),new S5(t)};dA.hydrateRoot=function(e,t,i){if(!uZ(e))throw Error(Z(299));var r=!1,s="",n=kJ,o=PJ,a=DJ,u=null,c=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(n=i.onUncaughtError),i.onCaughtError!==void 0&&(o=i.onCaughtError),i.onRecoverableError!==void 0&&(a=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(u=i.unstable_transitionCallbacks),i.formState!==void 0&&(c=i.formState)),t=kY(e,1,!0,t,i??null,r,s,n,o,a,u,c),t.context=PY(null),i=t.current,r=wn(),r=RD(r),s=Hd(r),s.callback=null,Wd(i,s,r),i=r,t.current.lanes=i,W1(t,i),Tl(t),e[Wv]=t.current,y5(e),new MA(t)};dA.version="19.1.0";function UY(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UY)}catch(e){console.error(e)}}UY(),iZ.exports=dA;var $fe=iZ.exports;const Oz=e=>{let t;const i=new Set,r=(c,h)=>{const p=typeof c=="function"?c(t):c;if(!Object.is(p,t)){const m=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),i.forEach(y=>y(t,m))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>u,subscribe:c=>(i.add(c),()=>i.delete(c))},u=t=e(r,s,a);return a},Efe=e=>e?Oz(e):Oz,Mfe=e=>e;function Afe(e,t=Mfe){const i=c6.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return c6.useDebugValue(i),i}const Rz=e=>{const t=Efe(e),i=r=>Afe(t,r);return Object.assign(i,t),i},qY=e=>e?Rz(e):Rz,Ife=async e=>{const t=await fetch(e);if(!t.ok)throw new Error("Error al obtener los datos");return t.json()},Cfe="data/communities.json",Ofe={default:"is-white","Tech Meetup":"is-warning",Conferencia:"is-link","Grupo colaborativo":"is-info","Organizacin paraguas":"is-success","Grupo de ayuda mutua":"is-info is-light",Hacklab:"is-danger","Escuela de formacin":"is-link is-light",Podcast:"is-danger is-light",Fundacin:"is-success is-light",Medio:"is-warning is-light"},Rfe={Desconocido:"is-white",Presencial:"is-warning",Online:"is-link",Hibridos:"is-info"},rF="BAJA",Ffe=e=>{const t={};return e.forEach(i=>{Object.keys(i).forEach(r=>{var n;const s=(n=i[r])==null?void 0:n.toString().trim().toLowerCase();t[r]||(t[r]={}),t[r][s]||(t[r][s]=new Set),t[r][s].add(i.id)})}),t},Fz={BASE_URL:"/communities-directory/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE:"/communities-directory/"},sF=new Map,kT=e=>{const t=sF.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([i,r])=>[i,r.getState()])):{}},Nfe=(e,t,i)=>{if(e===void 0)return{type:"untracked",connection:t.connect(i)};const r=sF.get(i.name);if(r)return{type:"tracked",store:e,...r};const s={connection:t.connect(i),stores:{}};return sF.set(i.name,s),{type:"tracked",store:e,...s}},Lfe=(e,t={})=>(i,r,s)=>{const{enabled:n,anonymousActionType:o,store:a,...u}=t;let c;try{c=(n??(Fz?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!c)return e(i,r,s);const{connection:h,...p}=Nfe(a,c,u);let m=!0;s.setState=(v,b,w)=>{const _=i(v,b);if(!m)return _;const S=w===void 0?{type:o||"anonymous"}:typeof w=="string"?{type:w}:w;return a===void 0?(h==null||h.send(S,r()),_):(h==null||h.send({...S,type:`${a}/${S.type}`},{...kT(u.name),[a]:s.getState()}),_)};const y=(...v)=>{const b=m;m=!1,i(...v),m=b},g=e(s.setState,r,s);if(p.type==="untracked"?h==null||h.init(g):(p.stores[p.store]=s,h==null||h.init(Object.fromEntries(Object.entries(p.stores).map(([v,b])=>[v,v===p.store?g:b.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let v=!1;const b=s.dispatch;s.dispatch=(...w)=>{(Fz?"production":void 0)!=="production"&&w[0].type==="__setState"&&!v&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),v=!0),b(...w)}}return h.subscribe(v=>{var b;switch(v.type){case"ACTION":if(typeof v.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return ZC(v.payload,w=>{if(w.type==="__setState"){if(a===void 0){y(w.state);return}Object.keys(w.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const _=w.state[a];if(_==null)return;JSON.stringify(s.getState())!==JSON.stringify(_)&&y(_);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(w)});case"DISPATCH":switch(v.payload.type){case"RESET":return y(g),a===void 0?h==null?void 0:h.init(s.getState()):h==null?void 0:h.init(kT(u.name));case"COMMIT":if(a===void 0){h==null||h.init(s.getState());return}return h==null?void 0:h.init(kT(u.name));case"ROLLBACK":return ZC(v.state,w=>{if(a===void 0){y(w),h==null||h.init(s.getState());return}y(w[a]),h==null||h.init(kT(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return ZC(v.state,w=>{if(a===void 0){y(w);return}JSON.stringify(s.getState())!==JSON.stringify(w[a])&&y(w[a])});case"IMPORT_STATE":{const{nextLiftedState:w}=v.payload,_=(b=w.computedStates.slice(-1)[0])==null?void 0:b.state;if(!_)return;y(a===void 0?_:_[a]),h==null||h.send(null,w);return}case"PAUSE_RECORDING":return m=!m}return}}),g},kfe=Lfe,ZC=(e,t)=>{let i;try{i=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}i!==void 0&&t(i)},Pfe=(e,t,i)=>{const r=Object.keys(i).filter(n=>i[n].length>0);if(r.length===0)return e;let s=null;return r.forEach(n=>{const o=i[n].map(u=>{var p;const c=u.toString().trim().toLowerCase();return((p=t[n])==null?void 0:p[c])||new Set}).filter(u=>u.size>0),a=new Set(o.flatMap(u=>[...u]));s===null?s=a:s=new Set([...s].filter(u=>a.has(u)))}),!s||s.size===0?(console.warn("No se encontraron IDs comunes para los filtros aplicados."),[]):e.filter(n=>s.has(n.id))},Dfe={allCommunities:[],invertedIndex:{},communitiesFiltered:[],isLoading:!1,error:null,filters:{},numberOFCommunities:0,numberOFOnSiteCommunities:0},Kv=qY(kfe((e,t)=>({...Dfe,actions:{fetchCommunities:async()=>{e({isLoading:!0,error:null});try{const i=await Ife(Cfe),r=Ffe(i);e({allCommunities:i,invertedIndex:r,communitiesFiltered:i,isLoading:!1,numberOFCommunities:i.length,numberOFOnSiteCommunities:i.filter(s=>s.displayOnMap==!0).length})}catch(i){e({error:i.message,isLoading:!1})}},filterComunities:(i,r)=>{const{allCommunities:s,filters:n,invertedIndex:o}=t(),a=jfe(n,i,r),u=Pfe(s,o,a);e({communitiesFiltered:u,filters:a,numberOFCommunities:u.length,numberOFOnSiteCommunities:u.filter(c=>c.displayOnMap==!0).length})}}}))),jfe=(e,t,i)=>{if(i.startsWith(rF)){const o=i.slice(rF.length,i.length),a=e[t].filter(u=>u!==o);if(a.length===0){const{[t]:u,...c}=e;return c}else return{...e,[t]:a}}const r=Array.isArray(i)?i:[i],s=e[t],n=Array.isArray(s)?[...s,i]:[...s?[s]:[],...r];return{...e,[t]:n}},GY=()=>Kv(e=>e.communitiesFiltered),Vfe=()=>Kv(e=>e.isLoading),zfe=()=>Kv(e=>e.error),Ufe=()=>Kv(e=>e.numberOFCommunities),qfe=()=>Kv(e=>e.numberOFOnSiteCommunities),BY=()=>Kv(e=>e.actions);function HY({community:e}){const{name:t,status:i,lastReviewed:r,communityType:s,eventFormat:n,location:o,contactInfo:a,communityUrl:u,thumbnailUrl:c,latLon:h}=e,p=i.toUpperCase()=="ACTIVA"?"tag is-light is-primary":"tag is-light is-danger",m=a?"fas fa-envelope exists":"fas fa-envelope not-exists";return z.jsxs("div",{className:"card mycard",children:[z.jsxs("div",{className:"headingtag",children:[z.jsx("span",{className:`tag ${Ofe[s]}`,children:s}),z.jsx("span",{className:`tag ${Rfe[n]}`,children:n})]}),z.jsx("div",{className:"card-image",children:z.jsx("figure",{className:"image is-4by3",children:z.jsx("img",{src:c||"https://bulma.io/assets/images/placeholders/1280x960.png",alt:t})})}),z.jsxs("div",{className:"card-content",children:[z.jsx("div",{className:"media",children:z.jsx("div",{className:"media-content",children:z.jsx("a",{href:u,target:"_blank",alt:t,children:z.jsx("p",{className:"title is-4 alto45rem",children:t})})})}),z.jsxs("div",{className:"level level-is-shrinkable",children:[z.jsx("div",{className:"level-left",children:z.jsx("div",{className:"level-item",children:z.jsx("p",{className:"subtitle is-5 localizacion",children:o})})}),z.jsx("div",{className:"level-right",children:z.jsx("div",{className:"level-item",children:z.jsx("div",{className:"subtitle is-6",children:z.jsxs("div",{className:"popover-container",children:[z.jsx("button",{className:"popover-trigger",children:z.jsx("i",{className:m})}),z.jsx("div",{className:"popover-content",children:z.jsx("div",{className:"box",children:a||"Sin Contacto"})})]})})})})]}),z.jsxs("div",{className:"level",children:[z.jsx("div",{className:"level-left",children:z.jsx("div",{className:"level-item",children:z.jsx("span",{className:p,children:i})})}),z.jsx("div",{className:"level-right",children:z.jsx("div",{className:"level-item",children:z.jsxs("div",{className:"popover-container",children:[z.jsx("p",{className:"subtitle is-6 popover-trigger",children:r}),z.jsx("div",{className:"popover-content",children:z.jsxs("div",{className:"box",children:["Fecha de la ltima revisin: ",r]})})]})})})]})]})]})}function Gfe(){const e=Vfe(),t=zfe(),i=GY();return e?z.jsx("p",{children:"Cargando datos..."}):t?z.jsxs("p",{children:["Error: ",t]}):z.jsx("div",{className:"communitieslist",children:i.map(r=>z.jsx(HY,{community:r},r.id))})}function Bfe(){return z.jsx("footer",{className:"mi-footer is-hidden-mobile",children:z.jsx("div",{className:"content has-text-centered",children:z.jsxs("p",{children:["Proyecto mantenido con ",z.jsx("a",{href:"https://github.com/ComBuildersES/communities-directory",target:"_blank",children:"por la comunidad"})," | Cdigo bajo ",z.jsx("a",{href:"https://github.com/ComBuildersES/communities-directory/#licencias",children:"Apache License 2.0"})," & datos bajo ",z.jsx("a",{href:"https://github.com/ComBuildersES/communities-directory/#licencias",children:"CC BY 4.0"})]})})})}const WY=qY(e=>({isSidebarVisible:window.innerWidth>768,actions:{toggleSidebar:()=>e(t=>({isSidebarVisible:!t.isSidebarVisible})),setSidebarVisibility:t=>e({isSidebarVisible:t})}})),ZY=()=>WY(e=>e.isSidebarVisible),Hfe=()=>WY(e=>e.actions);function Wfe({view:e,toggleView:t}){return z.jsxs("button",{className:"button is-primary ml-2",onClick:t,children:[z.jsx("i",{className:`fa-solid ${e==="map"?"fa-list":"fa-map"}`}),"",e==="map"?"Ver lista":"Ver mapa"]})}function Zfe({view:e,toggleView:t}){const{toggleSidebar:i}=Hfe(),r=ZY(),s=Ufe(),n=qfe();return z.jsx("div",{children:z.jsxs("div",{id:"title",className:"is-flex-tablet is-align-items-center sticky",children:[z.jsx("h2",{className:"title is-3 mr-4",children:"Comunidades Tech"}),z.jsxs("button",{className:"button is-primary mr-2",onClick:i,children:[z.jsx("i",{className:r?"fa-solid fa-eye-slash":"fa-solid fa-filter"}),"",r?"Ocultar filtros":"Filtrar"]}),z.jsx(Wfe,{view:e,toggleView:t}),z.jsxs("div",{style:{padding:"10px"},children:["Mostrando:",e==="map"?`${n} comunidades presenciales e hbridas`:`${s} comunidades`]})]})})}var Jfe=":",Ff=class{resolve(t){}reject(t){}constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}};function qt(e,t,...i){try{return e==null?void 0:e.call(t,...i)}catch(r){console.error(r,e)}}async function nF(e,t,...i){try{const r=e==null?void 0:e.call(t,...i);return r instanceof Promise?await r:r}catch(r){console.error(r,e)}}var T5=e=>e.replace(Yfe,(t,i)=>`${i===0?"":"-"}${t.toLowerCase()}`),Yfe=/[A-Z]+(?![a-z])|[A-Z]/gu;function Qfe(e,t){const i=t/Xfe;let r=0;const s=setInterval(()=>{r+=i,r>=t&&(clearInterval(s),e())},i);return s}var Xfe=4;function JY(e){return e!==void 0}function YY(e){var i,r;let t=e;for(;t=t.parentNode??t.host;)if((i=t==null?void 0:t.constructor)!=null&&i.lumina){const s=t;return(r=s.manager)!=null&&r.loadedCalled||s._offspring.push(e),s._postLoad.promise}return!1}var vx=Object.defineProperty;function Kfe(e){const t=e.split(Jfe);return t.length===1?[t[0],T5(t[0])]:t}var eme=globalThis.HTMLElement??Kfe,Yg;Yg=class extends eme{constructor(){super(),this._store={},this._pendingAttributes=[],this._postLoad=new Ff,this._postLoaded=new Ff,this._offspring=[],this._saveInstanceProperties();const t=this.constructor;t._LitConstructor?this._initializeComponent({a:t._LitConstructor}):t._loadPromise.then(this._initializeComponent.bind(this)).catch(i=>{this._postLoaded.reject(i),setTimeout(()=>{throw i})})}static _initializePrototype(){var t,i,r;(t=this._properties)==null||t.forEach(this._bindProp,this),(i=this._asyncMethods)==null||i.forEach(this._bindAsync,this),(r=this._syncMethods)==null||r.forEach(this._bindSync,this)}static _bindProp(t){vx(this.prototype,t,{configurable:!0,enumerable:!0,get(){return this._store[t]},set(i){this._store[t]=i}})}static _bindAsync(t){vx(this.prototype,t,{async value(...i){return this._litElement||await this._postLoaded.promise,await this._litElement[t](...i)},configurable:!0})}static _bindSync(t){vx(this.prototype,t,{value(...i){return this._litElement[t](...i)},configurable:!0})}get manager(){var t;return(t=this._litElement)==null?void 0:t.manager}_saveInstanceProperties(){var r;const t=this.constructor,i=this;(r=t._properties)==null||r.forEach(s=>{Object.hasOwn(this,s)&&(this._store[s]=i[s],delete i[s])})}attributeChangedCallback(t,i,r){var s;(s=this._litElement)==null||s.attributeChangedCallback(t,i,r),this._litElement||this._pendingAttributes.push(t)}connectedCallback(){var t,i;this._litElement?(i=(t=this._litElement).connectedCallback)==null||i.call(t):queueMicrotask(()=>{this._ancestorLoad=YY(this)})}disconnectedCallback(){var t,i;(i=(t=this._litElement)==null?void 0:t.disconnectedCallback)==null||i.call(t)}async componentOnReady(){return await this._postLoaded.promise,this}_initializeComponent(t){var p;const i=this.constructor,r=i._name,s=this._store,n=Object.values(t).find(m=>m.tagName===r),o=`${r}--lazy`;let a=n;for(;a&&!Object.hasOwn(a,"lumina");)a=Object.getPrototypeOf(a);ime(a),!i._LitConstructor&&(i._LitConstructor=n,customElements.define(o,n)),n.lazy=this;const c=document.createElement(o);n.lazy=void 0,this._litElement=c,this._store=c,this._pendingAttributes.forEach(m=>{const y=this.getAttribute(m);c.attributeChangedCallback(m,null,y)}),Object.entries(s).forEach(tme,c);const h=this.isConnected;(h||this._ancestorLoad)&&((p=c.connectedCallback)==null||p.call(c),h||c.disconnectedCallback())}addController(){}requestUpdate(){var t;(t=this._litElement)==null||t.requestUpdate()}},Yg.lumina=!0;function tme([e,t]){this[e]=t}function ime(e){const t=e.prototype,i=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(s,n){i.setAttribute.call(this.el,s,n)},t.removeAttribute=function(s){i.removeAttribute.call(this.el,s)},vx(t,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))}var oF={};function rme(e,t){var i;if(t){const r=e.constructor.elementProperties;e.manager.internals.members=Object.fromEntries(Array.from(r,([s,n])=>n.noAccessor?void 0:[s,[(n.readOnly?2048:0)|(n.state?32:16)]]).filter(JY))}else{const r=e.constructor,s=((i=r.__registerControllers)==null?void 0:i.call(r,e))??void 0;if(r.__registerControllers=void 0,typeof s!="object")throw new Error("Failed to retrieve component meta");e.manager.internals.members=Object.fromEntries(Object.entries(s).filter(([n,[o]])=>(o&63)!==0))}}function sme(e,t=8){return e==null||typeof e=="object"||typeof e=="function"?e:t&4?e==="false"?!1:e===""||!!e:t&2?Number.parseFloat(e):t&1?String(e):e}var nme=(e,t)=>{var i,r;return(r=(i=e.manager.internals.members)==null?void 0:i[t])==null?void 0:r[0]},x5=Symbol.for("controller"),ome=e=>typeof e=="object"&&e!==null&&(x5 in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e),ww;function bw(e){ww!==e&&(ww=e,queueMicrotask(()=>{ww===e&&(ww=void 0)}))}function oS(e){return ww}var Qh=[];function QY(e){if(e===void 0){Qh=[];return}const t=Qh.indexOf(e);Qh=t===-1?[...Qh,e]:Qh.slice(0,t+1),queueMicrotask(()=>{Qh=[]})}function XY(){return Qh}var ng;function ame(e){ng!==e&&(ng=e,queueMicrotask(()=>{ng===e&&(ng=void 0)}))}function lme(){const e=ng;return ng=void 0,e}var ume=async(e,t)=>{const i=$5(e);if(i===void 0)return e;if(await i.ready,typeof t=="function"){const r=i.watchExports(s=>t(s,r))}return i.exports},cme=async e=>{const t=$5(e);return await t.ready,t},$5=e=>{const i=oS().manager.internals.resolveExports(e);if(i!==void 0)return i;if(ome(e))return e;const r=lme();if(r!==void 0)return r},Vu={setter:!1,getter:!1,readOnly:!1},kE=new WeakMap,KY;KY=x5;var dme=class{constructor(t){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new Ff,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[KY]=!0,this.ready=this._ready.promise,this._exports=Lz(this),this._exportWatchers=new Set;const i=t??oS();this.component=i,this.component.addController(this),this.component.manager===void 0||(QY(this),queueMicrotask(()=>this.catchUpLifecycle()))}catchUpLifecycle(){const{manager:t}=this.component;t.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),t._loadCalled&&this.triggerLoad().then(()=>{t.loadedCalled&&this.triggerLoaded()}).catch(console.error)}get exports(){return this._exports}set exports(t){const i=this._exports;i!==t&&(this._exports=t,this._exportWatchers.forEach(qt),this.connectedCalled&&this.assignedProperty!==!1&&this.component.requestUpdate(this.assignedProperty,i)),this._ready.resolve(t)}setProvisionalExports(t,i=!0){this._exports=i?Lz(t):t,this._exportWatchers.forEach(qt)}watchExports(t){const i=()=>t(this._exports);return this._exportWatchers.add(i),()=>void this._exportWatchers.delete(i)}get use(){return bw(this.component),ume}get useRef(){return bw(this.component),cme}get useRefSync(){return bw(this.component),$5}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(t){this._callbacks.hostConnected.push(t)}onDisconnected(t){this._callbacks.hostDisconnected.push(t)}onLoad(t){this._callbacks.hostLoad.push(t)}onLoaded(t){this._callbacks.hostLoaded.push(t)}onUpdate(t){this._callbacks.hostUpdate.push(t)}onUpdated(t){this._callbacks.hostUpdated.push(t)}onDestroy(t){this._callbacks.hostDestroy.push(t)}onLifecycle(t){this._callbacks.hostLifecycle.push(t),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(t)}triggerConnected(){const t=this;t.hostConnected&&qt(t.hostConnected,t),this._callbacks.hostConnected.forEach(qt),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const t=this;t.hostDisconnected&&qt(t.hostDisconnected,t),this._callbacks.hostDisconnected.forEach(qt),this._lifecycleCleanups.forEach(qt),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const t=this;t.hostLoad&&await nF(t.hostLoad,t),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(nF)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const t=this;t.hostLoaded&&qt(t.hostLoaded,t),this._callbacks.hostLoaded.forEach(qt),this.loadedCalled=!0}triggerUpdate(t){const i=this;i.hostUpdate&&qt(i.hostUpdate,i,t),this._callbacks.hostUpdate.forEach(Nz,t)}triggerUpdated(t){const i=this;i.hostUpdated&&qt(i.hostUpdated,i,t),this._callbacks.hostUpdated.forEach(Nz,t)}triggerDestroy(){const t=this;t.hostDestroy&&qt(t.hostDestroy,t),this._callbacks.hostDestroy.forEach(qt)}triggerLifecycle(){const t=this;t.hostLifecycle&&this._callLifecycle(()=>t.hostLifecycle()),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(t){bw(this.component);const i=qt(t);(Array.isArray(i)?i:[i]).forEach(s=>{typeof s=="function"?this._lifecycleCleanups.push(s):typeof s=="object"&&typeof s.remove=="function"&&this._lifecycleCleanups.push(s.remove)})}};function Nz(e){qt(e,void 0,this)}var eQ=dme;function Lz(e){if(typeof e!="object"&&typeof e!="function"||e===null)return e;const t=new Proxy(e,{get(i,r,s){if(!(hme.has(r)&&r in i&&i[r]===t)&&(r in i||r in Promise.prototype||typeof r=="symbol"))return typeof i=="function"?i[r]:Reflect.get(i,r,s)},set:(i,r,s,n)=>Reflect.set(i,r,s,n)});return t}var hme=new Set(["exports","_exports"]);function pme(e,t,i){const r=Object.keys(e),s=r.length;Iu===void 0&&queueMicrotask(E5),Iu??(Iu=new Map);let n=Iu.get(e);return n===void 0&&(n={callbacks:[],keyCount:s},Iu.set(e,n)),n.keyCount!==s&&(n.callbacks.forEach(o=>o(r)),n.callbacks=[],n.keyCount=s),n.callbacks.push(o=>{const a=c=>qt(t,null,c),u=o[s];u===void 0?a(void 0):e[u]===i?a(u):a(void 0)}),i}var Iu=void 0;function E5(){Array.from((Iu==null?void 0:Iu.entries())??[]).forEach(([e,{callbacks:t}])=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Iu=void 0}function tQ(e,t,i){var r;const s=t,n=e.manager.internals;(r=n.allWatchers)[s]??(r[s]=[]);const o=n.allWatchers[s],a=i,u=(c,h,p)=>qt(a,null,c,h,p);return o.push(u),()=>{const c=o.indexOf(u);c!==-1&&o.splice(c,1)}}var fme=class{constructor(e){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const t=this.component.manager.internals;Object.entries(t.members).forEach(([i,[r]])=>{var s;r&2048&&((s=t.setters)[i]??(s[i]=[]),t.setters[i].push(t.readonlySetter))})},this.trackedValue=aF,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this._exports=new WeakMap,this.readonlySetter=(t,i,r)=>{if(Vu.readOnly)return t;throw new Error(`Cannot assign to read-only property "${r}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(t)}"`)},this.component=e}firePropTrackers(e,t){const i=this.keyTrackers;this.trackedValue=aF,this.keyTrackers=[],i.forEach(r=>r(e,t))}getSetProxy(e){const t=this.component,i=t.constructor.prototype;if(this._getSetProxy(i,e,"class"),t.manager.isLit)return;const r=t.el.constructor.prototype;i!==r&&this._getSetProxy(r,e,"html")}_getSetProxy(e,t,i){const r=this.component,s=nme(r,t);let n;do n=Object.getOwnPropertyDescriptor(e,t);while(!n&&(e=Object.getPrototypeOf(e)));if(!n)return;const o=n.get,a=n.set,u=PT in o,c=PT in a;if(u&&c)return;const h=!u,p=!c,m=h?function(){let v=o.call(this);const b=kE.get(this);if(Vu.getter||b===void 0)return v;const w=b.manager.internals;v=w.accessorGetter[t](v,t);const _=w.getters[t]??JC;for(let S=0;S<_.length;S++)v=_[S](v,t);return v}:o,y=p?function(v){var T;const b=o.call(this),w=kE.get(this);if(w===void 0){a.call(this,v);return}let _=w.manager.isLit?v??void 0:sme(v,s);const S=w.manager.internals;if(_===b)a.call(this,_);else{const E=Vu.setter?JC:S.setters[t]??JC;for(let A=0;A<E.length&&(_=E[A](_,b,t),_!==b);A++);_=S.accessorSetter[t](_,b,t),a.call(this,_),_!==b&&((T=S.enabledWatchers[t])==null||T.forEach(A=>A(_,b,t)))}S.keyTrackers.length>0&&(S==null||S.firePropTrackers(t,v))}:a;h&&(m[PT]=!0),p&&(y[PT]=!0),Object.defineProperty(e,t,{...n,get:m,set:y})}markExports(e,t){(typeof t=="object"&&t!==null||typeof t=="function")&&this._exports.set(t,e)}resolveExports(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this._exports.get(e)}},JC=[],PT=Symbol(),aF=Symbol();function iQ(e,t,i){const r=e.manager.internals;return r.trackedValue!==aF&&r.trackedValue!==i&&r.firePropTrackers(void 0,void 0),r.keyTrackers.length===0&&queueMicrotask(()=>r.firePropTrackers(void 0,void 0)),r.trackedValue=i,r.keyTrackers.push((s,n)=>qt(t,void 0,i===n?s:void 0)),i}function M5(e=[oS(),...XY()],t,i){const r=Array.isArray(e)?e:[e];let s=r.length+1;const n=a=>{s-=1,a!==void 0&&(s=Math.min(s,0)),s===0&&t(a)};r.forEach(a=>pme(a,u=>n(u===void 0?void 0:{key:u,host:a,isReactive:!1}),i));const o=r.find(a=>"manager"in a&&typeof a.manager=="object"&&a.manager.component===a);return o&&iQ(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i),i}function mme(e){Vu.setter=!0;try{return e()}finally{Vu.setter=!1}}function yme(e){Vu.getter=!0;try{return e()}finally{Vu.getter=!1}}function gme(e){Vu.readOnly=!0;try{return e()}finally{Vu.readOnly=!1}}var vme=e=>(...t)=>{const i=XY(),r=new e(...t),s=r.exports;QY(i.at(-1));const n=r.component.manager.internals;n.markExports(r,s),r.watchExports(a=>n.markExports(r,a)),ame(r);const o=[r.component,...i].reverse();return M5(o,a=>a===void 0?void 0:wme(r,a,s),s)};function wme(e,{host:t,key:i,isReactive:r},s){const n=t,o=n[i]!==e.exports,a=n[i]!==s,u=s!==e.exports;if(o&&!a&&u&&(n[i]=e.exports),t===e.component){if(r){const h=e.component.manager.internals;a&&h.markExports(e,n[i]),tQ(e.component,i,p=>{p!==e.exports&&h.markExports(e,p)})}e.assignedProperty=r?void 0:i}e.watchExports(()=>{var m;if(n[i]===e.exports)return;const h=e.component.manager;((m=h.internals.setters[i])==null?void 0:m.includes(h.internals.readonlySetter))?gme(()=>{n[i]=e.exports}):n[i]=e.exports})}var bme=(e,t)=>new _me(e,t),_me=class extends eQ{constructor(t,i){const r="addController"in t,s=new Set;function n(c){var h;s.add(c),!(x5 in c)&&t.renderRoot&&t.el.isConnected&&((h=c.hostConnected)==null||h.call(c))}function o(c){var h;s.delete(c),(h=c.controllerRemoved)==null||h.call(c)}const a=t;if(a.addController=n,a.removeController=o,!r){const c=i??t.constructor.__forceUpdate;a.requestUpdate=()=>c(t)}super(t),this.internals=new fme(this.component),this.destroyed=!1,this._updatePromise=new Ff,this._originalLifecycles={},this.isLit=r,this.component.manager=this,rme(t,r),this._controllers=s,this.exports=void 0,this.hasDestroy=YC in this.component&&typeof this.component.destroy=="function",this._bindLifecycleMethods();const u=this.internals;Object.keys(u.members).forEach(c=>{u.accessorGetter[c]=kz,u.accessorSetter[c]=kz,u.getSetProxy(c)}),r?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(t,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(u.enableReadonly),bw(t),kE.set(t.el,t),kE.set(t,t)}_bindLifecycleMethods(){const t=this.component,i=this.isLit,r=t.el===t;this._originalLifecycles={_connectedCallback:i||r?void 0:t.connectedCallback,_disconnectedCallback:i||r?void 0:t.disconnectedCallback,_load:i?t.load:t.componentWillLoad,_loaded:i?t.loaded:t.componentDidLoad,_willUpdate:i?void 0:t.componentWillUpdate,_updated:i?void 0:t.componentDidUpdate,_destroy:t.destroy};const s=this._connectedCallback.bind(this),n=this._disconnectedCallback.bind(this),o=this._update.bind(this),a=this._updated.bind(this);i?t.constructor.prototype.addController.call(t,{hostConnected:s,hostDisconnected:n,hostUpdate:o,hostUpdated:a}):(t.connectedCallback=s,t.disconnectedCallback=n,t.componentWillLoad=this._load.bind(this),t.componentDidLoad=this._loaded.bind(this),t.componentWillUpdate=o,t.componentDidUpdate=a),this.hasDestroy&&(t.destroy=this.destroy.bind(this))}_connectedCallback(){var i,r;if(this.destroyed){const s=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${s} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${YC} prop.`)}this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout);const t=this.internals;t.enabledWatchers=t.allWatchers,E5(),(i=t.enableReadonly)==null||i.call(t),this._controllers.forEach(Tme),(r=this._originalLifecycles._connectedCallback)==null||r.call(this.component)}_disconnectedCallback(){var t;this.destroyed||(this._controllers.forEach(xme),(t=this._originalLifecycles._disconnectedCallback)==null||t.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var t;await Promise.allSettled(Array.from(this._controllers,$me)),await((t=this._originalLifecycles._load)==null?void 0:t.call(this.component)),this.hasDestroy&&tQ(this.component,YC,()=>this._setAutoDestroyTimeout())}_loaded(){var t;this._controllers.forEach(Eme),(t=this._originalLifecycles._loaded)==null||t.call(this.component)}_update(){var i;const t=this.component;return this._controllers.forEach(Mme,t.$changes),(i=this._originalLifecycles._willUpdate)==null?void 0:i.call(this.component)}_updated(){var i;const t=this.component;if(this._controllers.forEach(Ame,t.$changes),(i=this._originalLifecycles._updated)==null||i.call(this.component),this.isLit)t.$changes=new Map;else{const r=this._updatePromise;this._updatePromise=new Ff,r.resolve(!0)}}async destroy(){var t;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(Ime),this._controllers.clear(),await((t=this._originalLifecycles._destroy)==null?void 0:t.call(this.component))}}_setAutoDestroyTimeout(){if(this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const t=()=>void this.destroy().catch(console.error);this._autoDestroyTimeout=Qfe(t,Sme)}}},YC="autoDestroyDisabled",Sme=1e3,kz=e=>e;function Tme(e){"triggerConnected"in e?e.triggerConnected():qt(e.hostConnected,e)}function xme(e){"triggerDisconnected"in e?e.triggerDisconnected():qt(e.hostDisconnected,e)}async function $me(e){"triggerLoad"in e?await e.triggerLoad():await nF(e.hostLoad,e)}function Eme(e){"triggerLoaded"in e?e.triggerLoaded():qt(e.hostLoaded,e)}function Mme(e){"triggerUpdate"in e?e.triggerUpdate(this):qt(e.hostUpdate,e,this)}function Ame(e){"triggerUpdated"in e?e.triggerUpdated(this):qt(e.hostUpdated,e,this)}function Ime(e){"triggerDestroy"in e?e.triggerDestroy():qt(e.hostDestroy,e)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const wx=globalThis,A5=wx.ShadowRoot&&(wx.ShadyCSS===void 0||wx.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,I5=Symbol(),Pz=new WeakMap;let rQ=class{constructor(t,i,r){if(this._$cssResult$=!0,r!==I5)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=i}get styleSheet(){let t=this.o;const i=this.t;if(A5&&t===void 0){const r=i!==void 0&&i.length===1;r&&(t=Pz.get(i)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&Pz.set(i,t))}return t}toString(){return this.cssText}};const Cme=e=>new rQ(typeof e=="string"?e:e+"",void 0,I5),Ome=(e,...t)=>{const i=e.length===1?e[0]:t.reduce((r,s,n)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+e[n+1],e[0]);return new rQ(i,e,I5)},Rme=(e,t)=>{if(A5)e.adoptedStyleSheets=t.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of t){const r=document.createElement("style"),s=wx.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=i.cssText,e.appendChild(r)}},Dz=A5?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let i="";for(const r of t.cssRules)i+=r.cssText;return Cme(i)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Fme,defineProperty:Nme,getOwnPropertyDescriptor:Lme,getOwnPropertyNames:kme,getOwnPropertySymbols:Pme,getPrototypeOf:Dme}=Object,Kd=globalThis,jz=Kd.trustedTypes,jme=jz?jz.emptyScript:"",QC=Kd.reactiveElementPolyfillSupport,l_=(e,t)=>e,lF={toAttribute(e,t){switch(t){case Boolean:e=e?jme:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=e!==null;break;case Number:i=e===null?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch{i=null}}return i}},C5=(e,t)=>!Fme(e,t),Vz={attribute:!0,type:String,converter:lF,reflect:!1,useDefault:!1,hasChanged:C5};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Kd.litPropertyMetadata??(Kd.litPropertyMetadata=new WeakMap);let Um=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,i=Vz){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(t,i),!i.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(t,r,i);s!==void 0&&Nme(this.prototype,t,s)}}static getPropertyDescriptor(t,i,r){const{get:s,set:n}=Lme(this.prototype,t)??{get(){return this[i]},set(o){this[i]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);n==null||n.call(this,o),this.requestUpdate(t,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??Vz}static _$Ei(){if(this.hasOwnProperty(l_("elementProperties")))return;const t=Dme(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(l_("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(l_("properties"))){const i=this.properties,r=[...kme(i),...Pme(i)];for(const s of r)this.createProperty(s,i[s])}const t=this[Symbol.metadata];if(t!==null){const i=litPropertyMetadata.get(t);if(i!==void 0)for(const[r,s]of i)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const s=this._$Eu(i,r);s!==void 0&&this._$Eh.set(s,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const i=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const s of r)i.unshift(Dz(s))}else t!==void 0&&i.push(Dz(t));return i}static _$Eu(t,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(i=>this.enableUpdating=i),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(i=>i(this))}addController(t){var i;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((i=t.hostConnected)==null||i.call(t))}removeController(t){var i;(i=this._$EO)==null||i.delete(t)}_$E_(){const t=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Rme(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)})}attributeChangedCallback(t,i,r){this._$AK(t,r)}_$ET(t,i){var n;const r=this.constructor.elementProperties.get(t),s=this.constructor._$Eu(t,r);if(s!==void 0&&r.reflect===!0){const o=(((n=r.converter)==null?void 0:n.toAttribute)!==void 0?r.converter:lF).toAttribute(i,r.type);this._$Em=t,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(t,i){var n,o;const r=this.constructor,s=r._$Eh.get(t);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),u=typeof a.converter=="function"?{fromAttribute:a.converter}:((n=a.converter)==null?void 0:n.fromAttribute)!==void 0?a.converter:lF;this._$Em=s,this[s]=u.fromAttribute(i,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(t,i,r){var s;if(t!==void 0){const n=this.constructor,o=this[t];if(r??(r=n.getPropertyOptions(t)),!((r.hasChanged??C5)(o,i)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(t))&&!this.hasAttribute(n._$Eu(t,r))))return;this.C(t,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(t,i,{useDefault:r,reflect:s,wrapped:n},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(t)&&(this._$Ej.set(t,o??i??this[t]),n!==!0||o!==void 0)||(this._$AL.has(t)||(this.hasUpdated||r||(i=void 0),this._$AL.set(t,i)),s===!0&&this._$Em!==t&&(this._$Eq??(this._$Eq=new Set)).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[n,o]of this._$Ep)this[n]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[n,o]of s){const{wrapped:a}=o,u=this[n];a!==!0||this._$AL.has(n)||u===void 0||this.C(n,void 0,o,u)}}let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(r=this._$EO)==null||r.forEach(s=>{var n;return(n=s.hostUpdate)==null?void 0:n.call(s)}),this.update(i)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(i)}willUpdate(t){}_$AE(t){var i;(i=this._$EO)==null||i.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&(this._$Eq=this._$Eq.forEach(i=>this._$ET(i,this[i]))),this._$EM()}updated(t){}firstUpdated(t){}};Um.elementStyles=[],Um.shadowRootOptions={mode:"open"},Um[l_("elementProperties")]=new Map,Um[l_("finalized")]=new Map,QC==null||QC({ReactiveElement:Um}),(Kd.reactiveElementVersions??(Kd.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const u_=globalThis,PE=u_.trustedTypes,zz=PE?PE.createPolicy("lit-html",{createHTML:e=>e}):void 0,sQ="$lit$",xd=`lit$${Math.random().toFixed(9).slice(2)}$`,nQ="?"+xd,Vme=`<${nQ}>`,Nf=document,e1=()=>Nf.createComment(""),t1=e=>e===null||typeof e!="object"&&typeof e!="function",O5=Array.isArray,zme=e=>O5(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",XC=`[ 	
\f\r]`,V0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Uz=/-->/g,qz=/>/g,Nh=RegExp(`>|${XC}(?:([^\\s"'>=/]+)(${XC}*=${XC}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Gz=/'/g,Bz=/"/g,oQ=/^(?:script|style|textarea|title)$/i,aQ=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),B7e=aQ(1),H7e=aQ(2),ch=Symbol.for("lit-noChange"),pi=Symbol.for("lit-nothing"),Hz=new WeakMap,Qp=Nf.createTreeWalker(Nf,129);function lQ(e,t){if(!O5(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return zz!==void 0?zz.createHTML(t):t}const Ume=(e,t)=>{const i=e.length-1,r=[];let s,n=t===2?"<svg>":t===3?"<math>":"",o=V0;for(let a=0;a<i;a++){const u=e[a];let c,h,p=-1,m=0;for(;m<u.length&&(o.lastIndex=m,h=o.exec(u),h!==null);)m=o.lastIndex,o===V0?h[1]==="!--"?o=Uz:h[1]!==void 0?o=qz:h[2]!==void 0?(oQ.test(h[2])&&(s=RegExp("</"+h[2],"g")),o=Nh):h[3]!==void 0&&(o=Nh):o===Nh?h[0]===">"?(o=s??V0,p=-1):h[1]===void 0?p=-2:(p=o.lastIndex-h[2].length,c=h[1],o=h[3]===void 0?Nh:h[3]==='"'?Bz:Gz):o===Bz||o===Gz?o=Nh:o===Uz||o===qz?o=V0:(o=Nh,s=void 0);const y=o===Nh&&e[a+1].startsWith("/>")?" ":"";n+=o===V0?u+Vme:p>=0?(r.push(c),u.slice(0,p)+sQ+u.slice(p)+xd+y):u+xd+(p===-2?a:y)}return[lQ(e,n+(e[i]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),r]};let uF=class uQ{constructor({strings:t,_$litType$:i},r){let s;this.parts=[];let n=0,o=0;const a=t.length-1,u=this.parts,[c,h]=Ume(t,i);if(this.el=uQ.createElement(c,r),Qp.currentNode=this.el.content,i===2||i===3){const p=this.el.content.firstChild;p.replaceWith(...p.childNodes)}for(;(s=Qp.nextNode())!==null&&u.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const p of s.getAttributeNames())if(p.endsWith(sQ)){const m=h[o++],y=s.getAttribute(p).split(xd),g=/([.?@])?(.*)/.exec(m);u.push({type:1,index:n,name:g[2],strings:y,ctor:g[1]==="."?Gme:g[1]==="?"?Bme:g[1]==="@"?Hme:AA}),s.removeAttribute(p)}else p.startsWith(xd)&&(u.push({type:6,index:n}),s.removeAttribute(p));if(oQ.test(s.tagName)){const p=s.textContent.split(xd),m=p.length-1;if(m>0){s.textContent=PE?PE.emptyScript:"";for(let y=0;y<m;y++)s.append(p[y],e1()),Qp.nextNode(),u.push({type:2,index:++n});s.append(p[m],e1())}}}else if(s.nodeType===8)if(s.data===nQ)u.push({type:2,index:n});else{let p=-1;for(;(p=s.data.indexOf(xd,p+1))!==-1;)u.push({type:7,index:n}),p+=xd.length-1}n++}}static createElement(t,i){const r=Nf.createElement("template");return r.innerHTML=t,r}};function vv(e,t,i=e,r){var o,a;if(t===ch)return t;let s=r!==void 0?(o=i._$Co)==null?void 0:o[r]:i._$Cl;const n=t1(t)?void 0:t._$litDirective$;return(s==null?void 0:s.constructor)!==n&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),n===void 0?s=void 0:(s=new n(e),s._$AT(e,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=s:i._$Cl=s),s!==void 0&&(t=vv(e,s._$AS(e,t.values),s,r)),t}let qme=class{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:r}=this._$AD,s=((t==null?void 0:t.creationScope)??Nf).importNode(i,!0);Qp.currentNode=s;let n=Qp.nextNode(),o=0,a=0,u=r[0];for(;u!==void 0;){if(o===u.index){let c;u.type===2?c=new R5(n,n.nextSibling,this,t):u.type===1?c=new u.ctor(n,u.name,u.strings,this,t):u.type===6&&(c=new Wme(n,this,t)),this._$AV.push(c),u=r[++a]}o!==(u==null?void 0:u.index)&&(n=Qp.nextNode(),o++)}return Qp.currentNode=Nf,s}p(t){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,i),i+=r.strings.length-2):r._$AI(t[i])),i++}},R5=class cQ{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,i,r,s){this.type=2,this._$AH=pi,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=vv(this,t,i),t1(t)?t===pi||t==null||t===""?(this._$AH!==pi&&this._$AR(),this._$AH=pi):t!==this._$AH&&t!==ch&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):zme(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==pi&&t1(this._$AH)?this._$AA.nextSibling.data=t:this.T(Nf.createTextNode(t)),this._$AH=t}$(t){var n;const{values:i,_$litType$:r}=t,s=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=uF.createElement(lQ(r.h,r.h[0]),this.options)),r);if(((n=this._$AH)==null?void 0:n._$AD)===s)this._$AH.p(i);else{const o=new qme(s,this),a=o.u(this.options);o.p(i),this.T(a),this._$AH=o}}_$AC(t){let i=Hz.get(t.strings);return i===void 0&&Hz.set(t.strings,i=new uF(t)),i}k(t){O5(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,s=0;for(const n of t)s===i.length?i.push(r=new cQ(this.O(e1()),this.O(e1()),this,this.options)):r=i[s],r._$AI(n),s++;s<i.length&&(this._$AR(r&&r._$AB.nextSibling,s),i.length=s)}_$AR(t=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);t&&t!==this._$AB;){const s=t.nextSibling;t.remove(),t=s}}setConnected(t){var i;this._$AM===void 0&&(this._$Cv=t,(i=this._$AP)==null||i.call(this,t))}},AA=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,r,s,n){this.type=1,this._$AH=pi,this._$AN=void 0,this.element=t,this.name=i,this._$AM=s,this.options=n,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=pi}_$AI(t,i=this,r,s){const n=this.strings;let o=!1;if(n===void 0)t=vv(this,t,i,0),o=!t1(t)||t!==this._$AH&&t!==ch,o&&(this._$AH=t);else{const a=t;let u,c;for(t=n[0],u=0;u<n.length-1;u++)c=vv(this,a[r+u],i,u),c===ch&&(c=this._$AH[u]),o||(o=!t1(c)||c!==this._$AH[u]),c===pi?t=pi:t!==pi&&(t+=(c??"")+n[u+1]),this._$AH[u]=c}o&&!s&&this.j(t)}j(t){t===pi?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},Gme=class extends AA{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===pi?void 0:t}},Bme=class extends AA{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==pi)}},Hme=class extends AA{constructor(t,i,r,s,n){super(t,i,r,s,n),this.type=5}_$AI(t,i=this){if((t=vv(this,t,i,0)??pi)===ch)return;const r=this._$AH,s=t===pi&&r!==pi||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,n=t!==pi&&(r===pi||s);s&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,t):this._$AH.handleEvent(t)}},Wme=class{constructor(t,i,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){vv(this,t)}};const KC=u_.litHtmlPolyfillSupport;KC==null||KC(uF,R5),(u_.litHtmlVersions??(u_.litHtmlVersions=[])).push("3.3.0");const Zme=(e,t,i)=>{const r=(i==null?void 0:i.renderBefore)??t;let s=r._$litPart$;if(s===void 0){const n=(i==null?void 0:i.renderBefore)??null;r._$litPart$=s=new R5(t.insertBefore(e1(),n),n,void 0,i??{})}return s._$AI(e),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const wf=globalThis;let zu=class extends Um{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const t=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=t.firstChild),t}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Zme(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return ch}};var PW;zu._$litElement$=!0,zu.finalized=!0,(PW=wf.litElementHydrateSupport)==null||PW.call(wf,{LitElement:zu});const e3=wf.litElementPolyfillSupport;e3==null||e3({LitElement:zu});(wf.litElementVersions??(wf.litElementVersions=[])).push("4.2.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dQ={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},hQ=e=>(...t)=>({_$litDirective$:e,values:t});let pQ=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,i,r){this._$Ct=t,this._$AM=i,this._$Ci=r}_$AS(t,i){return this.update(t,i)}update(t,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Jme=hQ(class extends pQ{constructor(e){var t;if(super(e),e.type!==dQ.ATTRIBUTE||e.name!=="class"||((t=e.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){var r,s;if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(n=>n!=="")));for(const n in t)t[n]&&!((r=this.nt)!=null&&r.has(n))&&this.st.add(n);return this.render(t)}const i=e.element.classList;for(const n of this.st)n in t||(i.remove(n),this.st.delete(n));for(const n in t){const o=!!t[n];o===this.st.has(n)||(s=this.nt)!=null&&s.has(n)||(o?(i.add(n),this.st.add(n)):(i.remove(n),this.st.delete(n)))}return ch}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fQ="important",Yme=" !"+fQ,Qme=hQ(class extends pQ{constructor(e){var t;if(super(e),e.type!==dQ.ATTRIBUTE||e.name!=="style"||((t=e.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,i)=>{const r=e[i];return r==null?t:t+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(e,[t]){const{style:i}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const r of this.ft)t[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in t){const s=t[r];if(s!=null){this.ft.add(r);const n=typeof s=="string"&&s.endsWith(Yme);r.includes("-")||n?i.setProperty(r,n?s.slice(0,-11):s,n?fQ:""):i[r]=s}}return ch}});var mQ=(e="",t={},i=oS())=>{const r={emit:s=>{e===""&&E5();const n=new CustomEvent(e,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...t});return i.el.dispatchEvent(n),n}};return e===""&&M5(void 0,s=>{e=s.key},r),r},Wz=mQ.bind(null,""),Xme=()=>{},Af,yQ=(Af=class extends zu{constructor(){var i,r,s;super(),this.el=this.constructor.lazy??this,this.manager=bme(this),this._postLoad=((i=this.constructor.lazy)==null?void 0:i._postLoad)??new Ff,this._offspring=((r=this.constructor.lazy)==null?void 0:r._offspring)??[],this._postLoaded=((s=this.constructor.lazy)==null?void 0:s._postLoaded)??new Ff,this._enableUpdating=this.enableUpdating,this.enableUpdating=Xme;const t=Af.prototype.shouldUpdate;this.shouldUpdate!==t&&(this._originalShouldUpdate=this.shouldUpdate,this.shouldUpdate=t)}static finalizeStyles(t){var s;const i=super.finalizeStyles(t),r=this.shadowRootOptions===oF;return((s=this.runtime)==null?void 0:s.commonStyles)===void 0||r?i:[this.runtime.commonStyles,...i]}static createProperty(t,i){const r=typeof i=="number"?i:Array.isArray(i)?i[0]:0,s=Array.isArray(i)?i[1]:void 0;super.createProperty(t,{attribute:r&1&&typeof t=="string"?T5(t):!1,reflect:!!(r&2),type:r&4?Boolean:r&8?Number:void 0,state:!!(r&16),readOnly:!!(r&32),noAccessor:!!(r&64),...s})}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const t=!this.manager.connectedCalled;super.connectedCallback(),t&&queueMicrotask(()=>this._load().catch(i=>{this._postLoaded.reject(i),setTimeout(()=>{throw i})}))}createRenderRoot(){const t=this.el.shadowRoot,i=this.constructor,r=i.shadowRootOptions,n=t??(r===oF?this.el:this.el.attachShadow(r));if(Object.defineProperty(this,"shadowRoot",{value:n}),t)return zu.prototype.createRenderRoot.call(this),t;if(this.isConnected){const o=n.getRootNode();o.adoptedStyleSheets=[...o.adoptedStyleSheets,...i.elementStyles.map(a=>"styleSheet"in a?a.styleSheet:a)]}return n}async _load(){const t=this.el._ancestorLoad??YY(this.el);t&&await t,await this.manager._load(),this._enableUpdating(!0),this.performUpdate(),this._postLoad.resolve(),await Promise.resolve();const i=this._offspring.filter(r=>{var s;return!((s=r.manager)!=null&&s.loadedCalled)});i.length&&await Promise.allSettled(i.map(async r=>await r.componentOnReady())),this._offspring.length=0,this.el.setAttribute(this.constructor.runtime.hydratedAttribute,""),this.manager._loaded(),this._postLoaded.resolve()}shouldUpdate(t){var i;return this.$changes=t,((i=this._originalShouldUpdate)==null?void 0:i.call(this,t))??!0}listen(t,i,r){const s=(i==null?void 0:i.bind(this))??i;this.manager.onLifecycle(()=>(this.el.addEventListener(t,s,r),()=>this.el.removeEventListener(t,s,r)))}listenOn(t,i,r,s){const n=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(t.addEventListener(i,n,s),()=>t.removeEventListener(i,n,s)))}async componentOnReady(){return await this._postLoaded.promise,this}},Af.lumina=!0,Af);yQ.$createEvent=mQ;function Kme(e){let t;const i=s=>{var n;t=new URL(s,((n=globalThis.location)==null?void 0:n.href)||void 0).href},r={...e,getAssetPath(s){var o;const n=new URL(s,t);return n.origin!==((o=globalThis.location)==null?void 0:o.origin)?n.href:n.pathname},setAssetPath:i,customElement(s,n){n.runtime=r,n.tagName=s,customElements.get(s)||customElements.define(s,n)}};return i(e.defaultAssetPath),r}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.14 */const eye=Kme({defaultAssetPath:"https://js.arcgis.com/map-components/4.32/",hydratedAttribute:"hydrated"}),{customElement:tye,getAssetPath:tBe,setAssetPath:iBe}=eye,iye="modulepreload",rye=function(e){return"/communities-directory/"+e},Zz={},L=function(t,i,r){let s=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(i.map(u=>{if(u=rye(u),u in Zz)return;Zz[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":iye,c||(p.as="script"),p.crossOrigin="",p.href=u,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((m,y)=>{p.addEventListener("load",m),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return t().catch(n)})};var sye=typeof window<"u"&&"$arcgis"in window&&typeof window.$arcgis=="object"&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function nye(e){return e.default!==void 0}async function oye(){if(sye)return await window.$arcgis.import("esri/core/reactiveUtils");const e=await L(()=>Promise.resolve().then(()=>$ve),void 0);return nye(e)?e.default:e}var t3;async function gQ(){return t3??(t3=oye()),await t3}var vQ=(e,t)=>(i,r)=>lye(i,e,r),aye=class extends eQ{constructor(e,t,i){super(e),this._loadAccessor=t,this._options=i,this._watchedProperties=new Map,this._isBinding={value:!0},this.setProvisionalExports(bx.makeGetterProxy(e,this._watchedProperties,this._isBinding,this.constructor.allowedPropNameMismatches)),iQ(e,r=>{r&&(this._instancePropName=r)},this.exports)}hostConnected(){this._isBinding.value=!1}async hostLoad(){var a,u;this.reactiveUtils=await gQ();const e=this.component,t=this._gatherParameters(),i=((u=(a=this._options)==null?void 0:a.editConstructorProperties)==null?void 0:u.call(e,t))??t,r=i instanceof Promise?await i:i,s=e,n=typeof this._instancePropName=="string"?s[this._instancePropName]:void 0;n!=null&&n!==this.exports?(this._instance=n,n.set(r)):this._instance=await this._createInstance(r),!e.manager.destroyed&&(bx.watchComponentUpdates(this,this._instance,this._watchedProperties),bx.watchAccessorUpdates(this,this._instance,this._watchedProperties),this.exports=this._instance)}_gatherParameters(){return Object.fromEntries(Array.from(this._watchedProperties,([i,r])=>[r,this.component[i]]).filter(([,i])=>i!==void 0))}async _createInstance(e){return this._isAccessorConstructor(this._loadAccessor)?new this._loadAccessor(e):await this._loadAccessor(e)}_isAccessorConstructor(e){return"prototype"in e&&"declaredClass"in e.prototype}hostDestroy(){this._instance&&this._instance.destroy()}async reCreate(){this.hostDestroy(),await this.hostLoad()}},lye=vme(aye),bx={makeGetterProxy:(e,t,i,r)=>new Proxy({},{has:(s,n)=>typeof n=="string"||n in s,get:(s,n)=>{const o=Reflect.get(s,n);if(typeof n=="symbol"||n in Promise.prototype)return o;const a=n in s,u=(i==null?void 0:i.value)??!0;if(a||!u)return o;if(!t.has(n))return M5(e,c=>{c!==void 0&&t.set(c.key,n)},o)}}),watchComponentUpdates(e,t,i){function r(a,u){const c=i.get(u),h=t[c];return typeof h=="boolean"&&c!==u&&u.toLowerCase().includes("disable")?!h:h}const s=(a,u,c)=>{const h=i.get(c),p=t[h],m=typeof p=="boolean"&&h!==c&&c.toLowerCase().includes("disable");if((m?!p:n.manager.isLit?p??void 0:p)===a)return a;t[h]=m?!a:a;const g=t[h];return m?!g:g},n=e.component,o=n.manager.internals;i.forEach((a,u)=>{o.accessorGetter[u]=r,o.accessorSetter[u]=s})},watchAccessorUpdates(e,t,i){const{component:r}=e,s=r,n=t,o=uye(t);yme(()=>i.forEach((a,u)=>{if(o.has(a))return;const c=s[u];let h=n[a];r.manager.isLit&&(h??(h=void 0));const m=typeof c=="boolean"&&a!==u&&u.toLowerCase().includes("disable")?!c:c;m!=null&&h!==m&&(n[a]=m)})),e.onLifecycle(()=>{if(!t.destroyed)return Array.from(i,([a,u])=>e.reactiveUtils.watch(()=>n[u],()=>{const c=n[u],p=typeof c=="boolean"&&u!==a&&a.toLowerCase().includes("disable")?!c:c;mme(()=>{s[a]=p})},{initial:!0}))})},reEmitAccessorEvents(e,t,i,r){if(!("on"in t&&typeof t.on=="function"))return;const n=Object.entries(e.component).map(([u,c])=>{const h=c;if(!u.startsWith(r)||u===r||typeof h!="object"||h===null||!("emit"in h)||typeof h.emit!="function")return;const p=h.emit,m=u.slice(r.length);return[T5(m).toLowerCase(),p]}).filter(JY);if(n.length===0)return;const o=t,a=()=>o;e.onLifecycle(()=>{if(!t.destroyed)return n.map(([u,c])=>i.on(a,u,c))})},async reCreate(e,t){const i=t.manager.useRefSync(e);i!==void 0&&await i.reCreate()}};function uye(e){var r;const i=Object.entries(((r=e.__accessor__)==null?void 0:r.metadata)??{});return new Set(i.filter(([s,n])=>(n==null?void 0:n.readOnly)===!0).map(([s])=>s))}function dr(e,t){const i=oS(),r=i.manager,s=gQ();r.onLoaded(()=>{s.then(o=>r.onLifecycle(()=>o.on(e,t,n.emit)))});const n=i.constructor.$createEvent();return n}function l(e,t,i,r){var s,n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}function rBe(e,t){return function(i,r){t(i,r,e)}}function sBe(e,t,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(h){try{c(r.next(h))}catch(p){o(p)}}function u(h){try{c(r.throw(h))}catch(p){o(p)}}function c(h){h.done?n(h.value):s(h.value).then(a,u)}c((r=r.apply(e,[])).next())})}function nBe(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:r,async:i})}return t}var cye=typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function oBe(e){function t(n){e.error=e.hasError?new cye(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}var i,r=0;function s(){for(;i=e.stack.pop();)try{if(!i.async&&r===1)return r=0,e.stack.push(i),Promise.resolve().then(s);if(i.dispose){var n=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(n).then(s,function(o){return t(o),s()})}else r|=1}catch(o){t(o)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}let Fd;function D(e){return typeof Fd[e]=="function"?Fd[e]=Fd[e](globalThis):Fd[e]}var DW,jW,VW,zW;Fd=(DW=globalThis.dojoConfig)!=null&&DW.has||(jW=globalThis.esriConfig)!=null&&jW.has?{...(VW=globalThis.dojoConfig)==null?void 0:VW.has,...(zW=globalThis.esriConfig)==null?void 0:zW.has}:{},D.add=(e,t,i,r)=>{(r||Fd[e]===void 0)&&(Fd[e]=t),i&&D(e)},D.cache=Fd,D.add("big-integer-warning-enabled",!0),D.add("esri-deprecation-warnings",!0),D.add("esri-tests-disable-screenshots",!1),D.add("esri-tests-use-full-window",!1),D.add("esri-tests-post-to-influx",!0),D.add("esri-cim-animations-enable-status","enabled"),D.add("esri-cim-animations-spotlight",!1),D.add("esri-cim-animations-freeze-time",!1),D.add("enable-feature:multiple-highlights",!0),(()=>{var t;D.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(D.add("host-browser",e),D.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),D.add("dom",e),D("host-browser")){const i=navigator,r=i.userAgent,s=i.appVersion,n=parseFloat(s);if(D.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),D.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),D.add("khtml",s.includes("Konqueror")?n:void 0),D.add("edge",parseFloat(r.split("Edge/")[1])||void 0),D.add("opr",parseFloat(r.split("OPR/")[1])||void 0),D.add("webkit",!D("wp")&&!D("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),D.add("chrome",!D("edge")&&!D("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),D.add("android",!D("wp")&&parseFloat(r.split("Android ")[1])||void 0),D.add("safari",!s.includes("Safari")||D("wp")||D("chrome")||D("android")||D("edge")||D("opr")?void 0:parseFloat(s.split("Version/")[1])),D.add("mac",s.includes("Macintosh")),!D("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",u=parseFloat(a.replace(/_/,".").replaceAll("_",""));D.add(o,u),D.add("ios",u)}D("webkit")||(!r.includes("Gecko")||D("wp")||D("khtml")||D("edge")||D.add("mozilla",n),D("mozilla")&&D.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&D.add("esri-mobile",t),i&&D.add("esri-iPhone",i),D.add("esri-geolocation",!!navigator.geolocation)}D.add("esri-wasm","WebAssembly"in globalThis),D.add("esri-performance-mode-frames-between-render",20),D.add("esri-force-performance-mode",!1),D.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),D.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),D.add("esri-atomics","Atomics"in globalThis),D.add("esri-workers","Worker"in globalThis),D.add("web-feat:cache","caches"in globalThis),D.add("esri-workers-arraybuffer-transfer",!D("safari")||Number(D("safari"))>=12),D.add("workers-pool-size",8),D.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),D.add("featurelayer-simplify-payload-size-factors",[1,1,4]),D.add("featurelayer-fast-triangulation-enabled",!0),D.add("featurelayer-animation-enabled",!0),D.add("featurelayer-snapshot-enabled",!0),D.add("featurelayer-snapshot-point-min-threshold",8e4),D.add("featurelayer-snapshot-point-max-threshold",4e5),D.add("featurelayer-snapshot-point-coverage",.1),D.add("featurelayer-query-max-depth",4),D.add("featurelayer-query-pausing-enabled",!1),D.add("featurelayer-advanced-symbols",!1),D.add("featurelayer-pbf",!0),D.add("featurelayer-pbf-statistics",!1),D.add("feature-layers-workers",!0),D.add("feature-polyline-generalization-factor",1),D.add("mapview-transitions-duration",200),D.add("mapview-essential-goto-duration",200),D.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),D.add("mapserver-pbf-version-support",10.81),D.add("mapservice-popup-identify-max-tolerance",20),D.add("request-queue-concurrency-hosted",16),D.add("request-queue-concurrency-non-hosted",4),D.add("curve-densification-coarse-segments",128),D.add("curve-densification-max-segments",2e3),D.add("curve-densification-min-segments",3),D.add("curve-densification-pixels-per-segment",16),D.add("view-readyState-waiting-delay",1e3),D.add("gradient-depth-bias",.01),D.add("gradient-depth-epsilon",1e-8),D("host-webworker")||D("host-browser")&&(D.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),D.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{D.add("esri-image-decode",!0,!0,!0)}).catch(()=>{D.add("esri-image-decode",!1,!0,!0)})}return!1}),D.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();const Jz=new WeakMap;function dye(e,t,i=!1){const r=` DEPRECATED - ${t}`;if(!i)return void e.warn(r);let s=Jz.get(e);s||(s=new Set,Jz.set(e,s)),s.has(t)||(s.add(t),e.warn(r))}function hye(e,t,i={}){if(D("esri-deprecation-warnings")){const{moduleName:r}=i;i1(e,`Function: ${(r?r+"::":"")+t+"()"}`,i)}}function pye(e,t,i={}){if(D("esri-deprecation-warnings")){const{moduleName:r}=i;i1(e,`Property: ${(r?r+"::":"")+t}`,i)}}function fye(e,t,i={}){D("esri-deprecation-warnings")&&i1(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...i})}function i1(e,t,i={}){if(D("esri-deprecation-warnings")){const{replacement:r,version:s,see:n,warnOnce:o}=i;let a=t;if(r&&(a+=`
	 Replacement: ${r}`),s&&(a+=`
	 Version: ${s}`),n)if(Array.isArray(n)){a+=`
	 See for more details:`;for(const u of n)a+=`
		${u}`}else a+=`
	 See ${n} for more details.`;dye(e,a,o)}}function aBe(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function mye(e,t){for(const i of e)if(i!=null&&t(i))return i}function DE(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let e0=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(DE(t)){const r=this._getOrCreateGroup(i);for(const s of t)Qz(s)&&r.push(s)}else Qz(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&i&&r.forEach(i)}}has(t){return this._groups.has(DT(t))}remove(t){if(typeof t!="string"&&DE(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(Yz(this._getGroup(t)),this._groups.delete(DT(t)),this):this}removeAll(){return this._groups.forEach(Yz),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(DT(t),i),i}_getGroup(t){return this._groups.get(DT(t))}};function DT(e){return e||"_default_"}function Yz(e){for(const t of e)t instanceof e0?t.removeAll():t.remove()}function Qz(e){return e!=null&&(!!e.remove||e instanceof e0)}function uBe(e){}function yye(e){return()=>e}function cBe(e){return e}let _x=class Xh{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Xh._m}getInt(){return this._seed=(Xh._a*this._seed+Xh._c)%Xh._m,this._seed}getFloat(){return this.getInt()/(Xh._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/Xh._m*r}};_x._m=2147483647,_x._a=48271,_x._c=0;const gye=1.5,dBe=1/gye,hBe=.5;function IA(e,t){return t?e.filter((i,r,s)=>s.findIndex(t.bind(null,i))===r):Array.from(new Set(e))}function CA(e,t,i){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Xz(e,t,i){let r,s;return i?(r=t.filter(n=>!e.some(o=>i(o,n))),s=e.filter(n=>!t.some(o=>i(o,n)))):(r=t.filter(n=>!e.includes(n)),s=e.filter(n=>!t.includes(n))),{added:r,removed:s}}function pBe(e){return e&&typeof e.length=="number"}let wQ=class{constructor(){this.last=0}};const bQ=new wQ;function cF(e,t,i,r){r=r||bQ;const s=Math.max(0,r.last-10);for(let o=s;o<i;++o)if(e[o]===t)return r.last=o,o;const n=Math.min(s,i);for(let o=0;o<n;++o)if(e[o]===t)return r.last=o,o;return-1}function vye(e,t,i,r){const s=e.length,n=cF(e,t,s,r);if(n!==-1)return e[n]=e[s-1],e.pop(),t}const Co=new Set;function wye(e,t,i=e.length,r=t.length,s,n){if(r===0||i===0)return i;Co.clear();for(let a=0;a<r;++a)Co.add(t[a]);s=s||bQ;const o=Math.max(0,s.last-10);for(let a=o;a<i;++a)if(Co.has(e[a])&&(n==null||n.push(e[a]),Co.delete(e[a]),e[a]=e[i-1],--i,--a,Co.size===0||i===0))return Co.clear(),i;for(let a=0;a<o;++a)if(Co.has(e[a])&&(n==null||n.push(e[a]),Co.delete(e[a]),e[a]=e[i-1],--i,--a,Co.size===0||i===0))return Co.clear(),i;return Co.clear(),i}function wv(e,t,i){const r=e.length;if(t>=r)return e.slice();const s=F5(i),n=new Set,o=[];for(;o.length<t;){const a=Math.floor(s()*r);n.has(a)||(n.add(a),o.push(e[a]))}return o}function F5(e){return e?(Kz.seed=e,()=>Kz.getFloat()):Math.random}const Kz=new _x;function _Q(e,t){const i=F5(t);for(let r=e.length-1;r>0;r--){const s=Math.floor(i()*(r+1)),n=e[r];e[r]=e[s],e[s]=n}return e}function SQ(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function Br(e,t){return e!=null}const mBe=[];function yBe(e){return e instanceof ArrayBuffer}function N5(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function TQ(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function xQ(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function L5(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function $Q(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function k5(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function EQ(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function OA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function RA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function MQ(e){return"buffer"in e}const AQ=1024;function gBe(e){return RA(e)||OA(e)||k5(e)||L5(e)||N5(e)}function vBe(e){return RA(e)||OA(e)}function wBe(e){return RA(e)?179769e303:OA(e)?3402823e32:EQ(e)?4294967295:$Q(e)?65535:TQ(e)||xQ(e)?255:k5(e)?2147483647:L5(e)?32767:N5(e)?127:256}function bye(e,t){let i;for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function R(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=OQ(e);if(t!=null)return t;if(jE(e))return e.clone();if(IQ(e))return e.map(R);if(CQ(e))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=R(e[r]);return i}function dF(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=OQ(e);if(t!=null)return t;if(IQ(e)){let r=!0;const s=e.map(n=>{const o=dF(n);return n!=null&&o==null&&(r=!1),o});return r?s:null}if(jE(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(CQ(e))return null;const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const s=e[r],n=dF(s);if(s!=null&&n==null)return null;i[r]=n}return i}function jE(e){return typeof e.clone=="function"}function IQ(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function CQ(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function eU(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function OQ(e){if(N5(e)||TQ(e)||xQ(e)||L5(e)||$Q(e)||k5(e)||EQ(e)||OA(e)||RA(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,R(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(R(i));return t}return null}function P5(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function RQ(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&CA(e,t):e instanceof Set?t instanceof Set&&Sye(e,t):e instanceof Map?t instanceof Map&&Tye(e,t):!!eU(e)&&eU(t)&&_ye(e,t))}function _ye(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function Sye(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function Tye(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const s=t.get(i);if(s!==r||s===void 0&&!t.has(i))return!1}return!0}function D5(e,t,i=!1){return NQ(e,t,i)}function aS(e,t){if(t!=null)return t[e]||FQ(e.split("."),!1,t)}function Lt(e,t,i){const r=e.split("."),s=r.pop(),n=FQ(r,!0,i);n&&s&&(n[s]=t)}function tU(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const i=t;if(e.length!==i.length)return!0;for(let r=0;r<e.length;r++)if(tU(e[r],i[r]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const i in e)if(tU(e[i],t[i]))return!0;return!1}return e!==t}function FQ(e,t,i){let r=i;for(const s of e){if(r==null)return;if(!(s in r)){if(!t)return;r[s]={}}r=r[s]}return r}function NQ(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let n=r[s],o=t[s];return n===o?r:n===void 0?(r[s]=R(o),r):(Array.isArray(o)||Array.isArray(r)?(n=n?Array.isArray(n)?r[s]=n.slice():r[s]=[n]:r[s]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{n.includes(a)||n.push(a)}):r[s]=o.slice())):o&&typeof o=="object"?r[s]=NQ(n,o,i):r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=o),r)},e||{}):e}var UW;const nt={apiKey:void 0,applicationName:"",applicationUrl:(UW=globalThis.location)==null?void 0:UW.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(D5(nt,globalThis.esriConfig,!0),delete nt.has),!nt.assetsPath){{const e="4.32";nt.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}nt.defaultAssetsPath=nt.assetsPath}const xye=/\{([^}]+)\}/g;function iU(e){return e??""}function ga(e,t){return t?e.replaceAll(xye,typeof t=="object"?(i,r)=>iU(aS(r,t)):(i,r)=>iU(t(r))):e}function bBe(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>t!=null&&t.includes(i)?i:`\\${i}`)}function LQ(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}let rU;function Lf(e){return rU??(rU=new DOMParser),rU.parseFromString(e||"","text/html").body.innerText||""}function sU(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function _Be(e,...t){let i=e[0];for(let r=0;r<t.length;++r)i+=t[r]+e[r+1];return i}const nU={info:0,warn:1,error:2,none:3};let q=class en{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,en._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=en.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,en._loggers.get(t)||new en({module:t})}_log(t,i,...r){if(this._matchLevel(t)){if(i!=="always"&&!en._throttlingDisabled){const s=Eye(r),n=this._loggedMessages[t].get(s);if(i==="once"&&n!=null||i==="oncePerTick"&&n&&n>=en._tickCounter)return;this._loggedMessages[t].set(s,en._tickCounter),en._scheduleTickCounterIncrement()}for(const s of nt.log.interceptors)if(s(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;r!=null;){const s=r[t];if(s!=null)return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",$ye)}_matchLevel(t){const i=nt.log.level||"warn";return nU[this._parentWithMember("level",i)]<=nU[t]}static _scheduleTickCounterIncrement(){en._tickCounterScheduled||(en._tickCounterScheduled=!0,Promise.resolve().then(()=>{en._tickCounter++,en._tickCounterScheduled=!1}))}};function $ye(e,t,...i){console[e](`[${t}]`,...i)}function Eye(...e){return LQ(JSON.stringify(e,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}q._loggers=new Map,q._tickCounter=0,q._tickCounterScheduled=!1,q._throttlingDisabled=!1;function j5(e,t){if(e==null)throw new Error(t??"value is None")}function St(e){return e==null||e.destroy(),null}function SBe(e){return e==null||e.dispose(),null}function kt(e){return e==null||e.remove(),null}function Pr(e){return e==null||e.abort(),null}function TBe(e){return e==null||e.release(),null}function Mye(e,t,i){return e!=null&&t!=null?i!=null?i(e,t):e.equals(t):e===t}function Aye(e,t){let i;return e.some((r,s)=>(i=t(r,s),i!=null)),i??void 0}const kQ=Symbol("Accessor-beforeDestroy"),Iye={remove:()=>{}};function Ke(e){return e?{remove(){e&&(e(),e=void 0)}}:Iye}function PQ(e){e.forEach(t=>t==null?void 0:t.remove())}function xBe(e){PQ(e),e.length=0}function lS(e){return Ke(()=>PQ(e))}function $Be(e){return Ke(()=>{var t;return(t=e())==null?void 0:t.remove()})}function EBe(e){return Ke(()=>e==null?void 0:e.abort())}function Cye(e){return Ke(e!=null?()=>e.destroy():void 0)}function Gs(e){return e.__accessor__??null}function Oye(e,t){var i;return((i=e==null?void 0:e.metadata)==null?void 0:i[t])!=null}function Sx(e,t,i){return i?VE(e,t,{policy:i,path:""}):VE(e,t,null)}function VE(e,t,i){return t?Object.keys(t).reduce((r,s)=>{const n=s;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${s}`:s,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[n]))return r[n]=t[n],r;if(r[n]===void 0)return r[n]=R(t[n]),r;let u=r[n],c=t[n];if(u===c)return r;if(Array.isArray(c)||Array.isArray(r))u=u?Array.isArray(u)?r[n]=u.slice():r[n]=[u]:r[n]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(h=>{u.includes(h)||u.push(h)}));else if(c&&typeof c=="object")if(i){const h=i.path;i.path=o,r[n]=VE(u,c,i),i.path=h}else r[n]=VE(u,c,null);else r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[n]=c);return r},e||{}):e}function DQ(e){return Array.isArray(e)?e:e.split(".")}function oU(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function Rye(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...oU(i));return t}return oU(e)}function jQ(e,t,i,r){const s=Rye(t);if(s.length!==1){const n=s.map(o=>r(e,o,i));return lS(n)}return r(e,s[0],i)}function VQ(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const r=Gs(t);return Oye(r,i)?r.get(i):t[i]}function zQ(e,t,i){if(e==null)return e;const r=VQ(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:zQ(r,t,i+1)}function uS(e,t,i=0){return typeof t!="string"||t.includes(".")?zQ(e,DQ(t),i):VQ(t,e)}function pl(e,t){return uS(e,t)}function aU(e,t){return uS(t,e)!==void 0}var Ps;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(Ps||(Ps={}));function cS(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const r in t)t[r]=R(t[r]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function FA(e,t){const i=cS(e);let r=i[t];return r||(r=i[t]={}),r}function Fye(e,t){return Sx(e,t,Lye)}const Nye=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Lye(e){return Nye.test(e)?"replace":"merge"}function kye(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function Pye(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let Th=class hF{constructor(t,i,r,s=1,n=0){this._ctor=t,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let i;if(hF.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):Pye(i)&&i.acquire(...t),i}release(t){t&&!hF.test.disabled&&(this._releaseFunction?this._releaseFunction(t):kye(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Th.test={disabled:!1};let Dye=class{constructor(t,i){this._observers=t,this._observer=i}remove(){SQ(this._observers,this._observer)}},UQ=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return jye;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,s=!1;const n=i.length;for(let o=0;o<n;++o){const a=i[o];if(a.destroyed)s=!0;else if(a===t){r=!0;break}}return r||(i.push(t),s&&this._removeDestroyedObservers()),new Dye(i,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const i=t.length;let r=0;for(let s=0;s<i;++s){for(;s+r<i&&t[s+r].destroyed;)++r;if(r>0){if(!(s+r<i))break;t[s]=t[s+r]}}t.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const i of t)i.onCommitted();this._observers=null}}};const jye=Ke();var Pe;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(Pe||(Pe={}));const pF=Pe.USER+1;function Nd(e){switch(e){case"defaults":return Pe.DEFAULTS;case"service":return Pe.SERVICE;case"portal-item":return Pe.PORTAL_ITEM;case"web-scene":return Pe.WEB_SCENE;case"web-map":return Pe.WEB_MAP;case"link-chart":return Pe.LINK_CHART;case"user":return Pe.USER;default:return null}}function zE(e){switch(e){case Pe.DEFAULTS:return"defaults";case Pe.SERVICE:return"service";case Pe.PORTAL_ITEM:return"portal-item";case Pe.WEB_SCENE:return"web-scene";case Pe.WEB_MAP:return"web-map";case Pe.LINK_CHART:return"link-chart";case Pe.USER:return"user"}}function Vye(e){return zE(e)}var at;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(at||(at={}));let NA=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const UE=new NA,_w=[];let c_=UE;function fe(e){c_.onAccessed(e)}let Tx=!1,xx=!1;function Xu(e,t,i){if(Tx)return V5(e,t,i);let r=null;return qQ(e),r=t.call(i),GQ(),r}function zye(e,t){return Xu(UE,e,t)}function V5(e,t,i){const r=Tx;Tx=!0,qQ(e);let s=null;try{s=t.call(i)}catch(n){xx&&q.getLogger("esri.core.accessorSupport.tracking").error(n)}return GQ(),Tx=r,s}function qQ(e){c_=e,_w.push(e)}function GQ(){const e=_w.length;if(e>1){const t=_w.pop();c_=_w[e-2],t.onTrackingEnd()}else if(e===1){const t=_w.pop();c_=UE,t.onTrackingEnd()}else c_=UE}function BQ(e,t){if(t.flags&at.DepTrackingInitialized)return;t.flags|=at.DepTrackingInitialized;const i=xx;xx=!1,t.flags&at.AutoTracked?V5(t.trackingTarget,t.metadata.get,e):HQ(e,t),xx=i}const Uye=[];function HQ(e,t){t.flags&at.ExplicitlyTracking||(t.flags|=at.ExplicitlyTracking,V5(t.trackingTarget,()=>{const i=t.metadata.dependsOn||Uye;for(const r of i)if(typeof r!="string"||r.includes(".")){const s=DQ(r);for(let n=0,o=e;n<s.length&&o!=null&&typeof o=="object";++n)o=lU(o,s[n],n!==s.length-1)}else lU(e,r,!1)}),t.flags&=~at.ExplicitlyTracking)}function lU(e,t,i){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const s=Gs(e);if(s){const n=s.propertiesByName.get(r);n&&(fe(n),BQ(e,n))}return i?e[r]:void 0}let uU=class extends UQ{constructor(t,i){super(),this.propertyName=t,this.metadata=i,this.trackingTarget=new NA(this),this.flags=0,this.flags=at.Dirty|(i.nonNullable?at.NonNullable:0)|(i.hasOwnProperty("value")?at.HasDefaultValue:0)|(i.get===void 0?at.DepTrackingInitialized:0)|(i.dependsOn===void 0?at.AutoTracked:0)}destroy(){this.flags&at.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&fe(this);const i=t.store,r=this.propertyName,s=this.flags,n=i.get(r);if(s&at.Computing||~s&at.Dirty&&i.has(r))return n;this.flags|=at.Computing;const o=t.host;let a;s&at.AutoTracked?a=Xu(this.trackingTarget,this.metadata.get,o):(HQ(o,this),a=this.metadata.get.call(o)),this.flags|=at.DepTrackingInitialized,i.set(r,a,Pe.COMPUTED);const u=i.get(r);return u===n?this.flags&=~at.Dirty:zye(this.commit,this),this.flags&=~at.Computing,u}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~at.Dirty,this.onCommitted()}onInvalidated(){~this.flags&at.Overridden&&(this.flags|=at.Dirty);const t=this._observers;if(t&&t.length>0)for(const i of t)i.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onCommitted()}}},qye=class WQ{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new WQ;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,R(r))}),i}get(t){return this._values.get(t)}originOf(){return Pe.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function jT(e,t,i){return e!==void 0}function cU(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&at.NonNullable)||(r.lifecycle,Ps.INITIALIZING,!1))}let Gye=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Ps.INITIALIZING,this.store=new qye,this.mutable=!0,this._origin=Pe.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const s=new uU(r,i[r]);this.propertiesByName.set(r,s)}this.metadata=i}initialize(){this.lifecycle=Ps.CONSTRUCTING}constructed(){this.lifecycle=Ps.CONSTRUCTED}destroy(){this.lifecycle=Ps.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==Ps.INITIALIZING}get(t){const i=this.propertiesByName.get(t);if(i.metadata.get)return i.getComputed(this);this.mutable&&fe(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.propertiesByName.get(t);if(r!==void 0&&r.flags&at.HasDefaultValue)return"defaults"}return zE(i)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const i=this.propertiesByName.get(t);if(jT(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.propertiesByName.get(t);jT(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const s=this.propertiesByName.get(i);if(!jT(s))return"";const n=new NA,o=Xu(n,()=>{var c;return(c=s.metadata.get)==null?void 0:c.call(t)});let a=`${r}${t.declaredClass.split(".").pop()}.${i}: ${o}
`;const u=n.accessed??new Set;if(u.size===0)return a;r+="  ";for(const c of u)c instanceof uU&&(a+=`${r}${c.propertyName}: undefined
`);return a}setAtOrigin(t,i,r){const s=this.propertiesByName.get(t);if(jT(s))return this._setAtOrigin(s,i,r)}isOverridden(t){const i=this.propertiesByName.get(t);return i!==void 0&&!!(i.flags&at.Overridden)}clearOverride(t){const i=this.propertiesByName.get(t);i&&i.flags&at.Overridden&&(i.flags&=~at.Overridden,i.notifyChange())}override(t,i){const r=this.propertiesByName.get(t);if(!cU(r,t,i,this))return;const s=r.metadata.cast;if(s){const n=this._cast(s,i),{valid:o,value:a}=n;if(i3.release(n),!o)return;i=a}r.flags|=at.Overridden,this._internalSet(r,i)}set(t,i){const r=this.propertiesByName.get(t);if(!cU(r,t,i,this))return;const s=r.metadata.cast;if(s){const o=this._cast(s,i),{valid:a,value:u}=o;if(i3.release(o),!a)return;i=u}const n=r.metadata.set;n?n.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=Nd(t)}getDefaultOrigin(){return zE(this._origin)}notifyChange(t){const i=this.propertiesByName.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.propertiesByName.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.propertiesByName.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==Ps.INITIALIZING?this._origin:Pe.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const s=this.store,n=t.propertyName;s.has(n,r)&&P5(i,s.get(n))&&~t.flags&at.Overridden&&r===s.originOf(n)||(t.invalidate(),s.set(n,i,r),t.commit(),BQ(this.host,t))}_cast(t,i){const r=i3.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}},Bye=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const i3=new Th(Bye);function Hye(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(aS(r,t)??"").toString())}let ZQ=class{constructor(t,i,r=void 0){this.name=t,this.details=r,this.message=(i&&Hye(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},M=class JQ extends ZQ{constructor(t,i,r){super(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return R(i)}catch{return"[object]"}}))}}catch(t){throw q.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new JQ(t.name,t.message,t.details)}};M.prototype.type="error";function qE(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))qE(e,r,t[r]);else{if(t.includes(".")){const s=t.split("."),n=s.splice(-1,1)[0];return void qE(pl(e,s),n,i)}const r=e.__accessor__;r!=null&&Wye(t,r),e[t]=i}}function Wye(e,t){if(D("esri-unknown-property-errors")&&!Zye(e,t))throw new M("set:unknown-property",Jye(e,t))}function Zye(e,t){return t.metadata[e]!=null}function Jye(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let Yye;function Qye(){return Yye}var dU;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(dU||(dU={}));function Xye(e){e.length=0}let os=class{constructor(t=50,i=50){this._pool=new Th(Array,void 0,Xye,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return r3.acquire()}static release(t){return r3.release(t)}static prune(){r3.prune()}};const r3=new os(100);let YQ=class extends Th{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const VT=[];function GE(e){VT.push(e),VT.length===1&&queueMicrotask(()=>{const t=VT.slice();VT.length=0;for(const i of t)i()})}let d_=class{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var fF;(function(e){const t=(n,o,a,u)=>{let c=o,h=o;const p=a>>>1,m=n[c-1];for(;h<=p;){h=c<<1,h<a&&u(n[h-1],n[h])<0&&++h;const y=n[h-1];if(u(y,m)<=0)break;n[c-1]=y,c=h}n[c-1]=m},i=(n,o)=>n<o?-1:n>o?1:0;function r(n,o,a,u){o===void 0&&(o=0),a===void 0&&(a=n.length),u===void 0&&(u=i);for(let h=a>>>1;h>o;h--)t(n,h,a,u);const c=o+1;for(let h=a-1;h>o;h--){const p=n[o];n[o]=n[h],n[h]=p,t(n,c,h,u)}}function*s(n,o,a,u){o===void 0&&(o=0),a===void 0&&(a=n.length),u===void 0&&(u=i);for(let h=a>>>1;h>o;h--)t(n,h,a,u),yield;const c=o+1;for(let h=a-1;h>o;h--){const p=n[o];n[o]=n[h],n[h]=p,t(n,c,h,u),yield}}e.sort=r,e.iterableSort=s})(fF||(fF={}));const hU=fF,Kye=1.5,ege=1.1;let bf=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new wQ,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>pU(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];t(s)&&i.push(s)}return i}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,pU(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=cF(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(cF(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=wye(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const r=this.data[t];this.data[t]=this.data[i],this.data[i]=r}sort(t){hU.sort(this.data,0,this.length,t)}iterableSort(t){return hU.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}find(t,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)if(t.call(i,r[n]))return r[n]}filterInPlace(t,i){let r=0;for(let s=0;s<this._length;++s){const n=this.data[s];t.call(i,n,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=n,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(t,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)t.call(i,r[n],n,r)}forEach(t,i){this.data.slice(0,this.length).forEach(t,i)}map(t,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=t.call(i,this.data[s],s,this.data);return r}reduce(t,i){let r=i;for(let s=0;s<this.length;++s)r=t(r,this.data[s],s,this.data);return r}has(t){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function pU(e){e.data.length>Kye*e.length&&(e.data.length=Math.floor(e.length*ege))}function tge(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return Ke(()=>e.clearTimeout(r))}}}const t0=tge(globalThis);function LA(e){return ige(e)||QQ(e)}function ige(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function QQ(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function dS(e,t,i){if(!LA(e))throw new TypeError("target is not a Evented or EventTarget object");return QQ(e)?rge(e,t,i):e.on(t,i)}function rge(e,t,i,r){if(Array.isArray(t)){const s=t.slice();for(const n of s)e.addEventListener(n,i,r);return Ke(()=>{for(const n of s)e.removeEventListener(n,i,r)})}return e.addEventListener(t,i,r),Ke(()=>e.removeEventListener(t,i,r))}function XQ(e,t,i){if(!LA(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=dS(e,t,s=>{r.remove(),i.call(e,s)});return r}function mt(e="Aborted"){return new M("AbortError",e)}function Fe(e,t="Aborted"){if(En(e))throw mt(t)}function hS(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function En(e){const t=hS(e);return t!=null&&t.aborted}function rl(e){if(fi(e))throw e}function mF(e){if(!fi(e))throw e}function mo(e,t){const i=hS(e);if(i!=null){if(!i.aborted)return XQ(i,"abort",()=>t());t()}}function z5(e,t){const i=hS(e);if(i!=null)return Fe(i),XQ(i,"abort",()=>t(mt()))}function U5(e,t){return hS(t)==null?e:new Promise((i,r)=>{let s=mo(t,()=>r(mt()));const n=()=>{s=kt(s)};e.then(n,n),e.then(i,r)})}function fi(e){return(e==null?void 0:e.name)==="AbortError"}async function _n(e){try{return await e}catch(t){if(!fi(t))throw t;return}}async function Ku(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(o=>e[o]),s=await Ku(r),n={};return i.map((o,a)=>n[o]=s[a]),n}const t=e;return Promise.allSettled(t).then(i=>Array.from(t,(r,s)=>{const n=i[s];return n.status==="fulfilled"?{promise:r,value:n.value}:{promise:r,error:n.reason}}))}async function sge(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function DBe(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function pS(e,t=void 0,i){const r=new AbortController;return mo(i,()=>r.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(t)},e);mo(r,()=>{o&&(clearTimeout(o),n(mt()))})})}function KQ(e,t,i,r){const s=i&&"abort"in i?i:null;r!=null||s||(r=i);let n=setTimeout(()=>{n=0,s==null||s.abort()},t);const o=()=>r||new M("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then(a=>{if(n===0)throw o();return clearTimeout(n),a},a=>{throw clearTimeout(n),n===0?o():a})}function nge(e,t){const i=new AbortController,r=setTimeout(()=>i.abort(),t);return mo(e,()=>{i.abort(),clearTimeout(r)}),{...e,signal:i.signal}}function xl(e){return e&&typeof e.then=="function"}function yF(e){return xl(e)?e:Promise.resolve(e)}function fl(e,t=-1){let i,r,s,n,o=null;const a=(...u)=>{if(i){r=u,n&&n.reject(mt()),n=Bs();const m=n.promise;if(o){const y=o;o=null,y.abort()}return m}if(s=n||Bs(),n=null,t>0){const m=new AbortController;i=yF(e(...u,m.signal));const y=i;pS(t).then(()=>{i===y&&(n?m.abort():o=m)})}else i=1,i=yF(e(...u));const c=()=>{const m=r;r=s=i=o=null,m!=null&&a(...m)},h=i,p=s;return h.then(c,c),h.then(p.resolve,p.reject),p.promise};return a}function Bs(){let e,t;const i=new Promise((s,n)=>{e=s,t=n}),r=s=>{e(s)};return r.resolve=s=>e(s),r.reject=s=>t(s),r.timeout=(s,n)=>t0.setTimeout(()=>r.reject(n),s),r.promise=i,r}async function fU(e){await Promise.resolve(),Fe(e)}function jBe(e){return e}function oge(e){return 1e3*e}function VBe(e){return e}function zBe(e){return .001*e}let age=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},lge=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},gF=0;const z0={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},vF=["prepare","preRender","render","postRender","update","finish"],wF=[],kf=new bf;let uge=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,eX()}};function cge(){_f!=null&&(cancelAnimationFrame(_f),_f=requestAnimationFrame(q5))}function eX(){_f==null&&(gF=performance.now(),_f=requestAnimationFrame(q5))}const BE={frameTasks:kf,willDispatch:!1,clearFrameTasks:dge,dispatch:iX,executeFrameTasks:hge,reschedule:cge};function fS(e){const t=new lge(e);return wF.push(t),BE.willDispatch||(BE.willDispatch=!0,GE(iX)),t}function bv(e){const t=new age(e);return kf.push(t),eX(),new uge(t)}let _f=null;function dge(e=!1){kf.forAll(t=>{t.removed=!0}),e&&tX()}function q5(){const e=performance.now();_f=null,_f=kf.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(q5):null,BE.executeFrameTasks(e)}function hge(e){const t=e-gF;gF=e;const i=1e3/60,r=Math.max(0,t-i);z0.time=e,z0.frameDuration=i-r;for(let s=0;s<vF.length;s++){const n=performance.now(),o=vF[s];kf.forAll(a=>{var u;a.paused||a.removed||(s===0&&a.ticks++,a.phases[o]&&(z0.elapsedFrameTime=performance.now()-e,z0.deltaTime=a.ticks===0?0:t,(u=a.phases[o])==null||u.call(a,z0)))}),mge[s].push(performance.now()-n)}tX(),yge.push(performance.now()-e)}const zT=new bf;function tX(){kf.forAll(e=>{e.removed&&zT.push(e)}),kf.removeUnorderedMany(zT.data,zT.length),zT.clear()}function iX(){for(;wF.length;){const e=wF.shift();e.isActive&&e.callback()}BE.willDispatch=!1}function pge(e=1,t){const i=Bs(),r=()=>{En(t)?i.reject(mt()):e===0?i():(--e,GE(()=>r()))};return r(),i.promise}function fge(e){return pge(1,e)}async function G5(e){await fge(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const mge=vF.map(e=>new d_(e)),yge=new d_("total");function rX(e,t){for(const i of e.values())if(t(i))return!0;return!1}function HE(e,t){if(!t)return e;for(const i of t)i!=null&&e.add(i);return e}function mU(e,t){return t!=null&&e.add(t),e}function B5(e,t){const i=new Set;return HE(i,e),HE(i,t),i}function gge(e,t){const i=new Set;for(const r of t)e.has(r)&&i.add(r);return i}function BBe(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const i of e)if(!t.has(i))return!1;return!0}function HBe(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function vge(e,t){const i=new Set(e);for(const r of t)i.delete(r);return i}function wge(e,t){return vge(B5(e,t),gge(e,t))}let bge=0;function $x(){return++bge}let kA=class extends NA{constructor(t){super(new _ge(t)),this._observer&&yU.register(this,new WeakRef(this._observer),this)}destroy(){var t,i;this._observer&&yU.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},_ge=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Sge}};const yU=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function Sge(){}let $g=!1;const WE=[];function sX(e,t){let i=new kA(n),r=null,s=!1;function n(){if(!i||s)return;if($g)return void oX(n);const a=r;i.clear(),$g=!0,s=!0,r=Xu(i,e),s=!1,$g=!1,t(r,a),aX()}function o(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=Xu(i,e),s=!1,Ke(o)}function nX(e,t){let i=new kA(s),r=null;function s(){t(r,o)}function n(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=Xu(i,e),r):null}return o(),Ke(n)}function H5(e,t){let i=!1,r=!1;const s=!!(t!=null&&t.sync);let n=new kA(()=>{i||r||(r=!0,s?o():queueMicrotask(o))});function o(){r=!1,n&&!i&&($g?oX(o):(n.clear(),$g=!0,i=!0,Xu(n,e),i=!1,$g=!1,aX()))}function a(){n&&(n.destroy(),n=null)}return i=!0,Xu(n,e),i=!1,Ke(a)}function oX(e){WE.includes(e)||WE.unshift(e)}function aX(){for(;WE.length;)WE.pop()()}var h_;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(h_||(h_={}));let r1=class{constructor(){this.uid=$x(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,s,n){return this.pool.acquire(h_.Untracked,t,i,r,s,n,P5)}static acquireTracked(t,i,r,s){return this.pool.acquire(h_.Tracked,t,i,r,null,null,s)}notify(t,i){this.type===h_.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i,void 0,void 0)}acquire(t,i,r,s,n,o,a){this.uid=$x(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=$x(),this.removed=!0}};r1.pool=new YQ(r1);const Ex=new os,Uu=new Set;let ZE;function JE(e){Uu.delete(e),Uu.add(e),ZE||(ZE=fS($ge))}function Tge(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function xge(e){for(const t of Uu.values())t.target===e&&(t.removed=!0)}function $ge(){let e=10;for(;ZE&&e--;){ZE=null;const t=Ege(),i=Ex.acquire();for(const r of t){const s=r.uid;Tge(r),s===r.uid&&r.removed&&i.push(r)}for(const r of Uu)r.removed&&(i.push(r),Uu.delete(r));for(const r of i)r1.pool.release(r);Ex.release(i),Ex.release(t),bF.forEach(r=>r())}}function Ege(){const e=Ex.acquire();e.length=Uu.size;let t=0;for(const i of Uu)e[t]=i,++t;return Uu.clear(),e}const bF=new Set;function Mge(e){return bF.add(e),Ke(()=>bF.delete(e))}function Age(e,t,i){let r=jQ(e,t,i,(s,n,o)=>{let a,u,c=nX(()=>uS(s,n),(h,p)=>{var m;((m=s.__accessor__)==null?void 0:m.lifecycle)===Ps.DESTROYED||a&&a.uid!==u?r.remove():(a||(a=r1.acquireUntracked(h,o,p,s,n),u=a.uid),JE(a))});return Ke(()=>{c.remove(),a&&(a.uid!==u||a.removed||(a.removed=!0,JE(a)),a=null),r=c=null})});return r}function Ige(e,t,i){const r=jQ(e,t,i,(s,n,o)=>{let a=!1;return sX(()=>uS(s,n),(u,c)=>{s.__accessor__.lifecycle!==Ps.DESTROYED?a||(a=!0,P5(c,u)||o.call(s,u,c,n,s),a=!1):r.remove()})});return r}function Cge(e,t,i,r=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Ps.DESTROYED?r?Ige(e,t,i):Age(e,t,i):Ke()}function Oge(e,t,i){let r,s,n=nX(e,(o,a)=>{r&&r.uid!==s?n.remove():(r||(r=r1.acquireTracked(o,t,a,i),s=r.uid),JE(r))});return Ke(()=>{n.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,JE(r)),r=null),n=null})}function Rge(e,t,i){let r=!1;return sX(e,(s,n)=>{r||(r=!0,i(n,s)||t(s,n),r=!1)})}function Fge(e,t,i=!1,r=RQ){return i?Rge(e,t,r):Oge(e,t,r)}function gU(e){return rX(Uu,t=>t.oldValue===e)}function Nge(e,t){for(const i of e.values())if(t(i))return!0;return!1}function YBe(e,t){for(const i of e.values())if(t(i))return i;return null}function i0(e,t,i){const r=e.get(t);if(r!==void 0)return r;const s=i();return e.set(t,s),s}function QBe(e){const t=new Map;return i=>(t.has(i)||t.set(i,e(i)),t.get(i))}const Eg=()=>q.getLogger("esri.core.accessorSupport.ensureTypes");function Lge(e){return e==null?e:new Date(e)}function kge(e){return e==null?e:!!e}function mS(e){return e==null?e:e.toString()}function as(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function W5(e){return e==null?e:Math.round(parseFloat(e))}function Pge(e){return null}function Dge(e,t){return i=>{let r=e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function lX(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function YE(e,t){return t!=null&&e&&!(t instanceof e)}function uX(e){return e&&"isCollection"in e}function vU(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function jge(e,t){if(!(t!=null&&t.constructor)||!uX(t.constructor))return _F(e,t)?t:new e(t);const i=vU(e.prototype.itemType),r=vU(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(_F(e,t),t):new e(t):t}function _F(e,t){return!!lX(t)&&(Eg().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+PA(e)+"'"),!0)}function yS(e,t){return t==null?t:uX(e)?jge(e,t):YE(e,t)?_F(e,t)?t:new e(t):t}function PA(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const Vge=new WeakMap;function zge(e){switch(e){case Number:return t=>as(t);case Le:return W5;case Boolean:return kge;case String:return mS;case Date:return Lge;case r0:return Pge;default:return i0(Vge,e,()=>yS.bind(null,e))}}function yt(e,t){const i=zge(e);return arguments.length===1?i:i(t)}function s1(e,t,i){return arguments.length===1?s1.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function Uge(e,t){return arguments.length===1?s1(i=>yt(e,i)):s1(i=>yt(e,i),t)}function cX(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>cX(e,t-1,r)):e(i)}function QE(e,t,i){if(arguments.length===2)return n=>QE(e,t,n);if(!i)return i;i=cX(e,t,i);let r=t,s=i;for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let n=0;n<r;n++)i=[i];return i}function qge(e,t,i){return arguments.length===2?QE(r=>yt(e,r),t):QE(r=>yt(e,r),t,i)}function dX(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function SF(e,t){if(arguments.length===2)return SF(e).call(null,t);const i=new Set,r=e.filter(a=>typeof a!="function"),s=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||i.add(a);let n=null,o=null;return(a,u)=>{if(a==null)return a;const c=typeof a,h=c==="string"||c==="number";return h&&(i.has(a)||s.some(p=>c==="string"&&p===String||c==="number"&&p===Number))||c==="object"&&s.some(p=>!YE(a,p))?a:(h&&r.length?(n||(n=r.map(p=>typeof p=="string"?`'${p}'`:`${p}`).join(", ")),Eg().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof a=="object"&&s.length?(o||(o=s.map(p=>PA(p)).join(", ")),Eg().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Eg().error("Accessor#set",`'${a}' is not a valid value for this property`),u&&(u.valid=!1),null)}}function va(e,t){if(arguments.length===2)return va(e).call(null,t);const i={},r=[],s=[];for(const u in e.typeMap){const c=e.typeMap[u];i[u]=yt(c),r.push(PA(c)),s.push(u)}const n=()=>`'${r.join("', '")}'`,o=()=>`'${s.join("', '")}'`,a=typeof e.key=="string"?u=>u[e.key]:e.key;return u=>{if(e.base&&!YE(e.base,u)||u==null)return u;const c=a(u)||e.defaultKeyValue,h=i[c];if(!h)return Eg().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!YE(e.typeMap[c],u))return u;if(typeof e.key=="string"&&!lX(u)){const p={};for(const m in u)m!==e.key&&(p[m]=u[m]);return h(p)}return h(u)}}let Le=class{},r0=class{};const eHe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Gge(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function hX(e){switch(e.type){case"native":return yt(e.value);case"array":return s1(hX(e.value));case"one-of":return Bge(e);default:return null}}function Bge(e){let t=null;return(i,r)=>xF(i,e)?i:(t==null&&(t=TF(e)),Eg().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function TF(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Le:return"integer";case Date:return"date";case r0:return"null";default:return PA(e.value)}case"array":return`array of ${TF(e.value)}`;case"one-of":{const t=e.values.map(i=>TF(i));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function xF(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Le:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case r0:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!xF(i,t.value));case"one-of":return t.values.some(i=>xF(e,i))}}function d(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),s=FA(t,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in e&&q.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=r.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const n=e.aliasOf;if(n){const u=typeof n=="string"?n:n.source,c=typeof n=="string"?null:n.overridable===!0;let h;s.dependsOn=[u],s.get=function(){let p=pl(this,u);if(typeof p=="function"){h||(h=u.split(".").slice(0,-1).join("."));const m=pl(this,h);m&&(p=p.bind(m))}return p},s.readOnly||(s.set=c?function(p){this._override(i,p)}:function(p){qE(this,u,p)})}const o=e.type,a=e.types;if(!s.cast){let u;o?u=Hge(o):a&&(u=Array.isArray(a)?s1(va(a[0])):va(a)),e.cast=Wge(e.cast,u)}Fye(s,e),e.range&&(s.cast=Dge(s.cast,e.range))}}function pX(e,t,i){const r=FA(e,i);r.json||(r.json={});let s=r.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function Hge(e){let t=0,i=e;if(Gge(e))return hX(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(dX(r))return t===0?SF(r):QE(SF(r),t);if(t===1)return Uge(r);if(t>1)return qge(r,t);const s=e;return s.from?s.from:yt(s)}function Wge(e,t){if(e||t)return e?t?(i,r)=>t(e(i,r),r):e:t}function Zge(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const s=t[r];i[r].forEach(n=>{t[n]=s}),delete t[r]}}}let bo=class extends ZQ{constructor(t,i,r){super(t,i,r)}};bo.prototype.type="warning";function fX(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const $F=()=>q.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function wU(e,t,i){var r,s;e&&(!i&&!t.read||(r=t.read)!=null&&r.reader||((s=t.read)==null?void 0:s.enabled)===!1||Qge(e)&&Lt("read.reader",s0(e),t))}function s0(e){var i,r;const t=e.ndimArray??0;if(t>1)return Yge(e);if(t===1)return bU(e);if("type"in e&&yX(e.type)){const s=(r=(i=e.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,n=bU(typeof s=="function"?{type:s}:{types:s});return(o,a,u)=>{const c=n(o,a,u);return c&&new e.type(c)}}return Z5(e)}function Z5(e){return"type"in e?Jge(e.type):Xge(e.types)}function Jge(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void $F().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const n=new e;return n.read(t,r),n}:e.fromJSON}function mX(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(s=>mX(e,s,i,r-1)):e(t,void 0,i)}function Yge(e){const t=Z5(e),i=mX.bind(null,t),r=e.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=i(s,o,r);let a=r,u=s;for(;a>0&&Array.isArray(u);)a--,u=u[0];if(u!==void 0)for(let c=0;c<a;c++)s=[s];return s}}function bU(e){const t=Z5(e);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const u=t(a,void 0,s);u!==void 0&&o.push(u)}return o}const n=t(i,void 0,s);return n!==void 0?[n]:void 0}}function yX(e){if(!fX(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?J5(t.Type):gX(t.Type))}function Qge(e){return"types"in e?gX(e.types):J5(e.type)}function J5(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||yX(e))}function gX(e){for(const t in e.typeMap)if(!J5(e.typeMap[t]))return!1;return!0}function Xge(e){let t=null;const i=e.errorContext??"type",r=e.validate;return(s,n,o)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void $F().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=Kge(e));const u=e.key;if(typeof u!="string")return;const c=s[u],h=c?t[c]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const m=`Type '${c||"unknown"}' is not supported`;return o!=null&&o.messages&&s&&o.messages.push(new bo(`${i}:unsupported`,m,{definition:s,context:o})),void $F().error(m)}const p=new h;return p.read(s,o),r?r(p):p}}function Kge(e){var i,r;const t={};for(const s in e.typeMap){const n=e.typeMap[s],o=cS(n.prototype);if(typeof e.key=="function")continue;const a=o[e.key];if(!a)continue;if((i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){t[a.json.type[0]]=n;continue}const u=(r=a.json)==null?void 0:r.write;if(!(u!=null&&u.writer)){t[s]=n;continue}const c=u.target,h=typeof c=="string"?c:e.key,p={};u.writer(s,p,h),p[h]&&(t[p[h]]=n)}return t}function eve(e){if(e.json||(e.json={}),SU(e.json),TU(e.json),_U(e.json),e.json.origins)for(const t in e.json.origins)SU(e.json.origins[t]),TU(e.json.origins[t]),_U(e.json.origins[t]);return!0}function _U(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function SU(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function TU(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function xU(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(e==null?void 0:e.ndimArray)??0;e&&(i===1||"type"in e&&fX(e.type))?t.write.writer=rve:i>1?t.write.writer=sve(i):t.types?Array.isArray(t.types)?t.write.writer=ive(t.types[0]):t.write.writer=tve(t.types):t.write.writer=n1}function tve(e){return(t,i,r,s)=>t?vX(t,e,s)?n1(t,i,r,s):void 0:n1(t,i,r,s)}function vX(e,t,i){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(i!=null&&i.messages){const r=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new M(`${r}:unsupported`,s,{definition:e,context:i})),q.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function ive(e){return(t,i,r,s)=>!t||!Array.isArray(t)?n1(t,i,r,s):n1(t.filter(n=>vX(n,e,s)),i,r,s)}function n1(e,t,i,r){Lt(i,XE(e,r),t)}function XE(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?KE(e):e}function KE(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function rve(e,t,i,r){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(n=>XE(n,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[XE(e,r)],Lt(i,s,t)}function wX(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>wX(r,t,i-1)):XE(e,t)}function sve(e){return(t,i,r,s)=>{let n;if(t===null)n=null;else{n=wX(t,s,e);let o=e,a=n;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let u=0;u<o;u++)n=[n]}Lt(r,n,i)}}function nve(e,t){return Y5(e,"any",t==null?void 0:t.origin)}function EF(e,t){return Y5(e,"read",t==null?void 0:t.origin)}function bX(e,t){return Y5(e,"write",t==null?void 0:t.origin)}function Y5(e,t,i){let r=e==null?void 0:e.json;if(r!=null&&r.origins&&i){let s;s=i==="link-chart"?r.origins[i]&&(t==="any"||t in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],s&&(t==="any"||t in s)&&(r=s)}return r}function ove(e){var i;const t=ave(e);if(e.json.origins)for(const r in e.json.origins){const s=e.json.origins[r],n=s.types?lve(s):t;wU(n,s,!1),s.types&&!s.write&&((i=e.json.write)!=null&&i.enabled)&&(s.write={...e.json.write}),xU(n,s)}wU(t,e.json,!0),xU(t,e.json)}function ave(e){return e.json.types?MF(e.json):e.type?_X(e):MF(e)}function lve(e){return e.type?_X(e):MF(e)}function _X(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!dX(i);)i=i[0],t++;return{type:i,ndimArray:t}}function MF(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function uve(e){eve(e)&&(Zge(e),ove(e))}const s3=new Set,n3=new Set;function x(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,dve(t);const i=[],r=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!s3.has(s.initialize)&&(s3.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!n3.has(s.destroy)&&(n3.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);s3.clear(),n3.clear();const n=class extends t{constructor(...a){if(super(...a),this.constructor===n&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let u=i.length-1;u>=0;u--)i[u].call(this)}}),r.length){let u=!1;const c=this[kQ];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!u){u=!0,c.call(this);for(let h=0;h<r.length;h++)r[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=cS(t.prototype),n.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function cve(e,t){return t.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r===void 0)return;i.mutable&&fe(r);const s=i.store;return s.has(e)?s.get(e):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r!==void 0)return r.getComputed(i)}}function dve(e){const t=e.prototype,i=cS(t),r={};for(const s of Object.getOwnPropertyNames(i)){const n=i[s];uve(n),r[s]={enumerable:!0,configurable:!0,get:cve(s,n),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&n.readOnly?$U("read-only",s):a.lifecycle===Ps.CONSTRUCTED&&n.constructOnly?$U("construct-only",s):void a.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,r)}const $U=(e,t)=>{q.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var SX,TX;function hve(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Ma=Symbol("Accessor-Handles"),AF=Symbol("Accessor-Initialized");let se=class Mx{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class o extends n{constructor(...u){super(...u),this.inherited=null,s&&s.apply(this,u)}}cS(o.prototype);for(const a in t){const u=t[a];o.prototype[a]=typeof u=="function"?function(...c){const h=this.inherited;let p;this.inherited=function(...m){if(n.prototype[a])return n.prototype[a].apply(this,m)};try{p=u.apply(this,c)}catch(m){throw this.inherited=h,m}return this.inherited=h,p}:t[a]}for(const a in i){const u=hve(i[a]);d(u)(o.prototype,a)}return x(r)(o)}static freeze(t){return t instanceof Mx?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof Mx?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var r;if(this[SX]=null,this[TX]=!1,this.constructor===Mx)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new Gye(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),t.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,i=t.ctorArgs;t.initialize(),i&&(this.set(i),t.ctorArgs=null),t.constructed(),this.initialize(),this[AF]=!0}initialize(){}[kQ](){this[Ma]=St(this[Ma])}destroy(){var t;this.destroyed||(xge(this),this.__accessor__.destroy(),(t=Qye())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[AF]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Ps.DESTROYED||!1}commitProperty(t){pl(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return qE(this,t,i),this}watch(t,i,r){return hye(q.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),Cge(this,t,i,r)}addHandles(t,i){if(this.destroyed){const r=Array.isArray(t)?t:[t];for(const s of r)s.remove();return}(this[Ma]??(this[Ma]=new e0)).add(t,i)}removeHandles(t){var i;(i=this[Ma])==null||i.remove(t)}removeAllHandles(){var t;(t=this[Ma])==null||t.removeAll()}removeHandlesReference(t){var i;(i=this[Ma])==null||i.removeReference(t)}hasHandles(t){var i;return((i=this[Ma])==null?void 0:i.has(t))===!0}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}};SX=Ma,TX=AF;function pve(e,t,i){return Ku(e.map((r,s)=>t.apply(i,[r,s])))}async function fve(e,t,i){return(await Ku(e.map((r,s)=>t.apply(i,[r,s])))).map(r=>r.value)}function Q5(e){return{ok:!0,value:e}}function X5(e){return{ok:!1,error:e}}function mve(e){return e!=null&&e.ok===!0?e.value:null}function yve(e){return e!=null&&e.ok===!1?e.error:null}async function DA(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return Q5(await e)}catch(t){return X5(t)}}async function gve(e){try{return Q5(await e)}catch(t){return rl(t),X5(t)}}function ec(e,t){return new Oc(e,t)}let Oc=class extends se{get value(){return mve(this._result)}get error(){return yve(this._result)}get finished(){return this._result!=null}constructor(t,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Pr(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(s=>{this._result=Q5(s),this._cleanup()},s=>{this._result=X5(s),this._cleanup()}),this._abortHandle=mo(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=kt(this._abortHandle),this._abortController=null}};l([d()],Oc.prototype,"value",null),l([d()],Oc.prototype,"error",null),l([d()],Oc.prototype,"finished",null),l([d()],Oc.prototype,"promise",void 0),l([d()],Oc.prototype,"_result",void 0),Oc=l([x("esri.core.asyncUtils.ReactiveTask")],Oc);let _o=class xX{constructor(){this._emitter=new xX.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,n){var c;let o=(c=this._listenersMap)==null?void 0:c.get(s);if(!o)return!1;const a=this._target||this;let u=!1;for(const h of o.slice()){const p="deref"in h?h.deref():h;p?p==null||p.call(a,n):u=!0}return u&&(o=o.filter(h=>!("deref"in h)||h.deref()!=null),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const a=s.map(u=>this.on(u,n));return lS(a)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),Ke(()=>{var c;const a=(c=this._listenersMap)==null?void 0:c.get(s),u=(a==null?void 0:a.indexOf(n))??-1;u>=0&&a.splice(u,1)})}once(s,n){const o=this.on(s,a=>{o.remove();const u="deref"in n?n.deref():n;u==null||u.call(null,a)});return o}hasEventListener(s){var o;const n=(o=this._listenersMap)==null?void 0:o.get(s);return n!=null&&n.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=l([x("esri.core.Evented")],s),s};let i=class extends se{constructor(){super(...arguments),this._emitter=new _o.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=l([x("esri.core.Evented.EventedAccessor")],i),e.EventedAccessor=i})(_o);var rt;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(rt||(rt={}));function K5(e){return(t,i)=>{t[i]=e}}let n0=class extends UQ{notify(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var _u;let vve=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},wve=class{constructor(t,i,r,s,n){this.target=t,this.added=i,this.removed=r,this.start=s,this.deleteCount=n}};const Ln=new Th(vve,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function EU(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function o3(e){return e?e instanceof yu?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function a3(e){if(e!=null&&e.length)return e[0]}function bve(e,t,i,r){const s=Math.min(e.length-i,t.length-r);let n=0;for(;n<s&&e[i+n]===t[r+n];)n++;return n}function $X(e,t,i,r){t&&t.forEach((s,n,o)=>{e.push(s),$X(e,i.call(r,s,n,o),i,r)})}const mc=new Set,yc=new Set,gc=new Set,l3=new Map;let _ve=0,yu=_u=class extends _o.EventedAccessor{static isCollection(e){return e!=null&&e instanceof _u}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new n0,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:_ve++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof _u?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return fe(this._observable),this._items}set items(e){this._emitBeforeChanges(rt.ADD)||(this._splice(0,this.length,o3(e)),this._emitAfterChanges(rt.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return Ke();if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),Ke(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return this._emitter.on(e,t)}once(e,t){const i="deref"in t?()=>t.deref():()=>t,r=this.on(e,s=>{var n;(n=i())==null||n.call(null,s),r.remove()});return r}add(e,t){if(fe(this._observable),this._emitBeforeChanges(rt.ADD))return this;const i=this.getNextIndex(t??null);return this._splice(i,0,[e]),this._emitAfterChanges(rt.ADD),this}addMany(e,t=this._items.length){if(fe(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(rt.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,o3(e)),this._emitAfterChanges(rt.ADD),this}at(e){if(fe(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(fe(this._observable),!this.length||this._emitBeforeChanges(rt.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(rt.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return fe(this._observable),this._createNewInstance({items:this._items.map(R)})}concat(...e){fe(this._observable);const t=e.map(o3);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(fe(this._observable),!this.length||this._emitBeforeChanges(rt.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let s=0;s<r;s++)e.call(t,i[s],s,i);this._emitAfterChanges(rt.REMOVE)}destroyAll(){this.drain(EU)}destroyMany(e){const t=this.removeMany(e);return t.forEach(EU),t}every(e,t){return fe(this._observable),this._items.every(e,t)}filter(e,t){fe(this._observable);const i=arguments.length===2?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:i})}find(e,t){return fe(this._observable),this._items.find(e,t)}findIndex(e,t){return fe(this._observable),this._items.findIndex(e,t)}flatten(e,t){fe(this._observable);const i=[];return $X(i,this,e,t),new _u(i)}forEach(e,t){return fe(this._observable),this._items.forEach(e,t)}getItemAt(e){return fe(this._observable),this._items[e]}getNextIndex(e){fe(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return fe(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return fe(this._observable),this._items.indexOf(e,t)}join(e=","){return fe(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return fe(this._observable),this._items.lastIndexOf(e,t)}map(e,t){fe(this._observable);const i=this._items.map(e,t);return new _u({items:i})}reorder(e,t=this.length-1){fe(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(rt.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(rt.MOVE)}return e}}pop(){if(fe(this._observable),!this.length||this._emitBeforeChanges(rt.REMOVE))return;const e=a3(this._splice(this.length-1,1));return this._emitAfterChanges(rt.REMOVE),e}push(...e){return fe(this._observable),this._emitBeforeChanges(rt.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(rt.ADD)),this.length}reduce(e,t){fe(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){fe(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return fe(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(fe(this._observable),e<0||e>=this.length||this._emitBeforeChanges(rt.REMOVE))return;const t=a3(this._splice(e,1));return this._emitAfterChanges(rt.REMOVE),t}removeMany(e){if(fe(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(rt.REMOVE))return[];const t=e instanceof _u?e.toArray():e,i=this._items,r=[],s=t.length;for(let n=0;n<s;n++){const o=t[n],a=i.indexOf(o);if(a>-1){const u=1+bve(t,i,n+1,a+1),c=this._splice(a,u);c&&c.length>0&&r.push.apply(r,c),n+=u-1}}return this._emitAfterChanges(rt.REMOVE),r}reverse(){if(fe(this._observable),this._emitBeforeChanges(rt.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(rt.MOVE),this}shift(){if(fe(this._observable),!this.length||this._emitBeforeChanges(rt.REMOVE))return;const e=a3(this._splice(0,1));return this._emitAfterChanges(rt.REMOVE),e}slice(e=0,t=this.length){return fe(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return fe(this._observable),this._items.some(e,t)}sort(e){if(fe(this._observable),!this.length||this._emitBeforeChanges(rt.MOVE)||!this._requiresSort(e))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(rt.MOVE),this}_requiresSort(e=(t,i)=>t===i?0:t<i?-1:1){const t=this.length-1;for(let i=0;i<t;i++)if(e(this.items[i],this.items[i+1])>0)return!0;return!1}splice(e,t,...i){fe(this._observable);const r=(t?rt.REMOVE:0)|(i.length?rt.ADD:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(e,t,i)||[];return this._emitAfterChanges(r),s}toArray(){return fe(this._observable),this._items.slice()}toJSON(){return fe(this._observable),this.toArray()}toLocaleString(){return fe(this._observable),this._items.toLocaleString()}toString(){return fe(this._observable),this._items.toString()}unshift(...e){return fe(this._observable),!e.length||this._emitBeforeChanges(rt.ADD)||(this._splice(0,0,e),this._emitAfterChanges(rt.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=fS(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=r.splice(e,t),this.hasEventListener("before-remove")){const a=Ln.acquire();a.target=this,a.cancellable=!0;for(let u=0,c=o.length;u<c;u++)n=o[u],a.reset(n),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(u,1),r.splice(e,0,n),e+=1,u-=1,c-=1);Ln.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Ln.acquire();a.target=this,a.cancellable=!1;const u=o.length;for(let c=0;c<u;c++)a.reset(o[c]),this.emit("after-remove",a);Ln.release(a)}}if(i!=null&&i.length){if(s){const h=[];for(const p of i){const m=s.ensureType(p);m==null&&p!=null||h.push(m)}i=h}const a=this.hasEventListener("before-add"),u=this.hasEventListener("after-add"),c=e===this.length;if(a||u){const h=Ln.acquire();h.target=this,h.cancellable=!0;const p=Ln.acquire();p.target=this,p.cancellable=!1;for(const m of i)a?(h.reset(m),this.emit("before-add",h),h.defaultPrevented||(c?r.push(m):r.splice(e++,0,m),this._set("length",r.length),u&&(p.reset(m),this.emit("after-add",p)))):(c?r.push(m):r.splice(e++,0,m),this._set("length",r.length),p.reset(m),this.emit("after-add",p));Ln.release(p),Ln.release(h)}else{if(c)for(const h of i)r.push(h);else r.splice(e,0,...i);this._set("length",r.length)}}if((i!=null&&i.length||o!=null&&o.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const a=new wve(this,i,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Ln.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Ln.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Ln.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Ln.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;mc.clear(),yc.clear(),gc.clear();for(const{added:u,removed:c}of i){if(u)if(gc.size===0&&yc.size===0)for(const h of u)mc.add(h);else for(const h of u)yc.has(h)?(gc.add(h),yc.delete(h)):gc.has(h)||mc.add(h);if(c)if(gc.size===0&&mc.size===0)for(const h of c)yc.add(h);else for(const h of c)mc.has(h)?mc.delete(h):(gc.delete(h),yc.add(h))}const r=os.acquire();mc.forEach(u=>{r.push(u)});const s=os.acquire();yc.forEach(u=>{s.push(u)});const n=this._items,o=t.items,a=os.acquire();if(gc.forEach(u=>{o.indexOf(u)!==n.indexOf(u)&&a.push(u)}),t.listeners&&(r.length||s.length||a.length)){const u={target:this,added:r,removed:s,moved:a},c=t.listeners.length;for(let h=0;h<c;h++){const p=t.listeners[h];p.removed||p.callback.call(this,u)}}os.release(r),os.release(s),os.release(a)}mc.clear(),yc.clear(),gc.clear()}};yu.ofType=e=>{if(!e)return _u;if(l3.has(e))return l3.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const s=e.typeMap[r].prototype.declaredClass;t?t+=` | ${s}`:t=s}let i=class extends _u{};return l([K5({Type:e,ensureType:typeof e=="function"?yt(e):va(e)})],i.prototype,"itemType",void 0),i=l([x(`esri.core.Collection<${t}>`)],i),l3.set(e,i),i},l([d()],yu.prototype,"_updating",void 0),l([d()],yu.prototype,"length",void 0),l([d()],yu.prototype,"items",null),l([d({readOnly:!0})],yu.prototype,"updating",null),yu=_u=l([x("esri.core.Collection")],yu);const Q=yu;function G(e,t,i={}){return e4(e,t,i,MX)}function Fi(e,t,i={}){return e4(e,t,i,AX)}function e4(e,t,i={},r){let s=null;const n=i.once?(o,a)=>{r(o)&&(kt(s),t(o,a))}:(o,a)=>{r(o)&&t(o,a)};if(s=Fge(e,n,i.sync,i.equals),i.initial){const o=e();n(o,o)}return s}function Hs(e,t,i,r={}){let s=null,n=null,o=null;function a(){var h;s&&n&&(n.remove(),(h=r.onListenerRemove)==null||h.call(r,s),s=null,n=null)}function u(h){r.once&&r.once&&kt(o),i(h)}const c=G(e,(h,p)=>{var m;a(),LA(h)&&(s=h,n=dS(h,t,u),(m=r.onListenerAdd)==null||m.call(r,h))},{sync:r.sync,initial:!0});return o=Ke(()=>{c.remove(),a()}),o}function Sve(e,t){return EX(e,null,t)}function vl(e,t){return EX(e,AX,t)}function EX(e,t,i){if(En(i))return Promise.reject(mt());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let s=null;function n(){s=kt(s)}return new Promise((o,a)=>{s=lS([mo(i,()=>{n(),a(mt())}),e4(e,u=>{n(),o(u)},{sync:!1,once:!0},t??MX)])})}function MX(e){return!0}function AX(e){return!!e}function Tve(e,t,i={}){let r=!1;const s=G(e,(n,o)=>{r||t(n,o)},i);return{remove(){s.remove()},pause(){r=!0},resume(){r=!1}}}function IX(e,t){const i=new Q,r=Hs(e,"after-splice",({added:s,start:n,deleteCount:o})=>{const a=i.splice(n,o);for(const u of a)u.remove();if(s!=null&&s.length){const u=s.map(t);i.addMany(u,n)}},{sync:!0,onListenerRemove:()=>i.drain(s=>s.remove()),onListenerAdd:s=>i.addMany(s.items.map(t))});return i.addHandles(r),i}function xve(e,t){const i=new Q,r=IX(e,a=>ec(async u=>{const c=await t(a,u);if(En(u))throw c.remove(),mt();return c})),s=()=>null,n=async a=>{const u=await a.promise,c=r.indexOf(a);c<0||i.splice(c,1,u)};i.addMany(r.items.map(s));for(const a of r)_n(n(a));const o=r.on("after-splice",({added:a,start:u,deleteCount:c})=>{const h=i.splice(u,c);for(const p of h)p==null||p.remove();if(a!=null&&a.length){i.addMany(a.map(s),u);for(const p of a)_n(n(p))}});return i.addHandles([Cye(r),o]),i}const So={sync:!0},xe={initial:!0},ns={sync:!0,initial:!0},$ve=Object.freeze(Object.defineProperty({__proto__:null,autorun:H5,initial:xe,mapCollection:IX,mapCollectionAsync:xve,on:Hs,once:Sve,pausable:Tve,sync:So,syncAndInitial:ns,watch:G,when:Fi,whenOnce:vl},Symbol.toStringTag,{value:"Module"})),CX=e=>{let t=class extends e{clone(){var u;const i=Gs(this);j5(i,"unable to clone instance of non-accessor class");const r=i.metadata,s=i.store,n={},o=new Map;for(const c in r){const h=r[c],p=s==null?void 0:s.originOf(c),m=h.clonable;if(h.readOnly||m===!1||p!==Pe.USER&&p!==Pe.DEFAULTS&&p!==Pe.WEB_MAP&&p!==Pe.WEB_SCENE)continue;const y=this[c];let g=null;g=typeof m=="function"?m(y):m==="reference"?y:dF(y),y!=null&&g==null||(p===Pe.DEFAULTS?o.set(c,g):n[c]=g)}const a=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const c=(u=Gs(a))==null?void 0:u.store;if(c)for(const[h,p]of o)c.set(h,p,Pe.DEFAULTS)}return a}};return t=l([x("esri.core.Clonable")],t),t};let Sw=class extends CX(se){};Sw=l([x("esri.core.Clonable")],Sw),function(e){e.ClonableMixin=CX}(Sw||(Sw={}));const _e=Sw;let Kh=class extends _e{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};l([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kh.prototype,"row",void 0),l([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kh.prototype,"column",void 0),l([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kh.prototype,"rows",void 0),l([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kh.prototype,"columns",void 0),Kh=l([x("esri.CameraLayout")],Kh);const OX=Kh,MU=new Float32Array(1);function lHe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Ws(e,t,i){return Math.min(Math.max(e,t),i)}function uHe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function Tw(e,t,i){return e+(t-e)*i}function cHe(e,t,i,r,s){return Tw(r,s,(e-t)/(i-t))}function jA(e){return e*Math.PI/180}function RX(e){return 180*e/Math.PI}function dHe(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function hHe(e){return Math.acos(Ws(e,-1,1))}function Eve(e){return Math.asin(Ws(e,-1,1))}function fa(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}function FX(e,t,i=1e-6){return!fa(e,t,i)&&e>t}function IF(e,t,i=1e-6){return!fa(e,t,i)&&e<t}function Mve(e,t,i=1e-6){return fa(e,t,i)||e>t}const eM=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function CF(e){return eM.setFloat64(0,e),eM.getBigInt64(0)}function Ave(e){return eM.setBigInt64(0,e),eM.getFloat64(0)}const Ax=BigInt("1000000"),Ive=NX(1);function NX(e){const t=CF(e=Math.abs(e)),i=Ave(t<=Ax?Ax:t-Ax);return Math.abs(e-i)}function pHe(e,t,i=Ive){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(i!=null&&NX(Math.min(Math.abs(e),Math.abs(t)))<i)return Math.abs(e-t)<=i;const r=CF(e),s=CF(t);return r<0!=s<0?!1:!((r<s?s-r:r-s)>Ax)}function fHe(e){return LX(Math.max(-AU,Math.min(e,AU)))}function LX(e){return MU[0]=e,MU[0]}function mHe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(fa(t,1)&&fa(i,1)&&fa(r,1))}const AU=LX(34028234663852886e22);function yHe(e,t,i){if(i===void 0||+i==0)return Math[e](t);if(t=+t,i=+i,isNaN(t)||typeof i!="number"||i%1!=0)return NaN;let r=t.toString().split("e");return r=(t=Math[e](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}let t4=class{constructor(t,i){this.min=t,this.max=i,this.range=i-t}normalize(t,i=0,r=!1){return IU(this.range,this.min,this.max,t,i,r)}clamp(t,i=0){return Ws(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+OF(this.range,t-i,r)}minimalMonotonic(t,i,r){return IU(this.range,t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,s=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(s)?r:s}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}};function IU(e,t,i,r,s=0,n=!1){return(r-=s)<t?r+=OF(e,t-r):r>i&&(r-=OF(e,r-i)),n&&r===i&&(r=t),r+s}function OF(e,t,i=0){return Math.ceil((t-i)/e)*e+i}const vHe=new t4(0,2*Math.PI),wHe=new t4(-Math.PI,Math.PI),kX=new t4(0,360);let Cve=class PX{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new PX;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,R(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i;return((i=this._values.get(t))==null?void 0:i.origin)??Pe.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var s;return((s=this._values.get(r))==null?void 0:s.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===Pe.DEFAULTS){const s=this._values.get(t);if((s==null?void 0:s.origin)!=null&&s.origin>r)return}this._values.set(t,new Ove(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===Pe.DEFAULTS?t:Pe.USER}},Ove=class{constructor(t,i){this.value=t,this.origin=i}};function DX(e,t,i){t.keys().forEach(s=>{i.set(s,t.get(s),Pe.DEFAULTS)});const r=e.metadata;Object.keys(r).forEach(s=>{e.internalGet(s)&&i.set(s,e.internalGet(s),Pe.DEFAULTS)})}function Rve(e,t,i){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&aU(r,i))return!0}else for(const s of r)if(s===t||s.includes(".")&&s.indexOf(t)===0&&aU(s,i))return!0;return!1}function Fve(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Nve(e,t,i,r,s){let n=EF(t[i],s);Fve(n)&&(e[i]=!0);for(const o of Object.getOwnPropertyNames(t))n=EF(t[o],s),Rve(n,i,r)&&(e[o]=!0)}function Lve(e,t,i,r){const s=i.metadata,n=nve(s[t],r),o=n==null?void 0:n.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,r):o;a!==void 0&&i.set(t,a)}const jX={origin:"service"};function VX(e,t,i=jX){if(!t||typeof t!="object")return;const r=Gs(e),s=r.metadata,n={};for(const o of Object.getOwnPropertyNames(t))Nve(n,s,o,t,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(n)){const a=EF(s[o],i).read,u=a==null?void 0:a.source;let c;c=u&&typeof u=="string"?uS(t,u):t[o],a!=null&&a.reader&&(c=a.reader.call(e,c,t,i)),c!==void 0&&r.set(o,c)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||Lve(e,o,r,i)}r.setDefaultOrigin("user")}function zX(e,t,i,r=jX){var n;const s={...r,messages:[]};i(s),(n=s.messages)==null||n.forEach(o=>{o.type!=="warning"||e.loaded?r!=null&&r.messages&&r.messages.push(o):e.loadWarnings.push(o)})}function kve(e,t,i,r,s){var o,a;const n={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,r,n,i,s),n}function UX(e,t,i,r,s,n){if(!(r!=null&&r.write))return!1;const o=pl(e,i);if(!s&&r.write.overridePolicy){const a=r.write.overridePolicy.call(e,o,i,n??void 0);a!==void 0&&(s=a)}if(s||(s=r.write),!s||s.enabled===!1||s.layerContainerTypes&&(n!=null&&n.layerContainerType)&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const a=new M("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return a&&(n!=null&&n.messages)?n.messages.push(a):a&&!n&&q.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(i)===Pe.DEFAULTS)&&Pve(e,i,n,r,o)||!s.ignoreOrigin&&(n!=null&&n.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(i)<Nd(n.origin))}function Pve(e,t,i,r,s){const n=r.default;if(n===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(e,t,i??void 0);return CA(o,s)}return!1}return n===s}function Dve(e,t,i,r){const s=Gs(e),n=s.metadata,o=bX(n[t],r);return!!o&&UX(e,s,t,o,i,r)}function qX(e,t,i){var n,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Sx(t,e.toJSON(i));const r=Gs(e),s=r.metadata;for(const a in s){const u=bX(s[a],i);if(!UX(e,r,a,u,void 0,i))continue;const c=pl(e,a),h=kve(e,u,u.write&&typeof u.write.target=="string"?u.write.target:a,c,i);Object.keys(h).length>0&&(t=Sx(t,h),(o=(n=i==null?void 0:i.resources)==null?void 0:n.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>Sx(t,h,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:a,oldOrigin:Vye(r.store.originOf(a)),newOrigin:i.origin}))}return t}const GX=e=>{let t=class extends e{constructor(...i){super(...i);const r=Gs(this),s=r.store,n=new Cve;r.store=n,DX(r,s,n)}read(i,r){VX(this,i,r)}write(i,r){return qX(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return jve.call(this,i,r)}};return t=l([x("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function jve(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let xw=class extends GX(se){};xw=l([x("esri.core.JSONSupport")],xw),function(e){function t(i){return i&&typeof i=="object"&&"toJSON"in i&&typeof i.toJSON=="function"}e.JSONSupportMixin=GX,e.isSerializable=t}(xw||(xw={}));const P=xw,Vve=Object.prototype.toString;function zve(e){const t="__accessorMetadata__"in e?yt(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Uve.apply(this,i)}}function Uve(e,t,i,r){FA(e,t).cast=r}function qve(e){return(t,i)=>{FA(t,e).cast=t[i]}}function ke(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&Vve.call(e[0])==="[object Function]"?zve(e[0]):e.length===1&&typeof e[0]=="string"?qve(e[0]):void 0}function W(e,t,i){let r,s;return t===void 0||Array.isArray(t)?(s=e,i=t,r=[void 0]):(s=t,r=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;r.forEach(u=>{const c=pX(n,u,s);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],i&&(c.read.source=(c.read.source||[]).concat(i))})}}function J(e,t,i){let r,s;return t===void 0?(s=e,r=[void 0]):typeof t!="string"?(s=e,r=[void 0],i=t):(s=t,r=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;for(const u of r){const c=pX(n,u,s);c.write&&typeof c.write=="object"||(c.write={}),i&&(c.write.target=i),c.write.writer=a[o]}}}let be=class{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=Gve(t),this.apiValues=CU(this._apiToJSON),this.jsonValues=CU(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,n)=>{const o=this.toJSON(r);o!==void 0&&Lt(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function Gve(e){const t={};for(const i in e)t[e[i]]=i;return t}function CU(e){const t=[];for(const i in e)t.push(i);return t.sort(),t}function Si(){return function(e,t){return new be(e,{ignoreUnknown:!0,...t})}}let i4=class{constructor(t,i,r,s,n,o){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=s,this.scaleHeight=n;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Kt=new i4(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),ml=new i4(3396190,1/169.8944472236118,23e4,6e4,.111),dh=new i4(1737400,0,0,0,0),Bve=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Hve={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function OU(e){const t=e==null?void 0:e.match(Bve);if(!t)return null;const[,i,r,s]=t;if(!i)return null;let n=null,o=null,a=null;const{devext:u,qaext:c,www:h}=Hve;if(r)if(n=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=u);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=u);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:n}}function Wve(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function BX(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):i.test(e)?e=e.replace(i,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}function HX(e){const t=atob(e),i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i.buffer}function Zve(e){const t=new Uint8Array(e);let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return btoa(i)}const Jve=()=>q.getLogger("esri.core.urlUtils"),o0=nt.request,RU="esri/config: esriConfig.request.proxyUrl is not set.",WX=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,ZX=/^\s*http:/i,Yve=/^\s*https:/i,Qve=/^\s*file:/i,Xve=/:\d+$/,Kve=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,e0e=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),t0e=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let eh=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(e0e);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(t0e),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const UT={},i0e=new eh(nt.applicationUrl);let Dr=i0e;const r0e=s0e();let r4=r0e;const s4=()=>Dr,$He=()=>r4;function s0e(){const e=Dr.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${Dr.scheme}://${Dr.host}${Dr.port!=null?`:${Dr.port}`:""}`}${t}`}function Li(e){if(!e)return null;const t={path:null,query:null},i=new eh(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.slice(0,r),t.query=n4(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.slice(0,t.path.length-(i.fragment.length+1)))),t}function n4(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const s=r.indexOf("=");let n,o;s<0?(n=decodeURIComponent(r),o=""):(n=decodeURIComponent(r.slice(0,s)),o=decodeURIComponent(r.slice(s+1)));let a=i[n];typeof a=="string"&&(a=i[n]=[a]),Array.isArray(a)?a.push(o):i[n]=o}return i}function o1(e,t){return e?Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",n=t==null?void 0:t[i];return n?s+encodeURIComponent(n(r)):Array.isArray(r)?r.map(o=>P.isSerializable(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):P.isSerializable(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function JX(e=!1){let t,i=o0.proxyUrl;if(typeof e=="string"){t=KX(e);const r=VA(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw Jve().warn(RU),new M("urlUtils:proxy-not-set",RU);return t&&FF()&&(i=c4(i)),Li(i)}function EHe(e,t=!1){const i=VA(e);let r,s;if(i){const n=o4(i.proxyUrl);r=n.path,s=n.query?n4(n.query):null}else if(t){const n=JX(e);r=n.path,s=n.query}if(r){const n=Li(e);e=r+"?"+n.path;const o=o1({...s,...n.query});o&&(e=`${e}?${o}`)}return e}const U0={path:"",query:""};function o4(e){const t=e.indexOf("?");return t!==-1?(U0.path=e.slice(0,t),U0.query=e.slice(t+1)):(U0.path=e,U0.query=null),U0}function YX(e){return e=(e=iM(e=m0e(e=o4(e).path),!0)).toLowerCase()}function n0e(e){const t={proxyUrl:e.proxyUrl,urlPrefix:YX(e.urlPrefix)},i=o0.proxyRules,r=t.urlPrefix;let s=i.length;for(let n=0;n<i.length;n++){const o=i[n].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;s=n;break}o.indexOf(r)===0&&(s=n+1)}return i.splice(s,0,t),s}function VA(e){const t=o0.proxyRules,i=YX(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function o0e(e,t){if(!e||!t)return!1;e=tM(e),t=tM(t);const i=OU(e),r=OU(t);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&_v(e,t,!0)}function QX(e,t){return e=tM(e),t=tM(t),iM(e)===iM(t)}function tM(e){const t=(e=yo(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function RF(e,t=o0.interceptors){const i=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r);if(t){for(const r of t)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function _v(e,t,i=!1){if(!e||!t)return!1;const r=LF(e),s=LF(t);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function a4(e){if(typeof e=="string"){if(!Tn(e))return!0;e=LF(e)}if(_v(e,Dr))return!0;const t=o0.trustedServers||[];for(let i=0;i<t.length;i++){const r=a0e(t[i]);for(let s=0;s<r.length;s++)if(_v(e,r[s]))return!0}return!1}function a0e(e){return UT[e]||(u4(e)||wl(e)?UT[e]=[new eh(js(e))]:UT[e]=[new eh(`http://${e}`),new eh(`https://${e}`)]),UT[e]}function js(e,t=r4,i){return wl(e)?i!=null&&i.preserveProtocolRelative?e:Dr.scheme==="http"&&Dr.authority===Sn(e).slice(2)?`http:${e}`:`https:${e}`:u4(e)?e:Pf(e[0]==="/"?p0e(t):t,e)}function l4(e,t=r4,i){if(e==null||!Tn(e))return e;const r=yo(e),s=r.toLowerCase(),n=yo(t).toLowerCase().replace(/\/+$/,""),o=i?yo(i).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return e;const a=(p,m,y)=>(y=p.indexOf(m,y))===-1?p.length:y;let u=a(s,"/",s.indexOf("//")+2),c=-1;for(;s.slice(0,u+1)===n.slice(0,u)+"/"&&(c=u+1,u!==s.length);)u=a(s,"/",u+1);if(c===-1||o&&c<o.length)return e;e=r.slice(c);const h=n.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let p=0;p<h;p++)e=`../${e}`;else e=`./${e}`;return e}function yo(e){return e=v0e(e=g0e(e=y0e(e=js(e=e.trim()))))}function Pf(...e){const t=e.filter(Br);if(!(t!=null&&t.length))return;const i=[];if(Tn(t[0])){const s=t[0],n=s.indexOf("//");n!==-1&&(i.push(s.slice(0,n+1)),d0e(t[0])&&(i[0]+="/"),t[0]=s.slice(n+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<r.length;s++){const n=r[s];n===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!n&&s===r.length-1||n&&(n!=="."||i.length===0))&&i.push(n)}return i.join("/")}function Sn(e,t=!1){if(e==null||zA(e)||sc(e))return null;let i=e.indexOf("://");if(i===-1&&wl(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=iM(e,!0)),e}function Tn(e){return wl(e)||u4(e)}function zA(e){return e!=null&&e.slice(0,5)==="blob:"}function sc(e){return e!=null&&e.slice(0,5)==="data:"}function l0e(e){const t=Df(e);return t!=null&&t.isBase64?HX(t.data):null}function MHe(e){return Zve(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const u0e=/^data:(.*?)(;base64)?,(.*)$/;function Df(e){const t=e.match(u0e);if(!t)return null;const[,i,r,s]=t;return{mediaType:i,isBase64:!!r,data:s}}function XX(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function AHe(e){return(await fetch(e)).blob()}function IHe(e){const t=l0e(e);if(!t)return null;const i=Df(e);return new Blob([t],{type:i.mediaType})}function wl(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function u4(e){return e!=null&&WX.test(e)}function KX(e){return e!=null&&Yve.test(e)||Dr.scheme==="https"&&wl(e)}function c0e(e){return e!=null&&ZX.test(e)||Dr.scheme==="http"&&wl(e)}function d0e(e){return e!=null&&Qve.test(e)}function c4(e){return wl(e)?`https:${e}`:e.replace(ZX,"https:")}function h0e(){return Dr.scheme==="http"}function FF(){return Dr.scheme==="https"}function iM(e,t=!1){return wl(e)?e.slice(2):(e=e.replace(WX,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function p0e(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function f0e(e){let t=0;if(Tn(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function CHe(e,t){if(!e)return"";const i=Li(e).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return r.replace(s,"")}function m0e(e){return e.endsWith("/")?e:`${e}/`}function eK(e){return e.replace(/\/+$/,"")}function y0e(e){if(/^https?:\/\//i.test(e)){const t=o4(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function g0e(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function v0e(e){const t=o0.httpsDomains;if(!c0e(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),Xve.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return h0e()&&r===Dr.authority&&!Kve.test(e)||(FF()&&r===Dr.authority||t&&t.some(s=>r===s||r.endsWith(`.${s}`))||FF()&&!VA(e))&&(e=c4(e)),e}function NF(e,t,i){if(!(t&&i&&e&&Tn(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),n=e.indexOf(":",r+2),o=Math.min(s<0?e.length:s,n<0?e.length:n);return e.slice(r+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(o)}`}function LF(e){return typeof e=="string"?new eh(js(e)):(e.scheme||(e.scheme=Dr.scheme),e)}function OHe(e){return w0e.test(e)}function tK(e,t){const i=Li(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function iK(e,t,i){const r=Li(e),s=r.query||{};return s[t]=String(i),`${r.path}?${o1(s)}`}function u3(e,t){if(!t)return e;const i=Li(e),r=i.query||{};for(const[n,o]of Object.entries(t))o!=null&&(r[n]=o);const s=o1(r);return s?`${i.path}?${s}`:i.path}function RHe(e){if(e==null)return null;const t=e.match(rK);return t?t[2]:null}function FU(e){if(e==null)return null;const t=e.match(rK);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function FHe(e){return typeof e=="string"?Df(e)??{data:e}:new Promise((t,i)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(Df(r.result)),r.onerror=s=>i(s)})}const rK=/([^.]*)\.([^/]*)$/,w0e=/(^data:image\/svg|\.svg$)/i,sK="20250407",nK="04d2b42da93678ca718b23aaf7e216985f10fa8e";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const oK="4.32";let Me,d4=oK;d4="4.32.10";function NHe(e){Me=e}function LHe(e){const t=Me==null?void 0:Me.findCredential(e);return t!=null&&t.token?iK(e,"token",t.token):e}D("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),D("host-webworker");function a0(e,t){var r;const i=(r=t==null?void 0:t.url)==null?void 0:r.path;if(e&&i&&(e=js(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=l4(e,t.portalItem.itemUrl);s!=null&&b0e.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return(e=kF(e,t==null?void 0:t.portal))&&UA.test(e)?p4(e):e}function gS(e,t,i=a1.YES){var s,n;if((e=e&&UA.test(e)?lK(e):e)==null)return e;!Tn(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let r=js(e);if(t){const o=((s=t.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((n=t.url)==null?void 0:n.path);if(o){const a=kF(o,t.portal),u=kF(r,t.portal);r=l4(u,a,a),r!=null&&r!==u&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=aK(r,t==null?void 0:t.portal),Tn(r)&&(r=yo(r)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!Tn(r)&&!sc(r)&&i===a1.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function h4(e,t,i){return a0(e,i)}function jf(e,t,i,r){const s=gS(e,r);s!==void 0&&(t[i]=s)}const UA=/\/items\/([^/]+)\/resources\/(.*)/,b0e=/^\.\/resources\//;function _0e(e){const t=(e==null?void 0:e.match(UA))??null;return(t==null?void 0:t[1])??null}function S0e(e){const t=(e==null?void 0:e.match(UA))??null;if(t==null)return null;const i=t[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=FU(i);return{prefix:null,filename:o,extension:a}}const{path:s,extension:n}=FU(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:n}}function aK(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?NF(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function kF(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=s4();return _v(r,`${r.scheme}://${i}`)?NF(e,t.portalHostname,i):NF(e,i,t.portalHostname)}function p4(e){if(!e)return e||null;let t=e;return t&&Me&&!Me.findCredential(t)&&(t=BX(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function lK(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&Me&&!Me.findCredential(t)&&(t=BX(t)),t}var a1;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(a1||(a1={}));const kHe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return a1},ensureMainOnlineDomain:aK,fromCDNUrl:lK,fromJSON:a0,itemIdFromResourceUrl:_0e,prefixAndFilenameFromResourceUrl:S0e,read:h4,toCDNUrl:p4,toJSON:gS,write:jf},Symbol.toStringTag,{value:"Module"})),uK={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},cK=Object.values(uK),dK=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${cK.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),T0e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${cK.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),x0e=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function PHe(e){return dK.test(e)}function hh(e){if(e==null)return null;const t=Li(e),i=(t==null?void 0:t.path.match(dK))||(t==null?void 0:t.path.match(T0e));if(!i)return null;const[,r,s,n,o]=i,a=s.indexOf("/");return{title:f4(a!==-1?s.slice(a+1):s),serverType:uK[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function $0e(e){const t=Li(e).path.match(x0e);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function f4(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function E0e(e,t){const i=[];if(e){const r=hh(e);r!=null&&r.title&&i.push(r.title)}if(t){const r=f4(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function l1(e){let t=Sn(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function M0e(e,t){return e&&eK(tK(e,t))}function A0e(e){let{url:t}=e;if(!t)return{url:t};t=tK(t,e.logger);const i=Li(t),r=hh(i.path);let s;if(r!=null)r.sublayer!=null&&e.layer.layerId==null&&(s=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const n=$0e(i.path);n!=null&&(t=n.serviceUrl,s=n.sublayerId)}return{url:eK(t),layerId:s}}function I0e(e,t,i,r,s){jf(t,r,"url",s),r.url&&e.layerId!=null&&(r.url=Pf(r.url,i,e.layerId.toString()))}function DHe(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),n=t.includes("/wmsserver");return i&&(r||s||n)}function jHe(e){var r;if(!e)return!1;const t=new eh(js(e)),i=(r=t.authority)==null?void 0:r.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const C0e=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function O0e(e){const t=Sn(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!C0e.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function hK(e,t){return!(!nt.apiKey||!O0e(e))}function R0e(e,t,i=!1,r){return new Promise((s,n)=>{if(En(r))return void n(NU());let o=()=>{c(),n(new Error(`Unable to load ${t}`))},a=()=>{const h=e;c(),s(h)},u=()=>{if(!e)return;const h=e;c(),h.src="",n(NU())};const c=()=>{D("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,r!=null&&r.removeEventListener("abort",u),u=null,i&&URL.revokeObjectURL(t)};r!=null&&r.addEventListener("abort",u),D("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function NU(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const pK="Timeout exceeded";function F0e(){return new Error(pK)}function VHe(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===pK}function N0e(e){nt.request.crossOriginNoCorsDomains||(nt.request.crossOriginNoCorsDomains={});const t=nt.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[Sn(i)??""]=0:(t[Sn("http://"+i)??""]=0,t[Sn("https://"+i)??""]=0)}function L0e(e){const t=nt.request.crossOriginNoCorsDomains;if(t){let i=Sn(e);if(i)return i=i.toLowerCase(),!_v(i,s4())&&t[i]<Date.now()-36e5}return!1}async function k0e(e){var s;const t=Li(e);e=t.path,((s=t.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const i=nt.request.crossOriginNoCorsDomains,r=Sn(e);i&&r&&(i[r.toLowerCase()]=Date.now())}async function Be(e,t){var y;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=n4(t.query.toString().replaceAll("+"," ")));const i=sc(e),r=zA(e);r||i||(e=yo(e));const s={url:e,requestOptions:{...t}},n=g=>({data:g,getAllHeaders:Sv,getHeader:Sv,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=RF(e,Kn.internalInterceptors);if(o){const g=await kU(o,s);if(g!=null)return n(g)}let a=RF(e);if(a){const g=await kU(a,s);if(g!=null)return n(g);a.after||a.error||(a=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(D("host-webworker")||D("host-node")))throw ma("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw ma("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw ma("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await z0e(),rM)return rM.execute(e,t);const u=new AbortController,c=mo(t,()=>u.abort()),h={controller:u,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:s,redoRequest:!1,useIdentity:Kn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},p=t.useRequestQueue?H0e(h):DF(h),m=await p.finally(()=>c==null?void 0:c.remove());return(y=a==null?void 0:a.after)==null||y.call(a,m),m}let rM;const Kn=nt.request,fK="FormData"in globalThis,P0e=new Set([499,498,403,401]),D0e=new Set(["COM_0056","COM_0057","SB_0008"]),j0e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Sv=()=>null,sM=Symbol();function V0e(e){const t=Sn(e);t&&!Be._corsServers.includes(t)&&Be._corsServers.push(t)}function LU(e){const t=Sn(e);return!t||t.endsWith(".arcgis.com")||Be._corsServers.includes(t)||a4(t)}function ma(e,t,i,r){let s="Error";const n={url:i.url,requestOptions:i.requestOptions,getAllHeaders:Sv,getHeader:Sv,ssl:!1};if(t instanceof M)return t.details?(t.details=R(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=n,t;if(t){const o=r&&(()=>Array.from(r.headers)),a=r&&(h=>r.headers.get(h)),u=r==null?void 0:r.status,c=t.message;c&&(s=c),o&&a&&(n.getAllHeaders=o,n.getHeader=a),n.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||u||0,n.subCode=t.subcode,n.messageCode=t.messageCode,typeof t.details=="string"?n.messages=[t.details]:n.messages=t.details,n.raw=sM in t?t[sM]:t}return fi(t)?mt():new M(e,s,n)}async function z0e(){D("host-webworker")&&!rM&&(rM=await L(()=>import("./request-Bm8tmh6F.js"),[]))}async function PF(){Me||await L(()=>import("./IdentityManager-CVGlxZus.js"),[])}async function U0e(e){var a;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,s=i.body;let n=null,o=null;if(fK&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),e.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Kn.priority,redirect:"follow",signal:r},(n||o)&&(e.fetchOptions.body=n||o),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=i.query)!=null&&a.token||n!=null&&n.get("token")),!e.hasToken&&hK(t)&&(i.query||(i.query={}),i.query.token=nt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!mK(t)&&!En(r)){let u;i.authMode==="immediate"?(await PF(),u=await Me.getCredential(t,{signal:r}),e.credential=u):i.authMode==="no-prompt"?(await PF(),u=await Me.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=u):Me&&(u=Me.findCredential(t)),u&&(e.credentialToken=u.token,e.useSSL=!!u.ssl)}}function mK(e){return j0e.some(t=>t.test(e))}async function q0e(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions??{},s=zA(t)||sc(t),n=i.responseType||"json",o=s?0:i.timeout!=null?i.timeout:Kn.timeout;let a=!1;if(!s){e.useSSL&&(t=c4(t));let m={...i.query};e.credentialToken&&(m.token=e.credentialToken);let y=o1(m);D("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const g=t.length+1+y.length;let v;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||g>Kn.maxUrlLength;const b=i.useProxy||!!VA(t);if(b){const w=JX(t);v=w.path,!a&&v.length+1+g>Kn.maxUrlLength&&(a=!0),w.query&&(m={...w.query,...m})}if(r.method==="HEAD"&&(a||b)){if(a)throw g>Kn.maxUrlLength?ma("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):ma("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(b)throw ma("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=u3(t,m):(r.body=o1(m),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=u3(t,m),b&&(e.useProxy=!0,t=`${v}?${t}`),m.token&&fK&&r.body instanceof FormData&&!Wve(t)&&r.body.set("token",m.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!_v(t,s4())){if(a4(t))e.withCredentials=!0;else if(Me){const w=Me.findServerInfo(t);w!=null&&w.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",L0e(t)&&await k0e(a?u3(t,m):t))}let u,c,h=0,p=!1;o>0&&(h=setTimeout(()=>{p=!0,e.controller.abort()},o));try{if(i.responseType==="native-request-init")c=r,c.url=t,i.signal?c.signal=i.signal:delete c.signal;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||G0e(i.headers)||!s&&!e.useProxy&&Kn.proxyUrl&&!LU(t)){if(Be._beforeFetch&&await Be._beforeFetch(t,r),u=await fetch(t,r),Be._afterFetch&&await Be._afterFetch(u),e.useProxy||V0e(t),i.responseType==="native")c=u;else if(r.method!=="HEAD")if(u.ok){switch(n){case"array-buffer":c=await u.arrayBuffer();break;case"blob":case"image":c=await u.blob();break;default:c=await u.text()}if(h&&(clearTimeout(h),h=0),n==="json"||n==="xml"||n==="document")if(c)switch(n){case"json":c=JSON.parse(c);break;case"xml":c=PU(c,"application/xml");break;case"document":c=PU(c,"text/html")}else c=null;if(c){if(n==="array-buffer"||n==="blob"){const m=u.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&c[n==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(c).json();y.error&&(c=y)}catch{}}n==="image"&&c instanceof Blob&&(c=await DU(URL.createObjectURL(c),e,!0))}}else{c=await u.text();try{c=JSON.parse(c)}catch{}}}else c=await DU(t,e)}catch(m){if(m.name==="AbortError")throw p?F0e():mt("Request canceled");if(!(!u&&m instanceof TypeError&&Kn.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||LU(t))throw m;e.redoRequest=!0,n0e({proxyUrl:Kn.proxyUrl,urlPrefix:Sn(t)??""})}finally{h&&clearTimeout(h)}return[u,c]}async function kU(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(s){i=ma("request:interceptor",s,t)}if((r instanceof Error||r instanceof M)&&(i=ma("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function G0e(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function PU(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}Be._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Be._beforeFetch=void 0,Be._afterFetch=void 0;const B0e=new Map;async function H0e(e){const t=Z0e(e.params.url);if(!t)return DF(e);const{QueueProcessor:i}=await L(()=>import("./QueueProcessor-BPrPah2z.js"),[]);return i0(B0e,t.origin,()=>{const s=t.isHosted?D("request-queue-concurrency-hosted"):D("request-queue-concurrency-non-hosted");return new i({concurrency:s,process:n=>{if(En(n.params.requestOptions))throw ma("",mt("Request canceled"),n.params);return DF(n)}})}).push(e)}async function DF(e){var n,o;let t,i;await U0e(e);try{do[t,i]=await q0e(e);while(!await W0e(e,t,i))}catch(a){const u=ma("request:server",a,e.params,t);throw u.details.ssl=e.useSSL,(n=e.interceptor)!=null&&n.error&&e.interceptor.error(u),u}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((o=i.user)!=null&&o.username)&&!a4(r)){const a=Sn(r,!0);a&&Kn.trustedServers.push(a)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&N0e(i.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&Me){const a=Me.findServerInfo(s.server);let u=a==null?void 0:a.owningSystemUrl;if(u){u=u.replace(/\/?$/,"/sharing");const c=Me.findCredential(u,s.userId);c&&Me._getIdenticalSvcIdx(u,c)===-1&&c.resources.unshift(u)}}return{data:i,getAllHeaders:t?()=>Array.from(t.headers):Sv,getHeader:t?a=>t.headers.get(a):Sv,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function W0e(e,t,i){var c;if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,n;if(i&&(i.error&&typeof i.error=="object"?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[sM]=i,s.details=i.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[sM]=i,s;let o,a=null;s&&(n=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o==null?void 0:o.toUpperCase());const u=r.authMode;if(n===403&&(a===4||(c=s.message)!=null&&c.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(u!=="no-prompt"||n===498)&&n!==void 0&&P0e.has(n)&&!mK(e.params.url)&&(n!==403||(!o||!D0e.has(o))&&(a==null||a===2&&e.credentialToken))){await PF();try{const h=await Me.getCredential(e.params.url,{error:ma("request:server",s,e.params),prompt:u!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=h,e.credentialToken=h.token,e.useSSL=e.useSSL||h.ssl,!1}catch(h){if(u==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=h}}if(s)throw s;return!0}function DU(e,t,i=!1){const r=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Kn.priority,s.src=e,R0e(s,e,i,r)}function Z0e(e){let t,i;return typeof e=="string"?(t=Sn(e,!0),i=l1(e)):(t=e.origin,i=l1(e.toString())),t==null?null:{origin:t,isHosted:i}}function Yt(e){if(!nt.assetsPath)throw q.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new M("assets:path-not-set","config.assetsPath is not set");return Pf(nt.assetsPath,e)}let c3,F=null;function m4(){return!!F}function J0e(){return!!D("esri-wasm")}function yK(){return c3||(c3=L(()=>import("./pe-wasm-Co3DzcyP.js"),__vite__mapDeps([0,1])).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Yt(`esri/geometry/support/${t}`)})).then(e=>{wK(e)}),c3)}var jF,Nt;(function(e){function t(n,o,a){F.ensureCache.prepare();const u=Gp(a),c=a===u,h=F.ensureFloat64(u),p=F._pe_geog_to_proj(F.getPointer(n),o,h);return p&&$d(a,o,h,c),p}function i(n,o,a,u){switch(u){case Nt.PE_TRANSFORM_P_TO_G:return r(n,o,a);case Nt.PE_TRANSFORM_G_TO_P:return t(n,o,a)}return 0}function r(n,o,a){return s(n,o,a,0)}function s(n,o,a,u){F.ensureCache.prepare();const c=Gp(a),h=a===c,p=F.ensureFloat64(c),m=F._pe_proj_to_geog_center(F.getPointer(n),o,p,u);return m&&$d(a,o,p,h),m}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=s})(jF||(jF={})),function(e){function t(){e.PE_BUFFER_MAX=F.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=F.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=F.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=F.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=F.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=F.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=F.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=F.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=F.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=F.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=F.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=F.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=F.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=F.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=F.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=F.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=F.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=F.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=F.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=F.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=F.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=F.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=F.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=F.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=F.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=F.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=F.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=F.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=F.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=F.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=F.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=F.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Nt||(Nt={}));let gK=null;var VF;(function(e){const t={},i={},r=y=>{const g=y.getType();switch(g){case Nt.PE_TYPE_GEOGCS:y=F.castObject(y,F.PeGeogcs);break;case Nt.PE_TYPE_PROJCS:y=F.castObject(y,F.PeProjcs);break;case Nt.PE_TYPE_GEOGTRAN:y=F.castObject(y,F.PeGeogtran);break;default:g&Nt.PE_TYPE_UNIT&&(y=F.castObject(y,F.PeUnit))}return y};function s(){F.PeFactory.prototype.initialize(null)}function n(y){return o(Nt.PE_TYPE_COORDSYS,y)}function o(y,g){let v=null,b=t[y];if(b||(b={},t[y]=b),b.hasOwnProperty(String(g))&&(v=b[g],F.compare(v,F.NULL)&&(v=null)),!v){const w=F.PeFactory.prototype.factoryByType(y,g);F.compare(w,F.NULL)||(v=r(w),b[g]=v)}return v}function a(y,g){let v=null,b=i[y];if(b||(b={},i[y]=b),b.hasOwnProperty(g)&&(v=b[g],F.compare(v,F.NULL)&&(v=null)),!v){const w=F.PeFactory.prototype.fromString(y,g);F.compare(w,F.NULL)||(v=r(w),b[g]=v)}return v}function u(y){return o(Nt.PE_TYPE_GEOGCS,y)}function c(y){return o(Nt.PE_TYPE_GEOGTRAN,y)}function h(y){return F.PeFactory.prototype.getCode(y)}function p(y){return o(Nt.PE_TYPE_PROJCS,y)}function m(y){return o(Nt.PE_TYPE_UNIT,y)}e.initialize=s,e.coordsys=n,e.factoryByType=o,e.fromString=a,e.geogcs=u,e.geogtran=c,e.getCode=h,e.projcs=p,e.unit=m})(VF||(VF={}));let vK=null;var nM,zF,UF,qF,GF,BF,oM,HF,aM,lM,WF;function wK(e){function t(n,o,a){n[o]=a(n[o])}F=e,Nt.init(),nM.init(),oM.init(),aM.init(),lM.init(),gK=class extends F.PeDouble{constructor(n=NaN){super(n)}destroy(){F.destroy(this)}[Symbol.dispose](){this.destroy()}},vK=class extends F.PeGCSExtent{destroy(){F.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[F.PeAngunit,F.PeDatum,F.PeGeogcs,F.PeGeogtran,F.PeObject,F.PeParameter,F.PePrimem,F.PeProjcs,F.PeSpheroid,F.PeUnit];for(const n of i)t(n.prototype,"getName",o=>function(){return o.call(this,new Array(Nt.PE_NAME_MAX))});for(const n of[F.PeGeogtran,F.PeProjcs])t(n.prototype,"getParameters",o=>function(){const a=new Array(Nt.PE_PARM_MAX);let u=o.call(this);for(let c=0;c<a.length;c++){const h=F.getValue(u,"*");a[c]=h?F.wrapPointer(h,F.PeParameter):null,u+=Int32Array.BYTES_PER_ELEMENT}return a});t(F.PeHorizon.prototype,"getCoord",n=>function(o=!1){const a=this.getSize();if(!a)return null;const u=[];return $d(u,a,n.call(this),o),u}),t(F.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=F._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const u=n.call(this);if(!F.compare(u,F.NULL)){a=[u];const c=this.getSteps();if(c>1){const h=F.getPointer(u);for(let p=1;p<c;p++)a.push(F.wrapPointer(h+o*p,F.PeGTlistExtendedGTs))}}return a}});const r=F._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let a=null;const u=n.call(this);if(!F.compare(u,F.NULL)){a=[u];const c=u.getNump();if(c>1){const h=F.getPointer(u);for(let p=1;p<c;p++)a.push(F.wrapPointer(h+r*p,F.PeHorizon))}}return o.set(n,a),a};t(F.PeProjcs.prototype,"horizonGcsGenerate",s),t(F.PeProjcs.prototype,"horizonPcsGenerate",s),F.PeObject.prototype.toString=function(n=Nt.PE_STR_OPTS_NONE){F.ensureCache.prepare();const o=F.getPointer(this),a=F.ensureInt8(new Array(Nt.PE_BUFFER_MAX));return F.UTF8ToString(F._pe_object_to_string_ext(o,n,a))},F.PeGeogcs.prototype.destroy=function(){this.Delete(),ra(this),this.ptr=0},F.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},F.PeProjcs.prototype.destroy=function(){this.Delete(),ra(this),this.ptr=0},F.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function ra(e){if(!e)return;const t=F.getClass(e);if(!t)return;const i=F.getCache(t);if(!i)return;const r=F.getPointer(e);r&&delete i[r]}function qT(e,t){const i=[],r=new Array(t);for(let s=0;s<e;s++)i.push(F.ensureInt8(r));return i}function Gp(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function $d(e,t,i,r=!1){if(r)for(let s=0;s<2*t;s++)e[s]=F.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let n=0;n<t;n++)s&&(e[n]=new Array(2)),e[n][0]=F.getValue(i,"double"),e[n][1]=F.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=F.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=F._pe_getPeGTlistExtendedEntrySize()}function r(s,n,o,a,u,c){let h=null;const p=new F.PeInteger(c);try{const m=F.PeGTlistExtended.prototype.getGTlist(s,n,o,a,u,p);if((c=p.val)&&(h=[m],c>1)){const y=F.getPointer(m);for(let g=1;g<c;g++)h.push(F.wrapPointer(y+t*g,F.PeGTlistExtendedEntry))}}finally{F.destroy(p)}return h}e.init=i,e.getGTlist=r})(nM||(nM={})),function(e){function t(i){if(i!=null&&i.length){for(const r of i)ra(r),r.getEntries().forEach(s=>{ra(s);const n=s.getGeogtran();ra(n),n.getParameters().forEach(ra),[n.getGeogcs1(),n.getGeogcs2()].forEach(o=>{ra(o);const a=o.getDatum();ra(a),ra(a.getSpheroid()),ra(o.getPrimem()),ra(o.getUnit())})});F.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(zF||(zF={})),function(e){function t(i,r,s,n,o){F.ensureCache.prepare();const a=Gp(s),u=s===a,c=F.ensureFloat64(a);let h=0;n&&(h=F.ensureFloat64(n));const p=F._pe_geog_to_geog(F.getPointer(i),r,c,h,o);return p&&$d(s,r,c,u),p}e.geogToGeog=t}(UF||(UF={})),function(e){function t(n,o,a,u,c,h,p,m){F.PeLineType.prototype.geodesic_coordinate(n,o,a,u,c,h,p,m)}function i(n,o,a,u,c,h,p,m,y){F.PeLineType.prototype.geodetic_coordinate(n,o,a,u,c,h,p,m,y)}function r(n,o,a,u,c,h,p,m,y,g){F.PeLineType.prototype.geodetic_distance(n,o,a,u,c,h,p,m,y,g)}function s(n,o,a,u,c,h,p,m,y){F.PeLineType.prototype.great_elliptic_distance(n,o,a,u,c,h,p,m,y)}e.geodesicCoordinate=t,e.geodeticCoordinate=i,e.geodeticDistance=r,e.greatEllipticDistance=s}(qF||(qF={})),function(e){function t(o,a){return F.PeMath.prototype.phi_to_eta(o,a)}function i(o,a){return F.PeMath.prototype.eta_to_phi(o,a)}function r(o,a){return F.PeMath.prototype.phi_to_phig(o,a)}function s(o,a,u){return F.PeMath.prototype.q(o,a,u)}function n(o,a){return F.PeMath.prototype.q90(o,a)}e.phiToEta=t,e.etaToPhi=i,e.phiToPhig=r,e.q=s,e.q90=n}(GF||(GF={})),function(e){const t=(c,h,p,m,y,g)=>{let v,b;switch(F.ensureCache.prepare(),c){case"dd":v=F._pe_geog_to_dd,b=Nt.PE_DD_MAX;break;case"ddm":v=F._pe_geog_to_ddm,b=Nt.PE_DDM_MAX;break;case"dms":v=F._pe_geog_to_dms,b=Nt.PE_DMS_MAX}let w=0;h&&(w=F.getPointer(h));const _=Gp(m),S=F.ensureFloat64(_),T=qT(p,b),E=v(w,p,S,y,F.ensureInt32(T));if(E)for(let A=0;A<p;A++)g[A]=F.UTF8ToString(T[A]);return E},i=(c,h,p,m,y)=>{let g;switch(F.ensureCache.prepare(),c){case"dd":g=F._pe_dd_to_geog;break;case"ddm":g=F._pe_ddm_to_geog;break;case"dms":g=F._pe_dms_to_geog}let v=0;h&&(v=F.getPointer(h));const b=m.map(T=>F.ensureString(T)),w=F.ensureInt32(b),_=F.ensureFloat64(new Array(2*p)),S=g(v,p,w,_);return S&&$d(y,p,_),S};function r(c,h,p,m,y){return t("dms",c,h,p,m,y)}function s(c,h,p,m){return i("dms",c,h,p,m)}function n(c,h,p,m,y){return t("ddm",c,h,p,m,y)}function o(c,h,p,m){return i("ddm",c,h,p,m)}function a(c,h,p,m,y){return t("dd",c,h,p,m,y)}function u(c,h,p,m){return i("dd",c,h,p,m)}e.geogToDms=r,e.dmsToGeog=s,e.geogToDdm=n,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=u}(BF||(BF={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=F.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=F.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=F.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=F.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=F.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,n,o,a,u,c,h){F.ensureCache.prepare();let p=0;s&&(p=F.getPointer(s));const m=Gp(o),y=F.ensureFloat64(m),g=qT(n,Nt.PE_MGRS_MAX),v=F.ensureInt32(g),b=F._pe_geog_to_mgrs_extended(p,n,y,a,u,c,v);if(b)for(let w=0;w<n;w++)h[w]=F.UTF8ToString(g[w]);return b}function r(s,n,o,a,u){F.ensureCache.prepare();let c=0;s&&(c=F.getPointer(s));const h=o.map(g=>F.ensureString(g)),p=F.ensureInt32(h),m=F.ensureFloat64(new Array(2*n)),y=F._pe_mgrs_to_geog_extended(c,n,p,a,m);return y&&$d(u,n,m),y}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(oM||(oM={})),function(e){function t(r,s,n,o,a,u,c){F.ensureCache.prepare();let h=0;r&&(h=F.getPointer(r));const p=Gp(n),m=F.ensureFloat64(p),y=qT(s,Nt.PE_MGRS_MAX),g=F.ensureInt32(y),v=F._pe_geog_to_usng(h,s,m,o,a,u,g);if(v)for(let b=0;b<s;b++)c[b]=F.UTF8ToString(y[b]);return v}function i(r,s,n,o){F.ensureCache.prepare();let a=0;r&&(a=F.getPointer(r));const u=n.map(m=>F.ensureString(m)),c=F.ensureInt32(u),h=F.ensureFloat64(new Array(2*s)),p=F._pe_usng_to_geog(a,s,c,h);return p&&$d(o,s,h),p}e.geogToUsng=t,e.usngToGeog=i}(HF||(HF={})),function(e){function t(){e.PE_UTM_OPTS_NONE=F.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=F.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=F.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,n,o,a,u){F.ensureCache.prepare();let c=0;s&&(c=F.getPointer(s));const h=Gp(o),p=F.ensureFloat64(h),m=qT(n,Nt.PE_UTM_MAX),y=F.ensureInt32(m),g=F._pe_geog_to_utm(c,n,p,a,y);if(g)for(let v=0;v<n;v++)u[v]=F.UTF8ToString(m[v]);return g}function r(s,n,o,a,u){F.ensureCache.prepare();let c=0;s&&(c=F.getPointer(s));const h=o.map(g=>F.ensureString(g)),p=F.ensureInt32(h),m=F.ensureFloat64(new Array(2*n)),y=F._pe_utm_to_geog(c,n,p,a,m);return y&&$d(u,n,m),y}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(aM||(aM={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=F.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=F.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=F.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=F.PePCSInfo.prototype.PE_POLE_POINT}function r(s,n=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(s)&&(a=t.get(s),a[n]&&(o=a[n])),o||(o=F.PePCSInfo.prototype.generate(s,n),a||(a=[],t.set(s,a)),a[n]=o),o}e.init=i,e.generate=r}(lM||(lM={})),function(e){function t(){return F.PeVersion.prototype.version_string()}e.versionString=t}(WF||(WF={}));const Y0e=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return jF},get PeDefs(){return Nt},get PeDouble(){return gK},get PeFactory(){return VF},get PeGCSExtent(){return vK},get PeGTTransformations(){return UF},get PeGTlistExtended(){return nM},get PeGTlistExtendedEntry(){return zF},get PeLineType(){return qF},get PeMath(){return GF},get PeNotationDms(){return BF},get PeNotationMgrs(){return oM},get PeNotationUsng(){return HF},get PeNotationUtm(){return aM},get PePCSInfo(){return lM},get PeVersion(){return WF},_init:wK,get _pe(){return F},isLoaded:m4,isSupported:J0e,load:yK},Symbol.toStringTag,{value:"Module"}));var Vf;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Vf||(Vf={}));let f;const $={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10665:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(f=2e3;f<=2045;f++)$[f]=0;for(f=2056;f<=2065;f++)$[f]=0;for(f=2067;f<=2135;f++)$[f]=0;for(f=2137;f<=2154;f++)$[f]=0;for(f=2161;f<=2170;f++)$[f]=0;for(f=2172;f<=2193;f++)$[f]=0;for(f=2195;f<=2198;f++)$[f]=0;for(f=2200;f<=2203;f++)$[f]=0;for(f=2205;f<=2217;f++)$[f]=0;for(f=2222;f<=2224;f++)$[f]=1;for(f=2225;f<=2250;f++)$[f]=2;for(f=2251;f<=2253;f++)$[f]=1;for(f=2257;f<=2264;f++)$[f]=2;for(f=2274;f<=2279;f++)$[f]=2;for(f=2280;f<=2282;f++)$[f]=1;for(f=2283;f<=2289;f++)$[f]=2;for(f=2290;f<=2292;f++)$[f]=0;for(f=2308;f<=2313;f++)$[f]=0;for(f=2315;f<=2491;f++)$[f]=0;for(f=2494;f<=2866;f++)$[f]=0;for(f=2867;f<=2869;f++)$[f]=1;for(f=2870;f<=2888;f++)$[f]=2;for(f=2891;f<=2895;f++)$[f]=2;for(f=2896;f<=2898;f++)$[f]=1;for(f=2902;f<=2908;f++)$[f]=2;for(f=2915;f<=2920;f++)$[f]=2;for(f=2921;f<=2923;f++)$[f]=1;for(f=2924;f<=2930;f++)$[f]=2;for(f=2931;f<=2962;f++)$[f]=0;for(f=2964;f<=2968;f++)$[f]=2;for(f=2969;f<=2973;f++)$[f]=0;for(f=2975;f<=2991;f++)$[f]=0;for(f=2995;f<=3051;f++)$[f]=0;for(f=3054;f<=3079;f++)$[f]=0;for(f=3081;f<=3088;f++)$[f]=0;for(f=3092;f<=3101;f++)$[f]=0;for(f=3106;f<=3138;f++)$[f]=0;for(f=3146;f<=3151;f++)$[f]=0;for(f=3153;f<=3166;f++)$[f]=0;for(f=3168;f<=3172;f++)$[f]=0;for(f=3174;f<=3203;f++)$[f]=0;for(f=3294;f<=3358;f++)$[f]=0;for(f=3367;f<=3403;f++)$[f]=0;for(f=3408;f<=3416;f++)$[f]=0;for(f=3417;f<=3438;f++)$[f]=2;for(f=3441;f<=3446;f++)$[f]=2;for(f=3447;f<=3450;f++)$[f]=0;for(f=3451;f<=3459;f++)$[f]=2;for(f=3460;f<=3478;f++)$[f]=0;for(f=3554;f<=3559;f++)$[f]=0;for(f=3560;f<=3570;f++)$[f]=2;for(f=3571;f<=3581;f++)$[f]=0;for(f=3594;f<=3597;f++)$[f]=0;for(f=3601;f<=3604;f++)$[f]=0;for(f=3637;f<=3639;f++)$[f]=0;for(f=3665;f<=3667;f++)$[f]=0;for(f=3693;f<=3695;f++)$[f]=0;for(f=3701;f<=3727;f++)$[f]=0;for(f=3728;f<=3739;f++)$[f]=2;for(f=3740;f<=3751;f++)$[f]=0;for(f=3753;f<=3760;f++)$[f]=2;for(f=3761;f<=3773;f++)$[f]=0;for(f=3775;f<=3777;f++)$[f]=0;for(f=3779;f<=3781;f++)$[f]=0;for(f=3783;f<=3785;f++)$[f]=0;for(f=3788;f<=3791;f++)$[f]=0;for(f=3797;f<=3802;f++)$[f]=0;for(f=3814;f<=3816;f++)$[f]=0;for(f=3825;f<=3829;f++)$[f]=0;for(f=3832;f<=3841;f++)$[f]=0;for(f=3844;f<=3852;f++)$[f]=0;for(f=3873;f<=3885;f++)$[f]=0;for(f=3890;f<=3893;f++)$[f]=0;for(f=3907;f<=3912;f++)$[f]=0;for(f=3942;f<=3950;f++)$[f]=0;for(f=3968;f<=3970;f++)$[f]=0;for(f=3973;f<=3976;f++)$[f]=0;for(f=3986;f<=3989;f++)$[f]=0;for(f=3994;f<=3997;f++)$[f]=0;for(f=4048;f<=4051;f++)$[f]=0;for(f=4056;f<=4063;f++)$[f]=0;for(f=4093;f<=4096;f++)$[f]=0;for(f=4390;f<=4398;f++)$[f]=0;for(f=4399;f<=4413;f++)$[f]=2;for(f=4418;f<=4433;f++)$[f]=2;for(f=4455;f<=4457;f++)$[f]=2;for(f=4484;f<=4489;f++)$[f]=0;for(f=4491;f<=4554;f++)$[f]=0;for(f=4568;f<=4589;f++)$[f]=0;for(f=4652;f<=4656;f++)$[f]=0;for(f=4766;f<=4800;f++)$[f]=0;for(f=5014;f<=5016;f++)$[f]=0;for(f=5069;f<=5072;f++)$[f]=0;for(f=5105;f<=5130;f++)$[f]=0;for(f=5167;f<=5188;f++)$[f]=0;for(f=5253;f<=5259;f++)$[f]=0;for(f=5269;f<=5275;f++)$[f]=0;for(f=5292;f<=5311;f++)$[f]=0;for(f=5329;f<=5331;f++)$[f]=0;for(f=5343;f<=5349;f++)$[f]=0;for(f=5355;f<=5357;f++)$[f]=0;for(f=5387;f<=5389;f++)$[f]=0;for(f=5459;f<=5463;f++)$[f]=0;for(f=5479;f<=5482;f++)$[f]=0;for(f=5518;f<=5520;f++)$[f]=0;for(f=5530;f<=5539;f++)$[f]=0;for(f=5550;f<=5552;f++)$[f]=0;for(f=5562;f<=5583;f++)$[f]=0;for(f=5623;f<=5625;f++)$[f]=2;for(f=5631;f<=5639;f++)$[f]=0;for(f=5649;f<=5653;f++)$[f]=0;for(f=5663;f<=5680;f++)$[f]=0;for(f=5682;f<=5685;f++)$[f]=0;for(f=5875;f<=5877;f++)$[f]=0;for(f=5896;f<=5899;f++)$[f]=0;for(f=5921;f<=5940;f++)$[f]=0;for(f=6050;f<=6125;f++)$[f]=0;for(f=6244;f<=6275;f++)$[f]=0;for(f=6328;f<=6348;f++)$[f]=0;for(f=6350;f<=6356;f++)$[f]=0;for(f=6366;f<=6372;f++)$[f]=0;for(f=6381;f<=6387;f++)$[f]=0;for(f=6393;f<=6404;f++)$[f]=0;for(f=6480;f<=6483;f++)$[f]=0;for(f=6511;f<=6514;f++)$[f]=0;for(f=6579;f<=6581;f++)$[f]=0;for(f=6619;f<=6624;f++)$[f]=0;for(f=6625;f<=6627;f++)$[f]=2;for(f=6628;f<=6632;f++)$[f]=0;for(f=6634;f<=6637;f++)$[f]=0;for(f=6669;f<=6692;f++)$[f]=0;for(f=6707;f<=6709;f++)$[f]=0;for(f=6720;f<=6723;f++)$[f]=0;for(f=6732;f<=6738;f++)$[f]=0;for(f=6931;f<=6933;f++)$[f]=0;for(f=6956;f<=6959;f++)$[f]=0;for(f=7005;f<=7007;f++)$[f]=0;for(f=7057;f<=7070;f++)$[f]=2;for(f=7074;f<=7082;f++)$[f]=0;for(f=7109;f<=7118;f++)$[f]=0;for(f=7119;f<=7127;f++)$[f]=1;for(f=7374;f<=7376;f++)$[f]=0;for(f=7528;f<=7586;f++)$[f]=0;for(f=7587;f<=7645;f++)$[f]=2;for(f=7692;f<=7696;f++)$[f]=0;for(f=7755;f<=7787;f++)$[f]=0;for(f=7791;f<=7795;f++)$[f]=0;for(f=7799;f<=7801;f++)$[f]=0;for(f=7803;f<=7805;f++)$[f]=0;for(f=7825;f<=7831;f++)$[f]=0;for(f=7845;f<=7859;f++)$[f]=0;for(f=8013;f<=8032;f++)$[f]=0;for(f=8065;f<=8068;f++)$[f]=1;for(f=8518;f<=8529;f++)$[f]=2;for(f=8533;f<=8536;f++)$[f]=2;for(f=8538;f<=8540;f++)$[f]=2;for(f=8677;f<=8679;f++)$[f]=0;for(f=8836;f<=8840;f++)$[f]=0;for(f=8857;f<=8859;f++)$[f]=0;for(f=8908;f<=8910;f++)$[f]=0;for(f=9154;f<=9159;f++)$[f]=0;for(f=9205;f<=9218;f++)$[f]=0;for(f=9271;f<=9273;f++)$[f]=0;for(f=9295;f<=9297;f++)$[f]=0;for(f=9356;f<=9360;f++)$[f]=0;for(f=9404;f<=9407;f++)$[f]=0;for(f=9476;f<=9482;f++)$[f]=0;for(f=9487;f<=9494;f++)$[f]=0;for(f=9697;f<=9699;f++)$[f]=0;for(f=9821;f<=9865;f++)$[f]=0;for(f=10285;f<=10291;f++)$[f]=0;for(f=10314;f<=10317;f++)$[f]=0;for(f=10448;f<=10465;f++)$[f]=0;for(f=10731;f<=10733;f++)$[f]=0;for(f=11114;f<=11118;f++)$[f]=0;for(f=20004;f<=20032;f++)$[f]=0;for(f=20047;f<=20049;f++)$[f]=0;for(f=20062;f<=20092;f++)$[f]=0;for(f=20135;f<=20138;f++)$[f]=0;for(f=20248;f<=20258;f++)$[f]=0;for(f=20348;f<=20358;f++)$[f]=0;for(f=20436;f<=20440;f++)$[f]=0;for(f=20822;f<=20824;f++)$[f]=0;for(f=20904;f<=20932;f++)$[f]=0;for(f=20934;f<=20936;f++)$[f]=0;for(f=21004;f<=21032;f++)$[f]=0;for(f=21035;f<=21037;f++)$[f]=0;for(f=21095;f<=21097;f++)$[f]=0;for(f=21148;f<=21150;f++)$[f]=0;for(f=21207;f<=21264;f++)$[f]=0;for(f=21307;f<=21364;f++)$[f]=0;for(f=21413;f<=21423;f++)$[f]=0;for(f=21453;f<=21463;f++)$[f]=0;for(f=21473;f<=21483;f++)$[f]=0;for(f=21780;f<=21782;f++)$[f]=0;for(f=21891;f<=21894;f++)$[f]=0;for(f=21896;f<=21899;f++)$[f]=0;for(f=22171;f<=22177;f++)$[f]=0;for(f=22181;f<=22187;f++)$[f]=0;for(f=22191;f<=22197;f++)$[f]=0;for(f=22207;f<=22222;f++)$[f]=0;for(f=22229;f<=22232;f++)$[f]=0;for(f=22234;f<=22236;f++)$[f]=0;for(f=22243;f<=22250;f++)$[f]=0;for(f=22262;f<=22265;f++)$[f]=0;for(f=22307;f<=22322;f++)$[f]=0;for(f=22348;f<=22357;f++)$[f]=0;for(f=22407;f<=22422;f++)$[f]=0;for(f=22462;f<=22465;f++)$[f]=0;for(f=22521;f<=22525;f++)$[f]=0;for(f=22607;f<=22622;f++)$[f]=0;for(f=22641;f<=22646;f++)$[f]=0;for(f=22648;f<=22657;f++)$[f]=0;for(f=22707;f<=22722;f++)$[f]=0;for(f=22762;f<=22765;f++)$[f]=0;for(f=22807;f<=22822;f++)$[f]=0;for(f=22991;f<=22994;f++)$[f]=0;for(f=23028;f<=23038;f++)$[f]=0;for(f=23301;f<=23333;f++)$[f]=2;for(f=23830;f<=23853;f++)$[f]=0;for(f=23866;f<=23872;f++)$[f]=0;for(f=23877;f<=23884;f++)$[f]=0;for(f=23886;f<=23894;f++)$[f]=0;for(f=23946;f<=23948;f++)$[f]=0;for(f=24311;f<=24313;f++)$[f]=0;for(f=24342;f<=24347;f++)$[f]=0;for(f=24370;f<=24374;f++)$[f]=10;for(f=24375;f<=24381;f++)$[f]=0;for(f=24718;f<=24721;f++)$[f]=0;for(f=24817;f<=24821;f++)$[f]=0;for(f=24877;f<=24882;f++)$[f]=0;for(f=24891;f<=24893;f++)$[f]=0;for(f=25391;f<=25395;f++)$[f]=0;for(f=25828;f<=25838;f++)$[f]=0;for(f=26191;f<=26195;f++)$[f]=0;for(f=26391;f<=26393;f++)$[f]=0;for(f=26701;f<=26722;f++)$[f]=0;for(f=26729;f<=26799;f++)$[f]=2;for(f=26801;f<=26803;f++)$[f]=2;for(f=26811;f<=26813;f++)$[f]=2;for(f=26847;f<=26870;f++)$[f]=2;for(f=26891;f<=26899;f++)$[f]=0;for(f=26901;f<=26923;f++)$[f]=0;for(f=26929;f<=26946;f++)$[f]=0;for(f=26948;f<=26998;f++)$[f]=0;for(f=27037;f<=27040;f++)$[f]=0;for(f=27205;f<=27232;f++)$[f]=0;for(f=27258;f<=27260;f++)$[f]=0;for(f=27391;f<=27398;f++)$[f]=0;for(f=27561;f<=27564;f++)$[f]=0;for(f=27571;f<=27574;f++)$[f]=0;for(f=27581;f<=27584;f++)$[f]=0;for(f=27591;f<=27594;f++)$[f]=0;for(f=27700;f<=27707;f++)$[f]=0;for(f=28191;f<=28193;f++)$[f]=0;for(f=28348;f<=28358;f++)$[f]=0;for(f=28402;f<=28432;f++)$[f]=0;for(f=28462;f<=28492;f++)$[f]=0;for(f=29118;f<=29122;f++)$[f]=0;for(f=29168;f<=29172;f++)$[f]=0;for(f=29177;f<=29185;f++)$[f]=0;for(f=29187;f<=29195;f++)$[f]=0;for(f=29900;f<=29903;f++)$[f]=0;for(f=30161;f<=30179;f++)$[f]=0;for(f=30491;f<=30494;f++)$[f]=0;for(f=30729;f<=30732;f++)$[f]=0;for(f=31251;f<=31259;f++)$[f]=0;for(f=31265;f<=31268;f++)$[f]=0;for(f=31275;f<=31279;f++)$[f]=0;for(f=31281;f<=31297;f++)$[f]=0;for(f=31461;f<=31469;f++)$[f]=0;for(f=31491;f<=31495;f++)$[f]=0;for(f=31917;f<=31922;f++)$[f]=0;for(f=31965;f<=32e3;f++)$[f]=0;for(f=32001;f<=32003;f++)$[f]=2;for(f=32005;f<=32031;f++)$[f]=2;for(f=32033;f<=32060;f++)$[f]=2;for(f=32064;f<=32067;f++)$[f]=2;for(f=32074;f<=32077;f++)$[f]=2;for(f=32081;f<=32086;f++)$[f]=0;for(f=32107;f<=32130;f++)$[f]=0;for(f=32133;f<=32159;f++)$[f]=0;for(f=32164;f<=32167;f++)$[f]=2;for(f=32180;f<=32199;f++)$[f]=0;for(f=32201;f<=32260;f++)$[f]=0;for(f=32301;f<=32360;f++)$[f]=0;for(f=32401;f<=32460;f++)$[f]=0;for(f=32501;f<=32560;f++)$[f]=0;for(f=32601;f<=32662;f++)$[f]=0;for(f=32664;f<=32667;f++)$[f]=2;for(f=32701;f<=32761;f++)$[f]=0;for(f=53001;f<=53004;f++)$[f]=0;for(f=53008;f<=53019;f++)$[f]=0;for(f=53021;f<=53032;f++)$[f]=0;for(f=53034;f<=53037;f++)$[f]=0;for(f=53042;f<=53046;f++)$[f]=0;for(f=53074;f<=53080;f++)$[f]=0;for(f=54001;f<=54004;f++)$[f]=0;for(f=54008;f<=54019;f++)$[f]=0;for(f=54021;f<=54032;f++)$[f]=0;for(f=54034;f<=54037;f++)$[f]=0;for(f=54042;f<=54046;f++)$[f]=0;for(f=54048;f<=54053;f++)$[f]=0;for(f=54074;f<=54080;f++)$[f]=0;for(f=54098;f<=54101;f++)$[f]=0;for(f=102001;f<=102040;f++)$[f]=0;for(f=102042;f<=102063;f++)$[f]=0;for(f=102065;f<=102067;f++)$[f]=0;for(f=102070;f<=102117;f++)$[f]=0;for(f=102122;f<=102216;f++)$[f]=0;for(f=102221;f<=102377;f++)$[f]=0;for(f=102382;f<=102388;f++)$[f]=0;for(f=102389;f<=102398;f++)$[f]=2;for(f=102399;f<=102444;f++)$[f]=0;for(f=102445;f<=102447;f++)$[f]=2;for(f=102448;f<=102458;f++)$[f]=0;for(f=102459;f<=102468;f++)$[f]=2;for(f=102469;f<=102499;f++)$[f]=0;for(f=102500;f<=102519;f++)$[f]=1;for(f=102520;f<=102524;f++)$[f]=0;for(f=102525;f<=102529;f++)$[f]=2;for(f=102530;f<=102588;f++)$[f]=0;for(f=102590;f<=102598;f++)$[f]=0;for(f=102601;f<=102603;f++)$[f]=0;for(f=102605;f<=102628;f++)$[f]=0;for(f=102629;f<=102646;f++)$[f]=2;for(f=102648;f<=102700;f++)$[f]=2;for(f=102701;f<=102703;f++)$[f]=0;for(f=102707;f<=102730;f++)$[f]=2;for(f=102733;f<=102758;f++)$[f]=2;for(f=102767;f<=102900;f++)$[f]=0;for(f=102901;f<=102933;f++)$[f]=2;for(f=102934;f<=102950;f++)$[f]=13;for(f=102951;f<=102963;f++)$[f]=0;for(f=102965;f<=102969;f++)$[f]=0;for(f=102971;f<=102973;f++)$[f]=0;for(f=102975;f<=102989;f++)$[f]=0;for(f=102990;f<=102992;f++)$[f]=1;for(f=102997;f<=103002;f++)$[f]=0;for(f=103003;f<=103008;f++)$[f]=2;for(f=103009;f<=103011;f++)$[f]=0;for(f=103012;f<=103014;f++)$[f]=2;for(f=103019;f<=103021;f++)$[f]=0;for(f=103022;f<=103024;f++)$[f]=2;for(f=103029;f<=103031;f++)$[f]=0;for(f=103032;f<=103034;f++)$[f]=2;for(f=103065;f<=103068;f++)$[f]=0;for(f=103074;f<=103076;f++)$[f]=0;for(f=103077;f<=103079;f++)$[f]=1;for(f=103080;f<=103082;f++)$[f]=0;for(f=103083;f<=103085;f++)$[f]=2;for(f=103090;f<=103093;f++)$[f]=0;for(f=103097;f<=103099;f++)$[f]=0;for(f=103100;f<=103102;f++)$[f]=2;for(f=103107;f<=103109;f++)$[f]=0;for(f=103110;f<=103112;f++)$[f]=2;for(f=103113;f<=103116;f++)$[f]=0;for(f=103117;f<=103120;f++)$[f]=2;for(f=103153;f<=103157;f++)$[f]=0;for(f=103158;f<=103162;f++)$[f]=2;for(f=103163;f<=103165;f++)$[f]=0;for(f=103166;f<=103168;f++)$[f]=1;for(f=103169;f<=103171;f++)$[f]=2;for(f=103186;f<=103188;f++)$[f]=0;for(f=103189;f<=103191;f++)$[f]=2;for(f=103192;f<=103195;f++)$[f]=0;for(f=103196;f<=103199;f++)$[f]=2;for(f=103200;f<=103224;f++)$[f]=0;for(f=103225;f<=103227;f++)$[f]=1;for(f=103232;f<=103237;f++)$[f]=0;for(f=103238;f<=103243;f++)$[f]=2;for(f=103244;f<=103246;f++)$[f]=0;for(f=103247;f<=103249;f++)$[f]=2;for(f=103254;f<=103256;f++)$[f]=0;for(f=103257;f<=103259;f++)$[f]=2;for(f=103264;f<=103266;f++)$[f]=0;for(f=103267;f<=103269;f++)$[f]=2;for(f=103300;f<=103375;f++)$[f]=0;for(f=103381;f<=103383;f++)$[f]=0;for(f=103384;f<=103386;f++)$[f]=1;for(f=103387;f<=103389;f++)$[f]=0;for(f=103390;f<=103392;f++)$[f]=2;for(f=103397;f<=103399;f++)$[f]=0;for(f=103400;f<=103471;f++)$[f]=2;for(f=103476;f<=103478;f++)$[f]=0;for(f=103479;f<=103481;f++)$[f]=2;for(f=103486;f<=103488;f++)$[f]=0;for(f=103489;f<=103491;f++)$[f]=2;for(f=103492;f<=103495;f++)$[f]=0;for(f=103496;f<=103499;f++)$[f]=2;for(f=103528;f<=103543;f++)$[f]=0;for(f=103544;f<=103548;f++)$[f]=2;for(f=103549;f<=103551;f++)$[f]=0;for(f=103552;f<=103554;f++)$[f]=1;for(f=103555;f<=103557;f++)$[f]=2;for(f=103558;f<=103560;f++)$[f]=0;for(f=103571;f<=103573;f++)$[f]=0;for(f=103574;f<=103576;f++)$[f]=2;for(f=103577;f<=103580;f++)$[f]=0;for(f=103581;f<=103583;f++)$[f]=2;for(f=103595;f<=103694;f++)$[f]=0;for(f=103696;f<=103699;f++)$[f]=0;for(f=103700;f<=103793;f++)$[f]=2;for(f=103794;f<=103890;f++)$[f]=0;for(f=103891;f<=103896;f++)$[f]=2;for(f=103900;f<=103971;f++)$[f]=2;for(f=103972;f<=103977;f++)$[f]=0;for(f=112e3;f<=112101;f++)$[f]=0;const bK=[102100,102113,3857,3785,900913],Q0e=[104905,104971],X0e=[4326,...bK,...Q0e],u1=[-20037508342788905e-9,20037508342788905e-9],ZF=[-20037508342787e-6,20037508342787e-6],d3={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:u1,origin:ZF,dx:1e-5},_K={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:u1,origin:ZF,dx:1e-5},102100:d3,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:u1,origin:ZF,dx:1e-5},3857:d3,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:d3};function ei(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const i=e.wkid,r=t.wkid;if(i!=null||r!=null){if(i===r||Mn(e)&&Mn(t))return!0;const o=e.latestWkid;if(o!=null&&r===o)return!0;const a=t.latestWkid;return a!=null&&i===a}let s,n;return e.wkt2&&t.wkt2?(s=e.wkt2,n=t.wkt2):e.wkt&&t.wkt&&(s=e.wkt,n=t.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function qr(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&_K[t]||null}function Tv(e){if(!e)return;const{wkid:t,vcsWkid:i}=e;if(t)return i?JSON.stringify({wkid:t,vcsWkid:i}):String(t);const r=e.wkt||e.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function om(e){if(!cs(e))return!1;const{wkid:t}=e;if(t)return $[t]==null;const i=e.wkt2||e.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function K0e(e){return!(SK(e)||TK(e))}function zf(e){return(e==null?void 0:e.wkid)===4326}function zHe(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function jU(e){return(e==null?void 0:e.wkid)===Vf.CGCS2000}function Mn(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&bK.includes(t)}function ewe(e){return(e==null?void 0:e.wkid)===32662}function qA(e){return e===Vf.GCSMARS2000||e===Vf.GCSMARS2000_SPHERE}function SK(e){return qA(e==null?void 0:e.wkid)}function GA(e){return e===Vf.GCSMOON2000}function TK(e){return GA(e==null?void 0:e.wkid)}function xK(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&X0e.includes(t)}function cs(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const uM={wkid:4326,wkt:ga(_K[4326].wkTemplate,{Central_Meridian:"0.0"})},$K={wkid:102100,latestWkid:3857},twe={wkid:32662};function y4(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const iwe=y4(Kt),g4=y4(ml),v4=y4(dh),rwe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Kt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},swe=g4.wkt.toUpperCase(),nwe=v4.wkt.toUpperCase();function owe(e){if(e!=null&&cs(e)){const t=e.wkid,i=e.wkt2??e.wkt;if(qA(t))return ml;const r=i==null?void 0:i.toUpperCase();if(i&&r===swe)return ml;if(GA(t)||r&&r===nwe)return dh}return Kt}function UHe(e){return qA(e)?ml:GA(e)?dh:Kt}function cM(e){return ei(e,iwe)}function ph(e){return cM(e)||ei(e,g4)||ei(e,v4)}const EK=39.37,awe=Kt.radius*Math.PI/200,MK=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,xv=$,AK=/UNIT\[([^\]]+)]/i,lwe=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),uwe=Si()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Oo=e=>e*e,vc=e=>e*e*e,c1={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Oo(.001)},"square-centimeters":{inBaseUnits:Oo(.01)},"square-decimeters":{inBaseUnits:Oo(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Oo(1e3)},"square-inches":{inBaseUnits:Oo(.0254)},"square-feet":{inBaseUnits:Oo(.3048)},"square-yards":{inBaseUnits:Oo(.9144)},"square-miles":{inBaseUnits:Oo(1609.344)},"square-nautical-miles":{inBaseUnits:Oo(1852)},"square-us-feet":{inBaseUnits:Oo(1200/3937)},acres:{inBaseUnits:.0015625*Oo(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*vc(.001)},"cubic-centimeters":{inBaseUnits:1e3*vc(.01)},"cubic-decimeters":{inBaseUnits:1e3*vc(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*vc(1e3)},"cubic-inches":{inBaseUnits:1e3*vc(.0254)},"cubic-feet":{inBaseUnits:1e3*vc(.3048)},"cubic-yards":{inBaseUnits:1e3*vc(.9144)},"cubic-miles":{inBaseUnits:1e3*vc(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},cwe=(()=>{const e={};for(const t in c1)for(const i in c1[t].units)e[i]=t;return e})();function dwe(e,t,i){return e*c1[i].units[t].inBaseUnits}function hwe(e,t,i){return e/c1[i].units[t].inBaseUnits}const IK=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],pwe=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function Uf(e){const t=cwe[e];if(!t)throw new Error("unknown type");return t}function VU(e,t=null){return t=t||Uf(e),c1[t].baseUnit===e}function Ye(e,t,i){if(t===i)return e;const r=Uf(t);if(r!==Uf(i))throw new Error("incompatible units");const s=VU(t,r)?e:dwe(e,t,r);return VU(i,r)?s:hwe(s,i,r)}function qHe(e,t,i,r=!1){if(!r&&om(t))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=xh(t);return s!==i&&(e=s?Ye(e,s,i):Ye(e*=$o(t),"meters",i)),e}function GHe(e,t,i,r=!1){if(!r&&om(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=xh(i);return t!==s&&(e=s?Ye(e,t,s):Ye(e,t,"meters")/$o(i)),e}function fwe(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function BHe(e){return fwe(e)}function HHe(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function CK(e,t){const i=Ye(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function OK(e,t){const i=Ye(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function RK(e,t){const i=Ye(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function FK(e,t){const i=Ye(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function mwe(e,t){const i=Ye(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function ywe(e,t){const i=Ye(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function gwe(e,t,i){return Ye(e,t,"meters")/(i*Math.PI/180)}function w4(e){return uwe.fromJSON(e.toLowerCase())||null}function $v(e){if(e!=null&&!K0e(e))return 1;const t=$o(e);return t>1e5?1:t}function NK(e){return $o(e)>=owe(e).metersPerDegree?"meters":xh(e)}function $o(e,t=Kt.metersPerDegree){return vwe(e,!0)??t}function vwe(e,t=!1){const i=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let s=null;if(i){if(qA(i))return ml.metersPerDegree;if(GA(i))return dh.metersPerDegree;s=xv.values[xv[i]],!s&&t&&lwe.has(i)&&(s=awe)}else r&&(PK(r)?s=zU(MK.exec(r),s):kK(r)&&(s=zU(AK.exec(r),s)));return s}function WHe(e){return om(e)?1:$o(e)}function zU(e,t){return e!=null&&e[1]?LK(e[1]):t}function LK(e){return parseFloat(e.split(",")[1])}function xh(e){const t=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let r=null;if(t)r=xv.units[xv[t]];else if(i){const s=PK(i)?MK:kK(i)?AK:null;if(s){const n=s.exec(i);n!=null&&n[1]&&(r=bwe(n[1]))}}return r!=null?w4(r):null}function ZHe(e){const t=xh(e);return t!=null&&IK.includes(t)?t:null}function JHe(e){const t=NK(e);return t!=null&&IK.includes(t)?t:null}function YHe(e){const t=xh(e);return t==null?null:pwe.get(t)}function kK(e){return/^GEOCCS/i.test(e)}function PK(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const wwe=1e-7;function bwe(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let i=t==null?void 0:t[1];if(!i||!w4(i)){const r=LK(e);i=null;const s=xv.values;for(let n=0;n<s.length;++n)if(Math.abs(r-s[n])<wwe){i=xv.units[n];break}}return i}function QHe(e){const t=xh(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const _we={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Swe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Twe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},xwe=Si()(_we),$we=Si()(Swe),XHe=Si()(Twe);var Aa;let ct=Aa=class extends P{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return Aa.WebMercator;if((e==null?void 0:e.wkid)===4326)return Aa.WGS84;const t=new Aa;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return zf(this)}get isWebMercator(){return Mn(this)}get isGeographic(){return om(this)}get isWrappable(){return xK(this)}get metersPerUnit(){return $o(this)}get unit(){return xh(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Aa.WGS84)return new Aa(uM);if(this===Aa.WebMercator)return new Aa($K);const e=new Aa;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=R(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||r?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):i?s.id===t&&s.referenceServiceName===i:s.id===t}return ei(this,e)}toJSON(e){return this.write(void 0,e)}};ct.GCS_NAD_1927=null,ct.WGS84=null,ct.WebMercator=null,ct.PlateCarree=null,l([d({readOnly:!0})],ct.prototype,"isWGS84",null),l([d({readOnly:!0})],ct.prototype,"isWebMercator",null),l([d({readOnly:!0})],ct.prototype,"isGeographic",null),l([d({readOnly:!0})],ct.prototype,"isWrappable",null),l([d({type:Le,json:{write:!0}})],ct.prototype,"latestWkid",void 0),l([d({readOnly:!0})],ct.prototype,"metersPerUnit",null),l([d({readOnly:!0})],ct.prototype,"unit",null),l([d({type:Le,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],ct.prototype,"wkid",void 0),l([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],ct.prototype,"wkt",void 0),l([J("wkt"),J("web-scene","wkt")],ct.prototype,"writeWkt",null),l([d({type:String,json:{write:!1}})],ct.prototype,"wkt2",void 0),l([d({type:Le,json:{write:!0}})],ct.prototype,"vcsWkid",void 0),l([d({type:Le,json:{write:!0}})],ct.prototype,"latestVcsWkid",void 0),l([d()],ct.prototype,"imageCoordinateSystem",void 0),ct=Aa=l([x("esri.geometry.SpatialReference")],ct),ct.prototype.toJSON.isDefaultToJSON=!0,ct.GCS_NAD_1927=se.freeze(new ct({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),ct.WGS84=se.freeze(new ct(uM)),ct.WebMercator=se.freeze(new ct($K)),ct.PlateCarree=se.freeze(new ct(twe));const we=ct;let Ia=class extends P{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=we.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,i){if(t instanceof we)return t;if(t!=null){const r=new we;return r.read(t,i),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,i){this.cache[t]=i}};l([d()],Ia.prototype,"type",void 0),l([d({readOnly:!0})],Ia.prototype,"cache",null),l([d({readOnly:!0})],Ia.prototype,"extent",null),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ia.prototype,"hasM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ia.prototype,"hasZ",void 0),l([d({type:we,json:{write:!0},value:we.WGS84})],Ia.prototype,"spatialReference",void 0),l([W("spatialReference")],Ia.prototype,"readSpatialReference",null),Ia=l([x("esri.geometry.Geometry")],Ia);const nc=Ia;function Ev(e){if(e&&typeof e=="object"&&"type"in e&&e.type==="mesh")throw new M("Mesh geometries are not supported for this operation")}function Ewe(e){e.forEach(Ev)}const Mwe=57.29577951308232,Awe=.017453292519943;function UU(e){return e*Mwe}function qU(e){return e*Awe}function eWe(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Kt.radius))}function JF(e){return e.wkid!=null||e.wkt!=null}const h3=[0,0];function dM(e,t,i,r,s){const n=e,o=s;if(o.spatialReference=i,"x"in n&&"x"in o)[o.x,o.y]=t(n.x,n.y,h3,r);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=t(n.xmin,n.ymin,h3,r),[o.xmax,o.ymax]=t(n.xmax,n.ymax,h3,r);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const a="paths"in n?n.paths:n.rings,u=[];let c;for(let h=0;h<a.length;h++){const p=a[h];c=[],u.push(c);for(let m=0;m<p.length;m++)c.push(t(p[m][0],p[m][1],[0,0],r)),p[m].length>2&&c[m].push(p[m][2]),p[m].length>3&&c[m].push(p[m][3])}"paths"in o?o.paths=u:o.rings=u}else if("points"in n&&"points"in o){const a=n.points,u=[];for(let c=0;c<a.length;c++)u[c]=t(a[c][0],a[c][1],[0,0],r),a[c].length>2&&u[c].push(a[c][2]),a[c].length>3&&u[c].push(a[c][3]);o.points=u}return s}function Mg(e,t){const i=e&&(JF(e)?e:e.spatialReference),r=t&&(JF(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!ei(r,i)||Mn(r)&&zf(i)||Mn(i)&&zf(r))}function BA(e,t){if(e==null)return null;const i=e.spatialReference,r=t&&(JF(t)?t:t.spatialReference);return Mg(i,r)?ei(i,r)?R(e):Mn(r)?dM(e,Xp,we.WebMercator,!1,R(e)):zf(r)?dM(e,vS,we.WGS84,!1,R(e)):null:null}function Xp(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=qU(t);return i[0]=qU(e)*Kt.radius,i[1]=Kt.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function vS(e,t,i=[0,0],r=!1){if(e===u1[0])i[0]=-180;else if(e===u1[1])i[0]=180;else{const s=UU(e/Kt.radius);i[0]=r?s:s-360*Math.floor((s+180)/360)}return i[1]=UU(Math.PI/2-2*Math.atan(Math.exp(-t/Kt.radius))),i}function qu(e,t=!1,i=R(e)){return Ev(e),Ev(i),dM(e,Xp,we.WebMercator,t,i)}function og(e,t=!1,i=R(e)){return Ev(e),Ev(i),dM(e,vS,we.WGS84,t,i)}function DK(e,t){const i=e.x-t.x,r=e.y-t.y,s=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(i*i+r*r+s*s)}function Iwe(e){var t;return((t=jK(e,VK))==null?void 0:t[0])??null}function Cwe(e){var t;return((t=jK(e,VK))==null?void 0:t[1])??null}function jK({x:e,y:t,spatialReference:i},r=[0,0]){if(i){if(Mn(i))return vS(e,t,r);if(om(i))return r[0]=e,r[1]=t,r}return null}const VK=[0,0];var Ix;const p3=[0,0];function GU(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Jr=Ix=class extends nc{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",se.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,r,s){let n;if(Array.isArray(e))n=e,s=t,e=n[0],t=n[1],i=n[2],r=n[3];else if(e&&typeof e=="object"){if(n=e,e=n.x!=null?n.x:n.longitude,t=n.y!=null?n.y:n.latitude,i=n.z,r=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new we(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)q.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)q.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&(s!=null&&s.isWebMercator)){const a=Xp(n.longitude,n.latitude,p3);e=a[0],t=a[1]}}}else GU(i)?(s=i,i=null):GU(r)&&(s=r,r=null);const o={x:e,y:t};return o.x==null&&o.y!=null?q.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&q.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return Cwe(this)}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Xp(i,e,p3)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return Iwe(this)}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",Xp(e,t,p3)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Ix;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Ix.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:i,z:r,m:s,spatialReference:n}=this,{z:o,m:a}=e;let{x:u,y:c,spatialReference:h}=e;if(!n.equals(h))if(n.isWebMercator&&h.isWGS84)[u,c]=Xp(u,c),h=n;else{if(!n.isWGS84||!h.isWebMercator)return!1;[u,c]=vS(u,c),h=n}return t===u&&i===c&&r===o&&s===a&&n.wkid===h.wkid}offset(e,t,i){return this.x+=e,this.y+=t,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=qr(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,s=2*r;let n;return t>r?(n=Math.ceil(Math.abs(t-r)/s),t-=n*s):t<i&&(n=Math.ceil(Math.abs(t-i)/s),t+=n*s),this._set("x",t),this}distance(e){return DK(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};l([d({readOnly:!0})],Jr.prototype,"cache",null),l([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Jr.prototype,"hasM",null),l([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Jr.prototype,"hasZ",null),l([d({type:Number})],Jr.prototype,"latitude",null),l([d({type:Number})],Jr.prototype,"longitude",null),l([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),ke(e=>isNaN(e)?e:as(e))],Jr.prototype,"x",void 0),l([J("x")],Jr.prototype,"writeX",null),l([W("x")],Jr.prototype,"readX",null),l([d({type:Number,json:{write:!0}})],Jr.prototype,"y",void 0),l([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Jr.prototype,"z",void 0),l([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Jr.prototype,"m",void 0),Jr=Ix=l([x("esri.geometry.Point")],Jr),Jr.prototype.toJSON.isDefaultToJSON=!0;const Se=Jr;let Ca=class extends _e.ClonableMixin(P){constructor(...t){super(...t),this.position=new Se([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new OX}normalizeCtorArgs(t,i,r,s){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const n={position:t};return i!=null&&(n.heading=i),r!=null&&(n.tilt=r),s!=null&&(n.fov=s),n}return t}writePosition(t,i,r,s){const n=t.clone();n.x=as(t.x||0),n.y=as(t.y||0),n.z=t.hasZ?as(t.z||0):t.z,i[r]=n.write({},s)}readPosition(t,i){const r=new Se;return r.read(t,i),r.x=as(r.x||0),r.y=as(r.y||0),r.z=r.hasZ?as(r.z||0):r.z,r}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};l([d({type:Se,json:{write:{isRequired:!0}}})],Ca.prototype,"position",void 0),l([J("position")],Ca.prototype,"writePosition",null),l([W("position")],Ca.prototype,"readPosition",null),l([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ke(e=>kX.normalize(as(e)))],Ca.prototype,"heading",void 0),l([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ke(e=>Ws(as(e),-180,180))],Ca.prototype,"tilt",void 0),l([d({type:Number,nonNullable:!0,json:{default:55,write:!0}}),ke(e=>Ws(as(e,55),1,170))],Ca.prototype,"fov",void 0),l([d({type:OX,nonNullable:!0,json:{read:!1,write:!1}})],Ca.prototype,"layout",void 0),Ca=l([x("esri.Camera")],Ca);const Owe=Ca,f3=[0,0];function wS(e,t){return t!=null&&ss(e,t.x,t.y,t.z)}function iWe(e,t){var i;if(!((i=t.points)!=null&&i.length))return!1;for(const r of t.points)if(!Mv(e,r))return!1;return!0}function Rwe(e,t){const{xmin:i,ymin:r,zmin:s,xmax:n,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?ss(e,i,r,s)&&ss(e,i,o,s)&&ss(e,n,o,s)&&ss(e,n,r,s)&&ss(e,i,r,a)&&ss(e,i,o,a)&&ss(e,n,o,a)&&ss(e,n,r,a):ss(e,i,r)&&ss(e,i,o)&&ss(e,n,o)&&ss(e,n,r)}function Mv(e,t){return ss(e,t[0],t[1])}function Fwe(e,t){return ss(e,t[0],t[1],t[2])}function ss(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function b4(e,t){return f3[1]=t.y,f3[0]=t.x,Nwe(e,f3)}function Nwe(e,t){return _4(e.rings,t)}function _4(e,t){if(!e)return!1;if(Lwe(e))return BU(!1,e,t);let i=!1;for(let r=0,s=e.length;r<s;r++)i=BU(i,e[r],t);return i}function Lwe(e){return!Array.isArray(e[0][0])}function BU(e,t,i){const[r,s]=i;let n=e,o=0;for(let a=0,u=t.length;a<u;a++){o++,o===u&&(o=0);const[c,h]=t[a],[p,m]=t[o];(h<s&&m>=s||m<s&&h>=s)&&c+(s-h)/(m-h)*(p-c)<r&&(n=!n)}return n}function kwe(e,t){return wS(e,t)}function Pwe(e,t){const i=e.hasZ&&t.hasZ;let r,s,n;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1}return!0}function Dwe(e,t){const{points:i,hasZ:r}=t,s=r?Fwe:Mv;for(const n of i)if(s(e,n))return!0;return!1}const qf=[0,0],Gf=[0,0],Bf=[0,0],Hf=[0,0],jwe=[qf,Gf,Bf,Hf],zK=[[Bf,qf],[qf,Gf],[Gf,Hf],[Hf,Bf]];function Vwe(e,t){return zwe(e,t.rings)}function zwe(e,t){qf[0]=e.xmin,qf[1]=e.ymax,Gf[0]=e.xmax,Gf[1]=e.ymax,Bf[0]=e.xmin,Bf[1]=e.ymin,Hf[0]=e.xmax,Hf[1]=e.ymin;for(const i of jwe)if(_4(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(Mv(e,r))return!0;for(let s=1;s<i.length;s++){const n=i[s];if(Mv(e,n)||UK(r,n,zK))return!0;r=n}}return!1}function Uwe(e,t){qf[0]=e.xmin,qf[1]=e.ymax,Gf[0]=e.xmax,Gf[1]=e.ymax,Bf[0]=e.xmin,Bf[1]=e.ymin,Hf[0]=e.xmax,Hf[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(Mv(e,s))return!0;for(let n=1;n<r.length;n++){const o=r[n];if(Mv(e,o)||UK(s,o,zK))return!0;s=o}}return!1}const Qi=[0,0];function qwe(e){for(let t=0;t<e.length;t++){const i=e[t];for(let s=0;s<i.length-1;s++){const n=i[s],o=i[s+1];for(let a=t+1;a<e.length;a++)for(let u=0;u<e[a].length-1;u++){const c=e[a][u],h=e[a][u+1];if(YF(n,o,c,h,Qi)&&!(Qi[0]===n[0]&&Qi[1]===n[1]||Qi[0]===c[0]&&Qi[1]===c[1]||Qi[0]===o[0]&&Qi[1]===o[1]||Qi[0]===h[0]&&Qi[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let n=r-1;s===0&&(n=r-2);const o=i[s],a=i[s+1];for(let u=s+2;u<n;u++){const c=i[u],h=i[u+1];if(YF(o,a,c,h,Qi)&&!(Qi[0]===o[0]&&Qi[1]===o[1]||Qi[0]===c[0]&&Qi[1]===c[1]||Qi[0]===a[0]&&Qi[1]===a[1]||Qi[0]===h[0]&&Qi[1]===h[1]))return!0}}}return!1}function UK(e,t,i){for(let r=0;r<i.length;r++)if(YF(e,t,i[r][0],i[r][1]))return!0;return!1}function YF(e,t,i,r,s){const[n,o]=e,[a,u]=t,[c,h]=i,[p,m]=r,y=p-c,g=n-c,v=a-n,b=m-h,w=o-h,_=u-o,S=b*v-y*_;if(S===0)return!1;const T=(y*w-b*g)/S,E=(v*w-_*g)/S;return T>=0&&T<=1&&E>=0&&E<=1&&(s&&(s[0]=n+T*(a-n),s[1]=o+T*(u-o)),!0)}function Gwe(e){switch(e){case"esriGeometryEnvelope":case"extent":return Pwe;case"esriGeometryMultipoint":case"multipoint":return Dwe;case"esriGeometryPoint":case"point":return kwe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Vwe;case"esriGeometryPolyline":case"polyline":return Uwe}}var Po;function Bwe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function wc(e,t,i){return t==null?i:i==null?t:e(t,i)}let Pi=Po=class extends nc{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,s){return Bwe(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?we.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:s??we.WGS84}}static fromPoint(e){return new Po({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Se({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Po;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Mg(t,i)&&(e=t.isWebMercator?qu(e):og(e,!0)),e.type==="point"?wS(this,e):e.type==="extent"&&Rwe(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Mg(t,i)&&(e=t.isWebMercator?qu(e):og(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!ei(t,i)&&Mg(t,i)&&(e=t.isWebMercator?qu(e):og(e,!0)),Gwe(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=wc(Math.min,this.zmin,e.zmin),this.zmax=wc(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=wc(Math.min,this.mmin,e.mmin),this.mmax=wc(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=wc(Math.max,this.zmin,e.zmin),this.zmax=wc(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=wc(Math.max,this.mmin,e.mmin),this.mmax=wc(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=qr(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?og(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=m3(r.x,e).x),this.spatialReference=new we(ga((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,s=this.xmin,n=this.xmax;return s>=i&&s<=r&&n>=i&&n<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const s=i??qr(r);if(s==null)return this;const n=this._getParts(s).map(u=>u.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return n;let o=!0,a=!0;return n.forEach(u=>{u.hasZ||(o=!1),u.hasM||(a=!1)}),{rings:n.map(u=>{const c=[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]];if(o){const h=(u.zmax-u.zmin)/2;for(let p=0;p<c.length;p++)c[p].push(h)}if(a){const h=(u.mmax-u.mmin)/2;for(let p=0;p<c.length;p++)c[p].push(h)}return c}),hasZ:o,hasM:a,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:n,spatialReference:o}=this,a=this.width,u=this.xmin,c=this.xmax;let h;e=e||qr(o);const[p,m]=e.valid;h=m3(this.xmin,e);const y=h.x,g=h.frameId;h=m3(this.xmax,e);const v=h.x,b=h.frameId,w=y===v&&a>0;if(a>2*m){const _=new Po(u<c?y:v,s,m,n,o),S=new Po(p,s,u<c?v:y,n,o),T=new Po(0,s,m,n,o),E=new Po(p,s,0,n,o),A=[],C=[];_.contains(T)&&A.push(g),_.contains(E)&&C.push(g),S.contains(T)&&A.push(b),S.contains(E)&&C.push(b);for(let O=g+1;O<b;O++)A.push(O),C.push(O);t.push({extent:_,frameIds:[g]},{extent:S,frameIds:[b]},{extent:T,frameIds:A},{extent:E,frameIds:C})}else y>v||w?t.push({extent:new Po(y,s,m,n,o),frameIds:[g]},{extent:new Po(p,s,v,n,o),frameIds:[b]}):t.push({extent:new Po(y,s,v,n,o),frameIds:[g]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(s)}return t}};function m3(e,t){const[i,r]=t.valid,s=2*r;let n,o=0;return e>r?(n=Math.ceil(Math.abs(e-r)/s),e-=n*s,o=n):e<i&&(n=Math.ceil(Math.abs(e-i)/s),e+=n*s,o=-n),{x:e,frameId:o}}l([d({readOnly:!0})],Pi.prototype,"cache",null),l([d({readOnly:!0})],Pi.prototype,"center",null),l([d({readOnly:!0})],Pi.prototype,"extent",null),l([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Pi.prototype,"hasM",null),l([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Pi.prototype,"hasZ",null),l([d({readOnly:!0})],Pi.prototype,"height",null),l([d({readOnly:!0})],Pi.prototype,"width",null),l([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Pi.prototype,"xmin",void 0),l([d({type:Number,json:{write:!0}})],Pi.prototype,"ymin",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Pi.prototype,"mmin",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Pi.prototype,"zmin",void 0),l([d({type:Number,json:{write:!0}})],Pi.prototype,"xmax",void 0),l([d({type:Number,json:{write:!0}})],Pi.prototype,"ymax",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Pi.prototype,"mmax",void 0),l([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Pi.prototype,"zmax",void 0),Pi=Po=l([x("esri.geometry.Extent")],Pi),Pi.prototype.toJSON.isDefaultToJSON=!0;const gt=Pi;function Av(e,t,i=!1){let{hasM:r,hasZ:s}=e;Array.isArray(t)?t.length!==4||r||s?t.length===3&&i&&!r?(s=!0,r=!1):t.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=r}var QF;function HU(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function Hwe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Rc=QF=class extends nc{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var s;if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):Hwe(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=(s=i.points)==null?void 0:s[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new gt,i=this.hasZ,r=this.hasM,s=i?3:2,n=e[0],o=HU(Math.min),a=HU(Math.max);let u,c,h,p,[m,y]=n,[g,v]=n;for(let b=0,w=e.length;b<w;b++){const _=e[b],[S,T]=_;if(m=o(m,S),y=o(y,T),g=a(g,S),v=a(v,T),i&&_.length>2){const E=_[2];u=o(u,E),h=a(h,E)}if(r&&_.length>s){const E=_[s];c=o(c,E),p=a(p,E)}}return t.xmin=m,t.ymin=y,t.xmax=g,t.ymax=v,t.spatialReference=this.spatialReference,i?(t.zmin=u,t.zmax=h):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=c,t.mmax=p):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=R(this.points)}addPoint(e){return Av(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:R(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new QF(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new Se(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Se(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Av(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};l([d({readOnly:!0})],Rc.prototype,"cache",null),l([d()],Rc.prototype,"extent",null),l([d({type:[[Number]],json:{write:{isRequired:!0}}})],Rc.prototype,"points",void 0),l([J("points")],Rc.prototype,"writePoints",null),Rc=QF=l([x("esri.geometry.Multipoint")],Rc),Rc.prototype.toJSON.isDefaultToJSON=!0;const bS=Rc;function rWe(e){const t=[];for(e.reset();e.nextPath();){const i=[];for(;e.nextPoint();)i.push([e.x,e.y]);t.push(i)}return e.reset(),t}function Wwe(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var hM;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(hM||(hM={}));function sWe(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,i=e.hasM;if(e.type==="point")return i&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:i?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice();if(e.type==="polyline")return e.paths.slice();if(e.type==="multipoint")return e.points.slice();if(e.type==="extent"){const r=e.clone().normalize();if(!r)return null;let s=!1,n=!1;return r.forEach(o=>{o.hasZ&&(s=!0),o.hasM&&(n=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const u=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(u)}if(n&&o.hasM){const u=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(u)}return a})}return null}function HA(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function qK(e,t,i){const r=e[0]+i*(t[0]-e[0]),s=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,s,e[2]+i*(t[2]-e[2])]:[r,s]}function Zwe(e,t,i,r){return Jwe(e,t,i[r],i[r+1])}function Jwe(e,t,i,r){const[s,n]=t,[o,a]=i,[u,c]=r,h=u-o,p=c-a,m=h*h+p*p,y=(s-o)*h+(n-a)*p,g=Math.min(1,Math.max(0,y/m));return e[0]=o+h*g,e[1]=a+p*g,e}function nWe(e,t,i,r,s,n){let o=i,a=r,u=s-o,c=n-a;if(u!==0||c!==0){const h=((e-o)*u+(t-a)*c)/(u*u+c*c);h>1?(o=s,a=n):h>0&&(o+=u*h,a+=c*h)}return u=e-o,c=t-a,u*u+c*c}function GK(e,t){return qK(e,t,.5)}function oWe(e){const t=e.length;let i=0;for(let r=0;r<t-1;++r)i+=HA(e[r],e[r+1]);return i}function aWe(e,t){if(t<=0)return e[0];const i=e.length;let r=0;for(let s=0;s<i-1;++s){const n=HA(e[s],e[s+1]);if(t-r<n){const o=(t-r)/n;return qK(e[s],e[s+1],o)}r+=n}return e[i-1]}function BK(e,t=hM.X,i=hM.Y){let r=0;const s=e.length;let n=e[0];for(let o=1;o<s;o++){const a=e[o];r+=(a[t]-n[t])*(a[i]+n[i]),n=a}if(!HK(e)){const o=e[0];r+=(o[t]-n[t])*(o[i]+n[i])}return r>=0}function HK(e){const t=e.length;return t<3||CA(e[0],e[t-1])}function lWe(e){"rings"in e&&(Ywe(e),Qwe(e))}function Ywe(e){if(!("rings"in e))return!1;let t=!1;for(const i of e.rings)HK(i)||(i.push(i[0].slice()),t=!0);return t}function Qwe(e){if(!("rings"in e)||e.rings.length===0||BK(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function uWe(e){return e.type!=="polygon"&&e.type!=="polyline"||Xwe(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function Xwe(e,t){const i=qr(t);if(!i)return;const r=i.valid[0],s=i.valid[1],n=s-r;for(const o of e){let a=1/0,u=-1/0;for(const h of o){const p=Kwe(h[0],r,s);a=Math.min(a,p),u=Math.max(u,p),h[0]=p}const c=u-a;n-c<c&&o.forEach(h=>{h[0]<0&&(h[0]+=n)})}}function Kwe(e,t,i){const r=i-t;return e<t?i-(t-e)%r:e>i?t+(e-t)%r:e}function cWe(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[i,r]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return i.length===r.length&&i.every((s,n)=>s.length===r[n].length)}function dWe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function ebe(e){return e?tbe(e.rings,e.hasZ??!1):null}function tbe(e,t){if(!(e!=null&&e.length))return null;const i=[],r=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=e.length;n<o;n++){const a=WK(e[n],t,s);a&&r.push(a)}if(r.sort((n,o)=>{let a=n[2]-o[2];return a===0&&t&&(a=n[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const n=e[0]&&e[0].length?ibe(e[0],t):null;if(!n)return null;i[0]=n[0],i[1]=n[1],t&&n.length>2&&(i[2]=n[2])}return i}function WK(e,t,i){let r=0,s=0,n=0,o=0,a=0;const u=e.length?e[0][0]:0,c=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let m=0;m<e.length;m++){const y=e[m],g=e[(m+1)%e.length],[v,b,w]=y,_=v-u,S=b-c,[T,E,A]=g,C=T-u,O=E-c,U=_*O-C*S;if(o+=U,r+=(_+C)*U,s+=(S+O)*U,t&&y.length>2&&g.length>2){const V=w-h,H=A-h,te=_*H-C*V;n+=(V+H)*te,a+=te}v<i[0]&&(i[0]=v),v>i[1]&&(i[1]=v),b<i[2]&&(i[2]=b),b>i[3]&&(i[3]=b),t&&(w<i[4]&&(i[4]=w),w>i[5]&&(i[5]=w))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const p=[r/(6*o)+u,s/(6*o)+c,o];return t&&(i[4]===i[5]||a===0?(p[3]=(i[4]+i[5])/2,p[4]=0):(p[3]=n/(6*a)+h,p[4]=a)),p}function hWe(e,t){let i=0,r=0,s=0;e.nextPoint();const n=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const u=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const c=[e.x,e.y],[h,p]=u,m=h-n,y=p-o,[g,v]=c,b=g-n,w=v-o,_=m*w-b*y;s+=_,i+=(m+b)*_,r+=(y+w)*_,h<t[0]&&(t[0]=h),h>t[1]&&(t[1]=h),p<t[2]&&(t[2]=p),p>t[3]&&(t[3]=p)}return s>0&&(s*=-1),s?(s*=.5,[i/(6*s)+n,r/(6*s)+o,s]):null}function ibe(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let u=0,c=e.length;u<c-1;u++){const h=e[u],p=e[u+1];if(h&&p){i[0]=h[0],i[1]=h[1],r[0]=p[0],r[1]=p[1],t&&h.length>2&&p.length>2&&(i[2]=h[2],r[2]=p[2]);const m=HA(i,r);if(m){s+=m;const y=GK(h,p);n+=m*y[0],o+=m*y[1],t&&y.length>2&&(a+=m*y[2])}}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.length?e[0]:null}function rbe(e){const{hasZ:t,totalSize:i}=e;if(i===0)return null;const r=[],s=[],n=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=WK(Wwe(e),e.hasZ,n);o&&s.push(o)}if(s.sort((o,a)=>{let u=o[2]-a[2];return u===0&&t&&(u=o[4]-a[4]),u}),s.length&&(r[0]=s[0][0],r[1]=s[0][1],t&&(r[2]=s[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){e.reset(),e.nextPath();const o=e.pathSize?sbe(e):null;if(!o)return null;r[0]=o[0],r[1]=o[1],t&&o.length>2&&(r[2]=o[2])}return r}function sbe(e){const{hasZ:t}=e,i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;if(e.nextPoint()){let u=e.x,c=e.y,h=e.z;for(;e.nextPoint();){const p=e.x,m=e.y,y=e.z;i[0]=u,i[1]=c,r[0]=p,r[1]=m,t&&(i[2]=h,r[2]=y);const g=HA(i,r);if(g){s+=g;const v=GK(i,r);n+=g*v[0],o+=g*v[1],t&&v.length>2&&(a+=g*v[2])}u=p,c=m,h=y}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const nbe=1e-6;function pWe(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<nbe){const s=rbe(e);return s?[s[0],s[1]]:null}const i=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const r=[e.x,e.y];for(e.reset();e.nextPath();)abe(i,r,e);return i[0]*=1/t,i[1]*=1/t,i[0]+=r[0],i[1]+=r[1],i}const obe=1/3;function abe(e,t,i){if(!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,s=i.y;i.nextPoint();let n,o=i.x-r,a=i.y-s,u=0,c=0;for(;i.nextPoint();)u=i.x-r,c=i.y-s,n=.5*obe*(u*a-c*o),e[0]+=n*(o+u),e[1]+=n*(a+c),o=u,a=c;const h=i.getCurrentRingArea(),p=[r,s];return p[0]-=t[0],p[1]-=t[1],p[0]*=h,p[1]*=h,e[0]+=p[0],e[1]+=p[1],e}function ds(e=dbe){return[e[0],e[1],e[2],e[3]]}function ZK(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function fWe(e,t,i,r,s=ds()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function mWe(e,t=ds()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function lbe(e,t,i=new gt){return i.xmin=e[0],i.ymin=e[1],i.xmax=e[2],i.ymax=e[3],i.spatialReference=t,i}function yWe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function gWe(e,t,i){if(t!=null)if("length"in t)XF(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}else ZK(i,e)}function vWe(e,t,i=e){const r=t.length;let s=e[0],n=e[1],o=e[2],a=e[3];for(let u=0;u<r;u++){const c=t[u];s=Math.min(s,c[0]),n=Math.min(n,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return i[0]=s,i[1]=n,i[2]=o,i[3]=a,i}function wWe(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function S4(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function T4(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function bWe(e){return S4(e)*T4(e)}function _We(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function SWe(e){const t=S4(e),i=T4(e);return Math.sqrt(t*t+i*i)}function TWe(e,t){return ube(e,t.x,t.y)}function ube(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function xWe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function $We(e,t,i){return Math.max(t[0],e[0])-i<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-i<=Math.min(t[3],e[3])}function cbe(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function EWe(e,t,i,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+t,r[3]=e[3]+i,r}function MWe(e){return e?ZK(e,WU):ds(WU)}function XF(e){return e!=null&&e.length===4}function AWe(e,t){return XF(e)&&XF(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const WU=[1/0,1/0,-1/0,-1/0],dbe=[0,0,0,0];function JK(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function YK(e){return e.points!==void 0}function QK(e){return e.x!==void 0&&e.y!==void 0}function XK(e){return e.paths!==void 0}function KK(e){return e.rings!==void 0}function eee(e){function t(i,r){return i==null?r:r==null?i:e(i,r)}return t}const Ld=eee(Math.min),kd=eee(Math.max);function IWe(e,t){return XK(t)?Iv(e,t.paths,!1,!1):KK(t)?Iv(e,t.rings,!1,!1):YK(t)?x4(e,t.points,!1,!1,!1,!1):JK(t)?tee(e,t):(QK(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function CWe(e){let t,i,r,s;for(e.reset(),t=r=1/0,i=s=-1/0;e.nextPath();){const n=hbe(e);t=Math.min(n[0],t),r=Math.min(n[1],r),i=Math.max(n[2],i),s=Math.max(n[3],s)}return ds([t,r,i,s])}function hbe(e){let t,i,r,s;for(t=r=1/0,i=s=-1/0;e.nextPoint();)t=Math.min(e.x,t),r=Math.min(e.y,r),i=Math.max(e.x,i),s=Math.max(e.y,s);return ds([t,r,i,s])}function OWe(e,t){return XK(t)?Iv(e,t.paths,!0,!1):KK(t)?Iv(e,t.rings,!0,!1):YK(t)?x4(e,t.points,!0,!1,!0,!1):JK(t)?tee(e,t,!0,!1,!0,!1):(QK(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Iv(e,t,i,r){const s=i?3:2;if(!t.length||!t[0].length)return null;let n,o,a,u,[c,h]=t[0][0],[p,m]=t[0][0];for(let y=0;y<t.length;y++){const g=t[y];for(let v=0;v<g.length;v++){const b=g[v],[w,_]=b;if(c=Ld(c,w),h=Ld(h,_),p=kd(p,w),m=kd(m,_),i&&b.length>2){const S=b[2];n=Ld(n,S),o=kd(o,S)}if(r&&b.length>s){const S=b[s];a=Ld(n,S),u=kd(o,S)}}}return i?r?(e[0]=c,e[1]=h,e[2]=n,e[3]=a,e[4]=p,e[5]=m,e[6]=o,e[7]=u,e.length=8,e):(e[0]=c,e[1]=h,e[2]=n,e[3]=p,e[4]=m,e[5]=o,e.length=6,e):r?(e[0]=c,e[1]=h,e[2]=a,e[3]=p,e[4]=m,e[5]=u,e.length=6,e):(e[0]=c,e[1]=h,e[2]=p,e[3]=m,e.length=4,e)}function tee(e,t,i,r,s,n){const o=t.xmin,a=t.xmax,u=t.ymin,c=t.ymax;let h=t.zmin,p=t.zmax,m=t.mmin,y=t.mmax;return s?(h=h||0,p=p||0,n?(m=m||0,y=y||0,e[0]=o,e[1]=u,e[2]=h,e[3]=m,e[4]=a,e[5]=c,e[6]=p,e[7]=y,e):(e[0]=o,e[1]=u,e[2]=h,e[3]=a,e[4]=c,e[5]=p,e)):n?(m=m||0,y=y||0,e[0]=o,e[1]=u,e[2]=m,e[3]=a,e[4]=c,e[5]=y,e):(e[0]=o,e[1]=u,e[2]=a,e[3]=c,e)}function x4(e,t,i,r,s,n){const o=i?3:2,a=r&&n,u=i&&s;if(!t.length||!t[0].length)return null;let c,h,p,m,[y,g]=t[0],[v,b]=t[0];for(let w=0;w<t.length;w++){const _=t[w],[S,T]=_;if(y=Ld(y,S),g=Ld(g,T),v=kd(v,S),b=kd(b,T),u&&_.length>2){const E=_[2];c=Ld(c,E),h=kd(h,E)}if(a&&_.length>o){const E=_[o];p=Ld(c,E),m=kd(h,E)}}return s?(c=c||0,h=h||0,n?(p=p||0,m=m||0,e[0]=y,e[1]=g,e[2]=c,e[3]=p,e[4]=v,e[5]=b,e[6]=h,e[7]=m,e):(e[0]=y,e[1]=g,e[2]=c,e[3]=v,e[4]=b,e[5]=h,e)):n?(p=p||0,m=m||0,e[0]=y,e[1]=g,e[2]=p,e[3]=v,e[4]=b,e[5]=m,e):(e[0]=y,e[1]=g,e[2]=v,e[3]=b,e)}function pbe(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function fbe(e){return e.points!==void 0}function mbe(e){return e.x!==void 0&&e.y!==void 0}function ybe(e){return e.paths!==void 0}function gbe(e){return e.rings!==void 0}const $4=[];function iee(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function ree(e,t,i,r,s,n){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:s,zmax:n}}function see(e,t,i,r,s,n){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:s,mmax:n}}function nee(e,t,i,r,s,n,o,a){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:s,ymax:n,zmax:o,mmax:a}}function E4(e,t=!1,i=!1){return t?i?nee(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):ree(e[0],e[1],e[2],e[3],e[4],e[5]):i?see(e[0],e[1],e[2],e[3],e[4],e[5]):iee(e[0],e[1],e[2],e[3])}function vbe(e){return e?pbe(e)?e:mbe(e)?bbe(e):gbe(e)?oee(e):ybe(e)?aee(e):fbe(e)?wbe(e):null:null}function wbe(e){const{hasZ:t,hasM:i,points:r}=e;return E4(x4($4,r,t??!1,i??!1),t,i)}function bbe(e){const{x:t,y:i,z:r,m:s}=e,n=s!=null;return r!=null?n?nee(t,i,r,s,t,i,r,s):ree(t,i,r,t,i,r):n?see(t,i,s,t,i,s):iee(t,i,t,i)}function oee(e){const{hasZ:t,hasM:i,rings:r}=e,s=Iv($4,r,t??!1,i??!1);return s?E4(s,t,i):null}function aee(e){const{hasZ:t,hasM:i,paths:r}=e,s=Iv($4,r,t??!1,i??!1);return s?E4(s,t,i):null}var Cx;function ZU(e){return!Array.isArray(e[0])}function _be(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function Sbe(e){var n,o;if(!e)return;let{rings:t,hasM:i,hasZ:r,spatialReference:s}=e;switch(t??(t=[]),_be(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return s??(s=we.WGS84),{...e,hasM:i,hasZ:r,rings:t,spatialReference:s}}let Zn=Cx=class extends nc{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:i}=e;let r=!1,s=!1;for(const o of t)o.hasZ&&(r=!0),o.hasM&&(s=!0);const n={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const u=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(u)}if(s&&o.hasM){const u=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(u)}return a}),spatialReference:i};return r&&(n.hasZ=!0),s&&(n.hasM=!0),new Cx(n)}constructor(e){super(Sbe(e)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const e=ebe(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Se;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}writeCurveRings(e,t){t.curveRings=R(e)}get extent(){const e=oee(this),{spatialReference:t}=this;return e?new gt({...e,spatialReference:t}):null}get isSelfIntersecting(){return qwe(this.rings)}writeRings(e,t){t.rings=R(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(ZU(e)){const r=[];for(let s=0,n=e.length;s<n;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new Cx;return e.spatialReference=this.spatialReference,e.rings=R(this.rings),e.curveRings=R(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;if(t!=null!=(i!=null)||t!=null&&i!=null&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([s,n,o,a],[u,c,h,p])=>s===u&&n===c&&(o==null&&h==null||o===h)&&(a==null&&p==null||a===p);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=e.rings[s];if(!CA(n,o,r))return!1}return!0}contains(e){if(!e)return!1;const t=BA(e,this.spatialReference);return b4(this,t??e)}isClockwise(e){const t=ZU(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e;return BK(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new Se(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Se(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Se(i[0],i[1],i[2],i[3],this.spatialReference):new Se(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Av(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Se(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new Se(s,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Av(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([d({readOnly:!0})],Zn.prototype,"cache",null),l([d({readOnly:!0})],Zn.prototype,"centroid",null),l([d({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Zn.prototype,"curveRings",void 0),l([J("curveRings")],Zn.prototype,"writeCurveRings",null),l([d({readOnly:!0})],Zn.prototype,"extent",null),l([d({readOnly:!0})],Zn.prototype,"isSelfIntersecting",null),l([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Zn.prototype,"rings",void 0),l([J("rings")],Zn.prototype,"writeRings",null),Zn=Cx=l([x("esri.geometry.Polygon")],Zn);const To=Zn;Zn.prototype.toJSON.isDefaultToJSON=!0;var KF;function Tbe(e){return!Array.isArray(e[0])}function xbe(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function $be(e){var n,o;if(!e)return;let{paths:t,hasM:i,hasZ:r,spatialReference:s}=e;switch(t??(t=[]),xbe(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return s??(s=we.WGS84),{...e,hasM:i,hasZ:r,paths:t,spatialReference:s}}let Za=KF=class extends nc{constructor(e){super($be(e)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(e,t){t.curvePaths=R(e)}get extent(){const e=aee(this),{spatialReference:t}=this;return e?new gt({...e,spatialReference:t}):null}writePaths(e,t){t.paths=R(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(Tbe(e)){const r=[];for(let s=0,n=e.length;s<n;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new KF;return e.spatialReference=this.spatialReference,e.paths=R(this.paths),e.curvePaths=R(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new Se(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Se(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Se(i[0],i[1],i[2],i[3],this.spatialReference):new Se(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Av(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new Se(s,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Se(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Av(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};l([d({readOnly:!0})],Za.prototype,"cache",null),l([d({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Za.prototype,"curvePaths",void 0),l([J("curvePaths")],Za.prototype,"writeCurvePaths",null),l([d({readOnly:!0})],Za.prototype,"extent",null),l([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Za.prototype,"paths",void 0),l([J("paths")],Za.prototype,"writePaths",null),Za=KF=l([x("esri.geometry.Polyline")],Za);const uo=Za;Za.prototype.toJSON.isDefaultToJSON=!0;function WA(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function lee(e){return e.points!==void 0}function uee(e){return e.x!==void 0&&e.y!==void 0}function ZA(e){return e.paths!==void 0||e.curvePaths!==void 0}function Gu(e){return e.rings!==void 0||e.curveRings!==void 0}function wa(e){return e==null?null:e instanceof nc?e:uee(e)?Se.fromJSON(e):ZA(e)?uo.fromJSON(e):Gu(e)?To.fromJSON(e):lee(e)?bS.fromJSON(e):WA(e)?gt.fromJSON(e):null}function l0(e){return e?uee(e)?"esriGeometryPoint":ZA(e)?"esriGeometryPolyline":Gu(e)?"esriGeometryPolygon":WA(e)?"esriGeometryEnvelope":lee(e)?"esriGeometryMultipoint":null:null}const Ebe={esriGeometryPoint:Se,esriGeometryPolyline:uo,esriGeometryPolygon:To,esriGeometryEnvelope:gt,esriGeometryMultipoint:bS,esriGeometryMultiPatch:To};function Mbe(e){return e&&Ebe[e]||null}const Abe=Si()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),JU=Si()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),am={base:nc,key:"type",typeMap:{extent:gt,multipoint:bS,point:Se,polyline:uo,polygon:To}};var eN;let Fc=eN=class extends P{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new eN({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};l([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:y3}}}}})],Fc.prototype,"rotation",void 0),l([ke("rotation")],Fc.prototype,"castRotation",null),l([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:y3}}}}})],Fc.prototype,"scale",void 0),l([d({types:am,json:{read:wa,write:!0,origins:{"web-scene":{read:wa,write:{overridePolicy:y3}}}}})],Fc.prototype,"targetGeometry",void 0),l([d({type:Owe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Fc.prototype,"camera",void 0),Fc=eN=l([x("esri.Viewpoint")],Fc);const Bi=Fc;function y3(){return{enabled:!this.camera}}let qm=class extends Q{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(H5(()=>this._refresh(),So))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let i=0;for(const r of t)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(t){return new Q(t)}_processCollection(t,i){if(!i)return t;const r=this.itemFilterFunction??(s=>!!s);for(const s of i)if(s){if(r(s)){const n=this.indexOf(s,t);n>=0?n!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)t=this._processCollection(t,o);else t=this._processCollection(t,n)}}return t}};l([d()],qm.prototype,"getCollections",void 0),l([d()],qm.prototype,"getChildrenFunction",void 0),l([d()],qm.prototype,"itemFilterFunction",void 0),qm=l([x("esri.core.CollectionFlattener")],qm);const d1=qm;let pM=class{constructor(t=i=>i.values().next().value){this._peeker=t,this._observable=new n0,this._items=new Set}get length(){return fe(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return fe(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const i=this.length;return this._items.forEach(r=>{t(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){fe(this._observable),yield*this._items}};const cee=new FinalizationRegistry(e=>{e.close()});function Ibe(e,t){cee.register(e,t,t)}function Cbe(e){cee.unregister(e)}function dee(e,t){return new Proxy({},{get:(i,r,s)=>(...n)=>{let o,a;const u=n[n.length-1];return Obe(u)&&(o=u.signal,a=u.transferList,n.pop()),e.apply(t?`${t}.${r.toString()}`:r.toString(),n,{transferList:a,signal:o})}})}function Obe(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const Rbe={statsWorker:()=>L(()=>Promise.resolve().then(()=>RGe),void 0),geometryEngineWorker:()=>L(()=>import("./geometryEngineWorker-DGYEKZlV.js"),__vite__mapDeps([2,3,4,1])),arcadeGeometryOperatorsWorker:()=>L(()=>import("./operatorsWorker-eaCdPIf0.js"),[]),CSVSourceWorker:()=>L(()=>import("./CSVSourceWorker-CjVq4rMZ.js"),__vite__mapDeps([5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])),EdgeProcessingWorker:()=>L(()=>import("./EdgeProcessingWorker-BFkK-1lq.js"),__vite__mapDeps([21,22,23,24,25,26,27,28,29,30,31,32])),ElevationSamplerWorker:()=>L(()=>import("./ElevationSamplerWorker-rtwxZux2.js"),__vite__mapDeps([33,17,34,35,36,37,38,39,40,41,42,24,43])),FeatureServiceSnappingSourceWorker:()=>L(()=>import("./FeatureServiceSnappingSourceWorker-Devp7NIC.js"),__vite__mapDeps([44,7,8,9,10,11,12,13,14,15,16,17,18,45])),GeoJSONSourceWorker:()=>L(()=>import("./GeoJSONSourceWorker-DAyJOPIr.js"),__vite__mapDeps([46,9,7,8,10,11,12,13,14,15,16,17,18,47,6,20,48])),LercWorker:()=>L(()=>import("./LercWorker-84N9gopA.js"),[]),MemorySourceWorker:()=>L(()=>import("./MemorySourceWorker-Or9DgF0C.js"),__vite__mapDeps([49,9,50,7,8,10,11,12,13,14,15,16,17,18,20,48,6])),PBFDecoderWorker:()=>L(()=>import("./PBFDecoderWorker-DvaDDxl6.js"),__vite__mapDeps([51,52,9])),FeaturePipelineWorker:()=>L(()=>import("./FeaturePipelineWorker-BMExkxCo.js"),__vite__mapDeps([53,54,55,31,56,57,58,59,60,12,9,61,62,63,64,65,66,67,68,69,18,8,10,11,13,14,70,71,72,73,74,47,6,20,48,75,76,77])),PointCloudWorker:()=>L(()=>import("./PointCloudWorker-DP6SHLlD.js"),__vite__mapDeps([78,79,36,80,81,82,83,29,84,37,38,39,85])),RasterWorker:()=>L(()=>import("./RasterWorker-CzuJtYE2.js"),__vite__mapDeps([86,87,88,1,89,90,91])),SceneLayerSnappingSourceWorker:()=>L(()=>import("./SceneLayerSnappingSourceWorker-52B3WnZ1.js"),__vite__mapDeps([92,93,94,36,85,37,80,95,23,24,25,26,27,28,29,30,31,32])),SceneLayerWorker:()=>L(()=>import("./SceneLayerWorker-ubx_9vHh.js"),__vite__mapDeps([96,34,42,97,40,94,36,85,37,80,98,83,29,99,60,100,101,102,103,84,79,38,39])),WFSSourceWorker:()=>L(()=>import("./WFSSourceWorker-CItcqZGQ.js"),__vite__mapDeps([104,9,7,8,10,11,12,13,14,15,16,17,18,47,6,48,105,106])),WorkerTileHandler:()=>L(()=>import("./WorkerTileHandler-CQhqGbzn.js"),__vite__mapDeps([107,108,58,109,110,65,111,112,31,67,57])),Lyr3DWorker:()=>L(()=>import("./Lyr3DWorker-AxK6aRU2.js"),[]),Feature3DPipelineWorker:()=>L(()=>import("./Feature3DPipelineWorker-Bd7KIG4W.js"),__vite__mapDeps([113,8,9,10,11,12,13,14,17,28,114,97,40,115,37,23,24,25,116,94,36,85,80,93,117,29,102,103,101,118,119,120,121,84,79,38,39,30,31,122,60,95,123,124,125,81,41,34,126,127,128,129,100,130])),TextureCompressionWorker:()=>L(()=>import("./TextureCompressionWorker-ujR8JZU0.js"),__vite__mapDeps([131,120]))},hee="worker:port-closed";var nr;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(nr||(nr={}));let Fbe=0;function pee(){return Fbe++}function Nbe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function h1(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function M4(e,t,i,r){if(t.type===nr.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==nr.INVOKE&&t.type!==nr.RESPONSE)return void e.postMessage(t);let s;if(Nbe(i)?(s=YU(i.transferList),t.data=i.result):(s=YU(r),t.data=i),s){if(D("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case nr.INVOKE:throw o;case nr.RESPONSE:return void M4(e,{type:nr.RESPONSE,jobId:t.jobId,error:h1(o)})}}}e.postMessage(t,s)}else e.postMessage(t)}function p1(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function YU(e){if(!(e!=null&&e.length))return null;if(D("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!Lbe(i));return t.length?t:null}function Lbe(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function NWe(e){try{return await e}catch(t){const i=(t==null?void 0:t.name)===hee;if(!(fi(t)||i))throw t;return}}const{CLOSE:QU,ABORT:XU,INVOKE:KU,RESPONSE:q0,OPEN_PORT:e8,ON:kbe}=nr,Pbe=2;let Dbe=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===nr.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},fh=class Gm{static connect(t,i){const r=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new Gm(r.port1,{channel:r,client:s,schedule:i});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),Gm.clients.set(n,s),r.port2}static loadWorker(t){const i=Rbe[t];return i?i():Promise.resolve(null)}constructor(t,i,r){this._port=t,this._jobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Dbe(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:QU}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const s=r==null?void 0:r.signal,n=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new M(hee,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const o=pee();return new Promise((a,u)=>{if(En(s))return this._processWork(),void u(mt());const c=mo(s,()=>{const p=this._outJobs.get(o);p&&(this._outJobs.delete(o),this._processWork(),kt(p.abortHandle),this._post({type:XU,jobId:o}),u(mt()))}),h={resolve:a,reject:u,abortHandle:c,debugInfo:t};this._outJobs.set(o,h),this._post({type:KU,jobId:o,methodName:t,abortable:s!=null},i,n)})}createInvokeProxy(t){return dee(this,t)}on(t,i){const r=new MessageChannel;function s(n){i(n.data)}return this._port.postMessage({type:nr.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),Ke(()=>{r.port1.postMessage({type:nr.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:e8,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=Pbe)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:i,data:r,invokeOptions:s,resolver:n}=t;this.apply(i,r,s).then(a=>n.resolve(a)).catch(a=>n.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{kt(t.abortHandle),t.reject(mt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,i){const r=p1(t);if(r)switch(r.type){case q0:this._onResponseMessage(r);break;case KU:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case XU:this._onAbortMessage(r);break;case QU:this._onCloseMessage();break;case e8:this._onOpenPortMessage(r);break;case kbe:this._onOnMessage(r)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Gm.clients.get(this)===t&&t.destroy(),Gm.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s=[],abortable:n}=t,o=n?new AbortController:null,a=this._inJobs;let u,c=this._client,h=c[i];try{if(!h&&i&&i.includes(".")){const p=i.split(".");for(let m=0;m<p.length-1;m++)c=c[p[m]],h=c[p[m+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);s.push({client:this,signal:o?o.signal:null}),u=h.apply(c,s)}catch(p){return void this._post({type:q0,jobId:r,error:h1(p)})}xl(u)?(a.set(r,{controller:o,promise:u}),u.then(p=>{a.has(r)&&(a.delete(r),this._post({type:q0,jobId:r},p))},p=>{a.has(r)&&(a.delete(r),fi(p)||this._post({type:q0,jobId:r,error:h1(p||{message:`Error encountered at method ${i}`})}))})):this._post({type:q0,jobId:r},u)}_onOpenPortMessage(t){new Gm(t.port,{client:this._client})}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,n=>{i.postMessage(n)}),s=dS(t.port,"message",n=>{const o=p1(n);(o==null?void 0:o.type)===nr.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,n=this._outJobs;if(!n.has(i))return;const o=n.get(i);n.delete(i),this._processWork(),kt(o.abortHandle),r?o.reject(M.fromJSON(JSON.parse(r))):o.resolve(s)}_post(t,i,r){return M4(this._port,t,i,r)}};fh.kernelInfo={buildDate:sK,fullVersion:d4,revision:nK},fh.clients=new Map;let jbe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new pM}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,i){return new Promise((r,s)=>{let n=!0;const o=a=>{Fe(i.signal),n&&(n=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const u=t[a];xl(u)?this._clientPromises[a]=u.then(c=>(this._clients[a]=new fh(c,i,this._ongoingJobsQueue),o(r),this._clients[a]),()=>(o(s),null)):(this._clients[a]=new fh(u,i,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(t,i,r){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(a=>a==null?void 0:a.invoke(t,i,r))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(mt(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,Cbe(this)}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const s=Bs();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:r,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(a=>a==null?void 0:a.jobAdded())}return s.promise}createInvokeProxy(t){return dee(this,t)}on(t,i){return Promise.all(this._clientPromises).then(()=>lS(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(i[s]=n.openPort()),--r==0&&t(i)})})}get test(){}};const Vbe={async request(e,t){var o,a;const i=e.options,r=i.responseType;i.signal=t==null?void 0:t.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((o=RF(e.url))!=null&&o.after)?r:"array-buffer";const s=await Be(e.url,i),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((a=s.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}};let p_;var qW,GW;const zbe=((qW=globalThis.esriConfig)==null?void 0:qW.locale)??((GW=globalThis.dojoConfig)==null?void 0:GW.locale);var BW;const f_=(BW=globalThis.document)==null?void 0:BW.documentElement;function fee(){var i;const e=f_==null?void 0:f_.getAttribute("lang"),t=(i=globalThis.navigator)==null?void 0:i.language;return zbe??e??t??"en"}function Gr(){return p_===void 0&&(p_=fee()),p_}function PWe(e=Gr()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const Ox=[];function mee(e){return Ox.push(e),Ke(()=>Ox.splice(Ox.indexOf(e),1))}const Rx=[];function A4(e){return Rx.push(e),Ke(()=>Rx.splice(Rx.indexOf(e),1))}function t8(){const e=fee();p_!==e&&([...Rx].forEach(t=>t(e)),p_=e,[...Ox].forEach(t=>t(e)))}var HW;(HW=globalThis.addEventListener)==null||HW.call(globalThis,"languagechange",t8),f_&&new MutationObserver(()=>{t8()}).observe(f_,{attributeFilter:["lang"]});const An="system",Wf="unknown",bl="UTC",Ube=Intl.DateTimeFormat().resolvedOptions().timeZone,i8=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class lm extends Error{}class qbe extends lm{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Gbe extends lm{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Bbe extends lm{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class ag extends lm{}class yee extends lm{constructor(t){super(`Invalid unit ${t}`)}}class Nr extends lm{}class bc extends lm{constructor(){super("Zone is an abstract class")}}const oe="numeric",ba="short",xn="long",fM={year:oe,month:oe,day:oe},gee={year:oe,month:ba,day:oe},Hbe={year:oe,month:ba,day:oe,weekday:ba},vee={year:oe,month:xn,day:oe},wee={year:oe,month:xn,day:oe,weekday:xn},bee={hour:oe,minute:oe},_ee={hour:oe,minute:oe,second:oe},See={hour:oe,minute:oe,second:oe,timeZoneName:ba},Tee={hour:oe,minute:oe,second:oe,timeZoneName:xn},xee={hour:oe,minute:oe,hourCycle:"h23"},$ee={hour:oe,minute:oe,second:oe,hourCycle:"h23"},Eee={hour:oe,minute:oe,second:oe,hourCycle:"h23",timeZoneName:ba},Mee={hour:oe,minute:oe,second:oe,hourCycle:"h23",timeZoneName:xn},Aee={year:oe,month:oe,day:oe,hour:oe,minute:oe},Iee={year:oe,month:oe,day:oe,hour:oe,minute:oe,second:oe},Cee={year:oe,month:ba,day:oe,hour:oe,minute:oe},Oee={year:oe,month:ba,day:oe,hour:oe,minute:oe,second:oe},Wbe={year:oe,month:ba,day:oe,weekday:ba,hour:oe,minute:oe},Ree={year:oe,month:xn,day:oe,hour:oe,minute:oe,timeZoneName:ba},Fee={year:oe,month:xn,day:oe,hour:oe,minute:oe,second:oe,timeZoneName:ba},Nee={year:oe,month:xn,day:oe,weekday:xn,hour:oe,minute:oe,timeZoneName:xn},Lee={year:oe,month:xn,day:oe,weekday:xn,hour:oe,minute:oe,second:oe,timeZoneName:xn};class um{get type(){throw new bc}get name(){throw new bc}get ianaName(){return this.name}get isUniversal(){throw new bc}offsetName(t,i){throw new bc}formatOffset(t,i){throw new bc}offset(t){throw new bc}equals(t){throw new bc}get isValid(){throw new bc}}let g3=null;class JA extends um{static get instance(){return g3===null&&(g3=new JA),g3}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return Gee(t,i,r)}formatOffset(t,i){return m_(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Fx={};function Zbe(e){return Fx[e]||(Fx[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Fx[e]}const Jbe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Ybe(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,n,o,a,u,c,h]=r;return[o,s,n,a,u,c,h]}function Qbe(e,t){const i=e.formatToParts(t),r=[];for(let s=0;s<i.length;s++){const{type:n,value:o}=i[s],a=Jbe[n];n==="era"?r[a]=o:Ce(a)||(r[a]=parseInt(o,10))}return r}let GT={};class Zs extends um{static create(t){return GT[t]||(GT[t]=new Zs(t)),GT[t]}static resetCache(){GT={},Fx={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Zs.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return Gee(t,i,r,this.name)}formatOffset(t,i){return m_(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=Zbe(this.name);let[s,n,o,a,u,c,h]=r.formatToParts?Qbe(r,i):Ybe(r,i);a==="BC"&&(s=-Math.abs(s)+1);const m=QA({year:s,month:n,day:o,hour:u===24?0:u,minute:c,second:h,millisecond:0});let y=+i;const g=y%1e3;return y-=g>=0?g:1e3+g,(m-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let r8={};function Xbe(e,t={}){const i=JSON.stringify([e,t]);let r=r8[i];return r||(r=new Intl.ListFormat(e,t),r8[i]=r),r}let tN={};function iN(e,t={}){const i=JSON.stringify([e,t]);let r=tN[i];return r||(r=new Intl.DateTimeFormat(e,t),tN[i]=r),r}let rN={};function Kbe(e,t={}){const i=JSON.stringify([e,t]);let r=rN[i];return r||(r=new Intl.NumberFormat(e,t),rN[i]=r),r}let sN={};function e_e(e,t={}){const{base:i,...r}=t,s=JSON.stringify([e,r]);let n=sN[s];return n||(n=new Intl.RelativeTimeFormat(e,t),sN[s]=n),n}let $w=null;function t_e(){return $w||($w=new Intl.DateTimeFormat().resolvedOptions().locale,$w)}let s8={};function i_e(e){let t=s8[e];if(!t){const i=new Intl.Locale(e);t="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,s8[e]=t}return t}function r_e(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(i===-1)return[e];{let r,s;try{r=iN(e).resolvedOptions(),s=e}catch{const u=e.substring(0,i);r=iN(u).resolvedOptions(),s=u}const{numberingSystem:n,calendar:o}=r;return[s,n,o]}}function s_e(e,t,i){return(i||t)&&(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function n_e(e){const t=[];for(let i=1;i<=12;i++){const r=ue.utc(2009,i,1);t.push(e(r))}return t}function o_e(e){const t=[];for(let i=1;i<=7;i++){const r=ue.utc(2016,11,13+i);t.push(e(r))}return t}function BT(e,t,i,r){const s=e.listingMode();return s==="error"?null:s==="en"?i(t):r(t)}function a_e(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class l_e{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:n,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=Kbe(t,a)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):F4(t,3);return Ii(i,this.padTo)}}}class u_e{constructor(t,i,r){this.opts=r,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Zs.create(a).valid?(s=a,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=iN(i,n)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class c_e{constructor(t,i,r){this.opts={style:"long",...r},!i&&Uee()&&(this.rtf=e_e(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):F_e(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}const d_e={firstDay:1,minimalDays:4,weekend:[6,7]};class ht{static fromOpts(t){return ht.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,i,r,s,n=!1){const o=t||ui.defaultLocale,a=o||(n?"en-US":t_e()),u=i||ui.defaultNumberingSystem,c=r||ui.defaultOutputCalendar,h=nN(s)||ui.defaultWeekSettings;return new ht(a,u,c,h,o)}static resetCache(){$w=null,tN={},rN={},sN={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r,weekSettings:s}={}){return ht.create(t,i,r,s)}constructor(t,i,r,s,n){const[o,a,u]=r_e(t);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=r||u||null,this.weekSettings=s,this.intl=s_e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=a_e(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:ht.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,nN(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1){return BT(this,t,Wee,()=>{const r=i?{month:t,day:"numeric"}:{month:t},s=i?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=n_e(n=>this.extract(n,r,"month"))),this.monthsCache[s][t]})}weekdays(t,i=!1){return BT(this,t,Yee,()=>{const r=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=i?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=o_e(n=>this.extract(n,r,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return BT(this,void 0,()=>Qee,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ue.utc(2016,11,13,9),ue.utc(2016,11,13,19)].map(i=>this.extract(i,t,"dayperiod"))}return this.meridiemCache})}eras(t){return BT(this,t,Xee,()=>{const i={era:t};return this.eraCache[t]||(this.eraCache[t]=[ue.utc(-40,1,1),ue.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[t]})}extract(t,i,r){const s=this.dtFormatter(t,i),n=s.formatToParts(),o=n.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(t={}){return new l_e(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new u_e(t,this.intl,i)}relFormatter(t={}){return new c_e(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Xbe(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:qee()?i_e(this.locale):d_e}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let v3=null;class Oi extends um{static get utcInstance(){return v3===null&&(v3=new Oi(0)),v3}static instance(t){return t===0?Oi.utcInstance:new Oi(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Oi(XA(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${m_(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${m_(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return m_(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class h_e extends um{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ed(e,t){if(Ce(e)||e===null)return t;if(e instanceof um)return e;if(v_e(e)){const i=e.toLowerCase();return i==="default"?t:i==="local"||i==="system"?JA.instance:i==="utc"||i==="gmt"?Oi.utcInstance:Oi.parseSpecifier(i)||Zs.create(e)}else return th(e)?Oi.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new h_e(e)}const I4={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},n8={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},p_e=I4.hanidec.replace(/[\[|\]]/g,"").split("");function f_e(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(I4.hanidec)!==-1)t+=p_e.indexOf(e[i]);else for(const s in n8){const[n,o]=n8[s];r>=n&&r<=o&&(t+=r-n)}}return parseInt(t,10)}else return t}let Bm={};function m_e(){Bm={}}function Ro({numberingSystem:e},t=""){const i=e||"latn";return Bm[i]||(Bm[i]={}),Bm[i][t]||(Bm[i][t]=new RegExp(`${I4[i]}${t}`)),Bm[i][t]}let o8=()=>Date.now(),a8="system",l8=null,u8=null,c8=null,d8=60,h8,p8=null;class ui{static get now(){return o8}static set now(t){o8=t}static set defaultZone(t){a8=t}static get defaultZone(){return Ed(a8,JA.instance)}static get defaultLocale(){return l8}static set defaultLocale(t){l8=t}static get defaultNumberingSystem(){return u8}static set defaultNumberingSystem(t){u8=t}static get defaultOutputCalendar(){return c8}static set defaultOutputCalendar(t){c8=t}static get defaultWeekSettings(){return p8}static set defaultWeekSettings(t){p8=nN(t)}static get twoDigitCutoffYear(){return d8}static set twoDigitCutoffYear(t){d8=t%100}static get throwOnInvalid(){return h8}static set throwOnInvalid(t){h8=t}static resetCaches(){ht.resetCache(),Zs.resetCache(),ue.resetCache(),m_e()}}class ha{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const kee=[0,31,59,90,120,151,181,212,243,273,304,334],Pee=[0,31,60,91,121,152,182,213,244,274,305,335];function co(e,t){return new ha("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function C4(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function Dee(e,t,i){return i+(_S(e)?Pee:kee)[t-1]}function jee(e,t){const i=_S(e)?Pee:kee,r=i.findIndex(n=>n<t),s=t-i[r];return{month:r+1,day:s}}function O4(e,t){return(e-t+7)%7+1}function mM(e,t=4,i=1){const{year:r,month:s,day:n}=e,o=Dee(r,s,n),a=O4(C4(r,s,n),i);let u=Math.floor((o-a+14-t)/7),c;return u<1?(c=r-1,u=f1(c,t,i)):u>f1(r,t,i)?(c=r+1,u=1):c=r,{weekYear:c,weekNumber:u,weekday:a,...KA(e)}}function f8(e,t=4,i=1){const{weekYear:r,weekNumber:s,weekday:n}=e,o=O4(C4(r,1,t),i),a=Ag(r);let u=s*7+n-o-7+t,c;u<1?(c=r-1,u+=Ag(c)):u>a?(c=r+1,u-=Ag(r)):c=r;const{month:h,day:p}=jee(c,u);return{year:c,month:h,day:p,...KA(e)}}function w3(e){const{year:t,month:i,day:r}=e,s=Dee(t,i,r);return{year:t,ordinal:s,...KA(e)}}function m8(e){const{year:t,ordinal:i}=e,{month:r,day:s}=jee(t,i);return{year:t,month:r,day:s,...KA(e)}}function y8(e,t){if(!Ce(e.localWeekday)||!Ce(e.localWeekNumber)||!Ce(e.localWeekYear)){if(!Ce(e.weekday)||!Ce(e.weekNumber)||!Ce(e.weekYear))throw new ag("Cannot mix locale-based week fields with ISO-based week fields");return Ce(e.localWeekday)||(e.weekday=e.localWeekday),Ce(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Ce(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function y_e(e,t=4,i=1){const r=YA(e.weekYear),s=ho(e.weekNumber,1,f1(e.weekYear,t,i)),n=ho(e.weekday,1,7);return r?s?n?!1:co("weekday",e.weekday):co("week",e.weekNumber):co("weekYear",e.weekYear)}function g_e(e){const t=YA(e.year),i=ho(e.ordinal,1,Ag(e.year));return t?i?!1:co("ordinal",e.ordinal):co("year",e.year)}function Vee(e){const t=YA(e.year),i=ho(e.month,1,12),r=ho(e.day,1,yM(e.year,e.month));return t?i?r?!1:co("day",e.day):co("month",e.month):co("year",e.year)}function zee(e){const{hour:t,minute:i,second:r,millisecond:s}=e,n=ho(t,0,23)||t===24&&i===0&&r===0&&s===0,o=ho(i,0,59),a=ho(r,0,59),u=ho(s,0,999);return n?o?a?u?!1:co("millisecond",s):co("second",r):co("minute",i):co("hour",t)}function Ce(e){return typeof e>"u"}function th(e){return typeof e=="number"}function YA(e){return typeof e=="number"&&e%1===0}function v_e(e){return typeof e=="string"}function w_e(e){return Object.prototype.toString.call(e)==="[object Date]"}function Uee(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function qee(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function b_e(e){return Array.isArray(e)?e:[e]}function g8(e,t,i){if(e.length!==0)return e.reduce((r,s)=>{const n=[t(s),s];return r&&i(r[0],n[0])===r[0]?r:n},null)[1]}function __e(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function Cv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nN(e){if(e==null)return null;if(typeof e!="object")throw new Nr("Week settings must be an object");if(!ho(e.firstDay,1,7)||!ho(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!ho(t,1,7)))throw new Nr("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function ho(e,t,i){return YA(e)&&e>=t&&e<=i}function S_e(e,t){return e-t*Math.floor(e/t)}function Ii(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function hd(e){if(!(Ce(e)||e===null||e===""))return parseInt(e,10)}function Lh(e){if(!(Ce(e)||e===null||e===""))return parseFloat(e)}function R4(e){if(!(Ce(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function F4(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function _S(e){return e%4===0&&(e%100!==0||e%400===0)}function Ag(e){return _S(e)?366:365}function yM(e,t){const i=S_e(t-1,12)+1,r=e+(t-i)/12;return i===2?_S(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function QA(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function v8(e,t,i){return-O4(C4(e,1,t),i)+t-1}function f1(e,t=4,i=1){const r=v8(e,t,i),s=v8(e+1,t,i);return(Ag(e)-r+s)/7}function oN(e){return e>99?e:e>ui.twoDigitCutoffYear?1900+e:2e3+e}function Gee(e,t,i,r=null){const s=new Date(e),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(n.timeZone=r);const o={timeZoneName:t,...n},a=new Intl.DateTimeFormat(i,o).formatToParts(s).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function XA(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function Bee(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Nr(`Invalid unit value ${e}`);return t}function gM(e,t){const i={};for(const r in e)if(Cv(e,r)){const s=e[r];if(s==null)continue;i[t(r)]=Bee(s)}return i}function m_(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${Ii(i,2)}:${Ii(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${Ii(i,2)}${Ii(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function KA(e){return __e(e,["hour","minute","second","millisecond"])}const T_e=["January","February","March","April","May","June","July","August","September","October","November","December"],Hee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],x_e=["J","F","M","A","M","J","J","A","S","O","N","D"];function Wee(e){switch(e){case"narrow":return[...x_e];case"short":return[...Hee];case"long":return[...T_e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Zee=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Jee=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],$_e=["M","T","W","T","F","S","S"];function Yee(e){switch(e){case"narrow":return[...$_e];case"short":return[...Jee];case"long":return[...Zee];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Qee=["AM","PM"],E_e=["Before Christ","Anno Domini"],M_e=["BC","AD"],A_e=["B","A"];function Xee(e){switch(e){case"narrow":return[...A_e];case"short":return[...M_e];case"long":return[...E_e];default:return null}}function I_e(e){return Qee[e.hour<12?0:1]}function C_e(e,t){return Yee(t)[e.weekday-1]}function O_e(e,t){return Wee(t)[e.month-1]}function R_e(e,t){return Xee(t)[e.year<0?0:1]}function F_e(e,t,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&n){const p=e==="days";switch(t){case 1:return p?"tomorrow":`next ${s[e][0]}`;case-1:return p?"yesterday":`last ${s[e][0]}`;case 0:return p?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),u=a===1,c=s[e],h=r?u?c[1]:c[2]||c[1]:u?s[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}function w8(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const N_e={D:fM,DD:gee,DDD:vee,DDDD:wee,t:bee,tt:_ee,ttt:See,tttt:Tee,T:xee,TT:$ee,TTT:Eee,TTTT:Mee,f:Aee,ff:Cee,fff:Ree,ffff:Nee,F:Iee,FF:Oee,FFF:Fee,FFFF:Lee};class jr{static create(t,i={}){return new jr(t,i)}static parseFormat(t){let i=null,r="",s=!1;const n=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),i=null,r="",s=!s):s||a===i?r+=a:(r.length>0&&n.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),n}static macroTokenToFormatOpts(t){return N_e[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}dtFormatter(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i})}formatDateTime(t,i){return this.dtFormatter(t,i).format()}formatDateTimeParts(t,i){return this.dtFormatter(t,i).formatToParts()}formatInterval(t,i){return this.dtFormatter(t.start,i).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,i){return this.dtFormatter(t,i).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return Ii(t,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(y,g)=>this.loc.extract(t,y,g),o=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",a=()=>r?I_e(t):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(y,g)=>r?O_e(t,y):n(g?{month:y}:{month:y,day:"numeric"},"month"),c=(y,g)=>r?C_e(t,y):n(g?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),h=y=>{const g=jr.macroTokenToFormatOpts(y);return g?this.formatWithSystemDefault(t,g):y},p=y=>r?R_e(t,y):n({era:y},"era"),m=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return s?n({day:"numeric"},"day"):this.num(t.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(t.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(t.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(t.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(y)}};return w8(jr.parseFormat(i),m)}formatDurationFromString(t,i){const r=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=u=>c=>{const h=r(c);return h?this.num(u.get(h),c.length):c},n=jr.parseFormat(i),o=n.reduce((u,{literal:c,val:h})=>c?u:u.concat(h),[]),a=t.shiftTo(...o.map(r).filter(u=>u));return w8(n,s(a))}}const Kee=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function u0(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function c0(...e){return t=>e.reduce(([i,r,s],n)=>{const[o,a,u]=n(t,s);return[{...i,...o},a||r,u]},[{},null,1]).slice(0,2)}function d0(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const s=i.exec(e);if(s)return r(s)}return[null,null]}function ete(...e){return(t,i)=>{const r={};let s;for(s=0;s<e.length;s++)r[e[s]]=hd(t[i+s]);return[r,null,i+s]}}const tte=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,L_e=`(?:${tte.source}?(?:\\[(${Kee.source})\\])?)?`,N4=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ite=RegExp(`${N4.source}${L_e}`),L4=RegExp(`(?:T${ite.source})?`),k_e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,P_e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,D_e=/(\d{4})-?(\d{3})/,j_e=ete("weekYear","weekNumber","weekDay"),V_e=ete("year","ordinal"),z_e=/(\d{4})-(\d\d)-(\d\d)/,rte=RegExp(`${N4.source} ?(?:${tte.source}|(${Kee.source}))?`),U_e=RegExp(`(?: ${rte.source})?`);function Ig(e,t,i){const r=e[t];return Ce(r)?i:hd(r)}function q_e(e,t){return[{year:Ig(e,t),month:Ig(e,t+1,1),day:Ig(e,t+2,1)},null,t+3]}function h0(e,t){return[{hours:Ig(e,t,0),minutes:Ig(e,t+1,0),seconds:Ig(e,t+2,0),milliseconds:R4(e[t+3])},null,t+4]}function SS(e,t){const i=!e[t]&&!e[t+1],r=XA(e[t+1],e[t+2]),s=i?null:Oi.instance(r);return[{},s,t+3]}function TS(e,t){const i=e[t]?Zs.create(e[t]):null;return[{},i,t+1]}const G_e=RegExp(`^T?${N4.source}$`),B_e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function H_e(e){const[t,i,r,s,n,o,a,u,c]=e,h=t[0]==="-",p=u&&u[0]==="-",m=(y,g=!1)=>y!==void 0&&(g||y&&h)?-y:y;return[{years:m(Lh(i)),months:m(Lh(r)),weeks:m(Lh(s)),days:m(Lh(n)),hours:m(Lh(o)),minutes:m(Lh(a)),seconds:m(Lh(u),u==="-0"),milliseconds:m(R4(c),p)}]}const W_e={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function k4(e,t,i,r,s,n,o){const a={year:t.length===2?oN(hd(t)):hd(t),month:Hee.indexOf(i)+1,day:hd(r),hour:hd(s),minute:hd(n)};return o&&(a.second=hd(o)),e&&(a.weekday=e.length>3?Zee.indexOf(e)+1:Jee.indexOf(e)+1),a}const Z_e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function J_e(e){const[,t,i,r,s,n,o,a,u,c,h,p]=e,m=k4(t,s,r,i,n,o,a);let y;return u?y=W_e[u]:c?y=0:y=XA(h,p),[m,new Oi(y)]}function Y_e(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Q_e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,X_e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,K_e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function b8(e){const[,t,i,r,s,n,o,a]=e;return[k4(t,s,r,i,n,o,a),Oi.utcInstance]}function e1e(e){const[,t,i,r,s,n,o,a]=e;return[k4(t,a,i,r,s,n,o),Oi.utcInstance]}const t1e=u0(k_e,L4),i1e=u0(P_e,L4),r1e=u0(D_e,L4),s1e=u0(ite),ste=c0(q_e,h0,SS,TS),n1e=c0(j_e,h0,SS,TS),o1e=c0(V_e,h0,SS,TS),a1e=c0(h0,SS,TS);function l1e(e){return d0(e,[t1e,ste],[i1e,n1e],[r1e,o1e],[s1e,a1e])}function u1e(e){return d0(Y_e(e),[Z_e,J_e])}function c1e(e){return d0(e,[Q_e,b8],[X_e,b8],[K_e,e1e])}function d1e(e){return d0(e,[B_e,H_e])}const h1e=c0(h0);function p1e(e){return d0(e,[G_e,h1e])}const f1e=u0(z_e,U_e),m1e=u0(rte),y1e=c0(h0,SS,TS);function g1e(e){return d0(e,[f1e,ste],[m1e,y1e])}const _8="Invalid Duration",nte={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},v1e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...nte},kn=146097/400,vm=146097/4800,w1e={years:{quarters:4,months:12,weeks:kn/7,days:kn,hours:kn*24,minutes:kn*24*60,seconds:kn*24*60*60,milliseconds:kn*24*60*60*1e3},quarters:{months:3,weeks:kn/28,days:kn/4,hours:kn*24/4,minutes:kn*24*60/4,seconds:kn*24*60*60/4,milliseconds:kn*24*60*60*1e3/4},months:{weeks:vm/7,days:vm,hours:vm*24,minutes:vm*24*60,seconds:vm*24*60*60,milliseconds:vm*24*60*60*1e3},...nte},Kp=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],b1e=Kp.slice(0).reverse();function _c(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new et(r)}function ote(e,t){let i=t.milliseconds??0;for(const r of b1e.slice(1))t[r]&&(i+=t[r]*e[r].milliseconds);return i}function S8(e,t){const i=ote(e,t)<0?-1:1;Kp.reduceRight((r,s)=>{if(Ce(t[s]))return r;if(r){const n=t[r]*i,o=e[s][r],a=Math.floor(n/o);t[s]+=a*i,t[r]-=a*o*i}return s},null),Kp.reduce((r,s)=>{if(Ce(t[s]))return r;if(r){const n=t[r]%1;t[r]-=n,t[s]+=n*e[r][s]}return s},null)}function _1e(e){const t={};for(const[i,r]of Object.entries(e))r!==0&&(t[i]=r);return t}class et{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;let r=i?w1e:v1e;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||ht.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,i){return et.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new Nr(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new et({values:gM(t,et.normalizeUnit),loc:ht.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(th(t))return et.fromMillis(t);if(et.isDuration(t))return t;if(typeof t=="object")return et.fromObject(t);throw new Nr(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=d1e(t);return r?et.fromObject(r,i):et.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=p1e(t);return r?et.fromObject(r,i):et.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new Nr("need to specify a reason the Duration is invalid");const r=t instanceof ha?t:new ha(t,i);if(ui.throwOnInvalid)throw new Bbe(r);return new et({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new yee(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?jr.create(this.loc,r).formatDurationFromString(this,t):_8}toHuman(t={}){if(!this.isValid)return _8;const i=Kp.map(r=>{const s=this.values[r];return Ce(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(s)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=F4(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},ue.fromMillis(i,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?ote(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=et.fromDurationLike(t),r={};for(const s of Kp)(Cv(i.values,s)||Cv(this.values,s))&&(r[s]=i.get(s)+this.get(s));return _c(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=et.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=Bee(t(this.values[r],r));return _c(this,{values:i},!0)}get(t){return this[et.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...gM(t,et.normalizeUnit)};return _c(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r,matrix:s}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:s,conversionAccuracy:r};return _c(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return S8(this.matrix,t),_c(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=_1e(this.normalize().shiftToAll().toObject());return _c(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>et.normalizeUnit(o));const i={},r={},s=this.toObject();let n;for(const o of Kp)if(t.indexOf(o)>=0){n=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;th(s[o])&&(a+=s[o]);const u=Math.trunc(a);i[o]=u,r[o]=(a*1e3-u*1e3)/1e3}else th(s[o])&&(r[o]=s[o]);for(const o in r)r[o]!==0&&(i[n]+=o===n?r[o]:r[o]/this.matrix[n][o]);return S8(this.matrix,i),_c(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return _c(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of Kp)if(!i(this.values[r],t.values[r]))return!1;return!0}}const wm="Invalid Interval";function S1e(e,t){return!e||!e.isValid?li.invalid("missing or invalid start"):!t||!t.isValid?li.invalid("missing or invalid end"):t<e?li.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class li{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new Nr("need to specify a reason the Interval is invalid");const r=t instanceof ha?t:new ha(t,i);if(ui.throwOnInvalid)throw new Gbe(r);return new li({invalid:r})}static fromDateTimes(t,i){const r=G0(t),s=G0(i),n=S1e(r,s);return n??new li({start:r,end:s})}static after(t,i){const r=et.fromDurationLike(i),s=G0(t);return li.fromDateTimes(s,s.plus(r))}static before(t,i){const r=et.fromDurationLike(i),s=G0(t);return li.fromDateTimes(s.minus(r),s)}static fromISO(t,i){const[r,s]=(t||"").split("/",2);if(r&&s){let n,o;try{n=ue.fromISO(r,i),o=n.isValid}catch{o=!1}let a,u;try{a=ue.fromISO(s,i),u=a.isValid}catch{u=!1}if(o&&u)return li.fromDateTimes(n,a);if(o){const c=et.fromISO(s,i);if(c.isValid)return li.after(n,c)}else if(u){const c=et.fromISO(r,i);if(c.isValid)return li.before(a,c)}}return li.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(t,i);let s;return i!=null&&i.useLocaleWeeks?s=this.end.reconfigure({locale:r.locale}):s=this.end,s=s.startOf(t,i),Math.floor(s.diff(r,t).get(t))+(s.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?li.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(G0).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s}=this,n=0;for(;s<this.e;){const o=i[n]||this.e,a=+o>+this.e?this.e:o;r.push(li.fromDateTimes(s,a)),s=a,n+=1}return r}splitBy(t){const i=et.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,n;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(u=>u*s));n=+a>+this.e?this.e:a,o.push(li.fromDateTimes(r,n)),r=n,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:li.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return li.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const s=[],n=t.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...n),a=o.sort((u,c)=>u.time-c.time);for(const u of a)r+=u.type==="s"?1:-1,r===1?i=u.time:(i&&+i!=+u.time&&s.push(li.fromDateTimes(i,u.time)),i=null);return li.merge(s)}difference(...t){return li.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:wm}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=fM,i={}){return this.isValid?jr.create(this.s.loc.clone(i),t).formatInterval(this):wm}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:wm}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:wm}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:wm}toFormat(t,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:wm}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):et.invalid(this.invalidReason)}mapEndpoints(t){return li.fromDateTimes(t(this.s),t(this.e))}}class HT{static hasDST(t=ui.defaultZone){const i=ue.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return Zs.isValidZone(t)}static normalizeZone(t){return Ed(t,ui.defaultZone)}static getStartOfWeek({locale:t=null,locObj:i=null}={}){return(i||ht.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:i=null}={}){return(i||ht.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:i=null}={}){return(i||ht.create(t)).getWeekendDays().slice()}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||ht.create(i,r,n)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||ht.create(i,r,n)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||ht.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||ht.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return ht.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return ht.create(i,null,"gregory").eras(t)}static features(){return{relative:Uee(),localeWeek:qee()}}}function T8(e,t){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(et.fromMillis(r).as("days"))}function T1e(e,t,i){const r=[["years",(u,c)=>c.year-u.year],["quarters",(u,c)=>c.quarter-u.quarter+(c.year-u.year)*4],["months",(u,c)=>c.month-u.month+(c.year-u.year)*12],["weeks",(u,c)=>{const h=T8(u,c);return(h-h%7)/7}],["days",T8]],s={},n=e;let o,a;for(const[u,c]of r)i.indexOf(u)>=0&&(o=u,s[u]=c(e,t),a=n.plus(s),a>t?(s[u]--,e=n.plus(s),e>t&&(a=e,s[u]--,e=n.plus(s))):e=a);return[e,s,a,o]}function x1e(e,t,i,r){let[s,n,o,a]=T1e(e,t,i);const u=t-s,c=i.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);c.length===0&&(o<t&&(o=s.plus({[a]:1})),o!==s&&(n[a]=(n[a]||0)+u/(o-s)));const h=et.fromObject(n,r);return c.length>0?et.fromMillis(u,r).shiftTo(...c).plus(h):h}const $1e="missing Intl.DateTimeFormat.formatToParts support";function ot(e,t=i=>i){return{regex:e,deser:([i])=>t(f_e(i))}}const E1e="",ate=`[ ${E1e}]`,lte=new RegExp(ate,"g");function M1e(e){return e.replace(/\./g,"\\.?").replace(lte,ate)}function x8(e){return e.replace(/\./g,"").replace(lte," ").toLowerCase()}function Fo(e,t){return e===null?null:{regex:RegExp(e.map(M1e).join("|")),deser:([i])=>e.findIndex(r=>x8(i)===x8(r))+t}}function $8(e,t){return{regex:e,deser:([,i,r])=>XA(i,r),groups:t}}function WT(e){return{regex:e,deser:([t])=>t}}function A1e(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function I1e(e,t){const i=Ro(t),r=Ro(t,"{2}"),s=Ro(t,"{3}"),n=Ro(t,"{4}"),o=Ro(t,"{6}"),a=Ro(t,"{1,2}"),u=Ro(t,"{1,3}"),c=Ro(t,"{1,6}"),h=Ro(t,"{1,9}"),p=Ro(t,"{2,4}"),m=Ro(t,"{4,6}"),y=b=>({regex:RegExp(A1e(b.val)),deser:([w])=>w,literal:!0}),v=(b=>{if(e.literal)return y(b);switch(b.val){case"G":return Fo(t.eras("short"),0);case"GG":return Fo(t.eras("long"),0);case"y":return ot(c);case"yy":return ot(p,oN);case"yyyy":return ot(n);case"yyyyy":return ot(m);case"yyyyyy":return ot(o);case"M":return ot(a);case"MM":return ot(r);case"MMM":return Fo(t.months("short",!0),1);case"MMMM":return Fo(t.months("long",!0),1);case"L":return ot(a);case"LL":return ot(r);case"LLL":return Fo(t.months("short",!1),1);case"LLLL":return Fo(t.months("long",!1),1);case"d":return ot(a);case"dd":return ot(r);case"o":return ot(u);case"ooo":return ot(s);case"HH":return ot(r);case"H":return ot(a);case"hh":return ot(r);case"h":return ot(a);case"mm":return ot(r);case"m":return ot(a);case"q":return ot(a);case"qq":return ot(r);case"s":return ot(a);case"ss":return ot(r);case"S":return ot(u);case"SSS":return ot(s);case"u":return WT(h);case"uu":return WT(a);case"uuu":return ot(i);case"a":return Fo(t.meridiems(),0);case"kkkk":return ot(n);case"kk":return ot(p,oN);case"W":return ot(a);case"WW":return ot(r);case"E":case"c":return ot(i);case"EEE":return Fo(t.weekdays("short",!1),1);case"EEEE":return Fo(t.weekdays("long",!1),1);case"ccc":return Fo(t.weekdays("short",!0),1);case"cccc":return Fo(t.weekdays("long",!0),1);case"Z":case"ZZ":return $8(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return $8(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return WT(/[a-z_+-/]{1,256}?/i);case" ":return WT(/[^\S\n\r]/);default:return y(b)}})(e)||{invalidReason:$1e};return v.token=e,v}const C1e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function O1e(e,t,i){const{type:r,value:s}=e;if(r==="literal"){const u=/^\s+$/.test(s);return{literal:!u,val:u?" ":s}}const n=t[r];let o=r;r==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=C1e[o];if(typeof a=="object"&&(a=a[n]),a)return{literal:!1,val:a}}function R1e(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function F1e(e,t,i){const r=e.match(t);if(r){const s={};let n=1;for(const o in i)if(Cv(i,o)){const a=i[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(r.slice(n,n+u))),n+=u}return[r,s]}else return[r,{}]}function N1e(e){const t=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Ce(e.z)||(i=Zs.create(e.z)),Ce(e.Z)||(i||(i=new Oi(e.Z)),r=e.Z),Ce(e.q)||(e.M=(e.q-1)*3+1),Ce(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ce(e.u)||(e.S=R4(e.u)),[Object.keys(e).reduce((n,o)=>{const a=t(o);return a&&(n[a]=e[o]),n},{}),i,r]}let b3=null;function L1e(){return b3||(b3=ue.fromMillis(1555555555555)),b3}function k1e(e,t){if(e.literal)return e;const i=jr.macroTokenToFormatOpts(e.val),r=hte(i,t);return r==null||r.includes(void 0)?e:r}function ute(e,t){return Array.prototype.concat(...e.map(i=>k1e(i,t)))}class cte{constructor(t,i){if(this.locale=t,this.format=i,this.tokens=ute(jr.parseFormat(i),t),this.units=this.tokens.map(r=>I1e(r,t)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,s]=R1e(this.units);this.regex=RegExp(r,"i"),this.handlers=s}}explainFromTokens(t){if(this.isValid){const[i,r]=F1e(t,this.regex,this.handlers),[s,n,o]=r?N1e(r):[null,null,void 0];if(Cv(r,"a")&&Cv(r,"H"))throw new ag("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:s,zone:n,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function dte(e,t,i){return new cte(e,i).explainFromTokens(t)}function P1e(e,t,i){const{result:r,zone:s,specificOffset:n,invalidReason:o}=dte(e,t,i);return[r,s,n,o]}function hte(e,t){if(!e)return null;const r=jr.create(t,e).dtFormatter(L1e()),s=r.formatToParts(),n=r.resolvedOptions();return s.map(o=>O1e(o,e,n))}const _3="Invalid DateTime",D1e=864e13;function Ew(e){return new ha("unsupported zone",`the zone "${e.name}" is not supported`)}function S3(e){return e.weekData===null&&(e.weekData=mM(e.c)),e.weekData}function T3(e){return e.localWeekData===null&&(e.localWeekData=mM(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function kh(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new ue({...i,...t,old:i})}function pte(e,t,i){let r=e-t*60*1e3;const s=i.offset(r);if(t===s)return[r,t];r-=(s-t)*60*1e3;const n=i.offset(r);return s===n?[r,s]:[e-Math.min(s,n)*60*1e3,Math.max(s,n)]}function ZT(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Nx(e,t,i){return pte(QA(e),t,i)}function E8(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,n={...e.c,year:r,month:s,day:Math.min(e.c.day,yM(r,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=et.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=QA(n);let[u,c]=pte(a,i,e.zone);return o!==0&&(u+=o,c=e.zone.offset(u)),{ts:u,o:c}}function bm(e,t,i,r,s,n){const{setZone:o,zone:a}=i;if(e&&Object.keys(e).length!==0||t){const u=t||a,c=ue.fromObject(e,{...i,zone:u,specificOffset:n});return o?c:c.setZone(a)}else return ue.invalid(new ha("unparsable",`the input "${s}" can't be parsed as ${r}`))}function JT(e,t,i=!0){return e.isValid?jr.create(ht.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function x3(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=Ii(e.c.year,i?6:4),t?(r+="-",r+=Ii(e.c.month),r+="-",r+=Ii(e.c.day)):(r+=Ii(e.c.month),r+=Ii(e.c.day)),r}function M8(e,t,i,r,s,n){let o=Ii(e.c.hour);return t?(o+=":",o+=Ii(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(o+=":")):o+=Ii(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(o+=Ii(e.c.second),(e.c.millisecond!==0||!r)&&(o+=".",o+=Ii(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!n?o+="Z":e.o<0?(o+="-",o+=Ii(Math.trunc(-e.o/60)),o+=":",o+=Ii(Math.trunc(-e.o%60))):(o+="+",o+=Ii(Math.trunc(e.o/60)),o+=":",o+=Ii(Math.trunc(e.o%60)))),n&&(o+="["+e.zone.ianaName+"]"),o}const fte={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},j1e={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},V1e={ordinal:1,hour:0,minute:0,second:0,millisecond:0},mte=["year","month","day","hour","minute","second","millisecond"],z1e=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],U1e=["year","ordinal","hour","minute","second","millisecond"];function q1e(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new yee(e);return t}function A8(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return q1e(e)}}function G1e(e){return kx[e]||(Lx===void 0&&(Lx=ui.now()),kx[e]=e.offset(Lx)),kx[e]}function I8(e,t){const i=Ed(t.zone,ui.defaultZone);if(!i.isValid)return ue.invalid(Ew(i));const r=ht.fromObject(t);let s,n;if(Ce(e.year))s=ui.now();else{for(const u of mte)Ce(e[u])&&(e[u]=fte[u]);const o=Vee(e)||zee(e);if(o)return ue.invalid(o);const a=G1e(i);[s,n]=Nx(e,a,i)}return new ue({ts:s,zone:i,loc:r,o:n})}function C8(e,t,i){const r=Ce(i.round)?!0:i.round,s=(o,a)=>(o=F4(o,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(o,a)),n=o=>i.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(i.unit)return s(n(i.unit),i.unit);for(const o of i.units){const a=n(o);if(Math.abs(a)>=1)return s(a,o)}return s(e>t?-0:0,i.units[i.units.length-1])}function O8(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}let Lx,kx={};class ue{constructor(t){const i=t.zone||ui.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new ha("invalid input"):null)||(i.isValid?null:Ew(i));this.ts=Ce(t.ts)?ui.now():t.ts;let s=null,n=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[s,n]=[t.old.c,t.old.o];else{const a=th(t.o)&&!t.old?t.o:i.offset(this.ts);s=ZT(this.ts,a),r=Number.isNaN(s.year)?new ha("invalid input"):null,s=r?null:s,n=r?null:a}this._zone=i,this.loc=t.loc||ht.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new ue({})}static local(){const[t,i]=O8(arguments),[r,s,n,o,a,u,c]=i;return I8({year:r,month:s,day:n,hour:o,minute:a,second:u,millisecond:c},t)}static utc(){const[t,i]=O8(arguments),[r,s,n,o,a,u,c]=i;return t.zone=Oi.utcInstance,I8({year:r,month:s,day:n,hour:o,minute:a,second:u,millisecond:c},t)}static fromJSDate(t,i={}){const r=w_e(t)?t.valueOf():NaN;if(Number.isNaN(r))return ue.invalid("invalid input");const s=Ed(i.zone,ui.defaultZone);return s.isValid?new ue({ts:r,zone:s,loc:ht.fromObject(i)}):ue.invalid(Ew(s))}static fromMillis(t,i={}){if(th(t))return t<-864e13||t>D1e?ue.invalid("Timestamp out of range"):new ue({ts:t,zone:Ed(i.zone,ui.defaultZone),loc:ht.fromObject(i)});throw new Nr(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(th(t))return new ue({ts:t*1e3,zone:Ed(i.zone,ui.defaultZone),loc:ht.fromObject(i)});throw new Nr("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=Ed(i.zone,ui.defaultZone);if(!r.isValid)return ue.invalid(Ew(r));const s=ht.fromObject(i),n=gM(t,A8),{minDaysInFirstWeek:o,startOfWeek:a}=y8(n,s),u=ui.now(),c=Ce(i.specificOffset)?r.offset(u):i.specificOffset,h=!Ce(n.ordinal),p=!Ce(n.year),m=!Ce(n.month)||!Ce(n.day),y=p||m,g=n.weekYear||n.weekNumber;if((y||h)&&g)throw new ag("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&h)throw new ag("Can't mix ordinal dates with month/day");const v=g||n.weekday&&!y;let b,w,_=ZT(u,c);v?(b=z1e,w=j1e,_=mM(_,o,a)):h?(b=U1e,w=V1e,_=w3(_)):(b=mte,w=fte);let S=!1;for(const V of b){const H=n[V];Ce(H)?S?n[V]=w[V]:n[V]=_[V]:S=!0}const T=v?y_e(n,o,a):h?g_e(n):Vee(n),E=T||zee(n);if(E)return ue.invalid(E);const A=v?f8(n,o,a):h?m8(n):n,[C,O]=Nx(A,c,r),U=new ue({ts:C,zone:r,o:O,loc:s});return n.weekday&&y&&t.weekday!==U.weekday?ue.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${U.toISO()}`):U.isValid?U:ue.invalid(U.invalid)}static fromISO(t,i={}){const[r,s]=l1e(t);return bm(r,s,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,s]=u1e(t);return bm(r,s,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,s]=c1e(t);return bm(r,s,i,"HTTP",i)}static fromFormat(t,i,r={}){if(Ce(t)||Ce(i))throw new Nr("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=r,o=ht.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[a,u,c,h]=P1e(o,t,i);return h?ue.invalid(h):bm(a,u,r,`format ${i}`,t,c)}static fromString(t,i,r={}){return ue.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,s]=g1e(t);return bm(r,s,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new Nr("need to specify a reason the DateTime is invalid");const r=t instanceof ha?t:new ha(t,i);if(ui.throwOnInvalid)throw new qbe(r);return new ue({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){const r=hte(t,ht.fromObject(i));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(t,i={}){return ute(jr.parseFormat(t),ht.fromObject(i)).map(s=>s.val).join("")}static resetCache(){Lx=void 0,kx={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?S3(this).weekYear:NaN}get weekNumber(){return this.isValid?S3(this).weekNumber:NaN}get weekday(){return this.isValid?S3(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?T3(this).weekday:NaN}get localWeekNumber(){return this.isValid?T3(this).weekNumber:NaN}get localWeekYear(){return this.isValid?T3(this).weekYear:NaN}get ordinal(){return this.isValid?w3(this.c).ordinal:NaN}get monthShort(){return this.isValid?HT.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?HT.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?HT.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?HT.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,i=6e4,r=QA(this.c),s=this.zone.offset(r-t),n=this.zone.offset(r+t),o=this.zone.offset(r-s*i),a=this.zone.offset(r-n*i);if(o===a)return[this];const u=r-o*i,c=r-a*i,h=ZT(u,o),p=ZT(c,a);return h.hour===p.hour&&h.minute===p.minute&&h.second===p.second&&h.millisecond===p.millisecond?[kh(this,{ts:u}),kh(this,{ts:c})]:[this]}get isInLeapYear(){return _S(this.year)}get daysInMonth(){return yM(this.year,this.month)}get daysInYear(){return this.isValid?Ag(this.year):NaN}get weeksInWeekYear(){return this.isValid?f1(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?f1(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:s}=jr.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(t=0,i={}){return this.setZone(Oi.instance(t),i)}toLocal(){return this.setZone(ui.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=Ed(t,ui.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(i||r){const n=t.offset(this.ts),o=this.toObject();[s]=Nx(o,n,t)}return kh(this,{ts:s,zone:t})}else return ue.invalid(Ew(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return kh(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=gM(t,A8),{minDaysInFirstWeek:r,startOfWeek:s}=y8(i,this.loc),n=!Ce(i.weekYear)||!Ce(i.weekNumber)||!Ce(i.weekday),o=!Ce(i.ordinal),a=!Ce(i.year),u=!Ce(i.month)||!Ce(i.day),c=a||u,h=i.weekYear||i.weekNumber;if((c||o)&&h)throw new ag("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new ag("Can't mix ordinal dates with month/day");let p;n?p=f8({...mM(this.c,r,s),...i},r,s):Ce(i.ordinal)?(p={...this.toObject(),...i},Ce(i.day)&&(p.day=Math.min(yM(p.year,p.month),p.day))):p=m8({...w3(this.c),...i});const[m,y]=Nx(p,this.o,this.zone);return kh(this,{ts:m,o:y})}plus(t){if(!this.isValid)return this;const i=et.fromDurationLike(t);return kh(this,E8(this,i))}minus(t){if(!this.isValid)return this;const i=et.fromDurationLike(t).negate();return kh(this,E8(this,i))}startOf(t,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},s=et.normalizeUnit(t);switch(s){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(s==="weeks")if(i){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(r.weekNumber=this.weekNumber-1),r.weekday=n}else r.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);r.month=(n-1)*3+1}return this.set(r)}endOf(t,i){return this.isValid?this.plus({[t]:1}).startOf(t,i).minus(1):this}toFormat(t,i={}){return this.isValid?jr.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):_3}toLocaleString(t=fM,i={}){return this.isValid?jr.create(this.loc.clone(i),t).formatDateTime(this):_3}toLocaleParts(t={}){return this.isValid?jr.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=x3(this,o);return a+="T",a+=M8(this,o,i,r,s,n),a}toISODate({format:t="extended"}={}){return this.isValid?x3(this,t==="extended"):null}toISOWeekDate(){return JT(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+M8(this,o==="extended",i,t,r,n):null}toRFC2822(){return JT(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return JT(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?x3(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||t)&&(r&&(s+=" "),i?s+="z":t&&(s+="ZZ")),JT(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():_3}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return et.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},n=b_e(i).map(et.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,u=o?t:this,c=x1e(a,u,n,s);return o?c.negate():c}diffNow(t="milliseconds",i={}){return this.diff(ue.now(),t,i)}until(t){return this.isValid?li.fromDateTimes(this,t):this}hasSame(t,i,r){if(!this.isValid)return!1;const s=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(i,r)<=s&&s<=n.endOf(i,r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||ue.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=t.unit;return Array.isArray(t.unit)&&(s=t.unit,n=void 0),C8(i,this.plus(r),{...t,numeric:"always",units:s,unit:n})}toRelativeCalendar(t={}){return this.isValid?C8(t.base||ue.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(ue.isDateTime))throw new Nr("min requires all arguments be DateTimes");return g8(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(ue.isDateTime))throw new Nr("max requires all arguments be DateTimes");return g8(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:s=null,numberingSystem:n=null}=r,o=ht.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return dte(o,t,i)}static fromStringExplain(t,i,r={}){return ue.fromFormatExplain(t,i,r)}static buildFormatParser(t,i={}){const{locale:r=null,numberingSystem:s=null}=i,n=ht.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return new cte(n,t)}static fromFormatParser(t,i,r={}){if(Ce(t)||Ce(i))throw new Nr("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=r,o=ht.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!o.equals(i.locale))throw new Nr(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:a,zone:u,specificOffset:c,invalidReason:h}=i.explainFromTokens(t);return h?ue.invalid(h):bm(a,u,r,`format ${i.format}`,t,c)}static get DATE_SHORT(){return fM}static get DATE_MED(){return gee}static get DATE_MED_WITH_WEEKDAY(){return Hbe}static get DATE_FULL(){return vee}static get DATE_HUGE(){return wee}static get TIME_SIMPLE(){return bee}static get TIME_WITH_SECONDS(){return _ee}static get TIME_WITH_SHORT_OFFSET(){return See}static get TIME_WITH_LONG_OFFSET(){return Tee}static get TIME_24_SIMPLE(){return xee}static get TIME_24_WITH_SECONDS(){return $ee}static get TIME_24_WITH_SHORT_OFFSET(){return Eee}static get TIME_24_WITH_LONG_OFFSET(){return Mee}static get DATETIME_SHORT(){return Aee}static get DATETIME_SHORT_WITH_SECONDS(){return Iee}static get DATETIME_MED(){return Cee}static get DATETIME_MED_WITH_SECONDS(){return Oee}static get DATETIME_MED_WITH_WEEKDAY(){return Wbe}static get DATETIME_FULL(){return Ree}static get DATETIME_FULL_WITH_SECONDS(){return Fee}static get DATETIME_HUGE(){return Nee}static get DATETIME_HUGE_WITH_SECONDS(){return Lee}}function G0(e){if(ue.isDateTime(e))return e;if(e&&e.valueOf&&th(e.valueOf()))return ue.fromJSDate(e);if(e&&typeof e=="object")return ue.fromObject(e);throw new Nr(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const B1e="shortOffset";function H1e(e){return"timeZoneIANA"in e}function W1e(e){return e.startsWith("UTC")}function vM(e,t=!1){return{json:{read:{source:e,reader:(i,r)=>r[e]?Px(r[e]):null},write:!!t&&{allowNull:!0,writer(i,r){r[e]=i?Z1e(i):null}}}}}function Px(e,t=An){return e?H1e(e)?e.timeZoneIANA:J1e(e,t):t}function Z1e(e){return{timeZoneIANA:e}}function J1e(e,t=An){if(!e||!i8.has(e.timeZone))return t;const i=i8.get(e.timeZone);return W1e(e.timeZone)||e.respectsDaylightSaving?i:Y1e(i)}function Y1e(e){const t=ue.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Oi.instance(-i).formatOffset(0,"narrow")}`}function yte(e,t,i,r,s){if(t&&s==="date")return{timeZone:bl,timeZoneName:void 0};const n=r.timeStyle||r.hour,o=i===Wf;return{timeZone:o?s==="timestamp-offset"?void 0:e??bl:i,timeZoneName:o&&n?B1e:void 0}}function gte(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return e===An||e===Wf||t.has(e.toLowerCase())||i.has(e.toLowerCase())}const Q1e={year:void 0,month:void 0,day:void 0,weekday:void 0},X1e={hour:void 0,minute:void 0,second:void 0},vte={timeZone:bl},$a={year:"numeric",month:"numeric",day:"numeric"},B0={year:"numeric",month:"long",day:"numeric"},H0={year:"numeric",month:"short",day:"numeric"},W0={year:"numeric",month:"long",weekday:"long",day:"numeric"},pd={hour:"numeric",minute:"numeric"},ep={...pd,second:"numeric"},wte={hourCycle:"h23"},Z0={...pd,...wte},J0={...ep,...wte},bte={"short-date":$a,"short-date-short-time":{...$a,...pd},"short-date-short-time-24":{...$a,...Z0},"short-date-long-time":{...$a,...ep},"short-date-long-time-24":{...$a,...J0},"short-date-le":$a,"short-date-le-short-time":{...$a,...pd},"short-date-le-short-time-24":{...$a,...Z0},"short-date-le-long-time":{...$a,...ep},"short-date-le-long-time-24":{...$a,...J0},"long-month-day-year":B0,"long-month-day-year-short-time":{...B0,...pd},"long-month-day-year-short-time-24":{...B0,...Z0},"long-month-day-year-long-time":{...B0,...ep},"long-month-day-year-long-time-24":{...B0,...J0},"day-short-month-year":H0,"day-short-month-year-short-time":{...H0,...pd},"day-short-month-year-short-time-24":{...H0,...Z0},"day-short-month-year-long-time":{...H0,...ep},"day-short-month-year-long-time-24":{...H0,...J0},"long-date":W0,"long-date-short-time":{...W0,...pd},"long-date-short-time-24":{...W0,...Z0},"long-date-long-time":{...W0,...ep},"long-date-long-time-24":{...W0,...J0},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":pd,"long-time":ep},K1e=Si()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),_te={ar:"ar-u-nu-latn-ca-gregory"};let aN=new WeakMap;const eI=bte["short-date-short-time"];function eSe(e){let t=aN.get(e);if(!t){const i=Gr(),r=_te[i]||i,s=tI(e.timeZone??An),n={...e,timeZone:s};t=new Intl.DateTimeFormat(r,n),aN.set(e,t)}return t}function Hm(e){return bte[e]}function yn(e,t=eI){return eSe(t).format(e)}function tSe(e,t=eI){return yn(new Date(e),{...t,...vte,...X1e})}function iSe(e,t=eI){return yn(new Date(`1970-01-01T${e}Z`),{...t,...vte,...Q1e})}function rSe(e,t=eI){if(t.timeZone)return yn(new Date(e),t);const i=ue.fromISO(e,{setZone:!0}),r=Gr(),s=_te[r]??r,n=i.offset===0?bl:t.timeZone,o={...t,timeZone:n};return i.toLocaleString(o,{locale:s})}function tI(e){switch(e){case An:return Ube;case Wf:return bl;default:return e}}A4(()=>{aN=new WeakMap});const sSe={ar:"ar-u-nu-latn"};let Dx=new WeakMap,Ste={};function lN(e){const t=e||Ste;if(!Dx.has(t)){const i=Gr(),r=sSe[Gr()]||i;Dx.set(t,new Intl.NumberFormat(r,e))}return Dx.get(t)}function wM(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function ar(e,t){return Object.is(e,-0)&&(e=0),lN(t).format(e)}function DWe(e,t=Gr()){var r,s;if(!e)return null;let i=R8.get(t);if(!i){const n=lN().formatToParts(12345.6),o=[...lN({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map((y,g)=>[y,g])),u=new RegExp(`[${(r=n.find(y=>y.type==="group"))==null?void 0:r.value}]`,"g"),c=new RegExp(`[${(s=n.find(y=>y.type==="decimal"))==null?void 0:s.value}]`),h=new RegExp(`[${o.join("")}]`,"g"),p=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,m=/[-\u2212\u2013\u2014\u2015]/g;i=y=>{if((y=y.trim().replaceAll(u,"").replace(c,".").replace(h,v=>String(a.get(v))).replaceAll(p,"").replaceAll(m,"-"))==="")return null;const g=Number(y);return isNaN(g)?null:g},R8.set(t,i)}return i(e)}A4(()=>{Dx=new WeakMap,Ste={}});const R8=new Map,Tte=()=>q.getLogger("esri.intl.substitute");function eo(e,t,i={}){const{format:r={}}=i;return ga(e,s=>nSe(s,t,r))}function nSe(e,t,i){let r,s;const n=e.indexOf(":");if(n===-1?r=e.trim():(r=e.slice(0,n).trim(),s=e.slice(n+1).trim()),!r)return"";const o=aS(r,t);if(o==null)return"";const a=(s?i==null?void 0:i[s]:null)??(i==null?void 0:i[r]);return a?oSe(o,a):s?aSe(o,s):P4(o)}function oSe(e,t){switch(t.type){case"date":return yn(e,t.intlOptions);case"number":return ar(e,t.intlOptions);default:return Tte().warn("missing format descriptor for key {key}"),P4(e)}}function aSe(e,t){switch(t.toLowerCase()){case"dateformat":return yn(e);case"numberformat":return ar(e);default:return Tte().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?yn(e):/^numberformat/i.test(t)?ar(e):P4(e)}}function P4(e){switch(typeof e){case"string":return e;case"number":return ar(e);case"boolean":return""+e;default:return e instanceof Date?yn(e):""}}const F8=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,xte={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function lSe(e){return e in xte}function N8(e){if(lSe(e)){const t=xte[e];return t===!0?e:t}return null}const Mw=[],Cg=new Map;function L8(e){for(const t of Cg.keys())Ete(e.pattern,t)&&Cg.delete(t)}function uSe(e){return Mw.includes(e)||(L8(e),Mw.unshift(e)),Ke(()=>{const t=Mw.indexOf(e);t>-1&&(Mw.splice(t,1),L8(e))})}async function iI(e){const t=Gr();Cg.has(e)||Cg.set(e,cSe(e,t));const i=Cg.get(e);return i&&await dSe.add(i),i}function $te(e){if(!F8.test(e))return null;const t=F8.exec(e);if(t===null)return null;const[,i,r]=t;return N8(i+(r?"-"+r.toUpperCase():""))??N8(i)}async function cSe(e,t){const i=[];for(const r of Mw)if(Ete(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(s){i.push(s)}throw i.length?new M("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new M("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function Ete(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}A4(()=>{Cg.clear()});const dSe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Bs())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function hSe(e,t,i,r){const s=t.exec(i);if(!s)throw new M("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],a=$te(r),u=`${n}${o}.json`,c=a?`${n}${o}_${a}.json`:u;let h;try{h=await k8(e(c))}catch(p){if(c===u)throw new M("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:p});try{h=await k8(e(u))}catch(m){throw new M("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:m})}}return h}async function k8(e){if(P8.fetchBundleAsset!=null)return P8.fetchBundleAsset(e);const t=await Be(e,{responseType:"text"});return JSON.parse(t.data)}let pSe=class{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?n=>new URL(n,new URL(r,window.location.href)).href:r instanceof URL?n=>new URL(n,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,i){return hSe(this.getAssetUrl,this.matcher,t,i)}};function fSe(e){return new pSe(e)}const P8={};uSe(fSe({pattern:"esri/",location:Yt}));const D8={};function mSe(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((i=e.packages)==null?void 0:i.slice())||[],paths:{...D8.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=D8.baseUrl),t}let ySe=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}},jx=class{constructor(){this._dispatcher=new ySe,this._workerPostMessage({type:nr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){GE(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){GE(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=p1(t);if(i&&i.type===nr.OPEN){const{modulePath:r,jobId:s}=i;let n=await fh.loadWorker(r);n||(n=await import(r));const o=fh.connect(n);this._workerPostMessage({type:nr.OPENED,jobId:s,data:o})}}};const uN=()=>q.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:gSe}=nr,vSe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let YT,QT;const j8="Failed to create Worker. Fallback to execute module in main thread";async function wSe(){if(!D("esri-workers"))return V8(new jx);if(!YT&&!QT)try{const t=vSe.split("{CONFIGURATION}").join(bSe());YT=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){QT=t||{}}let e;if(YT)try{e=new Worker(YT,{name:"esri-worker-"+_Se++})}catch{uN().warn(j8,QT),e=new jx}else uN().warn(j8,QT),e=new jx;return V8(e)}async function V8(e){return new Promise(t=>{function i(s){const n=p1(s);n&&n.type===gSe&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(s){s.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),uN().warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new jx).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function bSe(){let e;if(nt.default!=null){const s={...nt};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(nt));e.assetsPath=js(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?js(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Gr(),e.has={"esri-csp-restrictions":D("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":D("esri-2d-update-debug"),"esri-2d-log-updating":D("esri-2d-log-updating"),"featurelayer-pbf":D("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":D("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":D("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":D("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":D("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":D("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":D("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":D("featurelayer-snapshot-enabled"),"esri-atomics":D("esri-atomics"),"esri-shared-array-buffer":D("esri-shared-array-buffer"),"esri-tiles-debug":D("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":D("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":D("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=js(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=js(e.workers.workerPath):e.workers.workerPath=js(Yt("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=nt.workers.loaderConfig,i=mSe({baseUrl:t==null?void 0:t.baseUrl,locale:Gr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:{buildDate:sK,fullVersion:d4,revision:nK}})}let _Se=0;const{ABORT:z8,INVOKE:SSe,OPEN:TSe,OPENED:xSe,RESPONSE:Y0}=nr;let $Se=class Mte{static async create(t){const i=await wSe();return new Mte(i,t)}constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),q.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,s=pee();return new Promise((n,o)=>{const a={resolve:n,reject:o,abortHandle:z5(r,()=>{this._outJobs.delete(s),this._post({type:z8,jobId:s})})};this._outJobs.set(s,a),this._post({type:TSe,jobId:s,modulePath:t})})}_onMessage(t){const i=p1(t);if(i)switch(i.type){case xSe:this._onOpenedMessage(i);break;case Y0:this._onResponseMessage(i);break;case z8:this._onAbortMessage(i);break;case SSe:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:n}=t,o=n?new AbortController:null,a=this._inJobs,u=Vbe[i];let c;try{if(typeof u!="function")throw new TypeError(`${i} is not a function`);c=u.call(null,s,{signal:o?o.signal:null})}catch(h){return void this._post({type:Y0,jobId:r,error:h1(h)})}xl(c)?(a.set(r,{controller:o,promise:c}),c.then(h=>{a.has(r)&&(a.delete(r),this._post({type:Y0,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),h||(h={message:"Error encountered at method"+i}),fi(h)||this._post({type:Y0,jobId:r,error:h1(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:Y0,jobId:r},c)}_onOpenedMessage(t){const{jobId:i,data:r}=t,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),kt(s.abortHandle),s.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),kt(n.abortHandle),r?n.reject(M.fromJSON(JSON.parse(r))):n.resolve(s))}_post(t,i,r){return M4(this.worker,t,i,r)}};const U8=D("host-browser")?Math.min(navigator.hardwareConcurrency-1,D("workers-pool-size")??8):0;let ef=D("esri-mobile")?Math.min(U8,3):U8;ef||(ef=D("safari")&&D("mac")?7:2);let q8=0;const Vx=[];function ESe(){Ite()}async function XT(e,t){const i=new jbe,{registryTarget:r,...s}=t;return await i.open(e,s),r&&Ibe(r,i),i}async function Ate(e,t={}){if(typeof e!="string")throw new M("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(D("host-webworker")&&!D("esri-workers")&&(i="local"),i==="local"){let r=await fh.loadWorker(e);r||(r=await import(e)),Fe(t.signal);const s=t.client||r;return XT([fh.connect(r,t.schedule)],{...t,client:s})}if(await Ite(),Fe(t.signal),i==="dedicated"){const r=q8++%ef;return XT([await Vx[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,ef);if(r<ef){const s=new Array(r);for(let n=0;n<r;++n){const o=q8++%ef;s[n]=Vx[o].open(e,t)}return XT(s,t)}}return XT(Vx.map(r=>r.open(e,t)),t)}let KT=null;async function Ite(){if(KT)return KT;new AbortController;const e=[];for(let t=0;t<ef;t++){const i=$Se.create(t).then(r=>(Vx[t]=r,r));e.push(i)}return KT=Promise.all(e),KT}function $h(){return[0,0,0]}function D4(e){return[e[0],e[1],e[2]]}function p0(e,t,i){return[e,t,i]}function MSe(e,t,i){return[e,t,i]}function ASe(e,t=$h()){const i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function ISe(e,t){return new Float64Array(e,t,3)}function Cte(){return $h()}function Ote(){return p0(1,1,1)}function Rte(){return p0(1,0,0)}function Fte(){return p0(0,1,0)}function Nte(){return p0(0,0,1)}const CSe=Cte(),Lte=Ote(),OSe=Rte(),RSe=Fte(),FSe=Nte();Object.freeze(Object.defineProperty({__proto__:null,ONES:Lte,UNIT_X:OSe,UNIT_Y:RSe,UNIT_Z:FSe,ZEROS:CSe,clone:D4,create:$h,createView:ISe,freeze:MSe,fromArray:ASe,fromValues:p0,ones:Ote,unitX:Rte,unitY:Fte,unitZ:Nte,zeros:Cte},Symbol.toStringTag,{value:"Module"}));const UWe=Math.PI/180,qWe=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Sc=Kt.radius,No=Kt.eccentricitySquared,NSe={a1:Sc*No,a2:Sc*No*Sc*No,a3:Sc*No*No/2,a4:Sc*No*Sc*No*2.5,a5:Sc*No+Sc*No*No/2,a6:1-No},GWe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Kt.radius,f:Kt.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:dh.radius,f:dh.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:ml.radius,f:ml.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:ml.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var k;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(k||(k={}));const LSe={[k.WGS84]:{[k.CGCS2000]:Ft,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:Ft,[k.SPHERICAL_ECEF]:g_,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:Og,[k.PLATE_CARREE]:Rg,[k.WGS84]:Ft,[k.WGS84_ECEF]:Lg},[k.CGCS2000]:{[k.CGCS2000]:Ft,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:Ft,[k.SPHERICAL_ECEF]:g_,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:Og,[k.PLATE_CARREE]:Rg,[k.WGS84]:Ft,[k.WGS84_ECEF]:Lg},[k.GCSMARS2000]:{[k.CGCS2000]:null,[k.GCSMARS2000]:Ft,[k.GCSMOON2000]:null,[k.LON_LAT]:Ft,[k.SPHERICAL_ECEF]:null,[k.SPHERICAL_MARS_PCPF]:H8,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:null,[k.PLATE_CARREE]:null,[k.WGS84]:null,[k.WGS84_ECEF]:null},[k.GCSMOON2000]:{[k.CGCS2000]:null,[k.GCSMARS2000]:null,[k.GCSMOON2000]:Ft,[k.LON_LAT]:Ft,[k.SPHERICAL_ECEF]:null,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:B8,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:null,[k.PLATE_CARREE]:null,[k.WGS84]:null,[k.WGS84_ECEF]:null},[k.WEB_MERCATOR]:{[k.CGCS2000]:y_,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:y_,[k.SPHERICAL_ECEF]:PSe,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:Ft,[k.PLATE_CARREE]:VSe,[k.WGS84]:y_,[k.WGS84_ECEF]:DSe},[k.WGS84_ECEF]:{[k.CGCS2000]:kg,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:kg,[k.SPHERICAL_ECEF]:JSe,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:YSe,[k.PLATE_CARREE]:zSe,[k.WGS84]:kg,[k.WGS84_ECEF]:Ft},[k.SPHERICAL_ECEF]:{[k.CGCS2000]:Ng,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:Ng,[k.SPHERICAL_ECEF]:Ft,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:HSe,[k.PLATE_CARREE]:USe,[k.WGS84]:Ng,[k.WGS84_ECEF]:WSe},[k.SPHERICAL_MARS_PCPF]:{[k.CGCS2000]:null,[k.GCSMARS2000]:Z8,[k.GCSMOON2000]:null,[k.LON_LAT]:Z8,[k.SPHERICAL_ECEF]:null,[k.SPHERICAL_MARS_PCPF]:Ft,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:null,[k.PLATE_CARREE]:null,[k.WGS84]:null,[k.WGS84_ECEF]:null},[k.SPHERICAL_MOON_PCPF]:{[k.CGCS2000]:null,[k.GCSMARS2000]:null,[k.GCSMOON2000]:W8,[k.LON_LAT]:W8,[k.SPHERICAL_ECEF]:null,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:Ft,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:null,[k.PLATE_CARREE]:null,[k.WGS84]:null,[k.WGS84_ECEF]:null},[k.UNKNOWN]:{[k.CGCS2000]:null,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:null,[k.SPHERICAL_ECEF]:null,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:Ft,[k.WEB_MERCATOR]:null,[k.PLATE_CARREE]:null,[k.WGS84]:null,[k.WGS84_ECEF]:null},[k.LON_LAT]:{[k.CGCS2000]:Ft,[k.GCSMARS2000]:Ft,[k.GCSMOON2000]:Ft,[k.LON_LAT]:Ft,[k.SPHERICAL_ECEF]:g_,[k.SPHERICAL_MARS_PCPF]:H8,[k.SPHERICAL_MOON_PCPF]:B8,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:Og,[k.PLATE_CARREE]:Rg,[k.WGS84]:Ft,[k.WGS84_ECEF]:Lg},[k.PLATE_CARREE]:{[k.CGCS2000]:Fg,[k.GCSMARS2000]:null,[k.GCSMOON2000]:null,[k.LON_LAT]:Fg,[k.SPHERICAL_ECEF]:qSe,[k.SPHERICAL_MARS_PCPF]:null,[k.SPHERICAL_MOON_PCPF]:null,[k.UNKNOWN]:null,[k.WEB_MERCATOR]:GSe,[k.PLATE_CARREE]:Ft,[k.WGS84]:Fg,[k.WGS84_ECEF]:BSe}};function kte(e,t){var i;return(i=kSe(e,t))==null?void 0:i.projector}function kSe(e,t){if(e==null||t==null)return null;if(Ll.source.spatialReference===e&&Ll.dest.spatialReference===t)return Ll;const i=G8(e,Ll.source),r=G8(t,Ll.dest);return i===k.UNKNOWN&&r===k.UNKNOWN?ei(e,t)?Ll.projector=Ft:Ll.projector=null:Ll.projector=LSe[i][r],Ll}function G8(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=$o(e,1)),cM(e)?t.spatialReferenceId=k.SPHERICAL_ECEF:zf(e)?t.spatialReferenceId=k.WGS84:Mn(e)?t.spatialReferenceId=k.WEB_MERCATOR:ewe(e)?t.spatialReferenceId=k.PLATE_CARREE:e.wkt===rwe.wkt?t.spatialReferenceId=k.WGS84_ECEF:e.wkid===Vf.CGCS2000?t.spatialReferenceId=k.CGCS2000:e.wkt===g4.wkt?t.spatialReferenceId=k.SPHERICAL_MARS_PCPF:e.wkt===v4.wkt?t.spatialReferenceId=k.SPHERICAL_MOON_PCPF:SK(e)?t.spatialReferenceId=k.GCSMARS2000:TK(e)?t.spatialReferenceId=k.GCSMOON2000:t.spatialReferenceId=k.UNKNOWN):k.UNKNOWN}function Ft(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function y_(e,t,i,r){i[r]=Rv*(e[t]/Sf),i[r+1]=Rv*(Pte-2*Math.atan(Math.exp(-e[t+1]/Sf))),i[r+2]=e[t+2]}function PSe(e,t,i,r){const s=e[t]/Sf,n=Pte-2*Math.atan(Math.exp(-e[t+1]/Sf)),o=Sf+e[t+2],a=Math.cos(n)*o;i[r]=Math.cos(s)*a,i[r+1]=Math.sin(s)*a,i[r+2]=Math.sin(n)*o}function DSe(e,t,i,r){y_(e,t,i,r),Lg(i,r,i,r)}function jSe(e,t,i,r,s){const n=.4999999*Math.PI,o=Ws(Ov*e[t+1],-n,n),a=Math.sin(o);i[r++]=Ov*e[t]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=e[t+2]}function Og(e,t,i,r){jSe(e,t,i,r,Kt)}function Rg(e,t,i,r){i[r]=e[t]*J8,i[r+1]=e[t+1]*J8,i[r+2]=e[t+2]}function Fg(e,t,i,r){i[r]=e[t]*Y8,i[r+1]=e[t+1]*Y8,i[r+2]=e[t+2]}function VSe(e,t,i,r){y_(e,t,i,r),Rg(i,r,i,r)}function zSe(e,t,i,r){kg(e,t,i,r),Rg(i,r,i,r)}function USe(e,t,i,r){Ng(e,t,i,r),Rg(i,r,i,r)}function qSe(e,t,i,r){Fg(e,t,i,r),g_(i,r,i,r)}function GSe(e,t,i,r){Fg(e,t,i,r),Og(i,r,i,r)}function BSe(e,t,i,r){Fg(e,t,i,r),Lg(i,r,i,r)}function j4(e,t,i,r,s){const n=s+e[t+2],o=Ov*e[t+1],a=Ov*e[t],u=Math.cos(o)*n;i[r]=Math.cos(a)*u,i[r+1]=Math.sin(a)*u,i[r+2]=Math.sin(o)*n}function B8(e,t,i,r){j4(e,t,i,r,dh.radius)}function H8(e,t,i,r){j4(e,t,i,r,ml.radius)}function g_(e,t,i,r){j4(e,t,i,r,Kt.radius)}function V4(e,t,i,r,s){const n=e[t],o=e[t+1],a=e[t+2],u=Math.sqrt(n*n+o*o+a*a),c=Eve(a/(u===0?1:u)),h=Math.atan2(o,n);i[r++]=Rv*h,i[r++]=Rv*c,i[r]=u-s}function W8(e,t,i,r){V4(e,t,i,r,dh.radius)}function Z8(e,t,i,r){V4(e,t,i,r,ml.radius)}function Ng(e,t,i,r){V4(e,t,i,r,Kt.radius)}function HSe(e,t,i,r){Ng(e,t,i,r),Og(i,r,i,r)}function WSe(e,t,i,r){Ng(e,t,i,r),Lg(i,r,i,r)}function ZSe(e,t,i,r,s){const n=Ov*e[t],o=Ov*e[t+1],a=e[t+2],u=Math.sin(o),c=Math.cos(o),h=s.radius/Math.sqrt(1-s.eccentricitySquared*u*u);i[r++]=(h+a)*c*Math.cos(n),i[r++]=(h+a)*c*Math.sin(n),i[r++]=(h*(1-s.eccentricitySquared)+a)*u}function Lg(e,t,i,r){ZSe(e,t,i,r,Kt)}function kg(e,t,i,r){const s=NSe,n=e[t],o=e[t+1],a=e[t+2];let u,c,h,p,m,y,g,v,b,w,_,S,T,E,A,C,O,U,V,H,te;u=Math.abs(a),c=n*n+o*o,h=Math.sqrt(c),p=c+a*a,m=Math.sqrt(p),H=Math.atan2(o,n),y=a*a/p,g=c/p,E=s.a2/m,A=s.a3-s.a4/m,g>.3?(v=u/m*(1+g*(s.a1+E+y*A)/m),V=Math.asin(v),w=v*v,b=Math.sqrt(1-w)):(b=h/m*(1-y*(s.a5-E-g*A)/m),V=Math.acos(b),w=1-b*b,v=Math.sqrt(w)),_=1-Kt.eccentricitySquared*w,S=Kt.radius/Math.sqrt(_),T=s.a6*S,E=h-S*b,A=u-T*v,O=b*E+v*A,C=b*A-v*E,U=C/(T/_+O),V+=U,te=O+C*U/2,a<0&&(V=-V),i[r++]=Rv*H,i[r++]=Rv*V,i[r]=te}function JSe(e,t,i,r){kg(e,t,i,r),g_(i,r,i,r)}function YSe(e,t,i,r){kg(e,t,i,r),Og(i,r,i,r)}const Ll={source:{spatialReference:null,spatialReferenceId:k.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:k.UNKNOWN,metersPerUnit:1},projector:Ft},Ov=jA(1),Rv=RX(1),Pte=.5*Math.PI,Sf=Kt.radius,J8=Sf*Math.PI/180,Y8=180/(Sf*Math.PI);function xS(e,t,i,r,s,n,o=Math.floor(e.length/3)){const a=kte(t,s);if(a==null)return!1;if(a===Ft){if(e===r&&i===n)return!0;const c=i+3*o;for(let h=i,p=n;h<c;h++,p++)r[p]=e[h];return!0}const u=i+3*o;for(let c=i,h=n;c<u;c+=3,h+=3)a(e,c,r,h);return!0}const BWe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:xS},Symbol.toStringTag,{value:"Module"}));function Q8(e,t,i,r,s,n){return e2[0]=e,e2[1]=t,e2[2]=i,xS(e2,r,0,s,n,0)}const e2=$h();let t2=0,$3=class cN{static fromGE(t){const i=new cN;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}constructor(t){this.uid=t2++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=t2++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=t2++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=t2++}getInverse(){const t=new cN;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},bM=class Aw{static cacheKey(t,i){var r,s,n,o,a,u;return[((r=t.wkid)==null?void 0:r.toString())??"-1",((s=t.wkt)==null?void 0:s.toString())??"",((n=t.wkt2)==null?void 0:n.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((a=i.wkt)==null?void 0:a.toString())??"",((u=i.wkt2)==null?void 0:u.toString())??""].join()}static fromGE(t){const i=new Aw;let r="";for(const s of t.steps){const n=$3.fromGE(s);i.steps.push(n),r+=n.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const i of t.steps)i instanceof $3?this.steps.push(i):this.steps.push(new $3({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const t=new Aw;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cachedProjection[Aw.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const n of this.steps)r+=n.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const s=this._cachedProjection[Aw.cacheKey(t,i)];return s===void 0?null:s}};function Dte(e,t,i){if(t==null||i==null||i.vcsWkid||ei(t,i)||ph(t)||ph(i))return null;const r=$v(t)/$v(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>QSe(s,r);case"polyline":case"esriGeometryPolyline":return s=>KSe(s,r);case"polygon":case"esriGeometryPolygon":return s=>XSe(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>eTe(s,r);case"extent":case"esriGeometryEnvelope":return s=>tTe(s,r);default:return null}}function QSe(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function XSe(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function KSe(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function eTe(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function tTe(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let ya=null,mh=null,v_=null,zx={};const z4=new n0;function Eh(){return!!ya&&m4()}function jte(){return!!Eh()||(fe(z4),yh(),!1)}function Vte(e,t){return!e||!t||_a(e,t)||jte()}function iTe(e,t){return!_a(e,t)&&!Eh()}function yh(e){return v_==null&&(v_=Promise.all([yK(),L(()=>import("./geometryEngineBase-B0ZyeKAX.js"),__vite__mapDeps([4,1])).then(t=>t.g),L(()=>import("./hydrated-B3uhrdXC.js"),[])])),v_.then(([,t,{hydratedAdapter:i}])=>{Fe(e),mh=i,ya=t.default,ya._enableProjection(Y0e),z4.notify()})}function oc(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:(Ewe(e),m1(mh,e,e[0].spatialReference,t,i,r)):(Ev(e),m1(mh,[e],e.spatialReference,t,i,r)[0])}function m1(e,t,i,r,s=null,n=null){if(i==null||r==null)return t;if(_a(i,r,s))return t.map(o=>Ux(o,i,r));if(s==null&&cM(i))return t.map(o=>Ux(o,i,we.WGS84)).map(o=>y1(o,r));if(s==null&&cM(r))return t.map(o=>y1(o,we.WGS84)).map(o=>Ux(o,we.WGS84,r));if(s==null){const o=bM.cacheKey(i,r);zx[o]!==void 0?s=zx[o]:((s=qte(i,r,void 0))==null&&(s=new bM),zx[o]=s)}if(ya==null||e==null)throw new rI;return n!=null?ya._project(e,t,i,r,s,n):ya._project(e,t,i,r,s)}function zte(e,t){const i=Ute([e],t);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Ute(e,t){if(!Eh()){for(const i of e)if(i!=null&&!ei(i.spatialReference,t)&&cs(i.spatialReference)&&cs(t)&&!_a(i.spatialReference,t))return fe(z4),{pending:yh(),geometries:null}}return{pending:null,geometries:e.map(i=>i==null?null:ei(i.spatialReference,t)?i:cs(i.spatialReference)&&cs(t)?y1(i,t):null)}}function qte(e,t,i=null){if(e==null||t==null)return null;if(ya==null||mh==null)throw new rI;const r=ya._getTransformation(mh,e,t,i,i==null?void 0:i.spatialReference);return r!==null?bM.fromGE(r):null}function rTe(e,t,i=null){if(ya==null||mh==null)throw new rI;const r=ya._getTransformationBySuitability(mh,e,t,i,i==null?void 0:i.spatialReference);if(r!==null){const s=[];for(const n of r)s.push(bM.fromGE(n));return s}return[]}let rI=class extends M{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function sTe(){ya=null,mh=null,v_=null,zx={}}const nTe={get loadPromise(){return v_}};function y1(e,t){try{const i=oc(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=Dte(i.type,e.spatialReference,t);return r!=null&&r(i),i}catch(i){if(!(i instanceof rI))throw i;return null}}async function oTe(e,t,i){const r=e.spatialReference;return r!=null&&t!=null&&await $S(r,t,null,i),y1(e,t)}function _a(e,t,i){return!i&&(!!ei(e,t)||cs(e)&&cs(t)&&!!kte(e,t))}function aTe(e,t){if(ei(e,t))return!0;if(!cs(e)||!cs(t))return!1;const i=zf(e)||Mn(e)||jU(e),r=zf(t)||Mn(t)||jU(t);return i&&r}async function $S(e,t,i,r){if(Eh())return fU(r);if(Array.isArray(e)){for(const{source:s,dest:n,geographicTransformation:o}of e)if(s&&n&&!_a(s,n,o))return yh(r)}else if(e&&t&&!_a(e,t,i))return yh(r);return fU(r)}function Ux(e,t,i){return e?"x"in e?Gte(e,t,new Se,i,0):"xmin"in e?Zte(e,t,new gt,i,0):"rings"in e?Wte(e,t,new To,i,0):"paths"in e?Hte(e,t,new uo,i,0):"points"in e?Bte(e,t,new bS,i,0):null:null}function lTe(e,t,i=t.spatialReference,r=0){return i!=null&&e.spatialReference!=null&&Gte(e,e.spatialReference,t,i,r)!=null}function Gte(e,t,i,r,s){Lr[0]=e.x,Lr[1]=e.y;const n=e.z;return Lr[2]=n!==void 0?n:s,xS(Lr,t,0,Lr,r,0)?(i.x=Lr[0],i.y=Lr[1],i.spatialReference=r,n!==void 0||ph(r)?(i.z=Lr[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function uTe(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&Bte(e,e.spatialReference,t,i,r)!=null}function Bte(e,t,i,r,s){const{points:n,hasZ:o,hasM:a}=e,u=[],c=n.length,h=[];for(const m of n)h.push(m[0],m[1],o?m[2]:s);if(!xS(h,t,0,h,r,0,c))return null;const p=o||ph(r);for(let m=0;m<c;++m){const y=3*m,g=h[y],v=h[y+1];p&&a?u.push([g,v,h[y+2],n[m][3]]):p?u.push([g,v,h[y+2]]):a?u.push([g,v,n[m][2]]):u.push([g,v])}return i.points=u,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function cTe(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&Hte(e,e.spatialReference,t,i,r)!=null}function Hte(e,t,i,r,s){const{paths:n,hasZ:o,hasM:a}=e,u=[];if(!Jte(n,o??!1,a??!1,t,u,r,s))return null;const c=o||ph(r);return i.paths=u,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function dTe(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&Wte(e,e.spatialReference,t,i,r)!=null}function Wte(e,t,i,r,s){const{rings:n,hasZ:o,hasM:a}=e,u=[];if(!Jte(n,o??!1,a??!1,t,u,r,s))return null;const c=o||ph(r);return i.rings=u,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function hTe(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&Zte(e,e.spatialReference,t,i,r)!=null}function Zte(e,t,i,r,s){const{xmin:n,ymin:o,xmax:a,ymax:u,hasZ:c,hasM:h}=e,p=c?e.zmin:s;if(!Q8(n,o,p,t,Lr,r))return null;const m=c||ph(r);i.xmin=Lr[0],i.ymin=Lr[1],m&&(i.zmin=Lr[2]);const y=c?e.zmax:s;return Q8(a,u,y,t,Lr,r)?(i.xmax=Lr[0],i.ymax=Lr[1],m&&(i.zmax=Lr[2]),h&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null}function Jte(e,t,i,r,s,n,o=0){const a=new Array;for(const h of e)for(const p of h)a.push(p[0],p[1],t?p[2]:o);if(!xS(a,r,0,a,n,0))return!1;let u=0;s.length=0;const c=t||ph(n);for(const h of e){const p=new Array;for(const m of h)c&&i?p.push([a[u++],a[u++],a[u++],m[3]]):c?p.push([a[u++],a[u++],a[u++]]):i?(p.push([a[u++],a[u++],m[2]]),u++):(p.push([a[u++],a[u++]]),u++);s.push(p)}return!0}const Lr=$h(),WWe=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:_a,getTransformation:qte,getTransformations:rTe,initializeProjection:$S,isEqualBaseGCS:aTe,isLoaded:Eh,isLoadedOrLoad:jte,isLoadedOrLoadFor:Vte,load:yh,project:oc,projectExtent:hTe,projectMany:m1,projectMultipoint:uTe,projectOrLoad:zte,projectOrLoadMany:Ute,projectPoint:lTe,projectPolygon:dTe,projectPolyline:cTe,projectWithZConversion:oTe,projectWithoutEngine:Ux,requiresLoad:iTe,test:nTe,tryProjectWithZConversion:y1,unload:sTe},Symbol.toStringTag,{value:"Module"}));var dN;let Oa=dN=class extends P{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new dN({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};l([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oa.prototype,"cols",void 0),l([d({type:Le,json:{write:!0}})],Oa.prototype,"level",void 0),l([d({type:String,json:{write:!0}})],Oa.prototype,"levelValue",void 0),l([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oa.prototype,"origin",void 0),l([d({type:Number,json:{write:!0}})],Oa.prototype,"resolution",void 0),l([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Oa.prototype,"rows",void 0),l([d({type:Number,json:{write:!0}})],Oa.prototype,"scale",void 0),Oa=dN=l([x("esri.layers.support.LOD")],Oa);const fd=Oa;let pTe=class{constructor(t,i,r,s,n=void 0){this.id=t,this.level=i,this.row=r,this.col=s,this.extent=n}};var Nc;const X8=new be({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let fr=Nc=class extends P{static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:s=we.WebMercator,numLODs:n=24}=e;if(!cs(s)){const p=[];if(i)for(let m=0;m<i.length;m++){const y=i[m];p.push(new fd({level:m,scale:y,resolution:y}))}else{let m=5e-4;for(let y=n-1;y>=0;y--)p.unshift(new fd({level:y,scale:m,resolution:m})),m*=2}return new Nc({dpi:96,lods:p,origin:new Se(0,0,s),size:[r,r],spatialReference:s})}const o=qr(s),a=e.origin?new Se({x:e.origin.x,y:e.origin.y,spatialReference:s}):new Se(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),u=96,c=1/($o(s)*39.37*u),h=[];if(i)for(let p=0;p<i.length;p++){const m=i[p],y=m*c;h.push(new fd({level:p,scale:m,resolution:y}))}else{let p=om(s)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const m=Math.ceil(n/t);h.push(new fd({level:0,scale:p,resolution:p*c}));for(let y=1;y<m;y++){const g=p/2**t,v=g*c;h.push(new fd({level:y,scale:g,resolution:v})),p=g}}return new Nc({dpi:u,lods:h,origin:a,size:[r,r],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=qr(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return Se.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[],s=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(n=>{r.push(n.scale),t=n.scale>t?n.scale:t,i=n.scale<i?n.scale:i,s[n.level]=n})),this._set("scales",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const s=t[r],n=t[r+1];if(s<=e)return r;if(n===e)return r+1;if(s>e&&n<e)return r+Math.log(s/e)/Math.log(s/n)}return r}tileAt(e,t,i,r){const s=this.lodAt(e);if(!s)return null;let n,o;if(typeof t=="number")n=t,o=i;else if(ei(t.spatialReference,this.spatialReference))n=t.x,o=t.y,r=i;else{const c=BA(t,this.spatialReference);if(c==null)return null;n=c.x,o=c.y,r=i}const a=s.resolution*this.size[0],u=s.resolution*this.size[1];return r||(r=new pTe(null,0,0,0,ds())),r.level=e,r.row=Math.floor((this.origin.y-o)/u+.001),r.col=Math.floor((n-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=Nc.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===Nc.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(i=o)}if(!i)return;const r=e.level-i.level,s=i.resolution*this.size[0]/2**r,n=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=ds()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+n}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:r}=i,s=r*this.size[0],n=r*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+s,e[3]=e[1]+n,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return Nc.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const i=[],r=this.lods.length-t;for(let s=0;s<r;s++){const n=s+t,{scale:o,resolution:a}=n>=0?this.lods[n]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new fd({level:s,scale:o,resolution:a}))}return new Nc({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};l([d({type:Number,json:{write:!0}})],fr.prototype,"compressionQuality",void 0),l([d({type:Number,json:{write:!0}})],fr.prototype,"dpi",void 0),l([d({type:String,json:{read:X8.read,write:X8.write,origins:{"web-scene":{read:!1,write:!1}}}})],fr.prototype,"format",void 0),l([d({readOnly:!0})],fr.prototype,"isWrappable",null),l([d({type:Se,json:{write:!0}})],fr.prototype,"origin",void 0),l([W("origin")],fr.prototype,"readOrigin",null),l([d({type:[fd],value:null,json:{write:!0}})],fr.prototype,"lods",null),l([d({readOnly:!0})],fr.prototype,"scales",void 0),l([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],fr.prototype,"size",void 0),l([W("size",["rows","cols"])],fr.prototype,"readSize",null),l([J("size",{cols:{type:Le},rows:{type:Le}})],fr.prototype,"writeSize",null),l([d({type:we,json:{write:!0}})],fr.prototype,"spatialReference",void 0),fr=Nc=l([x("esri.layers.support.TileInfo")],fr),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(fr||(fr={}));const fTe=fr,qx={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},E3={xsmall:544,small:768,medium:992,large:1200};function mTe(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function M3(e,t){return t?qx[e].valueToClassName[t].split(" "):[]}const yTe=e=>{let t=class extends e{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=E3}initialize(){this.addHandles(G(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),xe))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!mTe(i)){const r=JSON.stringify(E3,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),i=E3}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=os.acquire(),r=os.acquire();let s,n=!1;for(s in qx){const o=this[s],a=qx[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(n=!0,this[s]=a,M3(s,o).forEach(u=>r.push(u)),M3(s,a).forEach(u=>i.push(u)))}n&&(this._applyClassNameChanges(i,r),os.release(i),os.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(n=>s.classList.remove(n)),i.forEach(n=>s.classList.add(n)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in qx)M3(r,this[r]).forEach(s=>i.classList.remove(s))}};return l([d()],t.prototype,"breakpoints",null),l([d()],t.prototype,"orientation",void 0),l([d()],t.prototype,"widthBreakpoint",void 0),l([d()],t.prototype,"heightBreakpoint",void 0),t=l([x("esri.views.BreakpointsOwner")],t),t};function U4(e){return typeof e=="string"?document.getElementById(e):e??null}function K8(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}let Tf=class extends se{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,i,r={}){return this._installWatch(t,i,r,G)}addWhen(t,i,r={}){return this._installWatch(t,i,r,Fi)}addOnCollectionChange(t,i,{initial:r=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([Hs(t,"after-changes",this._createSyncUpdatingCallback(),So),Hs(t,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>i({added:[],removed:o.toArray()}):void 0})],n),Ke(()=>this.removeHandles(n))}addPromise(t){if(t==null)return t;const i=++this._handleId;this.addHandles(Ke(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(i2)||this._set("updating",!1))}),i),this._pendingPromises.add(t),this._set("updating",!0);const r=()=>this.removeHandles(i);return t.then(r,r),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,i,r={},s){const n=++this._handleId;r.sync||this._installSyncUpdatingWatch(t,n);const o=s(t,i,r);return this.addHandles(o,n),Ke(()=>this.removeHandles(n))}_installSyncUpdatingWatch(t,i){const r=this._createSyncUpdatingCallback(),s=G(t,r,{sync:!0,equals:()=>!1});return this.addHandles(s,i),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(i2),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(fS(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(i2))}),i2)}}};l([d({readOnly:!0})],Tf.prototype,"updating",void 0),Tf=l([x("esri.core.support.UpdatingHandles")],Tf);const i2=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _M=function(){return _M=Object.assign||function(t){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},_M.apply(this,arguments)},hN={exports:{}},ti={},pN={exports:{}},cm={};function Yte(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function gTe(e,t,i){}function vTe(e,t,i){}var wTe=/javascript\s*\:/img;function bTe(e,t){return wTe.test(t)?"":t}cm.whiteList=Yte();cm.getDefaultWhiteList=Yte;cm.onAttr=gTe;cm.onIgnoreAttr=vTe;cm.safeAttrValue=bTe;var _Te={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Q0=_Te;function STe(e,t){e=Q0.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,s=0,n=0,o="";function a(){if(!r){var h=Q0.trim(e.slice(s,n)),p=h.indexOf(":");if(p!==-1){var m=Q0.trim(h.slice(0,p)),y=Q0.trim(h.slice(p+1));if(m){var g=t(s,o.length,m,y,h);g&&(o+=g+"; ")}}}s=n+1}for(;n<i;n++){var u=e[n];if(u==="/"&&e[n+1]==="*"){var c=e.indexOf("*/",n+2);if(c===-1)break;n=c+1,s=n+1,r=!1}else u==="("?r=!0:u===")"?r=!1:u===";"?r||a():u===`
`&&a()}return Q0.trim(o)}var TTe=STe,r2=cm,xTe=TTe;function e9(e){return e==null}function $Te(e){var t={};for(var i in e)t[i]=e[i];return t}function Qte(e){e=$Te(e||{}),e.whiteList=e.whiteList||r2.whiteList,e.onAttr=e.onAttr||r2.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||r2.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||r2.safeAttrValue,this.options=e}Qte.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onAttr,n=i.onIgnoreAttr,o=i.safeAttrValue,a=xTe(e,function(u,c,h,p,m){var y=r[h],g=!1;if(y===!0?g=y:typeof y=="function"?g=y(p):y instanceof RegExp&&(g=y.test(p)),g!==!0&&(g=!1),p=o(h,p),!!p){var v={position:c,sourcePosition:u,source:m,isWhite:g};if(g){var b=s(h,p,v);return e9(b)?h+":"+p:b}else{var b=n(h,p,v);if(!e9(b))return b}}});return a};var ETe=Qte;(function(e,t){var i=cm,r=ETe;function s(o,a){var u=new r(a);return u.process(o)}t=e.exports=s,t.FilterCSS=r;for(var n in i)t[n]=i[n]})(pN,pN.exports);var q4=pN.exports,G4={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},MTe=q4.FilterCSS,ATe=q4.getDefaultWhiteList,SM=G4;function Xte(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Kte=new MTe;function ITe(e,t,i){}function CTe(e,t,i){}function OTe(e,t,i){}function RTe(e,t,i){}function eie(e){return e.replace(NTe,"&lt;").replace(LTe,"&gt;")}function FTe(e,t,i,r){if(i=oie(i),t==="href"||t==="src"){if(i=SM.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(s2.lastIndex=0,s2.test(i))return""}else if(t==="style"){if(t9.lastIndex=0,t9.test(i)||(i9.lastIndex=0,i9.test(i)&&(s2.lastIndex=0,s2.test(i))))return"";r!==!1&&(r=r||Kte,i=r.process(i))}return i=aie(i),i}var NTe=/</g,LTe=/>/g,kTe=/"/g,PTe=/&quot;/g,DTe=/&#([a-zA-Z0-9]*);?/gim,jTe=/&colon;?/gim,VTe=/&newline;?/gim,s2=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,t9=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,i9=/u\s*r\s*l\s*\(.*/gi;function tie(e){return e.replace(kTe,"&quot;")}function iie(e){return e.replace(PTe,'"')}function rie(e){return e.replace(DTe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function sie(e){return e.replace(jTe,":").replace(VTe," ")}function nie(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return SM.trim(t)}function oie(e){return e=iie(e),e=rie(e),e=sie(e),e=nie(e),e}function aie(e){return e=tie(e),e=eie(e),e}function zTe(){return""}function UTe(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(o){return i?!0:SM.indexOf(e,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,a,u){if(r(o))if(u.isClosing){var c="[/removed]",h=u.position+c.length;return s.push([n!==!1?n:u.position,h]),n=!1,c}else return n||(n=u.position),"[removed]";else return t(o,a,u)},remove:function(o){var a="",u=0;return SM.forEach(s,function(c){a+=o.slice(u,c[0]),u=c[1]}),a+=o.slice(u),a}}}function qTe(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var s=e.indexOf("-->",r);if(s===-1)break;i=s+3}return t}function GTe(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}ti.whiteList=Xte();ti.getDefaultWhiteList=Xte;ti.onTag=ITe;ti.onIgnoreTag=CTe;ti.onTagAttr=OTe;ti.onIgnoreTagAttr=RTe;ti.safeAttrValue=FTe;ti.escapeHtml=eie;ti.escapeQuote=tie;ti.unescapeQuote=iie;ti.escapeHtmlEntities=rie;ti.escapeDangerHtml5Entities=sie;ti.clearNonPrintableCharacter=nie;ti.friendlyAttrValue=oie;ti.escapeAttrValue=aie;ti.onIgnoreTagStripAll=zTe;ti.StripTagBody=UTe;ti.stripCommentTag=qTe;ti.stripBlankChar=GTe;ti.cssFilter=Kte;ti.getDefaultCSSWhiteList=ATe;var sI={},md=G4;function BTe(e){var t=md.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=md.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function HTe(e){return e.slice(0,2)==="</"}function WTe(e,t,i){var r="",s=0,n=!1,o=!1,a=0,u=e.length,c="",h="";e:for(a=0;a<u;a++){var p=e.charAt(a);if(n===!1){if(p==="<"){n=a;continue}}else if(o===!1){if(p==="<"){r+=i(e.slice(s,a)),n=a,s=a;continue}if(p===">"){r+=i(e.slice(s,n)),h=e.slice(n,a+1),c=BTe(h),r+=t(n,r.length,c,h,HTe(h)),s=a+1,n=!1;continue}if(p==='"'||p==="'")for(var m=1,y=e.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=p;continue e}y=e.charAt(a-++m)}}else if(p===o){o=!1;continue}}return s<e.length&&(r+=i(e.substr(s))),r}var ZTe=/[^a-zA-Z0-9\\_:.-]/gim;function JTe(e,t){var i=0,r=0,s=[],n=!1,o=e.length;function a(m,y){if(m=md.trim(m),m=m.replace(ZTe,"").toLowerCase(),!(m.length<1)){var g=t(m,y||"");g&&s.push(g)}}for(var u=0;u<o;u++){var c=e.charAt(u),h,p;if(n===!1&&c==="="){n=e.slice(i,u),i=u+1,r=e.charAt(i)==='"'||e.charAt(i)==="'"?i:QTe(e,u+1);continue}if(n!==!1&&u===r){if(p=e.indexOf(c,u+1),p===-1)break;h=md.trim(e.slice(r+1,p)),a(n,h),n=!1,u=p,i=u+1;continue}if(/\s|\n|\t/.test(c))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(p=YTe(e,u),p===-1){h=md.trim(e.slice(i,u)),a(h),n=!1,i=u+1;continue}else{u=p-1;continue}else if(p=XTe(e,u-1),p===-1){h=md.trim(e.slice(i,u)),h=r9(h),a(n,h),n=!1,i=u+1;continue}else continue}return i<e.length&&(n===!1?a(e.slice(i)):a(n,r9(md.trim(e.slice(i))))),md.trim(s.join(" "))}function YTe(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function QTe(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function XTe(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function KTe(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function r9(e){return KTe(e)?e.substr(1,e.length-2):e}sI.parseTag=WTe;sI.parseAttr=JTe;var e2e=q4.FilterCSS,sa=ti,lie=sI,t2e=lie.parseTag,i2e=lie.parseAttr,Gx=G4;function n2(e){return e==null}function r2e(e){var t=Gx.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Gx.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=Gx.trim(e.slice(0,-1))),{html:e,closing:i}}function s2e(e){var t={};for(var i in e)t[i]=e[i];return t}function n2e(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(r){return r.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function uie(e){e=s2e(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=sa.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=n2e(e.whiteList||e.allowList):e.whiteList=sa.whiteList,e.onTag=e.onTag||sa.onTag,e.onTagAttr=e.onTagAttr||sa.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||sa.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||sa.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||sa.safeAttrValue,e.escapeHtml=e.escapeHtml||sa.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new e2e(e.css))}uie.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onTag,n=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,u=i.safeAttrValue,c=i.escapeHtml,h=t.cssFilter;i.stripBlankChar&&(e=sa.stripBlankChar(e)),i.allowCommentTag||(e=sa.stripCommentTag(e));var p=!1;i.stripIgnoreTagBody&&(p=sa.StripTagBody(i.stripIgnoreTagBody,n),n=p.onIgnoreTag);var m=t2e(e,function(y,g,v,b,w){var _={sourcePosition:y,position:g,isClosing:w,isWhite:Object.prototype.hasOwnProperty.call(r,v)},S=s(v,b,_);if(!n2(S))return S;if(_.isWhite){if(_.isClosing)return"</"+v+">";var T=r2e(b),E=r[v],A=i2e(T.html,function(C,O){var U=Gx.indexOf(E,C)!==-1,V=o(v,C,O,U);return n2(V)?U?(O=u(v,C,O,h),O?C+'="'+O+'"':C):(V=a(v,C,O,U),n2(V)?void 0:V):V});return b="<"+v,A&&(b+=" "+A),T.closing&&(b+=" /"),b+=">",b}else return S=n(v,b,_),n2(S)?c(b):S},c);return p&&(m=p.remove(m)),m};var o2e=uie;(function(e,t){var i=ti,r=sI,s=o2e;function n(a,u){var c=new s(u);return c.process(a)}t=e.exports=n,t.filterXSS=n,t.FilterXSS=s,function(){for(var a in i)t[a]=i[a];for(var u in r)t[u]=r[u]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(hN,hN.exports);var _m=hN.exports,a2e=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},l2e=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=_M(_M({},_m.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,a,u){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?r.sanitizeUrl(a):_m.safeAttrValue(n,o,a,u)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!i?s=t:t&&i?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(n){if(n==="whiteList")s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]);else if(n==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return s.css.whiteList[a]=o[a]})}else s[n]=t[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new _m.FilterXSS(s)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i??{}).isProtocolRequired,s=r===void 0?!0:r,n=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),u=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||a||u?_m.escapeAttrValue(t):!n&&!s?_m.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,s):_m.safeAttrValue(t,i,r,s)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var s=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(a,u){var c=r.validate(u,i);return c.isValid?a.concat([u]):(s=!0,a.concat([c.sanitized]))},[]);else if(a2e(t)){var o=Object.keys(t);n=o.reduce(function(a,u){var c=t[u],h=r.validate(c,i);return h.isValid?a[u]=c:(s=!0,a[u]=h.sanitized),a},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return s?n:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const nI=new Map;function cie(){nI.clear()}function u2e(e){return nI.get(e)}function c2e(e,t){nI.set(e,t)}function A3(e){nI.delete(e)}function die(...e){const t=os.acquire();for(let r=0;r<e.length;r++){const s=e[r],n=typeof s;if(n==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(n==="object")for(const o in s)s[o]&&t.push(o)}const i=t.join(" ");return os.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(r=>{var s;cie();for(const n of r)(s=e.get(n.target))==null||s(n)}),i=(r,s,n)=>(e.set(r,s),t.observe(r,n),Ke(()=>{t.unobserve(r),e.delete(r)}));return(r,s,n)=>{let o=null;return lS([G(()=>typeof r=="function"?r():r,a=>{o==null||o.remove(),a&&(o=i(a,s,n))},ns),Ke(()=>o==null?void 0:o.remove())])}})();function al(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function s9(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function n9(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const d2e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],h2e=d2e.reduce((e,t)=>(e[t]=[],e),{}),p2e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],hie=new l2e({whiteList:h2e,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(p2e.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function f2e(e){return e==="Enter"||e===" "}async function pie(e,t){await G5(hS(t));const i=typeof e=="function"?e():e;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const fie="http://www.w3.org/",oI=`${fie}2000/svg`,mie=`${fie}1999/xlink`;let o9=[],B4=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},H4=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),yie=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},m2e=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(H4(e[r],t))return r}return-1},I3=(e,t,i,r)=>{let s=e[t];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(H4(a,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},y2e=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},fN=[],mN=!1,gie=e=>{(e.children||[]).forEach(gie),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},a9=()=>{mN=!1,fN.forEach(gie),fN.length=0},l9=e=>{fN.push(e),mN||(mN=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(a9,{timeout:16}):setTimeout(a9,16))},u9=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),l9(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),l9(e))},g2e=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,s=Object.keys(t),n=s.length;for(let o=0;o<n;o++){let a=s[o],u=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")gN(e,u,!0);else if(a==="classes"){let c=Object.keys(u),h=c.length;for(let p=0;p<h;p++){let m=c[p];u[m]&&e.classList.add(m)}}else if(a==="styles"){let c=Object.keys(u),h=c.length;for(let p=0;p<h;p++){let m=c[p],y=u[m];y&&(yie(y),i.styleApplyer(e,m,y))}}else if(a!=="key"&&u!=null){let c=typeof u;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(u=r(a,u,e,t)),a==="oninput"&&function(){let h=u;u=function(p){h.apply(this,[p]),p.target["oninput-value"]=p.target.value}}()),e[a]=u):i.namespace===oI?a==="href"?e.setAttributeNS(mie,a,u):e.setAttribute(a,u):c==="string"&&a!=="value"?a==="innerHTML"?e[a]=hie.sanitize(u):yN(e)&&a in e?e[a]=u:e.setAttribute(a,u):e[a]=u}}};function yN(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let TM,v2e=(e,t,i)=>{if(t)for(let r of t)w_(r,e,void 0,i)},vie=(e,t,i)=>{v2e(e,t.children,i),t.text&&(e.textContent=t.text),g2e(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},w_=(e,t,i,r)=>{let s,n=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")s=e.domNode=a.createTextNode(e.text),i!==void 0?t.insertBefore(s,i):t.appendChild(s);else{for(let u=0;u<=o.length;++u){let c=o.charAt(u);if(u===o.length||c==="."||c==="#"){let h=o.charAt(n-1),p=o.slice(n,u);h==="."?s.classList.add(p):h==="#"?s.id=p:(p==="svg"&&(r=B4(r,{namespace:oI})),r.namespace!==void 0?s=e.domNode=a.createElementNS(r.namespace,p):(s=e.domNode=e.domNode||a.createElement(p),p==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(s,i):s.parentNode!==t&&t.appendChild(s)),n=u+1}}vie(s,e,r)}},gN=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},w2e=(e,t,i,r)=>{if(!i)return;let s=!1,n=Object.keys(i),o=n.length;for(let a=0;a<o;a++){let u=n[a],c=i[u],h=t[u];if(u==="class")h!==c&&(gN(e,h,!1),gN(e,c,!0));else if(u==="classes"){let p=e.classList,m=Object.keys(c),y=m.length;for(let g=0;g<y;g++){let v=m[g],b=!!c[v];b!==!!h[v]&&(s=!0,b?p.add(v):p.remove(v))}}else if(u==="styles"){let p=Object.keys(c),m=p.length;for(let y=0;y<m;y++){let g=p[y],v=c[g];v!==h[g]&&(s=!0,v?(yie(v),r.styleApplyer(e,g,v)):r.styleApplyer(e,g,""))}}else if(c||typeof h!="string"||(c=""),u!=="value"||yN(e)){if(c!==h){let p=typeof c;p==="function"&&r.eventHandlerInterceptor||(r.namespace===oI?u==="href"?e.setAttributeNS(mie,u,c):e.setAttribute(u,c):p==="string"?u==="innerHTML"?e[u]=hie.sanitize(c):u==="role"&&c===""?e.removeAttribute(u):yN(e)&&u in e?e[u]=c:e.setAttribute(u,c):e[u]!==c&&(e[u]=c),s=!0)}}else{let p=e[u];p!==c&&(e["oninput-value"]?p===e["oninput-value"]:c!==h)&&(e[u]=c,e["oninput-value"]=void 0),c!==h&&(s=!0)}}return s},b2e=(e,t,i,r,s)=>{if(i===r)return!1;r=r||o9;let n,o=(i=i||o9).length,a=r.length,u=0,c=0,h=!1;for(;c<a;){let p=u<o?i[u]:void 0,m=r[c];if(p!==void 0&&H4(p,m))h=TM(p,m,s)||h,u++;else{let y=m2e(i,m,u+1);if(y>=0){for(n=u;n<y;n++)u9(i[n]),I3(i,n,e,"removed");h=TM(i[y],m,s)||h,u=y+1}else w_(m,t,u<o?i[u].domNode:void 0,s),y2e(m),I3(r,c,e,"added")}c++}if(o>u)for(n=u;n<o;n++)u9(i[n]),I3(i,n,e,"removed");return h};TM=(e,t,i)=>{let r=e.domNode,s=!1;if(e===t)return!1;let n=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(o,r),t.domNode=o,s=!0,s}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=B4(i,{namespace:oI})),e.text!==t.text&&(n=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,n=b2e(t,r,e.children,t.children,i)||n,n=w2e(r,e.properties,t.properties,i)||n,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return n&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),s};let o2=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,TM(r,i,t)},domNode:e.domNode});const _2e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let Iw=e=>B4(_2e,e),Pd={append:(e,t,i)=>(i=Iw(i),w_(t,e,void 0,i),o2(t,i)),insertBefore:(e,t,i)=>(i=Iw(i),w_(t,e.parentNode,e,i),o2(t,i)),merge:(e,t,i)=>(i=Iw(i),t.domNode=e,vie(e,t,i),o2(t,i)),replace:(e,t,i)=>(i=Iw(i),w_(t,e.parentNode,e,i),e.parentNode.removeChild(e),o2(t,i))},wie,S2e=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};wie=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let T2e=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?wie(i.children,s=>s.domNode===r):void 0}),i},x2e=(e,t,i)=>{let r=function(s){i("domEvent",s);let n=t(),o=S2e(s.currentTarget,n.domNode);o.reverse();let a,u=T2e(n.getLastRender(),o);return e.scheduleRender(),u&&(a=u.properties[`on${s.type}`].apply(u.properties.bind||this,arguments)),i("domEventProcessed",s),a};return(s,n,o,a)=>r},vN=e=>{let t,i,r=Iw(e),s=r.performanceLogger,n=!0,o=!1,a=[],u=[],c=(p,m,y)=>{let g,v=()=>g;r.eventHandlerInterceptor=x2e(t,v,s),g=p(m,y(),r),a.push(g),u.push(y)},h=()=>{if(i=void 0,n){n=!1,s("renderStart",void 0);for(let p=0;p<a.length;p++){let m=u[p]();s("rendered",void 0),a[p].update(m),s("patched",void 0)}s("renderDone",void 0),n=!0}};return t={renderNow:h,scheduleRender:()=>{i||o||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,n=!0,t.scheduleRender()},append:(p,m)=>{c(Pd.append,p,m)},insertBefore:(p,m)=>{c(Pd.insertBefore,p,m)},merge:(p,m)=>{c(Pd.merge,p,m)},replace:(p,m)=>{c(Pd.replace,p,m)},detach:p=>{for(let m=0;m<u.length;m++)if(u[m]===p)return u.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},Lc=class extends se{constructor(){super(...arguments),this.items=new Q,this._watchUpdatingTracking=new Tf,this._callbacks=new Map,this._projector=vN(),this._hiddenProjector=vN()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const s=()=>r.render();this._callbacks.set(r,s),this._projector.append(this.surface,s)}for(const r of i.removed){const s=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(s.domNode),this._callbacks.delete(r)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const i=this._hiddenSurface,r=this._hiddenProjector;let s;const n=()=>(s=t.render(),s);r.append(i,n),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s!=null&&s.domNode){const a=s.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(n);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(t,i){const r=this.computeBoundingRect(t),s=this.computeBoundingRect(i);return Math.max(r.left,s.left)<=Math.min(r.right,s.right)&&Math.max(r.top,s.top)<=Math.min(r.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some(n=>n.visible&&!(r&&n.isDecoration)))return;const s=t.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{r&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};l([d({readOnly:!0})],Lc.prototype,"surface",void 0),l([d({readOnly:!0})],Lc.prototype,"items",void 0),l([d({readOnly:!0})],Lc.prototype,"needsRender",null),l([d({readOnly:!0})],Lc.prototype,"_watchUpdatingTracking",void 0),l([d({readOnly:!0})],Lc.prototype,"updating",null),Lc=l([x("esri.views.overlay.ViewOverlay")],Lc);const c9=Lc,C3=[0,0];function $2e(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return C3[0]=i.left+((t==null?void 0:t.pageXOffset)??0),C3[1]=i.top+((t==null?void 0:t.pageYOffset)??0),C3}function d9(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function E2e(e){const t=document.createElement("div");return e.appendChild(t),t}const Sm=16,X0=750,M2e=512,A2e=2,I2e=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:Sm,time:X0},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([G(()=>this.cursor,r=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",r)}),G(()=>this.navigating,r=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([G(()=>this.ui,(i,r)=>this._handleUIChange(i,r),xe),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){var i;this.destroyed||((i=this.ui)==null||i.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),s=U4(i);if(s||typeof i!="string"||q.getLogger(this).error("#container",`element with id '${i}' not found`),r===s)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(d9(this.root),this._set("root",null)),this.userContent&&(K8(this.userContent,r),d9(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",K8(s,n),s.appendChild(n),this._set("userContent",n);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const u=new c9;o.appendChild(u.surface),this._set("overlay",u),this.addHandles(G(()=>u.needsRender,c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=bv({render:()=>{var h;return(h=this.overlay)==null?void 0:h.render()}}):this._overlayRenderTaskHandle=kt(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,s){const n=this.position;return i-=n?n[0]:0,r-=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const n=this.position;return i+=n?n[0]:0,r+=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(G(()=>this.root,s=>{i.container=s?E2e(s):null},xe),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Sm,i.time=X0;const r=bv({prepare:o=>{const a=this._measure(),u=this._freqInfo;if(u.time+=o.deltaTime,a&&(u.freq=Sm,this._get("resizing")||this._set("resizing",!0)),u.time<u.freq)return;u.time=0;const c=this._position();u.freq=c||a?Sm:Math.min(X0,u.freq*A2e),!a&&u.freq>=M2e&&(r.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(o=>{i.freq=Sm,i.time=X0,r.resume()});this.container!=null&&s.observe(this.container);const n=Ke(()=>s.disconnect());this.addHandles([dS(window,"resize",()=>{i.freq=Sm,i.time=X0,r.resume()}),n,r],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return r===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=i&&$2e(i);return!!s&&(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return l([d()],t.prototype,"container",null),l([d({readOnly:!0})],t.prototype,"focused",null),l([d({readOnly:!0})],t.prototype,"height",void 0),l([d()],t.prototype,"messagesCommon",void 0),l([d({type:c9})],t.prototype,"overlay",void 0),l([d({readOnly:!0})],t.prototype,"position",void 0),l([d({readOnly:!0})],t.prototype,"resizing",void 0),l([d({readOnly:!0})],t.prototype,"root",void 0),l([d({value:null,readOnly:!0})],t.prototype,"size",null),l([d({readOnly:!0})],t.prototype,"surface",void 0),l([d({readOnly:!0})],t.prototype,"suspended",void 0),l([d({nonNullable:!0})],t.prototype,"ui",void 0),l([d({readOnly:!0})],t.prototype,"userContent",void 0),l([d({readOnly:!0})],t.prototype,"width",void 0),l([d()],t.prototype,"widthBreakpoint",void 0),t=l([x("esri.views.DOMContainer")],t),t},C2e=D("mac")?"Meta":"Control",O2e=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),R2e=e=>O2e.has(e);let F2e=class{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},Zi=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const n=typeof t=="string"?new F2e(t,s):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const p=this._incoming[h.match.eventType];if(p){const m=p.indexOf(h);p.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},u=new N2e(n,r,{onPause:a,onRemove:a,onResume:h=>{const p=this._incoming[h.match.eventType];p&&!p.includes(h)&&(p.push(h),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[n.eventType];return c||(c=[],this._incoming[n.eventType]=c),c.push(u),o(),this._manager&&this._manager.updateDependencies(),u}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new L2e(t,{onEmit:(r,s,n,o)=>{var a;(a=this._manager)==null||a.emit(r.eventType,s,n,o)},onRemove:r=>{var s;delete this._outgoing[r.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!0)}stopCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var r;const i=this._incoming[t.type];if(i){for(const s of i)if(s.match.matches(t)&&((r=s.callback)==null||r.call(s,t),t.shouldStopPropagation()))break}}},N2e=class{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},L2e=class{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},k2e=class extends Zi{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s}=t;i===this._value&&this._x===r&&this._y===s||(this._value=i,this._x=r,this._y=s,this._onChange(i,r,s))}},P2e=class{constructor(t,i){this._observable=new n0,this._value=t,this._equalityFunction=i}get value(){return fe(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function Fv(e,t=RQ){return new P2e(e,t)}let D2e=class extends Zi{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Fv(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},j2e=class{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in t){const s=t[r],n=new YQ(s,void 0,void 0,2,2);this._properties[r]={pool:n,acquired:[]}}this._afterDispatchHandle=Mge(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const r of i.acquired)gU(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),r=this._properties[t];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const t in this._properties){const i=this._properties[t];let r=0;for(const s of i.acquired)gU(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}},Pn=class extends se{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=C2e,this._latestPointerType="mouse",this._propertiesPool=new j2e({latestPointerLocation:U2e},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const i of t)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,i,r=ih.INTERNAL){if(this._nameToGroup[t]||i.length===0)return;const s={name:t,handlers:i.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,u,c,h,p)=>{this._emitInputEvent(o.priorityIndex+1,a,u,c,p,h)},setPointerCapture:(a,u)=>{this._setPointerCapture(s,o,a,u)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const i=this._nameToGroup[t];i?(i.handlers.forEach(r=>{var s;r.removed=!0,(s=r.uninstallCallback)==null||s.call(r)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):q.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const s=this._handlers[r];s.priorityIndex=r,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const s=this._handlersPriority[r];s.priorityIndex=r;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(t.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)R2e(a)||i.add(a)}s.active=n}this._sourceEvents=t,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,i,r){this._latestPointerType=t;const s=this._get("latestPointerLocation");if(s==null||s.x!==i||s.y!==r){const n=this._propertiesPool.get("latestPointerLocation");n.x=i,n.y=r,this._set("latestPointerLocation",n)}}_onEventReceived(t,i){if(t==="pointer-capture-lost"){const n=i;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(t,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,s=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(t,i,r,s)}_updateKeyModifiers(t,i){if(!i)return;let r=!1;const s=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},n=(a,u)=>{u&&!this._activeKeyModifiers.has(a)?(s(),this._activeKeyModifiers.add(a)):!u&&this._activeKeyModifiers.has(a)&&(s(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=i.key;this._keyModifiers.has(a)&&n(a,t==="key-down")}const o=i.native;n("Alt",!!(o!=null&&o.altKey)),n("Control",!!(o!=null&&o.ctrlKey)),n("Ctrl",!!(o!=null&&o.ctrlKey)),n("Shift",!!(o!=null&&o.shiftKey)),n("Meta",!!(o!=null&&o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new k2e((t,i,r)=>this._setLatestPointer(t,i,r)),this._multiTouchHandler=new D2e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],ih.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,ih.INTERNAL)}_setPointerCapture(t,i,r,s){const n=t.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,i,r,s){this._emitInputEvent(0,t,i,r,s)}_emitInputEvent(t,i,r,s,n,o){const a=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),u=n!==void 0&&n,c={event:new V2e(i,r,a,o||this._activeKeyModifiers,u),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(t){this._currentPropagation={events:new pM,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var i,r,s;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:n,priorityIndex:o}=t.events.pop(),a=(i=n.data)==null?void 0:i.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!n.shouldStopPropagation()&&((s=(r=t.currentHandler).eventCallback)==null||s.call(r,n)),n.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const i=new pM;i.push(t);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,i){if(t.handler.hasSideEffects!==i.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==i.groupPriority)return t.groupPriority>i.groupPriority?-1:1;for(const r of t.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(r.eventType!==s.eventType)continue;const n=r.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===r.keyModifiers.length!=(n.length===s.keyModifiers.length))return r.keyModifiers.length>s.keyModifiers.length?-1:1}return t.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(t){const i=[];for(const r of t){let s=0;for(;s<i.length&&this._compareHandlerPriority(r,i[s])>=0;)s++;i.splice(s,0,r)}return i}get debug(){const t=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{t(()=>this._onEventReceived(i,r))},disablePointerCapture:t}}};l([d({readOnly:!0})],Pn.prototype,"hasPendingInputs",null),l([d({constructOnly:!0})],Pn.prototype,"eventSource",void 0),l([d({constructOnly:!0})],Pn.prototype,"recognizers",void 0),l([d()],Pn.prototype,"_latestPointerType",void 0),l([d()],Pn.prototype,"latestPointerType",null),l([d()],Pn.prototype,"multiTouchActive",null),l([d({readOnly:!0})],Pn.prototype,"latestPointerLocation",void 0),l([d()],Pn.prototype,"_paused",void 0),l([d({readOnly:!0})],Pn.prototype,"updating",null),Pn=l([x("esri.views.input.InputManager")],Pn);let V2e=class{constructor(t,i,r,s,n){this.type=t,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=n,this._propagationState=yd.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=yd.STOPPED}shouldStopPropagation(){return!!(this._propagationState&yd.STOPPED)}async(t){this._propagationState|=yd.PAUSED;const i=(r,s)=>{this._propagationState&=~yd.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&yd.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var yd;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(yd||(yd={}));const ih={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let z2e=class{};const U2e=z2e;function Tc(e){return e!=null&&"open"in e&&"declaredClass"in e}function h9(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const q2e=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([G(()=>[this.ui,this.popup],([i,r],s)=>{const n="popup",o="manual";if(s){const[a,u]=s;a&&Tc(u)&&(u.view=null,h9(u)&&a.remove(u,n))}i&&Tc(r)&&(r.view=this,h9(r)&&i.add(r,{key:n,position:o,internal:!0}))},xe),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(Tc(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),Tc(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)}))},ih.WIDGET)]),vl(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{L(()=>Promise.resolve().then(()=>hW),void 0)})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(Tc(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void q.getLogger(this).error(new M("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),Tc(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,r),r)}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!Tc(this.popup))return this._popupSetupTask=ec(async r=>{const{default:s}=await L(()=>Promise.resolve().then(()=>hW),void 0);if(Fe(r),!this.popup||Tc(this.popup))return;const n=this.popup;delete n.open,delete n.close,this.popup=new s(n)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:r},s){const n=[],o=[];let a=!1;const u=nge(s,D("popup-view-fetch-timeout")??B2e),c=m=>{const y=new G2e(m);return o.push(y),n.push(y.promise),y},h=m=>{const y=o.at(-1);return y&&y.layerView===m&&!a?y:c(m)};for(const m of r)"graphic"in m?(h(m.layerView).graphics.push(m.graphic),a=!1):(n.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,u)),a=!0);o.map(m=>m.resolve(u));const p=sge(n).then(m=>m.filter(y=>!!y).flat());return{pendingFeatures:n,allGraphicsPromise:p,location:i}}async _getPopupHits(i,r){const{hits:s,location:n}=await this.popupHitTest(i);Fe(r);const o=[];for(const a of s)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,r)){const u=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:u})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:n}}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r==null?void 0:r.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return l([d()],t.prototype,"popup",void 0),l([d()],t.prototype,"popupEnabled",void 0),t=l([x("esri.views.PopupView")],t),t};let G2e=class{constructor(t){this.layerView=t,this._resolver=Bs(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:i,graphics:r,_resolver:s}=this;if(!i)return s.resolve(r),s.promise;let n;return i.fetchPopupFeaturesFromGraphics(r,t).catch(o=>(n=o,null)).then(o=>{o?s.resolve(o):s.reject(n)}),s.promise}};const B2e=5e3;function tc(e,t,i=Q){return t||(t=new i),t===e||(t.removeAll(),H2e(e)?t.addMany(e):e&&t.add(e)),t}function bie(e){return e}function H2e(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var gd;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(gd||(gd={}));let W2e=class{constructor(){this._resolver=Bs(),this._status=gd.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=gd.RESOLVED,this._cleanUp()},()=>{this._status=gd.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===gd.RESOLVED}isRejected(){return this._status===gd.REJECTED}isFulfilled(){return this._status!==gd.PENDING}abort(){this._resolver.reject(mt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=Bs(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==r||fi(s)||this._resolver.reject(s)}),t.resolve()}};const _ie=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new W2e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=l([x("esri.core.Promise")],t),t};let Cw=class extends _ie(se){};Cw=l([x("esri.core.Promise")],Cw),function(e){e.EsriPromiseMixin=_ie}(Cw||(Cw={}));const f0=Cw,Z2e="not-loaded",J2e="loading",Y2e="failed",p9="loaded",Sie=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise((a,u)=>{const c=z5(n,u);this.destroyed&&u(new M("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,u).finally(()=>{c&&c.remove()})});if(this.loadStatus===Z2e){this._set("loadStatus",J2e);const a=this._loadController=new AbortController;s({signal:a.signal})}return r(),o}})),this.when(()=>{this._set("loadStatus",p9),this._loadController=null},r=>{this._set("loadStatus",Y2e),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController&&(this._loadController=Pr(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===p9}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new M("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return l([d({readOnly:!0})],t.prototype,"loaded",null),l([d({readOnly:!0})],t.prototype,"loadError",void 0),l([d({clonable:!1})],t.prototype,"loadStatus",void 0),l([d({type:[bo],readOnly:!0})],t.prototype,"loadWarnings",null),t=l([x("esri.core.Loadable")],t),t};let Ow=class extends Sie(f0){};Ow=l([x("esri.core.Loadable")],Ow),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=Sie,e.isLoadable=t}(Ow||(Ow={}));const In=Ow;async function aI(e,t){return await e.load(),Q2e(e,t)}async function Q2e(e,t){const i=[],r=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?r(...o):Q.isCollection(o)?o.forEach(a=>r(a)):In.isLoadable(o)&&i.push(o))};t(r);let s=null;if(await fve(i,async n=>{const o=await DA(X2e(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return e}function X2e(e){return"loadAll"in e&&typeof e.loadAll=="function"}let a2;function K2e(e){return a2&&!a2.destroyed||(a2=e()),a2}var wN;const exe=new be({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Dn=wN=class extends se{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new wN({categories:this.categories?R(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=BA(this.extent,we.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>exe.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}}};l([d()],Dn.prototype,"categories",void 0),l([d()],Dn.prototype,"disableExtraQuery",void 0),l([d({type:gt})],Dn.prototype,"extent",void 0),l([d()],Dn.prototype,"filter",void 0),l([d()],Dn.prototype,"num",void 0),l([d()],Dn.prototype,"query",void 0),l([d()],Dn.prototype,"sortField",void 0),l([d()],Dn.prototype,"sortOrder",null),l([d()],Dn.prototype,"start",void 0),Dn=wN=l([x("esri.portal.PortalQueryParams")],Dn);const ca=Dn;var bN;let Ti=bN=class extends P{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new M("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new bN({sourceJSON:e});return t.read(e),t}queryItems(e,t){let i=yt(ca,e);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new ca,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new ca,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=this.portal;return i.fetchSelf(i.authMode,!0,t).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const n=new ca({disableExtraQuery:!0,num:1,query:s});return i.queryGroups(n,t)}throw new M("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],n=new ca({num:1,query:`typekeywords:"${e}"`});return s.queryItems(n,t)}throw new M("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(s=>{const n=s==null?void 0:s.categorySchema;return n!=null&&n.length?n:[]}):[])}};l([d()],Ti.prototype,"access",void 0),l([d({type:Date})],Ti.prototype,"created",void 0),l([d()],Ti.prototype,"description",void 0),l([d()],Ti.prototype,"id",void 0),l([d()],Ti.prototype,"isInvitationOnly",void 0),l([d({type:Date})],Ti.prototype,"modified",void 0),l([d()],Ti.prototype,"owner",void 0),l([d()],Ti.prototype,"portal",void 0),l([d()],Ti.prototype,"snippet",void 0),l([d()],Ti.prototype,"sortField",void 0),l([d()],Ti.prototype,"sortOrder",void 0),l([d()],Ti.prototype,"sourceJSON",void 0),l([d()],Ti.prototype,"tags",void 0),l([d()],Ti.prototype,"thumbnail",void 0),l([d({readOnly:!0})],Ti.prototype,"thumbnailUrl",null),l([d()],Ti.prototype,"title",void 0),l([d({readOnly:!0})],Ti.prototype,"url",null),Ti=bN=l([x("esri.portal.PortalGroup")],Ti);const _N=Ti;let tp=class extends se{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};l([d()],tp.prototype,"nextQueryParams",void 0),l([d()],tp.prototype,"queryParams",void 0),l([d()],tp.prototype,"results",void 0),l([d()],tp.prototype,"total",void 0),tp=l([x("esri.portal.PortalQueryResult")],tp);const txe=tp;let Ul=class extends P{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const t=(i=this.portal)==null?void 0:i.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new M("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};l([d({type:Date})],Ul.prototype,"created",void 0),l([d()],Ul.prototype,"id",void 0),l([d()],Ul.prototype,"portal",void 0),l([d()],Ul.prototype,"title",void 0),l([d({readOnly:!0})],Ul.prototype,"url",null),l([d()],Ul.prototype,"username",void 0),Ul=l([x("esri.portal.PortalFolder")],Ul);const ixe=Ul;var SN;let xt=SN=class extends P{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e==null?void 0:e.data,r=e==null?void 0:e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let n=this.userContentUrl;return r&&(n+="/"+(typeof r=="string"?r:r.id)),this.portal.request(n+"/addItem",s).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let i=this.userContentUrl;e.ownerFolder&&(i+="/"+e.ownerFolder);const r=t?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${e.id}/delete`,{method:"post",query:r}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const i=this.userContentUrl+"/deleteItems",r=[],s=e.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:t}},o=await this.portal.request(i,n);for(const a of o.results){const u=e.find(p=>a.itemId===p.id),c=a.success;let h=null;c?(u.id=null,u.portal=null):a.error&&(h=new M("portal:delete-item-failed",a.error.message,a.error)),r.push({item:u,success:c,error:h})}}return r}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const s=ixe.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=_N.fromJSON(i);return r.portal=this.portal,r}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:i}=await L(()=>Promise.resolve().then(()=>Tie),void 0),r={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},s=await this.portal.request(t,{query:r});let n;return s!=null&&s.items?(n=s.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new _N({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new M("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const i=this.userContentUrl,r=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(i+`/items/${e.id}/restore`,{method:"post",query:r})}toJSON(){throw new M("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new SN({sourceJSON:e});return t.read(e),t}};l([d()],xt.prototype,"access",void 0),l([d({type:Date})],xt.prototype,"created",void 0),l([d()],xt.prototype,"culture",void 0),l([d()],xt.prototype,"description",void 0),l([d()],xt.prototype,"email",void 0),l([d()],xt.prototype,"favGroupId",void 0),l([d()],xt.prototype,"fullName",void 0),l([d({type:Date})],xt.prototype,"modified",void 0),l([d()],xt.prototype,"orgId",void 0),l([d()],xt.prototype,"portal",void 0),l([d()],xt.prototype,"preferredView",void 0),l([d()],xt.prototype,"privileges",void 0),l([d()],xt.prototype,"region",void 0),l([d()],xt.prototype,"role",void 0),l([d()],xt.prototype,"roleId",void 0),l([d()],xt.prototype,"sourceJSON",void 0),l([d()],xt.prototype,"thumbnail",void 0),l([d({readOnly:!0})],xt.prototype,"thumbnailUrl",null),l([d()],xt.prototype,"units",void 0),l([d({readOnly:!0})],xt.prototype,"userContentUrl",null),l([d({readOnly:!0})],xt.prototype,"url",null),l([d()],xt.prototype,"username",void 0),l([d()],xt.prototype,"userLicenseTypeId",void 0),l([d()],xt.prototype,"userType",void 0),xt=SN=l([x("esri.portal.PortalUser")],xt);const W4=xt;var tn;let K0;const f9={PortalGroup:()=>Promise.resolve({default:_N}),PortalItem:()=>L(()=>Promise.resolve().then(()=>Tie),void 0),PortalUser:()=>Promise.resolve({default:W4})};let Y=tn=class extends P.JSONSupportMixin(In){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=nt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){m9.unregister(this),this.defaultBasemap=St(this.defaultBasemap),this.defaultDevBasemap=St(this.defaultDevBasemap),this.defaultVectorBasemap=St(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=kt(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)nt.request.trustedServers.includes(t)||nt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var i;const e=(i=this.user)==null?void 0:i.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return hK(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=W4.fromJSON(e),t.portal=this),t}load(e){const t=L(()=>Promise.resolve().then(()=>Sxe),void 0).then(({default:i})=>{Fe(e),K0=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{var r;if(!this.hasAPIKey&&Me){const s=Me;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==tn.AUTH_MODE_AUTO&&this.authMode!==tn.AUTH_MODE_NO_PROMPT||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",rxe(new WeakRef(this))),m9.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await L(async()=>{const{default:i}=await import("./ElevationLayer-BQtPGVOO.js");return{default:i}},__vite__mapDeps([132,133,134,135,136]))).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}async fetchBasemaps(e,t){const i=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(e,t);i.unshift(...r)}return i}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new ca;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const i=(await this.queryItems(t,e)).results.find(r=>r.type==="Web Scene");return i?new K0({portalItem:i}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):En(e)?Promise.reject(mt()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(t=>t.classificationSchema):null}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new ca({num:100,sortField:"title"});if(t!=null&&t.length){const r=[];for(const s of t)r.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(s=>s.results)}return En(e)?Promise.reject(mt()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Gr();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Gr();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return K2e(()=>new tn)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Gr().toLowerCase()},withCredentials:!0,...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this.request(r,s)}queryPortal(e,t,i,r){const s=yt(ca,t),n=o=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...r}).then(a=>{const u=s.clone();return u.start=a.nextStart,new txe({nextQueryParams:u,queryParams:s,total:a.total,results:tn._resultsToTypedArray(o,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(u=>typeof u.when=="function"?u.when():a)).then(()=>a,u=>(rl(u),a)));return i&&f9[i]?f9[i]().then(({default:o})=>(Fe(r),n(o))):n()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new M("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===tn.AUTH_MODE_ANONYMOUS||this.authMode===tn.AUTH_MODE_NO_PROMPT&&!Me)return Promise.reject(new M("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Me?Me.getCredential(this.restUrl,{prompt:this.authMode!==tn.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var i;const t=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then(r=>{const s=tn._resultsToTypedArray(i,{portal:this},r);return Promise.all(s.map(n=>typeof n.when=="function"?n.when():r)).then(()=>s,()=>s)})}request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===tn.AUTH_MODE_ANONYMOUS||this.authMode===tn.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:n=!1,method:o="auto",responseType:a="json",signal:u}=t,c={authMode:r,body:s,cacheBust:n,method:o,query:i,responseType:a,timeout:0,signal:u};return t.withCredentials&&(c.withCredentials=!0),Be(this._normalizeSSL(e),c).then(h=>h.data)}toJSON(){throw new M("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new tn({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new M("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const i=new ca;i.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,t);if(!r.total)return[];const s=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const n=await s.queryItems(i,t);return n.total?n.results.filter(o=>o.type==="Web Map").map(o=>new K0({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];if(this.hasAPIKey)return[];const r=new ca({query:i,disableExtraQuery:!0}),s=await this.queryGroups(r,t);if(!s.total)return[];const n=s.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(r,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new K0({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=K0.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,r){let s;if(i){const n=r!=null?r.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(s=s.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(n),a}))}else s=[];return s}};Y.AUTH_MODE_ANONYMOUS="anonymous",Y.AUTH_MODE_AUTO="auto",Y.AUTH_MODE_IMMEDIATE="immediate",Y.AUTH_MODE_NO_PROMPT="no-prompt",l([d()],Y.prototype,"access",void 0),l([d()],Y.prototype,"allSSL",void 0),l([d()],Y.prototype,"authMode",void 0),l([d()],Y.prototype,"authorizedCrossOriginDomains",void 0),l([W("authorizedCrossOriginDomains")],Y.prototype,"readAuthorizedCrossOriginDomains",null),l([d()],Y.prototype,"basemapGalleryGroupQuery",void 0),l([d({json:{name:"3DBasemapGalleryGroupQuery"}})],Y.prototype,"basemapGalleryGroupQuery3D",void 0),l([d()],Y.prototype,"bingKey",void 0),l([d()],Y.prototype,"canListApps",void 0),l([d()],Y.prototype,"canListData",void 0),l([d()],Y.prototype,"canListPreProvisionedItems",void 0),l([d()],Y.prototype,"canProvisionDirectPurchase",void 0),l([d()],Y.prototype,"canSearchPublic",void 0),l([d()],Y.prototype,"canShareBingPublic",void 0),l([d()],Y.prototype,"canSharePublic",void 0),l([d()],Y.prototype,"canSignInArcGIS",void 0),l([d()],Y.prototype,"canSignInIDP",void 0),l([d()],Y.prototype,"colorSetsGroupQuery",void 0),l([d()],Y.prototype,"commentsEnabled",void 0),l([d({type:Date})],Y.prototype,"created",void 0),l([d()],Y.prototype,"credential",void 0),l([d()],Y.prototype,"culture",void 0),l([d()],Y.prototype,"currentVersion",void 0),l([d()],Y.prototype,"customBaseUrl",void 0),l([d()],Y.prototype,"default3DBasemapQuery",void 0),l([d()],Y.prototype,"defaultBasemap",void 0),l([W("defaultBasemap")],Y.prototype,"readDefaultBasemap",null),l([d()],Y.prototype,"defaultDevBasemap",void 0),l([W("defaultDevBasemap")],Y.prototype,"readDefaultDevBasemap",null),l([d({type:gt})],Y.prototype,"defaultExtent",void 0),l([d()],Y.prototype,"defaultVectorBasemap",void 0),l([W("defaultVectorBasemap")],Y.prototype,"readDefaultVectorBasemap",null),l([d()],Y.prototype,"description",void 0),l([d()],Y.prototype,"devBasemapGalleryGroupQuery",void 0),l([d()],Y.prototype,"eueiEnabled",void 0),l([d({readOnly:!0})],Y.prototype,"extraQuery",null),l([d()],Y.prototype,"featuredGroups",void 0),l([d()],Y.prototype,"featuredItemsGroupQuery",void 0),l([d()],Y.prototype,"galleryTemplatesGroupQuery",void 0),l([d()],Y.prototype,"layoutGroupQuery",void 0),l([d()],Y.prototype,"livingAtlasGroupQuery",void 0),l([d({readOnly:!0})],Y.prototype,"hasAPIKey",null),l([d()],Y.prototype,"hasCategorySchema",void 0),l([d()],Y.prototype,"hasClassificationSchema",void 0),l([d()],Y.prototype,"helpBase",void 0),l([d()],Y.prototype,"helperServices",void 0),l([d()],Y.prototype,"helpMap",void 0),l([d()],Y.prototype,"homePageFeaturedContent",void 0),l([d()],Y.prototype,"homePageFeaturedContentCount",void 0),l([d()],Y.prototype,"httpPort",void 0),l([d()],Y.prototype,"httpsPort",void 0),l([d()],Y.prototype,"id",void 0),l([d()],Y.prototype,"ipCntryCode",void 0),l([d({readOnly:!0})],Y.prototype,"isOrganization",null),l([d()],Y.prototype,"isPortal",void 0),l([d()],Y.prototype,"isReadOnly",void 0),l([d({readOnly:!0})],Y.prototype,"itemPageUrl",null),l([d()],Y.prototype,"layerTemplatesGroupQuery",void 0),l([d()],Y.prototype,"maxTokenExpirationMinutes",void 0),l([d({type:Date})],Y.prototype,"modified",void 0),l([d()],Y.prototype,"name",void 0),l([d()],Y.prototype,"portalHostname",void 0),l([d()],Y.prototype,"portalMode",void 0),l([d()],Y.prototype,"portalProperties",void 0),l([d()],Y.prototype,"region",void 0),l([d()],Y.prototype,"recycleBinEnabled",void 0),l([d({readOnly:!0})],Y.prototype,"restUrl",null),l([d()],Y.prototype,"rotatorPanels",void 0),l([d()],Y.prototype,"showHomePageDescription",void 0),l([d()],Y.prototype,"sourceJSON",void 0),l([d()],Y.prototype,"staticImagesUrl",void 0),l([d({json:{name:"2DStylesGroupQuery"}})],Y.prototype,"stylesGroupQuery2d",void 0),l([d({json:{name:"stylesGroupQuery"}})],Y.prototype,"stylesGroupQuery3d",void 0),l([d()],Y.prototype,"supportsHostedServices",void 0),l([d()],Y.prototype,"symbolSetsGroupQuery",void 0),l([d()],Y.prototype,"templatesGroupQuery",void 0),l([d()],Y.prototype,"thumbnail",void 0),l([d({readOnly:!0})],Y.prototype,"thumbnailUrl",null),l([d()],Y.prototype,"units",void 0),l([d()],Y.prototype,"url",void 0),l([d()],Y.prototype,"urlKey",void 0),l([W("urlKey")],Y.prototype,"readUrlKey",null),l([d()],Y.prototype,"user",void 0),l([W("user")],Y.prototype,"readUser",null),l([d()],Y.prototype,"use3dBasemaps",void 0),l([d()],Y.prototype,"useDefault3dBasemap",void 0),l([d()],Y.prototype,"useStandardizedQuery",void 0),l([d()],Y.prototype,"useVectorBasemaps",void 0),l([d()],Y.prototype,"vectorBasemapGalleryGroupQuery",void 0),Y=tn=l([x("esri.portal.Portal")],Y);const Hr=Y,m9=new FinalizationRegistry(e=>{e.remove()});function rxe(e){const t=Me;return()=>{const i=e.deref();i&&t.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let ql=class extends se{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:y9(t.path,t.portalItem)}:t}set path(t){t!=null&&Tn(t)?q.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return y9(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",i){const r=this.cdnUrl;if(r==null)throw new M("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:t,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(t,i){const{addOrUpdateResources:r}=await L(()=>import("./resourceUtils-DSbdjJt0.js"),[]);return await r(this.portalItem,[{resource:this,content:t,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function y9(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&Tn(e)&&(e=l4(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}l([d()],ql.prototype,"portalItem",void 0),l([d({type:String,value:null})],ql.prototype,"path",null),l([ke("path")],ql.prototype,"_castPath",null),l([d({type:String,readOnly:!0})],ql.prototype,"url",null),l([d({type:String,readOnly:!0})],ql.prototype,"cdnUrl",null),l([d({type:String,readOnly:!0})],ql.prototype,"itemRelativeUrl",null),ql=l([x("esri.portal.PortalItemResource")],ql);const sxe=ql;let Rw=class extends se{constructor(t){super(t),this.created=null,this.rating=null}};l([d({type:Date})],Rw.prototype,"created",void 0),l([d()],Rw.prototype,"rating",void 0),Rw=l([x("esri.portal.PortalRating")],Rw);const O3=Rw;var ip;const nxe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),oxe=new Set(["KML","GeoJson","CSV"]);let Ie=ip=class extends P.JSONSupportMixin(In){static from(e){return yS(ip,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Geocoding Service"?i="Locator":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?i=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="Raster function template"?i="Raster Function Template":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?i="Instant App":e==="Insights Page"?i="Insights Report":e==="Excalibur Imagery Project"?i="Excalibur Project":e==="3DTiles Service"?i="3D tiles layer":e==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(e){return e&&e.length?new gt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var y;const e=((y=this.type)==null?void 0:y.toLowerCase())||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,n=!1,o=!1,a=!1,u=!1,c=!1,h=!1,p=!1,m=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),u=t.includes("Markup"),c=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),s=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":u?"markup":c?"spatiotemporal":h?"utilitynetwork":n?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(c=t.includes("Spatiotemporal"),p=t.includes("Relational"),s=c||p?"mapimages":n||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):s=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?s="maps":e==="web scene"?s=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?s="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?s="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?s="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?s="datafiles":e==="360 vr experience"?s="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?s="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?s="addindesktop":e==="pdf"?s="pdf":e==="microsoft word"?s="word":e==="microsoft excel"?s="excel":e==="microsoft powerpoint"?s="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?s="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?s="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?s="layersgray":e==="analysis model"?s="analysismodel":e==="scene package"?s="scenepackage":e==="3dtiles package"?s="3dtileslayerpackage":e==="3dtiles service"?s="3dtileslayer":e==="mobile scene package"?s="mobilescenepackage":e==="tile package"||e==="compact tile package"?s="tilepackage":e==="task file"?s="taskfile":e==="report template"?s="report-template":e==="statistical data collection"?s="statisticaldatacollection":e==="insights workbook"?s="workbook":e==="insights model"?s="insightsmodel":e==="insights page"?s="insightspage":e==="insights theme"?s="insightstheme":e==="hub initiative"?s="hubinitiative":e==="hub page"?s="hubpage":e==="hub site application"?s="hubsite":e==="hub event"?s="hubevent":e==="hub project"?s="hubproject":e==="relational database connection"?s="relationaldatabaseconnection":e==="big data file share"?s="datastorecollection":e==="image collection"?s="imagecollection":e==="desktop style"?s="desktopstyle":e==="style"?s=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?s="dashboard":e==="raster function template"?s="rasterprocessingtemplate":e==="vector tile package"?s="vectortilepackage":e==="ortho mapping project"?s="orthomappingproject":e==="ortho mapping template"?s="orthomappingtemplate":e==="solution"?s="solutions":e==="geopackage"?s="geopackage":e==="deep learning package"?s="deeplearningpackage":e==="real time analytic"?s="realtimeanalytics":e==="reality mapping project"?s="realitymappingproject":e==="big data analytic"?s="bigdataanalytics":e==="feed"?s="feed":e==="excalibur imagery project"?s="excaliburimageryproject":e==="notebook"?s="notebook":e==="storymap"?s="storymap":e==="survey123 add in"?s="survey123addin":e==="mission"?s="mission":e==="mission report"?s="missionreport":e==="mission template"?s="missiontemplate":e==="quickcapture project"?s="quickcaptureproject":e==="pro report"?s="proreport":e==="pro report template"?s="proreporttemplate":e==="urban model"?s="urbanmodel":e==="urban project"?s="urbanproject":e==="web experience"?s="experiencebuilder":e==="web experience template"?s="webexperiencetemplate":e==="experience builder widget"?s="experiencebuilderwidget":e==="experience builder widget package"?s="experiencebuilderwidgetpackage":e==="workflow"?s="workflow":e==="kernel gateway connection"?s="kernelgatewayconnection":e==="insights script"?s="insightsscript":e==="hub initiative template"?s="hubinitiativetemplate":e==="storymap theme"?s="storymaptheme":e==="knowledge graph"?s="knowledgegraph":e==="knowledge graph layer"?s="knowledgegraphlayer":e==="knowledge studio project"?s="knowledgestudio":e==="native application"?s="nativeapp":e==="native application installer"?s="nativeappinstaller":e==="web link chart"?s="linkchart":e==="knowledge graph web investigation"?s="investigation":e==="ogcfeatureserver"?s="features":e==="pro presentation"?s="propresentation":e==="pro project"?s="proproject":e==="insights workbook package"?s="insightsworkbookpackage":e==="apache parquet"?s="apacheparquet":e==="notebook code snippet library"?s="notebookcodesnippets":e==="suitability model"?s="suitabilitymodel":e==="esri classifier definition"?s="classifierdefinition":e==="esri classification schema"?s="classificationschema":e==="insights data engineering workbook"?s="dataengineeringworkbook":e==="insights data engineering model"?s="dataengineeringmodel":e==="deep learning studio project"?s="deeplearningproject":e==="discussion"?s="discussion":e==="allsource project"?s="allsourceproject":e==="api key"?s="apikey":e==="data pipeline"?s="datapipelines":e==="group layer"?(m=t.includes("Map"),s=m?"layergroup2d":"layergroup"):s=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",s?Yt(i+s+r+".png"):null}get isLayer(){return this.type!=null&&nxe.has(this.type)}get itemCdnUrl(){return p4(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const e=this.itemUrl,t=this.thumbnail;return e&&t?((i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var i,r,s;const e=(i=this.portal)==null?void 0:i.restUrl;if(!e)return null;const t=this.owner||((s=(r=this.portal)==null?void 0:r.user)==null?void 0:s.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=Hr.getDefault()),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},i=e instanceof O3?e.rating:e;return i==null||isNaN(i)||typeof e!="number"||(t.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new O3({rating:i,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:R(this.applicationProxies),avgRating:this.avgRating,categories:R(this.categories),classification:R(this.classification),created:R(this.created),culture:this.culture,description:this.description,extent:R(this.extent),groupCategories:R(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:R(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:R(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:R(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:R(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new ip({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]=(t=e[i])==null?void 0:t.join(", ");for(const i of["extent","classification"]){const r=e[i];r&&(e[i]=JSON.stringify(r))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new O3(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},ip)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new M("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new M("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await t.signIn();const{copyResources:r,folder:s,tags:n,title:o}=e||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!r,tags:n==null?void 0:n.join(","),title:o}},{itemId:u}=await t.request(`${i}/copy`,a);return new ip({id:u,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")sc(t)?r.query={data:t}:r.query={url:js(t)},i!=null&&(r.query.filename=i);else{const s=new FormData;i!=null?s.append("file",t,i):s.append("file",t),r.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new M("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:i}=await L(()=>import("./resourceUtils-DSbdjJt0.js"),[]);return i(this,e,t)}async addResource(e,t,i){const{addOrUpdateResources:r}=await L(()=>import("./resourceUtils-DSbdjJt0.js"),[]);return e.portalItem=this,await r(this,[{resource:e,content:t,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),e}async removeResource(e,t){const{removeResource:i}=await L(()=>import("./resourceUtils-DSbdjJt0.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new M("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await L(()=>import("./resourceUtils-DSbdjJt0.js"),[]);return t(this,e)}resourceFromPath(e){return new sxe({portalItem:this,path:e})}toJSON(){var i,r;const e=this.extent,t={accessInformation:this.accessInformation,categories:R(this.categories),classification:R(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:R(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:R(this.typeKeywords),url:this.url};return bye(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ip({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};l([d({type:["private","shared","org","public"]})],Ie.prototype,"access",void 0),l([d()],Ie.prototype,"accessInformation",void 0),l([d({type:String})],Ie.prototype,"apiKey",void 0),l([d({json:{read:{source:"appProxies"}}})],Ie.prototype,"applicationProxies",void 0),l([d()],Ie.prototype,"avgRating",void 0),l([d()],Ie.prototype,"categories",void 0),l([d()],Ie.prototype,"classification",void 0),l([d({type:Date})],Ie.prototype,"created",void 0),l([d()],Ie.prototype,"culture",void 0),l([d()],Ie.prototype,"description",void 0),l([d({readOnly:!0})],Ie.prototype,"displayName",null),l([d({type:gt})],Ie.prototype,"extent",void 0),l([W("extent")],Ie.prototype,"readExtent",null),l([d()],Ie.prototype,"groupCategories",void 0),l([d({readOnly:!0})],Ie.prototype,"iconUrl",null),l([d()],Ie.prototype,"id",void 0),l([d({readOnly:!0})],Ie.prototype,"isLayer",null),l([d({type:Boolean,readOnly:!0})],Ie.prototype,"isOrgItem",void 0),l([d()],Ie.prototype,"itemControl",void 0),l([d({readOnly:!0})],Ie.prototype,"itemPageUrl",null),l([d({readOnly:!0})],Ie.prototype,"itemUrl",null),l([d()],Ie.prototype,"licenseInfo",void 0),l([d({type:Date})],Ie.prototype,"modified",void 0),l([d()],Ie.prototype,"name",void 0),l([d()],Ie.prototype,"numComments",void 0),l([d()],Ie.prototype,"numRatings",void 0),l([d()],Ie.prototype,"numViews",void 0),l([d()],Ie.prototype,"owner",void 0),l([d()],Ie.prototype,"ownerFolder",void 0),l([d({type:Hr})],Ie.prototype,"portal",void 0),l([d()],Ie.prototype,"screenshots",void 0),l([d()],Ie.prototype,"size",void 0),l([d()],Ie.prototype,"snippet",void 0),l([d()],Ie.prototype,"sourceJSON",void 0),l([d({type:String})],Ie.prototype,"sourceUrl",void 0),l([d({type:String})],Ie.prototype,"spatialReference",void 0),l([d()],Ie.prototype,"tags",void 0),l([d()],Ie.prototype,"thumbnail",void 0),l([d({readOnly:!0})],Ie.prototype,"thumbnailUrl",null),l([d()],Ie.prototype,"title",void 0),l([d()],Ie.prototype,"type",void 0),l([d()],Ie.prototype,"typeKeywords",void 0),l([d({type:String,json:{read(e,t){var i;if(oxe.has(t.type)){const r=(i=this.portal)==null?void 0:i.restUrl;e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return e}}})],Ie.prototype,"url",void 0),l([d({readOnly:!0})],Ie.prototype,"userItemUrl",null),Ie=ip=l([x("esri.portal.PortalItem")],Ie);const yl=Ie,Tie=Object.freeze(Object.defineProperty({__proto__:null,default:yl},Symbol.toStringTag,{value:"Module"}));async function axe(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,i=await iI("esri/t9n/basemaps");return i[e]||i[t]}const g1={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Yt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Yt("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Yt("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Yt("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Yt("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Yt("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};let Gl=class extends se{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const t=this.language;let i=t==="local"||t==="global"?t:$te(t??Gr())??"global";return i=i==="no"?"nb":i,i}};l([d()],Gl.prototype,"apiKey",void 0),l([d()],Gl.prototype,"id",void 0),l([d()],Gl.prototype,"language",void 0),l([d()],Gl.prototype,"places",void 0),l([d()],Gl.prototype,"serviceUrl",void 0),l([d()],Gl.prototype,"worldview",void 0),Gl=l([x("esri.support.BasemapStyle")],Gl);const lxe=Gl;function uxe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function cxe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function Ds(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const gZe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function TN(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function vZe(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function lI(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function wZe(e){var i;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((i=e==null?void 0:e.source)==null?void 0:i.type)==="feature-layer"}async function Z4(e,t){const i=Me==null?void 0:Me.findServerInfo(e);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const s=`${e.slice(0,r)}/rest/info`,n=t!=null?t.signal:null,{data:o}=await Be(s,{query:{f:"json"},responseType:"json",signal:n});return(o==null?void 0:o.owningSystemUrl)||null}function xie(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function $ie(e){return xie(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function dxe(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function hxe(e){return!!dxe(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const pxe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),Eie=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wcs","wfs","wms","wmts"]),fxe=new Set([...Eie,"link-chart"]);function mxe(e){switch(e.layerContainerType){case"basemap":return pxe;case"operational-layers":return e.origin==="link-chart"?fxe:Eie;default:return null}}function yxe(e,t){if(t.restrictedWebMapWriting){const i=mxe(t);return i==null||i.has(e.type)&&!lI(e)}return!0}function gxe(e,t){var i;if(t)if(lI(e)){const r=aS("featureCollection.layers",t),s=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;s&&g9(e,s)}else e.type!=="group"&&g9(e,t)}function g9(e,t){"maxScale"in e&&(t.maxScale=KE(e.maxScale)??void 0),"minScale"in e&&(t.minScale=KE(e.minScale)??void 0)}function vxe(e,t){if(gxe(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=KE(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(lI(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function xN(e,t,i){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return i!=null&&i.messages&&i.messages.push(new M("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(lI(e)&&!e.isTable)t=e.resourceInfo;else if(yxe(e,i)){const r={};return e.write(r,i)?r:null}return t!=null&&vxe(e,t=R(t)),t}var Fw;let wxe=0,rn=Fw=class extends P.JSONSupportMixin(In){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+wxe++,this.baseLayers=new Q,this.referenceLayers=new Q;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&q.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{q.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroy();const t=this.referenceLayers.toArray();for(const i of t)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=St(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",tc(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const n=xN(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);n!=null&&r.push(n)}),this.referenceLayers.forEach(s=>{const n=xN(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);n!=null&&(s.type!=="scene"&&(n.isReference=!0),r.push(n))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",tc(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return aI(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>jE(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>jE(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new Fw({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var i;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const s=R(r);return s.url&&wl(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&wl(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i,style:r}=this;Fe(e);const s=[];if(t){const n=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const o=t.data.id;s.push(axe(o).then(a=>{a&&this.read({title:a},t.context)}))}}else i?s.push(this._loadFromItem(i,e)):r&&s.push(this._loadFromStylesService(r,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,i){var u,c;const r=(u=this.resourceInfo)==null?void 0:u.context,s=((c=this.portalItem)==null?void 0:c.portal)||(r==null?void 0:r.portal)||null,n=_xe[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:o}=await L(async()=>{const{populateOperationalLayers:h}=await import("./layersCreator-Cogw1XcB.js");return{populateOperationalLayers:h}},__vite__mapDeps([137,138,139,140,141,142])),a=[];if(Fe(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const h={context:{...r,origin:n,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},p=g=>n==="web-scene"&&g.layerType==="ArcGISSceneServiceLayer"||g.isReference,m=o(this.baseLayers,e.baseMapLayers.filter(g=>!p(g)),h);a.push(m);const y=o(this.referenceLayers,e.baseMapLayers.filter(p),h);a.push(y)}await Promise.allSettled(a)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),s=Li(e.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:bxe[e.type||""]??"web-map",portal:e.portal||Hr.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Hr.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}async _loadFromStylesService(e,t){const i=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,r=`${i}/styles/${e.id}/self`,s=`${i}/webmaps/${e.id}`,[n,o]=await Promise.all([(await Be(r,{query:{token:e.apiKey},signal:t==null?void 0:t.signal})).data,(await Be(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=n.thumbnailUrl);const a=Li(s);if(this._set("resourceInfo",{data:o.baseMap??{},context:{origin:"web-map",url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:o.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,a,t),e.apiKey)for(const u of[...this.baseLayers,...this.referenceLayers])"apiKey"in u&&(u.apiKey=e.apiKey)}static fromId(e){const t=g1[e];return t?t.itemId?new Fw({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):Fw.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};l([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Q}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],rn.prototype,"baseLayers",null),l([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],rn.prototype,"id",void 0),l([d({type:yl})],rn.prototype,"portalItem",void 0),l([d()],rn.prototype,"referenceLayers",null),l([d({readOnly:!0})],rn.prototype,"resourceInfo",void 0),l([d({type:we})],rn.prototype,"spatialReference",void 0),l([d({type:lxe})],rn.prototype,"style",void 0),l([d()],rn.prototype,"thumbnailUrl",void 0),l([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],rn.prototype,"title",void 0),l([J("title")],rn.prototype,"writeTitle",null),rn=Fw=l([x("esri.Basemap")],rn);const bxe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},_xe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},b_=rn,Sxe=Object.freeze(Object.defineProperty({__proto__:null,default:b_},Symbol.toStringTag,{value:"Module"})),xM={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Mie(e){return!!xM[e]||!!xM[e.toLowerCase()]}function J4(e){return xM[e]??xM[e.toLowerCase()]}function Txe(e){return[...J4(e)]}function R3(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function Aie(e,t,i,r=1){const s=(e%360+360)%360/360,n=i<=.5?i*(t+1):i+t-i*t,o=2*i-n;return[Math.round(255*R3(o,n,s+1/3)),Math.round(255*R3(o,n,s)),Math.round(255*R3(o,n,s-1/3)),r]}function xxe(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,s=t?1:17,n=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let u;return n&&(u=o&r,o>>=i,a[3]=s*u/255),u=o&r,o>>=i,a[2]=s*u,u=o&r,o>>=i,a[1]=s*u,u=o&r,o>>=i,a[0]=s*u,a}const bZe=2.2;function l2(e){return Ws(W5(e),0,255)}function u2(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}function c2(e,t){const i=e.toString(16).padStart(2,"0");return t?i.slice(0,1):i}let K=class Di{static blendColors(t,i,r,s=new Di){return s.r=Math.round(t.r+(i.r-t.r)*r),s.g=Math.round(t.g+(i.g-t.g)*r),s.b=Math.round(t.b+(i.b-t.b)*r),s.a=t.a+(i.a-t.a)*r,s._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(r){const s=r[2].split(/\s*,\s*/),n=r[1];if(n==="rgb"&&s.length===3||n==="rgba"&&s.length===4){const o=s[0];if(o.charAt(o.length-1)==="%"){const a=s.map(u=>2.56*parseFloat(u));return s.length===4&&(a[3]=parseFloat(s[3])),Di.fromArray(a,i)}return Di.fromArray(s.map(a=>parseFloat(a)),i)}if(n==="hsl"&&s.length===3||n==="hsla"&&s.length===4)return Di.fromArray(Aie(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(t,i=new Di){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const r=parseInt(t.slice(1,2),16),s=parseInt(t.slice(2,3),16),n=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return Di.fromArray([r+16*r,s+16*s,n+16*n,(o+16*o)/255],i)}case 7:case 9:{const r=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return Di.fromArray([r,s,n,o/255],i)}default:return null}}static fromArray(t,i=new Di){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=Mie(t)?J4(t):null;return r&&Di.fromArray(r,i)||Di.fromRgb(t,i)||Di.fromHex(t,i)}static fromJSON(t){return t!=null?new Di([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Di.fromString(t,this):Array.isArray(t)?Di.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Di||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const i=(t==null?void 0:t.capitalize)??!1,r=(t==null?void 0:t.digits)??6,s=r===3||r===4,n=r===4||r===8,o=`#${c2(this.r,s)}${c2(this.g,s)}${c2(this.b,s)}${n?c2(Math.round(255*this.a),s):""}`;return i?o.toUpperCase():o}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Di.AlphaMode.ALWAYS){const i=l2(this.r),r=l2(this.g),s=l2(this.b);return t===Di.AlphaMode.ALWAYS||this.a!==1?[i,r,s,l2(255*this.a)]:[i,r,s]}clone(){return new Di(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(u2(this.r,0,255)),this.g=Math.round(u2(this.g,0,255)),this.b=Math.round(u2(this.b,0,255)),this.a=u2(this.a,0,1),this}_set(t,i,r,s){this.r=t,this.g=i,this.b=r,this.a=s}};K.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(K);function ee(e,t={}){const i=e instanceof be?e:new be(e,t),{alwaysWriteDefaults:r,default:s,ignoreUnknown:n=!0,name:o,nonNullable:a,readOnly:u=!1}=t;return d({type:n?i.apiValues:String,json:{type:i.jsonValues,default:s,name:o,read:!u&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:u})}var $N;let Bx=$N=class extends P{constructor(e){super(e),this.type="none"}clone(){return new $N({type:this.type})}};l([ee({none:"none",stayAbove:"stay-above"}),d({json:{write:{isRequired:!0}}})],Bx.prototype,"type",void 0),Bx=$N=l([x("esri.ground.NavigationConstraint")],Bx);const $xe=Symbol("GroundInstance");function uI(e){const t=W5(100*(1-e));return Math.max(0,Math.min(t,100))}function v1(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var Iie,EN;let Bl=EN=class extends P.JSONSupportMixin(In){constructor(e){super(e),this[Iie]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Q;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&q.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{fi(e)||q.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)St(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}get layers(){return this._get("layers")}set layers(e){this._set("layers",tc(e,this._get("layers")))}writeLayers(e,t,i,r){const s=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(n=>{if("write"in n){const o={};yye(n)().write(o,r)&&s.push(o)}else r!=null&&r.messages&&r.messages.push(new M("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return aI(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await L(()=>import("./ElevationQuery-C4BnISiS.js"),[]);Fe(t);const r=new i,s=this.layers.filter(v9).toArray();return r.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await L(()=>import("./ElevationQuery-C4BnISiS.js"),[]);Fe(t);const r=new i,s=this.layers.filter(v9).toArray();return r.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:R(this.surfaceColor),navigationConstraint:R(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new EN({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,i){const r=(t==null?void 0:t.origin)||"web-scene",s=(t==null?void 0:t.portal)||null,n=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await L(async()=>{const{populateOperationalLayers:u}=await import("./layersCreator-Cogw1XcB.js");return{populateOperationalLayers:u}},__vite__mapDeps([137,138,139,140,141,142]));Fe(i);const a=[];if(e.layers&&Array.isArray(e.layers)){const u={context:{origin:r,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,u))}await Promise.allSettled(a)}};function Exe(e){return e&&"createElevationSampler"in e}function v9(e){return e.type==="elevation"||Exe(e)}Iie=$xe,l([d({json:{read:!1,write:{isRequired:!0}}})],Bl.prototype,"layers",null),l([J("layers")],Bl.prototype,"writeLayers",null),l([d({readOnly:!0})],Bl.prototype,"resourceInfo",void 0),l([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Le,read:{reader:v1,source:"transparency"},write:{writer:(e,t)=>{t.transparency=uI(e)},target:"transparency"}}})],Bl.prototype,"opacity",void 0),l([d({type:K,json:{type:[Le],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Bl.prototype,"surfaceColor",void 0),l([d({type:Bx,json:{write:!0}})],Bl.prototype,"navigationConstraint",void 0),Bl=EN=l([x("esri.Ground")],Bl);const $M=Bl,d2=new WeakMap;function Cie(e){return!e.destroyed&&(d2.has(e)||e.addHandles([G(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||Cie(t))},t=>d2.set(e,t),ns),Ke(()=>d2.delete(e))]),d2.get(e))}function Mxe(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function Axe(e){var t,i;return!(!Mxe(e)||!((i=(t=$ie(e))==null?void 0:t.operations)!=null&&i.supportsEditing)||"editingEnabled"in e&&!hxe(e)||Cie(e))}const Ixe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Cxe="screenUtils.toPt: input not recognized!",Oie=96;function Bp(e){return e?e/72*Oie:0}function Cn(e){return e?72*e/Oie:0}function Je(e){if(typeof e=="string"){const t=e.match(Ixe);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",n=r==="px"?Cn(i):i;return s?-n:n}return console.warn(Cxe),null}return e}function lr(e=0,t=0){return{x:e,y:t}}function _Ze(e){return e?lr(e.x,e.y):null}function SZe(e=0,t=0){return[e,t]}function TZe(e=0,t=0,i=0){return[e,t,i]}function xZe(e){return e}function $Ze(e){return e}function EZe(e){return e}function MZe(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function cI(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Oxe(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Rxe(e,t,i,r,s,n,o,a,u,c,h,p,m,y,g,v){const b=new Float32Array(16);return b[0]=e,b[1]=t,b[2]=i,b[3]=r,b[4]=s,b[5]=n,b[6]=o,b[7]=a,b[8]=u,b[9]=c,b[10]=h,b[11]=p,b[12]=m,b[13]=y,b[14]=g,b[15]=v,b}function Fxe(e,t){return new Float32Array(e,t,16)}const Nxe=cI();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Nxe,clone:Oxe,create:cI,createView:Fxe,fromValues:Rxe},Symbol.toStringTag,{value:"Module"}));let Y4=1e-6;function hs(){return Y4}function Lxe(e){Y4=e}const dI=Math.random,kxe=Math.PI/180,Pxe=180/Math.PI;function Q4(e){return e*kxe}function Dxe(e){return e*Pxe}function jxe(e,t){return Math.abs(e-t)<=Y4*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:dI,equals:jxe,getEpsilon:hs,setEpsilon:Lxe,toDegree:Dxe,toRadian:Q4},Symbol.toStringTag,{value:"Module"}));function Rie(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Mh(e,t,i,r,s,n,o,a,u,c,h,p,m,y,g,v,b){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=u,e[8]=c,e[9]=h,e[10]=p,e[11]=m,e[12]=y,e[13]=g,e[14]=v,e[15]=b,e}function hI(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ah(e,t){if(e===t){const i=t[1],r=t[2],s=t[3],n=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=n,e[11]=t[14],e[12]=s,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Vxe(e,t){return Fie(e,t)||hI(e),e}function Fie(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],p=t[9],m=t[10],y=t[11],g=t[12],v=t[13],b=t[14],w=t[15],_=i*a-r*o,S=i*u-s*o,T=i*c-n*o,E=r*u-s*a,A=r*c-n*a,C=s*c-n*u,O=h*v-p*g,U=h*b-m*g,V=h*w-y*g,H=p*b-m*v,te=p*w-y*v,ye=m*w-y*b;let ce=_*ye-S*te+T*H+E*V-A*U+C*O;return ce?(ce=1/ce,e[0]=(a*ye-u*te+c*H)*ce,e[1]=(s*te-r*ye-n*H)*ce,e[2]=(v*C-b*A+w*E)*ce,e[3]=(m*A-p*C-y*E)*ce,e[4]=(u*V-o*ye-c*U)*ce,e[5]=(i*ye-s*V+n*U)*ce,e[6]=(b*T-g*C-w*S)*ce,e[7]=(h*C-m*T+y*S)*ce,e[8]=(o*te-a*V+c*O)*ce,e[9]=(r*V-i*te-n*O)*ce,e[10]=(g*A-v*T+w*_)*ce,e[11]=(p*T-h*A-y*_)*ce,e[12]=(a*U-o*H-u*O)*ce,e[13]=(i*H-r*U+s*O)*ce,e[14]=(v*S-g*E-b*_)*ce,e[15]=(h*E-p*S+m*_)*ce,e):null}function zxe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],p=t[9],m=t[10],y=t[11],g=t[12],v=t[13],b=t[14],w=t[15];return e[0]=a*(m*w-y*b)-p*(u*w-c*b)+v*(u*y-c*m),e[1]=-(r*(m*w-y*b)-p*(s*w-n*b)+v*(s*y-n*m)),e[2]=r*(u*w-c*b)-a*(s*w-n*b)+v*(s*c-n*u),e[3]=-(r*(u*y-c*m)-a*(s*y-n*m)+p*(s*c-n*u)),e[4]=-(o*(m*w-y*b)-h*(u*w-c*b)+g*(u*y-c*m)),e[5]=i*(m*w-y*b)-h*(s*w-n*b)+g*(s*y-n*m),e[6]=-(i*(u*w-c*b)-o*(s*w-n*b)+g*(s*c-n*u)),e[7]=i*(u*y-c*m)-o*(s*y-n*m)+h*(s*c-n*u),e[8]=o*(p*w-y*v)-h*(a*w-c*v)+g*(a*y-c*p),e[9]=-(i*(p*w-y*v)-h*(r*w-n*v)+g*(r*y-n*p)),e[10]=i*(a*w-c*v)-o*(r*w-n*v)+g*(r*c-n*a),e[11]=-(i*(a*y-c*p)-o*(r*y-n*p)+h*(r*c-n*a)),e[12]=-(o*(p*b-m*v)-h*(a*b-u*v)+g*(a*m-u*p)),e[13]=i*(p*b-m*v)-h*(r*b-s*v)+g*(r*m-s*p),e[14]=-(i*(a*b-u*v)-o*(r*b-s*v)+g*(r*u-s*a)),e[15]=i*(a*m-u*p)-o*(r*m-s*p)+h*(r*u-s*a),e}function Uxe(e){const t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],o=e[5],a=e[6],u=e[7],c=e[8],h=e[9],p=e[10],m=e[11],y=e[12],g=e[13],v=e[14],b=e[15];return(t*o-i*n)*(p*b-m*v)-(t*a-r*n)*(h*b-m*g)+(t*u-s*n)*(h*v-p*g)+(i*a-r*o)*(c*b-m*y)-(i*u-s*o)*(c*v-p*y)+(r*u-s*a)*(c*g-h*y)}function Nie(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],p=t[8],m=t[9],y=t[10],g=t[11],v=t[12],b=t[13],w=t[14],_=t[15];let S=i[0],T=i[1],E=i[2],A=i[3];return e[0]=S*r+T*a+E*p+A*v,e[1]=S*s+T*u+E*m+A*b,e[2]=S*n+T*c+E*y+A*w,e[3]=S*o+T*h+E*g+A*_,S=i[4],T=i[5],E=i[6],A=i[7],e[4]=S*r+T*a+E*p+A*v,e[5]=S*s+T*u+E*m+A*b,e[6]=S*n+T*c+E*y+A*w,e[7]=S*o+T*h+E*g+A*_,S=i[8],T=i[9],E=i[10],A=i[11],e[8]=S*r+T*a+E*p+A*v,e[9]=S*s+T*u+E*m+A*b,e[10]=S*n+T*c+E*y+A*w,e[11]=S*o+T*h+E*g+A*_,S=i[12],T=i[13],E=i[14],A=i[15],e[12]=S*r+T*a+E*p+A*v,e[13]=S*s+T*u+E*m+A*b,e[14]=S*n+T*c+E*y+A*w,e[15]=S*o+T*h+E*g+A*_,e}function qxe(e,t,i){const r=i[0],s=i[1],n=i[2];if(t===e)e[12]=t[0]*r+t[4]*s+t[8]*n+t[12],e[13]=t[1]*r+t[5]*s+t[9]*n+t[13],e[14]=t[2]*r+t[6]*s+t[10]*n+t[14],e[15]=t[3]*r+t[7]*s+t[11]*n+t[15];else{const o=t[0],a=t[1],u=t[2],c=t[3],h=t[4],p=t[5],m=t[6],y=t[7],g=t[8],v=t[9],b=t[10],w=t[11];e[0]=o,e[1]=a,e[2]=u,e[3]=c,e[4]=h,e[5]=p,e[6]=m,e[7]=y,e[8]=g,e[9]=v,e[10]=b,e[11]=w,e[12]=o*r+h*s+g*n+t[12],e[13]=a*r+p*s+v*n+t[13],e[14]=u*r+m*s+b*n+t[14],e[15]=c*r+y*s+w*n+t[15]}return e}function Gxe(e,t,i){const r=i[0],s=i[1],n=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Bxe(e,t,i,r){let s=r[0],n=r[1],o=r[2],a=Math.sqrt(s*s+n*n+o*o);if(a<=hs())return void Rie(e,t);a=1/a,s*=a,n*=a,o*=a;const u=Math.sin(i),c=Math.cos(i),h=1-c,p=t[0],m=t[1],y=t[2],g=t[3],v=t[4],b=t[5],w=t[6],_=t[7],S=t[8],T=t[9],E=t[10],A=t[11],C=s*s*h+c,O=n*s*h+o*u,U=o*s*h-n*u,V=s*n*h-o*u,H=n*n*h+c,te=o*n*h+s*u,ye=s*o*h+n*u,ce=n*o*h-s*u,Qe=o*o*h+c;e[0]=p*C+v*O+S*U,e[1]=m*C+b*O+T*U,e[2]=y*C+w*O+E*U,e[3]=g*C+_*O+A*U,e[4]=p*V+v*H+S*te,e[5]=m*V+b*H+T*te,e[6]=y*V+w*H+E*te,e[7]=g*V+_*H+A*te,e[8]=p*ye+v*ce+S*Qe,e[9]=m*ye+b*ce+T*Qe,e[10]=y*ye+w*ce+E*Qe,e[11]=g*ye+_*ce+A*Qe,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function Hxe(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[4],o=t[5],a=t[6],u=t[7],c=t[8],h=t[9],p=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+c*r,e[5]=o*s+h*r,e[6]=a*s+p*r,e[7]=u*s+m*r,e[8]=c*s-n*r,e[9]=h*s-o*r,e[10]=p*s-a*r,e[11]=m*s-u*r,e}function Wxe(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[0],o=t[1],a=t[2],u=t[3],c=t[8],h=t[9],p=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-c*r,e[1]=o*s-h*r,e[2]=a*s-p*r,e[3]=u*s-m*r,e[8]=n*r+c*s,e[9]=o*r+h*s,e[10]=a*r+p*s,e[11]=u*r+m*s,e}function Zxe(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[0],o=t[1],a=t[2],u=t[3],c=t[4],h=t[5],p=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s+c*r,e[1]=o*s+h*r,e[2]=a*s+p*r,e[3]=u*s+m*r,e[4]=c*s-n*r,e[5]=h*s-o*r,e[6]=p*s-a*r,e[7]=m*s-u*r,e}function Jxe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Yxe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Qxe(e,t,i){if(t===0)return hI(e);let r=i[0],s=i[1],n=i[2],o=Math.sqrt(r*r+s*s+n*n);if(o<=hs())return null;o=1/o,r*=o,s*=o,n*=o;const a=Math.sin(t),u=Math.cos(t),c=1-u;return e[0]=r*r*c+u,e[1]=s*r*c+n*a,e[2]=n*r*c-s*a,e[3]=0,e[4]=r*s*c-n*a,e[5]=s*s*c+u,e[6]=n*s*c+r*a,e[7]=0,e[8]=r*n*c+s*a,e[9]=s*n*c-r*a,e[10]=n*n*c+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Xxe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Kxe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function e$e(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Lie(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=r+r,u=s+s,c=n+n,h=r*a,p=r*u,m=r*c,y=s*u,g=s*c,v=n*c,b=o*a,w=o*u,_=o*c;return e[0]=1-(y+v),e[1]=p+_,e[2]=m-w,e[3]=0,e[4]=p-_,e[5]=1-(h+v),e[6]=g+b,e[7]=0,e[8]=m+w,e[9]=g-b,e[10]=1-(h+y),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function t$e(e,t){const i=i$e,r=-t[0],s=-t[1],n=-t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],p=r*r+s*s+n*n+o*o;return p>0?(i[0]=2*(a*o+h*r+u*n-c*s)/p,i[1]=2*(u*o+h*s+c*r-a*n)/p,i[2]=2*(c*o+h*n+a*s-u*r)/p):(i[0]=2*(a*o+h*r+u*n-c*s),i[1]=2*(u*o+h*s+c*r-a*n),i[2]=2*(c*o+h*n+a*s-u*r)),Lie(e,t,i),e}const i$e=$h();function r$e(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function s$e(e,t){const i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],a=t[6],u=t[8],c=t[9],h=t[10];return e[0]=Math.sqrt(i*i+r*r+s*s),e[1]=Math.sqrt(n*n+o*o+a*a),e[2]=Math.sqrt(u*u+c*c+h*h),e}function n$e(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function o$e(e,t,i,r){const s=t[0],n=t[1],o=t[2],a=t[3],u=s+s,c=n+n,h=o+o,p=s*u,m=s*c,y=s*h,g=n*c,v=n*h,b=o*h,w=a*u,_=a*c,S=a*h,T=r[0],E=r[1],A=r[2];return e[0]=(1-(g+b))*T,e[1]=(m+S)*T,e[2]=(y-_)*T,e[3]=0,e[4]=(m-S)*E,e[5]=(1-(p+b))*E,e[6]=(v+w)*E,e[7]=0,e[8]=(y+_)*A,e[9]=(v-w)*A,e[10]=(1-(p+g))*A,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function a$e(e,t,i,r,s){const n=t[0],o=t[1],a=t[2],u=t[3],c=n+n,h=o+o,p=a+a,m=n*c,y=n*h,g=n*p,v=o*h,b=o*p,w=a*p,_=u*c,S=u*h,T=u*p,E=r[0],A=r[1],C=r[2],O=s[0],U=s[1],V=s[2],H=(1-(v+w))*E,te=(y+T)*E,ye=(g-S)*E,ce=(y-T)*A,Qe=(1-(m+w))*A,ie=(b+_)*A,ae=(g+S)*C,ne=(b-_)*C,De=(1-(m+v))*C;return e[0]=H,e[1]=te,e[2]=ye,e[3]=0,e[4]=ce,e[5]=Qe,e[6]=ie,e[7]=0,e[8]=ae,e[9]=ne,e[10]=De,e[11]=0,e[12]=i[0]+O-(H*O+ce*U+ae*V),e[13]=i[1]+U-(te*O+Qe*U+ne*V),e[14]=i[2]+V-(ye*O+ie*U+De*V),e[15]=1,e}function l$e(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=i+i,a=r+r,u=s+s,c=i*o,h=r*o,p=r*a,m=s*o,y=s*a,g=s*u,v=n*o,b=n*a,w=n*u;return e[0]=1-p-g,e[1]=h+w,e[2]=m-b,e[3]=0,e[4]=h-w,e[5]=1-c-g,e[6]=y+v,e[7]=0,e[8]=m+b,e[9]=y-v,e[10]=1-c-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u$e(e,t,i,r,s,n,o){const a=1/(i-t),u=1/(s-r),c=1/(n-o);return e[0]=2*n*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*u,e[6]=0,e[7]=0,e[8]=(i+t)*a,e[9]=(s+r)*u,e[10]=(o+n)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n*2*c,e[15]=0,e}function c$e(e,t,i,r,s){const n=1/Math.tan(t/2);let o;return e[0]=n/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(o=1/(r-s),e[10]=(s+r)*o,e[14]=2*s*r*o):(e[10]=-1,e[14]=-2*r),e}function d$e(e,t,i,r){const s=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+a),c=2/(s+n);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*u*.5,e[9]=(s-n)*c*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function h$e(e,t,i,r,s,n,o){const a=1/(t-i),u=1/(r-s),c=1/(n-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*a,e[13]=(s+r)*u,e[14]=(o+n)*c,e[15]=1,e}function p$e(e,t,i,r){const s=t[0],n=t[1],o=t[2];let a=s-i[0],u=n-i[1],c=o-i[2];const h=hs();if(Math.abs(a)<h&&Math.abs(u)<h&&Math.abs(c)<h)return void hI(e);let p=1/Math.sqrt(a*a+u*u+c*c);a*=p,u*=p,c*=p;const m=r[0],y=r[1],g=r[2];let v=y*c-g*u,b=g*a-m*c,w=m*u-y*a;p=Math.sqrt(v*v+b*b+w*w),p?(p=1/p,v*=p,b*=p,w*=p):(v=0,b=0,w=0);let _=u*w-c*b,S=c*v-a*w,T=a*b-u*v;p=Math.sqrt(_*_+S*S+T*T),p?(p=1/p,_*=p,S*=p,T*=p):(_=0,S=0,T=0),e[0]=v,e[1]=_,e[2]=a,e[3]=0,e[4]=b,e[5]=S,e[6]=u,e[7]=0,e[8]=w,e[9]=T,e[10]=c,e[11]=0,e[12]=-(v*s+b*n+w*o),e[13]=-(_*s+S*n+T*o),e[14]=-(a*s+u*n+c*o),e[15]=1}function f$e(e,t,i,r){const s=t[0],n=t[1],o=t[2],a=r[0],u=r[1],c=r[2];let h=s-i[0],p=n-i[1],m=o-i[2],y=h*h+p*p+m*m;y>0&&(y=1/Math.sqrt(y),h*=y,p*=y,m*=y);let g=u*m-c*p,v=c*h-a*m,b=a*p-u*h;return y=g*g+v*v+b*b,y>0&&(y=1/Math.sqrt(y),g*=y,v*=y,b*=y),e[0]=g,e[1]=v,e[2]=b,e[3]=0,e[4]=p*b-m*v,e[5]=m*g-h*b,e[6]=h*v-p*g,e[7]=0,e[8]=h,e[9]=p,e[10]=m,e[11]=0,e[12]=s,e[13]=n,e[14]=o,e[15]=1,e}function m$e(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function y$e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function g$e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function kie(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function v$e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function w$e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function b$e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function _$e(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8],p=e[9],m=e[10],y=e[11],g=e[12],v=e[13],b=e[14],w=e[15],_=t[0],S=t[1],T=t[2],E=t[3],A=t[4],C=t[5],O=t[6],U=t[7],V=t[8],H=t[9],te=t[10],ye=t[11],ce=t[12],Qe=t[13],ie=t[14],ae=t[15],ne=hs();return Math.abs(i-_)<=ne*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(r-S)<=ne*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(s-T)<=ne*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(n-E)<=ne*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(o-A)<=ne*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(a-C)<=ne*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(u-O)<=ne*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(c-U)<=ne*Math.max(1,Math.abs(c),Math.abs(U))&&Math.abs(h-V)<=ne*Math.max(1,Math.abs(h),Math.abs(V))&&Math.abs(p-H)<=ne*Math.max(1,Math.abs(p),Math.abs(H))&&Math.abs(m-te)<=ne*Math.max(1,Math.abs(m),Math.abs(te))&&Math.abs(y-ye)<=ne*Math.max(1,Math.abs(y),Math.abs(ye))&&Math.abs(g-ce)<=ne*Math.max(1,Math.abs(g),Math.abs(ce))&&Math.abs(v-Qe)<=ne*Math.max(1,Math.abs(v),Math.abs(Qe))&&Math.abs(b-ie)<=ne*Math.max(1,Math.abs(b),Math.abs(ie))&&Math.abs(w-ae)<=ne*Math.max(1,Math.abs(w),Math.abs(ae))}function S$e(e){const t=hs(),i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],u=e[8],c=e[9],h=e[10];return Math.abs(1-(i*i+n*n+u*u))<=t&&Math.abs(1-(r*r+o*o+c*c))<=t&&Math.abs(1-(s*s+a*a+h*h))<=t}function T$e(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const x$e=Nie,$$e=kie;Object.freeze(Object.defineProperty({__proto__:null,add:g$e,adjoint:zxe,copy:Rie,determinant:Uxe,equals:_$e,exactEquals:b$e,frob:y$e,fromQuat:l$e,fromQuat2:t$e,fromRotation:Qxe,fromRotationTranslation:Lie,fromRotationTranslationScale:o$e,fromRotationTranslationScaleOrigin:a$e,fromScaling:Yxe,fromTranslation:Jxe,fromXRotation:Xxe,fromYRotation:Kxe,fromZRotation:e$e,frustum:u$e,getRotation:n$e,getScaling:s$e,getTranslation:r$e,hasIdentityRotation:T$e,identity:hI,invert:Fie,invertOrIdentity:Vxe,isOrthoNormal:S$e,lookAt:p$e,mul:x$e,multiply:Nie,multiplyScalar:v$e,multiplyScalarAndAdd:w$e,ortho:h$e,perspective:c$e,perspectiveFromFieldOfView:d$e,rotate:Bxe,rotateX:Hxe,rotateY:Wxe,rotateZ:Zxe,scale:Gxe,set:Mh,str:m$e,sub:$$e,subtract:kie,targetTo:f$e,translate:qxe,transpose:Ah},Symbol.toStringTag,{value:"Module"}));const E$e=(e,t)=>{const i=Mh(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Ah(i,i)},M$e=(e,t)=>{const i=Mh(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Ah(i,i)},A$e=(e,t)=>{const i=1-t,r=Mh(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Ah(r,r)},I$e=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),s=Mh(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Ah(s,s)},C$e=(e,t)=>{const i=1-2*t,r=Mh(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return Ah(r,r)},O$e=(e,t)=>{const i=Mh(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Ah(i,i)},R$e=(e,t)=>{const i=1-t,r=Mh(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Ah(r,r)};let Pie=class Die{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=ks(t.strength,i.strength,r),this.radius=ks(t.radius,i.radius,r),this.threshold=ks(t.threshold,i.threshold,r)}clone(){return new Die(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:__(this.radius),strength:this.strength,threshold:this.threshold}}},jie=class Vie{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(ks(t.radius,i.radius,r))}clone(){return new Vie(this.radius)}toJSON(){return{type:"blur",radius:__(this.radius)}}},MN=class zie{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=ks(t.amount,i.amount,r),this._updateMatrix()}clone(){return new zie(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||cI();switch(this.type){case"brightness":this._colorMatrix=E$e(t,this.amount);break;case"contrast":this._colorMatrix=M$e(t,this.amount);break;case"grayscale":this._colorMatrix=A$e(t,this.amount);break;case"invert":this._colorMatrix=C$e(t,this.amount);break;case"saturate":this._colorMatrix=O$e(t,this.amount);break;case"sepia":this._colorMatrix=R$e(t,this.amount)}}},Uie=class qie{constructor(t,i,r,s){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=ks(t.offsetX,i.offsetX,r),this.offsetY=ks(t.offsetY,i.offsetY,r),this.blurRadius=ks(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(ks(t.color[0],i.color[0],r)),this.color[1]=Math.round(ks(t.color[1],i.color[1],r)),this.color[2]=Math.round(ks(t.color[2],i.color[2],r)),this.color[3]=ks(t.color[3],i.color[3],r)}clone(){return new qie(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:__(this.offsetX),yoffset:__(this.offsetY),blurRadius:__(this.blurRadius),color:t}}},Gie=class Bie{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=ks(t.angle,i.angle,r),this._updateMatrix()}clone(){return new Bie(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||cI();this._colorMatrix=I$e(t,this.angle)}},Hie=class Wie{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=ks(t.amount,i.amount,r)}clone(){return new Wie(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function ks(e,t,i){return e+(t-e)*i}function __(e){return Math.round(1e3*Cn(e))/1e3}function F$e(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new MN(e.type,0);case"saturate":case"brightness":case"contrast":return new MN(e.type,1);case"opacity":return new Hie(1);case"hue-rotate":return new Gie(0);case"blur":return new jie(0);case"drop-shadow":return new Uie(0,0,0,[...J4("transparent")]);case"bloom":return new Pie(0,0,1)}}function N$e(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,s)=>r.type===i[s].type)}function L$e(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let s=r.length;s<i.length;s++)r.push(F$e(i[s]))}function k$e(e){const t=e[0];return!!t&&"type"in t}function P$e(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)}function AZe(e,t){var i,r,s,n;return!(!((r=(i=e.basemap)==null?void 0:i.referenceLayers)!=null&&r.some(o=>o.uid===t))&&!((n=(s=e.basemap)==null?void 0:s.baseLayers)!=null&&n.some(o=>o.uid===t)))}function D$e(e){let t=null;const i=z$e(e),r=!(i!=null&&i.baseLayers.length);for(const s in g1){const n=G$e(i,Zie(g1[s]),{mustMatchReferences:r});if(n==="equal"){t=s;break}n==="base-layers-equal"&&(t=s)}return t}function IZe(e){return!!(e!=null&&e.baseLayers.concat(e.referenceLayers).some(j$e))}function j$e(e){if(w9(e.url))return!0;if(e.type==="vector-tile")for(const t in e.sourceNameToSource){const i=e.sourceNameToSource[t];if(w9(i==null?void 0:i.sourceUrl))return!0}return!1}function CZe(e,t){var n;if(t==null||e==null)return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=t.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(n=i.tileInfo)==null?void 0:n.spatialReference:i.spatialReference]).filter(Boolean),s=e.spatialReference;return s?{spatialReference:r.find(o=>s.equals(o))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}const V$e=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function w9(e){if(!e)return!1;const t=new eh(js(e));return!!t.authority&&V$e.test(t.authority)}function z$e(e){return e?!e.loaded&&e.resourceInfo?Zie(e.resourceInfo.data):{baseLayers:b9(e.baseLayers),referenceLayers:b9(e.referenceLayers)}:null}function b9(e){return(Q.isCollection(e)?e.toArray():e).map(U$e)}function U$e(e){var t,i;return{type:e.type,effect:"effect"in e?e.effect:void 0,url:Jie("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||e.sublayers==null||(t=e.sublayers)==null?void 0:t.map(r=>({id:r.id,visible:r.visible})),activeLayerId:e.type==="wmts"?(i=e.activeLayer)==null?void 0:i.id:void 0}}function _9(e){return e.isReference||e.layerType==="ArcGISSceneServiceLayer"}function Zie(e){return e?{baseLayers:S9((e.baseMapLayers??[]).filter(t=>!_9(t))),referenceLayers:S9((e.baseMapLayers??[]).filter(t=>_9(t)))}:null}function S9(e){return e.map(t=>q$e(t))}function q$e(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:Jie(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function G$e(e,t,i){return e!=null!=(t!=null)?"not-equal":!e||!t?"equal":T9(e.baseLayers,t.baseLayers)?T9(e.referenceLayers,t.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function T9(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!B$e(e[i],t[i]))return!1;return!0}function B$e(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity||!P$e(e.effect,t.effect))return!1;if(e.activeLayerId!=null||t.activeLayerId!=null)return e.activeLayerId===t.activeLayerId;if(e.sublayers!=null||t.sublayers!=null){if(e.sublayers==null||t.sublayers==null||e.sublayers.length!==t.sublayers.length)return!1;for(let i=0;i<e.sublayers.length;i++){const r=e.sublayers.at(i),s=t.sublayers.at(i);if((r==null?void 0:r.id)!==(s==null?void 0:s.id)||(r==null?void 0:r.visible)!==(s==null?void 0:s.visible))return!1}}return!0}function Jie(e){return e?yo(e).replace(/^\s*https?:/i,"").toLowerCase():""}const F3=()=>q.getLogger("esri.support.basemapUtils");function H$e(){return{}}function W$e(e){for(const t in e){const i=e[t];St(i),delete e[t]}}function Z$e(e,t){let i;if(typeof e=="string"){const r=e in g1,s=!r&&e.includes("/");if(!r&&!s){if(nt.apiKey)F3().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(g1).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");F3().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${n}`)}return null}t&&(i=t[e]),i||(i=r?b_.fromId(e):new b_({style:{id:e}}),t&&(t[e]=i))}else i=yt(b_,e);return i!=null&&i.destroyed&&(F3().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function J$e(e){return new d1({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return!!i&&"tables"in i&&i.tables.includes(t)}})}function N3(e){for(const t of e.values())t==null||t.destroy();e.clear()}const x9={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Y$e(e){let t=null;if(typeof e=="string")if(e in x9){const i=x9[e];t=new $M({resourceInfo:{data:{layers:[i]}}})}else q.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=yt($M,e);return t}let Yie=0;const Qie=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Yie++})}};return t=l([x("esri.core.Identifiable")],t),t},Q$e=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Yie++})}};return t=l([x("esri.core.Identifiable.NumericIdentifiable")],t),t};let Nw=class extends Qie(class{}){};Nw=l([x("esri.core.Identifiable")],Nw),function(e){e.IdentifiableMixin=Qie,e.NumericIdentifiableMixin=Q$e}(Nw||(Nw={}));const ac=Nw;async function X$e(e){var r;const t="portalItem"in e?e:{portalItem:e},{fromItem:i}=await L(async()=>{const{fromItem:s}=await import("./portalLayers-Ckyjdqs-.js");return{fromItem:s}},__vite__mapDeps([142,140,139,138,141]));try{return await i(t)}catch(s){const n=t==null?void 0:t.portalItem,o=(n==null?void 0:n.id)||"unset",a=((r=n==null?void 0:n.portal)==null?void 0:r.url)||nt.portalUrl;throw q.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",s),s}}const S_={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function L3(e,t,i,r=An){const s=new Zs(tI(r)),n=ue.fromJSDate(e,{zone:s}),o=i==="decades"||i==="centuries"?"year":Kie(i);return i==="decades"&&(t*=10),i==="centuries"&&(t*=100),n.plus({[o]:t}).toJSDate()}function RZe(e,t,i="milliseconds"){const r=e.getTime(),s=Xie(t,i,"milliseconds");return new Date(r+s)}function $9(e,t,i=An){const r=new Zs(tI(i)),s=ue.fromJSDate(e,{zone:r});if(t==="decades"||t==="centuries"){const o=s.startOf("year"),{year:a}=o,u=a-a%(t==="decades"?10:100);return o.set({year:u}).toJSDate()}const n=Kie(t);return s.startOf(n).toJSDate()}function Xie(e,t,i){return e===0?0:e*S_[t]/S_[i]}function FZe(e,t){return e&&t?e.intersection(t):e||t}function Kie(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var jn;let hn=jn=class extends P{static get allTime(){return E9}static get empty(){return K$e}static fromArray(e){return new jn({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(jn.allTime)}get isEmpty(){return this.equals(jn.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new jn({end:this.end,start:this.start})}equals(e){var n,o,a,u;if(!e)return!1;const t=((n=this.start)==null?void 0:n.getTime())??this.start,i=((o=this.end)==null?void 0:o.getTime())??this.end,r=((a=e.start)==null?void 0:a.getTime())??e.start,s=((u=e.end)==null?void 0:u.getTime())??e.end;return t===r&&i===s}expandTo(e,t=An){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=$9(i,e,t));let r=this.end;if(r){const s=$9(r,e,t);r=r.getTime()===s.getTime()?s:L3(s,1,e,t)}return new jn({start:i,end:r})}intersection(e){var a,u,c,h;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return jn.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((a=this.start)==null?void 0:a.getTime())??-1/0,i=((u=this.end)==null?void 0:u.getTime())??1/0,r=((c=e.start)==null?void 0:c.getTime())??-1/0,s=((h=e.end)==null?void 0:h.getTime())??1/0;let n,o;return r>=t&&r<=i?n=r:t>=r&&t<=s&&(n=t),i>=r&&i<=s?o=i:s>=t&&s<=i&&(o=s),n==null||o==null||isNaN(n)||isNaN(o)?jn.empty:new jn({start:n===-1/0?null:new Date(n),end:o===1/0?null:new Date(o)})}offset(e,t,i=An){if(this.isEmpty||this.isAllTime)return this.clone();const r=new jn,{start:s,end:n}=this;return s!=null&&(r.start=L3(s,e,t,i)),n!=null&&(r.end=L3(n,e,t,i)),r}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return E9.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new jn({start:t,end:i})}};l([d({type:Date,json:{write:{allowNull:!0}}})],hn.prototype,"end",void 0),l([W("end")],hn.prototype,"readEnd",null),l([J("end")],hn.prototype,"writeEnd",null),l([d({readOnly:!0,json:{read:!1}})],hn.prototype,"isAllTime",null),l([d({readOnly:!0,json:{read:!1}})],hn.prototype,"isEmpty",null),l([d({type:Date,json:{write:{allowNull:!0}}})],hn.prototype,"start",void 0),l([W("start")],hn.prototype,"readStart",null),l([J("start")],hn.prototype,"writeStart",null),hn=jn=l([x("esri.time.TimeExtent")],hn);const Ni=hn,E9=new hn,K$e=new hn({start:void 0,end:void 0});let eEe=0,ri=class extends _o.EventedMixin(ac.IdentifiableMixin(In)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new gt(-180,-90,180,90,we.WGS84),this.id=Date.now().toString(16)+"-layer-"+eEe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=we.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const i=typeof t=="string"?{url:t}:t;return(await L(async()=>{const{fromUrl:r}=await import("./arcgisLayers-CIS-k77z.js");return{fromUrl:r}},__vite__mapDeps([143,140,139,141]))).fromUrl(i)}static fromPortalItem(t){return X$e(t)}initialize(){this.when().catch(t=>{fi(t)||q.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const i=this;"layers"in t&&t.layers.includes(i)?t.layers.remove(i):"tables"in t&&t.tables.includes(i)?t.tables.remove(i):"baseLayers"in t&&t.baseLayers.includes(i)?t.baseLayers.remove(i):"referenceLayers"in t&&t.referenceLayers.includes(i)&&t.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const i=this.parent;return t&&i&&"effectiveVisible"in i&&t&&(t=i.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Li(this.url)}createLayerView(t,i){return Promise.reject(new M("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Be(t,{query:{f:"json"},responseType:"json"})).data;throw new M("layer:no-attribution-data","Layer does not have attribution data")}};l([d({type:String})],ri.prototype,"attributionDataUrl",void 0),l([d({readOnly:!0})],ri.prototype,"effectiveVisible",null),l([d({type:gt})],ri.prototype,"fullExtent",void 0),l([d({readOnly:!0})],ri.prototype,"hasAttributionData",null),l([d({type:String,clonable:!1})],ri.prototype,"id",void 0),l([d({type:Boolean,nonNullable:!0})],ri.prototype,"legendEnabled",void 0),l([d({type:["show","hide","hide-children"]})],ri.prototype,"listMode",void 0),l([d({type:Number,range:{min:0,max:1},nonNullable:!0})],ri.prototype,"opacity",void 0),l([d({clonable:!1})],ri.prototype,"parent",void 0),l([d({readOnly:!0})],ri.prototype,"parsedUrl",null),l([d({type:Boolean,readOnly:!0})],ri.prototype,"persistenceEnabled",void 0),l([d({type:Boolean})],ri.prototype,"popupEnabled",void 0),l([d({type:Boolean})],ri.prototype,"attributionVisible",void 0),l([d({type:we})],ri.prototype,"spatialReference",void 0),l([d({type:String})],ri.prototype,"title",void 0),l([d({readOnly:!0,json:{read:!1}})],ri.prototype,"type",void 0),l([d()],ri.prototype,"url",void 0),l([d({type:Ni})],ri.prototype,"visibilityTimeExtent",void 0),l([d({type:Boolean,nonNullable:!0})],ri.prototype,"visible",void 0),ri=l([x("esri.layers.Layer")],ri);const X4=ri;function AN(e,t,i){let r,s;if(e)for(let n=0,o=e.length;n<o;n++){if(r=e.at(n),(r==null?void 0:r[t])===i)return r;if((r==null?void 0:r.type)==="group"&&(s=AN(r.layers,t,i),s))return s}}const tEe=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new Q;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||q.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void q.getLogger(this).error("#add()","Cannot add layer to itself.");r(o.item)}),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>n(o.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",tc(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof X4){const n=i;n.parent===this?this.reorder(n,r):s.add(n,r)}else xl(i)?i.then(n=>{this.destroyed||this.add(n,r)}):q.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;let n=s.getNextIndex(r);i.slice().forEach(o=>{o.parent!==this?(s.add(o,n),n+=1):this.reorder(o,n)})}findLayerById(i){return AN(this.layers,"id",i)}findLayerByUid(i){return AN(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return l([d()],t.prototype,"layers",null),t=l([x("esri.support.LayersMixin")],t),t},iEe=new Set(["feature","subtype-group"]);function IN(e,t,i){if(e)for(let r=0,s=e.length;r<s;r++){const n=e.at(r);if(n[t]===i)return n;if((n==null?void 0:n.type)==="group"){const o=IN(n.tables,t,i);if(o)return o}}}const rEe=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new Q,this.addHandles([this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,iEe.has(s.type)||q.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",tc(i,this._get("tables")))}findTableById(i){return IN(this.tables,"id",i)}findTableByUid(i){return IN(this.tables,"uid",i)}};return l([d()],t.prototype,"tables",null),t=l([x("esri.support.TablesMixin")],t),t};let Do=class extends rEe(tEe(_o.EventedMixin(se))){constructor(t){super(t),this.allLayers=new d1({getCollections:()=>{var i,r,s;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=J$e(this),this.basemap=null,this.editableLayers=new d1({getCollections:()=>[this.allLayers],itemFilterFunction:Axe}),this.ground=new $M,this._basemapCache=H$e()}destroy(){W$e(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=St(this.basemap),St(this.ground),this._set("ground",null)}castBasemap(t){return Z$e(t,this._basemapCache)}castGround(t){return Y$e(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(i=>i.id===t)}findTableById(t){return this.allTables.find(i=>i.id===t)}};l([d({readOnly:!0,dependsOn:[]})],Do.prototype,"allLayers",void 0),l([d({readOnly:!0})],Do.prototype,"allTables",void 0),l([d({type:b_,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Do.prototype,"basemap",void 0),l([ke("basemap")],Do.prototype,"castBasemap",null),l([d({readOnly:!0})],Do.prototype,"editableLayers",void 0),l([d({type:$M,nonNullable:!0})],Do.prototype,"ground",void 0),l([ke("ground")],Do.prototype,"castGround",null),l([d()],Do.prototype,"undoRedo",void 0),Do=l([x("esri.Map")],Do);const ere=Do;let T_=class extends Q{constructor(t){super(t),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(Q.ofType(this.itemType.Type))(t):new Q(t)}};function M9(e,t){return{type:e,cast:bie,set(i){const r=tc(i,this._get(t),e);r.owner=this,this._set(t,r)}}}l([d()],T_.prototype,"owner",null),T_=l([x("esri.core.support.OwningCollection")],T_);var Lw;const EM=Si()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),tre=EM.jsonValues.slice();vye(tre,"orthometric");const x_=Si()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let jo=Lw=class extends P{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return EM.write(e,t,i)}readHeightModel(e,t,i){return EM.read(e)||(i!=null&&i.messages&&i.messages.push(sEe(e,{context:i})),null)}readHeightUnit(e,t,i){return x_.read(e)||(i!=null&&i.messages&&i.messages.push(A9(e,{context:i})),null)}readHeightUnitService(e,t,i){return w4(e)||x_.read(e)||(i!=null&&i.messages&&i.messages.push(A9(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Lw({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=NK(t);return new Lw({heightModel:e.heightModel,heightUnit:i??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Lw;return t.read(e,{origin:"web-scene"}),t}};function A9(e,t){return new bo("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function sEe(e,t){return new bo("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}l([d({type:EM.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:tre,default:"ellipsoidal",write:{isRequired:!0}}}}})],jo.prototype,"heightModel",void 0),l([J("web-scene","heightModel")],jo.prototype,"writeHeightModel",null),l([W(["web-scene","service"],"heightModel")],jo.prototype,"readHeightModel",null),l([d({type:x_.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:x_.jsonValues,write:{writer:x_.write,isRequired:!0}}}}})],jo.prototype,"heightUnit",void 0),l([W("web-scene","heightUnit")],jo.prototype,"readHeightUnit",null),l([W("service","heightUnit")],jo.prototype,"readHeightUnitService",null),l([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],jo.prototype,"vertCRS",void 0),l([W("service","vertCRS",["vertCRS","ellipsoid","geoid"])],jo.prototype,"readVertCRS",null),jo=Lw=l([x("esri.geometry.HeightModelInfo")],jo);const ES=jo;let MM=class extends T_{constructor(t){super(t),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(q.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};MM=l([x("esri.support.AnalysesCollection")],MM);let k3;async function nEe(){return k3==null&&(k3=L(()=>import("./WhereClauseCache-Bt6mJBRp.js"),__vite__mapDeps([10,11])).then(e=>new e.WhereClauseCache(500,500))),k3}async function ire(e,t){const i=await nEe(),r=i.get(e,t);if(r==null)throw i.getError(e,t);return r}function oEe(e,t){return e||(e=null),t||(t=null),e==="1=1"?t??e:t==="1=1"?e??t:e&&t?`(${e}) AND (${t})`:e??t}function aEe(e,t){return e||(e=null),t||(t=null),e==="1=1"||t==="1=1"||e===t?e==="1=1"?e:t:e&&t?`(${e}) OR (${t})`:e??t}function DZe(e,t){return t.length===0?null:`${e} IN (${lEe(t)})`}function lEe(e){return e.map(t=>typeof t=="string"?uEe(t):t).join(",")}function uEe(e){return`'${e.replaceAll("'","''")}'`}function I9(e){return typeof e=="number"}function jZe(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function VZe(e){return typeof e=="boolean"}function MS(e){return typeof e=="string"||e instanceof String}function cEe(e){return e==null||MS(e)}function zZe(e){return Array.isArray(e)}function dEe(e){return(e==null?void 0:e.declaredClass)==="esri.Graphic"}function UZe(e){return e instanceof Date}const hEe="HH:mm",pEe="HH:mm:ss",fEe="HH:mm:ss.SSS",mEe=[fEe,pEe,hEe,"TT"],yEe="yyyy-MM-dd";function C9(e){if(!e||!MS(e))return null;const t=ue.fromFormat(e,yEe);return t.isValid?t:null}function O9(e){return e&&MS(e)?Aye(mEe,t=>{const i=ue.fromFormat(e,t);return i.isValid?i:null})??null:null}function R9(e){if(!e||!MS(e))return null;const t=ue.fromISO(e);return t.isValid?t:null}var AM;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(AM||(AM={}));const rre=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function gEe(e){return e!=null&&rre.has(e.type)}function sre(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function nre(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function ore(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const vEe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);B5(rre,vEe);function qZe(e,t){const i=e==null?void 0:e.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,s="range"in i?i.range[1]:i.maxValue,n=gEe(e);return sre(e)||ore(e)||nre(e)?{...wEe(e,s,r),isInteger:n}:{min:r!=null&&typeof r=="number"?r:null,max:s!=null&&typeof s=="number"?s:null,rawMin:r,rawMax:s,isInteger:n}}function wEe(e,t,i){var r,s,n,o,a,u;return sre(e)?{min:(r=C9(i))==null?void 0:r.toMillis(),max:(s=C9(t))==null?void 0:s.toMillis(),rawMin:i,rawMax:t}:ore(e)?{min:(n=O9(i))==null?void 0:n.toMillis(),max:(o=O9(t))==null?void 0:o.toMillis(),rawMin:i,rawMax:t}:nre(e)?{min:(a=R9(i))==null?void 0:a.toMillis(),max:(u=R9(t))==null?void 0:u.toMillis(),rawMin:i,rawMax:t}:{max:null,min:null}}function bEe(e){if(!e)return;const t=e.match(_Ee);return t!=null&&t.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}const _Ee=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function SEe(e){var t,i;return((i=(t=e.match(TEe))==null?void 0:t[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const TEe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let ua=class{};function xEe(e){return e instanceof um?e===ua.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function BZe(e){return xEe(e)?ua.instance:e}ua.instance=new Zs("Etc/UTC");var IM;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(IM||(IM={}));const $Ee={[IM.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let EEe=class are extends Error{constructor(t,i){super(ga($Ee[t],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,are)}};function Tm(e,t,i){return e<t?e-t:e>i?e-i:0}function xm(e,t,i){return e<t?t:e>i?i:e}let tf=class gi{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,i=1,r=1,s=0,n=0,o=0,a=0,u){if(isNaN(t)||isNaN(i)||isNaN(r)||isNaN(s)||isNaN(n)||isNaN(o)||isNaN(a))return null;const c=ue.local(t,i).daysInMonth;let h=ue.fromObject({day:xm(r,1,c),year:t,month:xm(i,1,12),hour:xm(s,0,23),minute:xm(n,0,59),second:xm(o,0,59),millisecond:xm(a,0,999)},{zone:Ka(u)});return h=h.plus({months:Tm(i,1,12),days:Tm(r,1,c),hours:Tm(s,0,23),minutes:Tm(n,0,59),seconds:Tm(o,0,59),milliseconds:Tm(a,0,999)}),new gi(h)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,i){const r=Ka(i);return t.isUnknownTimeZone||r===ua.instance?gi.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,r):new gi(t._date.setZone(r))}static dateJSToArcadeDate(t){return new gi(ue.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,i="system"){const r=Ka(i);return new gi(ue.fromJSDate(t,{zone:r}))}static unknownEpochToArcadeDate(t){return new gi(ue.fromMillis(t,{zone:ua.instance}))}static unknownDateJSToArcadeDate(t){return new gi(ue.fromMillis(t.getTime(),{zone:ua.instance}))}static epochToArcadeDate(t,i="system"){const r=Ka(i);return new gi(ue.fromMillis(t,{zone:r}))}static dateTimeToArcadeDate(t){return new gi(t)}clone(){return new gi(this._date)}changeTimeZone(t){const i=Ka(t);return gi.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(t,i){const r=Ka(i);return t.zone===ua.instance||r===ua.instance?gi.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,r):new gi(t.setZone(r))}static nowToArcadeDate(t){const i=Ka(t);return new gi(ue.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new gi(ue.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===gi.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===ua.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new gi(this._date.plus(t))}diff(t,i="milliseconds"){return this._date.diff(t._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,i){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(t,i){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new gi(this._date.toUTC())}toLocal(){return new gi(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const i=ue.fromISO(t,{setZone:!0});return new gi(i)}};function Ka(e,t=!0){if(e instanceof um)return e;if(e.toLowerCase()==="system")return"system";if(e.toLowerCase()==="utc")return"UTC";if(e.toLowerCase()==="unknown")return ua.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const r=Oi.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(r)return r}const i=Zs.create(e);if(!i.isValid){if(t)throw new EEe(IM.TimeZoneNotRecognized);return null}return i}const MEe=()=>q.getLogger("esri.support.arcadeOnDemand"),AEe=["geometry","scale","timeProperties"];function HZe(e,t){if(t!=null)for(const i of AEe)t.hasArcadeDependency(i)&&e.add(i);return e}let P3;function On(){return P3||(P3=(async()=>{const e=await L(()=>import("./arcadeUtils-CN3rYIOT.js"),__vite__mapDeps([144,145,146,147,19,9,11]));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),P3}const WZe=(e,t,i)=>lre.create(e,t,i,null,["$feature","$view"],[]),IEe=(e,t,i,r)=>lre.create(e,t,i,r,["$feature","$view"],[]);let lre=class ure{constructor(t,i,r,s,n,o,a){this._dependencies=new Map,this.services=null,this.script=t,this.evaluate=s;const u=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=u??[],this._syntaxTree=r,this._arcade=i,this._arcadeFeature=n,this._spatialReference=a,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}static async create(t,i,r,s,n,o){const{arcade:a,Feature:u,Dictionary:c}=await On(),h=i instanceof we?i:we.fromJSON(i);let p;try{p=a.parseScript(t,o)}catch(O){return MEe().error(new M("arcade-bad-expression","Failed to parse arcade script",{script:t,error:O})),null}const m=n.reduce((O,U)=>({...O,[U]:null}),{});let y=null;s!=null&&(y=new c(s),y.immutable=!0,m.$config=null);const g=a.scriptUsesGeometryEngine(p),v=g&&a.enableGeometrySupport(),b=a.scriptUsesFeatureSet(p)&&a.enableFeatureSetSupport(),w=a.scriptIsAsync(p),_=w&&a.enableAsyncSupport(),S={vars:m,spatialReference:h,useAsync:!!_};await Promise.all([v,b,_]);const T=new Set;await a.loadDependentModules(T,p,null,w,g);const E=new c;E.immutable=!1,E.setField("scale",0);const A=a.compileScript(p,S),C=(O,U)=>{var H;const V=(H=O.$view)==null?void 0:H.timeZone;if("$view"in O&&O.$view){let te;if(E.setField("scale",typeof O.$view=="object"&&"scale"in O.$view?O.$view.scale:void 0),typeof O.$view=="object"&&"timeProperties"in O.$view&&O.$view.timeProperties!=null){const{currentStart:ye,currentEnd:ce}=O.$view.timeProperties;te=new c({currentStart:ye!=null?V!=null?tf.epochToArcadeDate(ye,V):tf.unknownEpochToArcadeDate(ye):void 0,currentEnd:ce!=null?V!=null?tf.epochToArcadeDate(ce,V):tf.unknownEpochToArcadeDate(ce):void 0,startIncluded:!0,endIncluded:!0})}E.setField("timeProperties",te),O.$view=E}return y&&(O.$config=y),A({vars:O,spatialReference:h,services:U,timeZone:V})};return new ure(t,a,p,C,new u,r,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}references(t){return this._dependencies.get(t)??!1}};const CEe=/^([0-9_])/,OEe=/[^a-z0-9_\u0080-\uffff]+/gi;function REe(e){return e==null?null:e.trim().replaceAll(OEe,"_").replace(CEe,"F$1")||null}const FEe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],NEe=["field","normalizationField"];function F9(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(N9(FEe,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)N9(NEe,r,t)}}function N9(e,t,i){if(e)for(const r of e){const s=aS(r,t),n=s&&typeof s!="function"&&i.get(s);n&&Lt(r,n.name,t)}}function cre(e,t){var i;if(e!=null&&((i=t==null?void 0:t.fields)!=null&&i.length))if("startField"in e){const r=t.get(e.startField),s=t.get(e.endField);e.startField=(r==null?void 0:r.name)??null,e.endField=(s==null?void 0:s.name)??null}else{const r=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=(r==null?void 0:r.name)??null,e.endTimeField=(s==null?void 0:s.name)??null}}const D3=new Set;function pI(e,t){return e&&t?(D3.clear(),Zf(D3,e,t),Array.from(D3).sort()):[]}function Zf(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of i)ps(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const s of i)s!=null&&e.add(s)}}function ps(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function ZZe(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(i=>i.name):t}function JZe(e,t,i=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const r=pI(e,t);return r.length/e.fields.length>=i?["*"]:r}async function Wr(e,t,i){var n;if(!i)return;let r;const s=bEe(i);if(s)r=[s];else{const{arcadeUtils:o}=await On();r=o.extractFieldNames(i,(n=t==null?void 0:t.fields)==null?void 0:n.map(a=>a.name))}for(const o of r)ps(e,t,o)}async function K4(e,t,i){if(i&&i!=="1=1"){const r=await ire(i,t);if(!r.isStandardized)throw new M("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Zf(e,t,r.fieldNames)}}function LEe({displayField:e,fields:t}){return e||(t!=null&&t.length?j3(t,"name-or-title")||j3(t,"unique-identifier")||j3(t,"type-or-category")||kEe(t):null)}function kEe(e){for(const t of e){if(!(t!=null&&t.name))continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function j3(e,t){for(const i of e)if(i!=null&&i.valueType&&i.valueType===t)return i.name;return null}async function YZe(e,t){var r;if(!t)return;const i=(r=t.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function PEe(e,t,i){i.onStatisticExpression?Wr(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function QZe(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(dre(e,t,s)),i.fields&&r.push(...i.fields.map(async n=>PEe(e,t.fieldsIndex,n))),await Promise.all(r)}async function XZe(e,t){var n,o,a;const{fieldsIndex:i,trackInfo:r}=t;if(!t||!r||!i)return;const s=[(n=r.latestObservations.renderer)==null?void 0:n.collectRequiredFields(e,i),(o=r.previousObservations.renderer)==null?void 0:o.collectRequiredFields(e,i),(a=r.trackLines.renderer)==null?void 0:a.collectRequiredFields(e,i)];r.popupTemplate&&s.push(dre(e,t,r.popupTemplate));for(const u of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(u)for(const c of u)s.push(fre(e,i,c));await Promise.all(s)}async function dre(e,t,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(n=>Wr(e,t.fieldsIndex,n.expression)));const s=i==null?void 0:i.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&r.push(Wr(e,t.fieldsIndex,n.expressionInfo.expression));await Promise.all(r)}async function KZe(e,t,i){t&&(t.timeInfo&&(i!=null&&i.timeExtent)&&Zf(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Zf(e,t.fieldsIndex,[t.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await K4(e,t.fieldsIndex,i.where))}async function eJe(e,t,i){t&&i&&await Promise.all(i.map(r=>DEe(e,t,r)))}async function DEe(e,t,i){t&&i&&(i.valueExpression?await Wr(e,t.fieldsIndex,i.valueExpression):i.field&&ps(e,t.fieldsIndex,i.field))}function tJe(e){return e?pI(e.fieldsIndex,hre(e)):[]}function jEe(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?pI(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function iJe(e,t,i){if(!t||!i)return;const r=t.fieldsIndex;await Promise.all(i.filters.map(s=>K4(e,r,s.where)))}const VEe=new Set(["oid","global-id","guid"]),zEe=new Set(["oid","global-id"]),UEe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function qEe(e){const t=new Set;pre(e).forEach(r=>t.add(r)),jEe(e).forEach(r=>t.add(r.toLowerCase()));const i=e&&"infoFor3D"in e?e.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>t.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>t.add(r.toLowerCase()))),Array.from(t)}function hre(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:i,creatorField:r,editDateField:s,editorField:n}=t;return[i,r,s,n].filter(Boolean)}function pre(e){return hre(e).map(t=>t.toLowerCase())}function GEe(e,t){var i;return e.editable&&!VEe.has(e.type)&&!pre(t).includes(((i=e.name)==null?void 0:i.toLowerCase())??"")}function BEe(e,t){var r;const i=((r=e.name)==null?void 0:r.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&i===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&i===t.globalIdField.toLowerCase()||qEe(t).includes(i)||zEe.has(e.type)||UEe.some(s=>s.test(i)))}async function rJe(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i!=null&&i.length&&await Promise.all(i.map(s=>fre(e,r,s)))}async function fre(e,t,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await Wr(e,t,r.expression);else{const n=r.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{ps(e,t,o.slice(1,-1))})}await K4(e,t,s)}function HEe(e){const t=e.defaultValue;return t!==void 0&&yre(e,t)?t:e.nullable?null:void 0}function sJe(e){const t=typeof e=="string"?{type:e}:e;return ej(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function mre(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function WEe(e){return e===null||mre(e)}function ZEe(e){return e===null||Number.isInteger(e)}function JEe(){return!0}function yre(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=e.nullable?ZEe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?WEe:mre;break;case"string":case"esriFieldTypeString":i=e.nullable?cEe:MS;break;default:i=JEe}return arguments.length===1?i:i(t)}const YEe=["integer","small-integer","big-integer"],QEe=["single","double"],XEe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],KEe=["esriFieldTypeSingle","esriFieldTypeDouble"],gre=new Set([...YEe,...XEe]),eMe=new Set([...QEe,...KEe]),tMe=B5(gre,eMe);function iMe(e){return e!=null&&gre.has(e.type)}function AS(e){return e!=null&&tMe.has(e.type)}function ej(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function fI(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function vre(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function wre(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function zs(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function L9(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function k9(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function nJe(e,t){return rMe(e,t)===null}var CM,OM;function oJe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function rMe(e,t){return e==null||e.nullable&&t===null?null:yre(e,t)?AS(e)&&!sMe(e.type,Number(t))?CM.OUT_OF_RANGE:null:OM.INVALID_TYPE}function sMe(e,t){const i=typeof e=="string"?bre(e):e;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?Number.isInteger(t)&&t>=r&&t<=s:t>=r&&t<=s}function bre(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return nMe;case"esriFieldTypeInteger":case"integer":return oMe;case"esriFieldTypeBigInteger":case"big-integer":return aMe;case"esriFieldTypeSingle":case"single":return lMe;case"esriFieldTypeDouble":case"double":return uMe}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(CM||(CM={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(OM||(OM={}));const nMe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},oMe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},aMe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},lMe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},uMe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function aJe(e,t,i){switch(e){case AM.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case AM.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case OM.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case CM.OUT_OF_RANGE:{const{min:r,max:s}=bre(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${s}`}}}function _re(e,t){return!cMe(e,t,null)}function cMe(e,t,i){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!r.has(n)&&(s=!0,i==null))break;return s}function CN(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function tj(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let Hx=class extends P{constructor(t){super(t),this.type=null}};l([d({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],Hx.prototype,"type",void 0),Hx=l([x("esri.popup.content.Content")],Hx);const lc=Hx,h2=new be({asc:"ascending",desc:"descending"});let kw=class extends _e.ClonableMixin(P){constructor(t){super(t),this.field=null,this.order="ascending"}};l([d({type:String,json:{write:!0}})],kw.prototype,"field",void 0),l([d({type:h2.apiValues,json:{type:h2.jsonValues,read:h2.read,write:h2.write}})],kw.prototype,"order",void 0),kw=l([x("esri.popup.support.AttachmentsOrderByInfo")],kw);const Sre=kw;let kc=class extends _e.ClonableMixin(lc){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};l([d({type:String,json:{write:!0}})],kc.prototype,"description",void 0),l([d({type:["auto","preview","list"],json:{write:!0}})],kc.prototype,"displayType",void 0),l([d({type:[Sre],json:{write:!0}})],kc.prototype,"orderByFields",void 0),l([d({type:String,json:{write:!0}})],kc.prototype,"title",void 0),l([d({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],kc.prototype,"type",void 0),kc=l([x("esri.popup.content.AttachmentsContent")],kc);const Nv=kc;var ON;let rp=ON=class extends lc{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new ON({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?R(this.outFields):null})}};l([d()],rp.prototype,"creator",void 0),l([d()],rp.prototype,"destroyer",void 0),l([d()],rp.prototype,"outFields",void 0),l([d({type:["custom"],readOnly:!0})],rp.prototype,"type",void 0),rp=ON=l([x("esri.popup.content.CustomContent")],rp);const dMe=rp;var RN;let Wm=RN=class extends P{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new RN({title:this.title,expression:this.expression})}};l([d({type:String,json:{write:!0}})],Wm.prototype,"title",void 0),l([d({type:String,json:{write:!0}})],Wm.prototype,"expression",void 0),l([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Wm.prototype,"returnType",void 0),Wm=RN=l([x("esri.popup.ElementExpressionInfo")],Wm);const Tre=Wm;var FN;let Pw=FN=class extends lc{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new FN({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};l([d({type:Tre,json:{write:!0}})],Pw.prototype,"expressionInfo",void 0),l([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Pw.prototype,"type",void 0),Pw=FN=l([x("esri.popup.content.ExpressionContent")],Pw);const mI=Pw;let Zm=class extends _e.ClonableMixin(P){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};l([ee(K1e)],Zm.prototype,"dateFormat",void 0),l([d({type:Boolean,json:{write:!0}})],Zm.prototype,"digitSeparator",void 0),l([d({type:Le,json:{write:!0}})],Zm.prototype,"places",void 0),Zm=l([x("esri.popup.support.FieldInfoFormat")],Zm);const Wx=Zm;var NN;let Vo=NN=class extends P{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new NN({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};l([d({type:String,json:{write:!0}})],Vo.prototype,"fieldName",void 0),l([d({type:Wx,json:{write:!0}})],Vo.prototype,"format",void 0),l([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Vo.prototype,"isEditable",void 0),l([d({type:String,json:{write:!0}})],Vo.prototype,"label",void 0),l([ee(new be({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Vo.prototype,"stringFieldOption",void 0),l([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Vo.prototype,"statisticType",void 0),l([d({type:String,json:{write:!0}})],Vo.prototype,"tooltip",void 0),l([d({type:Boolean,json:{write:!0}})],Vo.prototype,"visible",void 0),Vo=NN=l([x("esri.popup.FieldInfo")],Vo);const IS=Vo;var LN;let Hl=LN=class extends lc{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new LN(R({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};l([d({type:Object,json:{write:!0}})],Hl.prototype,"attributes",void 0),l([d({type:String,json:{write:!0}})],Hl.prototype,"description",void 0),l([d({type:[IS]})],Hl.prototype,"fieldInfos",void 0),l([J("fieldInfos")],Hl.prototype,"writeFieldInfos",null),l([d({type:String,json:{write:!0}})],Hl.prototype,"title",void 0),l([d({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Hl.prototype,"type",void 0),Hl=LN=l([x("esri.popup.content.FieldsContent")],Hl);const Jf=Hl;let sp=class extends P{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};l([d({type:String,json:{write:!0}})],sp.prototype,"altText",void 0),l([d({type:String,json:{write:!0}})],sp.prototype,"caption",void 0),l([d({type:String,json:{write:!0}})],sp.prototype,"title",void 0),l([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],sp.prototype,"type",void 0),sp=l([x("esri.popup.content.mixins.MediaInfo")],sp);const ij=sp;var kN;let np=kN=class extends se{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new kN({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};l([d()],np.prototype,"color",void 0),l([d()],np.prototype,"fieldName",void 0),l([d()],np.prototype,"tooltip",void 0),l([d()],np.prototype,"value",void 0),np=kN=l([x("esri.popup.content.support.ChartMediaInfoValueSeries")],np);const xre=np;var PN;let Pc=PN=class extends P{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new PN({colors:R(this.colors),fields:R(this.fields),normalizeField:this.normalizeField,series:R(this.series),tooltipField:this.tooltipField})}};l([d({type:[K],json:{type:[[Le]],write:!0}})],Pc.prototype,"colors",void 0),l([d({type:[String],json:{write:{isRequired:!0}}})],Pc.prototype,"fields",void 0),l([d({type:String,json:{write:!0}})],Pc.prototype,"normalizeField",void 0),l([d({type:[xre],json:{read:!1}})],Pc.prototype,"series",void 0),l([d({type:String,json:{write:!0}})],Pc.prototype,"tooltipField",void 0),Pc=PN=l([x("esri.popup.content.support.ChartMediaInfoValue")],Pc);const hMe=Pc;let Dw=class extends ij{constructor(t){super(t),this.type=null,this.value=void 0}};l([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Dw.prototype,"type",void 0),l([d({type:hMe,json:{write:{isRequired:!0}}})],Dw.prototype,"value",void 0),Dw=l([x("esri.popup.content.mixins.ChartMediaInfo")],Dw);const yI=Dw,gI=Si()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var DN;let Zx=DN=class extends yI{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new DN({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:gI.write,isRequired:!0}}})],Zx.prototype,"type",void 0),Zx=DN=l([x("esri.popup.content.BarChartMediaInfo")],Zx);const $re=Zx;var jN;let Jx=jN=class extends yI{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new jN({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:gI.write,isRequired:!0}}})],Jx.prototype,"type",void 0),Jx=jN=l([x("esri.popup.content.ColumnChartMediaInfo")],Jx);const Ere=Jx;var VN;let jw=VN=class extends P{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new VN({linkURL:this.linkURL,sourceURL:this.sourceURL})}};l([d({type:String,json:{write:!0}})],jw.prototype,"linkURL",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],jw.prototype,"sourceURL",void 0),jw=VN=l([x("esri.popup.content.support.ImageMediaInfoValue")],jw);const pMe=jw;var zN;let Jm=zN=class extends ij{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new zN({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};l([d({type:Number,json:{write:!0}})],Jm.prototype,"refreshInterval",void 0),l([d({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Jm.prototype,"type",void 0),l([d({type:pMe,json:{write:{isRequired:!0}}})],Jm.prototype,"value",void 0),Jm=zN=l([x("esri.popup.content.ImageMediaInfo")],Jm);const Mre=Jm;var UN;let Yx=UN=class extends yI{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new UN({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:gI.write,isRequired:!0}}})],Yx.prototype,"type",void 0),Yx=UN=l([x("esri.popup.content.LineChartMediaInfo")],Yx);const Are=Yx;var qN;let Qx=qN=class extends yI{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new qN({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};l([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:gI.write,isRequired:!0}}})],Qx.prototype,"type",void 0),Qx=qN=l([x("esri.popup.content.PieChartMediaInfo")],Qx);const Ire=Qx,GN={base:ij,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":$re,"column-chart":Ere,"line-chart":Are,"pie-chart":Ire,image:Mre}};var BN;let zo=BN=class extends lc{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?Mre.fromJSON(t):t.type==="barchart"?$re.fromJSON(t):t.type==="columnchart"?Ere.fromJSON(t):t.type==="linechart"?Are.fromJSON(t):t.type==="piechart"?Ire.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new BN(R({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};l([d()],zo.prototype,"activeMediaInfoIndex",void 0),l([d({type:Object,json:{write:!0}})],zo.prototype,"attributes",void 0),l([d({type:String,json:{write:!0}})],zo.prototype,"description",void 0),l([d({types:[GN]})],zo.prototype,"mediaInfos",void 0),l([W("mediaInfos")],zo.prototype,"readMediaInfos",null),l([J("mediaInfos")],zo.prototype,"writeMediaInfos",null),l([d({type:String,json:{write:!0}})],zo.prototype,"title",void 0),l([d({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],zo.prototype,"type",void 0),zo=BN=l([x("esri.popup.content.MediaContent")],zo);const Lv=zo;var HN;let Vw=HN=class extends P{constructor(e){super(e),this.field=null,this.order=null}clone(){return new HN({field:this.field,order:this.order})}};l([d({type:String,json:{write:!0}})],Vw.prototype,"field",void 0),l([d({type:["asc","desc"],json:{write:!0}})],Vw.prototype,"order",void 0),Vw=HN=l([x("esri.popup.support.RelatedRecordsInfoFieldOrder")],Vw);const rj=Vw;let Ra=class extends _e.ClonableMixin(lc){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};l([d({type:String,json:{write:!0}})],Ra.prototype,"description",void 0),l([d({type:Number,json:{type:Le,write:!0}})],Ra.prototype,"displayCount",void 0),l([d({type:["list"],json:{write:{isRequired:!0}}})],Ra.prototype,"displayType",void 0),l([d({type:[rj],json:{write:!0}})],Ra.prototype,"orderByFields",void 0),l([d({type:Number,json:{type:Le,write:{isRequired:!0}}})],Ra.prototype,"relationshipId",void 0),l([d({type:String,json:{write:!0}})],Ra.prototype,"title",void 0),l([d({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ra.prototype,"type",void 0),Ra=l([x("esri.popup.content.RelationshipContent")],Ra);const w1=Ra;var WN;let zw=WN=class extends lc{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new WN({text:this.text})}};l([d({type:String,json:{write:!0}})],zw.prototype,"text",void 0),l([d({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],zw.prototype,"type",void 0),zw=WN=l([x("esri.popup.content.TextContent")],zw);const Yf=zw;let Wl=class extends _e.ClonableMixin(P){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};l([d({type:String,json:{write:!0}})],Wl.prototype,"title",void 0),l([d({type:String,json:{write:!0}})],Wl.prototype,"description",void 0),l([d({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Wl.prototype,"type",void 0),l([d({type:Number,json:{type:Le,write:!0}})],Wl.prototype,"associatedNetworkSourceId",void 0),l([d({type:Number,json:{type:Le,write:!0}})],Wl.prototype,"associatedAssetGroup",void 0),l([d({type:Number,json:{type:Le,write:!0}})],Wl.prototype,"associatedAssetType",void 0),Wl=l([x("esri.popup.support.UtilityNetworkAssociationType")],Wl);const Cre=Wl;let Dc=class extends _e.ClonableMixin(lc){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};l([d({type:String,json:{write:!0}})],Dc.prototype,"description",void 0),l([d({type:Number,json:{type:Le,write:!0}})],Dc.prototype,"displayCount",void 0),l([d({type:String,json:{write:!0}})],Dc.prototype,"title",void 0),l([d({type:[Cre],json:{write:!0}})],Dc.prototype,"associationTypes",void 0),l([ee({utilityNetworkAssociations:"utility-network-associations"})],Dc.prototype,"type",void 0),Dc=l([x("esri.popup.content.UtilityNetworkAssociationsContent")],Dc);const sj=Dc,fMe={base:null,key:"type",typeMap:{attachment:Nv,media:Lv,text:Yf,expression:mI,field:Jf,relationship:w1,utilityNetworkAssociations:sj}},mMe={base:null,key:"type",typeMap:{attachment:Nv,media:Lv,text:Yf,expression:mI,field:Jf,relationship:w1}};var ZN;let op=ZN=class extends P{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new ZN({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([d({type:String,json:{write:!0}})],op.prototype,"name",void 0),l([d({type:String,json:{write:!0}})],op.prototype,"title",void 0),l([d({type:String,json:{write:!0}})],op.prototype,"expression",void 0),l([d({type:["string","number"],json:{write:!0}})],op.prototype,"returnType",void 0),op=ZN=l([x("esri.popup.ExpressionInfo")],op);const Ore=op;var JN;let Uw=JN=class extends P{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new JN({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};l([d({type:Boolean,json:{write:!0}})],Uw.prototype,"returnTopmostRaster",void 0),l([d({type:Boolean,json:{write:!0}})],Uw.prototype,"showNoDataRecords",void 0),Uw=JN=l([x("esri.popup.LayerOptions")],Uw);const yMe=Uw;var YN;let qw=YN=class extends P{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new YN({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?R(this.orderByFields):null})}};l([d({type:Boolean,json:{write:!0}})],qw.prototype,"showRelatedRecords",void 0),l([d({type:[rj],json:{write:!0}})],qw.prototype,"orderByFields",void 0),qw=YN=l([x("esri.popup.RelatedRecordsInfo")],qw);const P9=qw;var QN;let Vn=QN=class extends ac.IdentifiableMixin(se){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new QN({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};l([d()],Vn.prototype,"active",void 0),l([d()],Vn.prototype,"className",void 0),l([d()],Vn.prototype,"disabled",void 0),l([d()],Vn.prototype,"icon",void 0),l([d()],Vn.prototype,"id",void 0),l([d()],Vn.prototype,"indicator",void 0),l([d()],Vn.prototype,"title",void 0),l([d()],Vn.prototype,"type",void 0),l([d()],Vn.prototype,"visible",void 0),Vn=QN=l([x("esri.support.actions.ActionBase")],Vn);const vI=Vn;var XN;let Xx=XN=class extends vI{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new XN({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};l([d()],Xx.prototype,"image",void 0),Xx=XN=l([x("esri.support.actions.ActionButton")],Xx);const m0=Xx;var KN;let Gw=KN=class extends vI{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new KN({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};l([d()],Gw.prototype,"image",void 0),l([d()],Gw.prototype,"value",void 0),Gw=KN=l([x("esri.support.actions.ActionToggle")],Gw);const nj=Gw,ew="relationships/",D9="expression/",gMe=Q.ofType({key:"type",defaultKeyValue:"button",base:vI,typeMap:{button:m0,toggle:nj}}),vMe={base:lc,key:"type",typeMap:{media:Lv,custom:dMe,text:Yf,attachments:Nv,fields:Jf,expression:mI,relationship:w1,utilityNetworkAssociations:sj}},Rre=new Set(["attachments","fields","media","text","expression","relationship"]),wMe=new Set([...Rre,"utility-network-associations"]);let xi=class extends _e.ClonableMixin(P){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(i=>va(vMe,i)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||xl(t)?t:(q.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(t,i,r,s){this._writePopupTemplateContent(t,i,s)}writeWebMapContent(t,i,r,s){this._writePopupTemplateContent(t,i,s)}writeFieldInfos(t,i,r,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(t){const a=o?o.filter(c=>c.type==="fields"):[],u=a.length&&a.every(c=>{var h;return(h=c.fieldInfos)==null?void 0:h.length});i.fieldInfos=t.filter(Boolean).map(c=>{const h=c.toJSON(s);return u&&(h.visible=!1),h})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(t,i,r,s){i[r]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(s)}writeTitle(t,i){i.title=t||""}async collectRequiredFields(t,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(t,i,[...r,...this._getContentExpressionInfos(this.content,r)]),Zf(t,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const i=new Set;return await this.collectRequiredFields(i,t),[...i].sort()}_writePopupTemplateContent(t,i,r){typeof t!="string"?Array.isArray(t)&&(i.popupElements=t.filter(s=>(r==null?void 0:r.origin)==="web-scene"?Rre.has(s.type):wMe.has(s.type)).map(s=>s==null?void 0:s.toJSON(r)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=t}_writeFieldsContent(t,i){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const r=R(t.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(s=>{const n=i.fieldInfos.find(o=>{var a,u;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((u=s.fieldName)==null?void 0:u.toLowerCase())});n?n.visible=!0:i.fieldInfos.push(s)}):i.fieldInfos=r}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,i){var n,o;const r=((n=t.orderByFields)==null?void 0:n.map(a=>this._toFieldOrderJSON(a,t.relationshipId)))||[],s=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(t,i){!i.description&&t.text&&(i.description=t.text)}_writeMediaContent(t,i){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const r=R(t.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(t,i,r){const s={description:!1,mediaInfos:!1};return r.map(n=>n.type==="media"?(n.mediaInfos||!i||s.mediaInfos||(n.mediaInfos=i,s.mediaInfos=!0),Lv.fromJSON(n)):n.type==="text"?(n.text||!t||s.description||(n.text=t,s.description=!0),Yf.fromJSON(n)):n.type==="attachments"?Nv.fromJSON(n):n.type==="fields"?Jf.fromJSON(n):n.type==="expression"?mI.fromJSON(n):n.type==="relationship"?w1.fromJSON(n):n.type==="utilityNetworkAssociations"?sj.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:i,order:r}=t;if(!(i!=null&&i.startsWith(ew)))return null;const s=i.replace(ew,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return!Number.isNaN(n)&&o?w1.fromJSON({relationshipId:n,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(t,i){const{order:r,field:s}=t;return{field:`${ew}${i}/${s}`,order:r}}_readPopupInfo({description:t,mediaInfos:i,showAttachments:r,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];t?n.push(new Yf({text:t})):n.push(new Jf),Array.isArray(i)&&i.length&&n.push(Lv.fromJSON({mediaInfos:i})),r&&n.push(Nv.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=s;return o&&(a!=null&&a.length)&&a.forEach(u=>{const c=this._toRelationshipContent(u);c&&n.push(c)}),n.length?n:t}_getContentElementFields(t){const i=t==null?void 0:t.type;if(i==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(i==="custom")return t.outFields||[];if(i==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(i==="media"){const r=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...r.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return i==="text"?this._extractFieldNames(t.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:i,title:r,value:s}=t,n=s||{},{fields:o,normalizeField:a,tooltipField:u,sourceURL:c,linkURL:h}=n,p=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(c),...this._extractFieldNames(h),...o??[]];return a&&p.push(a),u&&p.push(u),p}_getContentExpressionInfos(t,i){return Array.isArray(t)?t.reduce((r,s)=>[...r,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],i):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(t,i,r){r&&await Promise.all(r.map(s=>Wr(t,i,s.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(ew)||i.startsWith(D9))).map(i=>i.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(t){const{className:i,title:r,type:s}=t,n=s==="button"||s==="toggle"?t.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(n)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return tj(t).filter(i=>!(i.indexOf(ew)===0||i.indexOf(D9)===0))}};l([d({type:gMe})],xi.prototype,"actions",void 0),l([d()],xi.prototype,"content",void 0),l([ke("content")],xi.prototype,"castContent",null),l([W("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],xi.prototype,"readContent",null),l([J("web-scene","content",{popupElements:{type:Q.ofType(mMe)},showAttachments:{type:Boolean},mediaInfos:{type:Q.ofType(GN)},description:{type:String},relatedRecordsInfo:{type:P9}})],xi.prototype,"writeWebSceneContent",null),l([J("content",{popupElements:{type:Q.ofType(fMe)},showAttachments:{type:Boolean},mediaInfos:{type:Q.ofType(GN)},description:{type:String},relatedRecordsInfo:{type:P9}})],xi.prototype,"writeWebMapContent",null),l([d({type:[Ore],json:{write:!0}})],xi.prototype,"expressionInfos",void 0),l([d({type:[IS]})],xi.prototype,"fieldInfos",void 0),l([J("fieldInfos")],xi.prototype,"writeFieldInfos",null),l([d({type:yMe})],xi.prototype,"layerOptions",void 0),l([J("layerOptions")],xi.prototype,"writeLayerOptions",null),l([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],xi.prototype,"lastEditInfoEnabled",void 0),l([d()],xi.prototype,"outFields",void 0),l([d()],xi.prototype,"overwriteActions",void 0),l([d()],xi.prototype,"returnGeometry",void 0),l([d({json:{type:String}})],xi.prototype,"title",void 0),l([J("title")],xi.prototype,"writeTitle",null),xi=l([x("esri.PopupTemplate")],xi);const y0=xi,j9=new be({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let bMe=0,Ym=class extends P{constructor(t){super(t),this.id="sym"+bMe++,this.type=null,this.color=new K([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};l([d({type:j9.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:j9.write,isRequired:!0}}})],Ym.prototype,"type",void 0),l([d({type:K,json:{write:{allowNull:!0}}})],Ym.prototype,"color",void 0),l([W("color")],Ym.prototype,"readColor",null),Ym=l([x("esri.symbols.Symbol")],Ym);const $r=Ym;var eL;let jc=eL=class extends $r{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const s=r.map(n=>{const o=n.valueExpressionInfo;return o?Wr(e,t,o.expression):null});await Promise.all(s)}}}clone(){return new eL({data:R(this.data)})}hash(){return LQ(JSON.stringify(this.data)).toString()}};l([d({json:{write:!1}})],jc.prototype,"color",void 0),l([d({json:{write:!0}})],jc.prototype,"data",void 0),l([W("data",["symbol"])],jc.prototype,"readData",null),l([J("data",{})],jc.prototype,"writeData",null),l([ee({CIMSymbolReference:"cim"},{readOnly:!0})],jc.prototype,"type",void 0),jc=eL=l([x("esri.symbols.CIMSymbol")],jc);const Ih=jc;let Qm=class extends P{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,i,r){t||(i[r]=t)}};l([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Qm.prototype,"enabled",void 0),l([J("enabled")],Qm.prototype,"writeEnabled",null),l([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Qm.prototype,"type",void 0),Qm=l([x("esri.symbols.Symbol3DLayer")],Qm);const $l=Qm;function _Me(e,t){const i=t.transparency!=null?v1(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new K([r[0]||0,r[1]||0,r[2]||0,i]):null}function SMe(e,t){t.color=e.toJSON().slice(0,3);const i=uI(e.a);i!==0&&(t.transparency=i)}function Ch(e){return{type:K,nonNullable:e==null?void 0:e.nonNullable,json:{type:[Le],default:null,read:{source:["color","transparency"],reader:_Me},write:{target:{color:{type:[Le],isRequired:e==null?void 0:e.colorRequiredOnWrite},transparency:{type:Le}},writer:SMe}}}}const _l={type:Number,cast:Je,json:{write:!0}};let ap=class extends P{constructor(t){super(t),this.color=new K([0,0,0,1]),this.extensionLength=0,this.size=Cn(1)}clone(){}cloneProperties(){return{color:R(this.color),size:this.size,extensionLength:this.extensionLength}}};l([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],ap.prototype,"type",void 0),l([d(Ch({colorRequiredOnWrite:!0}))],ap.prototype,"color",void 0),l([d({..._l,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],ap.prototype,"extensionLength",void 0),l([d(_l)],ap.prototype,"size",void 0),ap=l([x("esri.symbols.edges.Edges3D")],ap);const oj=ap;var tL;let Kx=tL=class extends oj{constructor(e){super(e),this.type="sketch"}clone(){return new tL(this.cloneProperties())}};l([ee({sketch:"sketch"},{readOnly:!0})],Kx.prototype,"type",void 0),Kx=tL=l([x("esri.symbols.edges.SketchEdges3D")],Kx);const TMe=Kx;var iL;let e$=iL=class extends oj{constructor(e){super(e),this.type="solid"}clone(){return new iL(this.cloneProperties())}};l([ee({solid:"solid"},{readOnly:!0})],e$.prototype,"type",void 0),e$=iL=l([x("esri.symbols.edges.SolidEdges3D")],e$);const Fre=e$,Nre={types:{key:"type",base:oj,typeMap:{solid:Fre,sketch:TMe}},json:{write:!0}};var rL;let Vs=rL=class extends P{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?D4(this.emissiveFactor):null};return new rL(e)}};l([d(Ch())],Vs.prototype,"color",void 0),l([d({type:[Number],json:{write:!1}})],Vs.prototype,"emissiveFactor",void 0),Vs=rL=l([x("esri.symbols.support.Symbol3DMaterial")],Vs);var sL;let Vc=sL=class extends $l{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new sL({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};l([ee({Extrude:"extrude"},{readOnly:!0})],Vc.prototype,"type",void 0),l([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Vc.prototype,"size",void 0),l([d({type:Vs,json:{write:!0}})],Vc.prototype,"material",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Vc.prototype,"castShadows",void 0),l([d(Nre)],Vc.prototype,"edges",void 0),Vc=sL=l([x("esri.symbols.ExtrudeSymbol3DLayer")],Vc);const Lre=Vc;let t$=class extends P{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};l([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],t$.prototype,"type",void 0),t$=l([x("esri.symbols.patterns.LinePattern3D")],t$);const kre=t$,xMe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var nL;const $Me=Si()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Bw=nL=class extends kre{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new nL(e)}};l([d({type:["style"],json:{write:{isRequired:!0}}})],Bw.prototype,"type",void 0),l([ee($Me),d({type:xMe,json:{write:{isRequired:!0}}})],Bw.prototype,"style",void 0),Bw=nL=l([x("esri.symbols.patterns.LineStylePattern3D")],Bw);const aj=Bw;let i$=class extends P{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};l([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],i$.prototype,"type",void 0),i$=l([x("esri.symbols.patterns.Pattern3D")],i$);const Pre=i$,EMe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var oL;let Hw=oL=class extends Pre{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new oL({style:this.style})}};l([d({type:["style"],json:{write:{isRequired:!0}}})],Hw.prototype,"type",void 0),l([d({type:EMe,json:{read:!0,write:{isRequired:!0}}})],Hw.prototype,"style",void 0),Hw=oL=l([x("esri.symbols.patterns.StylePattern3D")],Hw);const Dre=Hw,MMe={types:{key:"type",base:Pre,typeMap:{style:Dre}},json:{write:!0}},jre={types:{key:"type",base:kre,typeMap:{style:aj}},json:{write:!0}},$_=new K("white"),AMe=new K([255,255,255,0]);function IMe(e){return e.r===0&&e.g===0&&e.b===0}var aL;let E_=aL=class extends Vs{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?D4(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new aL(e)}};l([ee({multiply:"multiply",replace:"replace",tint:"tint"})],E_.prototype,"colorMixMode",void 0),E_=aL=l([x("esri.symbols.support.Symbol3DFillMaterial")],E_);function CMe(e,t=!1){return e<=AQ?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function TJe(e){return(MQ(e)?e.byteLength/8:e.length)<=AQ?Array.from(e):new Float64Array(e)}function xJe(e,t,i){return Array.isArray(e)?e.slice(t,t+i):e.subarray(t,t+i)}function CS(e=NMe){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function lj(e,t,i,r,s,n,o=CS()){return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function $Je(e,t=CS()){return OMe(e,0,e.length/3,t)}function OMe(e,t,i,r=CS()){return Vre(r,lL),RMe(r,e,t,i),r}function EJe(e,t=CMe(24)){const[i,r,s,n,o,a]=e;return t[0]=i,t[1]=r,t[2]=s,t[3]=i,t[4]=r,t[5]=a,t[6]=i,t[7]=o,t[8]=s,t[9]=i,t[10]=o,t[11]=a,t[12]=n,t[13]=r,t[14]=s,t[15]=n,t[16]=r,t[17]=a,t[18]=n,t[19]=o,t[20]=s,t[21]=n,t[22]=o,t[23]=a,t}function MJe(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new gt(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function AJe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function IJe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function CJe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function RMe(e,t,i=0,r=t.length/3){let s=e[0],n=e[1],o=e[2],a=e[3],u=e[4],c=e[5];for(let h=0;h<r;h++)s=Math.min(s,t[i+3*h]),n=Math.min(n,t[i+3*h+1]),o=Math.min(o,t[i+3*h+2]),a=Math.max(a,t[i+3*h]),u=Math.max(u,t[i+3*h+1]),c=Math.max(c,t[i+3*h+2]);e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=u,e[5]=c}function OJe(e,t,i){const r=t.length;let s=e[0],n=e[1],o=e[2],a=e[3],u=e[4],c=e[5];if(i)for(let h=0;h<r;h++){const p=t[h];s=Math.min(s,p[0]),n=Math.min(n,p[1]),o=Math.min(o,p[2]),a=Math.max(a,p[0]),u=Math.max(u,p[1]),c=Math.max(c,p[2])}else for(let h=0;h<r;h++){const p=t[h];s=Math.min(s,p[0]),n=Math.min(n,p[1]),a=Math.max(a,p[0]),u=Math.max(u,p[1])}e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=u,e[5]=c}function RJe(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function OS(e){return e[0]>=e[3]?0:e[3]-e[0]}function RS(e){return e[1]>=e[4]?0:e[4]-e[1]}function FS(e){return e[2]>=e[5]?0:e[5]-e[2]}function FJe(e){const t=OS(e),i=FS(e),r=RS(e);return Math.sqrt(t*t+i*i+r*r)}function NJe(e,t=[0,0,0]){return t[0]=e[0]+OS(e)/2,t[1]=e[1]+RS(e)/2,t[2]=e[2]+FS(e)/2,t}function LJe(e,t=[0,0,0]){return t[0]=OS(e),t[1]=RS(e),t[2]=FS(e),t}function kJe(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function FMe(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function PJe(e,t){return t==null||FMe(e,t)}function DJe(e,t,i,r,s=e){return s[0]=e[0]+t,s[1]=e[1]+i,s[2]=e[2]+r,s[3]=e[3]+t,s[4]=e[4]+i,s[5]=e[5]+r,s}function jJe(e,t,i=e){const r=e[0]+OS(e)/2,s=e[1]+RS(e)/2,n=e[2]+FS(e)/2;return i[0]=r+(e[0]-r)*t,i[1]=s+(e[1]-s)*t,i[2]=n+(e[2]-n)*t,i[3]=r+(e[3]-r)*t,i[4]=s+(e[4]-s)*t,i[5]=n+(e[5]-n)*t,i}function VJe(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function zJe(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function UJe(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function Vre(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function qJe(e){return e?Vre(e,lL):CS(lL)}function GJe(e,t){return t||(t=ds()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function BJe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function HJe(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e}function V9(e){return e.length===6}function WJe(e){return OS(e)===0&&RS(e)===0&&FS(e)===0}function ZJe(e,t,i){if(e==null||t==null)return e===t;if(!V9(e)||!V9(t))return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const lL=[1/0,1/0,1/0,-1/0,-1/0,-1/0],NMe=[0,0,0,0,0,0];CS();function JJe(e,{isPrimitive:t,width:i,depth:r,height:s}){const n=t?10:1;if(i==null&&s==null&&r==null)return[n*e[0],n*e[1],n*e[2]];const o=p0(i,r,s);let a;for(let u=0;u<3;u++){const c=o[u];if(c!=null){a=c/e[u];break}}for(let u=0;u<3;u++)o[u]==null&&(o[u]=e[u]*a);return o}const LMe=lj(-.5,-.5,-.5,.5,.5,.5),kMe=lj(-.5,-.5,0,.5,.5,1),PMe=lj(-.5,-.5,0,.5,.5,.5);function YJe(e){switch(e){case"sphere":case"cube":case"diamond":return LMe;case"cylinder":case"cone":case"inverted-cone":return kMe;case"tetrahedron":return PMe;default:return}}const uj=["butt","square","round"],DMe=[...uj,"none"],zre=["miter","bevel","round"];var uL;let lp=uL=class extends P{constructor(e){super(e),this.color=new K([0,0,0,1]),this.size=Cn(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new uL(e)}};l([d(Ch({colorRequiredOnWrite:!0}))],lp.prototype,"color",void 0),l([d({..._l,json:{write:{isRequired:!0}}})],lp.prototype,"size",void 0),l([d(jre)],lp.prototype,"pattern",void 0),l([d({type:uj,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],lp.prototype,"patternCap",void 0),lp=uL=l([x("esri.symbols.support.Symbol3DOutline")],lp);var r$;let Zl=r$=class extends $l{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new r$(e)}static fromSimpleFillSymbol(e){var r,s,n;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new aj({style:e.outline.style}):null,i={size:((r=e.outline)==null?void 0:r.width)??0,color:(((s=e.outline)==null?void 0:s.color)??$_).clone(),pattern:t};return t&&((n=e.outline)!=null&&n.cap)&&(i.patternCap=e.outline.cap),new r$({material:new E_({color:(e.color??AMe).clone()}),pattern:e.style&&e.style!=="solid"?new Dre({style:e.style}):null,outline:i})}};l([ee({Fill:"fill"},{readOnly:!0})],Zl.prototype,"type",void 0),l([d({type:E_,json:{write:!0}})],Zl.prototype,"material",void 0),l([d(MMe)],Zl.prototype,"pattern",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Zl.prototype,"castShadows",void 0),l([d({type:lp,json:{write:!0}})],Zl.prototype,"outline",void 0),l([d(Nre)],Zl.prototype,"edges",void 0),Zl=r$=l([x("esri.symbols.FillSymbol3DLayer")],Zl);const dm=Zl;var cL;const jMe=Si()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let up=cL=class extends P{constructor(e){super(e)}readHref(e,t,i){return e?a0(e,i):t.dataURI}writeHref(e,t,i,r){e&&(sc(e)?t.dataURI=e:(t.href=gS(e,r),Tn(t.href)&&(t.href=yo(t.href))))}clone(){return new cL({href:this.href,primitive:this.primitive})}};l([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],up.prototype,"href",void 0),l([W("href")],up.prototype,"readHref",null),l([J("href",{href:{type:String},dataURI:{type:String}})],up.prototype,"writeHref",null),l([ee(jMe)],up.prototype,"primitive",void 0),up=cL=l([x("esri.symbols.support.IconSymbol3DLayerResource")],up);const QJe="circle";var dL;let lg=dL=class extends se{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new dL({x:this.x,y:this.y})}};l([d({type:Number})],lg.prototype,"x",void 0),l([d({type:Number})],lg.prototype,"y",void 0),lg=dL=l([x("esri.symbols.support.Symbol3DAnchorPosition2D")],lg);var hL;let Ww=hL=class extends P{constructor(e){super(e),this.color=new K([0,0,0,1]),this.size=Cn(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new hL(e)}};l([d(Ch({colorRequiredOnWrite:!0}))],Ww.prototype,"color",void 0),l([d({..._l,json:{write:{isRequired:!0}}})],Ww.prototype,"size",void 0),Ww=hL=l([x("esri.symbols.support.Symbol3DIconOutline")],Ww);var Xm;const Ure="esri.symbols.IconSymbol3DLayer";let Uo=Xm=class extends $l{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new Xm({anchor:this.anchor,anchorPosition:R(this.anchorPosition),enabled:this.enabled,material:R(this.material),outline:R(this.outline),resource:R(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||$_,i=z9(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||$_).clone()}:null;return new Xm({size:e.size,angle:e.angle,resource:{primitive:zMe(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||IMe(e.color)?$_:e.color,i=z9(e);return new Xm({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new Xm({resource:{href:XX({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};l([d({type:Vs,json:{write:!0}})],Uo.prototype,"material",void 0),l([d({type:up,json:{write:!0}})],Uo.prototype,"resource",void 0),l([ee({Icon:"icon"},{readOnly:!0})],Uo.prototype,"type",void 0),l([d({..._l,json:{write:{isRequired:!0}}})],Uo.prototype,"size",void 0),l([ee({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Uo.prototype,"anchor",void 0),l([d({type:lg,json:{type:[Number],read:{reader:e=>new lg({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Uo.prototype,"anchorPosition",void 0),l([d({type:Ww,json:{write:!0}})],Uo.prototype,"outline",void 0),l([d({type:Number,json:{write:!0,default:0}})],Uo.prototype,"angle",void 0),Uo=Xm=l([x(Ure)],Uo);const rf=Uo;function z9(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=U9(e.xoffset),s=U9(e.yoffset);return(r||s)&&t&&i?{x:-r/t,y:s/i}:null}function U9(e){return isFinite(e)?e:0}const VMe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function zMe(e){return VMe[e]||(q.getLogger(Ure).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const UMe=["begin","end","begin-end"],qre=["arrow","circle","square","diamond","cross","x"];let cp=class extends _e.ClonableMixin(P){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};l([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],cp.prototype,"type",void 0),l([d({type:UMe,json:{default:"begin-end",write:!0}})],cp.prototype,"placement",void 0),l([d({type:qre,json:{default:"arrow",write:!0}})],cp.prototype,"style",void 0),l([d({type:K,json:{type:[Le],default:null,write:!0}})],cp.prototype,"color",void 0),cp=l([x("esri.symbols.LineStyleMarker3D")],cp);const pL=cp;var s$;let Fa=s$=class extends $l{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Cn(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new s$(e)}static fromSimpleLineSymbol(e){var i;const t={enabled:!0,size:e.width??Cn(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new aj({style:e.style}):null,material:new Vs({color:(e.color||$_).clone()}),marker:e.marker?new pL({placement:e.marker.placement,style:e.marker.style,color:((i=e.marker.color)==null?void 0:i.clone())??null}):null};return new s$(t)}};l([d({type:Vs,json:{write:!0}})],Fa.prototype,"material",void 0),l([ee({Line:"line"},{readOnly:!0})],Fa.prototype,"type",void 0),l([d({type:zre,json:{write:!0,default:"miter"}})],Fa.prototype,"join",void 0),l([d({type:uj,json:{write:!0,default:"butt"}})],Fa.prototype,"cap",void 0),l([d({..._l,json:{write:{isRequired:!0}}})],Fa.prototype,"size",void 0),l([d(jre)],Fa.prototype,"pattern",void 0),l([d({types:{key:"type",base:pL,typeMap:{style:pL}},json:{write:!0}})],Fa.prototype,"marker",void 0),Fa=s$=l([x("esri.symbols.LineSymbol3DLayer")],Fa);const g0=Fa;var fL;const qMe=Si()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Zw=fL=class extends P{clone(){return new fL({href:this.href,primitive:this.primitive})}};l([d({type:String,json:{read:h4,write:jf}})],Zw.prototype,"href",void 0),l([ee(qMe)],Zw.prototype,"primitive",void 0),Zw=fL=l([x("esri.symbols.support.ObjectSymbol3DLayerResource")],Zw);const KJe="sphere";var mL;let Hp=mL=class extends se{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new mL({x:this.x,y:this.y,z:this.z})}};l([d({type:Number})],Hp.prototype,"x",void 0),l([d({type:Number})],Hp.prototype,"y",void 0),l([d({type:Number})],Hp.prototype,"z",void 0),Hp=mL=l([x("esri.symbols.support.Symbol3DAnchorPosition3D")],Hp);var yL;let Cr=yL=class extends $l{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,i;return new yL({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};l([d({type:Vs,json:{write:!0}})],Cr.prototype,"material",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Cr.prototype,"castShadows",void 0),l([d({type:Zw,json:{write:!0}})],Cr.prototype,"resource",void 0),l([ee({Object:"object"},{readOnly:!0})],Cr.prototype,"type",void 0),l([d({type:Number,json:{write:!0}})],Cr.prototype,"width",void 0),l([d({type:Number,json:{write:!0}})],Cr.prototype,"height",void 0),l([d({type:Number,json:{write:!0}})],Cr.prototype,"depth",void 0),l([ee({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Cr.prototype,"anchor",void 0),l([d({type:Hp,json:{type:[Number],read:{reader:e=>new Hp({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Cr.prototype,"anchorPosition",void 0),l([d({type:Number,json:{write:!0}})],Cr.prototype,"heading",void 0),l([d({type:Number,json:{write:!0}})],Cr.prototype,"tilt",void 0),l([d({type:Number,json:{write:!0}})],Cr.prototype,"roll",void 0),l([d({readOnly:!0})],Cr.prototype,"isPrimitive",null),Cr=yL=l([x("esri.symbols.ObjectSymbol3DLayer")],Cr);const cj=Cr;var gL;let Yr=gL=class extends $l{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new gL({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};l([d({type:Vs,json:{write:!0}})],Yr.prototype,"material",void 0),l([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Yr.prototype,"castShadows",void 0),l([ee({Path:"path"},{readOnly:!0})],Yr.prototype,"type",void 0),l([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],Yr.prototype,"profile",void 0),l([d({type:zre,json:{write:!0,default:"miter"}})],Yr.prototype,"join",void 0),l([d({type:DMe,json:{write:!0,default:"butt"}})],Yr.prototype,"cap",void 0),l([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Yr.prototype,"width",void 0),l([W("width",["width","size","height"])],Yr.prototype,"readWidth",null),l([d({type:Number,json:{write:!0}})],Yr.prototype,"height",void 0),l([W("height",["height","size","width"])],Yr.prototype,"readHeight",null),l([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Yr.prototype,"anchor",void 0),l([d({type:["heading","all"],json:{write:!0,default:"all"}})],Yr.prototype,"profileRotation",void 0),Yr=gL=l([x("esri.symbols.PathSymbol3DLayer")],Yr);const dj=Yr,GMe=["none","underline","line-through"],BMe=["normal","italic","oblique"],HMe=["normal","lighter","bold","bolder"],Gre={type:Number,cast:e=>{const t=as(e);return t===0?1:Ws(t,.1,4)},nonNullable:!0},WMe=["left","right","center"],ZMe=["baseline","top","middle","bottom"],Bre={type:WMe,nonNullable:!0},Hre={type:ZMe,nonNullable:!0},eYe=8;var vL;let Jl=vL=class extends P{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Je(e)}clone(){return new vL({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};l([d({type:GMe,json:{default:"none",write:!0}})],Jl.prototype,"decoration",void 0),l([d({type:String,json:{write:!0}})],Jl.prototype,"family",void 0),l([d({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],Jl.prototype,"size",void 0),l([ke("size")],Jl.prototype,"castSize",null),l([d({type:BMe,json:{default:"normal",write:!0}})],Jl.prototype,"style",void 0),l([d({type:HMe,json:{default:"normal",write:!0}})],Jl.prototype,"weight",void 0),Jl=vL=l([x("esri.symbols.Font")],Jl);const wI=Jl;var wL;let ug=wL=class extends P{constructor(){super(...arguments),this.color=new K([0,0,0,1]),this.size=0}clone(){const e={color:R(this.color),size:this.size};return new wL(e)}};l([d(Ch())],ug.prototype,"color",void 0),l([d(_l)],ug.prototype,"size",void 0),ug=wL=l([x("esri.symbols.support.Symbol3DHalo")],ug);let M_=class extends _e.ClonableMixin(P){constructor(t){super(t),this.color=null}};l([d(Ch())],M_.prototype,"color",void 0),M_=l([x("esri.symbols.support.Symbol3DTextBackground")],M_);var n$;let bs=n$=class extends $l{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const s={...r,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new n$({enabled:this.enabled,font:this.font&&R(this.font),halo:this.halo&&R(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:R(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new n$({font:e.font!=null?e.font.clone():new wI,halo:JMe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Vs({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new M_({color:e.backgroundColor.clone()}):null})}};function JMe(e,t){return e&&t!=null&&t>0?new ug({color:R(e),size:t}):null}l([d({type:wI,json:{write:!0}})],bs.prototype,"font",null),l([J("font")],bs.prototype,"writeFont",null),l([d({type:ug,json:{write:!0}})],bs.prototype,"halo",void 0),l([d({...Bre,json:{default:"center",write:!0}})],bs.prototype,"horizontalAlignment",void 0),l([d({...Gre,json:{default:1,write:!0}})],bs.prototype,"lineHeight",void 0),l([d({type:Vs,json:{write:!0}})],bs.prototype,"material",void 0),l([d({type:M_,json:{write:!0}})],bs.prototype,"background",void 0),l([d(_l)],bs.prototype,"size",null),l([d({type:String,json:{write:!0}})],bs.prototype,"text",void 0),l([ee({Text:"text"},{readOnly:!0})],bs.prototype,"type",void 0),l([d({...Hre,json:{default:"baseline",write:!0}})],bs.prototype,"verticalAlignment",void 0),bs=n$=l([x("esri.symbols.TextSymbol3DLayer")],bs);const v0=bs;var bL;let zc=bL=class extends $l{constructor(e){super(e),this.color=_L.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new bL({color:R(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};l([d({type:K,nonNullable:!0,json:{type:[Le],write:(e,t,i)=>t[i]=e.toArray(K.AlphaMode.UNLESS_OPAQUE),default:()=>_L.clone(),defaultEquals:e=>e.toCss(!0)===_L.toCss(!0)}})],zc.prototype,"color",void 0),l([ee({Water:"water"},{readOnly:!0})],zc.prototype,"type",void 0),l([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],zc.prototype,"waterbodySize",void 0),l([d({type:Number,json:{write:!0,default:null}})],zc.prototype,"waveDirection",void 0),l([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],zc.prototype,"waveStrength",void 0),zc=bL=l([x("esri.symbols.WaterSymbol3DLayer")],zc);const Wre=zc,_L=new K([0,119,190]);var SL;let dp=SL=class extends se{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new SL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};l([d({type:String})],dp.prototype,"name",void 0),l([d({type:String})],dp.prototype,"styleUrl",void 0),l([d({type:String})],dp.prototype,"styleName",void 0),l([d({type:Hr})],dp.prototype,"portal",void 0),dp=SL=l([x("esri.symbols.support.StyleOrigin")],dp);const TL=dp;var xL;let A_=xL=class extends se{constructor(){super(...arguments),this.url=""}clone(){return new xL({url:this.url})}};l([d({type:String})],A_.prototype,"url",void 0),A_=xL=l([x("esri.symbols.support.Thumbnail")],A_);const Zre={icon:rf,object:cj,line:g0,path:dj,fill:dm,extrude:Lre,text:v0,water:Wre},YMe=Q.ofType({base:$l,key:"type",typeMap:Zre,errorContext:"symbol-layer"});let Na=class extends $r{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,s=r||Q;this._set("symbolLayers",new s)}get color(){return null}set color(t){this.constructed&&q.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){tc(t,this._get("symbolLayers"))}readStyleOrigin(t,i,r){if(t.styleUrl&&t.name){const s=a0(t.styleUrl,r);return new TL({styleUrl:s,name:t.name})}if(t.styleName&&t.name)return new TL({portal:(r==null?void 0:r.portal)||Hr.getDefault(),styleName:t.styleName,name:t.name});r!=null&&r.messages&&r.messages.push(new bo("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,i,r,s){if(t.styleUrl&&t.name){let n=gS(t.styleUrl,s);Tn(n)&&(n=yo(n)),i.styleOrigin={styleUrl:n,name:t.name}}else t.styleName&&t.name&&(t.portal&&(s!=null&&s.portal)&&!QX(t.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new bo("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof $l||t&&Zre[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};l([d({json:{read:!1,write:!1}})],Na.prototype,"color",null),l([d({type:YMe,nonNullable:!0,json:{write:!0}}),ke(bie)],Na.prototype,"symbolLayers",null),l([d({type:TL})],Na.prototype,"styleOrigin",void 0),l([W("styleOrigin")],Na.prototype,"readStyleOrigin",null),l([J("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Na.prototype,"writeStyleOrigin",null),l([d({type:A_,json:{read:!1}})],Na.prototype,"thumbnail",void 0),l([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Na.prototype,"type",void 0),Na=l([x("esri.symbols.Symbol3D")],Na);const NS=Na;let Jw=class extends P{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};l([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Jw.prototype,"type",void 0),l([d({readOnly:!0})],Jw.prototype,"visible",void 0),Jw=l([x("esri.symbols.callouts.Callout3D")],Jw);const Jre=Jw;var $L;let o$=$L=class extends P{constructor(e){super(e),this.color=new K("white")}clone(){return new $L({color:R(this.color)})}};l([d(Ch({colorRequiredOnWrite:!0}))],o$.prototype,"color",void 0),o$=$L=l([x("esri.symbols.callouts.LineCallout3DBorder")],o$);const QMe=o$;var EL;let Uc=EL=class extends Jre{constructor(e){super(e),this.type="line",this.color=new K([0,0,0,1]),this.size=Cn(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new EL({color:R(this.color),size:this.size,border:R(this.border)})}};l([ee({line:"line"})],Uc.prototype,"type",void 0),l([d(Ch({colorRequiredOnWrite:!0}))],Uc.prototype,"color",void 0),l([d({..._l,json:{write:{isRequired:!0}}})],Uc.prototype,"size",void 0),l([d({type:QMe,json:{write:!0}})],Uc.prototype,"border",void 0),l([d({readOnly:!0})],Uc.prototype,"visible",null),Uc=EL=l([x("esri.symbols.callouts.LineCallout3D")],Uc);const Yre=Uc;function hj(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function Qre(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!(t!=null&&t.visible)&&!!hj(e)}function sYe(e){return e.type==="point-3d"||e.type==="label-3d"}function nYe(e){return e.horizontalAlignment==="center"}const Xre={types:{key:"type",base:Jre,typeMap:{line:Yre}},json:{write:!0}};var ML;let Km=ML=class extends P{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new ML({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};l([d({..._l,json:{write:{isRequired:!0}}})],Km.prototype,"screenLength",void 0),l([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Km.prototype,"minWorldLength",void 0),l([d({type:Number,json:{write:!0}})],Km.prototype,"maxWorldLength",void 0),Km=ML=l([x("esri.symbols.support.Symbol3DVerticalOffset")],Km);const pj=Km;var a$;const Kre=Q.ofType({base:null,key:"type",typeMap:{text:v0}});let qc=a$=class extends NS{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Kre,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Qre(this)}hasVisibleVerticalOffset(){return hj(this)}clone(){return new a$({styleOrigin:R(this.styleOrigin),symbolLayers:R(this.symbolLayers),thumbnail:R(this.thumbnail),callout:R(this.callout),verticalOffset:R(this.verticalOffset)})}static fromTextSymbol(e){return new a$({symbolLayers:new Q([v0.fromTextSymbol(e)])})}};l([d({type:pj,json:{write:!0}})],qc.prototype,"verticalOffset",void 0),l([d(Xre)],qc.prototype,"callout",void 0),l([d({json:{read:!1,write:!1}})],qc.prototype,"styleOrigin",void 0),l([d({type:Kre})],qc.prototype,"symbolLayers",void 0),l([ee({LabelSymbol3D:"label-3d"},{readOnly:!0})],qc.prototype,"type",void 0),qc=a$=l([x("esri.symbols.LabelSymbol3D")],qc);const bI=qc;var l$;const ese=Q.ofType({base:null,key:"type",typeMap:{line:g0,path:dj}}),XMe=Q.ofType({base:null,key:"type",typeMap:{line:g0,path:dj}});let Yw=l$=class extends NS{constructor(e){super(e),this.symbolLayers=new ese,this.type="line-3d"}clone(){return new l$({styleOrigin:R(this.styleOrigin),symbolLayers:R(this.symbolLayers),thumbnail:R(this.thumbnail)})}static fromSimpleLineSymbol(e){return new l$({symbolLayers:new Q([g0.fromSimpleLineSymbol(e)])})}};l([d({type:ese,json:{type:XMe}})],Yw.prototype,"symbolLayers",void 0),l([ee({LineSymbol3D:"line-3d"},{readOnly:!0})],Yw.prototype,"type",void 0),Yw=l$=l([x("esri.symbols.LineSymbol3D")],Yw);const hm=Yw;var u$;const tse=Q.ofType({base:null,key:"type",typeMap:{fill:dm}});let Qw=u$=class extends NS{constructor(e){super(e),this.symbolLayers=new tse,this.type="mesh-3d"}clone(){return new u$({styleOrigin:R(this.styleOrigin),symbolLayers:R(this.symbolLayers),thumbnail:R(this.thumbnail)})}static fromSimpleFillSymbol(e){return new u$({symbolLayers:new Q([dm.fromSimpleFillSymbol(e)])})}};l([d({type:tse})],Qw.prototype,"symbolLayers",void 0),l([ee({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Qw.prototype,"type",void 0),Qw=u$=l([x("esri.symbols.MeshSymbol3D")],Qw);const LS=Qw;let Xw=class extends $r{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};l([ee({esriSLS:"simple-line"},{readOnly:!0})],Xw.prototype,"type",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],Xw.prototype,"width",void 0),Xw=l([x("esri.symbols.LineSymbol")],Xw);const KMe=Xw;var AL;let La=AL=class extends P{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new AL({color:R(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};l([d({type:["begin","end","begin-end"],json:{write:!0}})],La.prototype,"placement",void 0),l([ee({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],La.prototype,"type",void 0),l([d({type:qre})],La.prototype,"style",void 0),l([J("style")],La.prototype,"writeStyle",null),l([d({type:K,value:null,json:{write:{allowNull:!0}}})],La.prototype,"color",null),l([W("color")],La.prototype,"readColor",null),l([J("color")],La.prototype,"writeColor",null),La=AL=l([x("esri.symbols.LineSymbolMarker")],La);const eAe=La;var IL;const V3=new be({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Yl=IL=class extends KMe{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,s,n){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),i!=null&&(o.width=Je(i)),r!=null&&(o.cap=r),s!=null&&(o.join=s),n!=null&&(o.miterLimit=Je(n)),o}clone(){var e;return new IL({color:R(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};l([ee({esriSLS:"simple-line"},{readOnly:!0})],Yl.prototype,"type",void 0),l([d({type:V3.apiValues,json:{read:V3.read,write:V3.write}})],Yl.prototype,"style",void 0),l([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],Yl.prototype,"cap",void 0),l([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],Yl.prototype,"join",void 0),l([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":eAe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Yl.prototype,"marker",void 0),l([d({type:Number,json:{read:!1,write:!1}})],Yl.prototype,"miterLimit",void 0),Yl=IL=l([x("esri.symbols.SimpleLineSymbol")],Yl);const Rn=Yl;let Kw=class extends $r{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};l([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Rn}},json:{default:null,write:!0}})],Kw.prototype,"outline",void 0),l([d({type:["simple-fill","picture-fill"],readOnly:!0})],Kw.prototype,"type",void 0),Kw=l([x("esri.symbols.FillSymbol")],Kw);const ise=Kw;function tAe(e,t,i){return t.imageData?XX({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):rse(t.url,i)}function rse(e,t){if(!Tn(e)){const i=rAe(t);if(i)return Pf(i,"images",e)}return a0(e,t)}function iAe(e,t,i,r){if(sc(e)){const s=Df(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,i&&i.imageData===t.imageData&&i.url&&jf(i.url,t,"url",r)}else jf(e,t,"url",r)}const sse={json:{read:{source:["imageData","url"],reader:tAe},write:{writer(e,t,i,r){iAe(e,t,this.source,r)}}}},nse={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=rse(t.url,i)),r}}}};function rAe(e){var s,n;if(!e)return null;const{origin:t,layer:i}=e;if(t!=="service"&&t!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(s=i.parsedUrl)==null?void 0:s.path:r==="map-image"||r==="tile"?(n=e.url)==null?void 0:n.path:null}var CL;let zn=CL=class extends ise{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),i!=null&&(s.width=Je(i)),r!=null&&(s.height=Je(r)),s}clone(){const e=new CL({color:R(this.color),height:this.height,outline:R(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",R(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};l([ee({esriPFS:"picture-fill"},{readOnly:!0})],zn.prototype,"type",void 0),l([d(sse)],zn.prototype,"url",void 0),l([d({type:Number,json:{write:!0}})],zn.prototype,"xscale",void 0),l([d({type:Number,json:{write:!0}})],zn.prototype,"yscale",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],zn.prototype,"width",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],zn.prototype,"height",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],zn.prototype,"xoffset",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],zn.prototype,"yoffset",void 0),l([d(nse)],zn.prototype,"source",void 0),zn=CL=l([x("esri.symbols.PictureFillSymbol")],zn);const fj=zn;let Gc=class extends $r{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};l([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Gc.prototype,"angle",void 0),l([d({type:["simple-marker","picture-marker"],readOnly:!0})],Gc.prototype,"type",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],Gc.prototype,"xoffset",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],Gc.prototype,"yoffset",void 0),l([d({cast:e=>e==="auto"?e:as(Je(e)),json:{write:!0}})],Gc.prototype,"size",void 0),Gc=l([x("esri.symbols.MarkerSymbol")],Gc);const ose=Gc;var OL;let qo=OL=class extends ose{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=Je(t)),i!=null&&(r.height=Je(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new OL({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",R(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};l([d({json:{write:!1}})],qo.prototype,"color",void 0),l([ee({esriPMS:"picture-marker"},{readOnly:!0})],qo.prototype,"type",void 0),l([d(sse)],qo.prototype,"url",void 0),l([d(nse)],qo.prototype,"source",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],qo.prototype,"height",void 0),l([W("height",["height","size"])],qo.prototype,"readHeight",null),l([d({type:Number,cast:Je,json:{write:!0}})],qo.prototype,"width",void 0),l([d({json:{write:!1}})],qo.prototype,"size",void 0),qo=OL=l([x("esri.symbols.PictureMarkerSymbol")],qo);const kS=qo;var hp;const ase=Q.ofType({base:null,key:"type",typeMap:{icon:rf,object:cj,text:v0}});let pp=hp=class extends NS{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new ase,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Qre(this)}hasVisibleVerticalOffset(){return hj(this)}clone(){return new hp({verticalOffset:R(this.verticalOffset),callout:R(this.callout),styleOrigin:R(this.styleOrigin),symbolLayers:R(this.symbolLayers),thumbnail:R(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new hp({symbolLayers:new Q([rf.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new hp({symbolLayers:new Q([rf.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var r,s;if(((s=(r=e.data)==null?void 0:r.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return new hp(i!=null&&i.callout?{symbolLayers:new Q([rf.fromCIMSymbol(e)]),callout:new Yre({size:.5,color:new K([0,0,0])}),verticalOffset:new pj({screenLength:40})}:{symbolLayers:new Q([rf.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new hp({symbolLayers:new Q([v0.fromTextSymbol(e)])})}};l([d({type:pj,json:{write:!0}})],pp.prototype,"verticalOffset",void 0),l([d(Xre)],pp.prototype,"callout",void 0),l([d({type:ase,json:{origins:{"web-scene":{write:!0}}}})],pp.prototype,"symbolLayers",void 0),l([ee({PointSymbol3D:"point-3d"},{readOnly:!0})],pp.prototype,"type",void 0),pp=hp=l([x("esri.symbols.PointSymbol3D")],pp);const Pu=pp;var eb;const lse=Q.ofType({base:null,key:"type",typeMap:{extrude:Lre,fill:dm,icon:rf,line:g0,object:cj,text:v0,water:Wre}});let tb=eb=class extends NS{constructor(e){super(e),this.symbolLayers=new lse,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&i1(q.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&i1(q.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(Hs(()=>this.symbolLayers,"after-add",({item:t})=>e(t),So))}clone(){return new eb({styleOrigin:R(this.styleOrigin),symbolLayers:R(this.symbolLayers),thumbnail:R(this.thumbnail)})}static fromJSON(e){var i;const t=new eb;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),s=t.symbolLayers.at(1);!s.enabled||(i=e.symbolLayers)!=null&&i[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:s.size,color:s.material!=null?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new eb({symbolLayers:new Q([dm.fromSimpleFillSymbol(e)])})}};l([d({type:lse,json:{write:!0}})],tb.prototype,"symbolLayers",void 0),l([ee({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],tb.prototype,"type",void 0),tb=eb=l([x("esri.symbols.PolygonSymbol3D")],tb);const Oh=tb;var RL;const z3=new be({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let fp=RL=class extends ise{constructor(...e){super(...e),this.color=new K([0,0,0,.25]),this.outline=new Rn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new RL({color:R(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};l([d()],fp.prototype,"color",void 0),l([d()],fp.prototype,"outline",void 0),l([ee({esriSFS:"simple-fill"},{readOnly:!0})],fp.prototype,"type",void 0),l([d({type:z3.apiValues,json:{read:z3.read,write:z3.write}})],fp.prototype,"style",void 0),fp=RL=l([x("esri.symbols.SimpleFillSymbol")],fp);const uc=fp;var FL;const U3=new be({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ka=FL=class extends ose{constructor(...e){super(...e),this.color=new K([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Rn}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=Je(t)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new FL({angle:this.angle,color:R(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};l([d()],ka.prototype,"color",void 0),l([J("color")],ka.prototype,"writeColor",null),l([ee({esriSMS:"simple-marker"},{readOnly:!0})],ka.prototype,"type",void 0),l([d()],ka.prototype,"size",void 0),l([d({type:U3.apiValues,json:{read:U3.read,write:U3.write}})],ka.prototype,"style",void 0),l([d({type:String,json:{write:!0}})],ka.prototype,"path",null),l([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Rn}},json:{default:null,write:!0}})],ka.prototype,"outline",void 0),ka=FL=l([x("esri.symbols.SimpleMarkerSymbol")],ka);const El=ka;var NL;let Ot=NL=class extends $r{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new wI,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return Je(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new NL({angle:this.angle,backgroundColor:R(this.backgroundColor),borderLineColor:R(this.borderLineColor),borderLineSize:this.borderLineSize,color:R(this.color),font:this.font&&this.font.clone(),haloColor:R(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,i;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};l([d({type:K,json:{write:!0}})],Ot.prototype,"backgroundColor",void 0),l([d({type:K,json:{write:!0}})],Ot.prototype,"borderLineColor",void 0),l([d({type:Number,json:{write:!0},cast:Je})],Ot.prototype,"borderLineSize",void 0),l([d({type:wI,json:{write:!0}})],Ot.prototype,"font",void 0),l([d({...Bre,json:{write:!0}})],Ot.prototype,"horizontalAlignment",void 0),l([d({type:Boolean,json:{write:!0}})],Ot.prototype,"kerning",void 0),l([d({type:K,json:{write:!0}})],Ot.prototype,"haloColor",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],Ot.prototype,"haloSize",void 0),l([d({type:Boolean,json:{write:!0}})],Ot.prototype,"rightToLeft",void 0),l([d({type:Boolean,json:{write:!0}})],Ot.prototype,"rotated",void 0),l([d({type:String,json:{write:!0}})],Ot.prototype,"text",void 0),l([ee({esriTS:"text"},{readOnly:!0})],Ot.prototype,"type",void 0),l([d({...Hre,json:{write:!0}})],Ot.prototype,"verticalAlignment",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],Ot.prototype,"xoffset",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],Ot.prototype,"yoffset",void 0),l([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ot.prototype,"angle",void 0),l([d({type:Number,json:{write:!0}})],Ot.prototype,"width",void 0),l([d({type:Number})],Ot.prototype,"lineWidth",void 0),l([J("lineWidth")],Ot.prototype,"writeLineWidth",null),l([ke("lineWidth")],Ot.prototype,"castLineWidth",null),l([d(Gre)],Ot.prototype,"lineHeight",void 0),l([J("lineHeight")],Ot.prototype,"writeLineHeight",null),Ot=NL=l([x("esri.symbols.TextSymbol")],Ot);const pm=Ot;var LL;let Go=LL=class extends $r{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:Hr.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new LL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){const t=e&&"acceptedFormats"in e?e.acceptedFormats:["web"];return this._fetchSymbol({...e,acceptedFormats:t})}async fetchCIMSymbol(e){const t=await this.fetchSymbol({...e,acceptedFormats:["cim"]});if((t==null?void 0:t.type)!=="cim")throw new M("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,i=t?this._fetchCacheKey:null;if(t!=null){const o=i&&t.get(i);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await L(()=>import("./webStyleSymbolUtils-B9r2VOrf.js"),__vite__mapDeps([148,149,150]));Fe(e);const s=r(this,{portal:this.portal},e);s.catch(o=>{q.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const n=await s;return t!=null&&t.set(i,n.clone()),n}};l([d({json:{write:!1}})],Go.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],Go.prototype,"styleName",void 0),l([d({type:Hr,json:{write:!1}})],Go.prototype,"portal",void 0),l([d({type:String,json:{read:h4,write:jf}})],Go.prototype,"styleUrl",void 0),l([d({type:A_,json:{read:!1}})],Go.prototype,"thumbnail",void 0),l([d({type:String,json:{write:!0}})],Go.prototype,"name",void 0),l([ee({styleSymbolReference:"web-style"},{readOnly:!0})],Go.prototype,"type",void 0),l([d()],Go.prototype,"_fetchCacheKey",null),Go=LL=l([x("esri.symbols.WebStyleSymbol")],Go);const gh=Go;function _I(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function w0(e){switch(e==null?void 0:e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Dd={base:$r,key:"type",typeMap:{"simple-fill":uc,"picture-fill":fj,"picture-marker":kS,"simple-line":Rn,"simple-marker":El,text:pm,"label-3d":bI,"line-3d":hm,"mesh-3d":LS,"point-3d":Pu,"polygon-3d":Oh,"web-style":gh,cim:Ih},errorContext:"symbol"},uYe={base:$r,key:"type",typeMap:{"picture-marker":kS,"simple-marker":El,"point-3d":Pu,cim:Ih},errorContext:"symbol"},cYe={base:$r,key:"type",typeMap:{"simple-line":Rn,"line-3d":hm,cim:Ih},errorContext:"symbol"},dYe={base:$r,key:"type",typeMap:{"simple-fill":uc,"picture-fill":fj,"polygon-3d":Oh,cim:Ih},errorContext:"symbol"},sAe={base:$r,key:"type",typeMap:{"picture-marker":kS,"simple-marker":El,text:pm,"web-style":gh,cim:Ih},errorContext:"symbol"},nAe=s0({types:Dd}),use={base:$r,key:"type",typeMap:{"simple-fill":uc,"picture-fill":fj,"picture-marker":kS,"simple-line":Rn,"simple-marker":El,text:pm,"line-3d":hm,"mesh-3d":LS,"point-3d":Pu,"polygon-3d":Oh,"web-style":gh,cim:Ih},errorContext:"symbol"},oAe={base:$r,key:"type",typeMap:{text:pm,"label-3d":bI},errorContext:"symbol"},q9={base:$r,key:"type",typeMap:{"line-3d":hm,"mesh-3d":LS,"point-3d":Pu,"polygon-3d":Oh,"web-style":gh,cim:Ih},errorContext:"symbol"},aAe={base:$r,key:"type",typeMap:{"label-3d":bI},errorContext:"symbol"},cse=va(Dd);var kL;function lAe(e){if(!e)return null;const t={};for(const i in e){const r=wa(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function uAe(e){if(e==null)return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let _s=kL=class extends _e.ClonableMixin(P){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:$x(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&fye(q.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new kL({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[t,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:uAe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:P.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const i={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,t,i,r){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:i};e==="origin-transform"&&(s.action=r),e==="attributes"&&(s.attributeName=r),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([Fi(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),Fi(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};l([d({value:null,json:{read:lAe}})],_s.prototype,"aggregateGeometries",null),l([d({value:null})],_s.prototype,"attributes",null),l([d({value:null,types:am,json:{read:wa}})],_s.prototype,"geometry",null),l([d({type:Boolean})],_s.prototype,"isAggregate",void 0),l([d({clonable:"reference"})],_s.prototype,"layer",void 0),l([d({clonable:"reference"})],_s.prototype,"origin",void 0),l([d({type:y0})],_s.prototype,"popupTemplate",void 0),l([d({clonable:"reference"})],_s.prototype,"sourceLayer",void 0),l([d({value:null,types:Dd})],_s.prototype,"symbol",null),l([d({clonable:!1,json:{read:!1,write:!1}})],_s.prototype,"_version",void 0),l([d({type:Boolean,value:!0})],_s.prototype,"visible",null),_s=kL=l([x("esri.Graphic")],_s);const _i=_s;let I_=class extends T_{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};l([K5({Type:_i,ensureType:yt(_i)})],I_.prototype,"itemType",void 0),I_=l([x("esri.support.GraphicsCollection")],I_);let Bc=class extends se{constructor(t){super(t),this.view=null,this.baseLayerViews=new Q,this.referenceLayerViews=new Q,this._loadingHandle=G(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},xe)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){var t;return((t=this.view)==null?void 0:t.suspended)??!0}get updating(){var i,r,s;if((i=this.view)!=null&&i.suspended)return!1;const t=(s=(r=this.view)==null?void 0:r.map)==null?void 0:s.basemap;return!!(t!=null&&t.loaded)&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};l([d({constructOnly:!0})],Bc.prototype,"view",void 0),l([d({readOnly:!0})],Bc.prototype,"baseLayerViews",void 0),l([d({readOnly:!0})],Bc.prototype,"referenceLayerViews",void 0),l([d({readOnly:!0})],Bc.prototype,"suspended",null),l([d({type:Boolean,readOnly:!0})],Bc.prototype,"updating",null),Bc=l([x("esri.views.BasemapView")],Bc);const cAe=Bc;function dAe(e){return"tryRecycleWith"in e}function hAe(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let pAe=class{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Bs(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,mo(this._controller.signal,()=>{const s=new M("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}tryRecycle(t){if(!this.done||!this.layerView||!dAe(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let s=0;s<t.length;s++){const n=t[s];if(n.type!==i)continue;const o=this.layerView.tryRecycleWith(n,{signal:r});if(o){t.splice(s,1),this.layer=n;const a=this.layerView,u=a.view;return this.promise=Promise.race([o.then(()=>(Fe(this._controller.signal),n.emit("layerview-destroy",{view:u,layerView:a}),u.emit("layerview-destroy",{view:u,layerView:a}),n.emit("layerview-create",{view:u,layerView:a}),u.emit("layerview-create",{view:u,layerView:a}),a)),new Promise((c,h)=>mo(this._controller.signal,()=>h(mt())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var s,n;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let o,a;if(await i.load({signal:t}),i.prefetchResources&&await i.prefetchResources({signal:t}),mAe(i))o=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new M("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(i);Fe(t),o="default"in h?new h.default({layer:i,view:r}):new h({layer:i,view:r})}const u=()=>{a=kt(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=mo(t,u),Fe(t);try{await o.when()}catch(h){throw u(),h}if(!((n=(s=this._map)==null?void 0:s.allLayers)==null?void 0:n.includes(i)))return u(),void this._deferred.reject(new M("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=o,i.emit("layerview-create",{view:r,layerView:o}),r.emit("layerview-create",{layer:i,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){i.emit("layerview-create-error",{view:r,error:o}),r.emit("layerview-create-error",{layer:i,error:o}),this.done=!0,this._deferred.reject(new M("layerview:create-error","layerview creation failed",{layer:i,error:o}))}}},Un=class extends se{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Tf,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const s of i)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Bs(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(fS(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var u,c,h;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,s=[],n=this.view.ready,o=p=>{if(p!=null){for(const m of p)if(m){r.add(m);const y=this._layerLayerViewInfoMap.get(m);y&&n?y.start():y||this._recyclingInfoMap.has(m)||s.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const p of this._rootCollectionNames)o(pl(this,p));for(const[p,m]of this._layerLayerViewInfoMap)if(!r.has(p)){this._layerLayerViewInfoMap.delete(m.layer);const y=m.tryRecycle(s);y?(this.notifyChange("updating"),this._recyclingInfoMap.set(m.layer,m),y.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[p,m]of this._recyclingInfoMap)r.has(p)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy());for(const p of s)this._createLayerView(p);this._refreshCollections();const a=[(u=i==null?void 0:i.ground)==null?void 0:u.layers,(c=i==null?void 0:i.basemap)==null?void 0:c.baseLayers,(h=i==null?void 0:i.basemap)==null?void 0:h.referenceLayers,i==null?void 0:i.layers].filter(p=>!!p);r.forEach(p=>"layers"in p&&a.push(p.layers)),this.addHandles(a.map(p=>this._watchUpdatingTracking.addOnCollectionChange(()=>p,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Hs(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),G(()=>{const t=this.view,i=t==null?void 0:t.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,t==null?void 0:t.ready]},()=>this._reschedule(),ns)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),N3(this._recyclingInfoMap),N3(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(mt()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Nge(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++t;return t}clear(){this.destroyed||(N3(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new M("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,i){var n;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(t);if(!(r!=null&&r.done))return!0;const s=r.layerView;return!(!s||!i||s.parent===i)||!!(r.done&&s&&"layers"in t&&((n=t.layers)!=null&&n.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,s))}_refreshCollections(){for(const[t,i]of this._layersToLayerViews)this._populateLayerViewsOwners(pl(this,t),pl(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,i,r){if(!t||!i)return void(i&&i.removeAll());let s=0;for(const n of t){const o=this._layerLayerViewInfoMap.get(n);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=n,a.parent=r,i.at(s)!==a&&i.splice(s,0,a),"layers"in n&&hAe(a)&&this._populateLayerViewsOwners(n.layers,a.layerViews,a),s+=1}s<i.length&&i.splice(s,i.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const i=new pAe(t,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(fi(r)||r.name==="cancelled:layerview-create")||q.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([d()],Un.prototype,"_workPromise",void 0),l([d({readOnly:!0})],Un.prototype,"_watchUpdatingTracking",void 0),l([d({readOnly:!0})],Un.prototype,"_layersToLayerViews",null),l([d({readOnly:!0})],Un.prototype,"_rootCollectionNames",null),l([d()],Un.prototype,"layerViewImporter",void 0),l([d()],Un.prototype,"supportsGround",void 0),l([d({readOnly:!0})],Un.prototype,"updating",null),l([d({readOnly:!0})],Un.prototype,"updatingRemaining",null),l([d({constructOnly:!0})],Un.prototype,"view",void 0),Un=l([x("esri.views.LayerViewManager")],Un);const fAe=Un;function mAe(e){return e.createLayerView!==X4.prototype.createLayerView}let sn=class extends se{constructor(t){super(t),this.factor=1.5,this.offset=lr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([d({type:Number})],sn.prototype,"factor",void 0),l([d({nonNullable:!0})],sn.prototype,"offset",void 0),l([d()],sn.prototype,"position",void 0),l([d({type:Number,range:{min:0}})],sn.prototype,"size",void 0),l([d()],sn.prototype,"maskUrl",void 0),l([d()],sn.prototype,"maskEnabled",void 0),l([d()],sn.prototype,"overlayUrl",void 0),l([d()],sn.prototype,"overlayEnabled",void 0),l([d({readOnly:!0})],sn.prototype,"version",null),l([d({type:Boolean})],sn.prototype,"visible",void 0),sn=l([x("esri.views.Magnifier")],sn);const dse=sn;let C_=class{constructor(t){this._observable=new n0,this._map=new Map(t)}get size(){return fe(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const i=this._map.delete(t);return i&&this._observable.notify(),i}entries(){return fe(this._observable),this._map.entries()}forEach(t,i){fe(this._observable),this._map.forEach((r,s)=>t.call(i,r,s,this),i)}get(t){return fe(this._observable),this._map.get(t)}has(t){return fe(this._observable),this._map.has(t)}keys(){return fe(this._observable),this._map.keys()}set(t,i){return this._map.set(t,i),this._observable.notify(),this}values(){return fe(this._observable),this._map.values()}[Symbol.iterator](){return fe(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var PL;let jd=PL=class extends P{constructor(e){super(e),this.name=null,this.code=null}clone(){return new PL({name:this.name,code:this.code})}};l([d({type:String,json:{write:{isRequired:!0}}})],jd.prototype,"name",void 0),l([d({type:[String,Number],json:{write:{isRequired:!0}}})],jd.prototype,"code",void 0),jd=PL=l([x("esri.layers.support.CodedValue")],jd);const yAe=new be({inherited:"inherited",codedValue:"coded-value",range:"range"});let ib=class extends P{constructor(t){super(t),this.name=null,this.type=null}};l([d({type:String,json:{write:!0}})],ib.prototype,"name",void 0),l([ee(yAe),d({json:{write:{isRequired:!0}}})],ib.prototype,"type",void 0),ib=l([x("esri.layers.support.Domain")],ib);const SI=ib;var DL;let rb=DL=class extends SI{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new DL({codedValues:R(this.codedValues),name:this.name})}};l([d({type:[jd],json:{write:{isRequired:!0}}})],rb.prototype,"codedValues",void 0),l([ee({codedValue:"coded-value"})],rb.prototype,"type",void 0),rb=DL=l([x("esri.layers.support.CodedValueDomain")],rb);const PS=rb;var jL;let c$=jL=class extends SI{constructor(e){super(e),this.type="inherited"}clone(){return new jL}};l([ee({inherited:"inherited"})],c$.prototype,"type",void 0),c$=jL=l([x("esri.layers.support.InheritedDomain")],c$);const hse=c$;var VL;let ey=VL=class extends SI{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new VL({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};l([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]},isRequired:!0}}})],ey.prototype,"maxValue",void 0),l([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[0]}},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]},isRequired:!0}}})],ey.prototype,"minValue",void 0),l([ee({range:"range"})],ey.prototype,"type",void 0),ey=VL=l([x("esri.layers.support.RangeDomain")],ey);const pse=ey,fse={key:"type",base:SI,typeMap:{range:pse,"coded-value":PS,inherited:hse}};function TI(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return pse.fromJSON(e);case"codedValue":return PS.fromJSON(e);case"inherited":return hse.fromJSON(e)}return null}const b0=new be({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var zL;const gAe=new be({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Or=zL=class extends P{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return(i==null?void 0:i.value)??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?gAe.fromJSON(i.fieldValueType):null}clone(){var e;return new zL({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};l([d({type:String,json:{write:!0}})],Or.prototype,"alias",void 0),l([d({type:[String,Number],json:{write:{allowNull:!0}}})],Or.prototype,"defaultValue",void 0),l([d()],Or.prototype,"description",void 0),l([W("description")],Or.prototype,"readDescription",null),l([d({types:fse,json:{read:{reader:TI},write:!0}})],Or.prototype,"domain",void 0),l([d({type:Boolean,json:{write:!0}})],Or.prototype,"editable",void 0),l([d({type:Le,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],Or.prototype,"length",void 0),l([d({type:String,json:{write:!0}})],Or.prototype,"name",void 0),l([d({type:Boolean,json:{write:!0}})],Or.prototype,"nullable",void 0),l([ee(b0)],Or.prototype,"type",void 0),l([d()],Or.prototype,"valueType",void 0),l([W("valueType",["description"])],Or.prototype,"readValueType",null),l([d({type:Boolean,json:{read:!1}})],Or.prototype,"visible",void 0),Or=zL=l([x("esri.layers.support.Field")],Or);const DS=Or;var UL;let ty=UL=class extends P{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new UL({mapLayerId:e,gdbVersion:t})}};l([ee({mapLayer:"map-layer"}),d({json:{write:{isRequired:!0}}})],ty.prototype,"type",void 0),l([d({type:Le,json:{write:{isRequired:!0}}})],ty.prototype,"mapLayerId",void 0),l([d({type:String,json:{write:!0}})],ty.prototype,"gdbVersion",void 0),ty=UL=l([x("esri.layers.support.source.MapLayerSource")],ty);var qL;let Ql=qL=class extends P{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:s}=this,n={workspaceId:e,query:t,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:s};return new qL(n)}};l([ee({queryTable:"query-table"}),d({json:{write:{isRequired:!0}}})],Ql.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Ql.prototype,"workspaceId",void 0),l([d({type:String,json:{write:!0}})],Ql.prototype,"query",void 0),l([d({type:String,json:{write:!0}})],Ql.prototype,"oidFields",void 0),l([d({type:we,json:{write:!0}})],Ql.prototype,"spatialReference",void 0),l([ee(Abe)],Ql.prototype,"geometryType",void 0),Ql=qL=l([x("esri.layers.support.source.QueryTableDataSource")],Ql);var GL;let iy=GL=class extends P{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new GL({workspaceId:e,dataSourceName:t})}};l([ee({raster:"raster"}),d({json:{write:{isRequired:!0}}})],iy.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],iy.prototype,"dataSourceName",void 0),l([d({type:String,json:{write:!0}})],iy.prototype,"workspaceId",void 0),iy=GL=l([x("esri.layers.support.source.RasterDataSource")],iy);var BL;let mp=BL=class extends P{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new BL({workspaceId:e,gdbVersion:t,dataSourceName:i})}};l([ee({table:"table"}),d({json:{write:{isRequired:!0}}})],mp.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],mp.prototype,"workspaceId",void 0),l([d({type:String,json:{write:!0}})],mp.prototype,"gdbVersion",void 0),l([d({type:String,json:{write:!0}})],mp.prototype,"dataSourceName",void 0),mp=BL=l([x("esri.layers.support.source.TableDataSource")],mp);var HL,WL;const vAe=Si()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let nn=HL=class extends P{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return G9()(e,t,i)}castLeftTableSource(e){return va(ZL(),e)}readRightTableSource(e,t,i){return G9()(e,t,i)}castRightTableSource(e){return va(ZL(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:s}=this,n={leftTableKey:e,rightTableKey:t,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:s};return new HL(n)}};l([ee({joinTable:"join-table"}),d({json:{write:{isRequired:!0}}})],nn.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],nn.prototype,"leftTableKey",void 0),l([d({type:String,json:{write:!0}})],nn.prototype,"rightTableKey",void 0),l([d({json:{write:!0}})],nn.prototype,"leftTableSource",void 0),l([W("leftTableSource")],nn.prototype,"readLeftTableSource",null),l([ke("leftTableSource")],nn.prototype,"castLeftTableSource",null),l([d({json:{write:!0}})],nn.prototype,"rightTableSource",void 0),l([W("rightTableSource")],nn.prototype,"readRightTableSource",null),l([ke("rightTableSource")],nn.prototype,"castRightTableSource",null),l([ee(vAe)],nn.prototype,"joinType",void 0),nn=HL=l([x("esri.layers.support.source.JoinTableDataSource")],nn);let q3=null;function G9(){return q3||(q3=s0({types:ZL()})),q3}let G3=null;function ZL(){return G3||(G3={key:"type",base:null,typeMap:{"data-layer":aa,"map-layer":ty}}),G3}const wAe={key:"type",base:null,typeMap:{"join-table":nn,"query-table":Ql,raster:iy,table:mp}};let aa=WL=class extends P{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new WL({fields:e,dataSource:t})}};l([ee({dataLayer:"data-layer"}),d({json:{write:{isRequired:!0}}})],aa.prototype,"type",void 0),l([d({type:[DS],json:{write:!0}})],aa.prototype,"fields",void 0),l([d({types:wAe,json:{write:!0}})],aa.prototype,"dataSource",void 0),aa=WL=l([x("esri.layers.support.source.DataLayerSource")],aa),aa.from=yt(aa);let yp=class extends _e.ClonableMixin(P){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};l([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],yp.prototype,"onFields",void 0),l([d({type:String,json:{write:!0}})],yp.prototype,"operator",void 0),l([d({type:String,json:{write:!0}})],yp.prototype,"searchTerm",void 0),l([d({type:String,json:{write:!0}})],yp.prototype,"searchType",void 0),yp=l([x("esri.rest.support.FullTextSearch")],yp);const bAe=yp;var JL;const B9=new be({upperLeft:"upper-left",lowerLeft:"lower-left"});let gp=JL=class extends P{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new JL(R({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};l([d({type:gt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],gp.prototype,"extent",void 0),l([d({type:["view","edit"],json:{write:!0}})],gp.prototype,"mode",void 0),l([d({type:String,json:{read:B9.read,write:B9.write}})],gp.prototype,"originPosition",void 0),l([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],gp.prototype,"tolerance",void 0),gp=JL=l([x("esri.rest.support.QuantizationParameters")],gp);const mj=gp,mse=new be({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var YL;const H9=new be({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Bo=YL=class extends P{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=R(e))}clone(){return new YL({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:R(this.statisticParameters)})}};l([d({type:Number,json:{write:!0}})],Bo.prototype,"maxPointCount",void 0),l([d({type:Number,json:{write:!0}})],Bo.prototype,"maxRecordCount",void 0),l([d({type:Number,json:{write:!0}})],Bo.prototype,"maxVertexCount",void 0),l([d({type:String,json:{write:!0}})],Bo.prototype,"onStatisticField",void 0),l([d({type:String,json:{write:!0}})],Bo.prototype,"outStatisticFieldName",void 0),l([d({type:String,json:{read:{source:"statisticType",reader:H9.read},write:{target:"statisticType",writer:H9.write}}})],Bo.prototype,"statisticType",void 0),l([d({type:Object})],Bo.prototype,"statisticParameters",void 0),l([J("statisticParameters")],Bo.prototype,"writeStatisticParameters",null),Bo=YL=l([x("esri.rest.support.StatisticDefinition")],Bo);const ic=Bo;var d$;const _Ae=new be({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ve=d$=class extends P{static from(e){return yS(d$,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const s=e[r];Array.isArray(s)?i[r]=s.map(n=>n instanceof Date?n.getTime():n):s instanceof Date?i[r]=s.getTime():i[r]=s}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new d$(R({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ve.MAX_MAX_RECORD_COUNT_FACTOR=5,l([d({json:{write:!0}})],ve.prototype,"aggregateIds",void 0),l([d({type:Boolean,json:{write:!0}})],ve.prototype,"cacheHint",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ve.prototype,"compactGeometryEnabled",void 0),l([d({json:{write:!0}})],ve.prototype,"datumTransformation",void 0),l([ke("datumTransformation")],ve.prototype,"castDatumTransformation",null),l([d({type:Boolean,json:{default:!1,write:!0}})],ve.prototype,"defaultSpatialReferenceEnabled",void 0),l([d({type:Number,json:{write:!0}})],ve.prototype,"distance",void 0),l([d({type:aa,json:{write:!0}})],ve.prototype,"dynamicDataSource",void 0),l([d({type:String,json:{write:!0}})],ve.prototype,"formatOf3DObjects",void 0),l([d({type:[bAe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],ve.prototype,"fullText",void 0),l([d({type:String,json:{write:!0}})],ve.prototype,"gdbVersion",void 0),l([d({types:am,json:{read:wa,write:!0}})],ve.prototype,"geometry",void 0),l([d({type:Number,json:{write:!0}})],ve.prototype,"geometryPrecision",void 0),l([d({type:[String],json:{write:!0}})],ve.prototype,"groupByFieldsForStatistics",void 0),l([d({type:String,json:{write:!0}})],ve.prototype,"having",void 0),l([d({type:Date})],ve.prototype,"historicMoment",void 0),l([J("historicMoment")],ve.prototype,"writeHistoricMoment",null),l([d({type:Number,json:{write:!0}})],ve.prototype,"maxAllowableOffset",void 0),l([d({type:Number,cast:e=>e<1?1:e>ve.MAX_MAX_RECORD_COUNT_FACTOR?ve.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],ve.prototype,"maxRecordCountFactor",void 0),l([d({type:["xyFootprint"],json:{write:!0}})],ve.prototype,"multipatchOption",void 0),l([d({type:Number,json:{read:{source:"resultRecordCount"}}})],ve.prototype,"num",void 0),l([d({json:{write:!0}})],ve.prototype,"objectIds",void 0),l([d({type:[String],json:{write:!0}})],ve.prototype,"orderByFields",void 0),l([d({type:[String],json:{write:!0}})],ve.prototype,"outFields",void 0),l([d({type:we,json:{name:"outSR",write:!0}})],ve.prototype,"outSpatialReference",void 0),l([d({type:[ic],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],ve.prototype,"outStatistics",void 0),l([d({json:{write:!0}})],ve.prototype,"parameterValues",void 0),l([J("parameterValues")],ve.prototype,"writeParameterValues",null),l([d({type:Se,json:{write:!0}})],ve.prototype,"pixelSize",void 0),l([d({type:mj,json:{write:!0}})],ve.prototype,"quantizationParameters",void 0),l([d({type:[Object],json:{write:!0}})],ve.prototype,"rangeValues",void 0),l([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],ve.prototype,"relationParameter",void 0),l([d({type:String,json:{write:!0}})],ve.prototype,"resultType",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ve.prototype,"returnCentroid",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ve.prototype,"returnDistinctValues",void 0),l([d({type:Boolean,json:{default:!0,write:!0}})],ve.prototype,"returnExceededLimitFeatures",void 0),l([d({type:Boolean,json:{write:!0}})],ve.prototype,"returnGeometry",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ve.prototype,"returnQueryGeometry",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ve.prototype,"returnM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ve.prototype,"returnZ",void 0),l([d({type:Boolean,json:{write:!0}})],ve.prototype,"returnTrueCurves",void 0),l([d({type:we,json:{write:!0}})],ve.prototype,"sourceSpatialReference",void 0),l([ee(mse,{ignoreUnknown:!1,name:"spatialRel"})],ve.prototype,"spatialRelationship",void 0),l([d({type:Number,json:{read:{source:"resultOffset"}}})],ve.prototype,"start",void 0),l([J("start"),J("num")],ve.prototype,"writeStart",null),l([d({type:String,json:{write:!0}})],ve.prototype,"sqlFormat",void 0),l([d({type:String,json:{write:!0}})],ve.prototype,"text",void 0),l([d({type:Ni,json:{write:!0}})],ve.prototype,"timeExtent",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],ve.prototype,"timeReferenceUnknownClient",void 0),l([ee(_Ae,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null}}}}})],ve.prototype,"units",void 0),l([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],ve.prototype,"where",void 0),l([J("where")],ve.prototype,"writeWhere",null),ve=d$=l([x("esri.rest.support.Query")],ve);const xr=ve;function p2(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let Pa=class extends _o.EventedAccessor{constructor(t){super(t),this._selectionMap=new C_,this._sources=new Q,this._trashCan=[],this._layerEditHandles=new Q,this._vizTaskId=0,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([G(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Hs(()=>this.sources,"change",i=>{const r=this._selectionMap;for(const s of i.removed)r.delete(s);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new Q;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(i=>"sublayers"in i&&i.sublayers?i.sublayers:null).forEach(i=>{(p2(i)&&!cxe(i)||Ds(i))&&t.add(i)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(kt)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[i,r]=t;return{layer:i,selection:[...r.selection]}})}get count(){let t=0;for(const i of this._selectionMap.values())t+=i.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){tc(t,this._sources)}async getSelectedFeatures(t,i={},r="layerView"){const{view:s,selections:n}=this,o=(t!==void 0?n.filter(a=>t.includes(a.layer)):n).filter(a=>a.selection.length>0).map(async a=>{const{layer:u,selection:c}=a,h=Ds(u)?u.parent:u;if(h==null||!Z9(h))return null;if(r==="layer")return J9(h,c,i);if(W9(h))return null;const p=await s.whenLayerView(h).catch(()=>null);return p?J9(p,c,i):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(t){const i=new Map;for(const[n,o]of this._selectionMap)i.set(n,[...o.selection]);let r=!1;const s=t.current.concat(t.added);for(const n of s){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(p2(o)||Ds(o))&&a!==null){const u=i0(i,o,()=>[]);u.includes(a)||(u.push(a),r=!0)}}for(const n of t.removed){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(p2(o)||Ds(o))&&a!==null){const u=i.get(o),c=u==null?void 0:u.indexOf(a);c!==void 0&&c>=0&&(u==null||u.splice(c,1),r=!0)}}if(r){const{_selectionMap:n,_trashCan:o}=this,a=[];for(const[u,c]of i){const h=n.get(u);h!==void 0&&o.push(h),n.set(u,{selection:c}),a.push({layer:u,selection:c,...Xz(h!==void 0?h.selection:[],c)})}this._onSelectionChange(a)}}setSelection(t,i){this._setSelection(t,i)}getSelection(t){const i=this._selectionMap.get(t);return i==null?void 0:i.selection}appendToSelection(t,i){const r=this._selectionMap.get(t),s=r!==void 0?[...r.selection]:[];for(const n of i)s.includes(n)||s.push(n);this._setSelection(t,s)}removeFromSelection(t,i){const r=this._selectionMap.get(t);if(!r)return;const s=[];for(const n of r.selection)i.includes(n)||s.push(n);this._setSelection(t,s)}toggleInSelection(t,i){const r=this._selectionMap.get(t);if(!r||r.selection.length===0)return void this._setSelection(t,i);const s=new Set(r.selection),n=new Set(i),o=wge(s,n);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const i=[];for(const[r,s]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}const{sources:t,view:i,_selectionMap:r,showHighlight:s}=this,n=this._vizTaskId;for(const a of t){const u=r.get(a),c=Ds(a)?a.parent:a;if(c!=null&&Z9(c)){if(W9(c))continue;i.whenLayerView(c).then(h=>{var p;(p=u==null?void 0:u.highlightHandle)==null||p.remove(),u!=null&&s&&n===this._vizTaskId&&"highlight"in h&&typeof h.highlight=="function"&&u.selection.length>0&&(u.highlightHandle=h.highlight(u.selection,this.highlightName))}).catch(()=>{var h;(h=u==null?void 0:u.highlightHandle)==null||h.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(kt);for(const t of this.sources){const i=Ds(t)?t.parent:t;if(i!=null&&p2(i)){const r=i.on("edits",s=>{this._handleEditChanges(s,t)});this._layerEditHandles.push(r)}}}_handleEditChanges(t,i){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(i)){const r=t.deletedFeatures.filter(s=>s.error==null).map(s=>s.objectId).filter(Br);this.removeFromSelection(i,r)}}_setSelection(t,i){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const r=this._selectionMap.get(t);if(r===void 0||!TAe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(t,{selection:[...i]});const s={layer:t,selection:[...i],...Xz(r!==void 0?r.selection:[],i)};this._onSelectionChange([s])}}};l([d({readOnly:!0,nonNullable:!0})],Pa.prototype,"selections",null),l([d({readOnly:!0,nonNullable:!0})],Pa.prototype,"count",null),l([d({constructOnly:!0,nonNullable:!0})],Pa.prototype,"view",void 0),l([d({readOnly:!0,nonNullable:!0})],Pa.prototype,"hasSelection",null),l([d()],Pa.prototype,"showHighlight",void 0),l([d()],Pa.prototype,"sources",null),l([d()],Pa.prototype,"highlightName",void 0),Pa=l([x("esri.views.SelectionManager")],Pa);const W9=e=>{var t;return Ds(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},SAe=e=>e.layer!==void 0,Z9=e=>(e==null?void 0:e.when)!==void 0,TAe=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const i=[...e.selection],r=[...t.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let s=0;s<i.length;s++)if(i[s]!==r[s])return!1}return!0},J9=async(e,t,i={})=>{let r;if(SAe(e)){const s=e;r=s===void 0?null:await s.queryFeatures(new xr({...i,objectIds:t})).then(n=>({data:n,layer:e.layer}))}else{const s=e;r=s===void 0?null:await s.queryFeatures(new xr({...i,objectIds:t})).then(n=>({data:n,layer:s}))}return r},xAe=Pa;let sb=class extends _e.ClonableMixin(se){constructor(t){super(t),this.accentColor=new K([255,127,0]),this.textColor=new K([255,255,255])}};l([d({type:K,nonNullable:!0})],sb.prototype,"accentColor",void 0),l([d({type:K,nonNullable:!0})],sb.prototype,"textColor",void 0),sb=l([x("esri.views.Theme")],sb);const QL=sb;var Y9;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(Y9||(Y9={}));const yse=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],gse={};function vse(e){return!!gse[e]}function $Ae(e){for(const t of e)if(!vse(t))return!1;return!0}yse.forEach(e=>{gse[e]=!0});let wse=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:r},s)=>{var n;return(n=this.inputManager)==null?void 0:n.installHandlers(s,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,r,s){const n=Array.isArray(t)?t:t.split(",");if(!$Ae(n))return n.some(vse)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:s=r,s=s??ih.DEFAULT;const u=this._createUniqueGroupName(),c=new EAe(this.view,n,a,o);this._handlers.set(u,{handler:c,priority:s});for(const h of n){const p=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,p+1)}return this.inputManager&&this.inputManager.installHandlers(u,[c],s),Ke(()=>this._removeHandler(u,n))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of i){const s=this._handlerCounts.get(r);s===void 0||(s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},EAe=class extends Zi{constructor(t,i,r,s){super(!0),this._latestDragStart=void 0,this.view=t;for(const n of i)switch(n){case"click":this.registerIncoming("click",r,o=>s(IAe(t,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>s(CAe(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>s(OAe(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>s(RAe(t,o)));break;case"hold":this.registerIncoming("hold",r,o=>s(FAe(t,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&s(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>s(NAe(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>s(LAe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>s(tw(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>s(tw(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>s(tw(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>s(kAe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>s(PAe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>s(tw(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>s(tw(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{s(DAe(o))});break;case"focus":this.registerIncoming("focus",r,o=>{s(MAe(o))});break;case"blur":this.registerIncoming("blur",r,o=>{s(AAe(o))})}}_wrapDrag(t){const i=t.data,{x:r,y:s}=i.center,{action:n,pointerType:o,button:a}=i;if(n==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const u=i.pointer.native,c=i.buttons,{cancelable:h,timestamp:p}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:r,y:s,origin:m,pointerType:o,button:a,buttons:c,radius:i.radius,angle:RX(i.angle),native:u,timestamp:p,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}};function MAe(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function AAe(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function IAe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:u}=t.data,{cancelable:c,timestamp:h}=t;return{type:"click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,screenPoint:lr(n,o),mapPoint:jS(e,n,o),eventId:u,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function CAe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:u}=t.data,{cancelable:c,timestamp:h}=t;return{type:"double-click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:jS(e,n,o),eventId:u,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function OAe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:u}=t.data,c=a.pointerId,{cancelable:h,timestamp:p}=t;return{type:"immediate-click",pointerId:c,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:p,mapPoint:jS(e,n,o),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function RAe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:u}=t.data,c=a.pointerId,{cancelable:h,timestamp:p}=t;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:p,mapPoint:jS(e,n,o),eventId:u,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function FAe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a}=t.data,{cancelable:u,timestamp:c}=t;return{type:"hold",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:c,mapPoint:jS(e,n,o),cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function jS(e,t,i){return e.toMap(lr(t,i),{exclude:[]})}function NAe(e){const{key:t,repeat:i,native:r}=e.data,{cancelable:s,timestamp:n}=e;return{type:"key-down",key:t,repeat:i,native:r,timestamp:n,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function LAe(e){const{key:t,native:i}=e.data,{cancelable:r,timestamp:s}=e;return{type:"key-up",key:t,native:i,timestamp:s,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:n=>e.async(n),preventDefault:()=>e.preventDefault()}}function tw(e,t){const{x:i,y:r,button:s,buttons:n,native:o,eventId:a}=e.data,u=o.pointerId,c=o.pointerType,{cancelable:h,timestamp:p}=e;return{type:t,x:i,y:r,pointerId:u,pointerType:c,button:s,buttons:n,native:o,timestamp:p,eventId:a,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function kAe(e){const{x:t,y:i,buttons:r,native:s,eventId:n}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,u=e.data.startEvent.native.pointerType,c=e.data.action,h={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:p,timestamp:m}=e;return{type:"pointer-drag",x:t,y:i,pointerId:a,pointerType:u,button:o,buttons:r,action:c,origin:h,native:s,timestamp:m,eventId:n,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}function PAe(e){const{cancelable:t,data:i,timestamp:r}=e,{x:s,y:n,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:a,timestamp:r,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}function DAe(e){const{action:t,state:i,device:r}=e.data,{cancelable:s,timestamp:n}=e,{buttons:o,axes:a}=i;return{type:"gamepad",device:r,timestamp:n,action:t,buttons:o,axes:a,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}var b1,Q9,X9;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(b1||(b1={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(Q9||(Q9={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(X9||(X9={}));function jAe(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return q.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function XL(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(b1.USER)&&e.getEditableFlag(b1.MANAGER)}function Da(e){return lr(e.x,e.y)}function bse(e,t){var r;const i=(r=e instanceof HTMLElement?e:e.surface)==null?void 0:r.getBoundingClientRect();return i?lr(t.clientX-i.left,t.clientY-i.top):lr(0,0)}function _se(e,t){return t instanceof Event?bse(e,t):Da(t)}function Sse(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let VAe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":eq(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!tq(t))break;const s=Da(t),n=$m(s,t.pointerType,i.forEachTool);if(n==null)break;const o=n.manipulator,a=n.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!tq(t))break;const s=this._grabbedManipulators.get(t.pointerId),n=s==null?void 0:s.manipulator,o=s==null?void 0:s.tool;if(n==null||o==null)break;const a=Da(t);a.x=Ws(a.x,0,i.view.width),a.y=Ws(a.y,0,i.view.height);const u=s.start,c=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,c?n.events.emit("drag",{action:"update",start:u,screenPoint:a}):n.events.emit("drag",{action:"start",start:u,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:n,start:u}));break;case"end":n.dragging=!1,c&&n.events.emit("drag",{action:"end",start:u,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const s=Da(t),n=$m(s,t.pointerType,i.forEachTool);if(zAe(t)||i.forEachTool(c=>{if((n==null||n.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let h=!1;c.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,h=!0)}),h&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}),n==null)break;const{manipulator:o,tool:a}=n;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const u=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:u,stopPropagation:r}),B3(o,r);break}case"click":{const s=Da(t),n=$m(s,t.pointerType,i.forEachTool),o=n==null?void 0:n.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a}),r();break}case"double-click":{const s=Da(t),n=$m(s,t.pointerType,i.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r}),B3(o,r);break}case"immediate-double-click":{const s=Da(t),n=$m(s,t.pointerType,i.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r}),t.pointerType==="mouse"&&B3(o,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Da(i)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===t&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(t,i){var s;const r=(s=this._grabbedManipulators.get(t.pointerId))==null?void 0:s.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Da(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=K9(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=K9(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:s})=>{i.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{r.add(s)}),t(s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const n=this._grabbedManipulators.values(),o=mye(n,({tool:a})=>a===s);s.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:r},s=!0,n){const o=(a,u)=>a===t&&(n==null||n===u);this._grabbedManipulators.forEach(({tool:a,manipulator:u,pointerType:c},h)=>{o(a,u)&&(this._grabbedManipulators.delete(h),u.grabbing=!1,u.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:u},c)=>{o(a,u)&&(this._draggedManipulators.delete(c),u.dragging=!1,u.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:a,manipulator:u},c)=>{o(a,u)&&(this._hoveredManipulators.delete(c),u.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(lr(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){const r=t.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!eq(t.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Da(t),t.pointerId,t.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(t,i,r,s){var a;let n=$m(t,r,s);const o=(a=this._hoveredManipulators.get(i))==null?void 0:a.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(i,n)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:i},r)=>{t===r&&(this._hoveredManipulators.delete(t),i.hovering=!1)})}};function K9(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function $m(e,t,i){let r=null;return i(s=>{if(s.manipulators==null||!XL(s))return!1;const n=s.manipulators.intersect(e,t);return n!=null&&(r={tool:s,manipulator:n},!0)}),r}function eq(e){return e==="mouse"}function tq(e){return e.pointerType!=="mouse"||e.button===0}function zAe(e){return!!e.native.shiftKey}function B3(e,t){e!=null&&e.consumesClicks&&t()}const iq="attached",H3="tools",UAe=1e3;let ja=class extends se{constructor(t){super(t),this._updatingHandles=new Tf,this._clock=t0,this._manipulatorState=new VAe,this.tools=new Q,this.cursor=null,this._interacting=!1,this._interactingTimeout=UAe,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(yse,t=>{this._handleInputEvent(t)},ih.TOOL),...jAe(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void q.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const i=this.activeTool;this._set("activeTool",t),i!=null&&i.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const r of this.tools){this._updateToolEditableFlag(r);const s=XL(r);this.activeTool!=null&&s||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=kt(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([G(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i)))],iq):this.addHandles(G(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(iq),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>t(r,i))})}_handleInputEvent(t){let i=!1;const r={...t,stopPropagation:()=>{i=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(s=>{!i&&s.visible&&s.handleInputEvent(r)}),!i&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(H3),this._forEachTool(t=>{if(t instanceof se){const i=G(()=>[t.cursor,t.visible,t.editable],()=>{XL(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,H3)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],H3)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var i;(i=t.setEditableFlag)==null||i.call(t,b1.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(i=>(t==null||i!==t)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};l([d({constructOnly:!0,nonNullable:!0})],ja.prototype,"view",void 0),l([d({value:null})],ja.prototype,"activeTool",null),l([d({readOnly:!0,type:Q})],ja.prototype,"tools",void 0),l([d({readOnly:!0})],ja.prototype,"cursor",void 0),l([d({readOnly:!0})],ja.prototype,"updating",null),l([d()],ja.prototype,"_interacting",void 0),l([d({readOnly:!0})],ja.prototype,"interacting",null),ja=l([x("esri.views.ToolViewManager")],ja);const qAe=new K("cyan"),GAe=1,BAe=.25,HAe=new K("black"),WAe=.4,ZAe=.2,EYe=.25,Tse="default",JAe="temporary",YAe=new K("yellow");var KL;let on=KL=class extends se{constructor(e){super(e),this.name=Tse,this.color=qAe.clone(),this.haloColor=null,this.haloOpacity=GAe,this.fillOpacity=BAe,this.shadowColor=HAe.clone(),this.shadowOpacity=WAe,this.shadowDifference=ZAe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur&&this.shadowColor.equals(e.shadowColor)&&this.shadowOpacity===e.shadowOpacity&&this.shadowDifference===e.shadowDifference}clone(){var e,t;return new KL({...this,color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),shadowColor:(t=this.shadowColor)==null?void 0:t.clone()})}assignFrom(e){var t;this.color=e.color.clone(),this.haloColor=(t=e.haloColor)==null?void 0:t.clone(),this.haloOpacity=e.haloOpacity,this.fillOpacity=e.fillOpacity,this.shadowColor=e.shadowColor.clone(),this.shadowDifference=e.shadowDifference,this.shadowOpacity=e.shadowOpacity,this.haloBlur=e.haloBlur,this.haloWidth=e.haloWidth}};l([d({type:String,constructOnly:!0,nonNullable:!0})],on.prototype,"name",void 0),l([d({type:K,nonNullable:!0})],on.prototype,"color",void 0),l([d({type:K})],on.prototype,"haloColor",void 0),l([d({nonNullable:!0})],on.prototype,"haloOpacity",void 0),l([d({nonNullable:!0})],on.prototype,"fillOpacity",void 0),l([d({type:K,nonNullable:!0})],on.prototype,"shadowColor",void 0),l([d({nonNullable:!0})],on.prototype,"shadowOpacity",void 0),l([d({nonNullable:!0})],on.prototype,"shadowDifference",void 0),l([d({nonNullable:!0})],on.prototype,"haloWidth",void 0),l([d({nonNullable:!0})],on.prototype,"haloBlur",void 0),on=KL=l([x("esri.views.support.HighlightOptions")],on);const rh=on;function QAe(){return new(Q.ofType(rh))([new rh({name:Tse}),new rh({name:JAe,color:YAe})])}let ry=class extends se{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":XAe.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return KAe[this.deviceType]}};l([d({nonNullable:!0,readOnly:!0})],ry.prototype,"nativeIndex",void 0),l([d({type:String,readOnly:!0})],ry.prototype,"deviceType",null),l([d({type:Number,readOnly:!0})],ry.prototype,"axisThreshold",null),ry=l([x("esri.views.input.gamepad.GamepadInputDevice")],ry);const yj=ry,XAe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),KAe={standard:.15,spacemouse:.025,unknown:0};let nb=class extends se{constructor(...t){super(...t),this.devices=new Q,this.enabledFocusMode="document"}};l([d({type:Q.ofType(yj),readOnly:!0})],nb.prototype,"devices",void 0),l([d({type:["document","view","none"]})],nb.prototype,"enabledFocusMode",void 0),nb=l([x("esri.views.input.gamepad.GamepadSettings")],nb);const eIe=nb;let h$=class extends se{constructor(){super(...arguments),this.gamepad=new eIe}};l([d({readOnly:!0})],h$.prototype,"gamepad",void 0),h$=l([x("esri.views.input.Input")],h$);const tIe=h$,gj=()=>nt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,W3=()=>d({type:["pan","rotate","zoom","none"],nonNullable:!0});let vp=class extends se{constructor(t){super(t),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};l([W3()],vp.prototype,"dragPrimary",void 0),l([W3()],vp.prototype,"dragSecondary",void 0),l([W3()],vp.prototype,"dragTertiary",void 0),l([d({type:["zoom","none"],nonNullable:!0})],vp.prototype,"mouseWheel",void 0),vp=l([x("esri.views.navigation.NavigationActionMap")],vp);const vj=vp;let Hc=class extends se{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([d({type:Boolean,nonNullable:!0})],Hc.prototype,"enabled",void 0),l([d({type:yj})],Hc.prototype,"device",void 0),l([d({type:["pan","zoom"],nonNullable:!0})],Hc.prototype,"mode",void 0),l([d({type:["forward-down","forward-up"],nonNullable:!0})],Hc.prototype,"tiltDirection",void 0),l([d({type:Number,nonNullable:!0})],Hc.prototype,"velocityFactor",void 0),Hc=l([x("esri.views.navigation.gamepad.GamepadSettings")],Hc);const xse=Hc;let Wc=class extends se{constructor(t){super(t),this.actionMap=new vj,this.browserTouchPanEnabled=!0,this.gamepad=new xse,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!gj()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(t){pye(q.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=t?"zoom":"none"}};l([d({type:vj,nonNullable:!0})],Wc.prototype,"actionMap",void 0),l([d({type:Boolean})],Wc.prototype,"browserTouchPanEnabled",void 0),l([d({type:xse,nonNullable:!0})],Wc.prototype,"gamepad",void 0),l([d({type:Boolean})],Wc.prototype,"momentumEnabled",void 0),l([d({type:Boolean})],Wc.prototype,"mouseWheelZoomEnabled",null),Wc=l([x("esri.views.navigation.Navigation")],Wc);const xI=Wc;function FYe(e,t,i){const r=$se(e),s=t,n=iIe(r,s,i);if(r){const o=ES.deriveUnitFromSR(r,e.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const a=new M("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new M("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!rIe(e)||n===Ls.Unsupported)return new M("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(n){case Ls.Units:{const o=(r==null?void 0:r.heightUnit)||"unknown",a=(s==null?void 0:s.heightUnit)||"unknown",u=new M("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new M("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:u})}case Ls.HeightModel:{const o=(r==null?void 0:r.heightModel)||"unknown",a=(s==null?void 0:s.heightModel)||"unknown",u=new M("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new M("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:u})}case Ls.CRS:{const o=(r==null?void 0:r.vertCRS)||"unknown",a=(s==null?void 0:s.vertCRS)||"unknown",u=new M("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new M("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:u})}}return null}function iIe(e,t,i){if(!rq(e)||!rq(t))return Ls.Unsupported;if(e==null||t==null)return Ls.Ok;if(!i&&e.heightUnit!==t.heightUnit)return Ls.Units;if(e.heightModel!==t.heightModel)return Ls.HeightModel;switch(e.heightModel){case"gravity-related-height":return Ls.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?Ls.Ok:Ls.CRS;default:return Ls.Unsupported}}var Ls;function rq(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function rIe(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!Ase(e)}function $se(e){var r;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?hh(e.url):void 0;return!(((r=e.spatialReference)==null?void 0:r.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&Ese(e)&&e.heightModelInfo?e.heightModelInfo:Ase(e)?ES.deriveUnitFromSR(nIe,e.spatialReference):null}function Ese(e){return"heightModelInfo"in e}function Mse(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Ase(e){return Mse(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):Ise(e)}function sIe(e){return e.layers!=null||Ise(e)||Mse(e)||Ese(e)}function Ise(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Ls||(Ls={}));const nIe=new ES({heightModel:"gravity-related-height"});var RM;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(RM||(RM={}));let ek,Z3=null;async function oIe(e){Z3||(Z3=L(()=>import("./geometryServiceUtils-Bp2U1PZm.js"),[]).then(t=>ek=t)),await Z3,Fe(e)}async function Cse(e,t,i,r){if(!e)return null;const s=e.spatialReference;return Eh()||_a(s,t)?oc(e,t):ek?ek.projectGeometry(e,t,i,r):(await Promise.race([oIe(r),yh(r)]),Cse(e,t,i,r))}let wt=class extends se{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Pr(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,s,n,o;const t=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:t==null?void 0:t.basemap,layers:(s=t==null?void 0:t.basemap)==null?void 0:s.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(n=t==null?void 0:t.ground)==null?void 0:n.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,r=>{const s=this._getSupportedSpatialReferences(r);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(t,s);n!=null&&(t=n)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(t);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var n,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(n=this.map)==null?void 0:n.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const s=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers},{layers:t==null?void 0:t.layers}],a=>{var u;return!(!("tileInfo"in a)||!((u=a.tileInfo)!=null&&u.spatialReference.equals(i)))&&(r=a,!0)},a=>"tileInfo"in a);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const i=this._collectLayers(this.mapCollections,s=>{var o,a;const n=$se(s);return!!n&&(t={heightModelInfo:n,vcsWkid:(o=s.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=s.spatialReference)==null?void 0:a.latestVcsWkid},!0)},s=>sIe(s));return{...t,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],i=this._collectLayers(this.mapCollections,r=>{const s="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find(a=>a.spatialReference.equals(this.spatialReference))??n;if(o)return t.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of s)t.push({extent:a,layer:r});return!1});return{candidates:t,updating:i}}get _extentTask(){const{candidates:t,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(t),s=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Pr(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:s.clone(),task:ec(async n=>{try{const o=await Cse(r.extent,s,"portalItem"in r.layer?r.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(En(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,i){if(t==null)return i;const r=new Array;for(const s of t)for(const n of i){if(!s.spatialReference.equals(n.spatialReference))continue;const o=lIe(s.viewingMode,n.viewingMode);if(o!==!1){r.push({spatialReference:s.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(t){const i=this.defaultSpatialReference;return t==null||t.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&t.length>1&&t.some(({spatialReference:r})=>r.equals(i))&&(t=t.filter(({spatialReference:r})=>r.equals(i))),t.length>1&&t.some(({viewingMode:r})=>r!==RM.Local)&&(t=t.filter(({viewingMode:r})=>r!==RM.Local)),t[0])}_getSupportedSpatialReferences(t){const i="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const s of i){const n=this.getSpatialReferenceSupport(s,t);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:a,viewingMode:u}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:u})}}return r}_pickExtentCandidate(t){const i=this.spatialReference;return t.find(({extent:r})=>i.equals(r.spatialReference))||t[0]}_collectLayers(t,i,r=()=>!0){var n;switch(this._loadMaybe((n=this.map)==null?void 0:n.call(this))){case"loading":return!0;case"failed":return!1}const s=new aIe(r,i);for(const o of t)if(this._collectCollection(o,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(t,i){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of t.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(i=>{fi(i)}),"loading"):t.loadStatus:"loaded"}};l([d()],wt.prototype,"required",void 0),l([d({constructOnly:!0})],wt.prototype,"map",void 0),l([d({constructOnly:!0})],wt.prototype,"getSpatialReferenceSupport",void 0),l([d()],wt.prototype,"defaultSpatialReference",void 0),l([d()],wt.prototype,"userSpatialReference",void 0),l([d()],wt.prototype,"sourcePreloadCount",void 0),l([d()],wt.prototype,"priorityCollection",void 0),l([d()],wt.prototype,"requiresExtentInSpatialReference",void 0),l([d()],wt.prototype,"suspended",void 0),l([d({readOnly:!0})],wt.prototype,"ready",null),l([d({readOnly:!0})],wt.prototype,"heightModelInfoReady",null),l([d({readOnly:!0})],wt.prototype,"spatialReference",null),l([d({readOnly:!0})],wt.prototype,"extent",null),l([d({readOnly:!0})],wt.prototype,"heightModelInfo",null),l([d({readOnly:!0})],wt.prototype,"vcsWkid",null),l([d({readOnly:!0})],wt.prototype,"latestVcsWkid",null),l([d({readOnly:!0})],wt.prototype,"viewingMode",null),l([d({readOnly:!0})],wt.prototype,"tileInfo",null),l([d({readOnly:!0})],wt.prototype,"mapCollections",null),l([d({readOnly:!0})],wt.prototype,"_spatialReferenceTask",null),l([d({readOnly:!0})],wt.prototype,"_tileInfoTask",null),l([d({readOnly:!0})],wt.prototype,"_heightModelInfoTask",null),l([d({readOnly:!0})],wt.prototype,"_extentCandidatesTask",null),l([d()],wt.prototype,"_extentTask",null),l([d()],wt.prototype,"_projectExtentTask",void 0),wt=l([x("esri.views.support.DefaultsFromMap")],wt);let aIe=class{constructor(t,i){this.layerFilter=t,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function lIe(e,t){return e!=null?t!=null?e===t&&e:e:t}let sy=class extends se{constructor(t){super(t),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};l([d()],sy.prototype,"featureTitleFields",void 0),l([d()],sy.prototype,"utilityNetworkFields",void 0),l([d()],sy.prototype,"globalIdField",void 0),sy=l([x("esri.views.support.RequiredFieldsOptions")],sy);const uIe=sy;var ob;let he=ob=class extends _o.EventedMixin(f0.EsriPromiseMixin(se)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new e0,this.updatingHandles=new Tf,this.allLayerViews=new d1({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:dIe}),this.groundView=null,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new I_,this.analyses=new MM,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Q,this.magnifier=new dse,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new tIe,this.navigation=new xI,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new wse(this),this.persistableViewModels=new Q,this.requiredFieldsOptions=new uIe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(G(()=>this.preconditionsReady,t=>{var r,s;const i=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,ob.views.add(this)):(this._lockedSpatialReference=null,ob.views.remove(this)),this.notifyChange("spatialReference"),!t&&i)(r=this.toolViewManager)==null||r.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown();else if(t&&!i){try{this._startup()}catch(n){return void queueMicrotask(()=>{this.fatalError=new M("startup-error",null,n)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},So))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,vl(()=>this.ready)))),this.basemapView=new cAe({view:this}),this.layerViewManager=new fAe({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new ja({view:this}),this.selectionManager=new xAe({view:this}),this.addHandles([Fi(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{q.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),G(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},ns),G(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},So),G(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},ns)])}destroy(){var e,t;this.destroyed||(ob.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=St(this.graphics),this.analyses=St(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),St(this.analysisViewManager),this.toolViewManager=St(this.toolViewManager),this.layerViewManager=St(this.layerViewManager),this.selectionManager=St(this.selectionManager),this.basemapView=St(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=St(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return q.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new wt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??QAe()}set highlights(e){this._set("highlights",tc(e,this._get("highlights"),Q.ofType(rh)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||In.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(q.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),In.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,t,i,r;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const s=!("loaded"in this.map)||this.map.loaded,n=this.map.ground.loaded,o=((t=this.map.basemap)==null?void 0:t.loaded)??!0;return s&&o&&n&&!((i=this.map)!=null&&i.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=ec(a=>pS(D("view-readyState-waiting-delay"),null,a)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(r=this._readyStateWaitingTask)!=null&&r.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=Pr(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var t,i;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&i.heightModelInfo)){const r=e.clone();return r.vcsWkid=this.defaultsFromMap.vcsWkid,r.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,r}return e}set spatialReference(e){const t=!ei(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??An}set timeZone(e){this._userTimeZone=e,gte(e)||q.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new QL}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new M("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&q.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Fi(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};he.views=new Q,l([d()],he.prototype,"_userSpatialReference",void 0),l([d()],he.prototype,"activeTool",null),l([d({readOnly:!0})],he.prototype,"allLayerViews",void 0),l([d()],he.prototype,"groundView",void 0),l([d()],he.prototype,"animation",null),l([d()],he.prototype,"basemapView",void 0),l([d()],he.prototype,"center",null),l([d()],he.prototype,"defaultsFromMapSettings",null),l([d()],he.prototype,"defaultsFromMap",null),l([d()],he.prototype,"displayFilterEnabled",void 0),l([d()],he.prototype,"fatalError",void 0),l([d({type:gt})],he.prototype,"extent",null),l([d(M9(I_,"graphics"))],he.prototype,"graphics",void 0),l([d(M9(MM,"analyses"))],he.prototype,"analyses",void 0),l([d({readOnly:!0,type:ES})],he.prototype,"heightModelInfo",null),l([d({type:Q.ofType(rh)})],he.prototype,"highlights",null),l([d({readOnly:!0})],he.prototype,"interacting",null),l([d({readOnly:!0})],he.prototype,"navigating",null),l([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],he.prototype,"preconditionsReady",null),l([d({readOnly:!0})],he.prototype,"typeSpecificPreconditionsReady",void 0),l([d({type:Q,readOnly:!0})],he.prototype,"layerViews",void 0),l([d()],he.prototype,"resolution",null),l([d({type:dse})],he.prototype,"magnifier",void 0),l([d({value:null,type:ere})],he.prototype,"map",null),l([d()],he.prototype,"padding",void 0),l([d({readOnly:!0})],he.prototype,"ready",void 0),l([d()],he.prototype,"_readyStateWaitingTask",void 0),l([d({readOnly:!0})],he.prototype,"readyState",null),l([d({type:we})],he.prototype,"spatialReference",null),l([d()],he.prototype,"stationary",null),l([d({readOnly:!0})],he.prototype,"supportsGround",void 0),l([d({type:Ni})],he.prototype,"timeExtent",null),l([d({type:String,nonNullable:!0})],he.prototype,"timeZone",null),l([d()],he.prototype,"tools",null),l([d()],he.prototype,"toolViewManager",void 0),l([d({readOnly:!0})],he.prototype,"type",void 0),l([d({type:Number})],he.prototype,"scale",void 0),l([d({readOnly:!0})],he.prototype,"updating",void 0),l([d({readOnly:!0})],he.prototype,"initialExtentRequired",void 0),l([d({readOnly:!0})],he.prototype,"initialExtent",null),l([d()],he.prototype,"cursor",null),l([d({readOnly:!0})],he.prototype,"input",void 0),l([d({type:xI,nonNullable:!0})],he.prototype,"navigation",void 0),l([d()],he.prototype,"layerViewManager",void 0),l([d()],he.prototype,"analysisViewManager",void 0),l([d()],he.prototype,"selectionManager",void 0),l([d()],he.prototype,"width",void 0),l([d()],he.prototype,"height",void 0),l([d({readOnly:!0})],he.prototype,"resizing",void 0),l([d({value:null,readOnly:!0})],he.prototype,"size",null),l([d({readOnly:!0})],he.prototype,"suspended",void 0),l([d({readOnly:!0})],he.prototype,"viewEvents",void 0),l([d({readOnly:!0})],he.prototype,"persistableViewModels",void 0),l([d()],he.prototype,"_isValid",void 0),l([d()],he.prototype,"_readyCycleForced",void 0),l([d()],he.prototype,"_lockedSpatialReference",void 0),l([d()],he.prototype,"_userTimeZone",void 0),l([d()],he.prototype,"_lockedTimeZone",void 0),l([d()],he.prototype,"_userTimeExtent",void 0),l([d()],he.prototype,"_lockedTimeExtent",void 0),l([d({type:QL})],he.prototype,"theme",void 0),l([d({readOnly:!0,type:QL})],he.prototype,"effectiveTheme",null),he=ob=l([x("esri.views.View")],he);const J3=globalThis.$arcgis;J3&&!J3.views&&Object.defineProperty(J3,"views",{configurable:!1,enumerable:!0,writable:!1,value:he.views});const cIe=he;function dIe(e){return e.layerViews}function Pg(e,t){return e[0]=t[0],e[1]=t[1],e}function ci(e,t,i){return e[0]=t,e[1]=i,e}function Ose(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function _1(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function Rse(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function Fse(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function hIe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function pIe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function fIe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function mIe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function yIe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function VS(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function gIe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function $I(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function FM(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function NM(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function Nse(e){const t=e[0],i=e[1];return t*t+i*i}function Lse(e,t){return e[0]=-t[0],e[1]=-t[1],e}function vIe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function tk(e,t){const i=t[0],r=t[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function kse(e,t){return e[0]*t[0]+e[1]*t[1]}function Pse(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function wIe(e,t,i,r){const s=t[0],n=t[1];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e}function bIe(e,t=1){const i=2*dI()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function _Ie(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s,e[1]=i[1]*r+i[3]*s,e}function kr(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s+i[4],e[1]=i[1]*r+i[3]*s+i[5],e}function SIe(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[3]*s+i[6],e[1]=i[1]*r+i[4]*s+i[7],e}function TIe(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[4]*s+i[12],e[1]=i[1]*r+i[5]*s+i[13],e}function xIe(e,t,i,r){const s=t[0]-i[0],n=t[1]-i[1],o=Math.sin(r),a=Math.cos(r);return e[0]=s*a-n*o+i[0],e[1]=s*o+n*a+i[1],e}function $Ie(e,t){const i=e[0],r=e[1],s=t[0],n=t[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const u=(i*s+r*n)*o*a;return u>1?0:u<-1?Math.PI:Math.acos(u)}function EIe(e){return"vec2("+e[0]+", "+e[1]+")"}function MIe(e,t){return e[0]===t[0]&&e[1]===t[1]}function AIe(e,t){const i=e[0],r=e[1],s=t[0],n=t[1],o=hs();return Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))}function IIe(e,t,i,r,s){let n=t[0]-i[0],o=t[1]-i[1];const a=(r[0]*n+r[1]*o)*(s-1);return n=r[0]*a,o=r[1]*a,e[0]=t[0]+n,e[1]=t[1]+o,e}const CIe=NM,wj=_1,OIe=Rse,RIe=Fse,FIe=$I,NIe=FM,LIe=Nse;Object.freeze(Object.defineProperty({__proto__:null,add:Ose,angle:$Ie,ceil:hIe,copy:Pg,cross:Pse,dist:FIe,distance:$I,div:RIe,divide:Fse,dot:kse,equals:AIe,exactEquals:MIe,floor:pIe,inverse:vIe,len:CIe,length:NM,lerp:wIe,max:mIe,min:fIe,mul:OIe,multiply:Rse,negate:Lse,normalize:tk,projectAndScale:IIe,random:bIe,rotate:xIe,round:yIe,scale:VS,scaleAndAdd:gIe,set:ci,sqrDist:NIe,sqrLen:LIe,squaredDistance:FM,squaredLength:Nse,str:EIe,sub:wj,subtract:_1,transformMat2:_Ie,transformMat2d:kr,transformMat3:SIe,transformMat4:TIe},Symbol.toStringTag,{value:"Module"}));function Xt(){return[0,0]}function kIe(e){return[e[0],e[1]]}function zS(e,t){return[e,t]}function PIe(e,t){return[e,t]}function DIe(e,t=Xt()){const i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function jIe(e,t){return new Float64Array(e,t,2)}function Dse(){return Xt()}function jse(){return zS(1,1)}function Vse(){return zS(1,0)}function zse(){return zS(0,1)}const VIe=Dse(),zIe=jse(),UIe=Vse(),qIe=zse();Object.freeze(Object.defineProperty({__proto__:null,ONES:zIe,UNIT_X:UIe,UNIT_Y:qIe,ZEROS:VIe,clone:kIe,create:Xt,createView:jIe,freeze:PIe,fromArray:DIe,fromValues:zS,ones:jse,unitX:Vse,unitY:zse,zeros:Dse},Symbol.toStringTag,{value:"Module"}));function GIe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function BIe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function HIe(e,t,i,r,s,n,o){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e}function bj(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5];let u=i*n-r*s;return u?(u=1/u,e[0]=n*u,e[1]=-r*u,e[2]=-s*u,e[3]=i*u,e[4]=(s*a-n*o)*u,e[5]=(r*o-i*a)*u,e):null}function WIe(e){return e[0]*e[3]-e[1]*e[2]}function S1(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],u=t[5],c=i[0],h=i[1],p=i[2],m=i[3],y=i[4],g=i[5];return e[0]=r*c+n*h,e[1]=s*c+o*h,e[2]=r*p+n*m,e[3]=s*p+o*m,e[4]=r*y+n*g+a,e[5]=s*y+o*g+u,e}function kv(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],u=t[5],c=Math.sin(i),h=Math.cos(i);return e[0]=r*h+n*c,e[1]=s*h+o*c,e[2]=r*-c+n*h,e[3]=s*-c+o*h,e[4]=a,e[5]=u,e}function _j(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],u=t[5],c=i[0],h=i[1];return e[0]=r*c,e[1]=s*c,e[2]=n*h,e[3]=o*h,e[4]=a,e[5]=u,e}function sh(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],u=t[5],c=i[0],h=i[1];return e[0]=r,e[1]=s,e[2]=n,e[3]=o,e[4]=r*c+n*h+a,e[5]=s*c+o*h+u,e}function EI(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function Use(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function Sj(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function ZIe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function JIe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function YIe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function qse(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function QIe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function XIe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function KIe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function eCe(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],u=t[0],c=t[1],h=t[2],p=t[3],m=t[4],y=t[5],g=hs();return Math.abs(i-u)<=g*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(r-c)<=g*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(s-h)<=g*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(n-p)<=g*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=g*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=g*Math.max(1,Math.abs(a),Math.abs(y))}const tCe=S1,iCe=qse;Object.freeze(Object.defineProperty({__proto__:null,add:YIe,copy:GIe,determinant:WIe,equals:eCe,exactEquals:KIe,frob:JIe,fromRotation:EI,fromScaling:Use,fromTranslation:Sj,identity:BIe,invert:bj,mul:tCe,multiply:S1,multiplyScalar:QIe,multiplyScalarAndAdd:XIe,rotate:kv,scale:_j,set:HIe,str:ZIe,sub:iCe,subtract:qse,translate:sh},Symbol.toStringTag,{value:"Module"}));function Bu(){return[1,0,0,1,0,0]}function rCe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function sCe(e,t,i,r,s,n){return[e,t,i,r,s,n]}function nCe(e,t){return new Float64Array(e,t,6)}const oCe=Bu();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:oCe,clone:rCe,create:Bu,createView:nCe,fromValues:sCe},Symbol.toStringTag,{value:"Module"}));const f2={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new uo({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:we.WebMercator}),minus180Line:new uo({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:we.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new uo({paths:[[[180,-180],[180,180]]],spatialReference:we.WGS84}),minus180Line:new uo({paths:[[[-180,-180],[-180,180]]],spatialReference:we.WGS84})}};function sf(e,t){return Math.ceil((e-t)/(2*t))}function Gse(e,t){const i=O_(e);for(const r of i)for(const s of r)s[0]+=t;return e}function O_(e){return Gu(e)?e.rings:e.paths}function aCe(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function MI(e){return typeof e=="string"?Li(e):R(e)}function lCe(e,t,i){const r={};for(const s in e){if(s==="declaredClass")continue;const n=e[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))r[s]=n.map(o=>lCe(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(i==null?void 0:i[s]);r[s]=t?o:JSON.stringify(o)}else r[s]=t?n:JSON.stringify(n);else r[s]=n}return r}async function uCe(e,t,i,r){const s=MI(e),n=t[0].spatialReference,o={...r,responseType:"json",query:{...s.query,f:"json",sr:Tv(n),target:JSON.stringify({geometryType:l0(t[0]),geometries:t}),cutter:JSON.stringify(i)}},a=await Be(s.path+"/cut",o),{cutIndexes:u,geometries:c=[]}=a.data;return{cutIndexes:u,geometries:c.map(h=>{const p=wa(h);return p.spatialReference=n,p})}}function cCe(e){return{geometryType:l0(e[0]),geometries:e.map(t=>t.toJSON())}}function Bse(e,t,i){const r=Mbe(t);return e.map(s=>{const n=r.fromJSON(s);return n.spatialReference=i,n})}async function dCe(e,t,i){const r=typeof e=="string"?Li(e):e,s=t[0].spatialReference,n=l0(t[0]),o={...i,query:{...r.query,f:"json",sr:Tv(s),geometries:JSON.stringify(cCe(t))}},{data:a}=await Be(r.path+"/simplify",o);return Bse(a.geometries,n,s)}const Hse=()=>q.getLogger("esri.geometry.support.normalizeUtils");function hCe(e){return e.type==="polygon"}function pCe(e){return e[0].type==="polygon"}function fCe(e){return e[0].type==="polyline"}function sq(e){const t=[];let i=0,r=0;for(let s=0;s<e.length;s++){const n=e[s];let o=null;for(let a=0;a<n.length;a++)o=n[a],t.push(o),a===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&t.push([(i+r)/2,0])}return t}function mCe(e,t){if(!(e instanceof uo||e instanceof To)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw Hse().error(s),new M(s)}const i=O_(e),r=[];for(const s of i){const n=[];r.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const a=s[o][0],u=s[o][1],c=s[o+1][0],h=s[o+1][1],p=Math.sqrt((c-a)*(c-a)+(h-u)*(h-u)),m=(h-u)/p,y=(c-a)/p,g=p/t;if(g>1){for(let _=1;_<=g-1;_++){const S=_*t,T=y*S+a,E=m*S+u;n.push([T,E])}const v=(p+Math.floor(g-1)*t)/2,b=y*v+a,w=m*v+u;n.push([b,w])}n.push([c,h])}}return hCe(e)?new To({rings:r,spatialReference:e.spatialReference}):new uo({paths:r,spatialReference:e.spatialReference})}function nq(e,t,i){if(t){const r=mCe(e,1e6);e=og(r,!0)}return i&&(e=Gse(e,i)),e}function oq(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const s=sf(r,t);e[0]=r+s*(-2*t)}else if(r<i){const s=sf(r,i);e[0]=r+s*(-2*i)}}else{const r=e.x;if(r>t){const s=sf(r,t);e=e.clone().offset(s*(-2*t),0)}else if(r<i){const s=sf(r,i);e=e.clone().offset(s*(-2*i),0)}}return e}function yCe(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const s=t.cutIndexes[r],n=t.geometries[r],o=O_(n);for(let a=0;a<o.length;a++){const u=o[a];u.some(c=>{if(c[0]<180)return!0;{let h=0;for(let m=0;m<u.length;m++){const y=u[m][0];h=y>h?y:h}h=Number(h.toFixed(9));const p=-360*sf(h,180);for(let m=0;m<u.length;m++){const y=n.getPoint(a,m);n.setPoint(a,m,y.clone().offset(p,0))}return!0}})}if(s===i){if(pCe(e))for(const a of O_(n))e[s]=e[s].addRing(a);else if(fCe(e))for(const a of O_(n))e[s]=e[s].addPath(a)}else i=s,e[s]=n}return e}async function Tj(e,t,i){if(!Array.isArray(e))return Tj([e],t);t&&typeof t!="string"&&Hse().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(t==null?void 0:t.url)??nt.geometryServiceUrl;let s,n,o,a,u,c,h,p,m=0;const y=[],g=[];for(const T of e)if(T!=null)if(s||(s=T.spatialReference,n=qr(s),o=s.isWebMercator,c=o?102100:4326,a=f2[c].maxX,u=f2[c].minX,h=f2[c].plus180Line,p=f2[c].minus180Line),n)if(T.type==="mesh")g.push(T);else if(T.type==="point")g.push(oq(T.clone(),a,u));else if(T.type==="multipoint"){const E=T.clone();E.points=E.points.map(A=>oq(A,a,u)),g.push(E)}else if(T.type==="extent"){const E=T.clone()._normalize(!1,!1,n);g.push(E.rings?new To(E):E)}else if(T.extent){const E=T.extent,A=sf(E.xmin,u)*(2*a);let C=A===0?T.clone():Gse(T.clone(),A);E.offset(A,0);let{xmin:O,xmax:U}=E;O=Number(O.toFixed(9)),U=Number(U.toFixed(9)),E.intersects(h)&&U!==a?(m=U>m?U:m,C=nq(C,o),y.push(C),g.push("cut")):E.intersects(p)&&O!==u?(m=U*(2*a)>m?U*(2*a):m,C=nq(C,o,360),y.push(C),g.push("cut")):g.push(C)}else g.push(T.clone());else g.push(T);else g.push(T);let v=sf(m,a),b=-90;const w=v,_=new uo;for(;v>0;){const T=360*v-180;_.addPath([[T,b],[T,-1*b]]),b*=-1,v--}if(y.length>0&&w>0){const T=yCe(y,await uCe(r,y,_,i)),E=[],A=[];for(let U=0;U<g.length;U++){const V=g[U];if(V!=="cut")A.push(V);else{const H=T.shift(),te=e[U];te!=null&&te.type==="polygon"&&te.rings&&te.rings.length>1&&H.rings.length>=te.rings.length?(E.push(H),A.push("simplify")):A.push(o?qu(H):H)}}if(!E.length)return A;const C=await dCe(r,E,i),O=[];for(let U=0;U<A.length;U++){const V=A[U];V!=="simplify"?O.push(V):O.push(o?qu(C.shift()):C.shift())}return O}const S=[];for(let T=0;T<g.length;T++){const E=g[T];if(E!=="cut")S.push(E);else{const A=y.shift();S.push(o===!0?qu(A):A)}}return S}function gCe(e){if(!e)return null;const t=e.extent;if(!t)return null;const i=e.spatialReference&&qr(e.spatialReference);if(!i)return t;const[r,s]=i.valid,n=2*s,{width:o}=t;let a,{xmin:u,xmax:c}=t;if([u,c]=[c,u],e.type==="extent"||o===0||o<=s||o>n||u<r||c>s)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=sq(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=sq(e.paths);break;case"multipoint":a=e.points}const h=t.clone();for(let p=0;p<a.length;p++){let m=a[p][0];m<0?(m+=s,c=Math.max(m,c)):(m-=s,u=Math.min(m,u))}return h.xmin=u,h.xmax=c,h.width<o?(h.xmin-=s,h.xmax-=s,h):t}function xj(e,t,i){const r=qr(i);if(r==null)return e;const[s,n]=r.valid,o=2*n;let a=0,u=0;t>n?a=Math.ceil(Math.abs(t-n)/o):t<s&&(a=-Math.ceil(Math.abs(t-s)/o)),e>n?u=Math.ceil(Math.abs(e-n)/o):e<s&&(u=-Math.ceil(Math.abs(e-s)/o));let c=e+(a-u)*o;const h=c-t;return h>n?c-=o:h<s&&(c+=o),c}function PYe(e,t){const i=qr(t);if(i){const[r,s]=i.valid,n=s-r;if(e<r)for(;e<r;)e+=n;if(e>s)for(;e>s;)e-=n}return e}const Wse=96,Zse=39.37,vCe=180/Math.PI;function Jse(e){return e.wkid?e:e.spatialReference||we.WGS84}function $j(e,t){return t.type?ci(e,t.x,t.y):Pg(e,t)}function Yse(e){return $o(e)}function AI(e,t,i=0){let r=e.width,s=e.height;if(i!==0){const a=jA(i),u=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));r=e.width*u+e.height*c,s=e.width*c+e.height*u}const n=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(r/n,s/o)*ECe(e.spatialReference)}async function ab(e,t,i,r){var a,u,c;let s,n;if(!e||Array.isArray(e)&&!e.length)return null;if(Q.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const h=e.every(y=>"attributes"in y),p=e.some(y=>!y.geometry);let m=e;if(h&&p&&t&&t.allLayerViews){const y=new Map;for(const w of e){const _=w.layer,S=y.get(_)||[],T=w.attributes[_.objectIdField];T!=null&&S.push(T),y.set(_,S)}const g=[];y.forEach((w,_)=>{var T;const S=(T=t.allLayerViews)==null?void 0:T.find(E=>E.layer.id===_.id);if(S&&"queryFeatures"in S){const E=_.createQuery();E.objectIds=w,E.returnGeometry=!0,g.push(S.queryFeatures(E))}});const v=await Promise.all(g),b=[];for(const w of v)if(w&&w.features&&w.features.length)for(const _ of w.features)_.geometry!=null&&b.push(_.geometry);m=b}for(const y of m)r=await ab(y,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new Se(e);else if(e instanceof nc)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const h=e.layer,p=(a=t.allLayerViews)==null?void 0:a.find(m=>m.layer.id===h.id);if(p&&"queryFeatures"in p){const m=h.createQuery();m.objectIds=[e.attributes[h.objectIdField]],m.returnGeometry=!0;const y=await p.queryFeatures(m);s=(c=(u=y==null?void 0:y.features)==null?void 0:u[0])==null?void 0:c.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new gt({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=gCe(s);break;default:n=s.extent}if(!n)return null;Eh()||_a(n.spatialReference,i)||await yh();const o=oc(n,i);if(!o)return null;if(r){const h=o.center,p=h.clone();p.x=xj(h.x,r.center.x,i),p.x!==h.x&&o.centerAt(p),r=r.union(o)}else r=o;return r}function wCe(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const i=e.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(e)&&e.length&&e.every(i=>"layer"in i)){let i=0,r=0;for(const s of e){const n=s.layer;n!=null&&n.minScale&&n.maxScale&&(i=n.minScale<i?n.minScale:i,r=n.maxScale>r?n.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function aq(e,t){const i=Jse(e);return ei(i,t)||i.imageCoordinateSystem||t.imageCoordinateSystem?e:oc(e,t)}async function bCe(e,t){var b;if(!e||!t)return new Bi({targetGeometry:new Se,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:s,viewpoint:n,size:o}=t,a=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let u=null;e instanceof Bi?u=e:e.viewpoint?u=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(u=e.target);let c=null;u!=null&&u.targetGeometry?c=u.targetGeometry:e instanceof gt?c=e:e instanceof nc?c=await ab(e,t,i):e&&(c=await ab(e.center,t,i)||await ab(e.target,t,i)||await ab(e,t,i)),!c&&(n!=null&&n.targetGeometry)?c=n.targetGeometry:!c&&t.extent&&(c=t.extent),i||(i=Jse(t.spatialReference||t.extent||c)),Eh()||ei(c.spatialReference,i)||_a(c.spatialReference,i)||await yh();const h=aq(c,i),p="center"in h?h.center:h;t.pickClosestTarget!==!1&&p.type==="point"&&((b=n.targetGeometry)==null?void 0:b.type)==="point"&&(p.x=xj(p.x,n.targetGeometry.x,p.spatialReference));let m=0;u?m=u.rotation:e.hasOwnProperty("rotation")?m=e.rotation:n&&(m=n.rotation);let y=0;y=(u==null?void 0:u.targetGeometry)!=null&&u.targetGeometry.type==="point"?u.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(e.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?n.scale:AI(aq(c.extent,i),a,m);const g=wCe(e.target??e);g&&(g.min&&g.min<y?y=g.min:g.max&&g.max>y&&(y=g.max));let v=new Bi({targetGeometry:p,scale:y,rotation:m});return r&&(v=r.fit(v),r.constrainByGeometry(v),r.rotationEnabled||(v.rotation=n.rotation)),v}function Ur(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function _Ce(e,t,i){return i?ci(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):VS(e,t,.5)}const SCe=function(){const e=Xt();return function(t,i,r){const s=i.targetGeometry;$j(e,s);const n=.5*_0(i);return t.xmin=e[0]-n*r[0],t.ymin=e[1]-n*r[1],t.xmax=e[0]+n*r[0],t.ymax=e[1]+n*r[1],t.spatialReference=s.spatialReference,t}}();function TCe(e,t,i,r,s){var n;return ik(e,t,i.center),e.scale=AI(i,r),(n=s==null?void 0:s.constraints)==null||n.constrain(e),e}function xCe(e,t,i,r){return Ij(e,t,i,r),bj(e,e)}const Qse=function(){const e=Xt();return function(t,i,r){return wj(t,MCe(t,i),_Ce(e,i,r))}}(),$Ce=function(){const e=Bu(),t=Xt();return function(i,r,s,n){const o=_0(r),a=Mj(r);return ci(t,o,o),Use(e,t),kv(e,e,a),sh(e,e,Qse(t,s,n)),sh(e,e,[0,n.top-n.bottom]),ci(i,e[4],e[5])}}();function _0(e){var t;return e.scale*Ej((t=e.targetGeometry)==null?void 0:t.spatialReference)}function Ej(e){return cs(e)?1/(Yse(e)*Zse*Wse):1}function Mj(e){return Q4(e.rotation)||0}function ECe(e){return cs(e)?Yse(e)*Zse*Wse:1}function MCe(e,t){return VS(e,t,.5)}const Aj=function(){const e=Xt(),t=Xt(),i=Xt();return function(r,s,n,o,a,u){return Lse(e,s),VS(t,n,.5*u),ci(i,1/o*u,-1/o*u),Sj(r,t),a&&kv(r,r,a),_j(r,r,i),sh(r,r,e),r}}(),Ij=function(){const e=Xt();return function(t,i,r,s){const n=_0(i),o=Mj(i);return $j(e,i.targetGeometry),Aj(t,e,r,n,o,s)}}(),ACe=function(){const e=Xt();return function(t,i,r,s){const n=_0(i);return $j(e,i.targetGeometry),Aj(t,e,r,n,0,s)}}();function Xse(e){const t=qr(e);return t?t.valid[1]-t.valid[0]:0}function ICe(e,t){return Math.round(Xse(e)/t)}const CCe=function(){const e=Xt(),t=Xt(),i=[0,0,0];return function(r,s,n){_1(e,r,s),tk(e,e),_1(t,r,n),tk(t,t),Pse(i,e,t);let o=Math.acos(kse(e,t)/(NM(e)*NM(t)))*vCe;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),OCe=function(){const e=Xt();return function(t,i,r,s){const n=t.targetGeometry;return Ur(t,i),$Ce(e,i,r,s),n.x+=e[0],n.y+=e[1],t}}(),ik=function(e,t,i){Ur(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},RCe=function(){const e=Xt();return function(t,i,r,s,n){n||(n="center"),wj(e,r,s),VS(e,e,.5);const o=e[0],a=e[1];switch(n){case"center":ci(e,0,0);break;case"left":ci(e,-o,0);break;case"top":ci(e,0,a);break;case"right":ci(e,o,0);break;case"bottom":ci(e,0,-a);break;case"top-left":ci(e,-o,a);break;case"bottom-left":ci(e,-o,-a);break;case"top-right":ci(e,o,a);break;case"bottom-right":ci(e,o,-a)}return II(t,i,e),t}}();function DYe(e,t,i){return Ur(e,t),e.rotation+=i,e}function FCe(e,t,i){return Ur(e,t),e.rotation=i,e}const NCe=function(){const e=Xt();return function(t,i,r,s,n){return Ur(t,i),isNaN(r)||r===0||(ene(e,s,i,n),t.scale=i.scale*r,tne(e,e,t,n),II(t,t,ci(e,e[0]-s[0],s[1]-e[1]))),t}}();function lq(e,t,i){return Ur(e,t),e.scale=i,e}const Kse=function(){const e=Xt();return function(t,i,r,s,n,o){return Ur(t,i),isNaN(r)||r===0||(ene(e,n,i,o),t.scale=i.scale*r,t.rotation+=s,tne(e,e,t,o),II(t,t,ci(e,e[0]-n[0],n[1]-e[1]))),t}}(),jYe=function(){const e=Xt(),t=Xt();return function(i,r,s,n,o,a,u){return Qse(t,a,u),Ose(e,o,t),n?Kse(i,r,s,n,e,a):NCe(i,r,s,e,a)}}(),ene=function(){const e=Bu();return function(t,i,r,s){return kr(t,i,xCe(e,r,s,1))}}(),tne=function(){const e=Bu();return function(t,i,r,s){return kr(t,i,Ij(e,r,s,1))}}(),II=function(){const e=Xt(),t=Bu();return function(i,r,s){Ur(i,r);const n=_0(r),o=i.targetGeometry;return EI(t,Mj(r)),_j(t,t,zS(n,n)),kr(e,s,t),o.x+=e[0],o.y+=e[1],i}}();function xf(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function LCe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function kCe(e,t,i,r,s,n){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function PCe(e,t){return new Float32Array(e,t,6)}function ine(e,t,i,r){const s=t[r],n=t[r+1];e[r]=i[0]*s+i[2]*n+i[4],e[r+1]=i[1]*s+i[3]*n+i[5]}function rne(e,t,i,r=0,s=0,n=2){const o=s||t.length/n;for(let a=r;a<o;a++)ine(e,t,i,a*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:LCe,create:xf,createView:PCe,fromValues:kCe,transform:ine,transformMany:rne},Symbol.toStringTag,{value:"Module"}));function DCe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function jCe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function sne(e,t,i,r,s,n,o,a,u,c){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=u,e[8]=c,e}function nne(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function VCe(e,t){if(e===t){const i=t[1],r=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function zCe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],p=h*o-a*c,m=-h*n+a*u,y=c*n-o*u;let g=i*p+r*m+s*y;return g?(g=1/g,e[0]=p*g,e[1]=(-h*r+s*c)*g,e[2]=(a*r-s*o)*g,e[3]=m*g,e[4]=(h*i-s*u)*g,e[5]=(-a*i+s*n)*g,e[6]=y*g,e[7]=(-c*i+r*u)*g,e[8]=(o*i-r*n)*g,e):null}function UCe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8];return e[0]=o*h-a*c,e[1]=s*c-r*h,e[2]=r*a-s*o,e[3]=a*u-n*h,e[4]=i*h-s*u,e[5]=s*n-i*a,e[6]=n*c-o*u,e[7]=r*u-i*c,e[8]=i*o-r*n,e}function qCe(e){const t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],o=e[5],a=e[6],u=e[7],c=e[8];return t*(c*n-o*u)+i*(-c*s+o*a)+r*(u*s-n*a)}function Cj(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],p=t[8],m=i[0],y=i[1],g=i[2],v=i[3],b=i[4],w=i[5],_=i[6],S=i[7],T=i[8];return e[0]=m*r+y*o+g*c,e[1]=m*s+y*a+g*h,e[2]=m*n+y*u+g*p,e[3]=v*r+b*o+w*c,e[4]=v*s+b*a+w*h,e[5]=v*n+b*u+w*p,e[6]=_*r+S*o+T*c,e[7]=_*s+S*a+T*h,e[8]=_*n+S*u+T*p,e}function rk(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],p=t[8],m=i[0],y=i[1];return e[0]=r,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=u,e[6]=m*r+y*o+c,e[7]=m*s+y*a+h,e[8]=m*n+y*u+p,e}function one(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],u=t[5],c=t[6],h=t[7],p=t[8],m=Math.sin(i),y=Math.cos(i);return e[0]=y*r+m*o,e[1]=y*s+m*a,e[2]=y*n+m*u,e[3]=y*o-m*r,e[4]=y*a-m*s,e[5]=y*u-m*n,e[6]=c,e[7]=h,e[8]=p,e}function GCe(e,t,i){const r=i[0],s=i[1],n=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=n*t[6],e[7]=n*t[7],e[8]=n*t[8],e}function BCe(e,t,i){const r=i[0],s=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function HCe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function WCe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ZCe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function JCe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function YCe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=i+i,a=r+r,u=s+s,c=i*o,h=r*o,p=r*a,m=s*o,y=s*a,g=s*u,v=n*o,b=n*a,w=n*u;return e[0]=1-p-g,e[3]=h-w,e[6]=m+b,e[1]=h+w,e[4]=1-c-g,e[7]=y-v,e[2]=m-b,e[5]=y+v,e[8]=1-c-p,e}function QCe(e,t){const i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],a=t[6],u=t[8],c=t[9],h=t[10],p=h*o-a*c,m=-h*n+a*u,y=c*n-o*u,g=i*p+r*m+s*y;if(!g)return null;const v=1/g;return e[0]=p*v,e[1]=(-h*r+s*c)*v,e[2]=(a*r-s*o)*v,e[3]=m*v,e[4]=(h*i-s*u)*v,e[5]=(-a*i+s*n)*v,e[6]=y*v,e[7]=(-c*i+r*u)*v,e[8]=(o*i-r*n)*v,e}function XCe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],p=t[9],m=t[10],y=t[11],g=t[12],v=t[13],b=t[14],w=t[15],_=i*a-r*o,S=i*u-s*o,T=i*c-n*o,E=r*u-s*a,A=r*c-n*a,C=s*c-n*u,O=h*v-p*g,U=h*b-m*g,V=h*w-y*g,H=p*b-m*v,te=p*w-y*v,ye=m*w-y*b;let ce=_*ye-S*te+T*H+E*V-A*U+C*O;return ce?(ce=1/ce,e[0]=(a*ye-u*te+c*H)*ce,e[1]=(u*V-o*ye-c*U)*ce,e[2]=(o*te-a*V+c*O)*ce,e[3]=(s*te-r*ye-n*H)*ce,e[4]=(i*ye-s*V+n*U)*ce,e[5]=(r*V-i*te-n*O)*ce,e[6]=(v*C-b*A+w*E)*ce,e[7]=(b*T-g*C-w*S)*ce,e[8]=(g*A-v*T+w*_)*ce,e):null}function KCe(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function e3e(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function t3e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function i3e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function ane(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function r3e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function s3e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function n3e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function o3e(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8],p=t[0],m=t[1],y=t[2],g=t[3],v=t[4],b=t[5],w=t[6],_=t[7],S=t[8],T=hs();return Math.abs(i-p)<=T*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(r-m)<=T*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(s-y)<=T*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(n-g)<=T*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-v)<=T*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-b)<=T*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(u-w)<=T*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-_)<=T*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(h-S)<=T*Math.max(1,Math.abs(h),Math.abs(S))}function a3e(e){const t=hs(),i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8];return Math.abs(1-(i*i+n*n+u*u))<=t&&Math.abs(1-(r*r+o*o+c*c))<=t&&Math.abs(1-(s*s+a*a+h*h))<=t}const l3e=Cj,u3e=ane;Object.freeze(Object.defineProperty({__proto__:null,add:i3e,adjoint:UCe,copy:jCe,determinant:qCe,equals:o3e,exactEquals:n3e,frob:t3e,fromMat2d:JCe,fromMat4:DCe,fromQuat:YCe,fromRotation:WCe,fromScaling:ZCe,fromTranslation:HCe,identity:nne,invert:zCe,isOrthoNormal:a3e,mul:l3e,multiply:Cj,multiplyScalar:r3e,multiplyScalarAndAdd:s3e,normalFromMat4:XCe,normalFromMat4Legacy:QCe,projection:KCe,rotate:one,scale:GCe,scaleByVec2:BCe,set:sne,str:e3e,sub:u3e,subtract:ane,translate:rk,transpose:VCe},Symbol.toStringTag,{value:"Module"}));function p$(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function c3e(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function d3e(e,t,i,r,s,n,o,a,u){const c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=i,c[3]=r,c[4]=s,c[5]=n,c[6]=o,c[7]=a,c[8]=u,c}function h3e(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:c3e,create:p$,createView:h3e,fromValues:d3e},Symbol.toStringTag,{value:"Module"}));function T1(){return new Float32Array(2)}function p3e(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Qf(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function f3e(e,t){return new Float32Array(e,t,2)}function lne(){return T1()}function une(){return Qf(1,1)}function cne(){return Qf(1,0)}function dne(){return Qf(0,1)}const m3e=lne(),y3e=une(),g3e=cne(),v3e=dne();Object.freeze(Object.defineProperty({__proto__:null,ONES:y3e,UNIT_X:g3e,UNIT_Y:v3e,ZEROS:m3e,clone:p3e,create:T1,createView:f3e,fromValues:Qf,ones:une,unitX:cne,unitY:dne,zeros:lne},Symbol.toStringTag,{value:"Module"}));function w3e(e){return e instanceof Float32Array&&e.length>=2}function b3e(e){return Array.isArray(e)&&e.length>=2}function Y3(e){return w3e(e)||b3e(e)}var sk;const kl=[0,0];let Xl=sk=class extends P{constructor(e){super(e),this._viewpoint2D={center:Xt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new gt,this.id=0,this.inverseTransform=Bu(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Bu(),this.transformNoRotation=Bu(),this.displayMat3=p$(),this.displayViewMat3=p$(),this.viewMat3=p$(),this.viewMat2d=xf(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=Ur(i,e.viewpoint),this._set("size",Pg(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new sk({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return Y3(t)?kr(e,t,this.inverseTransform):(kl[0]=t,kl[1]=i,kr(e,kl,this.inverseTransform))}toScreen(e,t,i){return Y3(t)?kr(e,t,this.transform):(kl[0]=t,kl[1]=i,kr(e,kl,this.transform))}toScreenNoRotation(e,t,i){return Y3(t)?kr(e,t,this.transformNoRotation):(kl[0]=t,kl[1]=i,kr(e,kl,this.transformNoRotation))}wrapMapCoordinate(e,t){Pg(e,t);const[i]=t,[r]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:a}=s;if(n.isWrappable){const u=Xse(n)/2;o=Math.max(o,r-u),a=Math.min(a,r+u)}return(i<o||i>a)&&(e[0]=xj(i,r,n)),e}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return Aj(e,i,s,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new Bi({targetGeometry:new Se(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",o),!n||!t||!i)return;this.resolution=_0(o),this.rotation=r,this.scale=i,this.spatialReference=t,Pg(this.center,e);const a=n[0]!==0?2/n[0]:0,u=n[1]!==0?-2/n[1]:0;sne(this.displayMat3,a,0,0,0,u,0,-1,1,1);const c=nne(this.viewMat3),h=Qf(n[0]/2,n[1]/2),p=Qf(-n[0]/2,-n[1]/2),m=Q4(r);rk(c,c,h),one(c,c,m),rk(c,c,p),Cj(this.displayViewMat3,this.displayMat3,c);const y=Sj(this.viewMat2d,h);return kv(y,y,m),sh(y,y,p),SCe(this.extent,o,n),Ij(this.transform,o,n,s),bj(this.inverseTransform,this.transform),ACe(this.transformNoRotation,o,n,s),this.worldScreenWidth=ICe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};l([d({readOnly:!0})],Xl.prototype,"id",void 0),l([d({value:1,json:{write:!0}})],Xl.prototype,"pixelRatio",null),l([d({json:{write:!0}})],Xl.prototype,"size",null),l([d()],Xl.prototype,"spatialReference",void 0),l([d({type:Bi,json:{write:!0}})],Xl.prototype,"viewpoint",null),l([d({readOnly:!0})],Xl.prototype,"visibleArea",null),Xl=sk=l([x("esri.views.2d.ViewState")],Xl);const uq=Xl;var nk,ok;let Su=nk=class extends se{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new nk({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([d()],Su.prototype,"left",void 0),l([d()],Su.prototype,"top",void 0),l([d()],Su.prototype,"right",void 0),l([d()],Su.prototype,"bottom",void 0),Su=nk=l([x("esri.views.2d.PaddedViewState.Padding")],Su);let ny=ok=class extends uq{constructor(...e){super(...e),this.paddedViewState=new uq,this._updateContent=(()=>{const t=Xt();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;ci(t,r.left+r.right,r.top+r.bottom),_1(t,i,t),Pg(s.size,t);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(G(()=>[this.size,this.padding],()=>this._updateContent(),So)),this.padding=new Su,this.size=[0,0]}set padding(e){this._set("padding",e||new Su)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const i=this._get("padding");i&&(t=OCe(e.clone(),e,this._get("size"),i));const{targetGeometry:r,rotation:s,scale:n}=t,{x:o,y:a,spatialReference:u}=r,c=this._viewpoint2D;c.center[0]=o,c.center[1]=a,c.rotation=s,c.scale=n,c.spatialReference=u,this._update()}}clone(){return new ok({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([d()],ny.prototype,"paddedViewState",void 0),l([d({type:Su})],ny.prototype,"padding",null),l([d()],ny.prototype,"viewpoint",null),ny=ok=l([x("esri.views.2d.PaddedViewState")],ny);const Oj=ny;var gr;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(gr||(gr={}));const hne=Symbol("Yield");let _3e=class{constructor(){this._tasks=new Array,this._runningTasks=Fv(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return hne;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,i,r){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.push(new cq(s,n,t,i,r))).finally(()=>--this._runningTasks.value)}unshift(t,i,r){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.unshift(new cq(s,n,t,i,r))).finally(()=>--this._runningTasks.value)}_process(t){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const s=En(i.signal);if(s&&!i.abortCallback)i.reject(mt());else{const n=s?(r=i.abortCallback)==null?void 0:r.call(i,mt()):i.callback(t);xl(n)?n.then(i.resolve,i.reject):i.resolve(n)}}catch(s){i.reject(s)}return!0}cancelAll(){const t=mt();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(t);i.resolve(r)}else i.reject(t);this._tasks.length=0}},cq=class{constructor(t,i,r,s=void 0,n=void 0){this.resolve=t,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=n}},lb=class extends se{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};l([d()],lb.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),l([d()],lb.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),lb=l([x("esri.views.support.debugFlags")],lb);const S3e=new lb;function T3e(){return new LM.Scheduler}var Ne;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(Ne||(Ne={}));const Jn=0,dq=new Map([[Ne.RESOURCE_CONTROLLER_IMMEDIATE,Jn],[Ne.RESOURCE_CONTROLLER,4],[Ne.SLIDE,Jn],[Ne.STREAM_DATA_LOADER,Jn],[Ne.ELEVATION_QUERY,Jn],[Ne.TERRAIN_SURFACE,1],[Ne.SURFACE_GEOMETRY_UPDATES,1],[Ne.LOD_RENDERER,2],[Ne.GRAPHICS_CORE,2],[Ne.I3S_CONTROLLER,2],[Ne.POINT_CLOUD_LAYER,2],[Ne.FEATURE_TILE_FETCHER,2],[Ne.CLOUDS_GENERATOR,2],[Ne.OVERLAY,4],[Ne.STAGE,4],[Ne.GRAPHICS_DECONFLICTOR,4],[Ne.FILTER_VISIBILITY,4],[Ne.SCALE_VISIBILITY,4],[Ne.FRUSTUM_VISIBILITY,4],[Ne.POINT_OF_INTEREST_FREQUENT,6],[Ne.POINT_OF_INTEREST_INFREQUENT,30],[Ne.LABELER,8],[Ne.FEATURE_QUERY_ENGINE,8],[Ne.FEATURE_TILE_TREE,16],[Ne.FEATURE_TILE_TREE_ACTIVE,Jn],[Ne.ELEVATION_ALIGNMENT,12],[Ne.ELEVATION_ALIGNMENT_SCENE,14],[Ne.TEXT_TEXTURE_ATLAS,12],[Ne.TEXTURE_UNLOAD,12],[Ne.LINE_OF_SIGHT_TOOL,16],[Ne.LINE_OF_SIGHT_TOOL_INTERACTIVE,Jn],[Ne.SNAPPING,Jn],[Ne.SHADOW_ACCUMULATOR,30],[Ne.MAPVIEW_FETCH_QUEUE,Jn],[Ne.MAPVIEW_LAYERVIEW_UPDATE,2],[Ne.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Jn]]);function hq(e){return dq.has(e)?dq.get(e):typeof e=="number"?e:1}const x3e=6.5,pq=1,$3e=30,E3e=1e3/30,M3e=100,fq=.9;var LM,Ph;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(n=>n.needsUpdate)}constructor(){this._updating=Fv(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new d_("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=gr.INTERACTING,this._tasks=new bf,this._runQueue=new bf,this._load=0,this._idleStateCallbacks=new bf,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=G(()=>S3e.SCHEDULER_LOG_SLOW_TASKS,n=>this._debug=n,xe);for(const n of Object.keys(Ne))this.performanceInfo.tasks.set(Ne[n],new d_(Ne[n]))}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),kt(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(n){this._updatingChanged(),n&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(n,o){const a=new i(this,n,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new d_(n)),a}registerIdleStateCallbacks(n,o){const a={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(a),this.state===gr.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const u=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(c){u._idleUpdatesStartFired&&(a.idleEnd(),u._state===gr.IDLE&&c()),a.idleBegin=c},set idleEnd(c){a.idleEnd=c}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==gr.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}frame(n){this._startFrameTaskTimes();const o=this._updateBudget(n);if(o){const a=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-a)}else this._recordFrameTaskTimes(0);return o}_updateBudget(n){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=x3e,a=n.frameDuration,u=pq;switch(this.state){case gr.IDLE:o=0,a=Math.max(M3e,n.frameDuration),u=$3e;break;case gr.INTERACTING:a=Math.max(E3e,n.frameDuration);case gr.ANIMATING:}return a=a-n.elapsedFrameTime-o,this.state!==gr.IDLE&&a<pq&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,u),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case gr.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case gr.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n),this._updatingChanged()}_updateTask(n){this._tasks.forAll(o=>{o.name===n&&o.setPriority(n)})}_getState(n){if(this._runQueue.some(a=>a.name===n))return Ph.SCHEDULED;let o=Ph.IDLE;return this._tasks.forAll(a=>{a.name===n&&a.needsUpdate&&(a.schedulePriority<=1?o=Ph.READY:o!==Ph.READY&&(o=Ph.WAITING))}),o}_getRuntime(n){let o=0;return this._tasks.forAll(a=>{a.name===n&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&n.set(a.name,(n.get(a.name)||0)+1)}),n.size===0)return null;let o="";return n.forEach((a,u)=>{o+=a>1?` ${a}x ${u}`:` ${u}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*fq+n*(1-fq)}_schedule(){for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===Jn&&n.needsUpdate&&!this._runQueue.includes(n)&&n.blockFrame!==this._frameNumber&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==Jn&&a.blockFrame!==this._frameNumber&&(n=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!n)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const n=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===hne&&(o.blockFrame=this._frameNumber)}catch(u){q.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,u),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,Ne.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const a=this._budget.now()-n;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const n of Object.keys(Ne))this._frameTaskTimes.set(Ne[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(n)}get test(){return this._test}}e.Scheduler=t;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(n,o,a){this._scheduler=n,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new _3e,this._handles=new e0,this._basePriority=hq(o),this.schedulePriority=this._basePriority,this._task=Fv(a??this._queue),this._handles.add(Fi(()=>this.task.running,u=>n.taskRunningChanged(u)))}remove(){this.processQueue(pne),this._scheduler.removeTask(this),this.schedule=mq.schedule,this.reschedule=mq.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){if(this.name===n)return;this.name=n;const o=hq(n);this._basePriority!==Jn&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,a){return this._queue.push(n,o,a)}reschedule(n,o,a){return this._queue.unshift(n,o,a)}processQueue(n){return this._queue.runTask(n)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=gr.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(n){return!this.done&&(n()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n,o){this._begin=this.now(),this._budget=n,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=r})(LM||(LM={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Ph||(Ph={}));const pne=(()=>{const e=new LM.Budget;return e.enabled=!1,e})();let A3e=class{remove(){}processQueue(){}schedule(t,i,r){try{if(En(i)){const s=mt();return r?Promise.resolve(r(s)):Promise.reject(s)}return yF(t(pne))}catch(s){return Promise.reject(s)}}reschedule(t,i,r){return this.schedule(t,i,r)}};const mq=new A3e;let I3e=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=T3e(),this._schedulerHandle=Fi(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||xl(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var a,u,c;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:r,graphicsView:s,labelManager:n,state:{id:o}}=this.view;r==null||r.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),(u=this.view.graphicsTileStore)==null||u.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=gr.ANIMATING:this.view.interacting?this._scheduler.state=gr.INTERACTING:this._scheduler.state=gr.IDLE,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==gr.IDLE||((c=this._frameTaskHandle)==null||c.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new Oj,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=G(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=bv(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var s;if(!t.attached)return void this.requestUpdate();const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((s=t.layerViews)==null||s.forEach(this._updateLayerView,this))}},Zc=class extends f0{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Bs(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new M("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,i){i||(i=xl(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",i)}};l([d({readOnly:!0})],Zc.prototype,"done",null),l([d({readOnly:!0,type:String})],Zc.prototype,"state",void 0),l([d()],Zc.prototype,"target",void 0),Zc=l([x("esri.views.ViewAnimation")],Zc),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Zc||(Zc={}));const ak=Zc;let f$=class extends se{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,i){if(!t)return void q.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new ak;this.view.animation=r,await vl(()=>this.view.ready,i);const s={...i,animate:(i==null?void 0:i.animate)??!gj(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:n,spatialReference:o,size:a,viewpoint:u,constraints:c,padding:h,allLayerViews:p}=this.view,m=bCe(t,{extent:n,spatialReference:o,size:a,viewpoint:u,constraints:c,padding:h,allLayerViews:p,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(m),this._gotoTask={},s.animate?this._gotoAnimated(m,s):this._gotoImmediate(m,s)}_gotoImmediate(t,i){const r=this._gotoTask,s=this.view.animation,n=t.then(o=>{if(Fe(i),r!==this._gotoTask)throw new M("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(r,s,n,i)}_gotoAnimated(t,i){const r=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=t.then(o=>{if(Fe(i),r!==this._gotoTask)throw new M("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,i),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,s,n,i)}_cancellableGoTo(t,i,r,s){const n=()=>t===this._gotoTask;return U5(r,s).finally(()=>{n()&&(i.done||i.stop())})}};l([d({constructOnly:!0})],f$.prototype,"view",void 0),f$=l([x("esri.views.2d.GoToManager")],f$);function C3e(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let s,n,o,a;const u=[0,0],c=O3e(e);for(let m=0;m<c.length;m++){const y=c[m];for(let g=0;g<y.length-1;g++){Zwe(u,r,y,g);const v=$I(r,u);(s==null||v<s)&&(s=v,n=[...u],o=m,a=g)}}if(s==null||!n||o==null||a==null)throw new M("nearest-coordinate:failed","Failed to find the nearest coordinate");const[h,p]=n;return{coordinate:new Se({x:h,y:p,spatialReference:i}),distance:s}}function O3e(e){switch(e.type){case"extent":return[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]];case"polygon":return e.rings;case"polyline":return e.paths}}var lk;let Wp=lk=class extends ac.NumericIdentifiableMixin(se){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return oc(this.geometry,this.spatialReference)}catch(e){return q.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?wS(this.normalizedGeometry,i):b4(this.normalizedGeometry,i))return e;const{coordinate:r}=C3e(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new lk({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};l([d({constructOnly:!0})],Wp.prototype,"geometry",void 0),l([d({readOnly:!0})],Wp.prototype,"normalizedGeometry",null),l([d({constructOnly:!0})],Wp.prototype,"spatialReference",void 0),Wp=lk=l([x("esri.views.2d.constraints.GeometryConstraint")],Wp);var uk;let ub=uk=class extends ac.NumericIdentifiableMixin(se){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new uk({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([d()],ub.prototype,"enabled",void 0),l([d()],ub.prototype,"rotationEnabled",void 0),ub=uk=l([x("esri.views.2d.constraints.RotationConstraint")],ub);const fne=ub;var ck;let Ss=ck=class extends ac.NumericIdentifiableMixin(se){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:s,maxZoom:n}=this,o=-1,a=-1,u=!1,c=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(t!=null&&t.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(h=>h.clone()),t.sort((h,p)=>p.scale-h.scale),t.forEach((h,p)=>h.level=p);for(const h of t)!u&&i>0&&i>=h.scale&&(o=h.level,u=!0),!c&&r>0&&r>=h.scale&&(a=e?e.level:-1,c=!0),e=h;s===-1&&(s=i===0?0:o),n===-1&&(n=r===0?t.length-1:a),s=Math.max(s,0),s=Math.min(s,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),s>n&&([s,n]=[n,s]),i=t[s].scale,r=t[n].scale,t.splice(0,s),t.splice(n-s+1,t.length),t.forEach((h,p)=>{this._lodByScale[h.scale]=h,this._scales[p]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=e.targetGeometry,n=t&&t.targetGeometry,o=r!==0&&e.scale<r,a=i!==0&&e.scale>i;if(o||a){const u=a?i:r;if(t&&n){const c=(u-t.scale)/(e.scale-t.scale);s.x=n.x+(s.x-n.x)*c,s.y=n.y+(s.y-n.y)*c}e.scale=u}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.floor(e),r=Math.ceil(e);return t[i]+(e-i)*(t[r]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(i=t[s],r=t[s+1],r===e)return s+this.effectiveMinZoom+1;if(i>e&&r<e)return s+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new ck({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};l([d({readOnly:!0})],Ss.prototype,"effectiveLODs",void 0),l([d({readOnly:!0})],Ss.prototype,"effectiveMinZoom",void 0),l([d({readOnly:!0})],Ss.prototype,"effectiveMaxZoom",void 0),l([d({readOnly:!0})],Ss.prototype,"effectiveMinScale",void 0),l([d({readOnly:!0})],Ss.prototype,"effectiveMaxScale",void 0),l([d()],Ss.prototype,"lods",void 0),l([d()],Ss.prototype,"minZoom",void 0),l([d()],Ss.prototype,"maxZoom",void 0),l([d()],Ss.prototype,"minScale",void 0),l([d()],Ss.prototype,"maxScale",void 0),l([d()],Ss.prototype,"snapToZoom",void 0),Ss=ck=l([x("esri.views.2d.constraints.ZoomConstraint")],Ss);const mne=Ss,R3e={base:null,key:"type",typeMap:{extent:gt,polygon:To}};let si=class extends se{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Q}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,i,r;return`${(t=this._zoom)==null?void 0:t.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===t.spatialReference?t:new Wp({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new fne({rotationEnabled:this.rotationEnabled})}get _zoom(){var u;const t=this._get("_zoom"),i=this.lods||((u=this.view)==null?void 0:u.constraintsInfo.lods),r=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===i&&t.minZoom===r&&t.maxZoom===s&&t.minScale===n&&t.maxScale===o&&t.snapToZoom===a?t:new mne({lods:i,minZoom:r,maxZoom:s,minScale:n,maxScale:o,snapToZoom:a})}canZoomInTo(t){const i=this.effectiveMaxScale;return i===0||t>=i}canZoomOutTo(t){const i=this.effectiveMinScale;return i===0||t<=i}constrain(t,i){return this._zoom.constrain(t,i),this._rotation.constrain(t,i),this._geometry.constrain(t,i),this.customConstraints.forEach(r=>r.constrain(t,i)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};l([d({readOnly:!0})],si.prototype,"effectiveLODs",null),l([d({readOnly:!0})],si.prototype,"effectiveMinScale",null),l([d({readOnly:!0})],si.prototype,"effectiveMaxScale",null),l([d({readOnly:!0})],si.prototype,"effectiveMinZoom",null),l([d({readOnly:!0})],si.prototype,"effectiveMaxZoom",null),l([d({types:R3e,value:null})],si.prototype,"geometry",null),l([d({type:[fd]})],si.prototype,"lods",void 0),l([d()],si.prototype,"minScale",void 0),l([d()],si.prototype,"maxScale",void 0),l([d()],si.prototype,"minZoom",void 0),l([d()],si.prototype,"maxZoom",void 0),l([d()],si.prototype,"rotationEnabled",void 0),l([d()],si.prototype,"snapToZoom",void 0),l([d({type:Q})],si.prototype,"customConstraints",void 0),l([d()],si.prototype,"view",void 0),l([d({readOnly:!0})],si.prototype,"version",null),l([d({type:Wp,readOnly:!0})],si.prototype,"_geometry",null),l([d({type:fne})],si.prototype,"_rotation",null),l([d({readOnly:!0,type:mne})],si.prototype,"_zoom",null),si=l([x("esri.views.2d.MapViewConstraints")],si);const yq=si;let Rr=class extends se{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([G(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},So)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Se({x:t[0],y:t[1],spatialReference:i})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let i;try{i=this._project(t,this.state.spatialReference)}catch(s){return void q.getLogger(this).error(new M("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:s}))}const r=this.viewpoint;ik(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void q.getLogger(this).error(new M("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(t,this.state.spatialReference)}catch(s){return void q.getLogger(this).error(new M("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const r=this.viewpoint;TCe(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const i=this.viewpoint;FCe(i,i,t),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;lq(i,i,t),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var n;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?r=new M("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(r=new M("mapview:invalid-viewpoint","geometry not defined"))}catch(o){r=new M("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(r)return void q.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const s=new Bi({targetGeometry:new Se,scale:0,rotation:0});Ur(s,i),(n=this.constraints)==null||n.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var s,n;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((s=this.constraints)==null?void 0:s.zoomToScale(t))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;lq(r,r,i),this.viewpoint=r,this._set("zoom",((n=this.constraints)==null?void 0:n.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),u=this._get("viewpoint"),c=this._get("zoom"),h=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let p,m,y;const g=u==null?void 0:u.rotation,v=u==null?void 0:u.targetGeometry;(v==null?void 0:v.type)==="extent"?p=v:(v==null?void 0:v.type)==="point"&&(m=v,y=u==null?void 0:u.scale);const b=n??p;return{center:s??m??(b==null?void 0:b.center),rotation:a??g,scale:(o??h??y??(b&&AI(b,[t[0]-i.left-i.right,t[1]-i.top-i.bottom])))||void 0}}startup(t,i,r,s){var o;const n=t.targetGeometry;try{this._project(t,r)}catch(a){q.getLogger(this).warn(new bo("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:r,error:a})),t.targetGeometry=s||new Se({x:0,y:0,spatialReference:r})}(o=this.constraints)==null||o.fit(t),this._set("state",new Oj({padding:this.padding,size:i,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,i],spatialReference:r,rotation:s,scale:n}=this.state.paddedViewState,o=new Se({x:t,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(t){var u;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const c=i.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=c}const r=i.clone(),[s,n]=i.center;let o=null;try{o=this._project(new Se({x:s,y:n,spatialReference:i.spatialReference}),t)}catch(c){m4()||q.getLogger(this).warn(new bo("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:c}))}o||(o=new Se({x:0,y:0,spatialReference:t}));const a=ik(new Bi({targetGeometry:new Se,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const h=[i.size[0]/2,i.size[1]/2],p=[h[0]+20,h[1]],m=i.toMap([0,0],p),{x:y,y:g}=this._project(new Se({x:m[0],y:m[1],spatialReference:i.spatialReference}),t);m[0]=y,m[1]=g,r.toScreen(m,m);const v=CCe(h,m,p),b=Math.hypot(m[0]-h[0],m[1]-h[1])/20;!Number.isFinite(b)||Math.abs(b)>4?(a.rotation=0,a.targetGeometry=new Se({x:0,y:0,spatialReference:t})):(a.scale*=b,a.scale>D("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}(u=this._get("constraints"))==null||u.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,i){var o;if(!this.ready)return;const r=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();r.size=[t,i],RCe(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=((o=this.constraints)==null?void 0:o.constrain(s,void 0))??s,this.state.viewpoint=s}toMap(t){if(!this.ready)return null;const i=[0,0],[r,s]=this.state.toMap(i,[t.x,t.y]),n=this.state.spatialReference;return new Se({x:r,y:s,spatialReference:n})}toScreen(t,i){if(!this.ready)return null;const r=this._project(t,this.state.spatialReference),s=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),lr(s[0],s[1])}_project(t,i){var n;const r=(t==null?void 0:t.targetGeometry)||t;if(!i)return t;if(!r)return null;if(i.imageCoordinateSystem||(n=r.spatialReference)!=null&&n.imageCoordinateSystem||ei(i,r.spatialReference))return t;const s=oc(r,i);if(!s)throw new M("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return F3e(t)?(t.targetGeometry=s,t):s}};function F3e(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}l([d({type:Se})],Rr.prototype,"center",null),l([d()],Rr.prototype,"constraints",void 0),l([d({type:gt})],Rr.prototype,"extent",null),l([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Rr.prototype,"padding",null),l([d()],Rr.prototype,"ready",void 0),l([d()],Rr.prototype,"resizeAlign",void 0),l([d({readOnly:!0})],Rr.prototype,"resolution",null),l([d({type:Number})],Rr.prototype,"rotation",null),l([d({type:Number})],Rr.prototype,"scale",null),l([d({readOnly:!0})],Rr.prototype,"state",void 0),l([d({type:Bi})],Rr.prototype,"viewpoint",null),l([d({readOnly:!0})],Rr.prototype,"visibleArea",null),l([d()],Rr.prototype,"zoom",null),Rr=l([x("esri.views.2d.ViewStateManager")],Rr);function yne(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}function gne(e,t){return t.some(i=>yne(e,i))}function gq(e,{dragPrimary:t,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:t},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(s=>s.value===e).map(s=>s.key)}let vq=class extends Zi{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){yne(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},N3e=class extends Zi{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:s,delta:n}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{const{scale:u}=o;this._startScale=u,this._currentScale=u,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const u=1.015**n.y,c=this._startScale*u,h=c/this._currentScale;a.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:u}=o,{effectiveLODs:c,snapToZoom:h}=u;if(!h||!c)return void a.end();const p=u.snapScale(this._currentScale),m=(n.y>0?Math.max(p,u.snapToPreviousScale(this._startScale)):Math.min(p,u.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}},CI=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var i,r;this._startEvent=t,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},L3e=class extends Zi{constructor(t,i,r){super(!0),this.view=t,this.pointerActions=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new CI({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&gne(r.data,this.pointerActions)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},k3e=class extends Zi{constructor(t,i,r){super(!0),this._view=t,this.pointerActions=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new CI({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&gne(o.data,this.pointerActions)}),this.registerIncoming("drag",r,n=>this._dragEventSeparator.handle(n))}};function vne(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function P3e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function D3e(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function j3e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function wne(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function bne(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function _ne(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function V3e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function z3e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function U3e(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function q3e(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function G3e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function B3e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function H3e(e,t=0,i=1){return e[0]=Math.min(Math.max(e[0],t),i),e[1]=Math.min(Math.max(e[1],t),i),e[2]=Math.min(Math.max(e[2],t),i),e}function W3e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Sne(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Z3e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function Tne(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}function xne(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return i*i+r*r+s*s}function $ne(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function J3e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Y3e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function dk(e,t){const i=t[0],r=t[1],s=t[2];let n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function Ene(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Q3e(e,t,i){const r=t[0],s=t[1],n=t[2],o=i[0],a=i[1],u=i[2];return e[0]=s*u-n*a,e[1]=n*o-r*u,e[2]=r*a-s*o,e}function X3e(e,t,i){const r=t[0],s=t[1],n=t[2],o=i[0],a=i[1],u=i[2],c=s*u-n*a,h=n*o-r*u,p=r*a-s*o,m=Math.sqrt(c*c+h*h+p*p);return e[0]=c/m,e[1]=h/m,e[2]=p/m,e}function K3e(e,t,i,r){const s=t[0],n=t[1],o=t[2];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e[2]=o+r*(i[2]-o),e}function eOe(e,t,i,r,s,n){const o=n*n,a=o*(2*n-3)+1,u=o*(n-2)+n,c=o*(n-1),h=o*(3-2*n);return e[0]=t[0]*a+i[0]*u+r[0]*c+s[0]*h,e[1]=t[1]*a+i[1]*u+r[1]*c+s[1]*h,e[2]=t[2]*a+i[2]*u+r[2]*c+s[2]*h,e}function tOe(e,t,i,r,s,n){const o=1-n,a=o*o,u=n*n,c=a*o,h=3*n*a,p=3*u*o,m=u*n;return e[0]=t[0]*c+i[0]*h+r[0]*p+s[0]*m,e[1]=t[1]*c+i[1]*h+r[1]*p+s[1]*m,e[2]=t[2]*c+i[2]*h+r[2]*p+s[2]*m,e}function iOe(e,t=1){const i=dI,r=2*i()*Math.PI,s=2*i()-1,n=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(r)*n,e[1]=Math.sin(r)*n,e[2]=s*t,e}function rOe(e,t,i){const r=t[0],s=t[1],n=t[2];return e[0]=i[0]*r+i[4]*s+i[8]*n+i[12],e[1]=i[1]*r+i[5]*s+i[9]*n+i[13],e[2]=i[2]*r+i[6]*s+i[10]*n+i[14],e}function sOe(e,t,i){const r=t[0],s=t[1],n=t[2];return e[0]=r*i[0]+s*i[3]+n*i[6],e[1]=r*i[1]+s*i[4]+n*i[7],e[2]=r*i[2]+s*i[5]+n*i[8],e}function nOe(e,t,i){const r=i[0],s=i[1],n=i[2],o=i[3],a=t[0],u=t[1],c=t[2],h=s*c-n*u,p=n*a-r*c,m=r*u-s*a,y=s*m-n*p,g=n*h-r*m,v=r*p-s*h,b=2*o;return e[0]=a+h*b+2*y,e[1]=u+p*b+2*g,e[2]=c+m*b+2*v,e}function oOe(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[0],n[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),n[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function aOe(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),n[1]=s[1],n[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function lOe(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),n[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),n[2]=s[2],e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function uOe(e,t){dk(wq,e),dk(bq,t);const i=Ene(wq,bq);return i>1?0:i<-1?Math.PI:Math.acos(i)}const wq=$h(),bq=$h();function cOe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function dOe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function hOe(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],n=t[0],o=t[1],a=t[2],u=hs();return Math.abs(i-n)<=u*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=u*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-a)<=u*Math.max(1,Math.abs(s),Math.abs(a))}function pOe(e,t,i){const r=i[0]-t[0],s=i[1]-t[1],n=i[2]-t[2];let o=r*r+s*s+n*n;return o>0?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=s*o,e[2]=n*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const fOe=wne,mOe=bne,yOe=_ne,gOe=Tne,vOe=xne,wOe=vne,bOe=$ne;Object.freeze(Object.defineProperty({__proto__:null,abs:U3e,add:j3e,angle:uOe,bezier:tOe,ceil:V3e,clamp:H3e,copy:P3e,cross:Q3e,crossAndNormalize:X3e,direction:pOe,dist:gOe,distance:Tne,div:yOe,divide:_ne,dot:Ene,equals:hOe,exactEquals:dOe,floor:z3e,hermite:eOe,inverse:Y3e,len:wOe,length:vne,lerp:K3e,max:B3e,min:G3e,mul:mOe,multiply:bne,negate:J3e,normalize:dk,random:iOe,rotateX:oOe,rotateY:aOe,rotateZ:lOe,round:W3e,scale:Sne,scaleAndAdd:Z3e,set:D3e,sign:q3e,sqrDist:vOe,sqrLen:bOe,squaredDistance:xne,squaredLength:$ne,str:cOe,sub:fOe,subtract:wne,transformMat3:sOe,transformMat4:rOe,transformQuat:nOe},Symbol.toStringTag,{value:"Module"}));function Lo(e){let t=e*e;return e<0&&(t*=-1),t}function _Oe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function SOe(e,t,i){const r=i,s=e.state,n=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return n.deviceType==="standard"?(r.translation[0]=Lo(s.axes[0]),r.translation[1]=Lo(s.axes[1]),r.translation[2]=Lo(s.buttons[7])-Lo(s.buttons[6]),r.heading=Lo(s.axes[2]),r.tilt=Lo(s.axes[3])):n.deviceType==="spacemouse"&&(r.translation[0]=1.2*Lo(s.axes[0]),r.translation[1]=1.2*Lo(s.axes[1]),r.translation[2]=2*-Lo(s.axes[2]),r.heading=1.2*Lo(s.axes[5]),r.tilt=1.2*Lo(s.axes[3])),r.tilt*=o,Sne(r.translation,r.translation,a),r}function TOe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let xOe=class extends Zi{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new e0,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([G(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=bv({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},xe)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){var r;const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,_Oe(this._transformation)):(this._currentDevice=t.data.device,SOe(t.data,this._view.navigation.gamepad,this._transformation)),(r=this._frameTask)==null||r.resume())}_frameUpdate(t){var p;const i=this._transformation;if(TOe(i))return void((p=this._frameTask)==null?void 0:p.pause());const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=EOe*s*t;II(r,r,[i.translation[0]*n,-i.translation[1]*n]);const o=1+i.translation[2]*MOe*t,a=this._view.constraints.rotationEnabled?-i.heading*$Oe*t:0,u=this._view.size,c=[u[0]/2,u[1]];Kse(r,r,o,a,c,u);const h=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=h}};const $Oe=.06,EOe=.7,MOe=6e-4;function Mne(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),Ke(()=>document.removeEventListener("visibilitychange",t))}let AOe=class extends Zi{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,u=this._pressedKeys.size>0;a||u?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=Mne(s=>s?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const i=this._currentDirection!=null;if(t!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},IOe=class extends Zi{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=Mne(s=>s?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise"),this._addKeyMapping(t.counterClockwise,"counterClockwise"),this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,i){for(const r of t)this._keyToDirection.set(r,i)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(t.data.key);if(this._pressed=s!=null,this._pressed){if(t.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var cg;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(cg||(cg={}));let COe=class extends Zi{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=cg.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=cg.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:n}=this.view;let o=null;switch(s){case cg.IN:o=n.zoomIn();break;case cg.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}};const OOe=.6;let ROe=class extends Zi{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:n}=t.data,o=1/OOe**(1/60*n),a=i.zoom(o,[r,s]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},FOe=class extends Zi{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new CI({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function _q(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value||1:0),axes:t.axes.map(i=>kOe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function NOe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function LOe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function kOe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}let POe=class{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,a=o.index,u=this._inputDevices[a];u&&(this._emitGamepadEvent(o,_q(u),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(u),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(Sq(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new yj(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=bv({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;Sq(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],a=_q(n),u=r||LOe(a);o&&(o.timestamp===s.timestamp||!o.active&&u||NOe(o.state,a))||this._emitGamepadEvent(s,a,!u)})}_emitGamepadEvent(t,i,r){const s=this._latestUpdate[t.index],n=s&&s.active;if(!n&&!r)return;const o=!n&&r?"start":n&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:o})}};function DOe(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function Sq(e){for(const t of navigator.getGamepads())DOe(t)&&e(t)}const Tq=D("edge"),jOe=D("chrome"),VOe=D("ff"),zOe=D("safari"),xq="esri-view-surface",Em={touchNone:`${xq}--touch-none`,touchPan:`${xq}--touch-pan`};let Ane=class Ine{constructor(t,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new POe(t,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>this._releasePointerCaptureSafe(t)),this._activePointerCaptures.clear(),this._gamepadSource=St(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(Q3[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&Q3[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(Q3[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1)}setPointerCapture(t,i){i?this._setPointerCaptureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Em.touchNone:Em.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Em.touchPan:Em.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Em.touchNone),this._element.classList.remove(Em.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=bse(this._element,t);return Ine.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const{key:r}=i;r&&t==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&D("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:Tq&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}Tq?r*=.7:jOe||zOe?r*=.6:VOe&&(r*=1.375);const s=100,n=Math.abs(r);n>s&&(r=r/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,o)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};Ane.test={disableSubpixelCoordinates:!1};const Q3={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let UOe=class extends Zi{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const _r={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function kM(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function qOe(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function GOe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:lr()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[S,T]=e,[E,A]=[T.x-S.x,T.y-S.y];return t.radius=Math.sqrt(E*E+A*A)/2,t.center.x=(S.x+T.x)/2,t.center.y=(S.y+T.y)/2,t}let i=0,r=0;for(let S=0;S<e.length;S++)i+=e[S].x,r+=e[S].y;i/=e.length,r/=e.length;const s=e.map(S=>S.x-i),n=e.map(S=>S.y-r);let o=0,a=0,u=0,c=0,h=0,p=0,m=0;for(let S=0;S<s.length;S++){const T=s[S],E=n[S],A=T*T,C=E*E;o+=A,a+=C,u+=T*E,c+=A*T,h+=C*E,p+=T*C,m+=E*A}const y=.5*(c+p),g=.5*(h+m),v=o*a-u*u,b=(y*a-g*u)/v,w=(o*g-u*y)/v,_=lr(b+i,w+r);return{radius:Math.sqrt(b*b+w*w+(o+a)/e.length),center:_}}function $f(e){const{native:t}=e,{pointerId:i,button:r,pointerType:s}=t;return s==="mouse"?`${i}:${r}`:`${s}`}let BOe=class extends Zi{constructor(t=_r.maximumDoubleClickDelay,i=_r.maximumDoubleClickDistance,r=_r.maximumDoubleTouchDelay,s=_r.maximumDoubleTouchDistance,n=t0){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=lr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new CI({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=kt(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=kt(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:n}=r;this._dragStartCenter=n;const o=X3("begin",lr(0,0),r);this._doubleTapDrag.emit(o,void 0,s),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,n=X3("update",lr(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,n=X3("end",lr(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=$f(i),s=this._pointerState.get(r),{pointerType:n}=i.native;if(s){const o=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),kM(s.event.data,i)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,s=$f(i),n=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function X3(e,t,i){const{button:r,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:u}=i;return{action:e,delta:t,button:r,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:u}}let HOe=class extends Zi{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:WOe(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=m2(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const n=m$(s,Cne(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this._activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=m2(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=m2(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=m$(r,i)-t,r.lastAngle=m$(r,i)-t})}_emitEvent(t,i,r){const s=m2(this._activePointerMap);this._drag.emit(this._createPayload(t,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,s=t.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Cne(e){const t=[];return e.forEach(i=>{t.push(lr(i.event.x,i.event.y))}),GOe(t)}function m2(e){const t=Cne(e);let i=0;return e.forEach(r=>{let s=m$(r,t),n=s-r.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=r.lastAngle+n,r.lastAngle=s;const o=s-r.initialAngle;i+=o}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function WOe(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function m$(e,t){const i=e.event,r=i.x-t.center.x,s=i.y-t.center.y;return Math.atan2(s,r)}var $q;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})($q||($q={}));let ZOe=class extends Zi{constructor(t=_r.maximumDoubleClickDelay,i=_r.maximumDoubleClickDistance,r=_r.maximumDoubleTouchDelay,s=_r.maximumDoubleTouchDistance,n=t0){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=$f(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,r=$f(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const n=s.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),kM(n,t.data)>o?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,n.modifiers),this._removeState(i))):kM(s,t.data)>o?this._removeState(i):this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const i=$f(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},JOe=class extends Zi{constructor(t=_r.maximumClickDelay,i=_r.movementUntilMouseDrag,r=_r.movementUntilPenDrag,s=_r.movementUntilTouchDrag,n=_r.holdDelay,o=t0){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=s,this._holdDelay=n,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",a=>this._handlePointerDown(a)),this.registerIncoming("pointer-up",a=>this._handlePointerLoss(a,"pointer-up")),this.registerIncoming("pointer-capture-lost",a=>this._handlePointerLoss(a,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",a=>this._handlePointerLoss(a,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",a=>this._handlePointerMove(a)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=kt(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const n={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,n),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(y2("update",s,i),void 0,s.modifiers):qOe(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),s.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(y2("start",s,i)):this._pointerDrag.emit(y2("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,s=r.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(y2("end",n,i==="pointer-up"?r:n.previousEvent),void 0,n.modifiers):i==="pointer-up"&&n.downButton===r.native.button&&t.timestamp-n.startTimestamp<=this._maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function y2(e,t,i){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:i}}let YOe=class extends Zi{constructor(t=_r.maximumDoubleClickDelay,i=_r.maximumDoubleClickDistance,r=_r.maximumDoubleTouchDelay,s=_r.maximumDoubleTouchDistance,n=t0){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",o=>this._handleImmediateClick(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=kt(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=kt(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const i=t.data,{pointerType:r}=i.native,s=QOe(i);if(!this._pointerState.has(s))return void this._startClick(t);const n=this._pointerState.get(s),{data:o,modifiers:a}=n.event,u=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;kM(o,i)>u?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const i=$f(t.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:r}}=i,s=$f(i),n=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function QOe(e){const{pointerId:t,pointerType:i,button:r}=e.native;return i==="mouse"?`${t}:${r}`:`${i}`}const g2={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},Eq=Symbol("handles");let wp=class extends se{initialize(){const t=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([Fi(()=>!t(),()=>this._disconnect()),Fi(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(Eq),this._inputManager=St(this._inputManager)}_connect(){const t=this.view.surface,i=new Ane(t,this.view.input),r=[new ZOe,new JOe,new YOe,new HOe(this.view.navigation),new BOe],s=new Pn({eventSource:i,recognizers:r}),n=new L3e(this.view,["primary"]),o=new k3e(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new UOe],ih.INTERNAL),s.installHandlers("navigation",[new FOe(this.view),new xOe(this.view),new ROe(this.view),new vq(this.view),new vq(this.view,[g2.counter]),n,new AOe(this.view,g2.pan),new COe(this.view,g2.zoom),new IOe(this.view,g2.rotate),o,new N3e(this.view,"touch")],ih.INTERNAL),this.view.viewEvents.connect(s),this._source=i,this._inputManager=s,this.addHandles([G(()=>{var a,u;return(u=(a=this.view)==null?void 0:a.navigation)==null?void 0:u.browserTouchPanEnabled},a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},xe),G(()=>{const{actionMap:a}=this.view.navigation;return{panActions:gq("pan",a),rotateActions:gq("rotate",a)}},({panActions:a,rotateActions:u})=>{n.pointerActions=a,o.pointerActions=u},ns)],Eq)}get test(){}};l([d()],wp.prototype,"view",void 0),l([d()],wp.prototype,"latestPointerType",null),l([d()],wp.prototype,"latestPointerLocation",null),l([d()],wp.prototype,"multiTouchActive",null),wp=l([x("esri.views.2d.input.MapViewInputManager")],wp);const XOe=wp,Mq=160;let cb=class extends se{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Mq&&this.clear()},Mq))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};l([d()],cb.prototype,"_timer",void 0),l([d()],cb.prototype,"stationary",null),cb=l([x("esri.views.2d.support.StationaryManager")],cb);const KOe=e=>{let t=class extends e{constructor(...i){super(...i),this.fullOpacity=1,this.stateManager=new Rr({constraints:new yq({view:this})}),this.goToManager=new f$({view:this}),this.stationaryManager=new cb,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new I3e(this),this.inputManager=new XOe({view:this}),this.viewEvents=new wse(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([G(()=>this.viewpoint,()=>this.stationaryManager.flip(),So),this.on("resize",r=>this.stateManager.resize(r.width,r.height))])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var i;return((i=this.stateManager)==null?void 0:i.extent)??null}set extent(i){this.stateManager.extent=i}get state(){return this.stateManager.state}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}set animation(i){const r=this._get("animation");if(i===r)return;if(r&&r.stop(),i!==this.animationManager.animation&&this.animationManager.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i);const s=()=>{var n;this.destroyed||i===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame())};i.when(s,s)}get constraints(){var i;return(i=this.stateManager)==null?void 0:i.constraints}set constraints(i){i.view=this;const r=this.stateManager.constraints;this.stateManager.constraints=i,r==null||r.destroy()}get padding(){var i;return(i=this.stateManager)==null?void 0:i.padding}set padding(i){this.stateManager&&(this.stateManager.padding=i)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(i){this.stateManager.resizeAlign=i}get rotation(){return this.stateManager.rotation??0}set rotation(i){const{rotationEnabled:r}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=i,this.constraints.rotationEnabled=r}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(i){this.stateManager.viewpoint=i,this.frameTask.requestFrame()}on(i,r,s,n){return this.inputManager&&this.viewEvents.on(i,r,s,n)||super.on(i,r)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}goTo(i,r){return this.goToManager.goTo(i,r)}};return l([d({readOnly:!0})],t.prototype,"animationManager",void 0),l([d({readOnly:!0})],t.prototype,"fullOpacity",void 0),l([d()],t.prototype,"stateManager",void 0),l([d()],t.prototype,"constraintsInfo",null),l([d()],t.prototype,"extent",null),l([d()],t.prototype,"goToManager",void 0),l([d({readOnly:!0})],t.prototype,"state",null),l([d({readOnly:!0})],t.prototype,"mapViewNavigation",void 0),l([d()],t.prototype,"renderingOptions",void 0),l([d({readOnly:!0})],t.prototype,"interacting",null),l([d()],t.prototype,"stationary",null),l([d()],t.prototype,"animation",null),l([d({type:yq})],t.prototype,"constraints",null),l([d({readOnly:!0})],t.prototype,"inputManager",void 0),l([d()],t.prototype,"padding",null),l([d()],t.prototype,"resizeAlign",null),l([d()],t.prototype,"rotation",null),l([d({readOnly:!0})],t.prototype,"viewEvents",void 0),l([d({type:Bi})],t.prototype,"viewpoint",null),t=l([x("esri.views.Viewport2DMixin")],t),t};let Aq=class{constructor(t){this._view=t,this.viewpoint=new Bi({targetGeometry:new Se,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,i]=this._view.size;return Math.sqrt(t*t+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return Ej(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,i){i.pan=DK(this.center,t.center);let r=Math.abs(t.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=jA(r),i.sourceZoom=this.scale,i.targetZoom=t.scale}interpolate(t,i,r){const{pan:s,rotate:n,zoom:o,zoomOffset:a}=r,{center:u}=this;u.spatialReference=t.center.spatialReference,u.x=Tw(t.center.x,i.center.x,s),u.y=Tw(t.center.y,i.center.y,s),this.viewpoint.scale=Tw(t.scale,i.scale+a,o);let c=t.rotation;const h=i.rotation;Math.abs(h-c)>=180&&(c+=360*(c<h?1:-1)),this.viewpoint.rotation=Tw(c,h,n)}copyFrom(t){Ur(this.viewpoint,t.viewpoint),this._view=t.view}};function iw(e,t,i,r){const s=3*e,n=3*(i-e)-s,o=1-s-n,a=3*t,u=3*(r-t)-a,c=1-a-u;function h(g){return((o*g+n)*g+s)*g}function p(g){return((c*g+u)*g+a)*g}function m(g){return(3*o*g+2*n)*g+s}function y(g,v){let b,w,_,S,T,E;for(_=g,E=0;E<8;E++){if(S=h(_)-g,Math.abs(S)<v)return _;if(T=m(_),Math.abs(T)<1e-6)break;_-=S/T}if(b=0,w=1,_=g,_<b)return b;if(_>w)return w;for(;b<w;){if(S=h(_),Math.abs(S-g)<v)return _;g>S?b=_:w=_,_=.5*(w-b)+b}return _}return function(g,v=1e-6){return p(y(g,v))}}const Xn={};Xn.ease=iw(.25,.1,.25,1),Xn.linear=iw(0,0,1,1),Xn.easeIn=Xn["ease-in"]=iw(.42,0,1,1),Xn.easeOut=Xn["ease-out"]=iw(0,0,.58,1),Xn.easeInOut=Xn["ease-in-out"]=iw(.42,0,.58,1);const eRe=e=>e,OI=e=>e*e,Rj=e=>1-OI(1-e),tRe=e=>e<.5?OI(2*e)/2:(Rj(2*(e-.5))+1)/2,Fj=e=>e*e*e,One=e=>1-Fj(1-e),iRe=e=>e<.5?Fj(2*e)/2:(One(2*(e-.5))+1)/2,Nj=e=>e*e*e*e,Rne=e=>1-Nj(1-e),rRe=e=>e<.5?Nj(2*e)/2:(Rne(2*(e-.5))+1)/2,Lj=e=>e*e*e*e*e,Fne=e=>1-Lj(1-e),sRe=e=>e<.5?Lj(2*e)/2:(Fne(2*(e-.5))+1)/2,kj=e=>1-Math.cos(e*Math.PI/2),Nne=e=>1-kj(1-e),nRe=e=>e<.5?kj(2*e)/2:(Nne(2*(e-.5))+1)/2,Pj=e=>2**(10*(e-1)),Dj=e=>1-Pj(1-e),oRe=e=>e<.5?Pj(2*e)/2:(Dj(2*(e-.5))+1)/2,jj=e=>-(Math.sqrt(1-e*e)-1),Lne=e=>1-jj(1-e),aRe=e=>e<.5?jj(2*e)/2:(Lne(2*(e-.5))+1)/2;function Eo(e){const t=2*(e-Math.sqrt((e-1)*e)),i=t/2/e;return r=>r<i?e*r*r:t*r-t+1}function Mo(e,t){return(i,r)=>i<t?t*e(i/t,r):1-e((1-i)/(1-t),r)*(1-t)}const lRe=Mo(Eo(1),1),uRe=Mo(Eo(1),0),hk=Mo(Eo(1),.5),cRe=Mo(Eo(2),1),dRe=Mo(Eo(2),0),hRe=Mo(Eo(2),.5),pRe=Mo(Eo(3),1),fRe=Mo(Eo(3),0),mRe=Mo(Eo(3),.5),yRe=Mo(Eo(4),1),gRe=Mo(Eo(4),0),vRe=Mo(Eo(4),.5),Iq={linear:eRe,"in-quad":OI,"out-quad":Rj,"in-out-quad":tRe,"in-coast-quad":lRe,"out-coast-quad":uRe,"in-out-coast-quad":hk,"in-cubic":Fj,"out-cubic":One,"in-out-cubic":iRe,"in-coast-cubic":cRe,"out-coast-cubic":dRe,"in-out-coast-cubic":hRe,"in-quart":Nj,"out-quart":Rne,"in-out-quart":rRe,"in-coast-quart":pRe,"out-coast-quart":fRe,"in-out-coast-quart":mRe,"in-quint":Lj,"out-quint":Fne,"in-out-quint":sRe,"in-coast-quint":yRe,"out-coast-quint":gRe,"in-out-coast-quint":vRe,"in-sine":kj,"out-sine":Nne,"in-out-sine":nRe,"in-expo":Pj,"out-expo":Dj,"in-out-expo":oRe,"in-circ":jj,"out-circ":Lne,"in-out-circ":aRe,ease:e=>Xn.ease(e),"ease-in":e=>Xn.easeIn(e),"ease-out":e=>Xn.easeOut(e),"ease-in-out":e=>Xn.easeInOut(e)};let wRe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const PM={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},kne={maxDuration:4e3};let bRe=class Pne{constructor(t){this._createCamera=t,this.compared=new wRe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:PM.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new Pne(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,i,r){this.source!==t&&this.source.copyFrom(t),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??PM.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const i=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>hs()}get hasFov(){return Math.abs(this.compared.fov)>hs()}get hasRotate(){return this.compared.rotate>hs()}},_Re=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},SRe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,i)=>t+i.time,0)}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),t*=this.time;let r=0,s=0;const n=this.definition,o=this.segments.reduce((a,u)=>a||u.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const u=this.segments[a],c=u.definition;if(t<=u.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(u,u.time===0?0:t/u.time,i),n.hasPan&&!isNaN(i.pan)&&isFinite(n.compared.pan)?i.pan=(r+c.compared.pan*i.pan)/n.compared.pan:i.pan=1,n.hasRotate&&!isNaN(i.rotate)&&isFinite(n.compared.rotate)?i.rotate=(s+c.compared.rotate*i.rotate)/n.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:h,targetZoom:p}=c.compared,m=i.zoom*(p-h)+h,y=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,v=Math.abs(p-y)>Math.abs(h-y)?p:h;i.zoomOffset=v-g,i.zoom=(m-y)/(v-y)}else i.zoom=1;return i}t-=u.time,r+=c.compared.pan,s+=c.compared.rotate}}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r)}},K3=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,i=t.compared,r=i.sourceZoom,s=i.targetZoom;this._zoomSign=r>s?1:-1,this._panPixelsAtSource=i.pan*t.source.pixelsPerPanAtZoom(r);const n=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*n}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:s,hasRotate:n}=this.definition;let o=0,a=0;r&&(s&&(o=(i/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(a=this._zoomSign*(Math.log(t/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const u=this.definition.desiredPixelFlow;if(r&&s&&n){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*u,this._panPixelFlow=a/c*u,this._rotatePixelFlow=o/c*u}else if(r&&s){const c=1+o;this._zoomPixelFlow=o/c*u,this._panPixelFlow=1/c*u}else if(r&&n){const c=1+a;this._zoomPixelFlow=a/c*u,this._rotatePixelFlow=1/c*u}else if(s&&n){const c=this._panPixelsAtSource/this._rotatePixels,h=1+c;this._panPixelFlow=c/h*u,this._rotatePixelFlow=1/h*u}else s?this._panPixelFlow=u:r?this._zoomPixelFlow=u:n&&(this._rotatePixelFlow=u);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/TRe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=t*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-t-i)/(r-i)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+t*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*t*this._time)-1))/(i*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),i.zoom=this._interpolateComponentsZoom(t),i.pan=this._interpolateComponentsPan(t),i.rotate=this._interpolateComponentsRotate(t),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(t)}};const TRe=jA(45);function xRe(e,t,i){const r=t-e.compared.sourceZoom,s=e.halfWindowPanAtZoom(r);return-e.halfWindowSize*(i.ascensionFactor*Math.LN2*e.compared.pan+s)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*s)}function $Re(e,t,i){const r=1/t,s=Math.log(e.compared.sourceZoom*r),n=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,u=1/a,c=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*r*n*o*u*c-e.halfWindowSize*s*n*o*u+e.halfWindowSize*s*n*o*c/(a*a)}function ERe(e,t,i){const r=t-e.compared.sourceZoom,s=1/r,n=1/t,o=Math.log(e.compared.sourceZoom*n),a=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(r))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a+2*s*o+2*n-2*o*a/(r*r)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function MRe(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function ARe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function IRe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function CRe(e,t,i){return-e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function ORe(e,t,i){return e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function RRe(e,t,i){return-2*e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function FRe(e,t,i){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function NRe(e,t,i){const r=Math.log(t/e.compared.targetZoom),s=1/e.desiredPixelFlow,n=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,u=(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*r*s*n*a+e.halfWindowSize*r*s*n*u/(o*o)+e.halfWindowSize*s*n*a*u/t}function LRe(e,t,i){const r=t-e.compared.targetZoom,s=1/r,n=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+i.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a-2*s*o+2*n+2*o*a/(r*r)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function kRe(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function PRe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function DRe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function jRe(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const i=Math.LN2*e.compared.pan,r=t,s=e.halfWindowPanAtZoom(r),n=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*s);return e.compared.sourceZoom<=e.compared.targetZoom?n*(i-s):n*(i+s)}function VRe(e,t){let i=zRe(e,t);const r={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},s=r.ascensionFactor===0,n=r.descensionFactor===0,o=s?MRe:xRe,a=s?ARe:$Re,u=s?IRe:ERe,c=n?kRe:FRe,h=n?PRe:NRe,p=n?DRe:LRe,m=T=>o(e,T,r)+CRe(e,T,r)+c(e,T,r),y=T=>a(e,T,r)+ORe(e,T,r)+h(e,T,r),g=T=>u(e,T,r)+RRe(e,T,r)+p(e,T,r);let v=m(i);const b=jRe(e);let w;const _=t.maximumIterations||20,S=t.maximumDistance!=null?t.maximumDistance:1/0;for(w=0;w<_;w++){const T=t.desiredSlope??1e-6;let E=y(i);Math.abs(E)>T&&(E+=T);const A=E/g(i);if(isNaN(A)||i>=S&&A<0){if(!isFinite(S))return null;i=S,v=m(i);break}if(i-=A,i<e.compared.sourceZoom||i<e.compared.targetZoom)return null;const C=m(i);if(Math.abs(C-v)/v<=.005)break;v=C}return v>b*(1-.3)||i<e.compared.sourceZoom||i<e.compared.targetZoom?null:i}function zRe(e,t){const i=Math.max(e.compared.sourceZoom,e.compared.targetZoom),r=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return r<i?t.maximumDistance!=null?i+(t.maximumDistance-i)/2:1.5*i:t.maximumDistance?Math.min(t.maximumDistance,r):r}let URe=class extends SRe{constructor(t,i){super(),this._preallocSegments=[new K3,new K3,new K3],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,i)}update(t,i){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const r=i!=null&&i.apex?VRe(t,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r),t===this._ascensionSegment?r.zoom=Rj(r.zoom):t===this._descensionSegment&&(r.zoom=OI(r.zoom))}_updateWithApex(t,i){const[r,s,n]=this._preallocSegments,o=(i==null?void 0:i.ascensionFactor)??.5,a=Math.min(1-o,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),u=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=t,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),u>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=t,s.definition.compared.targetZoom=t,s.definition.compared.pan=this.definition.compared.pan*u,s.definition.compared.rotate=this.definition.compared.rotate*u,s.definition.segmentStart=r.definition.segmentEnd,s.definition.segmentEnd=r.definition.segmentEnd+u,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=t,n.definition.compared.pan=this.definition.compared.pan*a,n.definition.compared.rotate=this.definition.compared.rotate*a,n.definition.segmentStart=o+u,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const qRe=new _Re;let GRe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=hk,this.definition=new bRe(t),this.path=new URe}update(t,i,r){this.definition.update(t,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(oge(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?hk:Dj)}cameraAt(t,i){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const r=this.path.interpolateComponentsAt(t,qRe);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(t){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(t,this._time)-i)/(r-i)}_applyTimeSettings(t,i){const r=i.speedFactor!=null?i.speedFactor:1,s=i.minDuration??PM.minDuration/r,n=i.maxDuration??PM.maxDuration/r;return t=i.duration!=null?i.duration:Math.min(Math.max(t/r,s),n)}};const BRe=2e3,HRe=64;let WRe=class{constructor(t){this._view=t,this._animation=new GRe(()=>new Aq(this._view)),this._current=new Aq(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,i,r={}){Ur(this._current.viewpoint,t),Ur(this._source.viewpoint,t),Ur(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(t,i){this._animation.cameraAt(i,this._current),Ur(t,this._current.viewpoint)}},oy=class extends se{constructor(t){super(t),this._animation=null,this._destinationViewState=new Oj,this.updateFunction=null,this.easing=Iq.ease,this.viewpoint=new Bi({targetGeometry:new Se,scale:0,rotation:0}),this._updateTask=bv({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new WRe(t.view)}destroy(){this._updateTask=kt(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,i,r){this.stop();const s=this.viewpoint;Ur(s,i);const n=t.target;this._transition.update(this.viewpoint,n,{apex:{maximumDistance:Math.min(Math.min(i.scale,n.scale)*HRe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??kne.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:(typeof(r==null?void 0:r.easing)=="string"?Iq[r.easing]:r==null?void 0:r.easing)||this.easing}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=n,ZRe(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,n,{duration:0}));const o=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const r=new ak({target:t.clone()}),s=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var r,s;const i=this.animation;if(i&&i.state!==ak.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const n=performance.now()-this._startTime,o=this._transition.duration,a=o>0?n/o:1,u=a>=1;this._transition.applyRatio(this.viewpoint,a),u&&((s=this.animation)==null||s.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function ZRe(e,t,i,r){if((t==null?void 0:t.duration)!=null)return!0;const{time:s,isLinear:n}=e,o=(t==null?void 0:t.speedFactor)||1;if(s>((t==null?void 0:t.maxDuration)??kne.maxDuration/o))return!1;if(n){const u=Xt(),c=lr(...r.toScreen(u,...i.center)),h=lr(...i.toScreen(u,...r.center)),p=h!=null&&h.x>-1*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-1*i.size[1]&&h.y<(1.5+.5)*i.size[1],m=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(s>BRe/o&&!p&&!m)return!1}return!0}l([d()],oy.prototype,"easing",void 0),l([d()],oy.prototype,"view",void 0),l([d()],oy.prototype,"viewpoint",void 0),oy=l([x("esri.views.2d.AnimationManager")],oy);const JRe=oy;function Mt(){return Promise.all([L(()=>import("./webglDeps-BHKNIgvu.js"),__vite__mapDeps([151,123,152,153,154])),L(()=>import("./mapViewDeps-DGg9pBDs.js"),__vite__mapDeps([155,56,57,58,59,60,156,63,157,152,123,153,127,103,31,158,55,81,159,110,109,67,9,61,69,160,64,65,66,161,108,151,154,162,76,163,54,12,164,121,117,101,125,165,166,68,167,168,62,169,36,73,52,170,171,172,173,119,174,175]))])}const rw=()=>Mt().then(()=>L(()=>import("./TileLayerView2D-Bg_GeBbs.js"),__vite__mapDeps([176,60,56,57,58,59,161,159,158,55,31,153,123,81,110,109,67,9,108,162,157,152,127,103,156,63,61,69,76,163,54,12,64,65,66,121,117,101,169,36,73,52,177,178,173,179,180,171,172,181,182,183,184,185,186]))),Dh=()=>Mt().then(()=>L(()=>import("./FeatureLayerView2D-CsYHVRXV.js").then(e=>e.F),__vite__mapDeps([187,159,9,188,189,179,172,56,57,58,59,60,55,31,152,123,173,158,153,81,110,109,67,156,63,157,127,103,61,69,76,160,190,75,183,186,181]))),Cq={"base-dynamic":()=>Mt().then(()=>L(()=>import("./BaseDynamicLayerView2D-CemgqSev.js"),__vite__mapDeps([191,192,158,55,31,153,123,81,159,110,109,67,9,178,157,152,127,103,63,179,193,181]))),"base-tile":rw,"bing-maps":rw,catalog:()=>Mt().then(()=>L(()=>import("./CatalogLayerView2D-BB9_dGAY.js"),__vite__mapDeps([194,179,159]))),"catalog-dynamic-group":()=>Mt().then(()=>L(()=>import("./CatalogDynamicGroupLayerView2D-BAHuitsH.js"),__vite__mapDeps([195,179,159]))),"catalog-footprint":()=>Mt().then(()=>L(()=>import("./CatalogFootprintLayerView2D-DC3pxkCH.js"),__vite__mapDeps([196,187,159,9,188,189,179,172,56,57,58,59,60,55,31,152,123,173,158,153,81,110,109,67,156,63,157,127,103,61,69,76,160,190,75,183,186,181]))),csv:Dh,"geo-rss":()=>Mt().then(()=>L(()=>import("./GeoRSSLayerView2D-CHCbR0wM.js"),__vite__mapDeps([197,179,159,170,171,172,56,57,58,59,60,55,31,152,123,173,158,153,81,110,109,67,9,156,63,157,127,103,61,69,169,161,54,12,36,73,52]))),feature:Dh,geojson:Dh,parquet:Dh,graphics:()=>Mt().then(()=>L(()=>import("./GraphicsLayerView2D-BMThjiHf.js"),__vite__mapDeps([198,179,159,170,171,172,56,57,58,59,60,55,31,152,123,173,158,153,81,110,109,67,9,156,63,157,127,103,61,69,169,161,54,12,36,73,52]))),group:()=>Mt().then(()=>L(()=>import("./GroupLayerView2D-D4nQwj_t.js"),__vite__mapDeps([199,179,159]))),imagery:()=>Mt().then(()=>L(()=>import("./ImageryLayerView2D-GtFKVRqM.js"),__vite__mapDeps([200,201,123,31,87,158,55,153,81,159,110,109,67,9,179,169,56,57,58,59,60,161,54,12,156,63,157,152,127,103,61,69,36,73,52,180,171,172,173,192,178,193,90,188,186,181]))),"imagery-tile":()=>Mt().then(()=>L(()=>import("./ImageryTileLayerView2D-Zsefcexl.js"),__vite__mapDeps([202,203,201,123,31,87,158,55,153,81,159,110,109,67,9,179,204,167,66,152,173,205,90,188,186,181]))),kml:()=>Mt().then(()=>L(()=>import("./KMLLayerView2D-4fmtvwmQ.js"),__vite__mapDeps([206,207,178,159,157,152,123,153,127,103,63,192,158,55,31,81,110,109,67,9,179,170,171,172,56,57,58,59,60,173,156,61,69,169,161,54,12,36,73,52,90,167,66,164,151,154,121,117,101,163,125,204]))),"knowledge-graph":()=>Mt().then(()=>L(()=>import("./KnowledgeGraphLayerView2D-jAnjwgR8.js"),__vite__mapDeps([208,179,159]))),"link-chart":()=>Mt().then(()=>L(()=>import("./KnowledgeGraphLayerView2D-jAnjwgR8.js"),__vite__mapDeps([208,179,159]))),"knowledge-graph-sublayer":Dh,"map-image":()=>Mt().then(()=>L(()=>import("./MapImageLayerView2D-CSRTKAUo.js"),__vite__mapDeps([209,192,158,55,31,153,123,81,159,110,109,67,9,178,157,152,127,103,63,179,169,56,57,58,59,60,161,54,12,156,61,69,36,73,52,180,171,172,173,193,210,183,185,188,181,182,184,186]))),"map-notes":()=>Mt().then(()=>L(()=>import("./MapNotesLayerView2D-DV7UXjfM.js"),__vite__mapDeps([211,179,159,170,171,172,56,57,58,59,60,55,31,152,123,173,158,153,81,110,109,67,9,156,63,157,127,103,61,69,169,161,54,12,36,73,52]))),media:()=>Mt().then(()=>L(()=>import("./MediaLayerView2D-DXPHqA6F.js"),__vite__mapDeps([212,213,36,73,60,56,57,58,59,161,159,158,55,31,153,123,81,110,109,67,9,108,162,157,152,127,103,156,63,61,69,76,163,54,12,64,65,66,121,117,101,169,52,166,68,214,168,179]))),"ogc-feature":()=>Mt().then(()=>L(()=>import("./OGCFeatureLayerView2D-KdWzAIkC.js"),__vite__mapDeps([215,187,159,9,188,189,179,172,56,57,58,59,60,55,31,152,123,173,158,153,81,110,109,67,156,63,157,127,103,61,69,76,160,190,75,183,186,181]))),"open-street-map":rw,"oriented-imagery":Dh,route:()=>Mt().then(()=>L(()=>import("./RouteLayerView2D-DtJvQigE.js"),__vite__mapDeps([216,217,218,179,159,170,171,172,56,57,58,59,60,55,31,152,123,173,158,153,81,110,109,67,9,156,63,157,127,103,61,69,169,161,54,12,36,73,52]))),stream:()=>Mt().then(()=>L(()=>import("./StreamLayerView2D-BDkCz2aA.js"),__vite__mapDeps([219,187,159,9,188,189,179,172,56,57,58,59,60,55,31,152,123,173,158,153,81,110,109,67,156,63,157,127,103,61,69,76,160,190,75,183,186,181]))),"subtype-group":()=>Mt().then(()=>L(()=>import("./SubtypeGroupLayerView2D-C74B7cWL.js"),__vite__mapDeps([220,187,159,9,188,189,179,172,56,57,58,59,60,55,31,152,123,173,158,153,81,110,109,67,156,63,157,127,103,61,69,76,160,190,75,183,186,181]))),tile:rw,"vector-tile":()=>Mt().then(()=>L(()=>import("./VectorTileLayerView2D-BaL9L30q.js"),__vite__mapDeps([221,108,59,60,58,123,109,158,55,31,153,81,159,110,67,9,173,17,111,112,179,181]))),video:()=>Mt().then(()=>L(()=>import("./VideoLayerView2D-CBPYd0Ap.js"),__vite__mapDeps([222,223,224,214,81,158,55,31,153,123,159,110,109,67,9,156,56,57,58,59,60,63,157,152,127,103,61,69,168,179,170,171,172,173,169,161,54,12,36,73,52]))),wcs:()=>Mt().then(()=>L(()=>import("./ImageryTileLayerView2D-Zsefcexl.js"),__vite__mapDeps([202,203,201,123,31,87,158,55,153,81,159,110,109,67,9,179,204,167,66,152,173,205,90,188,186,181]))),"web-tile":rw,wfs:Dh,wms:()=>Mt().then(()=>L(()=>import("./WMSLayerView2D-B2uH2iSj.js"),__vite__mapDeps([225,192,158,55,31,153,123,81,159,110,109,67,9,178,157,152,127,103,63,179,193,181,226,188]))),wmts:()=>Mt().then(()=>L(()=>import("./WMTSLayerView2D-Cfw-RHge.js"),__vite__mapDeps([227,177,178,159,157,152,123,153,127,103,63,158,55,31,81,110,109,67,9,173,179,181]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function YRe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new M(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const Oq={hasLayerViewModule:e=>Cq[e.type]!=null,importLayerView:e=>{const t=Cq[e.type];if(t==null)throw YRe(e);return t(e)}};let vh=class bp{static getId(t,i,r,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${s}`}constructor(t,i,r,s){this.set(t,i,r,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,s){this.set(t,i,r,s)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}containsChild(t){const i=t.level-this.level;return i>0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new bp(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[n,o,a,u]=t.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(u)}else this.level=+t,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new bp(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,i,r){const s=this.clone();return s.col+=t,s.row+=i,r.normalizeKey(s),s}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new bp(t,i,r,s),new bp(t,i,r+1,s),new bp(t,i+1,r,s),new bp(t,i+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};vh.pool=new Th(vh,null,null,25,50);function Mm(e,t){return[e,t]}function jh(e,t,i){return e[0]=t,e[1]=i,e}function QRe(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}const ko=new vh("0/0/0/0");let XRe=class Dne{static create(t,i,r=null){const s=qr(t.spatialReference),n=i.origin||Mm(t.origin.x,t.origin.y),o=Mm(t.size[0]*i.resolution,t.size[1]*i.resolution),a=Mm(-1/0,-1/0),u=Mm(1/0,1/0),c=Mm(1/0,1/0);r!=null&&(jh(a,Math.max(0,Math.floor((r.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymax)/o[1]))),jh(u,Math.max(0,Math.floor((r.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymin)/o[1]))),jh(c,u[0]-a[0]+1,u[1]-a[1]+1));const{cols:h,rows:p}=i;let m,y,g,v;return!r&&h&&p&&(jh(a,h[0],p[0]),jh(u,h[1],p[1]),jh(c,h[1]-h[0]+1,p[1]-p[0]+1)),t.isWrappable?(m=Mm(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/t.size[0]),c[1]),y=!0,g=s.origin,v=s.valid):(m=c,y=!1),new Dne(i.level,i.resolution,i.scale,n,a,u,c,o,m,y,g,v)}constructor(t,i,r,s,n,o,a,u,c,h,p,m){this.level=t,this.resolution=i,this.scale=r,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=u,this.worldSize=c,this.wrap=h,this._spatialReferenceOrigin=p,this._spatialReferenceValid=m}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}normalizeKey(t){if(!this.wrap)return;const i=this.worldSize[0],r=t.col;r<0?(t.col=r+i,t.world-=1):r>=i&&(t.col=r-i,t.world+=1)}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const i=this.origin[0]+t*this.norm[0],r=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&r&&s?i===r[0]?s[0]:this.origin[0]===r[0]&&t===this.worldSize[0]?s[1]:i:i}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){ko.set(i);const s=r?ko.col:this.denormalizeCol(ko.col,ko.world),n=ko.row;return QRe(t,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),t}getTileCoords(t,i,r=!1){ko.set(i);const s=r?ko.col:this.denormalizeCol(ko.col,ko.world);return Array.isArray(t)?jh(t,this.getXForColumn(s),this.getYForRow(ko.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(ko.row)),t}},x1=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:i,colFrom:r,colTo:s}of this.spans)for(let n=r;n<=s;n++){const o=t.getWorldForColumn(n);yield new vh(t.level,i,t.normalizeCol(n),o)}}forEach(t,i){const{spans:r,lodInfo:s}=this,{level:n}=s;if(r.length!==0)for(const{row:o,colFrom:a,colTo:u}of r)for(let c=a;c<=u;c++)t.call(i,n,o,s.normalizeCol(c),s.getWorldForColumn(c))}};x1.pool=new Th(x1);let eO=class{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}};const Ct=new vh("0/0/0/0");let KRe=class jne{static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,s]=t,[n,o]=i,a=n-r,u=o-s,c=u!==0?a/u:0,h=(Math.ceil(s)-s)*c,p=(Math.floor(s)-s)*c;return new jne(r,Math.floor(s),Math.ceil(o),c,a<0?h:p,a<0?p:h,a<0?n:r,a<0?r:n)}constructor(t,i,r,s,n,o,a,u){this.x=t,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=u}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Xs=[[0,0],[0,0],[0,0],[0,0]],eFe=1e-6;let tFe=class{constructor(t,i=null,r=t.lods[0].level,s=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=t.lods.filter(a=>a.level>=r&&a.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map(a=>XRe.create(t,a,i));n.forEach((a,u)=>{this._infoByLevel[a.level]=o[u],this._infoByScale[a.scale]=o[u],this.scales[u]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){Ct.set(i);const s=this._infoByLevel[Ct.level];return s?s.getTileBounds(t,Ct,r):t}getTileCoords(t,i,r=!1){Ct.set(i);const s=this._infoByLevel[Ct.level];return s?s.getTileCoords(t,Ct,r):t}getTileCoverage(t,i=192,r=!0,s="closest"){if(!r&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=x1.pool.acquire(n),a=this._wrap;let u,c,h,p=1/0,m=-1/0;const y=o.spans;Xs[0][0]=Xs[0][1]=Xs[1][1]=Xs[3][0]=-i,Xs[1][0]=Xs[2][0]=t.size[0]+i,Xs[2][1]=Xs[3][1]=t.size[1]+i;for(const w of Xs)t.toMap(w,w),w[0]=n.getColumnForX(w[0]),w[1]=n.getRowForY(w[1]);const g=[];let v=3;for(let w=0;w<4;w++){if(Xs[w][1]===Xs[v][1]){v=w;continue}const _=KRe.create(Xs[w],Xs[v]);p=Math.min(_.ymin,p),m=Math.max(_.ymax,m),g[_.ymin]===void 0&&(g[_.ymin]=[]),g[_.ymin].push(_),v=w}if(p==null||m==null||m-p>100)return null;let b=[];for(u=p;u<m;){g[u]!=null&&(b=b.concat(g[u])),c=1/0,h=-1/0;for(let w=b.length-1;w>=0;w--){const _=b[w];c=Math.min(c,_.getLeftCol()),h=Math.max(h,_.getRightCol())}if(c=Math.floor(c),h=Math.floor(h),u>=n.first[1]&&u<=n.last[1])if(a)if(n.size[0]<n.worldSize[0]){const w=Math.floor(h/n.worldSize[0]);for(let _=Math.floor(c/n.worldSize[0]);_<=w;_++)y.push(new eO(u,Math.max(n.getFirstColumnForWorld(_),c),Math.min(n.getLastColumnForWorld(_),h)))}else y.push(new eO(u,c,h));else c>n.last[0]||h<n.first[0]||(c=Math.max(c,n.first[0]),h=Math.min(h,n.last[0]),y.push(new eO(u,c,h)));u+=1;for(let w=b.length-1;w>=0;w--){const _=b[w];_.ymax>=u?_.incrRow():b.splice(w,1)}}return o}getTileParentId(t){Ct.set(t);const i=this._infoByLevel[Ct.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Ct,this._lodInfos[r],Ct),Ct.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){Ct.set(i);const r=this._infoByLevel[Ct.level],s=t.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(Ct,s,Ct);const o=s.denormalizeCol(Ct.col,Ct.world);for(const a of t.spans)if(a.row===Ct.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(s.resolution<r.resolution){const[o,a,u,c]=t.spans.reduce((v,b)=>(v[0]=Math.min(v[0],b.row),v[1]=Math.max(v[1],b.row),v[2]=Math.min(v[2],b.colFrom),v[3]=Math.max(v[3],b.colTo),v),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(Ct.col,Ct.world),p=s.getColumnForX(r.getXForColumn(h)),m=s.getRowForY(r.getYForRow(Ct.row)),y=s.getColumnForX(r.getXForColumn(h+1))-1,g=s.getRowForY(r.getYForRow(Ct.row+1))-1;return!(p>c||y<u||m>a||g<o)}const n=s.denormalizeCol(Ct.col,Ct.world);return t.spans.some(o=>o.row===Ct.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const s=qr(this.tileInfo.spatialReference),n=-r*(s.valid[1]-s.valid[0]);t[0]+=n,t[2]+=n}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+eFe)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,s)=>Math.abs(s-t)<Math.abs(r-t)?s:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,i,r){const s=this._infoByLevel[r.level];return t.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(t.level=i.level,t.col=Math.floor(r.col*s.resolution/i.resolution+.01),t.row=Math.floor(r.row*s.resolution/i.resolution+.01)),t)}},iFe=class{constructor(t,i){this.item=t,this.controller=i,this.promise=null}},rFe=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new C_,this._controllers=new C_,this._processingItems=new C_,this._pausedSignal=Fv(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new pM(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&i&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=kt(this._schedule),this._task=kt(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const s=new AbortController;let n=null;i&&(n=mo(i,()=>s.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),c.reject(mt())},a=()=>{u.remove(),n!=null&&n.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},u=z5(s.signal,o),c=Bs();return this._deferreds.set(t,c),this._controllers.set(t,s),c.promise.then(a,a),this._queue.push(t),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var i;const t=this._queue.popLast();return t&&((i=this._deferreds.get(t))==null||i.reject(mt()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=fS(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let i;const r=new AbortController,s=new iFe(t,r);this._processingItems.set(t,s);try{i=this.process(t,r.signal)}catch(n){this._processError(s,n)}xl(i)?(s.promise=i,i.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,i)}get test(){}};const Rq=[0,0];let Kl=class extends se{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:i,scheduler:r,priority:s}=this;this._queue=new rFe({concurrency:t,scheduler:r,priority:s,process:(n,o)=>{const a=this._keyToItem.get(n);return i(a,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=St(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const i=typeof t=="string"?t:t.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const i=t.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),s=this.tileInfoView.getTileScale(t.key),n=i0(this._tilesByScale,s,()=>new Set),o=()=>{n.delete(t.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(i)};return n.add(t.key),this._keyToItem.set(i,t),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const i=new Set;for(const o of t)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(rX(a,u=>i.has(u))){const u=Math.abs(o-r);u<n&&(s=a,n=u)}return this._getClosestTileKey(s,t).id}_getClosestTileKey(t,i){const r=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const a of t)if(i.has(a.id)){r.getTileCoords(Rq,a);const u=$I(Rq,s);u<o&&(o=u,n=a)}return n}};l([d({constructOnly:!0})],Kl.prototype,"concurrency",void 0),l([d({constructOnly:!0})],Kl.prototype,"priority",void 0),l([d({constructOnly:!0})],Kl.prototype,"process",void 0),l([d({constructOnly:!0})],Kl.prototype,"scheduler",void 0),l([d()],Kl.prototype,"state",void 0),l([d({constructOnly:!0})],Kl.prototype,"tileInfoView",void 0),Kl=l([x("esri.views.2d.tiling.TileQueue")],Kl);const CQe=Kl;let sFe=class{constructor(t,i,r){this.maxSize=t,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];Fq(this._tilePerId,t);for(let n=0;n<s.length;n++)if(s[n].id===t){s.splice(n,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(t,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==t&&(s=this._pruneAroundCenterTile(s,i,r,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,t))}_pruneAroundCenterTile(t,i,r,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,u=r*o[0],c=r*o[1],h=[0,0],p=[0,0];for(n.sort((m,y)=>(h[0]=a.x+u*(m.col+.5),h[1]=a.y-c*(m.row+.5),p[0]=a.x+u*(y.col+.5),p[1]=a.y-c*(y.row+.5),FM(h,i)-FM(p,i)));n.length>0;){const m=n.pop();if(this._removeTile(m.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),Fq(this._tilePerId,t)}};function Fq(e,t){e.delete(t)}const Vh=new vh(0,0,0,0),Pl=new Map,sw=[],tO=[];let RQe=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new sFe(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){var w,_;const{resampling:i,tileIndex:r}=this,{scale:s,center:n,resolution:o}=t.state,{minScale:a,maxScale:u}=this.tileInfoView,c=!t.stationary&&s>this._previousScale;if(this._previousScale=s,!i&&(s>a||s<u))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:p,lodInfo:m}=h,{level:y}=m;this.tiles.length=0,r.forEach(S=>S.visible=!0);let g=0,v=0;if(p.length>0)for(const{row:S,colFrom:T,colTo:E}of p)for(let A=T;A<=E;A++){g++;const C=Vh.set(y,S,m.normalizeCol(A),m.getWorldForColumn(A)).id;let O=r.get(C);if(O)O.isReady?(Pl.set(C,O),v++):c||this._addParentTile(C,Pl);else{if((w=this._tileCache)!=null&&w.has(C)){if(O=this._tileCache.pop(C),this.tileIndex.set(C,O),O.isReady){Pl.set(C,O),v++;continue}}else O=this.acquireTile(Vh),this.tileIndex.set(C,O);c||this._addParentTile(C,Pl)}}const b=v===g;for(const[S,T]of r){if(Pl.has(S))continue;Vh.set(S);const E=this.tileInfoView.intersects(h,Vh),A=this.cachePolicy==="purge"?Vh.level!==y:Vh.level>y;!E||!c&&b?!A&&E||sw.push(T):T.isReady?A&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Vh,y)?sw.push(T):tO.push(T):A&&sw.push(T)}for(const S of tO)S.isReady&&Pl.set(S.key.id,S);for(const S of sw)this._tileCache?this._tileCache.add(S):this.releaseTile(S),r.delete(S.key.id);for(const S of Pl.values())this.tiles.push(S);for(const S of r.values())Pl.has(S.key.id)||(S.visible=!1);(_=this._tileCache)==null||_.prune(y,n,o),x1.pool.release(h),tO.length=0,sw.length=0,Pl.clear()}clear(){const{tileIndex:t}=this;for(const i of t.values())this.releaseTile(i);t.clear()}refresh(t){var i;for(const r of this.tileIndex.values())t(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){var n;let r=t,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s==null?void 0:s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if((n=this._tileCache)!=null&&n.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s==null?void 0:s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(t,i){const r=ds();this.tileInfoView.getTileBounds(r,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<t.level){const n=ds();if(this.tileInfoView.getTileBounds(n,s.key,!0),cbe(n,r))return!0}return!1}};function nFe(e,t,i,r,s){Vne(e,t,i||0,r||e.length-1,s||oFe)}function Vne(e,t,i,r,s){for(;r>i;){if(r-i>600){var n=r-i+1,o=t-i+1,a=Math.log(n),u=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*u*(n-u)/n)*(o-n/2<0?-1:1);Vne(e,t,Math.max(i,Math.floor(t-o*u/n+c)),Math.min(r,Math.floor(t+(n-o)*u/n+c)),s)}var h=e[t],p=i,m=r;for(nw(e,i,t),s(e[r],h)>0&&nw(e,i,r);p<m;){for(nw(e,p,m),p++,m--;s(e[p],h)<0;)p++;for(;s(e[m],h)>0;)m--}s(e[i],h)===0?nw(e,i,m):nw(e,++m,r),m<=t&&(i=m+1),t<=m&&(r=m-1)}}function nw(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function oFe(e,t){return e<t?-1:e>t?1:0}function DM(e,t){if(!(this instanceof DM))return new DM(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function aFe(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function Am(e,t){db(e,0,e.children.length,t,e)}function db(e,t,i,r,s){s||(s=ay(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=t;o<i;o++)n=e.children[o],hb(s,e.leaf?r(n):n);return s}function hb(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Nq(e,t){return e.minX-t.minX}function Lq(e,t){return e.minY-t.minY}function iO(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function v2(e){return e.maxX-e.minX+(e.maxY-e.minY)}function lFe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function uFe(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function rO(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function w2(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function ay(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function kq(e,t,i,r,s){for(var n,o=[t,i];o.length;)(i=o.pop())-(t=o.pop())<=r||(n=t+Math.ceil((i-t)/r/2)*r,nFe(e,n,t,i,s),o.push(t,n,n,i))}DM.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!w2(e,t))return i;for(var s,n,o,a,u=[];t;){for(s=0,n=t.children.length;s<n;s++)o=t.children[s],w2(e,a=t.leaf?r(o):o)&&(t.leaf?i.push(o):rO(e,a)?this._all(o,i):u.push(o));t=u.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!w2(e,t))return!1;for(var r,s,n,o,a=[];t;){for(r=0,s=t.children.length;r<s;r++)if(n=t.children[r],w2(e,o=t.leaf?i(n):n)){if(t.leaf||rO(e,o))return!0;a.push(n)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=ay([]),this},remove:function(e,t){if(e==null)return this;for(var i,r,s,n,o=this.data,a=this.toBBox(e),u=[],c=[];o||u.length;){if(o||(o=u.pop(),r=u[u.length-1],i=c.pop(),n=!0),o.leaf&&(s=aFe(e,o.children,t))!==-1)return o.children.splice(s,1),u.push(o),this._condense(u),this;n||o.leaf||!rO(o,a)?r?(i++,o=r.children[i],n=!1):o=null:(u.push(o),c.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:Nq,compareMinY:Lq,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s,n=i-t+1,o=this._maxEntries;if(n<=o)return Am(s=ay(e.slice(t,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,r-1))),(s=ay([])).leaf=!1,s.height=r;var a,u,c,h,p=Math.ceil(n/o),m=p*Math.ceil(Math.sqrt(o));for(kq(e,t,i,m,this.compareMinX),a=t;a<=i;a+=m)for(kq(e,a,c=Math.min(a+m-1,i),p,this.compareMinY),u=a;u<=c;u+=p)h=Math.min(u+p-1,c),s.children.push(this._build(e,u,h,r-1));return Am(s,this.toBBox),s},_chooseSubtree:function(e,t,i,r){for(var s,n,o,a,u,c,h,p;r.push(t),!t.leaf&&r.length-1!==i;){for(h=p=1/0,s=0,n=t.children.length;s<n;s++)u=iO(o=t.children[s]),(c=lFe(e,o)-u)<p?(p=c,h=u<h?u:h,a=o):c===p&&u<h&&(h=u,a=o);t=a||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),n=[],o=this._chooseSubtree(s,this.data,t,n);for(o.children.push(e),hb(o,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),o=ay(i.children.splice(n,i.children.length-n));o.height=i.height,o.leaf=i.leaf,Am(i,this.toBBox),Am(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=ay([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Am(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,n,o,a,u,c,h;for(u=c=1/0,r=t;r<=i-t;r++)o=uFe(s=db(e,0,r,this.toBBox),n=db(e,r,i,this.toBBox)),a=iO(s)+iO(n),o<u?(u=o,h=r,c=a<c?a:c):o===u&&a<c&&(c=a,h=r);return h},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:Nq,s=e.leaf?this.compareMinY:Lq;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,s)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s,n,o=this.toBBox,a=db(e,0,t,o),u=db(e,i-t,i,o),c=v2(a)+v2(u);for(s=t;s<i-t;s++)n=e.children[s],hb(a,e.leaf?o(n):n),c+=v2(a);for(s=i-t-1;s>=t;s--)n=e.children[s],hb(u,e.leaf?o(n):n),c+=v2(u);return c},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)hb(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():Am(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function cFe(e,{timeZone:t,timeExtent:i}){return{$view:{scale:e,timeZone:t,timeProperties:{currentStart:i==null?void 0:i.start,currentEnd:i==null?void 0:i.end}}}}let Pq=class zne{constructor(t,i){this.key=new vh(0,0,0,0),this.bounds=ds(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=t.zoomToScale(r.level-1),this.maxScale=t.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return lbe(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return cFe(this.scale,t)}createChildTiles(){const t=this.key.getChildKeys(),i=os.acquire();for(let r=0;r<t.length;r++)i[r]=new zne(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return mj.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const zh={added:[],removed:[]},sO=new Set,dFe=new vh(0,0,0,0);function hFe(e,t){const i=qr(t);if(!i)return null;const[r,s]=i.valid;return e[2]>s?[ds([e[0],e[1],s,e[3]]),ds([r,e[1],r+e[2]-s,e[3]])]:e[0]<r?[ds([r,e[1],e[2],e[3]]),ds([s-(r-e[0]),e[1],s,e[3]])]:null}let pFe=class extends _o{constructor(t){super(),this._tiles=new Map,this._index=DM(9,D("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||S4(t)===0||T4(t)===0)return[];const i=hFe(t,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const s=new Pq(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of t.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:n}=s;if(r.length>0)for(const{row:o,colFrom:a,colTo:u}of r)for(let c=a;c<=u;c++){const h=dFe.set(n,o,s.normalizeCol(c),s.getWorldForColumn(c)).id;if(sO.add(h),!this.has(h)){const p=new Pq(this.tileScheme,h);this._tiles.set(h,p),this._index.insert(p),this.tiles.push(p),zh.added.push(p)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];sO.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),zh.removed.push(a))}(zh.added.length||zh.removed.length)&&this.emit("update",zh),x1.pool.release(i),sO.clear(),zh.added.length=0,zh.removed.length=0}};const LQe=1e-30,Dq=512,b2=16777216,kQe=8,fFe=29,mFe=24,PQe=4,DQe=0,jQe=0,VQe=0,zQe=1,UQe=2,qQe=3,GQe=4,BQe=5,HQe=6,WQe=12,ZQe=13,JQe=5,yFe=6,YQe=5,QQe=6;var jq;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(jq||(jq={}));const Une=6,gFe=1<<Une,XQe=gFe<<1,KQe=1.05,eXe=3,tXe=1,iXe=3,rXe=3,sXe=5,nXe=6,oXe=1.15,vFe=4,aXe=128,wFe=256,lXe=wFe-2*vFe,uXe=2,cXe=128,dXe=1,hXe=10,pXe=1024,fXe=128,mXe=4,yXe=1,gXe=1<<20,vXe=.75,wXe=10,bXe=.75,_Xe=256,SXe=32,TXe=512,xXe=0,$Xe=1,bFe=1,EXe=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],MXe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ow=256;var Vq,zq,Uq,qq,pk,Gq,Bq,Ja,fk,R_,zi,jM,oo,At,pe,$1,gu,Hq,Wq,Zq;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(Vq||(Vq={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(zq||(zq={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(Uq||(Uq={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(qq||(qq={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(pk||(pk={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(Gq||(Gq={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(Bq||(Bq={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(Ja||(Ja={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(fk||(fk={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(R_||(R_={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(zi||(zi={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(jM||(jM={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(oo||(oo={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(At||(At={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(pe||(pe={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}($1||($1={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(gu||(gu={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(Hq||(Hq={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(Wq||(Wq={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(Zq||(Zq={}));const AXe=33984;var VM,Jq,Yq;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(VM||(VM={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(Jq||(Jq={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(Yq||(Yq={}));const IXe=33306;var ir,Qq,Xq,Kq,eG,tG,iG;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(ir||(ir={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(Qq||(Qq={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(Xq||(Xq={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(Kq||(Kq={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(eG||(eG={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(tG||(tG={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(iG||(iG={}));const _Fe=()=>q.getLogger("esri.views.webgl.checkWebGLError");function SFe(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const qne=!!D("enable-feature:webgl-debug");function Gne(){return qne}function CXe(){return qne}function Im(e){if(Gne()){const t=e.getError();if(t){const i=SFe(e,t),r=new Error().stack;_Fe().error(new M("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}var mk;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(mk||(mk={}));function TFe(e){switch(e){case Ja.BYTE:case Ja.UNSIGNED_BYTE:return 1;case Ja.SHORT:case Ja.UNSIGNED_SHORT:case Ja.HALF_FLOAT:return 2;case Ja.FLOAT:case Ja.INT:case Ja.UNSIGNED_INT:return 4}}function xFe(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function OXe(e,t,i,r,s=0){var o;const n=e.gl;e.bindBuffer(i);for(const a of r){const u=t.get(a.name);if(u==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const c=s*a.stride;if(a.count<=4)n.vertexAttribPointer(u,a.count,a.type,a.normalized,a.stride,a.offset+c),n.enableVertexAttribArray(u),a.divisor>0&&e.gl.vertexAttribDivisor(u,a.divisor);else if(a.count===9)for(let h=0;h<3;h++)n.vertexAttribPointer(u+h,3,a.type,a.normalized,a.stride,a.offset+12*h+c),n.enableVertexAttribArray(u+h),a.divisor>0&&e.gl.vertexAttribDivisor(u+h,a.divisor);else if(a.count===16)for(let h=0;h<4;h++)n.vertexAttribPointer(u+h,4,a.type,a.normalized,a.stride,a.offset+16*h+c),n.enableVertexAttribArray(u+h),a.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(u+h,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(Gne()){const h=xFe(e),p=TFe(a.type),m=a.offset,y=Math.round(p/m)!==p/m?`. Offset not a multiple of stride. DataType requires ${p} bytes, but descriptor has an offset of ${m}`:"";h&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${c}${y}:`,h,a)}}}function RXe(e,t,i,r){var n,o,a;const s=e.gl;e.bindBuffer(i);for(const u of r){const c=t.get(u.name);if(u.count<=4)s.disableVertexAttribArray(c),u.divisor&&u.divisor>0&&((n=e.gl)==null||n.vertexAttribDivisor(c,0));else if(u.count===9)for(let h=0;h<3;h++)s.disableVertexAttribArray(c+h),u.divisor&&u.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(c+h,0));else if(u.count===16)for(let h=0;h<4;h++)s.disableVertexAttribArray(c+h),u.divisor&&u.divisor>0&&((a=e.gl)==null||a.vertexAttribDivisor(c+h,0));else console.error("Unsupported vertex attribute element count: "+u.count)}e.unbindBuffer(pk.ARRAY_BUFFER)}function $Fe(e){switch(e){case At.ALPHA:case At.LUMINANCE:case At.RED:case At.RED_INTEGER:case pe.R8:case pe.R8I:case pe.R8UI:case pe.R8_SNORM:case gu.STENCIL_INDEX8:return 1;case At.LUMINANCE_ALPHA:case At.RG:case At.RG_INTEGER:case pe.RGBA4:case pe.R16F:case pe.R16I:case pe.R16UI:case pe.RG8:case pe.RG8I:case pe.RG8UI:case pe.RG8_SNORM:case pe.RGB565:case pe.RGB5_A1:case gu.DEPTH_COMPONENT16:return 2;case At.DEPTH_COMPONENT:case At.RGB:case At.RGB_INTEGER:case pe.RGB8:case pe.RGB8I:case pe.RGB8UI:case pe.RGB8_SNORM:case pe.SRGB8:case gu.DEPTH_COMPONENT24:return 3;case At.DEPTH_STENCIL:case At.DEPTH24_STENCIL8:case At.RGBA:case At.RGBA_INTEGER:case pe.RGBA8:case pe.R32F:case pe.R11F_G11F_B10F:case pe.RG16F:case pe.R32I:case pe.R32UI:case pe.RG16I:case pe.RG16UI:case pe.RGBA8I:case pe.RGBA8UI:case pe.RGBA8_SNORM:case pe.SRGB8_ALPHA8:case pe.RGB9_E5:case pe.RGB10_A2UI:case pe.RGB10_A2:case gu.DEPTH_STENCIL:case gu.DEPTH_COMPONENT32F:case gu.DEPTH24_STENCIL8:return 4;case gu.DEPTH32F_STENCIL8:return 5;case pe.RGB16F:case pe.RGB16I:case pe.RGB16UI:return 6;case pe.RG32F:case pe.RG32I:case pe.RG32UI:case pe.RGBA16F:case pe.RGBA16I:case pe.RGBA16UI:return 8;case pe.RGB32F:case pe.RGB32I:case pe.RGB32UI:return 12;case pe.RGBA32F:case pe.RGBA32I:case pe.RGBA32UI:return 16;case ir.COMPRESSED_RGB_S3TC_DXT1_EXT:case ir.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case ir.COMPRESSED_RGBA_S3TC_DXT3_EXT:case ir.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case ir.COMPRESSED_R11_EAC:case ir.COMPRESSED_SIGNED_R11_EAC:case ir.COMPRESSED_RGB8_ETC2:case ir.COMPRESSED_SRGB8_ETC2:case ir.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case ir.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case ir.COMPRESSED_RG11_EAC:case ir.COMPRESSED_SIGNED_RG11_EAC:case ir.COMPRESSED_RGBA8_ETC2_EAC:case ir.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let Bne=class{constructor(t=0,i=t){this.width=t,this.height=i,this.target=oo.TEXTURE_2D,this.pixelFormat=At.RGBA,this.dataType=$1.UNSIGNED_BYTE,this.samplingMode=zi.LINEAR,this.wrapMode=jM.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.shouldCompress=!1,this.depth=1,this.isImmutable=!1}};function EFe(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*e.depth*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:$Fe(e.internalFormat))*(e.target===oo.TEXTURE_CUBE_MAP?6:1))}const MFe=()=>q.getLogger("esri/views/webgl/textureUtils");function _2(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&MFe().error("Negative dimension parameters are not allowed!")}function AFe(e){return e in pe}function IFe(e){return e in ir}function ly(e){return e!=null&&"type"in e&&e.type==="compressed"}function CFe(e){return e!=null&&"byteLength"in e}function rG(e){return e!=null&&!ly(e)&&!CFe(e)}function Cm(e){return e===oo.TEXTURE_3D||e===oo.TEXTURE_2D_ARRAY}function sG(e,t,i,r=1){let s=Math.max(t,i);return e===oo.TEXTURE_3D&&(s=Math.max(s,r)),Math.floor(Math.log2(s))+1}function S2(e){if(e.internalFormat!=null)return e.internalFormat===At.DEPTH_STENCIL?At.DEPTH24_STENCIL8:e.internalFormat;switch(e.dataType){case $1.FLOAT:switch(e.pixelFormat){case At.RGBA:return pe.RGBA32F;case At.RGB:return pe.RGB32F;default:throw new M("Unable to derive format")}case $1.UNSIGNED_BYTE:switch(e.pixelFormat){case At.RGBA:return pe.RGBA8;case At.RGB:return pe.RGB8}}return e.internalFormat=e.pixelFormat===At.DEPTH_STENCIL?At.DEPTH24_STENCIL8:e.pixelFormat}function OFe(e){let t="width"in e?e.width:e.codedWidth,i="height"in e?e.height:e.codedHeight;return e instanceof HTMLVideoElement&&(t=e.videoWidth,i=e.videoHeight),{width:t,height:i,depth:1}}let RFe=class Hne extends Bne{constructor(t,i){switch(super(),this.context=t,Object.assign(this,i),this.internalFormat){case pe.R16F:case pe.R16I:case pe.R16UI:case pe.R32F:case pe.R32I:case pe.R32UI:case pe.R8_SNORM:case pe.R8:case pe.R8I:case pe.R8UI:this.pixelFormat=At.RED}}static validate(t,i){return new Hne(t,i)}};const xc=()=>q.getLogger("esri/views/webgl/Texture");let yk=class Qr{constructor(t,i=null,r=null){if(this.type=mk.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,this._compressionAbortController=Fv(null),"context"in t)this._descriptor=t,r=i;else{const s=RFe.validate(t,i);if(!s)throw new M("Texture descriptor invalid");this._descriptor=s}this._descriptor.target===oo.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return EFe(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}get isCompressing(){return this._compressionAbortController.value!==null}dispose(){this.abortCompression(),this._glName&&this._descriptor.context.instanceCounter.decrement(VM.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,i){const r=this._descriptor;if(r.width!==t||r.height!==i){if(this._wasImmutablyAllocated)throw new M("Immutable textures can't be resized!");r.width=t,r.height=i,this._descriptor.target===oo.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.shouldCompress=t}setData(t){this.abortCompression(),!ly(t)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in ir&&(this._descriptor.internalFormat=void 0),this._setData(t),!ly(t)&&this._descriptor.shouldCompress&&this._compressOnWorker(t)}updateData(t,i,r,s,n,o,a=0){o||xc().error("An attempt to use uninitialized data!"),this._glName||xc().error("An attempt to update uninitialized texture!");const u=this._descriptor;u.internalFormat=S2(u);const{context:c,pixelFormat:h,dataType:p,target:m,isImmutable:y}=u;if(y&&!this._wasImmutablyAllocated)throw new M("Cannot update immutable texture before allocation!");const g=c.bindTexture(this,Qr.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+s>u.width||r+n>u.height)&&xc().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:v}=c;a&&(s&&n||xc().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),v.pixelStorei(v.UNPACK_SKIP_ROWS,a)),rG(o)?v.texSubImage2D(m,t,i,r,s,n,h,p,o):ly(o)?v.compressedTexSubImage2D(m,t,i,r,s,n,u.internalFormat,o.levels[t]):v.texSubImage2D(m,t,i,r,s,n,h,p,o),a&&v.pixelStorei(v.UNPACK_SKIP_ROWS,0),c.bindTexture(g,Qr.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,i,r,s,n,o,a,u){u||xc().error("An attempt to use uninitialized data!"),this._glName||xc().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=S2(c);const{context:h,pixelFormat:p,dataType:m,isImmutable:y,target:g}=c;if(y&&!this._wasImmutablyAllocated)throw new M("Cannot update immutable texture before allocation!");Cm(g)||xc().warn("Attempting to set 3D texture data on a non-3D texture");const v=h.bindTexture(this,Qr.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(Qr.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||s<0||i+n>c.width||r+o>c.height||s+a>c.depth)&&xc().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:b}=h;if(ly(u))u=u.levels[t],b.compressedTexSubImage3D(g,t,i,r,s,n,o,a,c.internalFormat,u);else{const w=u;b.texSubImage3D(g,t,i,r,s,n,o,a,p,m,w)}h.bindTexture(v,Qr.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(t.width===0||t.height===0)return;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new M("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,_2(t)}t.samplingMode===zi.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=zi.LINEAR_MIPMAP_NEAREST):t.samplingMode===zi.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=zi.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,Qr.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Qr.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(i,Qr.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new M("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,_2(t)}t.samplingMode===zi.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=zi.LINEAR):t.samplingMode===zi.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=zi.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,_2(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1)}abortCompression(){this.isCompressing&&(this._compressionAbortController.value=Pr(this._compressionAbortController.value))}_setData(t,i){var u;const r=this._descriptor,s=(u=r.context)==null?void 0:u.gl;if(!s)return;Im(s),this._glName||(this._glName=s.createTexture(),this._glName&&r.context.instanceCounter.increment(VM.Texture,this)),_2(r);const n=r.context.bindTexture(this,Qr.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(Qr.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),Im(s);const o=i??r.target,a=Cm(o);if(rG(t))this._setDataFromTexImageSource(t,o);else{const{width:c,height:h,depth:p}=r;if(c==null||h==null)throw new M("Width and height must be specified!");if(a&&p==null)throw new M("Depth must be specified!");if(r.internalFormat=S2(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,c,h,p),ly(t)){if(!IFe(r.internalFormat))throw new M("Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(t,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,c,h,p,t),Im(s),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),Im(s),r.context.bindTexture(n,Qr.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let i=oo.TEXTURE_CUBE_MAP_POSITIVE_X;i<=oo.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(t,i)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:s}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,i),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_setDataFromTexImageSource(t,i){const{gl:r}=this._descriptor.context,s=this._descriptor;s.internalFormat=S2(s);const n=Cm(i),{width:o,height:a,depth:u}=OFe(t);s.width&&s.height,s.width||(s.width=o),s.height||(s.height=a),n&&s.depth,n&&(s.depth=u),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,s.internalFormat,s.hasMipmap,o,a,u),this._texImage(i,0,s.internalFormat,o,a,u,t),Im(r),s.hasMipmap&&(this.generateMipmap(),Im(r))}_setDataFromCompressedSource(t,i,r){const s=this._descriptor,{width:n,height:o,depth:a}=s,u=t.levels,c=sG(r,n,o,a),h=Math.min(c,u.length)-1;this._descriptor.context.gl.texParameteri(s.target,s.context.gl.TEXTURE_MAX_LEVEL,h),this._forEachMipmapLevel((p,m,y,g)=>{const v=u[Math.min(p,u.length-1)];this._compressedTexImage(r,p,i,m,y,g,v)},h)}_texStorage(t,i,r,s,n,o){const{gl:a}=this._descriptor.context;if(!AFe(i))throw new M("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const u=r?sG(t,s,n,o):1;if(Cm(t)){if(o==null)throw new M("Missing depth dimension for 3D texture upload");a.texStorage3D(t,u,i,s,n,o)}else a.texStorage2D(t,u,i,s,n);this._wasImmutablyAllocated=!0}_texImage(t,i,r,s,n,o,a){const u=this._descriptor.context.gl,c=Cm(t),{isImmutable:h,pixelFormat:p,dataType:m}=this._descriptor;if(h){if(a!=null){const y=a;if(c){if(o==null)throw new M("Missing depth dimension for 3D texture upload");u.texSubImage3D(t,i,0,0,0,s,n,o,p,m,y)}else u.texSubImage2D(t,i,0,0,s,n,p,m,y)}}else{const y=a;if(c){if(o==null)throw new M("Missing depth dimension for 3D texture upload");u.texImage3D(t,i,r,s,n,o,0,p,m,y)}else u.texImage2D(t,i,r,s,n,0,p,m,y)}}_compressedTexImage(t,i,r,s,n,o,a){const u=this._descriptor.context.gl,c=Cm(t);if(this._descriptor.isImmutable){if(a!=null)if(c){if(o==null)throw new M("Missing depth dimension for 3D texture upload");u.compressedTexSubImage3D(t,i,0,0,0,s,n,o,r,a)}else u.compressedTexSubImage2D(t,i,0,0,s,n,r,a)}else if(c){if(o==null)throw new M("Missing depth dimension for 3D texture upload");u.compressedTexImage3D(t,i,r,s,n,o,0,a)}else u.compressedTexImage2D(t,i,r,s,n,0,a)}async _compressOnWorker(t){var s,n;if(!Qr.compressionWorkerHandle||!Qr.compressionWorkerHandle.isCompressible(t))return;const i=(s=this._descriptor.context)==null?void 0:s.gl.getExtension("WEBGL_compressed_texture_etc"),r=(n=this._descriptor.context)==null?void 0:n.gl.getExtension("WEBGL_compressed_texture_s3tc");if(i||r){const o=new AbortController;this._compressionAbortController.value=o;const a={data:await createImageBitmap(t),flipped:this.descriptor.flipped,width:t.width,height:t.height,hasMipmap:this._descriptor.hasMipmap,hasETC:!!i,hasS3TC:!!r};Qr.compressionWorkerHandle.invoke(a,this._compressionAbortController.value.signal).then(u=>{u&&this.isCompressing&&this.glName&&(this._descriptor.internalFormat=u.internalFormat,this._setData(u.compressedTexture)),o===this._compressionAbortController.value&&(this._compressionAbortController.value=null)}).catch(u=>{fi(u)||o!==this._compressionAbortController.value||(this._compressionAbortController.value=null)})}}_forEachMipmapLevel(t,i=1/0){let{width:r,height:s,depth:n,hasMipmap:o,target:a}=this._descriptor;const u=a===oo.TEXTURE_3D;if(r==null||s==null||u&&n==null)throw new M("Missing texture dimensions for mipmap calculation");for(let c=0;t(c,r,s,n),o&&(r!==1||s!==1||u&&n!==1)&&!(c>=i);++c)r=Math.max(1,r>>1),s=Math.max(1,s>>1),u&&(n=Math.max(1,n>>1))}_applySamplingMode(){var n;const t=this._descriptor,i=(n=t.context)==null?void 0:n.gl;let r=t.samplingMode,s=t.samplingMode;r===zi.LINEAR_MIPMAP_NEAREST||r===zi.LINEAR_MIPMAP_LINEAR?(r=zi.LINEAR,t.hasMipmap||(s=zi.LINEAR)):r!==zi.NEAREST_MIPMAP_NEAREST&&r!==zi.NEAREST_MIPMAP_LINEAR||(r=zi.NEAREST,t.hasMipmap||(s=zi.NEAREST)),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,s)}_applyWrapMode(){var r;const t=this._descriptor,i=(r=t.context)==null?void 0:r.gl;typeof t.wrapMode=="number"?(i.texParameteri(t.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,t.wrapMode)):(i.texParameteri(t.target,i.TEXTURE_WRAP_S,t.wrapMode.s),i.texParameteri(t.target,i.TEXTURE_WRAP_T,t.wrapMode.t))}_applyAnisotropicFilteringParameters(){const t=this._descriptor,i=t.context.capabilities.textureFilterAnisotropic;i&&t.context.gl.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}};yk.TEXTURE_UNIT_FOR_UPDATES=0,yk.compressionWorkerHandle=null;const nO=()=>q.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function FFe(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const NFe=[0,0,0,0];let Wne=class{constructor(){this.type="single",this._highlightOptions=new rh,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*ow),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,i){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,yFe),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<Une)-1,activeGradient:this}]}_updateGradientTexture(t){const i=LFe(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,FFe(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,s=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,n=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,u=Math.sqrt(Math.PI/2)*bFe,c=Math.abs(s)>u?Math.round(10*(Math.abs(s)-u))/10:0,h=Math.abs(a)>u?Math.round(10*(Math.abs(a)-u))/10:0;let p;c&&!h?nO().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&h?nO().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&h&&nO().error("The highlight is "+Math.max(c,h)+"px away from the edge of the feature; consider reducing some width values.");const m=[void 0,void 0,void 0,void 0];function y(v,b,w){m[0]=(1-w)*v[0]+w*b[0],m[1]=(1-w)*v[1]+w*b[1],m[2]=(1-w)*v[2]+w*b[2],m[3]=(1-w)*v[3]+w*b[3]}const{_texelData:g}=this;for(let v=0;v<ow;++v)p=s+v/(ow-1)*(a-s),p<s?(m[0]=0,m[1]=0,m[2]=0,m[3]=0):p<n?y(NFe,r.outlineColor,(p-s)/(n-s)):p<o?[m[0],m[1],m[2],m[3]]=r.outlineColor:p<a?y(r.outlineColor,r.fillColor,(p-o)/(a-o)):[m[0],m[1],m[2],m[3]]=r.fillColor,g[4*v]=255*m[0],g[4*v+1]=255*m[1],g[4*v+2]=255*m[2],g[4*v+3]=255*m[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=a,!this._shadeTex){const v=new Bne;v.wrapMode=jM.CLAMP_TO_EDGE,v.width=ow,v.height=1,this._shadeTex=new yk(t,v)}this._shadeTex.updateData(0,0,0,ow,1,this._texelData)}};function LFe(e){return`${e.color};${e.haloColor};${e.haloOpacity};${e.fillOpacity};${e.haloWidth};${e.haloBlur}`}let kFe=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let i=0;i<t.length;i++)this.gradients[i]||(this.gradients[i]=new Wne),this.gradients[i].setHighlightOptions(t[i]);for(let i=t.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const i=[];for(let r=0;r<this.gradients.length;r++){const s=this.gradients[r];i.push({activeReasons:t,activeGradient:s}),t<<=1}return i}};var nG,oG,aG,lG,uG,cG,zM,dG,hG;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(nG||(nG={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(oG||(oG={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(aG||(aG={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(lG||(lG={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(uG||(uG={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(cG||(cG={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(zM||(zM={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(dG||(dG={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(hG||(hG={}));const Zne={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:fk.EQUAL,mask:255,op:{fail:R_.KEEP,zFail:R_.KEEP,zPass:R_.REPLACE}}}},PFe={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},DFe={...Zne,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function jFe({pixelRatio:e,state:t,displayLevel:i,requiredLevel:r},s){const n=1/2**(i-s.key.level),o=1/2**(r-s.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:t.scale,currentZoom:i,metersPerSRUnit:$o(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function Jne(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function Yne(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function VFe(e){if(!Yne(e))return null;const{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}=e.passOptions;return{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}}function zFe(e){if(!Jne(e))return null;const{activeReasons:t,highlightAll:i}=e.passOptions;return{activeReasons:t,highlightAll:i?1:0}}function kXe(e,t,i){const r={};for(const s in i)i[s]instanceof Function?r[s]=i[s](e,t):r[s]=i[s];return r}function PXe(e,t){const{attributeView:i,context:r}=e;return{storage:i.getUniforms(r),view:jFe(e,t),hittestRequest:VFe(e),highlight:zFe(e)}}function DXe(e){return{inside:e.selection===zM.InsideEffect,outside:e.selection===zM.OutsideEffect}}function UFe(e){return Yne(e)?PFe:Jne(e)&&e.passOptions.stepType==="clear"?DFe:Zne}function jXe(e){const{row:t,col:i}=e.key,r=i*Dq,s=t*Dq;return{tileOffsetFromLocalOrigin:[r%b2,s%b2],maxIntsToLocalOrigin:[Math.floor(r/b2),Math.floor(s/b2)]}}const qFe=new be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function VXe(e){return qFe.toJSON(e)}function zXe(e){const{bandCount:t,attributeTable:i,colormap:r,pixelType:s}=e.raster.rasterInfo;return t===1&&(i!=null||r!=null||s==="u8"||s==="s8")}function GFe(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new kFe:new Wne),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function UXe(e,t,i,r){const{painter:s,highlightGradient:n}=e,{highlight:o}=s.effects;if(!n)return;const a=e.passOptions,u=n.getReasonsWithGradients();for(let c=0;c<u.length;c++){const h={...e,passOptions:{type:"highlight",activeGradient:u[c].activeGradient,activeReasons:u[c].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(h),i(h),c<u.length-1){let m=0;for(let y=c+1;y<u.length;y++)m|=u[y].activeReasons;i({...e,passOptions:{type:"highlight",activeGradient:u[c].activeGradient,activeReasons:m,stepType:"clear",highlightAll:t}})}const p={...e,passOptions:{type:"highlight",activeGradient:u[c].activeGradient,activeReasons:u[c].activeReasons,stepType:"draw",highlightAll:t}};s.setPipelineState(UFe(e)),s.updatePipelineState(e.context),o.draw(p),o.unbind()}e.passOptions=a}function qXe(e){if(!e)return[];let t=dEe(e)?[e]:Q.isCollection(e)?e.toArray():Array.isArray(e)?e:[];return t=t==null?void 0:t.filter(Br),((t==null?void 0:t.length)??0)===0?[]:t}const T2=e=>parseFloat(e)/100;function BFe(e,t,i){const r=typeof e.left=="string"?T2(e.left)*t:e.left,s=typeof e.right=="string"?T2(e.right)*t:e.right,n=typeof e.top=="string"?T2(e.top)*i:e.top,o=typeof e.bottom=="string"?T2(e.bottom)*i:e.bottom,a=n;return{xmin:r,xmax:Math.max(t-s,r),ymin:a,ymax:Math.max(i-o,n)}}function Qne(e,t,i,r){switch(t.type){case"rect":{const{width:s,height:n}=e,{xmin:o,xmax:a,ymin:u,ymax:c}=BFe(t,s,n),{x:h,y:p}=i;return h>o&&h<a&&p>u&&p<c}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||_4(t.path,[i.x,i.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?b4(t.geometry,r):wS(t.geometry,r))}}function HFe(e){if(!e.highlights)return null;const t=e.highlights.findIndex(i=>i.name==="default");return t===-1?null:e.highlights.items[t]}function WFe(e,t){if(!e.highlights){if(!t)return;e.highlights=new Q([new rh])}const i=e.highlights.findIndex(r=>r.name==="default");t?e.highlights.items[i].assignFrom(t):(e.highlights.removeAt(i),e.highlights.length===0&&(e.highlights=null))}async function ZFe(e,t,i){const r=Sse(t)?_se(e,t):t;if(!e.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let s=new Set;const n=new Set;let o=!1,a=null,u=null;i!=null&&i.include?fG(i.include,pG(e,m=>{s.add(m),oO(m,y=>n.add(y))},(m,y)=>{n.add(m),s.add(y)},m=>{a||(a=new Set),a.add(m)},m=>s.add(m),()=>o=!0)):(o=!0,s=new Set(e.allLayerViews),s.forEach(m=>{oO(m,y=>n.add(y))})),i!=null&&i.exclude&&fG(i.exclude,pG(e,m=>{s.delete(m),oO(m,y=>n.delete(y))},m=>n.delete(m),m=>{u||(u=new Set),u.add(m)}));const c=e.toMap(r),h=e.allLayerViews.filter(m=>!m.suspended&&s.has(m)&&m.clips.every(y=>Qne(e,y,r,c))).reverse();let p=[...o?e.graphicsView.hitTest(c).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:c})):[],...await Promise.all(h.map(m=>m.hitTest(c,r)).toArray())].filter(Br).flat().filter(Br);return p=p.filter(m=>{var y;return m.type!=="graphic"||((y=m.layer)==null?void 0:y.type)!=="subtype-group"||n.has(m.graphic.layer)}),a&&(p=p.filter(m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has(gk(m.graphic))))),u&&(p=p.filter(m=>!("graphic"in m)||!m.graphic||!(u!=null&&u.has(gk(m.graphic))))),{screenPoint:r,results:p}}function pG(e,t,i,r,s,n){return o=>{if(o instanceof _i){if(o.layer===e)n==null||n();else{const a=e.allLayerViews.find(u=>u.layer===o.layer);a&&(s==null||s(a))}r(gk(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(u=>u.layer===o.parent);a&&i(o,a)}else{const a=e.allLayerViews.find(u=>u.layer===o);a&&t(a)}}}function fG(e,t){if(e)if(DE(e))for(const i of e)if(DE(i))for(const r of i)t(r);else t(i);else t(e)}function gk(e){var i,r;const t=e.getObjectId();return t?`${((i=e.layer)==null?void 0:i.uid)??((r=e.sourceLayer)==null?void 0:r.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function oO({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(i=>{t(i)})}let aw=null,UM=!0;function JFe(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(UM)try{return new ImageData(e,t)}catch{UM=!1}return Xne(e,t,i)}function GXe(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(UM)try{return new ImageData(e,t,i)}catch{UM=!1}const s=Xne(t,i,r);return s.data.set(e,0),s}function YFe(){return aw||(aw=document.createElement("canvas"),aw.width=1,aw.height=1),aw}function Xne(e,t,i){return i||(i=YFe()),i.getContext("2d").createImageData(e,t)}async function QFe(e,t){const i=window.URL.createObjectURL(e);try{const{data:r}=await Be(i,{...t,responseType:"image"});return r}catch(r){throw fi(r)?r:new M("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function BXe(e,t){const{arrayBuffer:i,mediaType:r}=await XFe(e,t),s=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await L(()=>import("./gif-Gs5wqvAB.js"),[]);if(n(i))return o(i,t)}if(s){const{isAnimatedPNG:n,parseApng:o}=await L(()=>import("./apng-Cgk9zy7x.js"),__vite__mapDeps([228,1]));if(n(i))return o(i,t)}return QFe(new Blob([i],{type:r}),t)}async function XFe(e,t){var s;const i=Df(e);if(i!=null&&i.isBase64)return{arrayBuffer:HX(i.data),mediaType:i.mediaType};const r=await Be(e,{responseType:"array-buffer",...t});return{arrayBuffer:r.data,mediaType:((s=r.getHeader)==null?void 0:s.call(r,"Content-Type"))??""}}function Kne(e,t,i){const{ctx:r,canvas:s}=toe(e,i),n=r.getImageData(0,0,e.width,e.height),o=roe(s,t);return ioe(s),{dataUrl:o,data:n}}function eoe(e,t){const{ctx:i,canvas:r}=toe(e,t),s=i.getImageData(0,0,e.width,e.height);return ioe(r),s}function toe(e,t){const i=KFe();t.premultipliedAlpha&&rNe(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&iNe(r),{ctx:r,canvas:i}}function ioe(e){e.width=0,e.height=0}function KFe(){return aO==null&&(aO=document.createElement("canvas")),aO}let aO=null;function roe(e,t){const i=sNe[t.format],r=t.quality/100;return e.toDataURL(i,r)}function soe(e,t){const i=tNe(e),r=oNe[i];return{format:i,quality:Ws(t??r,0,100)}}function noe(e,t){return t/Math.max(e[0],e[1])}function eNe(e,t,i,r=0,s=0,n=e.width-r,o=e.height-s,a=!1){const{data:u}=e,{width:c,height:h,data:p}=t,m=n/c,y=o/h,g=Math.ceil(m/2),v=Math.ceil(y/2),b=e.width;for(let w=0;w<h;w++)for(let _=0;_<c;_++){const S=4*(_+(a?h-w-1:w)*c);let T=0,E=0,A=0,C=0,O=0,U=0;const V=(w+.5)*y;for(let H=Math.floor(w*y);H<(w+1)*y;H++){const te=Math.abs(V-(H+.5))/v,ye=(_+.5)*m,ce=te*te;for(let Qe=Math.floor(_*m);Qe<(_+1)*m;Qe++){const ie=Math.abs(ye-(Qe+.5))/g,ae=Math.sqrt(ce+ie*ie);if(ae>=1)continue;let ne=2*ae*ae*ae-3*ae*ae+1;const De=4*(r+Qe+(s+H)*b);U+=ne*u[De+3],E+=ne,!i&&u[De+3]<255&&(ne=ne*u[De+3]/255),A+=ne*u[De],C+=ne*u[De+1],O+=ne*u[De+2],T+=ne}}p[S]=A/T,p[S+1]=C/T,p[S+2]=O/T,p[S+3]=U/E}return t}function tNe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return nNe}}function iNe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function rNe(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const s=t[r+3];if(s!==255&&s>0){const n=255/s;t[r]=t[r]*n,t[r+1]=t[r+1]*n,t[r+2]=t[r+2]*n}}}const sNe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},mG=98,nNe="png",oNe={png:100,jpg:mG,jpeg:mG},HXe=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:JFe,encode:Kne,encodeData:eoe,getFormatAndQuality:soe,getMaximumResolutionScale:noe,resampleHermite:eNe,toDataUrl:roe},Symbol.toStringTag,{value:"Module"})),ooe={flipY:!0,premultipliedAlpha:!0};async function aNe(e,t){const i=await aoe(e,t),{format:r,quality:s}=soe(t==null?void 0:t.format,t==null?void 0:t.quality);return Kne(i,{format:r,quality:s},ooe)}async function lNe(e,t){const i=await aoe(e,t);return eoe(i,ooe)}function aoe(e,t){const i=dNe(t||{},cNe(e.stage,e.size),e.size,e.padding),r=uNe(t,e.allLayerViews);return e.stage.takeScreenshot(i,r,e.backgroundColor,t==null?void 0:t.rotation)}function uNe(e={},t){if(!e.layers)return;const i=[];return e.layers.forEach(r=>{const s=t.find(n=>n.layer.id===r.id);s!=null&&s.container&&i.push(s.container)}),i}function cNe(e,t){return Math.min(4,noe(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function dNe(e,t,i,r){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let s=null;e.width!=null&&e.height!=null?s=[e.width,e.height]:e.width==null&&e.height!=null?s=[e.height,e.height]:e.width!=null&&e.height==null?s=[e.width,e.width]:e.width==null&&e.height==null&&(s=null);const n=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,u,c=e.area||{x:0,y:0,width:n,height:o};if(s){const h=n/o,p=s[0]/s[1];if(p>h){const m=c.width/p;c={x:c.x,y:Math.round(c.y+(c.height-m)/2),width:c.width,height:Math.round(m)}}else{const m=c.height*p;c={x:Math.round(c.x+(c.width-m)/2),y:c.y,width:Math.round(m),height:c.height}}}else s=[c.width,c.height];return s[0]>c.width?(a=Math.min(s[0]/c.width,t),u=s[0]/c.width/a):(a=1,u=s[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*a),y:Math.round((c.y+r.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:u,resolutionScale:a}}const hNe=e=>e.includes("Brush");let loe=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),hNe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function pNe(e,t){const i=t.debugRendererInfo&&e.getExtension("WEBGL_debug_renderer_info");return i?{getUnmaskedRendererWebGL:()=>e.getParameter(i.UNMASKED_RENDERER_WEBGL)}:null}let yG;function fNe(){return yG??(yG=gNe()),yG}let mNe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function yNe(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let i=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=t.getContext("webgl2"),i!=null&&(e.majorPerformanceCaveat=!0)),i==null)return i;e.available=!0,e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(e.supportsHighPrecisionFragment=r.precision>0),i}function gNe(){var i;const e=new mNe,t=yNe(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null,e.unmaskedRenderer=((i=pNe(t,{debugRendererInfo:!0}))==null?void 0:i.getUnmaskedRendererWebGL())??"unknown"),e}function vNe(e){const t=fNe();return t.available?e==="3d"&&t.majorPerformanceCaveat?new M("webgl:major-performance-caveat-detected",`Your WebGL implementation (${t.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new M("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new M("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new M("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function wNe(e){return e&&"nodeType"in e}function bNe(e){return e&&typeof e.render=="function"}const gG={component:"esri-component"};let _p=class extends se{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,i;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((i=this.node)==null?void 0:i.id)}set id(t){this._set("id",t)}set node(t){const i=this._get("node");t!==i&&(t&&t.classList.add(gG.component),i&&i.classList.remove(gG.component),this._set("node",t))}castNode(t){var i;return(i=this.widget)==null||i.destroy(),t?typeof t=="string"||wNe(t)?(this._set("widget",null),U4(t)):(bNe(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};l([d()],_p.prototype,"id",null),l([d()],_p.prototype,"node",null),l([ke("node")],_p.prototype,"castNode",null),l([d({readOnly:!0})],_p.prototype,"widget",void 0),_p=l([x("esri.views.ui.Component")],_p);const y$=_p,uoe="calcite-mode-";function _Ne(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function coe(){return _Ne().startsWith("dark")}function SNe(){return`${uoe}${coe()?"dark":"light"}`}function TNe(e){xNe(e),e.classList.add(SNe())}function xNe(e){Array.from(e.classList).forEach(t=>{t.startsWith(uoe)&&e.classList.remove(t)})}const $Ne={left:0,top:0,bottom:0,right:0},doe={bottom:30,top:15,right:15,left:15},Dl="esri-ui",ys={ui:Dl,corner:`${Dl}-corner`,innerContainer:`${Dl}-inner-container`,manualContainer:`${Dl}-manual-container`,cornerContainer:`${Dl}-corner-container`,topLeft:`${Dl}-top-left`,topRight:`${Dl}-top-right`,bottomLeft:`${Dl}-bottom-left`,bottomRight:`${Dl}-bottom-right`};function ENe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function x2(e){return e===0?"0":`${e}px`}function lO(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function uO(e,{top:t,bottom:i,left:r,right:s}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=s}let Va=class extends _o.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Gr(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&uO(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&uO(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([G(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,xe),G(()=>this.padding,this._applyUIPadding,xe),G(()=>[this.container,this._locale],([t,i])=>{t&&t.setAttribute("lang",i)},xe),mee(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const i=this._get("container");t!==i&&(t&&(t.classList.add(ys.ui),TNe(t),this._attachContainers(t)),i&&(i.classList.remove(ys.ui),uO(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",t))}get height(){var n;const t=((n=this.view)==null?void 0:n.height)??0;if(t===0)return t;const i=this._getViewPadding(),{top:r,bottom:s}=i;return Math.max(t-r-s,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...doe,...t}}get width(){var n;const t=((n=this.view)==null?void 0:n.width)??0;if(t===0)return t;const i=this._getViewPadding(),{left:r,right:s}=i;return Math.max(t-r-s,0)}add(t,i){let r,s,n;if(Array.isArray(t))return void t.forEach(a=>this.add(a,i));const o=lO(t);o&&({index:r,position:i,component:t,key:s}=o),i&&typeof i=="object"&&({index:r,key:s,position:i,internal:n}=i),!t||i&&!this._isValidPosition(i)||this._add(t,i,r,s,n)}remove(t,i){var s,n;if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,i));const r=this._find(t);if(r){if(this._componentMap.has(r)&&((s=this._componentMap.get(r))==null?void 0:s.key)!==i)return;const o=this._components.indexOf(r),a=r.node.parentNode;return a==null||a.removeChild(r.node),this._componentMap.delete(r),(n=r.widget)==null||n.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(t,i={removeInternal:!1}){if(Array.isArray(t)){for(const n of t)this.empty(n,i);return}const r=this._positionNameToContainerLookup[t??"manual"],s=Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(n=>{var o;return n==null?!1:!(((o=this._componentMap.get(n))==null?void 0:o.internal)??!1)||i.removeInternal});for(const n of s)this.remove(n)}move(t,i){if(Array.isArray(t)&&t.forEach(o=>this.move(o,i)),!t)return;let r;const s=lO(t)||lO(i);if(s&&(r=s.index,i=s.position,t=s.component||t),i&&!this._isValidPosition(i))return;const n=this.remove(t);n&&this.add(n,{position:i,index:r})}find(t){if(!t)return null;const i=this._findById(t);return i&&(i.widget||i.node)}getComponents(t,i={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(t,i):this._components.filter(r=>{var s;return i.includeInternal||!((s=this._componentMap.get(r))!=null&&s.internal)}).map(({widget:r,node:s})=>r??s)}getPosition(t){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(t))return i;return null}_add(t,i,r,s,n){t instanceof y$||(t=new y$({node:t}));const{widget:o}=t;o!=null&&o instanceof se&&o.addHandles(Ke(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:i,index:r}),this._components.push(t),this._componentMap.set(t,{key:s,internal:n})}_find(t){return t?t instanceof y$?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??$Ne}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(ys.innerContainer,ys.cornerContainer);const i=document.createElement("div");i.classList.add(ys.innerContainer,ys.manualContainer);const r=document.createElement("div");r.classList.add(ys.topLeft,ys.corner),t.appendChild(r);const s=document.createElement("div");s.classList.add(ys.topRight,ys.corner),t.appendChild(s);const n=document.createElement("div");n.classList.add(ys.bottomLeft,ys.corner),t.appendChild(n);const o=document.createElement("div");o.classList.add(ys.bottomRight,ys.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=i;const a=al();this._cornerNameToContainerLookup={"top-left":r,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":a?s:r,"top-trailing":a?r:s,"bottom-leading":a?o:n,"bottom-trailing":a?n:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var c,h;const i=t.position??"manual",{component:r,index:s}=t,n=this._positionNameToContainerLookup[i],o=s!=null&&s>-1;if(ENe(r.widget)&&r.widget.startup(),!o)return void n.appendChild(r.node);const a=Array.from(n.children);if(s===0){const{firstChild:p}=n;return void(p?(c=p.parentNode)==null?void 0:c.insertBefore(r.node,p):n.appendChild(r.node))}if(s>=a.length)return void n.appendChild(r.node);const u=a[s];(h=u.parentNode)==null||h.insertBefore(r.node,u)}_toPixelPosition(t){return{top:x2(t.top),left:x2(t.left),right:x2(t.right),bottom:x2(t.bottom)}}_findByComponent(t){return this._components.find(i=>i===t)??null}_findById(t){return this._components.find(({id:i})=>i===t)??null}_findByNode(t){return this._components.find(({node:i})=>i===t)??null}_getComponentsAtPosition(t,i){const r=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(Br).filter(s=>{var n;return i.includeInternal||!((n=this._componentMap.get(s))!=null&&n.internal)}).map(({widget:s,node:n})=>s??n)}};l([d()],Va.prototype,"_locale",void 0),l([d()],Va.prototype,"container",null),l([d()],Va.prototype,"height",null),l([d({value:doe})],Va.prototype,"padding",null),l([ke("padding")],Va.prototype,"castPadding",null),l([d()],Va.prototype,"view",void 0),l([d()],Va.prototype,"width",null),Va=l([x("esri.views.ui.UI")],Va);const MNe=Va,ANe="randomUUID"in crypto;function RI(){if(ANe)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function QXe(){return`{${RI().toUpperCase()}}`}function INe(){return`{${RI()}}`}function CNe(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const ONe={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},RNe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}},FNe=e=>({...RNe,...e}),NNe=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},LNe=(e,t)=>e.find(t),vG=(e,t,i=!1)=>{let r=e;return t.forEach((s,n)=>{const o=r!=null&&r.children?LNe(r.children,a=>a.domNode===s):void 0;i&&!o&&n!==t.length-1||(r=o)}),r},kNe=e=>{let t;const i={...ONe,...e},r=FNe(i),s=r.performanceLogger;let n,o=!0,a=!1;const u=[],c=[],h=(m,y,g)=>{var w;let v;r.eventHandlerInterceptor=(_,S,T,E)=>function(A){let C;s("domEvent",A);const O=NNe(A.currentTarget,v.domNode),U=O.some(H=>{var te;return customElements.get((te=H==null?void 0:H.tagName)==null?void 0:te.toLowerCase())});if(A.eventPhase===Event.CAPTURING_PHASE||!U)O.reverse(),C=vG(v.getLastRender(),O);else{const H=A.composedPath(),te=H.slice(H.indexOf(A.currentTarget),H.indexOf(v.domNode)).reverse();C=vG(v.getLastRender(),te,!0)}let V;return C&&(V=i.handleInterceptedEvent(t,C,this,A)),s("domEventProcessed",A),V},(w=i.postProcessProjectionOptions)==null||w.call(i,r);const b=g();v=m(y,b,r),r.eventHandlerInterceptor=void 0,u.push(v),c.push(g),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(v,b)};let p=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let m=0;m<u.length;m++){const y=c[m]();s("rendered",void 0);try{u[m].update(y)}catch(g){console.error(g)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(p=i.modifyDoRenderImplementation(p,u,c)),t={renderNow:p,scheduleRender:()=>{n||a||(n=requestAnimationFrame(p))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(m,y)=>{h(Pd.append,m,y)},insertBefore:(m,y)=>{h(Pd.insertBefore,m,y)},merge:(m,y)=>{h(Pd.merge,m,y)},replace:(m,y)=>{h(Pd.replace,m,y)},detach:m=>{for(let y=0;y<c.length;y++)if(c[y]===m)return c.splice(y,1),u.splice(y,1)[0];throw new Error("renderFunction was not found")}},t};class E1{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}const PNe=(e,t)=>{let i=e;for(;i;){if(i===t)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},DNe=(e,t,i)=>{const r=jNe(t).subscribe;return r(s=>{s.some(o=>PNe(e,o.target))&&i()})},cO={},jNe=e=>{const t=e.join(","),i=cO[t];if(i!==void 0)return i;const r=new Set,s=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const n={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(s.disconnect(),cO[t]=void 0)})};return cO[t]=n,n},VNe=(e,t)=>{var r,s;let i=e;for(;i;){const n=(r=i.closest)==null?void 0:r.call(i,t);if(n)return n;const o=(s=i.getRootNode)==null?void 0:s.call(i);if(o===globalThis.document)return null;i=o.host}return null},zNe=(e,t,i)=>{const r=VNe(e,`[${t}]`);return(r==null?void 0:r.getAttribute(t))??i},Qt=(e,t,...i)=>{try{return e==null?void 0:e.call(t,...i)}catch(r){console.error(r,e)}},vk=async(e,t,...i)=>{try{return await(e==null?void 0:e.call(t,...i))}catch(r){console.error(r,e)}},UNe="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),qNe=new Set(UNe),qM="en",GNe={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},BNe=async(e,t,i="")=>{const r=`${t}/${i}`,s=`${r}${e}.json`;return dO[s]??(dO[s]=hoe(e,r)),await dO[s]},dO={},hoe=async(e,t)=>{const i=`${t}${e}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return e===qM?{}:await hoe(qM,t)},HNe=e=>{var i;const t=zNe(e,"lang",((i=globalThis.navigator)==null?void 0:i.language)||qM);return{lang:t,t9nLocale:poe(t)}},poe=e=>{const[t,i]=e.split("-"),r=t.toLowerCase();let s=r;return i&&(s=`${r}-${i.toUpperCase()}`),s=GNe[s]??s,qNe.has(s)?s:i?poe(r):qM},XXe=(e,t,i,r)=>{let s;const n=()=>WNe(e,t(),r).then(o=>{((s==null?void 0:s.lang)!==o.lang||s.t9nLocale!==o.t9nLocale||s.t9nStrings!==o.t9nStrings)&&i(o),s=o}).catch(console.error);return queueMicrotask(n),DNe(e,["lang"],n)},WNe=async(e,t,i=e.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:s}=HNe(e),n=`${t}/${i}/t9n`,a=i===null?{}:await BNe(s,n,"messages.");return{lang:r,t9nLocale:s,t9nStrings:a}},ZNe=e=>e.replace(JNe,(t,i)=>`${i===0?"":"-"}${t.toLowerCase()}`),JNe=/[A-Z]+(?![a-z])|[A-Z]/gu,YNe=(e,t)=>{const i=t/QNe;let r=0;const s=setInterval(()=>{r+=i,r>=t&&(clearInterval(s),e())},i);return s},QNe=4,Vj=Symbol.for("controller"),XNe=e=>typeof e=="object"&&e!==null&&(Vj in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e),KXe=e=>typeof(e==null?void 0:e.then)=="function";let pb;const fb=e=>{pb!==e&&(pb=e,queueMicrotask(()=>pb===e?pb=void 0:0))},FI=e=>pb;let Sp=[];const KNe=e=>{if(e===void 0){Sp=[];return}const t=Sp.indexOf(e);Sp=t===-1?[...Sp,e]:Sp.slice(0,t+1),queueMicrotask(()=>Sp=[])},eLe=()=>Sp;let dg;const eKe=e=>{dg!==e&&(dg=e,queueMicrotask(()=>dg===e?dg=void 0:0))},tLe=()=>{const e=dg;return dg=void 0,e},iLe=async(e,t)=>{const i=zj(e);if(i===void 0)return e;if(await i.ready,typeof t=="function"){const r=i.watchExports(s=>t(s,r))}return i.exports},rLe=async e=>{const t=zj(e);return await t.ready,t},zj=e=>{const i=FI().manager.X(e);if(i!==void 0)return i;if(XNe(e))return e;const r=tLe();if(r!==void 0)return r};let wk=!1;const tKe=e=>{wk=!0;try{return e()}finally{wk=!1}},sLe=(e,t,i)=>{const r=Object.keys(e),s=r.length;Vd===void 0&&queueMicrotask(Uj),Vd??(Vd=new Map);let n=Vd.get(e);return n===void 0&&(n={callbacks:[],keyCount:s},Vd.set(e,n)),n.keyCount!==s&&(n.callbacks.forEach(o=>o(r)),n.callbacks=[],n.keyCount=s),n.callbacks.push(o=>{const a=c=>Qt(t,null,c),u=o[s];u===void 0?a(void 0):e[u]===i?a(u):a(void 0)}),i};let Vd;const Uj=()=>{Vd==null||Vd.forEach(({callbacks:e},t)=>{const i=Object.keys(t);e.forEach(r=>r(i))}),Vd=void 0},nLe=(e,t,i)=>{const r=e.manager;return r.V!==pi&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((s,n)=>Qt(t,void 0,i===n?s:void 0)),i},oLe=(e=[FI(),...eLe()],t,i)=>{const r=Array.isArray(e)?e:[e];let s=r.length+1;const n=o=>{s-=1,o!==void 0&&(s=Math.min(s,0)),s===0&&t(o)};r.forEach(o=>sLe(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){nLe(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},aLe=(e="",t={},i=FI())=>{const r={emit:s=>{e===""&&Uj();const n=new CustomEvent(e,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...t});return i.el.dispatchEvent(n),n}};return e===""&&oLe(void 0,s=>e=s.key,r),r},iKe=aLe.bind(null,"");var foe;foe=Vj;var Qg,Xg,lf,Kg,ev,tv,iv,rv,Ad,uf,Is,tl,$u,sv,g$;class lLe{constructor(t){vt(this,sv);vt(this,Qg);vt(this,Xg);vt(this,lf);vt(this,Kg);vt(this,ev);vt(this,tv);vt(this,iv);vt(this,rv);vt(this,Ad);vt(this,uf);vt(this,Is);vt(this,tl);vt(this,$u);tt(this,Qg,[]),tt(this,Xg,[]),tt(this,lf,[]),tt(this,Kg,[]),tt(this,ev,[]),tt(this,tv,[]),tt(this,iv,[]),tt(this,rv,[]),tt(this,Ad,[]),tt(this,uf,!1),this.P=new E1,this.connectedCalled=!1,this.loadedCalled=!1,this[foe]=!0,tt(this,$u,[]);const i=this,r=t??FI();tt(i,Is,r),i.ready=i.P.promise,tt(i,tl,bG(i)),i.component=r,re(i,Is).addController(i),re(i,Is).manager===void 0||(KNe(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:t}=re(this,Is);t.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),re(t,uf)&&this.triggerLoad().then(()=>t.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return re(this,tl)}set exports(t){const i=re(this,tl);i!==t&&(tt(this,tl,t),re(this,$u).forEach(Qt),this.connectedCalled&&this.O!==!1&&re(this,Is).requestUpdate(this.O,i)),this.P.resolve(t)}setProvisionalExports(t,i=!0){tt(this,tl,i?bG(t):t),re(this,$u).forEach(Qt)}watchExports(t){const i=()=>t(re(this,tl));return re(this,$u).push(i),()=>void re(this,$u).splice(re(this,$u).indexOf(i),1)}get use(){return fb(re(this,Is)),iLe}get useRef(){return fb(re(this,Is)),rLe}get useRefSync(){return fb(re(this,Is)),zj}controllerRemoved(){re(this,Is).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(t){re(this,Qg).push(t)}onDisconnected(t){re(this,Xg).push(t)}onLoad(t){re(this,lf).push(t)}onLoaded(t){re(this,Kg).push(t)}onUpdate(t){re(this,ev).push(t)}onUpdated(t){re(this,tv).push(t)}onDestroy(t){re(this,iv).push(t)}onLifecycle(t){re(this,rv).push(t),this.connectedCalled&&re(this,Is).el.isConnected&&hc(this,sv,g$).call(this,t)}triggerConnected(){const t=this;t.hostConnected&&Qt(t.hostConnected,t),re(t,Qg).forEach(Qt),t.triggerLifecycle(),t.connectedCalled=!0}triggerDisconnected(){const t=this;t.hostDisconnected&&Qt(t.hostDisconnected,t),re(t,Xg).forEach(Qt),re(t,Ad).forEach(Qt),tt(t,Ad,[])}async triggerLoad(){if(re(this,uf))return;tt(this,uf,!0);const t=this;t.hostLoad&&await vk(t.hostLoad,t),re(this,lf).length>0&&await Promise.allSettled(re(this,lf).map(vk)),this.P.resolve(re(this,tl))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Qt(this.hostLoaded,this),re(this,Kg).forEach(Qt),this.loadedCalled=!0)}triggerUpdate(t){this.hostUpdate&&Qt(this.hostUpdate,this,t),re(this,ev).forEach(wG,t)}triggerUpdated(t){this.hostUpdated&&Qt(this.hostUpdated,this,t),re(this,tv).forEach(wG,t)}triggerDestroy(){this.hostDestroy&&Qt(this.hostDestroy,this),re(this,iv).forEach(Qt)}triggerLifecycle(){this.hostLifecycle&&hc(this,sv,g$).call(this,()=>this.hostLifecycle()),re(this,rv).forEach(hc(this,sv,g$),this)}}Qg=new WeakMap,Xg=new WeakMap,lf=new WeakMap,Kg=new WeakMap,ev=new WeakMap,tv=new WeakMap,iv=new WeakMap,rv=new WeakMap,Ad=new WeakMap,uf=new WeakMap,Is=new WeakMap,tl=new WeakMap,$u=new WeakMap,sv=new WeakSet,g$=function(t){fb(re(this,Is));const i=Qt(t);(Array.isArray(i)?i:[i]).forEach(s=>{typeof s=="function"?re(this,Ad).push(s):typeof s=="object"&&typeof s.remove=="function"&&re(this,Ad).push(s.remove)})};function wG(e){Qt(e,void 0,this)}const uLe=lLe,bG=e=>{if(typeof e!="object"&&typeof e!="function"||e===null)return e;const t={get(r,s,n){if(!((s==="exports"||s==="_exports")&&s in r&&r[s]===i)&&(s in r||s in Promise.prototype||typeof s=="symbol"))return typeof r=="function"?r[s]:Reflect.get(r,s,n)}},i=new Proxy(e,t);return i},cLe=1,dLe=2,hLe=4,pLe=8,fLe=16,mLe=32,yLe=64,moe=e=>{var i,r;let t=e;for(;t=t.parentNode??t.host;)if((i=t==null?void 0:t.constructor)!=null&&i.lumina){const s=t;return(r=s.manager)!=null&&r.loadedCalled||(s.J??s._offspring).push(e),(s.I??s._postLoad).promise}return!1},_G={};function yoe(){}const v$=Object.defineProperty,gLe=globalThis.HTMLElement??yoe;var Cs,Eu,nv,z1,bk;const XV=class XV extends gLe{constructor(){var s,n;super();vt(this,z1);vt(this,Cs);vt(this,Eu);vt(this,nv);tt(this,Eu,{}),tt(this,nv,[]),this.I=new E1,this.H=new E1,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(s=r.C)==null||s.forEach(o=>{Object.hasOwn(i,o)&&(re(i,Eu)[o]=i[o],delete i[o])}),r.A?hc(n=i,z1,bk).call(n,{a:r.A}):r.B.then(async o=>{var a,u;await r.K.p,hc(u=i,z1,bk).call(u,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])v$(this.prototype,i,{configurable:!0,enumerable:!0,get(){return re(this,Eu)[i]},set(r){re(this,Eu)[i]=r}});for(const i of this.E??[])v$(this.prototype,i,{async value(...r){return re(this,Cs)||await this.H.promise,await re(this,Cs)[i](...r)},configurable:!0});for(const i of this.D??[])v$(this.prototype,i,{value(...r){return re(this,Cs)[i](...r)},configurable:!0})}get manager(){var i;return(i=re(this,Cs))==null?void 0:i.manager}attributeChangedCallback(i,r,s){var n;(n=re(this,Cs))==null||n.attributeChangedCallback(i,r,s),re(this,Cs)||re(this,nv).push(i)}connectedCallback(){var i,r;re(this,Cs)?(r=(i=re(this,Cs)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=moe(this))}disconnectedCallback(){var i,r;(r=(i=re(this,Cs))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=re(this,Cs))==null||i.requestUpdate()}};Cs=new WeakMap,Eu=new WeakMap,nv=new WeakMap,z1=new WeakSet,bk=function(i){var m;const r=this.constructor,s=r.L,n=re(this,Eu),o=Object.values(i).find(y=>y.L===s),a=`${s}--lazy`;let u=o;for(;u&&!Object.hasOwn(u,"lumina");)u=Object.getPrototypeOf(u);wLe(u),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const h=document.createElement(a);o.N=void 0,tt(this,Cs,h),tt(this,Eu,h),re(this,nv).forEach(y=>h.attributeChangedCallback(y,null,this.getAttribute(y))),Object.entries(n).forEach(vLe,h);const p=this.isConnected;(p||this.G)&&((m=h.connectedCallback)==null||m.call(h),p||h.disconnectedCallback())},XV.lumina=!0;let SG=XV;function vLe([e,t]){this[e]=t}const wLe=e=>{const t=e.prototype,i=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(s,n){i.setAttribute.call(this.el,s,n)},t.removeAttribute=function(s){i.removeAttribute.call(this.el,s)},v$(t,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};var Mu,na,ov;class bLe extends uLe{constructor(i){super(i);vt(this,Mu);vt(this,na);vt(this,ov);this.destroyed=!1,this.R=!1,this.V=pi,this.T=[],tt(this,ov,new WeakMap),tt(this,na,i),this.exports=void 0,this.hasDestroy=_k in i&&typeof i.destroy=="function",zu.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${_k} prop.`)}re(this,Mu)!==void 0&&clearTimeout(re(this,Mu)),Uj();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():Qt(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():Qt(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):Qt(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):Qt(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),fb(i)}async destroy(){if(!this.destroyed){re(this,na).el.isConnected&&(this.hasDestroy=!1,re(this,na).el.remove()),tt(this,Mu,void 0),this.destroyed=!0;for(const i of re(this,na).M)"triggerDestroy"in i?i.triggerDestroy():Qt(i.hostDestroy,i);re(this,na).M.splice(0)}}U(){re(this,Mu)!==void 0&&clearTimeout(re(this,Mu)),!re(this,na).el.isConnected&&!re(this,na).autoDestroyDisabled&&tt(this,Mu,YNe(()=>void re(this,na).destroy(),_Le))}S(i,r){const s=this.T;this.V=pi,this.T=[],s.forEach(n=>n(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&re(this,ov).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return re(this,ov).get(i)}}Mu=new WeakMap,na=new WeakMap,ov=new WeakMap;let _Le=1e3;const _k="autoDestroyDisabled";var cf,U1,q1,df,il,Bv,goe,voe;const j_=class j_ extends zu{constructor(){super();vt(this,Bv);vt(this,cf);vt(this,U1);vt(this,q1);vt(this,df);vt(this,il);this.M=[],this.manager=new bLe(this);const i=this,r=i.constructor,s=r.N,n=r.K.o,o=j_.prototype.shouldUpdate;tt(i,df,(s==null?void 0:s.H)??new E1),i.I=(s==null?void 0:s.I)??new E1,i.J=(s==null?void 0:s.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=s??i,tt(i,q1,i.enableUpdating),i.enableUpdating=yoe,i.shouldUpdate!==o&&(tt(i,U1,i.shouldUpdate),i.shouldUpdate=o),n&&(tt(i,cf,new Map),r.elementProperties.forEach((a,u)=>re(i,cf).set(u,n())))}static finalizeStyles(i){var n;const r=super.finalizeStyles(i),s=this.shadowRootOptions===_G;return((n=this.K)==null?void 0:n.commonStyles)===void 0||s?r:[this.K.commonStyles,...r]}static createProperty(i,r){const s=typeof r=="number"?r:Array.isArray(r)?r[0]:0,n=Array.isArray(r)?r[1]:void 0,o=(n==null?void 0:n.hasChanged)??C5,a={attribute:s&cLe&&typeof i=="string"?ZNe(i):!1,reflect:!!(s&dLe),type:s&hLe?Boolean:s&pLe?Number:void 0,state:!!(s&fLe),readOnly:!!(s&mLe),noAccessor:!!(s&yLe),c:!1,...n,hasChanged(u,c){const h=o(u,c);return a.c=h,h}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,s){const n=this.K,o=super.getPropertyDescriptor(i,r,s);return s.d=o,{...o,get(){var a,u;return(a=n.t)==null||a.call(n,re(this,cf).get(i)),(u=o.get)==null?void 0:u.call(this)},set(a){var c,h;const u=this.manager;if(s.readOnly&&!wk&&(u.R||u.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),s.c&&((h=(c=re(this,cf))==null?void 0:c.get(i))==null||h.notify()),u.T.length>0&&(u==null||u.S(i,a))}}}connectedCallback(){var s,n;if(this.el.hasAttribute("defer-hydration"))return;const i=(n=(s=this.manager).A)==null?void 0:n.call(s,()=>this.requestUpdate());tt(this,il,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>hc(this,Bv,voe).call(this).catch(o=>{re(this,df).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=re(this,il))==null||i.destroy(),tt(this,il,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,s=r.shadowRootOptions,o=i??(s===_G?this.el:this.el.attachShadow(s));if(i)return zu.prototype.createRenderRoot.call(this),i;if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(u=>"styleSheet"in u?u.styleSheet:u)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=re(this,U1))==null?void 0:r.call(this,i))??!0}update(i){re(this,il)?hc(this,Bv,goe).call(this,i):super.update(i)}listen(i,r,s){const n=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,n,s),()=>this.el.removeEventListener(i,n,s)))}listenOn(i,r,s,n){const o=(s==null?void 0:s.bind(this))??s;this.manager.onLifecycle(()=>(i.addEventListener(r,o,n),()=>i.removeEventListener(r,o,n)))}async componentOnReady(){return await re(this,df).promise,this}addController(i){var r;this.M.push(i),!(Vj in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}};cf=new WeakMap,U1=new WeakMap,q1=new WeakMap,df=new WeakMap,il=new WeakMap,Bv=new WeakSet,goe=function(i){try{re(this,il).clear(),this.manager.B(re(this,il),()=>s6(j_.prototype,this,"update").call(this,i))}catch(r){throw re(this,il).clear(),r}},voe=async function(){var n,o;const i=this.el.G??moe(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(vk(a.hostLoad,a));await Promise.all(r),await((n=this.load)==null?void 0:n.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(_k)&&this.manager.U()),re(this,q1).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const s=this.J.filter(a=>{var u;return!((u=a.manager)!=null&&u.loadedCalled)});s.length&&await Promise.allSettled(s.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():Qt(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),re(this,df).resolve()},j_.lumina=!0;let TG=j_;const SLe=e=>{let t;const i=s=>{var n;t=new URL(s,((n=globalThis.location)==null?void 0:n.href)||void 0).href},r={...e,getAssetPath(s){var o;const n=new URL(s,t);return n.origin!==((o=globalThis.location)==null?void 0:o.origin)?n.href:n.pathname},setAssetPath:i,customElement(s,n){n.K=r,n.L=s,customElements.get(s)||customElements.define(s,n)}};return i(e.defaultAssetPath),r},rKe=e=>typeof e=="object"&&e!=null?Jme(e):e,sKe=e=>typeof e=="object"&&e!=null?Qme(e):e,nKe=pi;function oKe(e,t,i){i==null?e.removeAttribute(t):e.setAttribute(t,i)}const aKe={toAttribute:e=>e===!0?"":e===!1?null:e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.0 */const TLe="calcite-mode-auto",xLe="calcite-mode-dark",lKe={rtl:"calcite--rtl"},uKe={filter:250,nextTick:0,resize:150,reposition:100},cKe=25;function xG(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(xLe)||e.contains(TLe)&&t?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&r(o),n=o};let n=i();r(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const Hu=globalThis.calciteConfig,dKe=(Hu==null?void 0:Hu.focusTrapStack)||[],hKe=(Hu==null?void 0:Hu.logLevel)||"info",$G="3.2.0",$Le="2025-05-14",ELe="4f2d7eb58";function MLe(){if(Hu&&Hu.version)return;console.info(`Using Calcite Components ${$G} [Date: ${$Le}, Revision: ${ELe}]`);const e=Hu||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:$G,writable:!1}),globalThis.calciteConfig=e}function ALe(){document.readyState==="interactive"?xG():document.addEventListener("DOMContentLoaded",()=>xG(),{once:!0}),MLe()}ALe();const ILe=SLe({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.2.0/",hydratedAttribute:"calcite-hydrated"}),{customElement:pKe,getAssetPath:fKe,setAssetPath:CLe}=ILe;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.0 */let woe=!1;const OLe=e=>{woe=!0,CLe(e)};let boe;function RLe(){woe||OLe(js(Yt(boe)))}function Ta(e){var i;const t=[];for(const r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push((i=e[r])==null?void 0:i.call(e));return t.length>0?Promise.all(t):null}boe="components/assets";const _oe=Symbol("widget"),Soe=Symbol("widget-test-data"),FLe=[],NLe={},GM=new WeakMap;function Toe(e,t){let i=t.children;if(i!=null&&i.length)for(let s=0;s<i.length;++s)i[s]=Toe(e,i[s]);else i=FLe;const r=t.vnodeSelector;if(BM(r)){const s=t.properties||NLe,n=s.key||r,o={key:n,afterCreate:LLe,afterUpdate:kLe,afterRemoved:xoe,parentWidget:e,widgetConstructor:r,widgetProperties:{...s,key:n,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function LLe(e,t,i,{parentWidget:r,widgetConstructor:s,widgetProperties:n}){var a;const o=new s(n);o.container=e,GM.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),r.addHandles(Ke(()=>xoe(e))),queueMicrotask(()=>{o[Soe].projector.renderNow()})}function kLe(e,t,i,{widgetProperties:r}){var n;const s=GM.get(e);s&&(s.set(r),(n=s.afterUpdate)==null||n.call(s,s,e))}function xoe(e){var i;const t=GM.get(e);t&&((i=t.afterRemoved)==null||i.call(t,t,e),t.destroy(),GM.delete(e))}function BM(e){return typeof e=="function"&&e[_oe]}const EG=new Set;function PLe(e){EG.add(e),e.finally(()=>EG.delete(e))}var $oe;const DLe="esri.widgets.Widget";let jLe=0;function Eoe(e,t){const i=Object.prototype.hasOwnProperty;for(const r in t)i.call(t,r)&&i.call(e,r)&&(e[r]!=null&&t[r]!=null&&typeof e[r]=="object"&&typeof t[r]=="object"?Eoe(e[r],t[r]):e[r]=t[r]);return e}const VLe=kNe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,s,n,o)=>{const a=t==null?void 0:t(r,s,n,o),u=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in n)||u){const c=r[2].toLowerCase()+r.slice(3),h=y=>a==null?void 0:a.call(n,y);n.addEventListener(c,h,u);const p=()=>n.removeEventListener(c,h,u),m=o.afterRemoved;o.afterRemoved=y=>{m==null||m(y),p()}}return a}},handleInterceptedEvent(e,t,i,r){const{eventPhase:s,type:n}=r,o=s===Event.CAPTURING_PHASE;let a=`on${n}${o?"capture":""}`;const u=t.properties;(u&&a in u||(a=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,u&&a in u))&&(cie(),e.scheduleRender(),u[a].call(u.bind||i,r))}});let hO=!1,$i=class extends f0.EsriPromiseMixin(_o.EventedAccessor){constructor(t,i){super(t,i),this._attached=!1,this._projector=VLe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=fl(async()=>{var u;if((u=this._messageBundleProps)!=null&&u.length){const c=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:p})=>{if(this.destroyed)return;let m=await iI(h);this.uiStrings&&Object.keys(this.uiStrings)&&(m=Eoe(R(m),this.uiStrings)),this[p]=m}));if(this.destroyed)return;for(const h of c)h.status==="rejected"&&q.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),RLe();const r="esri-widget-uid-"+RI(),s=this.render.bind(this);this._trackingTarget=new kA(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const n=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var p,m;if(!this._readyForTrueRender||this.destroyed)return null;const u=s()??n(),c=u.properties??(u.properties={});if(c.key??(c.key=r),BM(u.vnodeSelector)){if(!this.visible)return n()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),(p=c.styles).display??(p.display="");let h=0;return(m=u.children)==null||m.forEach(y=>{var g;BM(y.vnodeSelector)||(y.properties??(y.properties={}),(g=y.properties).key??(g.key=`${this.id}--${h++}`))}),Toe(this,u)};this.render=()=>{if(hO)return o();let u=u2e(this)??null;if(u)return u;this._trackingTarget.clear(),hO=!0;try{u=Xu(this._trackingTarget,o)}catch(c){throw q.getLogger(this).error(c),c}finally{hO=!1}return u&&c2e(this,u),u};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),PLe(this._resourcesFetch)}normalizeCtorArgs(t,i){const r={...t};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const t=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(mF):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(St(this._trackingTarget),St(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,A3(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return U4(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+jLe++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[($oe=_oe,Soe)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(A3(this),this._projector.scheduleRender())}classes(...t){return die.apply(this,t)}renderNow(){A3(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(G(()=>this.viewModel,(r,s)=>{s&&this.removeHandles("delegated-events"),r&&LA(r)&&this.addHandles(this._delegatedEventNames.map(n=>dS(r,n,o=>{this.emit(n,o)})),"delegated-events")},ns)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(mF),this.scheduleRender()};this.addHandles([mee(t),G(()=>this.uiStrings,t),Fi(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=t==null?void 0:t.parentNode)==null||i.removeChild(t)}};$i[$oe]=!0,$i.vnodeSelector="div",l([d()],$i.prototype,"_readyForTrueRender",void 0),l([d({value:null})],$i.prototype,"container",null),l([ke("container")],$i.prototype,"castContainer",null),l([d()],$i.prototype,"icon",null),l([d()],$i.prototype,"id",null),l([d()],$i.prototype,"label",null),l([d()],$i.prototype,"renderable",null),l([d()],$i.prototype,"uiStrings",void 0),l([d()],$i.prototype,"viewModel",void 0),l([d({value:!0})],$i.prototype,"visible",null),l([d()],$i.prototype,"key",void 0),l([d()],$i.prototype,"children",void 0),l([d()],$i.prototype,"afterCreate",void 0),l([d()],$i.prototype,"afterUpdate",void 0),l([d()],$i.prototype,"afterRemoved",void 0),$i=l([x(DLe)],$i);const cr=$i,zLe=new Map;function ULe(e){return zLe.get(e)}function MG(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function qLe(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function lw(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function GLe(e){return e.type==="bing-maps"}const jl=[];let uy=class extends se{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Q,this.view=null,this._allLayerViewsChange=i=>{var s;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(s=this.view)==null?void 0:s.allLayerViews;r&&(this.addHandles(r.map(n=>G(()=>{var o;return[n.suspended,(o=n.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(n=>{n.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(n.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i!=null&&i.removed&&i.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.addHandles([Hs(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Fi(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,i=t==null?void 0:t.allLayerViews;if(jl.length=0,!t||!i)return void this._clear();i.forEach(s=>{var a,u;if(s.suspended||!((a=s.layer)!=null&&a.attributionVisible))return;const n=s.layer;if(MG(n,"user"))return void lw(jl,s,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(s)){const c=this._fetchedAttributionData.get(s);return void(c?lw(jl,s,this._getDynamicAttribution(c,t,n)):MG(n)&&lw(jl,s,n.copyright))}return void this._fetchAttributionData(s)}const o="portalItem"in n?(u=n.portalItem)==null?void 0:u.accessInformation:void 0;lw(jl,s,o||n.copyright)});const r=i.find(s=>{var n;return((n=s.layer)==null?void 0:n.type)==="integrated-mesh-3dtiles"});if(this.view&&r){const s=ULe(this.view);if(s){const n=s.getAttributionText();for(let o=0;o<n.length;++o)lw(jl,r,n[o])}}qLe(this.items,jl)&&(this.items.removeAll(),this.items.addMany(jl)),jl.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const i=await DA(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const r=i.ok?this._createContributionIndex(i.value,GLe(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,r)}this._updateAttributionItems()}_createContributionIndex(t,i){const r=t.contributors,s={};if(!r)return s;for(let n=0;n<r.length;n++){const o=r[n],a=o.coverageAreas;if(!a)return;for(const u of a){const c=u.bbox,h=u.zoomMin-(i&&u.zoomMin?1:0),p=u.zoomMax-(i&&u.zoomMax?1:0),m=new gt({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:we.WGS84}),y={extent:qu(m),attribution:o.attribution||"",score:u.score!=null?u.score:100,id:n};for(let g=h;g<=p;g++)s[g]??(s[g]=[]),s[g].push(y)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(t,i,r){var h;const{extent:s,scale:n}=i;let o=((h=r.tileInfo)==null?void 0:h.scaleToZoom(n))??0;if(o=Math.min(t.maxKey??0,Math.round(o)),!s||o==null||o<=-1)return"";const a=t[o],u=BA(s.center.clone().normalize(),we.WebMercator),c=new Set;return a?a.filter(p=>{const m=p.id,y=!c.has(m)&&u&&p.extent&&wS(p.extent,u);return y&&c.add(m),y}).sort((p,m)=>m.score-p.score||p.objectId-m.objectId).map(p=>p.attribution).join(", "):""}};l([d({readOnly:!0,type:Q})],uy.prototype,"items",void 0),l([d({readOnly:!0})],uy.prototype,"state",null),l([d()],uy.prototype,"view",void 0),uy=l([x("esri.widgets.Attribution.AttributionViewModel")],uy);const Moe=uy,Te={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function BLe(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:WLe(e[t])}}}function HLe(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function WLe(e){return function(t,...i){HLe(t)?f2e(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function Wi(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var ZLe=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},Aoe=function(e,t){for(var i=0,r=e.length;i<r;i++){var s=e[i];Array.isArray(s)?Aoe(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=ZLe(s)),t.push(s))}},JLe=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var s=[];return Aoe(i,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function N(e,t,...i){return typeof e!="function"||BM(e)?JLe(e,t??null,...i):e(t,...i)}function YLe(...e){return e}const Om="esri-attribution",Rm={base:Om,poweredBy:`${Om}__powered-by`,sources:`${Om}__sources`,open:`${Om}--open`,sourcesOpen:`${Om}__sources--open`,link:`${Om}__link`};let Xr=class extends cr{constructor(t,i){super(t,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Moe}initialize(){this.addHandles(Hs(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,i)=>(t.includes(i.text)||t.push(i.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Rm.open]:this._isOpen};return N("div",{bind:this,class:this.classes(Rm.base,Te.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return N("div",{class:Rm.poweredBy},"Powered by"," ",N("a",{class:Rm.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:s}=this,n={[Rm.sourcesOpen]:t,[Te.interactive]:i};return N("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Rm.sources,n),innerHTML:s,tabIndex:r})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let i=!1;const{clientHeight:r,clientWidth:s,scrollWidth:n}=t,o=n>s,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const u=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,u&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([d()],Xr.prototype,"_isOpen",void 0),l([d()],Xr.prototype,"_isInteractive",null),l([d()],Xr.prototype,"_attributionTextOverflowed",void 0),l([d()],Xr.prototype,"_prevSourceNodeHeight",void 0),l([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Xr.prototype,"attributionText",null),l([d()],Xr.prototype,"icon",null),l([d()],Xr.prototype,"itemDelimiter",void 0),l([d()],Xr.prototype,"label",null),l([d(),Wi("esri/widgets/Attribution/t9n/Attribution")],Xr.prototype,"messages",void 0),l([d()],Xr.prototype,"view",null),l([d({type:Moe})],Xr.prototype,"viewModel",void 0),l([BLe()],Xr.prototype,"_toggleState",null),Xr=l([x("esri.widgets.Attribution")],Xr);const QLe=Xr;function XLe(){const e=D("mapview-essential-goto-duration");return e==null?e:e}function KLe(e){var t,i;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((i=e==null?void 0:e.spatialReference)==null?void 0:i.isGeographic)||!1}const Ioe=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return j5(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return l([d()],t.prototype,"goToOverride",void 0),l([d()],t.prototype,"view",void 0),t=l([x("esri.widgets.support.GoTo")],t),t};let Tp=class extends Ioe(se){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(xe)}destroy(){this.view=null}get canShowNorth(){return KLe(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,i;(t=this.view)!=null&&t.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:XLe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const i=-t.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles(t.type==="2d"?G(()=>t==null?void 0:t.rotation,this._updateForRotation,xe):G(()=>t==null?void 0:t.camera,this._updateForCamera,xe))}_watchForView(t){this.addHandles(G(()=>this.view,this._updateRotationWatcher,t))}};l([d({readOnly:!0})],Tp.prototype,"canShowNorth",null),l([d({readOnly:!0})],Tp.prototype,"orientation",void 0),l([d({readOnly:!0})],Tp.prototype,"state",null),l([d()],Tp.prototype,"view",void 0),Tp=l([x("esri.widgets.Compass.CompassViewModel")],Tp);const Coe=Tp,AG="esri-compass",IG={base:AG,iconContainer:`${AG}__icon-container`};let eu=class extends cr{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new Coe,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return Ta({button:()=>L(()=>import("./index-hq8MlZzV.js"),__vite__mapDeps([229,230,231,232,233,234,235,236,237,238,239,240,241])),icon:()=>L(()=>import("./index-BfdRwHIr.js").then(t=>t.i),__vite__mapDeps([233,234,235]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:i}=this.viewModel,{messages:r}=this;return N("div",{class:this.classes(IG.base,Te.widget)},N("calcite-button",{class:Te.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},N("div",{"aria-hidden":"true",class:IG.iconContainer,title:r.reset},N("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};l([d()],eu.prototype,"goToOverride",null),l([d()],eu.prototype,"icon",null),l([d()],eu.prototype,"label",null),l([d(),Wi("esri/widgets/Compass/t9n/Compass")],eu.prototype,"messages",void 0),l([d()],eu.prototype,"view",null),l([d({type:Coe})],eu.prototype,"viewModel",void 0),eu=l([x("esri.widgets.Compass")],eu);const eke=eu,CG="esri-navigation-toggle",OG={base:CG,isLayoutHorizontal:`${CG}--horizontal`};let cy=class extends se{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(Fi(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.navigation)==null?void 0:i.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var t,i;return(t=this.view)!=null&&t.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var r,s;const t=(s=(r=this.view)==null?void 0:r.navigation)==null?void 0:s.actionMap;if(!t)return;const i=this._navigationMode==="pan";t.dragPrimary=i?"pan":"rotate",t.dragSecondary=i?"rotate":"pan"}};l([d({readOnly:!0})],cy.prototype,"state",null),l([d()],cy.prototype,"_navigationMode",void 0),l([d()],cy.prototype,"view",void 0),cy=l([x("esri.widgets.NavigationToggle.NavigationToggleViewModel")],cy);const Ooe=cy;let tu=class extends cr{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new Ooe,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var s;const r=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan"?this._rotateButton:this._panButton;pie(r),this.toggle()}}loadDependencies(){return Ta({button:()=>L(()=>import("./index-hq8MlZzV.js"),__vite__mapDeps([229,230,231,232,233,234,235,236,237,238,239,240,241]))})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var s,n;const t=((s=this.viewModel)==null?void 0:s.state)==="disabled",i=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan",r=this.messages.toggle;return N("div",{class:this.classes(OG.base,Te.widget,{[OG.isLayoutHorizontal]:this.layout==="horizontal"})},N("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:i?"outline-fill":"solid",class:Te.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),N("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:i?"solid":"outline-fill",class:Te.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};l([d()],tu.prototype,"icon",null),l([d()],tu.prototype,"label",null),l([d({value:"vertical"})],tu.prototype,"layout",null),l([d(),Wi("esri/widgets/NavigationToggle/t9n/NavigationToggle")],tu.prototype,"messages",void 0),l([d()],tu.prototype,"view",null),l([d({type:Ooe})],tu.prototype,"viewModel",void 0),tu=l([x("esri.widgets.NavigationToggle")],tu);const tke=tu;let xp=class extends se{get canZoomIn(){var r,s,n;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(n=(s=this.view)==null?void 0:s.constraints)==null?void 0:n.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var s;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const r=(s=t.constraints)==null?void 0:s.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,s;const t=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(t&&"then"in t||t==null?void 0:t.scale)??((s=this.view)==null?void 0:s.scale)??0}};l([d({readOnly:!0})],xp.prototype,"canZoomIn",null),l([d({readOnly:!0})],xp.prototype,"canZoomOut",null),l([d()],xp.prototype,"view",void 0),l([d()],xp.prototype,"_scale",null),xp=l([x("esri.widgets.Zoom.ZoomConditions2D")],xp);const ike=xp;let dy=class extends se{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};l([d({readOnly:!0})],dy.prototype,"canZoomIn",null),l([d({readOnly:!0})],dy.prototype,"canZoomOut",null),l([d()],dy.prototype,"view",void 0),dy=l([x("esri.widgets.Zoom.ZoomConditions3D")],dy);const rke=dy;let Jc=class extends se{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new ike({view:t}):t.type==="3d"&&(this._zoomConditions=new rke({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){const t=this.view;this.canZoomIn&&t&&(t.type==="2d"?t.mapViewNavigation.zoomIn():_n(t.goTo({zoomFactor:2})))}zoomOut(){const t=this.view;this.canZoomOut&&t&&(t.type==="2d"?t.mapViewNavigation.zoomOut():_n(t.goTo({zoomFactor:.5})))}};l([d()],Jc.prototype,"_zoomConditions",void 0),l([d()],Jc.prototype,"canZoomIn",null),l([d()],Jc.prototype,"canZoomOut",null),l([d({readOnly:!0})],Jc.prototype,"state",null),l([d()],Jc.prototype,"view",null),Jc=l([x("esri.widgets.Zoom.ZoomViewModel")],Jc);const Roe=Jc,RG={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let iu=class extends cr{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new Roe,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Ta({button:()=>L(()=>import("./index-hq8MlZzV.js"),__vite__mapDeps([229,230,231,232,233,234,235,236,237,238,239,240,241]))})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[RG.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return N("div",{class:this.classes(RG.base,Te.widget,t)},N("calcite-button",{class:Te.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),N("calcite-button",{class:Te.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};l([d()],iu.prototype,"icon",null),l([d()],iu.prototype,"label",null),l([d({value:"vertical"})],iu.prototype,"layout",null),l([d(),Wi("esri/widgets/Zoom/t9n/Zoom")],iu.prototype,"messages",void 0),l([d()],iu.prototype,"view",null),l([d({type:Roe})],iu.prototype,"viewModel",void 0),iu=l([x("esri.widgets.Zoom")],iu);const ske=iu;function nke(e){return(e==null?void 0:e.view)!==void 0}let w$=class extends MNe{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const s=this._find(r),n=s==null?void 0:s.widget;nke(n)&&(n.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([G(()=>this.components,this._componentsWatcher,xe),G(()=>this.view,this._updateViewAwareWidgets,xe)])}_add(t,i,r,s,n){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,i,r,s,n)}_removeComponents(t){t.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(t){this.constructed&&t.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(t){const i=this._createWidget(t);return new y$({id:t,node:i})}_createWidget(t){const i=this.view;switch(t){case"attribution":return new QLe({view:i});case"compass":return new eke({view:i});case"navigation-toggle":return new tke({view:i});case"zoom":return new ske({view:i})}}};l([d()],w$.prototype,"components",void 0),w$=l([x("esri.views.ui.DefaultUI")],w$);const Foe=w$;let b$=class extends Foe{constructor(t){super(t),this.components=["attribution","zoom"]}};l([d()],b$.prototype,"components",void 0),b$=l([x("esri.views.ui.2d.DefaultUI2D")],b$);const Noe=b$;let Loe=class Sk{constructor(t,i,r=""){this.major=t,this.minor=i,this._context=r}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}greaterEqual(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new M(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new Sk(this.major,this.minor,this._context)}static parse(t,i=""){const[r,s]=t.split("."),n=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!n.test(r))throw new M((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(s!=null&&s.match)||!n.test(s))throw new M((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(r,10),a=parseInt(s,10);return new Sk(o,a,i)}},Dg=class extends Loe{constructor(t,i){super(t,i,"webmap")}};function pO(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}const koe=new Dg(2,33);var Tk;let _$=Tk=class extends P{constructor(e){super(e),this.color=new K([0,0,0,1])}clone(){return new Tk(R({color:this.color}))}};l([d({type:K,json:{write:!0}})],_$.prototype,"color",void 0),_$=Tk=l([x("esri.webmap.background.ColorBackground")],_$);const NI=_$;let Poe,Doe,joe,Voe,zoe,Uoe,qoe;async function oke(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([L(()=>import("./webglDeps-BHKNIgvu.js"),__vite__mapDeps([151,123,152,153,154])),L(()=>import("./mapViewDeps-DGg9pBDs.js"),__vite__mapDeps([155,56,57,58,59,60,156,63,157,152,123,153,127,103,31,158,55,81,159,110,109,67,9,61,69,160,64,65,66,161,108,151,154,162,76,163,54,12,164,121,117,101,125,165,166,68,167,168,62,169,36,73,52,170,171,172,173,119,174,175]))]);Doe=e,joe=t,Voe=i,zoe=r,Uoe=s,qoe=n,Poe=o}let ze=class extends KOe(yTe(q2e(I2e(cIe)))){constructor(t){super(t),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new d1({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new xI({actionMap:new vj({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new Q,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new loe,this.type="2d",this.view2dType=null,this.ui=new Noe,this.test={takeScreenshot:async i=>lNe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},ESe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=St(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new pFe(this.featuresTilingScheme)}get constraintsInfo(){var r,s;const t=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(s=t==null?void 0:t.spatialReference)!=null&&s.equals(i)?t.lods:null,spatialReference:i}}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:t,constraints:i,center:r,viewpoint:s,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!n&&(i!=null&&i.effectiveLODs||(o=-1),(!r||t===0&&o===-1)&&((s==null?void 0:s.targetGeometry)==null||s.targetGeometry.type!=="extent"&&!s.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const i=t.targetGeometry,r=this.spatialReference;return Vte(i.spatialReference,r)}get background(){return pO(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get highlightOptions(){return HFe(this)}set highlightOptions(t){WFe(this,t)}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get tileInfo(){var t;return(t=this.featuresTilingScheme)==null?void 0:t.tileInfo}get updating(){var r,s,n,o;const t=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0)||t);if(D("esri-2d-log-updating")){const a=this.allLayerViews.reduce((u,c)=>({...u,[`${c.layer.id}(${c.layer.type})`]:!c.destroyed&&!("layerViews"in c)&&c.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(s=this.layerViewManager)==null?void 0:s.updating}
-> labelManager.updating: ${(n=this.labelManager)==null?void 0:n.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(a)}
-> updatingMagnifier: ${t}
`)}return i}get visibleArea(){const t=this.stateManager.visibleArea;return t&&new To({rings:[t.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}async hitTest(t,i){return ZFe(this,t,i)}async takeScreenshot(t){return aNe(this._getScreenshotView(t),t)}toMap(t){if(!this.ready)return null;const i=Sse(t)?_se(this,t):t;return this.stateManager.toMap(i)}toScreen(t,i){return this.stateManager.toScreen(t,i)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}getDefaultTimeZone(){return pO(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return pO(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(t){return Oq.hasLayerViewModule(t)}importLayerView(t){return Oq.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(q.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){var c;const i=this.toMap(t),r=await this.hitTest(t),s=this.allLayerViews.toArray().filter(h=>h.clips.every(p=>Qne(this,p,t,i))).reverse(),n=new globalThis.Map(s.map(h=>[h.layer.uid,h])),o=[];let a=0,u=0;for(;a<r.results.length||u<s.length;){const h=r.results.at(a);if(h&&h.type!=="graphic"){++a;continue}const p=n.get((c=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:c.uid);if((!h||p)&&u<s.length&&s.at(u)!==p){const m=s.at(u);"fetchPopupFeaturesAtLocation"in m&&o.push({mapPoint:i,layerView:m}),++u}else h&&(o.push({graphic:h.graphic,layerView:p}),++a)}return{hits:o,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=vNe(this.type);if(D("safari")&&D("safari")<9&&(t=new M("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:D("safari")})),t!=null)throw q.getLogger(this).warn("#validate()",t.message),t}loadAsyncDependencies(){return oke()}_getDefaultViewpoint(){var b;const{constraints:t,initialExtent:i,map:r,padding:s,size:n}=this;if(!t)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),u=o==null?void 0:o.viewpoint,c=((b=u==null?void 0:u.targetGeometry)==null?void 0:b.extent)??i,h=c==null?void 0:c.center,p=(u==null?void 0:u.rotation)??0,m=(u==null?void 0:u.scale)||c&&AI(c,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),y=a.center??h,g=a.rotation??p,v=a.scale??m;return y&&v?new Bi({targetGeometry:y,scale:v,rotation:g}):null}_startup(){var a;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(a=this.defaultsFromMap.extent)==null?void 0:a.center),this.graphics.owner=this;const i=new Poe(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=i,this._magnifierView=new Uoe,this._magnifierView.magnifier=this.magnifier,this._gridView=new qoe;const r=new Voe({view:this});this._set("labelManager",r);const s=new JRe({view:this});this._set("animationManager",s);const n=new zoe({view:this,animationManager:s});this._set("mapViewNavigation",n),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",u=>this.fatalError=u.error),G(()=>this.stationary,u=>i.stationary=u,ns),G(()=>this.background,u=>{i.backgroundColor=u==null?void 0:u.color,this._magnifierView.backgroundColor=u==null?void 0:u.color},ns),G(()=>this.magnifier,u=>this._magnifierView.magnifier=u,ns),G(()=>this.grid,u=>this._gridView.grid=u,ns),G(()=>this.renderingOptions,u=>i.renderingOptions=u,ns),G(()=>this.highlights.items.map(u=>({name:u.name,options:{fillColor:u.color,haloColor:u.haloColor,fillOpacity:u.fillOpacity,haloOpacity:u.haloOpacity,haloWidth:u.haloWidth,haloBlur:u.haloBlur}})),()=>{i.highlightGradient=GFe(i.highlightGradient,this.highlights.items)},ns),G(()=>this.state.id,()=>i.state=this.state,ns)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(u=>u(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const t=new tFe(fTe.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const i=new Doe({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new joe(t)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var o;const{allLayerViews:i,padding:r,size:s,stage:n}=this;return{allLayerViews:i,backgroundColor:t!=null&&t.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:r,size:s,stage:n}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};ze.type="2d",l([d({constructOnly:!0})],ze.prototype,"deactivatedWebGLExtensions",void 0),l([d({constructOnly:!0})],ze.prototype,"debugWebGLExtensions",void 0),l([d({readOnly:!0})],ze.prototype,"featuresTilingScheme",void 0),l([d({readOnly:!0})],ze.prototype,"graphicsTileStore",null),l([d()],ze.prototype,"graphicsView",void 0),l([d()],ze.prototype,"constraintsInfo",null),l([d()],ze.prototype,"initialExtentRequired",null),l([d()],ze.prototype,"labelManager",void 0),l([d({type:xI,nonNullable:!0})],ze.prototype,"navigation",void 0),l([d({constructOnly:!0})],ze.prototype,"renderCanvas",void 0),l([d()],ze.prototype,"renderingOptions",void 0),l([d({constructOnly:!0})],ze.prototype,"supersampleScreenshotsEnabled",void 0),l([d({readOnly:!0})],ze.prototype,"supportsGround",void 0),l([d()],ze.prototype,"defaultsFromMapSettings",null),l([d({readOnly:!0})],ze.prototype,"typeSpecificPreconditionsReady",null),l([d({type:NI})],ze.prototype,"background",null),l([d()],ze.prototype,"center",null),l([d({type:Q})],ze.prototype,"floors",void 0),l([d()],ze.prototype,"grid",void 0),l([d({type:rh})],ze.prototype,"highlightOptions",null),l([d()],ze.prototype,"map",void 0),l([d()],ze.prototype,"padding",null),l([d({readOnly:!0})],ze.prototype,"rendering",null),l([d({readOnly:!0})],ze.prototype,"resolution",null),l([d()],ze.prototype,"scale",null),l([d({constructOnly:!0})],ze.prototype,"spatialReferenceLocked",void 0),l([d({readOnly:!0})],ze.prototype,"tileInfo",null),l([d({type:loe,readOnly:!0})],ze.prototype,"timeline",void 0),l([d({readOnly:!0})],ze.prototype,"type",void 0),l([d({readOnly:!0})],ze.prototype,"updating",null),l([d({readOnly:!0})],ze.prototype,"view2dType",void 0),l([d({readOnly:!0})],ze.prototype,"visibleArea",null),l([d()],ze.prototype,"zoom",null),l([d({readOnly:!0})],ze.prototype,"navigating",null),l([d(),ke(e=>e instanceof Foe?e:yS(Noe,e))],ze.prototype,"ui",void 0),ze=l([x("esri.views.View2D")],ze);const ake=ze;let S$=class extends ake{constructor(t){super(t),this.view2dType="map"}};l([d({readOnly:!0})],S$.prototype,"view2dType",void 0),S$=l([x("esri.views.MapView")],S$);const lke=S$;let uke=class Goe{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(pF),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new Goe,r=this._originStores[Pe.DEFAULTS];r&&r.forEach((s,n)=>{i.set(n,R(s),Pe.DEFAULTS)});for(let s=Pe.SERVICE;s<pF;s++){const n=this._originStores[s];n&&n.forEach((o,a)=>{t&&t.has(a)||i.set(a,R(o),s)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=Pe.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const n=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),n!==i}return!1}delete(t,i=Pe.USER){const r=this._originStores[i];if(!r)return;const s=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let n=i-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,n);break}}}return s}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],s=r==null?void 0:r.get(t),n=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,i),n!==s}originOf(t){return this._propertyOriginMap.get(t)||Pe.DEFAULTS}forEach(t){this._values.forEach(t)}};const Boe=e=>{let t=class extends e{constructor(...i){super(...i);const r=Gs(this),s=r.store,n=new uke;r.store=n,DX(r,s,n)}read(i,r){VX(this,i,r)}getAtOrigin(i,r){const s=fO(this),n=Nd(r);if(typeof i=="string")return s.get(i,n);const o={};return i.forEach(a=>{o[a]=s.get(a,n)}),o}originOf(i){return zE(this.originIdOf(i))}originIdOf(i){return fO(this).originOf(i)}revert(i,r){const s=fO(this),n=Nd(r),o=Gs(this);let a;a=typeof i=="string"?i==="*"?s.keys(n):[i]:i,a.forEach(u=>{o.invalidate(u),s.revert(u,n),o.commit(u)})}};return t=l([x("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function fO(e){return Gs(e).store}let FG=class extends Boe(se){};FG=l([x("esri.core.ReadOnlyMultiOriginJSONSupport")],FG);const cke=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return mO(this).delete(i,Nd(r))}write(i,r){return qX(this,i=i||{},r),i}setAtOrigin(i,r,s){Gs(this).setAtOrigin(i,r,Nd(s))}removeOrigin(i){const r=mO(this),s=Nd(i),n=r.keys(s);for(const o of n)r.originOf(o)===s&&r.set(o,r.get(o,s),Pe.USER)}updateOrigin(i,r){const s=mO(this),n=Nd(r),o=pl(this,i);for(let a=n+1;a<pF;++a)s.delete(i,a);s.set(i,o,n)}toJSON(i){return this.write({},i)}};return t=l([x("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function mO(e){return Gs(e).store}const LI=e=>{let t=class extends cke(Boe(e)){constructor(...i){super(...i)}};return t=l([x("esri.core.MultiOriginJSONSupport")],t),t};let xk=class extends LI(se){};xk=l([x("esri.core.MultiOriginJSONSupport")],xk);async function dke(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return og(e);const i=we.WGS84;return await $S(t,i),oc(e,i)}function hke(e,t){if(!Hoe(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function Hoe(e,t){var i;return!!((i=e.typeKeywords)!=null&&i.includes(t))}function FKe(e){return Hoe(e,Woe.HOSTED_SERVICE)}function pke(e,t){const i=e.typeKeywords;if(i){const r=i.indexOf(t);r>-1&&i.splice(r,1)}}function NKe(e,t,i){i?hke(e,t):pke(e,t)}async function LKe(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return dke(i)}const Woe={DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function fke(e){var u;const{portal:t,isOrgItem:i,itemControl:r}=e,s=(u=t.user)==null?void 0:u.privileges;let n=!s||s.includes("features:user:edit"),o=!!i&&!!(s!=null&&s.includes("features:user:fullEdit"));const a=r==="update"||r==="admin";return a?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:a}}}let Yc=class extends P{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([d({type:String,json:{write:{isRequired:!0}}})],Yc.prototype,"facilityIdField",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],Yc.prototype,"layerId",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],Yc.prototype,"nameField",void 0),l([d({type:String,json:{write:!0}})],Yc.prototype,"siteIdField",void 0),l([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Yc.prototype,"sublayerId",void 0),Yc=l([x("esri.layers.support.FacilityLayerInfo")],Yc);const mke=Yc;let Ho=class extends P{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};l([d({type:String,json:{write:{isRequired:!0}}})],Ho.prototype,"facilityIdField",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],Ho.prototype,"layerId",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],Ho.prototype,"levelIdField",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],Ho.prototype,"levelNumberField",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],Ho.prototype,"longNameField",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],Ho.prototype,"shortNameField",void 0),l([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Ho.prototype,"sublayerId",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],Ho.prototype,"verticalOrderField",void 0),Ho=l([x("esri.layers.support.LevelLayerInfo")],Ho);const yke=Ho;let $p=class extends P{constructor(t){super(t),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([d({type:String,json:{write:{isRequired:!0}}})],$p.prototype,"layerId",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],$p.prototype,"nameField",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],$p.prototype,"siteIdField",void 0),l([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],$p.prototype,"sublayerId",void 0),$p=l([x("esri.layers.support.SiteLayerInfo")],$p);const gke=$p;let hy=class extends P{constructor(t){super(t),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};l([d({type:yke,json:{write:{isRequired:!0}}})],hy.prototype,"levelLayer",void 0),l([d({type:mke,json:{write:{isRequired:!0}}})],hy.prototype,"facilityLayer",void 0),l([d({type:gke,json:{write:!0}})],hy.prototype,"siteLayer",void 0),hy=l([x("esri.support.MapFloorInfo")],hy);const vke=hy;var ll;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(ll||(ll={}));var $k;let py=$k=class extends P{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new $k(R({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};l([d({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],py.prototype,"activeRange",void 0),l([d({type:[Number],json:{write:!0}})],py.prototype,"currentRangeExtent",void 0),l([d({type:[Number],json:{write:!0}})],py.prototype,"fullRangeExtent",void 0),py=$k=l([x("esri.webdoc.RangeInfo")],py);const qj=py;var Ek;let za=Ek=class extends P{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new Ek(R({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};l([d({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],za.prototype,"enabled",void 0),l([d({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],za.prototype,"longNames",void 0),l([d({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],za.prototype,"minimized",void 0),l([d({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],za.prototype,"pinnedLevels",void 0),l([d({type:String,json:{read:{source:"site"},write:{target:"site"}}})],za.prototype,"site",void 0),l([d({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],za.prototype,"facility",void 0),l([d({type:String,json:{read:{source:"level"},write:{target:"level"}}})],za.prototype,"level",void 0),za=Ek=l([x("esri.webdoc.widgets.FloorFilter")],za);const wke=za;var Mk;const $2=new be({slider:"slider",picker:"picker"});let fy=Mk=class extends P{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new Mk({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};l([d({type:$2.apiValues,nonNullable:!0,json:{type:$2.jsonValues,default:null,read:{reader:$2.read},write:{isRequired:!0,writer:$2.write}}})],fy.prototype,"interactionMode",void 0),l([d({type:Le,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],fy.prototype,"numStops",void 0),l([d({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],fy.prototype,"stopInterval",void 0),fy=Mk=l([x("esri.webdoc.widgets.Range")],fy);const bke=fy,Gj=Si()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let mb=class extends _e.ClonableMixin(P){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return Xie(this.value,this.unit,"milliseconds")}};l([ee(Gj,{nonNullable:!0})],mb.prototype,"unit",void 0),l([d({type:Number,json:{write:!0},nonNullable:!0})],mb.prototype,"value",void 0),mb=l([x("esri.time.TimeInterval")],mb);const Xf=mb;var Ak;let ji=Ak=class extends P{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){return e?Ni.fromArray(e):void 0}writeCurrentTimeExtent(e,t,i){e&&Lt(i,e.toArray(),t)}readFullTimeExtent(e,t){const i=t.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,s=i.startTime!=null?new Date(i.startTime):null;return new Ni({start:s,end:r})}writeFullTimeExtent(e,t){if(!e)return;const i=t.properties=t.properties||{},r=e.end,s=e.start;r&&(i.endTime=r!=null?r.getTime():null),s&&(i.startTime=s!=null?s.getTime():null)}readStopInterval(e,t,i){return e?Xf.fromJSON({value:e.interval,unit:e.units},i):null}writeStopInterval(e,t,i,r){if(!e)return;const s=e.toJSON(r);Lt("properties.timeStopInterval",{interval:s.value,units:s.unit},t)}readStops(e){return e!=null&&e.length?e.map(t=>new Date(t)):null}writeStops(e,t,i){e!=null&&e.length&&Lt(i,e.map(r=>r.getTime()),t)}clone(){return new Ak(R({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};l([d({type:Ni,json:{type:[[Le,r0]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],ji.prototype,"currentTimeExtent",void 0),l([W("currentTimeExtent")],ji.prototype,"readCurrentTimeExtent",null),l([J("currentTimeExtent")],ji.prototype,"writeCurrentTimeExtent",null),l([d({type:Ni,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],ji.prototype,"fullTimeExtent",void 0),l([W("fullTimeExtent")],ji.prototype,"readFullTimeExtent",null),l([J("fullTimeExtent")],ji.prototype,"writeFullTimeExtent",null),l([d({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],ji.prototype,"loop",void 0),l([d({type:Le,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const e=!!this.stopInterval,t=!!((r=this.stops)!=null&&r.length),i=!(e||t);return{enabled:i,isRequired:i}}}}})],ji.prototype,"numStops",void 0),l([d({type:[1,2],nonNullable:!0,json:{type:Le,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],ji.prototype,"numThumbs",void 0),l([d({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],ji.prototype,"stopDelay",void 0),l([d({type:Xf,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:Gj.jsonValues.filter(e=>e!=="esriTimeUnitsUnknown")}},overridePolicy(){var i;const e=this.numStops!=null,t=!!((i=this.stops)!=null&&i.length);return{enabled:!t,isRequired:!(e||t)}}}}})],ji.prototype,"stopInterval",void 0),l([W("stopInterval")],ji.prototype,"readStopInterval",null),l([J("stopInterval")],ji.prototype,"writeStopInterval",null),l([d({type:[Date],json:{type:[Le],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],ji.prototype,"stops",void 0),l([W("stops")],ji.prototype,"readStops",null),l([J("stops")],ji.prototype,"writeStops",null),ji=Ak=l([x("esri.webdoc.widgets.TimeSlider")],ji);const _ke=ji;var Ik;let my=Ik=class extends P{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new Ik(R({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};l([d({type:bke,json:{write:!0}})],my.prototype,"range",void 0),l([d({type:_ke,json:{write:!0}})],my.prototype,"timeSlider",void 0),l([d({type:wke,json:{write:!0}})],my.prototype,"floorFilter",void 0),my=Ik=l([x("esri.webdoc.Widgets")],my);const Ske=my,Tke={width:600,height:400},E2=1.5;function xke(e,t){t=t||Tke;let{width:i,height:r}=t;const s=i/r;return s<E2?r=i/E2:s>E2&&(i=r*E2),i>e.width&&(r*=e.width/i,i=e.width),r>e.height&&(i*=e.height/r,r=e.height),{width:Math.round(i),height:Math.round(r)}}function $ke(e,t){return{...Zoe(e,t),readResourcePaths:[]}}function zKe(e,t,i){const r=Li(e.itemUrl);return{...Zoe(e,t),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function Zoe(e,t){return{origin:t,url:Li(e.itemUrl),portal:e.portal||Hr.getDefault(),portalItem:e}}let Ep=class extends P{constructor(t){super(t),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const t=this.geometries.map(s=>s.toJSON()),i=this.geometries[0],r={};return r.outSR=Tv(this.outSpatialReference),r.inSR=Tv(i.spatialReference),r.geometries=JSON.stringify({geometryType:l0(i),geometries:t}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};l([d()],Ep.prototype,"geometries",void 0),l([d({type:we,json:{read:{source:"outSR"}}})],Ep.prototype,"outSpatialReference",void 0),l([d()],Ep.prototype,"transformation",void 0),l([d()],Ep.prototype,"transformForward",void 0),Ep=l([x("esri.rest.support.ProjectParameters")],Ep);const Joe=Ep,Eke=yt(Joe);async function Mke(e,t,i){t=Eke(t);const r=MI(e),s={...r.query,f:"json",...t.toJSON()},n=t.outSpatialReference,o=l0(t.geometries[0]),a=aCe(s,i);return Be(r.path+"/project",a).then(({data:{geometries:u}})=>Bse(u,o,n))}function Ake(e,t){var i;return t.resourceInfo?Yoe(t,t.resourceInfo,{origin:e.origin}):(i=t.portalItem)!=null&&i.id?Ike(e,t,t.portalItem):Promise.resolve()}function Yoe(e,t,i){const r={context:{...i,layerContainerType:"operational-layers"}};return e.portalItem&&(r.context.portal=e.portalItem.portal||Hr.getDefault()),L(()=>import("./layersCreator-Cogw1XcB.js"),__vite__mapDeps([137,138,139,140,141,142])).then(({populateOperationalLayers:s})=>{const n=[],o=t.operationalLayers;o!=null&&o.length&&n.push(s(e.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},u=t.tables;return u!=null&&u.length&&n.push(s(e.tables,u,a)),Promise.allSettled(n).then(()=>{})})}async function Ike(e,t,i){var o;if(await i.load().catch(a=>{throw new M(`${e.name}:load-portal-item`,"Failed to load portal item",{error:a})}),i.type!==e.itemType)throw new M(`${e.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${e.itemType}'`,{type:i.type});const r=await i.fetchData();t.resourceInfo=r;const s=$ke(i,e.origin);await Cke(e,t,r,s),t.resourceReferences={portalItem:i,paths:s.readResourcePaths};const n=await Rke(t.initialViewProperties,i,q.getLogger(t));if(n){const a=((o=t.initialViewProperties)==null?void 0:o.clone())??e.createInitialViewProperties();a.viewpoint=n,t.initialViewProperties=a}}function Cke(e,t,i,r){const s=Oke(e,i);return t.read(s,r),Yoe(t,s,r)}function Oke(e,t){const i=e.parseVersion(t.version||"",e.name);return e.currentVersion.validate(i),t.version=`${i.major}.${i.minor}`,t}async function Rke(e,t,i){var n;if((n=e==null?void 0:e.viewpoint)==null?void 0:n.targetGeometry)return null;const s=await Fke(e,t,i);return s?new Bi({targetGeometry:s}):null}async function Fke(e,t,i){const r=e==null?void 0:e.spatialReference,s=t==null?void 0:t.extent;if(!r||!s)return null;if(r.isWGS84)return s.clone();if(r.isWebMercator)return qu(s);const{getGeometryServiceURL:n}=await L(()=>import("./geometryServiceUtils-Bp2U1PZm.js"),[]);try{const o=await n(t),a=new Joe({geometries:[s],outSpatialReference:r});return(await Mke(o,a))[0]}catch(o){i.error("Error projecting item's extent:",o)}return null}function NG(e){return{enabled:!!(e!=null&&e.length)}}var Ck;let yy=Ck=class extends P{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Ck({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([d({type:Boolean,json:{write:!0}})],yy.prototype,"exactMatch",void 0),l([d({type:String,json:{write:!0}})],yy.prototype,"name",void 0),l([ee(b0)],yy.prototype,"type",void 0),yy=Ck=l([x("esri.webdoc.applicationProperties.SearchLayerField")],yy);const Nke=yy;var Ok;let gy=Ok=class extends P{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new Ok(R({field:this.field,id:this.id,subLayer:this.subLayer}))}};l([d({type:Nke,json:{write:{isRequired:!0}}})],gy.prototype,"field",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],gy.prototype,"id",void 0),l([d({type:Le,json:{write:!0}})],gy.prototype,"subLayer",void 0),gy=Ok=l([x("esri.webdoc.applicationProperties.SearchLayer")],gy);const Lke=gy;var Rk;let vy=Rk=class extends P{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Rk({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([d({type:Boolean,json:{write:!0}})],vy.prototype,"exactMatch",void 0),l([d({type:String,json:{write:!0}})],vy.prototype,"name",void 0),l([ee(b0)],vy.prototype,"type",void 0),vy=Rk=l([x("esri.webdoc.applicationProperties.SearchTableField")],vy);const kke=vy;var Fk;let yb=Fk=class extends P{constructor(e){super(e),this.field=null,this.id=null}clone(){return new Fk(R({field:this.field,id:this.id}))}};l([d({type:kke,json:{write:{isRequired:!0}}})],yb.prototype,"field",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],yb.prototype,"id",void 0),yb=Fk=l([x("esri.webdoc.applicationProperties.SearchTable")],yb);const Pke=yb;var Nk;const Qoe=Q.ofType(Lke),Xoe=Q.ofType(Pke);let Ua=Nk=class extends P{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Qoe,this.tables=new Xoe}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,i){t[i]=!e}clone(){return new Nk(R({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};l([d({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Ua.prototype,"addressSearchEnabled",void 0),l([W("addressSearchEnabled")],Ua.prototype,"readAddressSearchEnabled",null),l([J("addressSearchEnabled")],Ua.prototype,"writeAddressSearchEnabled",null),l([d({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Ua.prototype,"enabled",void 0),l([d({type:String,json:{write:!0}})],Ua.prototype,"hintText",void 0),l([d({type:Qoe,json:{write:{overridePolicy:NG},origins:{"web-scene":{write:{isRequired:!0}}}}})],Ua.prototype,"layers",void 0),l([d({type:Xoe,json:{read:!0,write:{overridePolicy:NG}}})],Ua.prototype,"tables",void 0),Ua=Nk=l([x("esri.webdoc.applicationProperties.Search")],Ua);const Dke=Ua;var Lk;let T$=Lk=class extends P{constructor(e){super(e),this.search=null}clone(){return new Lk(R({search:this.search}))}};l([d({type:Dke,json:{write:!0}})],T$.prototype,"search",void 0),T$=Lk=l([x("esri.webdoc.applicationProperties.Viewing")],T$);const jke=T$;var kk;let wy=kk=class extends P{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new kk(R({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};l([d({json:{write:!0}})],wy.prototype,"editing",void 0),l([d({json:{write:!0}})],wy.prototype,"offline",void 0),l([d({type:jke,json:{write:!0}})],wy.prototype,"viewing",void 0),wy=kk=l([x("esri.webmap.ApplicationProperties")],wy);const Vke=wy;var Pk;let Cu=Pk=class extends P{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return KX(this.url)}get isDataURI(){return sc(this.url)}clone(){return new Pk({url:this.url})}};l([d({type:String,json:{write:{isRequired:!0}}})],Cu.prototype,"url",void 0),l([d()],Cu.prototype,"isSecureUrl",null),l([d()],Cu.prototype,"isDataURI",null),Cu=Pk=l([x("esri.webdoc.support.SlideThumbnail")],Cu);const zke={type:Ni,json:{read:{source:"timeExtent",reader:e=>e?Array.isArray(e)?Ni.fromArray(e):Ni.fromJSON(e):null},write:{writer:(e,t,i,r)=>{e&&(e.isEmpty?r!=null&&r.messages&&r.messages.push(new M("invalid-timeExtent","TimeExtent cannot be empty")):t[i]=e.toArray())},target:{timeExtent:{type:[[Le,r0]]}}}}};var Dk;let qa=Dk=class extends ac.IdentifiableMixin(P){constructor(e){super(e),this.name=null,this.thumbnail=new Cu,this.timeExtent=null}castThumbnail(e){return typeof e=="string"?new Cu({url:e}):yt(Cu,e)}set viewpoint(e){const{targetGeometry:t,scale:i}=e;t!=null&&t.type==="point"&&i==null&&q.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:i,viewpoint:r}=t;return Bi.fromJSON(r||{targetGeometry:i})}writeViewpoint(e,t,i,r){if(!e)return;const{targetGeometry:s}=e;if(s==null||s.type==="extent")s!=null&&(t.extent=s.toJSON()),t[i]=e.toJSON();else{const n="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r!=null&&r.messages?r.messages.push(new M("property:unsupported",n)):q.getLogger(this).error(n)}}clone(){return new Dk(R({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};l([d({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],qa.prototype,"name",void 0),l([d({type:Cu,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],qa.prototype,"thumbnail",void 0),l([ke("thumbnail")],qa.prototype,"castThumbnail",null),l([d(zke)],qa.prototype,"timeExtent",void 0),l([d({type:Bi,nonNullable:!0,json:{write:!0}})],qa.prototype,"viewpoint",null),l([W("viewpoint",["extent","viewpoint"])],qa.prototype,"readViewpoint",null),l([J("viewpoint")],qa.prototype,"writeViewpoint",null),qa=Dk=l([x("esri.webmap.Bookmark")],qa);const Uke=qa;let ru=class extends _e.ClonableMixin(se){constructor(t){super(t),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=An,this.viewpoint=null}};l([d({type:NI})],ru.prototype,"background",void 0),l([d({type:qj})],ru.prototype,"rangeInfo",void 0),l([d({type:we})],ru.prototype,"spatialReference",void 0),l([d({type:Ni})],ru.prototype,"timeExtent",void 0),l([d({nonNullable:!0})],ru.prototype,"timeZone",void 0),l([d({type:Bi})],ru.prototype,"viewpoint",void 0),ru=l([x("esri.webmap.InitialViewProperties")],ru);const HM=ru,Koe=Q.ofType(Uke),qke=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),Gke="ArcGIS Pro",Bke=Woe.JSAPI;let Et=class extends LI(In.LoadableMixin(f0.EsriPromiseMixin(ere))){constructor(t){super(t),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new Koe,this.floorInfo=null,this.initialViewProperties=new HM,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=fl(async(i,r,s)=>{const{save:n,saveAs:o}=await L(()=>import("./webdocSaveUtils-BeNDgZpY.js"),__vite__mapDeps([242,243,244,245,246,247]));switch(i){case ll.SAVE:return n(this.context,this,r);case ll.SAVE_AS:return o(this.context,this,s,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=St(this.portalItem)}initialize(){if(this.when().catch(t=>{q.getLogger(this).error("#load()","Failed to load web map",t)}),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(t)}}set authoringApp(t){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",t)}writeAuthoringApp(t,i){t&&this._isAuthoringAppSetByUser?i.authoringApp=t:i.authoringApp=Bke}set authoringAppVersion(t){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",t)}writeAuthoringAppVersion(t,i){t&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=t:i.authoringAppVersion=oK}readInitialViewProperties(t,i){var o,a;const r=new HM;i.background&&(r.background=NI.fromJSON(i.background));const s=(o=i.initialState)==null?void 0:o.timeExtent;s&&(r.timeExtent=Ni.fromArray(s));const n=(a=i.initialState)==null?void 0:a.viewpoint;return n&&(n.rotation&&Dg.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===Gke&&(n.rotation*=-1),r.viewpoint=Bi.fromJSON(n)),i.mapRangeInfo&&(r.rangeInfo=qj.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=we.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(t,i,r,s){var a;if(!t)return;(a=t.background)!=null&&a.color&&(i.background=t.background.write({},s));const{timeExtent:n,viewpoint:o}=t;if(o||n){const u={};o&&(u.viewpoint=o.write({},s)),n&&(u.timeExtent=n.toArray()),i.initialState=u}t.rangeInfo&&(i.mapRangeInfo=t.rangeInfo.toJSON(s)),t.spatialReference&&(i.spatialReference=t.spatialReference.write({},s)),i.timeZone=t.timeZone}writeLayers(t,i,r,s){i[r]=this._writeLayers(t,s,"operational-layers")}readSourceVersion(t,i){const[r,s]=i.version.split(".");return new Dg(parseInt(r,10),parseInt(s,10))}writeSourceVersion(t,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(t,i,r,s){const n=this._writeLayers(t,s,"tables");n.length&&(i[r]=n)}get thumbnailUrl(){var t;return((t=this.portalItem)==null?void 0:t.thumbnailUrl)||null}set thumbnailUrl(t){t?(this._override("thumbnailUrl",t),this._thumbnailFilename=this._generateCustomThumbnailFilename(t)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(t){return this.addResolvingPromise(Ake(this.context,this)),Promise.resolve(this)}loadAll(){return aI(this,t=>{t(this.ground,this.basemap,this.layers,this.tables)})}read(t,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();zX(this,t,s=>super.read(t,s),i),this._restoreAuthoringPropsFromState(r)}write(t,i){if(this.loadStatus!=="loaded"){const r=new M("webmap:not-loaded","Web map must be loaded before it can be serialized");throw q.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(t,i)}async save(t){return this._debouncedSaveOperations(ll.SAVE,t)}async saveAs(t,i){return this._debouncedSaveOperations(ll.SAVE_AS,i,t)}async updateFrom(t,i){const r=this._updateFromInternal(t,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(t){var r,s,n,o;const i=this.resourceInfo;return this._collectAllLayersJSON([...((r=i==null?void 0:i.baseMap)==null?void 0:r.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((o=(n=(s=this.basemap)==null?void 0:s.resourceInfo)==null?void 0:n.data)==null?void 0:o.baseMapLayers)||[]]).find(a=>a.id===t.id)}async updateItemThumbnail(){var t;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((t=this.portalItem)==null?void 0:t.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let t=this.thumbnailUrl;return t&&(t=this._isOverridden("thumbnailUrl")?t:iK(t,"w","8192")),{thumbnailUrl:t,filename:this._thumbnailFilename}}restoreThumbnailFromState(t){this.thumbnailUrl=t.thumbnailUrl,this._thumbnailFilename=t.filename}_collectAllLayersJSON(t){return t.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(t,i,r){return i={...i,layerContainerType:r},t.map(s=>xN(s,r==="tables"?null:this.getLayerJSONFromResourceInfo(s),i)).filter(Br).toArray()}_validateJSON(t){const i=Dg.parse(t.version||"","webmap");return this.context.currentVersion.validate(i),t.version=`${i.major}.${i.minor}`,t}_removeDanglingLayerRefs(){var o,a;const t=this.applicationProperties,i=(o=t==null?void 0:t.viewing)==null?void 0:o.search,r=u=>this.allLayers.some(c=>c.id===u);if(i!=null&&i.layers&&(i.layers=i.layers.filter(u=>r(u.id))),i!=null&&i.tables&&(i.tables=i.tables.filter(u=>this.tables.some(c=>c.id===u.id))),t){const u=(a=t.editing)==null?void 0:a.locationTracking;u!=null&&u.info&&!r(u.info.layerId)&&(t.editing=null)}const s="presentation"in this?this.presentation:null,n=s==null?void 0:s.slides;n&&n.forEach(u=>{u.visibleLayers&&(u.visibleLayers=u.visibleLayers.filter(c=>r(c.id)))})}async _updateFromInternal(t,i){if(i??(i={}),await vl(()=>t.ready),this._updateInitialViewProperties(t,i),t.map===this)for(const r of t.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(t,i)}_updateInitialViewProperties(t,i){var r,s;if(i.backgroundExcluded||(this.initialViewProperties.background=(r=t.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(s=t.spatialReference)==null?void 0:s.clone(),this.initialViewProperties.timeZone=t.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new Bi({rotation:t.rotation,scale:i.scalePreserved?t.scale:null,targetGeometry:this._getViewExtent(t)})),!i.widgetsExcluded)for(const n of t.persistableViewModels)n.updateWebDocument(this)}_getViewExtent(t){const i=t.center.clone().normalize(),r=t.extent.clone(),s=r.width/2;return r.xmin=i.x-s,r.xmax=i.x+s,r}async _updateThumbnailUrl(t,i){if(i.thumbnailExcluded)return;const r=xke(t,i.thumbnailSize),s=await t.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(s.dataUrl)}_setAutoGeneratedThumbnail(t){this.thumbnailUrl=t,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(t){if(sc(t)){const i=Df(t),r=i==null?void 0:i.mediaType,s=r&&qke.get(r.toLowerCase())||null,n=`thumbnail${Date.now()}`;return s?`${n}.${s}`:n}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(t){t.isAuthoringAppSetByUser?this.authoringApp=t.authoringApp:this._isAuthoringAppSetByUser=!1,t.isAuthoringAppVersionSetByUser?this.authoringAppVersion=t.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};l([d()],Et.prototype,"_updateFromPromise",void 0),l([d({type:Vke,json:{write:!0}})],Et.prototype,"applicationProperties",void 0),l([d({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Et.prototype,"authoringApp",null),l([J("authoringApp")],Et.prototype,"writeAuthoringApp",null),l([d({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Et.prototype,"authoringAppVersion",null),l([J("authoringAppVersion")],Et.prototype,"writeAuthoringAppVersion",null),l([d({type:Koe,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],Et.prototype,"bookmarks",void 0),l([d({type:vke,json:{name:"mapFloorInfo",write:!0}})],Et.prototype,"floorInfo",void 0),l([d({type:HM,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:NI},"initialState.timeExtent":{type:Ni},"initialState.viewpoint":{type:Bi},mapRangeInfo:{type:qj},spatialReference:{type:we},"timeZone:":{type:String}}}}})],Et.prototype,"initialViewProperties",void 0),l([W("initialViewProperties")],Et.prototype,"readInitialViewProperties",null),l([J("initialViewProperties")],Et.prototype,"writeInitialViewProperties",null),l([d({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Et.prototype,"layers",void 0),l([J("layers")],Et.prototype,"writeLayers",null),l([d({type:yl})],Et.prototype,"portalItem",void 0),l([d()],Et.prototype,"resourceInfo",void 0),l([d({readOnly:!0,type:Dg,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Et.prototype,"sourceVersion",void 0),l([W("sourceVersion")],Et.prototype,"readSourceVersion",null),l([J("sourceVersion")],Et.prototype,"writeSourceVersion",null),l([d({json:{read:!1,write:{ignoreOrigin:!0}}})],Et.prototype,"tables",void 0),l([J("tables")],Et.prototype,"writeTables",null),l([d()],Et.prototype,"thumbnailUrl",null),l([d()],Et.prototype,"updatingFromView",null),l([d({type:Ske,json:{write:!0}})],Et.prototype,"widgets",void 0),Et=l([x("esri.WebDocument2D")],Et);const Hke=Et,Pt=(e=>e)(["operational-layers","basemap","ground"]);var jk;let Mp=jk=class extends P{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new jk({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([d({type:String,json:{write:!0}})],Mp.prototype,"expression",void 0),l([d({type:String,json:{write:!0}})],Mp.prototype,"name",void 0),l([d({type:["boolean","date","number","string"],json:{write:!0}})],Mp.prototype,"returnType",void 0),l([d({type:String,json:{write:!0}})],Mp.prototype,"title",void 0),Mp=jk=l([x("esri.form.ExpressionInfo")],Mp);const Wke=Mp;let Ap=class extends P{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};l([d({type:String,json:{write:!0}})],Ap.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],Ap.prototype,"label",void 0),l([d()],Ap.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Ap.prototype,"visibilityExpression",void 0),Ap=l([x("esri.form.elements.Element")],Ap);const wh=Ap;let x$=class extends _e.ClonableMixin(P){constructor(t){super(t),this.type=null}};l([d()],x$.prototype,"type",void 0),x$=l([x("esri.form.elements.inputs.attachments.Input")],x$);const bh=x$,kI=["any","capture","upload"];let by=class extends bh{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};l([d({type:["audio"],readOnly:!0,json:{write:!0}})],by.prototype,"type",void 0),l([d({type:kI,json:{write:!0}})],by.prototype,"inputMethod",void 0),l([d({type:Number,json:{write:!0}})],by.prototype,"maxDuration",void 0),by=l([x("esri.form.elements.inputs.attachments.AudioInput")],by);const LG=by;let gb=class extends bh{constructor(t){super(t),this.type="document",this.maxFileSize=null}};l([d({type:["document"],readOnly:!0,json:{write:!0}})],gb.prototype,"type",void 0),l([d({type:Number,json:{write:!0}})],gb.prototype,"maxFileSize",void 0),gb=l([x("esri.form.elements.inputs.attachments.DocumentInput")],gb);const kG=gb;let _y=class extends bh{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};l([d({type:["image"],readOnly:!0,json:{write:!0}})],_y.prototype,"type",void 0),l([d({type:kI,json:{write:!0}})],_y.prototype,"inputMethod",void 0),l([d({type:Number,json:{write:!0}})],_y.prototype,"maxImageSize",void 0),_y=l([x("esri.form.elements.inputs.attachments.ImageInput")],_y);const PG=_y;let vb=class extends bh{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};l([d({type:["signature"],readOnly:!0,json:{write:!0}})],vb.prototype,"type",void 0),l([d({type:kI,json:{write:!0}})],vb.prototype,"inputMethod",void 0),vb=l([x("esri.form.elements.inputs.attachments.SignatureInput")],vb);const DG=vb;let Sy=class extends bh{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};l([d({type:["video"],readOnly:!0,json:{write:!0}})],Sy.prototype,"type",void 0),l([d({type:kI,json:{write:!0}})],Sy.prototype,"inputMethod",void 0),l([d({type:Number,json:{write:!0}})],Sy.prototype,"maxDuration",void 0),Sy=l([x("esri.form.elements.inputs.attachments.VideoInput")],Sy);const jG=Sy;function eae(e){return{nestableTypes:{base:bh,key:"type",typeMap:{audio:LG,document:kG,image:PG,signature:DG,video:jG}},allTypes:{base:bh,key:"type",typeMap:{attachment:e,audio:LG,document:kG,image:PG,signature:DG,video:jG}}}}function Zke(e,t,i){return e?e.map(r=>va(t.nestableTypes,r)):null}function Jke(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function Yke(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}let Ya=class extends bh{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return Zke(t,yO)}readInputs(t,i){return Jke(i.inputTypes,yO)}writeInputs(t,i){i.inputTypes=Yke(t,yO)}};l([d({type:["attachment"],readOnly:!0,json:{write:!0}})],Ya.prototype,"type",void 0),l([d({type:["any","exact","exactOrNone"],json:{write:!0}})],Ya.prototype,"attachmentAssociationType",void 0),l([d({json:{write:{isRequired:!0}}})],Ya.prototype,"inputTypes",void 0),l([ke("inputTypes")],Ya.prototype,"castInputs",null),l([W("inputTypes")],Ya.prototype,"readInputs",null),l([J("inputTypes")],Ya.prototype,"writeInputs",null),Ya=l([x("esri.form.elements.inputs.attachments.AttachmentInput")],Ya);const yO=eae(Ya),Qke=Ya;var Vk;const Xke=eae(Qke);let an=Vk=class extends wh{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new Vk({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};l([d({type:Boolean,json:{write:!0}})],an.prototype,"allowUserRename",void 0),l([d({type:String,json:{write:{isRequired:!0}}})],an.prototype,"attachmentKeyword",void 0),l([d({type:Boolean,json:{write:!0}})],an.prototype,"displayFilename",void 0),l([d({type:String,json:{write:!0}})],an.prototype,"editableExpression",void 0),l([d({type:String,json:{write:!0}})],an.prototype,"filenameExpression",void 0),l([d({types:Xke.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],an.prototype,"input",void 0),l([d({type:Number,json:{write:!0}})],an.prototype,"maxAttachmentCount",void 0),l([d({type:Number,json:{write:!0}})],an.prototype,"minAttachmentCount",void 0),l([d({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],an.prototype,"type",void 0),l([d({type:Boolean,json:{write:!0}})],an.prototype,"useOriginalFilename",void 0),an=Vk=l([x("esri.form.elements.AttachmentElement")],an);const VG=an;let $$=class extends P{constructor(t){super(t),this.type=null}};l([d()],$$.prototype,"type",void 0),$$=l([x("esri.form.elements.inputs.Input")],$$);const cc=$$;let wb=class extends cc{constructor(t){super(t),this.maxLength=null,this.minLength=0}};l([d({type:Number,json:{write:!0}})],wb.prototype,"maxLength",void 0),l([d({type:Number,json:{write:!0}})],wb.prototype,"minLength",void 0),wb=l([x("esri.form.elements.inputs.TextInput")],wb);const Bj=wb;var zk;let E$=zk=class extends Bj{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new zk({maxLength:this.maxLength,minLength:this.minLength})}};l([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],E$.prototype,"type",void 0),E$=zk=l([x("esri.form.elements.inputs.BarcodeScannerInput")],E$);const Kke=E$;var Uk;let Ty=Uk=class extends cc{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new Uk({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};l([d({type:String,json:{write:!0}})],Ty.prototype,"noValueOptionLabel",void 0),l([d({type:Boolean,json:{write:!0}})],Ty.prototype,"showNoValueOption",void 0),l([d({type:["combo-box"],json:{read:!1,write:!0}})],Ty.prototype,"type",void 0),Ty=Uk=l([x("esri.form.elements.inputs.ComboBoxInput")],Ty);const ePe=Ty;var qk;function zG(e){return e??null}function UG(e){return e??null}let Ga=qk=class extends cc{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return zG(t.max)}writeMax(e,t){t.max=UG(e)}readMin(e,t){return zG(t.min)}writeMin(e,t){t.min=UG(e)}clone(){return new qk({max:this.max,min:this.min})}};l([d({type:String,json:{type:String,write:!0}})],Ga.prototype,"max",void 0),l([W("max")],Ga.prototype,"readMax",null),l([J("max")],Ga.prototype,"writeMax",null),l([d({type:String,json:{type:String,write:!0}})],Ga.prototype,"min",void 0),l([W("min")],Ga.prototype,"readMin",null),l([J("min")],Ga.prototype,"writeMin",null),l([d({type:["date-picker"],json:{read:!1,write:!0}})],Ga.prototype,"type",void 0),Ga=qk=l([x("esri.form.elements.inputs.DatePickerInput")],Ga);const tPe=Ga;var Gk;function gO(e){return e??null}function vO(e){return e??null}let Ts=Gk=class extends cc{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return gO(t.max)}writeMax(e,t){t.max=vO(e)}readMin(e,t){return gO(t.min)}writeMin(e,t){t.min=vO(e)}readTimeResolution(e,t){return gO(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=vO(e)}clone(){return new Gk({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([d({type:Boolean,json:{write:!0}})],Ts.prototype,"includeTimeOffset",void 0),l([d({type:String,json:{type:String,write:!0}})],Ts.prototype,"max",void 0),l([W("max")],Ts.prototype,"readMax",null),l([J("max")],Ts.prototype,"writeMax",null),l([d({type:String,json:{type:String,write:!0}})],Ts.prototype,"min",void 0),l([W("min")],Ts.prototype,"readMin",null),l([J("min")],Ts.prototype,"writeMin",null),l([d({type:String,json:{type:String,write:!0}})],Ts.prototype,"timeResolution",void 0),l([W("timeResolution")],Ts.prototype,"readTimeResolution",null),l([J("timeResolution")],Ts.prototype,"writeTimeResolution",null),l([d({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Ts.prototype,"type",void 0),Ts=Gk=l([x("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Ts);const iPe=Ts;var Bk;function qG(e){return e!=null?new Date(e):null}function GG(e){return e?e.getTime():null}let Wo=Bk=class extends cc{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return qG(t.max)}writeMax(e,t){t.max=GG(e)}readMin(e,t){return qG(t.min)}writeMin(e,t){t.min=GG(e)}clone(){return new Bk({includeTime:this.includeTime,max:this.max,min:this.min})}};l([d({type:Boolean,json:{write:!0}})],Wo.prototype,"includeTime",void 0),l([d({type:Date,json:{type:Number,write:!0}})],Wo.prototype,"max",void 0),l([W("max")],Wo.prototype,"readMax",null),l([J("max")],Wo.prototype,"writeMax",null),l([d({type:Date,json:{type:Number,write:!0}})],Wo.prototype,"min",void 0),l([W("min")],Wo.prototype,"readMin",null),l([J("min")],Wo.prototype,"writeMin",null),l([d({type:["datetime-picker"],json:{read:!1,write:!0}})],Wo.prototype,"type",void 0),Wo=Bk=l([x("esri.form.elements.inputs.DateTimePickerInput")],Wo);const rPe=Wo;var Hk;let xy=Hk=class extends cc{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new Hk({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};l([d({type:String,json:{write:!0}})],xy.prototype,"noValueOptionLabel",void 0),l([d({type:Boolean,json:{write:!0}})],xy.prototype,"showNoValueOption",void 0),l([d({type:["radio-buttons"],json:{read:!1,write:!0}})],xy.prototype,"type",void 0),xy=Hk=l([x("esri.form.elements.inputs.RadioButtonsInput")],xy);const sPe=xy;var Wk;let $y=Wk=class extends cc{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Wk({offValue:this.offValue,onValue:this.onValue})}};l([d({type:[String,Number],json:{write:!0}})],$y.prototype,"offValue",void 0),l([d({type:[String,Number],json:{write:!0}})],$y.prototype,"onValue",void 0),l([d({type:["switch"],json:{read:!1,write:!0}})],$y.prototype,"type",void 0),$y=Wk=l([x("esri.form.elements.inputs.SwitchInput")],$y);const nPe=$y;var Zk;let M$=Zk=class extends Bj{constructor(e){super(e),this.type="text-area"}clone(){return new Zk({maxLength:this.maxLength,minLength:this.minLength})}};l([d({type:["text-area"],json:{read:!1,write:!0}})],M$.prototype,"type",void 0),M$=Zk=l([x("esri.form.elements.inputs.TextAreaInput")],M$);const oPe=M$;var Jk;let A$=Jk=class extends Bj{constructor(e){super(e),this.type="text-box"}clone(){return new Jk({maxLength:this.maxLength,minLength:this.minLength})}};l([d({type:["text-box"],json:{read:!1,write:!0}})],A$.prototype,"type",void 0),A$=Jk=l([x("esri.form.elements.inputs.TextBoxInput")],A$);const aPe=A$;var Yk;function wO(e){return e??null}function bO(e){return e??null}let ln=Yk=class extends cc{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return wO(t.max)}writeMax(e,t){t.max=bO(e)}readMin(e,t){return wO(t.min)}writeMin(e,t){t.min=bO(e)}readTimeResolution(e,t){return wO(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=bO(e)}clone(){return new Yk({max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([d({type:String,json:{type:String,write:!0}})],ln.prototype,"max",void 0),l([W("max")],ln.prototype,"readMax",null),l([J("max")],ln.prototype,"writeMax",null),l([d({type:String,json:{type:String,write:!0}})],ln.prototype,"min",void 0),l([W("min")],ln.prototype,"readMin",null),l([J("min")],ln.prototype,"writeMin",null),l([d({type:String,json:{type:String,write:!0}})],ln.prototype,"timeResolution",void 0),l([W("timeResolution")],ln.prototype,"readTimeResolution",null),l([J("timeResolution")],ln.prototype,"writeTimeResolution",null),l([d({type:["time-picker"],json:{read:!1,write:!0}})],ln.prototype,"type",void 0),ln=Yk=l([x("esri.form.elements.inputs.TimePickerInput")],ln);const lPe=ln,uPe={base:cc,key:"type",typeMap:{"barcode-scanner":Kke,"combo-box":ePe,"date-picker":tPe,"datetime-picker":rPe,"datetimeoffset-picker":iPe,"radio-buttons":sPe,switch:nPe,"text-area":oPe,"text-box":aPe,"time-picker":lPe}};var Qk;let qn=Qk=class extends wh{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Qk({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};l([d({types:fse,json:{read:{reader:TI},write:!0}})],qn.prototype,"domain",void 0),l([d({type:Boolean,json:{write:!0}})],qn.prototype,"editable",void 0),l([d({type:String,json:{write:!0}})],qn.prototype,"editableExpression",void 0),l([d({type:String,json:{write:!0}})],qn.prototype,"fieldName",void 0),l([d({type:String,json:{write:!0}})],qn.prototype,"hint",void 0),l([d({types:uPe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],qn.prototype,"input",void 0),l([d({type:String,json:{write:!0}})],qn.prototype,"requiredExpression",void 0),l([d({type:String,json:{read:!1,write:!0}})],qn.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],qn.prototype,"valueExpression",void 0),qn=Qk=l([x("esri.form.elements.FieldElement")],qn);const BG=qn;var Xk;let su=Xk=class extends wh{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Xk({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:R(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};l([d({type:Number,json:{write:!0}})],su.prototype,"displayCount",void 0),l([d({type:["list"],json:{write:!0}})],su.prototype,"displayType",void 0),l([d({type:String,json:{write:!0}})],su.prototype,"editableExpression",void 0),l([d({type:[rj],json:{write:!0}})],su.prototype,"orderByFields",void 0),l([d({type:Number,json:{write:!0}})],su.prototype,"relationshipId",void 0),l([d({type:["relationship"],json:{read:!1,write:!0}})],su.prototype,"type",void 0),su=Xk=l([x("esri.form.elements.RelationshipElement")],su);const HG=su;var Kk;let Ey=Kk=class extends wh{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new Kk({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};l([d({type:String,json:{write:!0}})],Ey.prototype,"text",void 0),l([d({type:String,json:{write:!0}})],Ey.prototype,"textFormat",void 0),l([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Ey.prototype,"type",void 0),Ey=Kk=l([x("esri.form.elements.TextElement")],Ey);const WG=Ey;let My=class extends _e.ClonableMixin(wh){constructor(t){super(t),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};l([d({type:[Cre],json:{write:{isRequired:!0}}})],My.prototype,"associationTypes",void 0),l([d({type:String,json:{write:!0}})],My.prototype,"editableExpression",void 0),l([d({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],My.prototype,"type",void 0),My=l([x("esri.form.elements.UtilityNetworkAssociationsElement")],My);const ZG=My,cPe=e=>e.type==="field",dPe=e=>e.type==="group",hPe=e=>e.type==="text";function tae(e){return{typesWithGroup:{base:wh,key:"type",typeMap:{attachment:VG,field:BG,group:e,relationship:HG,text:WG,utilityNetworkAssociations:ZG}},typesWithoutGroup:{base:wh,key:"type",typeMap:{attachment:VG,field:BG,relationship:HG,text:WG,utilityNetworkAssociations:ZG}}}}function iae(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function rae(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function sae(e,t,i=!0){return e?e.map(r=>va(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var eP;let Qa=eP=class extends wh{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return sae(e,_O,!1)}readElements(e,t){return iae(t.formElements,_O,!1)}writeElements(e,t){t.formElements=rae(e,_O,!1)}clone(){return new eP({description:this.description,elements:R(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};l([d({json:{write:!0}})],Qa.prototype,"elements",void 0),l([ke("elements")],Qa.prototype,"castElements",null),l([W("elements",["formElements"])],Qa.prototype,"readElements",null),l([J("elements")],Qa.prototype,"writeElements",null),l([d({type:["collapsed","expanded"],json:{write:!0}})],Qa.prototype,"initialState",void 0),l([d({type:String,json:{read:!1,write:!0}})],Qa.prototype,"type",void 0),Qa=eP=l([x("esri.form.elements.GroupElement")],Qa);const _O=tae(Qa),pPe=Qa;var tP;const SO=tae(pPe);let Zo=tP=class extends P{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return sae(e,SO)}readElements(e,t){return iae(t.formElements,SO)}writeElements(e,t){t.formElements=rae(e,SO)}clone(){return new tP({description:this.description,expressionInfos:R(this.expressionInfos),elements:R(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const i=new Set,{description:r,elements:s,expressionInfos:n,title:o}=this;if(F_(i,e,r),F_(i,e,o),!s)return[];const a=fPe(s,n).map(u=>Wr(i,e,u));await Promise.all(a);for(const u of s)nae(i,{fieldsIndex:e,relationships:t},u);return Array.from(i).sort()}};function nae(e,t,i){var s;const{fieldsIndex:r}=t;if(!r||r.fields.length!==e.size)switch(F_(e,r,i.label),F_(e,r,i.description),i.type){case"field":ps(e,r,i.fieldName);break;case"group":i.elements.forEach(n=>nae(e,t,n));break;case"relationship":if(t.relationships){const n=t.relationships.find(o=>o.id===i.relationshipId);n&&ps(e,r,n.keyField)}Zf(e,r,(s=i.orderByFields)==null?void 0:s.map(n=>n.field));break;case"text":F_(e,r,i.text)}}function fPe(e,t){if(!t||t.length===0)return[];const i=oae(e),r=[];for(const s of t)i.has(s.name)&&r.push(s.expression);return r}function oae(e){const t=new Set;for(const i of e)if(mU(t,i.visibilityExpression),!hPe(i)){if(dPe(i))HE(t,oae(i.elements));else if(mU(t,i.editableExpression),cPe(i)){const{requiredExpression:r,valueExpression:s}=i;HE(t,[r,s])}}return t}function F_(e,t,i){Zf(e,t,tj(i))}l([d({type:String,json:{write:!0}})],Zo.prototype,"description",void 0),l([d({json:{write:!0}})],Zo.prototype,"elements",void 0),l([ke("elements")],Zo.prototype,"castElements",null),l([W("elements",["formElements"])],Zo.prototype,"readElements",null),l([J("elements")],Zo.prototype,"writeElements",null),l([d({type:[Wke],json:{write:!0}})],Zo.prototype,"expressionInfos",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],Zo.prototype,"preserveFieldValuesWhenHidden",void 0),l([d({type:String,json:{write:!0}})],Zo.prototype,"title",void 0),Zo=tP=l([x("esri.form.FormTemplate")],Zo);const mPe=Zo;function JG(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const s of r)s.length>2&&(s[2]*=i)}function yPe(e,t,i){if(!e&&!t||!i)return;const r=$v(i);YG(e,i,r),YG(t,i,r)}function YG(e,t,i){if(e)for(const r of e)gPe(r.geometry,t,i)}function gPe(e,t,i){if(!(e!=null&&e.spatialReference)||ei(e.spatialReference,t))return;const r=$v(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)JG(e,e.rings,r);else if("paths"in e)JG(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=r)}}function iP(e,t,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=Dte(i.geometryType,t,e.outSpatialReference);if(r!=null)for(const s of i.features)r(s.geometry)}var rP;const sP=new be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Xi=rP=class extends P{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,_i)}writeGeometryType(e,t,i,r){if(e)return void sP.write(e,t,i,r);const{features:s}=this;if(s){for(const n of s)if((n==null?void 0:n.geometry)!=null)return void sP.write(n.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=wa(e);return r&&!i&&t.spatialReference&&(r.spatialReference=we.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new rP(this.cloneProperties())}cloneProperties(){return R({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const s=e==null?void 0:e[i];r.geometry=(s==null?void 0:s.toJSON())||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,s]}=e,n=c=>Math.round((c-r)/t),o=c=>Math.round((s-c)/i),a=this.features,u=this._getQuantizationFunction(this.geometryType,n,o);for(let c=0,h=a.length;c<h;c++)u!=null&&u(a[c].geometry)||(a.splice(c,1),c--,h--);return this.transform=e,this}unquantize(){var m,y;const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[n,o]}=i,a=g=>g*n+r,u=g=>s-g*o;let c=null,h=null;if(this.hasZ&&((m=i==null?void 0:i.scale)==null?void 0:m[2])!=null){const{translate:[,,g],scale:[,,v]}=i;c=b=>b*v+g}if(this.hasM&&((y=i==null?void 0:i.scale)==null?void 0:y[3])!=null){const{translate:[,,,g],scale:[,,,v]}=i;h=b=>b==null?b:b*v+g}const p=this._getHydrationFunction(e,a,u,c,h);for(const{geometry:g}of t)g!=null&&p&&p(g);return this.transform=null,this}readFeaturesWithClass(e,t,i){var n;const r=we.fromJSON(t.spatialReference),s=[];for(let o=0;o<e.length;o++){const a=e[o],u=i.fromJSON(a),c=(n=a.geometry)==null?void 0:n.spatialReference;u.geometry==null||c||(u.geometry.spatialReference=r);const h=a.aggregateGeometries,p=u.aggregateGeometries;if(h&&p!=null)for(const m in p){const y=p[m],g=h[m],v=g==null?void 0:g.spatialReference;y==null||v||(y.spatialReference=r)}s.push(u)}return s}_quantizePoints(e,t,i){let r,s;const n=[];for(let o=0,a=e.length;o<a;o++){const u=e[o];if(o>0){const c=t(u[0]),h=i(u[1]);c===r&&h===s||(n.push([c-r,h-s]),r=c,s=h)}else r=t(u[0]),s=i(u[1]),n.push([r,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const s=Gu(r)?r.rings:r.paths,n=[];for(let o=0,a=s.length;o<a;o++){const u=s[o],c=this._quantizePoints(u,t,i);c&&n.push(c)}return n.length>0?(Gu(r)?r.rings=n:r.paths=n,r):null}:e==="multipoint"?r=>{const s=this._quantizePoints(r.points,t,i);return s&&s.length>0?(r.points=s,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i,r,s){return e==="point"?n=>{n.x=t(n.x),n.y=i(n.y),r&&(n.z=r(n.z))}:e==="polyline"||e==="polygon"?n=>{const o=Gu(n)?n.rings:n.paths;let a,u;for(let c=0,h=o.length;c<h;c++){const p=o[c];for(let m=0,y=p.length;m<y;m++){const g=p[m];m>0?(a+=g[0],u+=g[1]):(a=g[0],u=g[1]),g[0]=t(a),g[1]=i(u)}}if(r&&s)for(let c=0,h=o.length;c<h;c++){const p=o[c];for(let m=0,y=p.length;m<y;m++){const g=p[m];g[2]=r(g[2]),g[3]=s(g[3])}}else if(r)for(let c=0,h=o.length;c<h;c++){const p=o[c];for(let m=0,y=p.length;m<y;m++){const g=p[m];g[2]=r(g[2])}}else if(s)for(let c=0,h=o.length;c<h;c++){const p=o[c];for(let m=0,y=p.length;m<y;m++){const g=p[m];g[2]=s(g[2])}}}:e==="extent"?n=>{n.xmin=t(n.xmin),n.ymin=i(n.ymin),n.xmax=t(n.xmax),n.ymax=i(n.ymax),r&&n.zmax!=null&&n.zmin!=null&&(n.zmax=r(n.zmax),n.zmin=r(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:e==="multipoint"?n=>{const o=n.points;let a,u;for(let c=0,h=o.length;c<h;c++){const p=o[c];c>0?(a+=p[0],u+=p[1]):(a=p[0],u=p[1]),p[0]=t(a),p[1]=i(u)}if(r&&s)for(let c=0,h=o.length;c<h;c++){const p=o[c];p[2]=r(p[2]),p[3]=s(p[3])}else if(r)for(let c=0,h=o.length;c<h;c++){const p=o[c];p[2]=r(p[2])}else if(s)for(let c=0,h=o.length;c<h;c++){const p=o[c];p[2]=s(p[2])}}:null}};l([d({type:String,json:{write:!0}})],Xi.prototype,"displayFieldName",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Xi.prototype,"exceededTransferLimit",void 0),l([d({type:[_i],json:{write:!0}})],Xi.prototype,"features",void 0),l([W("features")],Xi.prototype,"readFeatures",null),l([d({type:[DS],json:{write:!0}})],Xi.prototype,"fields",void 0),l([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:sP.read}}})],Xi.prototype,"geometryType",void 0),l([J("geometryType")],Xi.prototype,"writeGeometryType",null),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Xi.prototype,"hasM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Xi.prototype,"hasZ",void 0),l([d({types:am,json:{write:!0}})],Xi.prototype,"queryGeometry",void 0),l([W("queryGeometry")],Xi.prototype,"readQueryGeometry",null),l([d({type:we,json:{write:!0}})],Xi.prototype,"spatialReference",void 0),l([J("spatialReference")],Xi.prototype,"writeSpatialReference",null),l([d({json:{write:!0}})],Xi.prototype,"transform",void 0),Xi=rP=l([x("esri.rest.support.FeatureSet")],Xi),Xi.prototype.toJSON.isDefaultToJSON=!0;const S0=Xi;let vPe=0,vu=class extends In.LoadableMixin(f0.EsriPromiseMixin(Q)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var i;const t=(i=this.layer)==null?void 0:i.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);iP(t,this.layer.spatialReference,r);const s=S0.fromJSON(r);if(!this._requiresClientGraphicMapping())return s;const n=this.layer.objectIdField;for(const o of s.features){const a=o.attributes[n],u=this._idToClientGraphic.get(a);u&&(o.geometry=u.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(t,i={}){if(this._requiresClientGraphicMapping())throw new M("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);return iP(t,this.layer.spatialReference,r),r}queryFeatureCount(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,i))}queryObjectIds(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,i))}queryExtent(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,i)).then(r=>({count:r.count,extent:gt.fromJSON(r.extent)}))}querySnapping(t,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",t,i))}async queryAttributeBins(t,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",t==null?void 0:t.toJSON(),i)}async _applyEdits(t){if(!this._connection)throw new M("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[i]!=null?h.attributes[i]:null;if(t.addFeatures&&(r=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const h of t.deleteFeatures){const p=o(h);p!=null&&s.push(p)}const a=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const h of t.updateFeatures)if(n.push(this._serializeFeature(h)),a){const p=o(h);p!=null&&a.set(p,h)}}yPe(r?r.features:null,n,this.layer.spatialReference);const{fullExtent:u,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:n,deletes:s});return this.fullExtent=u,r&&r.finish(c.uidToObjectId),this._updateClientGraphicIds(a,c),this._createEditsResult(c)}async _prepareClientMapping(t,i){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const r=[];for(const{geometry:s}of t)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||r.push(s.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(t,i){if(this._idToClientGraphic){if(t)for(const r of i.updateResults){if(!r.success)continue;const s=t.get(r.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const i=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:i?new M("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(t){const i=new Map,r=new Array(t.length);let s=null;for(let o=0;o<t.length;o++){const a=t[o],u=this._serializeFeature(a);s||a.geometry==null||(s=a.geometry.type),r[o]=u,i.set(`${u.uid}`,a)}const n=this;return{features:r,inferredGeometryType:s,finish(o){const a=n.sourceJSON.objectIdField;for(const u in o){const c=o[u],h=i.get(u);h&&(h.attributes||(h.attributes={}),c===-1?delete h.attributes[a]:h.attributes[a]=c,n._addIdToClientGraphic(h))}}}}_addIdToClientGraphic(t){var s;if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=(s=t.attributes)==null?void 0:s[i];r!=null&&this._idToClientGraphic.set(r,t)}get _layerOrSourceGeometryType(){var t,i;return((t=this.layer)==null?void 0:t.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:i}=t,r=this._geometryForSerialization(t),s=(vPe++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:i}:{uid:s,attributes:i}}_geometryForSerialization(t){const{geometry:i}=t;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?To.fromExtent(i.extent):null:i}async _startWorker(t){this._connection=await Ate("MemorySourceWorker",{strategy:D("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:s,hasM:n,hasZ:o,timeInfo:a,dateFieldsTimeZone:u}=this.layer,c=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",g=>{q.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const p={features:h.features,fields:i==null?void 0:i.map(g=>g.toJSON()),geometryType:JU.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:c?null:r&&r.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:u},m=await this._connection.invoke("load",p,{signal:t});for(const g of m.warnings)q.getLogger(this.layer).warn("#load()",`${g.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:g});m.featureErrors.length&&q.getLogger(this.layer).warn("#load()",`Encountered ${m.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:m.featureErrors});const y=m.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(y.geometryType=JU.toJSON(h.inferredGeometryType)),this.sourceJSON=y,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),h.finish(m.assignedObjectIds)}};l([K5({Type:_i,ensureType:yt(_i)})],vu.prototype,"itemType",void 0),l([d()],vu.prototype,"type",void 0),l([d({constructOnly:!0})],vu.prototype,"layer",void 0),l([d({readOnly:!0})],vu.prototype,"_workerGeometryType",null),l([d()],vu.prototype,"sourceJSON",void 0),vu=l([x("esri.layers.graphics.sources.MemorySource")],vu);function wPe(e){return"portalItem"in e}const bPe=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):wPe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return l([d({type:String})],t.prototype,"apiKey",null),t=l([x("esri.layers.mixins.APIKeyMixin")],t),t},_Pe=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=hh(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",M0e(i,q.getLogger(this)))}};return l([d()],t.prototype,"title",null),l([d({type:String})],t.prototype,"url",null),t=l([x("esri.layers.mixins.ArcGISService")],t),t};function SPe(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}function jg(e,t,i,r){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,jg.prototype),s.expected=t,s.found=i,s.location=r,s.name="SyntaxError",s}function TO(e,t,i){return i=i||" ",e.length>t?e:(t-=e.length,e+(i+=i.repeat(t)).slice(0,t))}function TPe(e,t){var i,r={},s=(t=t!==void 0?t:{}).grammarSource,n={start:t6},o=t6,a="none",u=")",c=",",h="(",p="%",m="px",y="cm",g="mm",v="in",b="pt",w="pc",_="deg",S="rad",T="grad",E="turn",A="#",C=".",O="e",U=/^[ \t\n\r]/,V=/^[a-z\-]/,H=/^[0-9a-fA-F]/,te=/^[+\-]/,ye=/^[0-9]/,ce=Ol("none"),Qe=Ji("none",!1),ie=Ji(")",!1),ae=Ji(",",!1),ne=Ol("whitespace"),De=O0([" ","	",`
`,"\r"],!1,!1),Ht=Ol("function"),Ml=Ji("(",!1),Al=Ol("identifier"),Il=O0([["a","z"],"-"],!1,!1),Fn=Ol("percentage"),Cl=Ji("%",!1),eT=Ol("length"),tT=Ji("px",!1),iT=Ji("cm",!1),rT=Ji("mm",!1),sT=Ji("in",!1),nT=Ji("pt",!1),oT=Ji("pc",!1),aT=Ol("angle"),lT=Ji("deg",!1),uT=Ji("rad",!1),cT=Ji("grad",!1),dT=Ji("turn",!1),hT=Ol("number"),pT=Ol("color"),fT=Ji("#",!1),I0=O0([["0","9"],["a","f"],["A","F"]],!1,!1),C0=O0(["+","-"],!1,!1),Ao=O0([["0","9"]],!1,!1),mT=Ji(".",!1),yT=Ji("e",!1),gT=function(){return[]},vT=function(I,B){return{type:"function",name:I,parameters:B||[]}},Wce=function(I,B){return B.length>0?Ede(I,B,3):[I]},Zce=function(I){return{type:"quantity",value:I.value,unit:I.unit}},Jce=function(I){return{type:"color",colorType:I.type,value:I.value}},Yce=function(I){return I},Qce=function(){return bT()},Xce=function(I){return{value:I,unit:"%"}},Kce=function(I){return{value:I,unit:"px"}},ede=function(I){return{value:I,unit:"cm"}},tde=function(I){return{value:I,unit:"mm"}},ide=function(I){return{value:I,unit:"in"}},rde=function(I){return{value:I,unit:"pt"}},sde=function(I){return{value:I,unit:"pc"}},nde=function(I){return{value:I,unit:"deg"}},ode=function(I){return{value:I,unit:"rad"}},ade=function(I){return{value:I,unit:"grad"}},lde=function(I){return{value:I,unit:"turn"}},ude=function(I){return{value:I,unit:null}},cde=function(){return{type:"hex",value:bT()}},dde=function(I){return{type:"function",value:I}},hde=function(){return{type:"named",value:bT()}},pde=function(){return parseFloat(bT())},j=0|t.peg$currPos,jt=j,mm=[{line:1,column:1}],Io=j,wT=t.peg$maxFailExpected||[],ge=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in n))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=n[t.startRule]}function bT(){return e.substring(jt,j)}function Ji(I,B){return{type:"literal",text:I,ignoreCase:B}}function O0(I,B,X){return{type:"class",parts:I,inverted:B,ignoreCase:X}}function fde(){return{type:"end"}}function Ol(I){return{type:"other",description:I}}function KV(I){var B,X=mm[I];if(X)return X;if(I>=mm.length)B=mm.length-1;else for(B=I;!mm[--B];);for(X={line:(X=mm[B]).line,column:X.column};B<I;)e.charCodeAt(B)===10?(X.line++,X.column=1):X.column++,B++;return mm[I]=X,X}function e6(I,B,X){var $e=KV(I),Tt=KV(B);return{source:s,start:{offset:I,line:$e.line,column:$e.column},end:{offset:B,line:Tt.line,column:Tt.column}}}function Oe(I){j<Io||(j>Io&&(Io=j,wT=[]),wT.push(I))}function mde(I,B,X){return new jg(jg.buildMessage(I,B),I,B,X)}function t6(){var I;return(I=yde())===r&&(I=gde()),I}function yde(){var I,B;return ge++,I=j,Yi(),e.substr(j,4)===a?(B=a,j+=4):(B=r,ge===0&&Oe(Qe)),B!==r?(Yi(),jt=I,I=gT()):(j=I,I=r),ge--,I===r&&ge===0&&Oe(ce),I}function gde(){var I,B;if(I=[],(B=cC())!==r)for(;B!==r;)I.push(B),B=cC();else I=r;return I}function cC(){var I,B,X,$e;return I=j,Yi(),(B=wde())!==r?(Yi(),(X=vde())===r&&(X=null),Yi(),e.charCodeAt(j)===41?($e=u,j++):($e=r,ge===0&&Oe(ie)),$e!==r?(Yi(),jt=I,I=vT(B,X)):(j=I,I=r)):(j=I,I=r),I}function vde(){var I,B,X,$e,Tt,ii,ki,ms;if(I=j,(B=dC())!==r){for(X=[],$e=j,Tt=Yi(),e.charCodeAt(j)===44?(ii=c,j++):(ii=r,ge===0&&Oe(ae)),ii===r&&(ii=null),ki=Yi(),(ms=dC())!==r?$e=Tt=[Tt,ii,ki,ms]:(j=$e,$e=r);$e!==r;)X.push($e),$e=j,Tt=Yi(),e.charCodeAt(j)===44?(ii=c,j++):(ii=r,ge===0&&Oe(ae)),ii===r&&(ii=null),ki=Yi(),(ms=dC())!==r?$e=Tt=[Tt,ii,ki,ms]:(j=$e,$e=r);jt=I,I=Wce(B,X)}else j=I,I=r;return I}function dC(){var I,B;return I=j,(B=bde())===r&&(B=_de())===r&&(B=Sde())===r&&(B=Tde()),B!==r&&(jt=I,B=Zce(B)),(I=B)===r&&(I=j,(B=xde())!==r&&(jt=I,B=Jce(B)),I=B),I}function Yi(){var I,B;for(ge++,I=[],B=e.charAt(j),U.test(B)?j++:(B=r,ge===0&&Oe(De));B!==r;)I.push(B),B=e.charAt(j),U.test(B)?j++:(B=r,ge===0&&Oe(De));return ge--,B=r,ge===0&&Oe(ne),I}function wde(){var I,B,X;return ge++,I=j,(B=i6())!==r?(e.charCodeAt(j)===40?(X=h,j++):(X=r,ge===0&&Oe(Ml)),X!==r?(jt=I,I=Yce(B)):(j=I,I=r)):(j=I,I=r),ge--,I===r&&(B=r,ge===0&&Oe(Ht)),I}function i6(){var I,B,X;if(ge++,I=j,B=[],X=e.charAt(j),V.test(X)?j++:(X=r,ge===0&&Oe(Il)),X!==r)for(;X!==r;)B.push(X),X=e.charAt(j),V.test(X)?j++:(X=r,ge===0&&Oe(Il));else B=r;return B!==r&&(jt=I,B=Qce()),ge--,(I=B)===r&&(B=r,ge===0&&Oe(Al)),I}function bde(){var I,B,X;return ge++,I=j,Yi(),(B=Nn())!==r?(e.charCodeAt(j)===37?(X=p,j++):(X=r,ge===0&&Oe(Cl)),X!==r?(jt=I,I=Xce(B)):(j=I,I=r)):(j=I,I=r),ge--,I===r&&ge===0&&Oe(Fn),I}function _de(){var I,B,X;return ge++,I=j,Yi(),(B=Nn())!==r?(e.substr(j,2)===m?(X=m,j+=2):(X=r,ge===0&&Oe(tT)),X!==r?(jt=I,I=Kce(B)):(j=I,I=r)):(j=I,I=r),I===r&&(I=j,Yi(),(B=Nn())!==r?(e.substr(j,2)===y?(X=y,j+=2):(X=r,ge===0&&Oe(iT)),X!==r?(jt=I,I=ede(B)):(j=I,I=r)):(j=I,I=r),I===r&&(I=j,Yi(),(B=Nn())!==r?(e.substr(j,2)===g?(X=g,j+=2):(X=r,ge===0&&Oe(rT)),X!==r?(jt=I,I=tde(B)):(j=I,I=r)):(j=I,I=r),I===r&&(I=j,Yi(),(B=Nn())!==r?(e.substr(j,2)===v?(X=v,j+=2):(X=r,ge===0&&Oe(sT)),X!==r?(jt=I,I=ide(B)):(j=I,I=r)):(j=I,I=r),I===r&&(I=j,Yi(),(B=Nn())!==r?(e.substr(j,2)===b?(X=b,j+=2):(X=r,ge===0&&Oe(nT)),X!==r?(jt=I,I=rde(B)):(j=I,I=r)):(j=I,I=r),I===r&&(I=j,Yi(),(B=Nn())!==r?(e.substr(j,2)===w?(X=w,j+=2):(X=r,ge===0&&Oe(oT)),X!==r?(jt=I,I=sde(B)):(j=I,I=r)):(j=I,I=r)))))),ge--,I===r&&ge===0&&Oe(eT),I}function Sde(){var I,B,X;return ge++,I=j,(B=Nn())!==r?(e.substr(j,3)===_?(X=_,j+=3):(X=r,ge===0&&Oe(lT)),X!==r?(jt=I,I=nde(B)):(j=I,I=r)):(j=I,I=r),I===r&&(I=j,(B=Nn())!==r?(e.substr(j,3)===S?(X=S,j+=3):(X=r,ge===0&&Oe(uT)),X!==r?(jt=I,I=ode(B)):(j=I,I=r)):(j=I,I=r),I===r&&(I=j,(B=Nn())!==r?(e.substr(j,4)===T?(X=T,j+=4):(X=r,ge===0&&Oe(cT)),X!==r?(jt=I,I=ade(B)):(j=I,I=r)):(j=I,I=r),I===r&&(I=j,(B=Nn())!==r?(e.substr(j,4)===E?(X=E,j+=4):(X=r,ge===0&&Oe(dT)),X!==r?(jt=I,I=lde(B)):(j=I,I=r)):(j=I,I=r)))),ge--,I===r&&(B=r,ge===0&&Oe(aT)),I}function Tde(){var I,B;return ge++,I=j,Yi(),(B=Nn())!==r?(jt=I,I=ude(B)):(j=I,I=r),ge--,I===r&&ge===0&&Oe(hT),I}function xde(){var I,B,X,$e;if(ge++,I=j,e.charCodeAt(j)===35?(B=A,j++):(B=r,ge===0&&Oe(fT)),B!==r){if(X=[],$e=e.charAt(j),H.test($e)?j++:($e=r,ge===0&&Oe(I0)),$e!==r)for(;$e!==r;)X.push($e),$e=e.charAt(j),H.test($e)?j++:($e=r,ge===0&&Oe(I0));else X=r;X!==r?(jt=I,I=cde()):(j=I,I=r)}else j=I,I=r;return I===r&&(I=j,(B=cC())!==r&&(jt=I,B=dde(B)),(I=B)===r&&(I=j,(B=i6())!==r&&(jt=I,B=hde()),I=B)),ge--,I===r&&(B=r,ge===0&&Oe(pT)),I}function Nn(){var I,B,X,$e,Tt,ii,ki,ms;for(I=j,B=e.charAt(j),te.test(B)?j++:(B=r,ge===0&&Oe(C0)),B===r&&(B=null),X=j,$e=[],Tt=e.charAt(j),ye.test(Tt)?j++:(Tt=r,ge===0&&Oe(Ao));Tt!==r;)$e.push(Tt),Tt=e.charAt(j),ye.test(Tt)?j++:(Tt=r,ge===0&&Oe(Ao));if(e.charCodeAt(j)===46?(Tt=C,j++):(Tt=r,ge===0&&Oe(mT)),Tt!==r){if(ii=[],ki=e.charAt(j),ye.test(ki)?j++:(ki=r,ge===0&&Oe(Ao)),ki!==r)for(;ki!==r;)ii.push(ki),ki=e.charAt(j),ye.test(ki)?j++:(ki=r,ge===0&&Oe(Ao));else ii=r;ii!==r?X=$e=[$e,Tt,ii]:(j=X,X=r)}else j=X,X=r;if(X===r)if(X=[],$e=e.charAt(j),ye.test($e)?j++:($e=r,ge===0&&Oe(Ao)),$e!==r)for(;$e!==r;)X.push($e),$e=e.charAt(j),ye.test($e)?j++:($e=r,ge===0&&Oe(Ao));else X=r;if(X!==r){if($e=j,e.charCodeAt(j)===101?(Tt=O,j++):(Tt=r,ge===0&&Oe(yT)),Tt!==r){if(ii=e.charAt(j),te.test(ii)?j++:(ii=r,ge===0&&Oe(C0)),ii===r&&(ii=null),ki=[],ms=e.charAt(j),ye.test(ms)?j++:(ms=r,ge===0&&Oe(Ao)),ms!==r)for(;ms!==r;)ki.push(ms),ms=e.charAt(j),ye.test(ms)?j++:(ms=r,ge===0&&Oe(Ao));else ki=r;ki!==r?$e=Tt=[Tt,ii,ki]:(j=$e,$e=r)}else j=$e,$e=r;$e===r&&($e=null),jt=I,I=pde()}else j=I,I=r;return I}function $de(I,B){return I.map(function(X){return X[B]})}function Ede(I,B,X){return[I].concat($de(B,X))}if(i=o(),t.peg$library)return{peg$result:i,peg$currPos:j,peg$FAILED:r,peg$maxFailExpected:wT,peg$maxFailPos:Io};if(i!==r&&j===e.length)return i;throw i!==r&&j<e.length&&Oe(fde()),mde(wT,Io<e.length?e.charAt(Io):null,Io<e.length?e6(Io,Io+1):e6(Io,Io))}function aae(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=QG(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new M("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:QG(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!N$e(t[i].effects,t[i+1].effects))throw new M("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});L$e(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function QG(e){let t;if(!e)return[];try{t=TPe(e)}catch(i){throw new M("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>xPe(i))}function xPe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return $Pe(e);case"opacity":return EPe(e);case"hue-rotate":return MPe(e);case"blur":return APe(e);case"drop-shadow":return IPe(e);case"bloom":return CPe(e)}}catch(t){throw t.details.filter=e,t}throw new M("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function $Pe(e){let t=1;return T0(e.parameters,1),e.parameters.length===1&&(t=la(e.parameters[0])),new MN(e.name,t)}function EPe(e){let t=1;return T0(e.parameters,1),e.parameters.length===1&&(t=la(e.parameters[0])),new Hie(t)}function MPe(e){let t=0;return T0(e.parameters,1),e.parameters.length===1&&(t=kPe(e.parameters[0])),new Gie(t)}function APe(e){let t=0;return T0(e.parameters,1),e.parameters.length===1&&(t=Zj(e.parameters[0]),US(t,e.parameters[0])),new jie(t)}function IPe(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new M("effect:type-error","Accepts only one color",{});i=PPe(r)}else{const s=Zj(r);if(Object.isFrozen(t))throw new M("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&US(s,r)}if(t.length<2||t.length>3)throw new M("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new Uie(t[0],t[1],t[2]||0,i||lae("black"))}function CPe(e){let t=1,i=0,r=0;return T0(e.parameters,3),e.parameters[0]&&(t=la(e.parameters[0])),e.parameters[1]&&(i=Zj(e.parameters[1]),US(i,e.parameters[1])),e.parameters[2]&&(r=la(e.parameters[2])),new Pie(t,i,r)}function T0(e,t){if(e.length>t)throw new M("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function PI(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in Wj)return"<length>";if(e.unit in Hj)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function US(e,t){if(e<0)throw new M("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function OPe(e){if(e.type!=="quantity"||e.unit!==null)throw new M("effect:type-error",`Expected <double>, Actual: ${PI(e)}`,{term:e})}function RPe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new M("effect:type-error",`Expected <double> or <percentage>, Actual: ${PI(e)}`,{term:e})}SPe(jg,Error),jg.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var i,r=null;for(i=0;i<e.length;i++)if(e[i].source===this.location.source){r=e[i].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,n=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,o=this.location.source+":"+n.line+":"+n.column;if(r){var a=this.location.end,u=TO("",n.line.toString().length," "),c=r[s.line-1],h=(s.line===a.line?a.column:c.length+1)-s.column||1;t+=`
 --> `+o+`
`+u+` |
`+n.line+" | "+c+`
`+u+" | "+TO("",s.column-1," ")+TO("",h,"^")}else t+=`
 at `+o}return t},jg.buildMessage=function(e,t){var i={literal:function(c){return'"'+s(c.text)+'"'},class:function(c){var h=c.parts.map(function(p){return Array.isArray(p)?n(p[0])+"-"+n(p[1]):n(p)});return"["+(c.inverted?"^":"")+h.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(c){return c.description}};function r(c){return c.charCodeAt(0).toString(16).toUpperCase()}function s(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+r(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+r(h)})}function n(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+r(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+r(h)})}function o(c){return i[c.type](c)}function a(c){var h,p,m=c.map(o);if(m.sort(),m.length>0){for(h=1,p=1;h<m.length;h++)m[h-1]!==m[h]&&(m[p]=m[h],p++);m.length=p}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function u(c){return c?'"'+s(c)+'"':"end of input"}return"Expected "+a(e)+" but "+u(t)+" found."};const Hj={deg:1,grad:.9,rad:180/Math.PI,turn:360};function FPe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Hj[e.unit]!=null))throw new M("effect:type-error",`Expected <angle>, Actual: ${PI(e)}`,{term:e})}const Wj={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function NPe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Wj[e.unit]!=null))throw new M("effect:type-error",`Expected <length>, Actual: ${PI(e)}`,{term:e})}function la(e){RPe(e);const t=e.value;return US(t,e),e.unit==="%"?.01*t:t}function LPe(e){return OPe(e),US(e.value,e),e.value}function kPe(e){return FPe(e),e.value*Hj[e.unit]||0}function Zj(e){return NPe(e),e.value*Wj[e.unit]||0}function PPe(e){switch(e.colorType){case"hex":return xxe(e.value);case"named":return lae(e.value);case"function":return VPe(e.value)}}function lae(e){if(!Mie(e))throw new M("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Txe(e)}const DPe=/^rgba?/i,jPe=/^hsla?/i;function VPe(e){if(T0(e.parameters,4),DPe.test(e.name))return[la(e.parameters[0]),la(e.parameters[1]),la(e.parameters[2]),e.parameters[3]?la(e.parameters[3]):1];if(jPe.test(e.name))return Aie(LPe(e.parameters[0]),la(e.parameters[1]),la(e.parameters[2]),e.parameters[3]?la(e.parameters[3]):1);throw new M("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function M1(e,t,i){var r;try{return UPe(e)}catch(s){(r=i==null?void 0:i.messages)==null||r.push(s)}return null}function A1(e,t,i,r){try{const s=zPe(e);Lt(i,s,t)}catch(s){r.messages&&r.messages.push(s)}}function zPe(e){const t=aae(e);return t?k$e(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function UPe(e){if(!e||e.length===0)return null;if(qPe(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:XG(i.value)});return t}return XG(e)}function qPe(e){const t=e[0];return!!t&&"scale"in t}function XG(e){if(!(e!=null&&e.length))return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Vl(i,"amount")];break;case"blur":r=[Vl(i,"radius","pt")];break;case"hue-rotate":r=[Vl(i,"angle","deg")];break;case"drop-shadow":r=[Vl(i,"xoffset","pt"),Vl(i,"yoffset","pt"),Vl(i,"blurRadius","pt"),GPe(i,"color")];break;case"bloom":r=[Vl(i,"strength"),Vl(i,"radius","pt"),Vl(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;aae(s),t.push(s)}return t.join(" ")}function Vl(e,t,i){if(e[t]==null)throw new M("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function GPe(e,t){if(e[t]==null)throw new M("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const BPe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:Pt}},"portal-item":{read:!0,write:{layerContainerTypes:Pt}}}}},KG={read:{reader:M1},write:{allowNull:!0,writer:A1,layerContainerTypes:Pt}},HPe={json:{read:!1,write:!1,origins:{"web-map":KG,"portal-item":KG}}},WPe=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return l([d(BPe)],t.prototype,"blendMode",void 0),l([d(HPe)],t.prototype,"effect",void 0),t=l([x("esri.layers.mixins.BlendLayer")],t),t},ZPe=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return l([d({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=l([x("esri.layers.mixins.CustomParametersMixin")],t),t},uae=96;function ret(e,t){const i=e.extent,r=e.width,s=$o(i==null?void 0:i.spatialReference);return i&&r?i.width/r*s*EK*uae:0}function set(e,t){return e/($o(t)*EK*uae)}function net(e,t,i){return JPe(e,t)&&YPe(e,i)}function JPe(e,t){return t===0||fa(e,t)||e<t}function YPe(e,t){return t===0||fa(e,t)||e>t}function QPe(e,t){return fa(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}const e7={write:{overridePolicy:(e,t,i)=>({enabled:!i||i.filterMode==="scale"})}};let Qc=class extends _e.ClonableMixin(P){constructor(t){super(t),this.id=RI(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};l([d({type:String,json:{write:!0}})],Qc.prototype,"id",void 0),l([d({type:Number,json:e7})],Qc.prototype,"maxScale",void 0),l([d({type:Number,json:e7})],Qc.prototype,"minScale",void 0),l([d({type:String,json:{write:!0}})],Qc.prototype,"title",void 0),l([d({type:String,json:{write:!0}})],Qc.prototype,"where",void 0),Qc=l([x("esri.layers.support.DisplayFilter")],Qc);const cae=Qc;function XPe(e,t){return{...t,filterMode:e.mode}}function aet(e,t){return dae(e,t).next().value??null}function uet(e,t,i){const r=KPe(e);if(r&&(FX(t,r[0])||IF(i,r[1])))return"";const s=Array.from(dae(e,t,i)),n=eDe(s,t,i)?"1=1":s.map(o=>o.where||"1=1").reduce((o,a)=>aEe(o,a),"");return n&&n!=="1=1"?n:""}function KPe(e){if(hae(e)==="manual")return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of e.filters)t[0]=Math.max(t[0],I1(i)),t[1]=Math.min(t[1],WM(r));return t}function*dae(e,t,i){if(hae(e)==="manual"){const r=e.filters.find(s=>s.id===e.activeFilterId);r&&(yield r)}else{typeof t=="object"&&(t=t.scale);for(const r of e.filters)tDe(r.minScale,r.maxScale,t,i)&&(yield r)}}function eDe(e,t,i){var n,o;if(e.length===0)return!0;const r=I1((n=e.at(0))==null?void 0:n.minScale),s=WM((o=e.at(-1))==null?void 0:o.maxScale);if(IF(r,t)||FX(s,i))return!0;for(let a=0;a<e.length-1;a++){const u=e[a],c=e[a+1];if(IF(I1(c.minScale),WM(u.maxScale)))return!0}return!1}function tDe(e,t,i,r){return e=I1(e),i=I1(i),t=WM(t),!(!fa(i,e)&&(r??i)>e)&&!Mve(t,i)&&(r===void 0||!fa(r,e))}function hae(e){return"mode"in e?e.mode:e.filterMode}function I1(e){return e||Number.POSITIVE_INFINITY}function WM(e){return e||0}let Ip=class extends _e.ClonableMixin(P){constructor(t){super(t),this.activeFilterId=null,this.filters=new(Q.ofType(cae)),this.mode="manual"}writeFilters(t,i,r,s){const n=t.toArray();this.mode==="scale"&&n.sort((o,a)=>{const u=QPe(a.minScale,o.minScale),c=o.maxScale-a.maxScale;return u===0?c:u}),i[r]=n.map(o=>o.toJSON(s))}write(t,i){return super.write(t,XPe(this,i))}};l([d({type:String,json:{write:{overridePolicy:(e,t,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],Ip.prototype,"activeFilterId",void 0),l([d({type:Q.ofType(cae),nonNullable:!0,json:{write:!0}})],Ip.prototype,"filters",void 0),l([J("filters")],Ip.prototype,"writeFilters",null),l([d({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],Ip.prototype,"mode",void 0),Ip=l([x("esri.layers.support.DisplayFilterInfo")],Ip);const iDe=Ip,rDe=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return l([d(sDe)],t.prototype,"displayFilterEnabled",void 0),l([d(nDe)],t.prototype,"displayFilterInfo",void 0),t=l([x("esri.layers.mixins.DisplayFilteredLayer")],t),t},sDe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:Pt,writer(e,t,i){Lt(i,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},nDe={type:iDe,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:Pt},origins:{"web-scene":{write:!1,read:!1}}}},nP=INe(),pae=new Map,fae=new Map;async function det(e,t,i){if(!e||!i)return!1;if(!t)return!0;const r=new URL(e).host;let s=pae.get(r);if(!s){const n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await Be(n,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===t}async function t7(e,t,i=!1){var n,o,a;if(!e||!t)return!0;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=(n=fae.get(r))==null?void 0:n.entries();if(s){for(const[u,c]of s)if(c.name===t){const h=!((o=c.stack)!=null&&o.hasForwardEdits());if(!h&&i){const[{deleteForwardEdits:p},{default:m}]=await Promise.all([L(()=>import("./deleteForwardEdits-5fBy-qkA.js"),[]),L(()=>import("./DeleteForwardEditsParameters-BkeLcW1V.js"),[])]),y=await p(r,u,new m({sessionId:nP,moment:c.moment}));return y.success&&((a=c.stack)==null||a.clearForwardEdits()),y.success}return h}}return!0}function I$(e,t){var s;if(!e)return!1;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(s=fae.get(i))==null?void 0:s.entries();if(r){for(const[n,o]of r)if(o.name===t)return o.lockType==="edit"}return!1}const Jj=new _o.EventEmitter;function mae(e){return Jj.on("apply-edits",new WeakRef(e))}function yae(e){return Jj.on("update-moment",new WeakRef(e))}function i7(e,t,i=null,r=!1){const s=Bs();return r=t==null||r,Jj.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:i,mayReceiveServiceEdits:r,result:s.promise}),s}const gae=Symbol();function het(e){return e!=null&&typeof e=="object"&&gae in e}function uw(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function N_(e,t,i){const r=new URL(e).host,s=pae.get(r),n=o=>!o||o===s;return n(t)&&n(i)||t===i}const oDe=e=>{var t;let i=class extends e{constructor(...r){super(...r),this[t]=!0,this._applyEditsHandler=s=>{const{serviceUrl:n,layerId:o,gdbVersion:a,mayReceiveServiceEdits:u,result:c}=s,h=n===this.url,p=o!=null&&this.layerId!=null&&o===this.layerId,m=uw(this),y=uw(this)&&N_(n,a,this.gdbVersion);if(!h||m&&!y||!p&&!u)return;const g=c.then(v=>{var _;if(this.lastEditsEventDate=new Date,p&&(v.addedFeatures.length||v.updatedFeatures.length||v.deletedFeatures.length||v.addedAttachments.length||v.updatedAttachments.length||v.deletedAttachments.length))return this.emit("edits",R(v)),v;const b=(_=v.editedFeatures)==null?void 0:_.find(({layerId:S})=>S===this.layerId);if(b){const{adds:S,updates:T,deletes:E}=b.editedFeatures,A={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:S?S.map(({attributes:C})=>({objectId:this.objectIdField&&C[this.objectIdField],globalId:this.globalIdField&&C[this.globalIdField]})):[],deletedFeatures:E?E.map(({attributes:C})=>({objectId:this.objectIdField&&C[this.objectIdField],globalId:this.globalIdField&&C[this.globalIdField]})):[],updatedFeatures:T?T.map(({current:{attributes:C}})=>({objectId:this.objectIdField&&C[this.objectIdField],globalId:this.globalIdField&&C[this.globalIdField]})):[],editedFeatures:R(v.editedFeatures),exceededTransferLimit:!1,historicMoment:R(v.historicMoment)};return this.emit("edits",A),A}const w={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:R(v.editedFeatures),exceededTransferLimit:!1,historicMoment:R(v.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(n,a,w.historicMoment)&&this.emit("edits",w),w}).then(v=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(n,a,v.historicMoment)&&(this.historicMoment=v.historicMoment),v));this.emit("apply-edits",{result:g})},this._updateMomentHandler=s=>{const{serviceUrl:n,gdbVersion:o,moment:a}=s,u=n===this.url,c=uw(this),h=uw(this)&&N_(n,o,this.gdbVersion),p=uw(this)&&!N_(n,this.gdbVersion,null);u&&c&&h&&p&&"historicMoment"in this&&this.historicMoment!==a&&(this.historicMoment=a)},this.when().then(()=>{this.addHandles(mae(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(yae(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(r,s,n){return"historicMoment"in this&&this.historicMoment!==n&&I$(r,s)}};return t=gae,l([d()],i.prototype,"lastEditsEventDate",void 0),i=l([x("esri.layers.mixins.EditBusLayer")],i),i};var oP;const xO=new be({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),$O=new be({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ba=oP=class extends P{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:n,units:o,distance:a}=this;return new xr({geometry:R(i),objectIds:R(n),spatialRelationship:r,timeExtent:R(s),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:s,units:n,distance:o}=this;return new oP({geometry:R(t),objectIds:R(s),spatialRelationship:i,timeExtent:R(r),where:e,units:n,distance:o})}};l([d({type:String,json:{write:!0}})],Ba.prototype,"where",void 0),l([d({types:am,json:{write:!0}})],Ba.prototype,"geometry",void 0),l([d({type:xO.apiValues,json:{name:"spatialRel",read:{reader:xO.read},write:{allowNull:!1,writer:xO.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Ba.prototype,"spatialRelationship",void 0),l([d({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Ba.prototype,"distance",void 0),l([d({type:[Number],json:{write:!0}})],Ba.prototype,"objectIds",void 0),l([d({type:$O.apiValues,json:{read:$O.read,write:{writer:$O.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Ba.prototype,"units",void 0),l([d({type:Ni,json:{write:!0}})],Ba.prototype,"timeExtent",void 0),Ba=oP=l([x("esri.layers.support.FeatureFilter")],Ba);const aDe=Ba;var aP;const r7={read:{reader:M1},write:{writer:A1,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},s7={read:{reader:M1},write:{writer:A1,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},n7={name:"showExcludedLabels",default:!0};let Cp=aP=class extends P{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,s;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const n=Object.keys(i.filter);if(n.length>1||n[0]!=="where")return(r=t.messages)==null||r.push(new M("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(s=t.messages)==null||s.push(new M("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new aP({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};l([d({type:aDe,json:{write:{allowNull:!0,writer(e,t,i,r){const s=e==null?void 0:e.write({},r);s&&Object.keys(s).length!==0?Lt(i,s,t):Lt(i,null,t)}}}})],Cp.prototype,"filter",void 0),l([d({json:{read:M1,write:{writer:A1,allowNull:!0},origins:{"web-map":r7,"portal-item":r7}}})],Cp.prototype,"includedEffect",void 0),l([d({json:{read:M1,write:{writer:A1,allowNull:!0},origins:{"web-map":s7,"portal-item":s7}}})],Cp.prototype,"excludedEffect",void 0),l([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":n7,"portal-item":n7}}})],Cp.prototype,"excludedLabelsVisible",void 0),Cp=aP=l([x("esri.layers.support.FeatureEffect")],Cp);const lDe=Cp,o7={write:{allowNull:!0}},uDe={type:lDe,json:{origins:{"web-map":o7,"portal-item":o7}}},cDe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return l([d(uDe)],t.prototype,"featureEffect",void 0),t=l([x("esri.layers.mixins.FeatureEffectLayer")],t),t};var lP;let bb=lP=class extends P{constructor(e){super(e)}async collectRequiredFields(e,t){return Wr(e,t,this.expression)}clone(){return new lP({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};l([d({type:String,json:{write:{isRequired:!0}}})],bb.prototype,"expression",void 0),l([d({type:String,json:{write:!0}})],bb.prototype,"title",void 0),bb=lP=l([x("esri.symbols.support.FeatureExpressionInfo")],bb);const a7=bb,DI={unknown:1,inches:Ye(1,"meters","inches"),feet:Ye(1,"meters","feet"),"us-feet":Ye(1,"meters","us-feet"),yards:Ye(1,"meters","yards"),miles:Ye(1,"meters","miles"),"nautical-miles":Ye(1,"meters","nautical-miles"),millimeters:Ye(1,"meters","millimeters"),centimeters:Ye(1,"meters","centimeters"),decimeters:Ye(1,"meters","decimeters"),meters:Ye(1,"meters","meters"),kilometers:Ye(1,"meters","kilometers"),"decimal-degrees":1/gwe(1,"meters",Kt.radius)};function pet(e){return!!e&&DI[e]!=null}function fet(e){return 1/(DI[e]||1)}function dDe(){const e=Object.keys(DI);return SQ(e,"decimal-degrees"),e.sort(),e}const hDe=dDe();var uP;const M2=Si()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),l7=new be({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let nu=uP=class extends P{constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new uP({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Mye(this.featureExpressionInfo,e.featureExpressionInfo)}};l([d({type:a7,json:{write:!0}})],nu.prototype,"featureExpressionInfo",void 0),l([W("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],nu.prototype,"readFeatureExpressionInfo",null),l([J("featureExpressionInfo",{featureExpressionInfo:{type:a7},"featureExpression.value":{type:[0]}})],nu.prototype,"writeFeatureExpressionInfo",null),l([d({type:M2.apiValues,nonNullable:!0,json:{type:M2.jsonValues,read:M2.read,write:{writer:M2.write,isRequired:!0}}})],nu.prototype,"mode",null),l([d({type:Number,json:{write:!0}})],nu.prototype,"offset",void 0),l([d({type:hDe,json:{type:String,read:l7.read,write:l7.write}})],nu.prototype,"unit",null),nu=uP=l([x("esri.symbols.support.ElevationInfo")],nu);const pDe=nu;let Ay=class extends P{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};l([d({type:String,json:{write:!0}})],Ay.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],Ay.prototype,"label",void 0),l([d()],Ay.prototype,"type",void 0),Ay=l([x("esri.tables.elements.AttributeTableElement")],Ay);const Pv=Ay;var cP;let _b=cP=class extends Pv{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new cP({description:this.description,displayType:this.displayType,label:this.label})}};l([d({type:["auto"],json:{write:!0}})],_b.prototype,"displayType",void 0),l([d({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],_b.prototype,"type",void 0),_b=cP=l([x("esri.tables.elements.AttributeTableAttachmentElement")],_b);const u7=_b;var dP;let Sb=dP=class extends Pv{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new dP({description:this.description,fieldName:this.fieldName,label:this.label})}};l([d({type:String,json:{write:!0}})],Sb.prototype,"fieldName",void 0),l([d({type:String,json:{read:!1,write:!0}})],Sb.prototype,"type",void 0),Sb=dP=l([x("esri.tables.elements.AttributeTableFieldElement")],Sb);const c7=Sb;var hP;let Tb=hP=class extends Pv{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new hP({description:this.description,label:this.label,relationshipId:this.relationshipId})}};l([d({type:Number,json:{write:!0}})],Tb.prototype,"relationshipId",void 0),l([d({type:["relationship"],json:{read:!1,write:!0}})],Tb.prototype,"type",void 0),Tb=hP=l([x("esri.tables.elements.AttributeTableRelationshipElement")],Tb);const d7=Tb;function vae(e){return{typesWithGroup:{base:Pv,key:"type",typeMap:{attachment:u7,field:c7,group:e,relationship:d7}},typesWithoutGroup:{base:Pv,key:"type",typeMap:{attachment:u7,field:c7,relationship:d7}}}}function wae(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function bae(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function _ae(e,t,i=!0){return e?e.map(r=>va(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var pP;let wu=pP=class extends Pv{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return _ae(e,EO,!1)}readElements(e,t){return wae(t.attributeTableElements,EO,!1)}writeElements(e,t){t.attributeTableElements=bae(e,EO,!1)}clone(){return new pP({description:this.description,elements:R(this.elements),label:this.label})}};l([d({json:{write:!0}})],wu.prototype,"elements",void 0),l([ke("elements")],wu.prototype,"castElements",null),l([W("elements",["attributeTableElements"])],wu.prototype,"readElements",null),l([J("elements")],wu.prototype,"writeElements",null),l([d({type:String,json:{read:!1,write:!0}})],wu.prototype,"type",void 0),wu=pP=l([x("esri.tables.elements.AttributeTableGroupElement")],wu);const EO=vae(wu),fDe=wu;var fP;const MO=vae(fDe);let Xc=fP=class extends P{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return _ae(e,MO)}readElements(e,t){return wae(t.attributeTableElements,MO)}writeElements(e,t){t.attributeTableElements=bae(e,MO)}clone(){return new fP({elements:R(this.elements),orderByFields:this.orderByFields})}};l([d({json:{write:!0}})],Xc.prototype,"elements",void 0),l([ke("elements")],Xc.prototype,"castElements",null),l([W("elements",["attributeTableElements"])],Xc.prototype,"readElements",null),l([J("elements")],Xc.prototype,"writeElements",null),l([d({type:[Object],json:{write:!0}})],Xc.prototype,"orderByFields",void 0),Xc=fP=l([x("esri.tables.AttributeTableTemplate")],Xc);const mDe=Xc,yDe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Pt}}},jI={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},VI={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Pt}}},gDe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:jf}}},vDe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Pt}}},wDe={value:null,type:pDe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Pt}}};function yet(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Sae={write:{enabled:!0,layerContainerTypes:Pt},read:!0},mP={type:Number,json:{origins:{"web-document":Sae,"portal-item":{write:{layerContainerTypes:Pt}}}}},bDe={...mP,json:{...mP.json,origins:{"web-document":{...Sae,write:{enabled:!0,layerContainerTypes:Pt,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>{var r;return i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(r=t.layerDefinition)!=null&&r.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?v1(t.layerDefinition.drawingInfo.transparency):void 0:v1(t.drawingInfo.transparency)}}}},get={type:gt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=gt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=we.fromJSON(t.spatialReference)),i}}}},read:!1}},_De={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},SDe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:Pt}}},TDe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:Pt}}},Tae={json:{write:{ignoreOrigin:!0,layerContainerTypes:Pt},origins:{"web-map":{read:!1,write:!1}}}},xDe={type:mDe,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let ou=class extends _e.ClonableMixin(P){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};l([d()],ou.prototype,"creatorField",void 0),l([d()],ou.prototype,"creationDateField",void 0),l([d()],ou.prototype,"editorField",void 0),l([d()],ou.prototype,"editDateField",void 0),l([d()],ou.prototype,"realm",void 0),l([d(vM("dateFieldsTimeReference",!0))],ou.prototype,"timeZone",void 0),ou=l([x("esri.layers.support.EditFieldsInfo")],ou);const $De=ou;let Xa=class extends _e.ClonableMixin(P){constructor(t){super(t)}};l([d({constructOnly:!0,json:{write:!0}})],Xa.prototype,"name",void 0),l([d({constructOnly:!0,json:{write:!0}})],Xa.prototype,"fields",void 0),l([d({constructOnly:!0,json:{write:!0}})],Xa.prototype,"isAscending",void 0),l([d({constructOnly:!0,json:{write:!0}})],Xa.prototype,"indexType",void 0),l([d({constructOnly:!0,json:{write:!0}})],Xa.prototype,"isUnique",void 0),l([d({constructOnly:!0,json:{write:!0}})],Xa.prototype,"description",void 0),Xa=l([x("esri.layers.support.FeatureIndex")],Xa);async function xae(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=$ae(e));const r=EDe(e),s=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let n=null;for(;;){const o=await e.source.queryFeaturesJSON(t,i);if(n==null?n=o:n.features=n.features.concat(o.features),n.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;t.start+=r}return n}function EDe(e){return $ae(e)*MDe(e)}function MDe(e){return e.capabilities.query.maxRecordCount||2e3}function $ae(e){return e.capabilities.query.supportsMaxRecordCountFactor?xr.MAX_MAX_RECORD_COUNT_FACTOR:1}var yP;let xb=yP=class extends P{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new yP({minValue:this.minValue,maxValue:this.maxValue})}};l([d({type:Number,json:{write:!0}})],xb.prototype,"minValue",void 0),l([d({type:Number,json:{write:!0}})],xb.prototype,"maxValue",void 0),xb=yP=l([x("esri.renderers.support.AuthoringInfoClassBreakInfo")],xb);var gP;let vd=gP=class extends P{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new gP({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:R(this.classBreakInfos)})}};l([d({type:String,json:{write:!0}})],vd.prototype,"field",void 0),l([d({type:String,json:{write:!0}})],vd.prototype,"normalizationField",void 0),l([d({type:String,json:{write:!0}})],vd.prototype,"label",void 0),l([d({type:[xb],json:{write:!0}})],vd.prototype,"classBreakInfos",void 0),vd=gP=l([x("esri.renderers.support.AuthoringInfoFieldInfo")],vd);var vP;let Iy=vP=class extends P{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new vP({label:this.label,value:this.value,size:this.size})}};l([d({type:String,json:{write:!0}})],Iy.prototype,"label",void 0),l([d({type:Number,json:{write:!0}})],Iy.prototype,"size",void 0),l([d({type:Number,json:{write:!0}})],Iy.prototype,"value",void 0),Iy=vP=l([x("esri.renderers.support.AuthoringInfoSizeStop")],Iy);const ADe=Iy;var wP;const A2=new be({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),I2=new be({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),h7={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},p7=["high-to-low","above-and-below","centered-on","extremes"],f7=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],m7=["seconds","minutes","hours","days","months","years"],IDe=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let Ki=wP=class extends P{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new wP({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:R(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};l([d({types:h7,json:{write:!0}})],Ki.prototype,"endTime",void 0),l([ke("endTime")],Ki.prototype,"castEndTime",null),l([d({type:String,json:{write:!0}})],Ki.prototype,"field",void 0),l([d({type:Number,json:{write:!0}})],Ki.prototype,"maxSliderValue",void 0),l([d({type:Number,json:{write:!0}})],Ki.prototype,"minSliderValue",void 0),l([d({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Ki.prototype,"normalizationField",null),l([d({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Ki.prototype,"referenceSizeScale",null),l([d({type:IDe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Ki.prototype,"referenceSizeSymbolStyle",null),l([d({types:h7,json:{write:!0}})],Ki.prototype,"startTime",void 0),l([ke("startTime")],Ki.prototype,"castStartTime",null),l([d({type:[ADe],json:{origins:{"web-scene":{write:!1}},write:!0}})],Ki.prototype,"sizeStops",null),l([d({type:A2.apiValues,value:null,json:{type:A2.jsonValues,read:A2.read,write:A2.write}})],Ki.prototype,"style",null),l([d({type:f7,value:null,json:{type:f7,origins:{"web-scene":{type:p7,write:{writer:(e,t)=>{p7.includes(e)&&(t.theme=e)}}}},write:!0}})],Ki.prototype,"theme",null),l([d({type:I2.apiValues,json:{type:I2.jsonValues,read:I2.read,write:I2.write}})],Ki.prototype,"type",void 0),l([d({type:m7,json:{type:m7,write:!0}})],Ki.prototype,"units",void 0),Ki=wP=l([x("esri.renderers.support.AuthoringInfoVisualVariable")],Ki);const CDe=Ki;let C$=class extends P{constructor(t){super(t),this.type=null}};l([d({readOnly:!0,json:{read:!1,write:!0}})],C$.prototype,"type",void 0),C$=l([x("esri.rest.support.ColorRamp")],C$);const Yj=C$;var bP;let Op=bP=class extends Yj{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new bP({fromColor:R(this.fromColor),toColor:R(this.toColor),algorithm:this.algorithm})}};l([ee({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Op.prototype,"algorithm",void 0),l([d({type:K,json:{type:[Le],write:!0}})],Op.prototype,"fromColor",void 0),l([d({type:K,json:{type:[Le],write:!0}})],Op.prototype,"toColor",void 0),l([d({type:["algorithmic"]})],Op.prototype,"type",void 0),Op=bP=l([x("esri.rest.support.AlgorithmicColorRamp")],Op);const Qj=Op;var _P;let $b=_P=class extends Yj{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new _P({colorRamps:R(this.colorRamps)})}};l([d({type:[Qj],json:{write:!0}})],$b.prototype,"colorRamps",void 0),l([d({type:["multipart"]})],$b.prototype,"type",void 0),$b=_P=l([x("esri.rest.support.MultipartColorRamp")],$b);const Eae=$b,ODe={key:"type",base:Yj,typeMap:{algorithmic:Qj,multipart:Eae}};function RDe(e){return e!=null&&e.type?e.type==="algorithmic"?Qj.fromJSON(e):e.type==="multipart"?Eae.fromJSON(e):null:null}var SP;const Uh=new be({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),C2=new be({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),y7=new be({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),g7=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],FDe=["high-to-low","above-and-below","above","below"],NDe=["flow-line","wave-front"],LDe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Zt=SP=class extends P{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?RDe(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new SP({classificationMethod:this.classificationMethod,colorRamp:R(this.colorRamp),fadeRatio:R(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:R(this.field1),field2:R(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};l([d({type:Uh.apiValues,value:null,json:{type:Uh.jsonValues,read:Uh.read,write:Uh.write,origins:{"web-document":{default:"manual",type:Uh.jsonValues,read:Uh.read,write:Uh.write}}}})],Zt.prototype,"classificationMethod",null),l([d({types:ODe,json:{write:!0}})],Zt.prototype,"colorRamp",void 0),l([W("colorRamp")],Zt.prototype,"readColorRamp",null),l([d({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Zt.prototype,"fadeRatio",void 0),l([d({type:[String],value:null,json:{write:!0}})],Zt.prototype,"fields",null),l([d({type:vd,value:null,json:{write:!0}})],Zt.prototype,"field1",null),l([d({type:vd,value:null,json:{write:!0}})],Zt.prototype,"field2",null),l([d({type:NDe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Zt.prototype,"flowTheme",null),l([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Zt.prototype,"focus",null),l([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Zt.prototype,"isAutoGenerated",void 0),l([d({type:Number,value:null,json:{type:Le,write:!0}})],Zt.prototype,"numClasses",null),l([d({type:g7,json:{type:g7,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Zt.prototype,"lengthUnit",void 0),l([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Zt.prototype,"maxSliderValue",void 0),l([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Zt.prototype,"minSliderValue",void 0),l([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Zt.prototype,"statistics",null),l([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Zt.prototype,"standardDeviationInterval",null),l([d({type:C2.apiValues,value:null,json:{type:C2.jsonValues,read:C2.read,write:C2.write,origins:{"web-scene":{type:y7.jsonValues,write:{writer:y7.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Zt.prototype,"type",null),l([d({type:[CDe],json:{write:!0}})],Zt.prototype,"visualVariables",void 0),l([d({type:LDe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Zt.prototype,"univariateSymbolStyle",null),l([d({type:FDe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Zt.prototype,"univariateTheme",null),Zt=SP=l([x("esri.renderers.support.AuthoringInfo")],Zt);const Xj=Zt,AO=new be({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Eb=class extends P{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,t),Array.from(i).sort()}getSymbol(t,i){}async getSymbolAsync(t,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};l([d({type:Xj,json:{write:!0}})],Eb.prototype,"authoringInfo",void 0),l([d({type:AO.apiValues,readOnly:!0,json:{type:AO.jsonValues,read:!1,write:{writer:AO.write,ignoreOrigin:!0,isRequired:!0}}})],Eb.prototype,"type",void 0),Eb=l([x("esri.renderers.Renderer")],Eb);const dc=Eb;let Mb=class extends _e.ClonableMixin(P){constructor(){super(...arguments),this.showLegend=null,this.title=null}};l([d({type:Boolean,json:{write:!0}})],Mb.prototype,"showLegend",void 0),l([d({type:String,json:{write:!0}})],Mb.prototype,"title",void 0),Mb=l([x("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Mb);const Mae=Mb,IO=new be({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Jo=class extends P{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(q.getLogger(this).error(".field: field must be a string value"),null):mS(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};l([d()],Jo.prototype,"index",void 0),l([d({type:IO.apiValues,readOnly:!0,json:{read:IO.read,write:{writer:IO.write,isRequired:!0}}})],Jo.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Jo.prototype,"field",void 0),l([ke("field")],Jo.prototype,"castField",null),l([d({type:String,json:{write:!0}})],Jo.prototype,"valueExpression",void 0),l([d({type:String,json:{write:!0}})],Jo.prototype,"valueExpressionTitle",void 0),l([d({readOnly:!0})],Jo.prototype,"arcadeRequired",null),l([d({type:Mae,json:{write:!0}})],Jo.prototype,"legendOptions",void 0),Jo=l([x("esri.renderers.visualVariables.VisualVariable")],Jo);const x0=Jo;var TP;let Rp=TP=class extends P{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e??0}clone(){return new TP({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};l([d({type:K,json:{type:[Le],write:{isRequired:!0}}})],Rp.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],Rp.prototype,"label",void 0),l([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Rp.prototype,"value",void 0),l([J("value")],Rp.prototype,"writeValue",null),Rp=TP=l([x("esri.renderers.visualVariables.support.ColorStop")],Rp);const kDe=Rp;var xP;let Fp=xP=class extends x0{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new xP({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([d({readOnly:!0})],Fp.prototype,"cache",null),l([d({type:["color"],json:{type:["colorInfo"]}})],Fp.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Fp.prototype,"normalizationField",void 0),l([d({type:[kDe],json:{write:!0}})],Fp.prototype,"stops",null),Fp=xP=l([x("esri.renderers.visualVariables.ColorVariable")],Fp);const Aae=Fp;var $P;let Kc=$P=class extends P{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return v1(t.transparency)}writeOpacity(e,t,i){t[i]=uI(e)}clone(){return new $P({label:this.label,opacity:this.opacity,value:this.value})}};l([d({type:String,json:{write:!0}})],Kc.prototype,"label",void 0),l([d({type:Number,json:{type:Le,write:{target:"transparency",isRequired:!0}}})],Kc.prototype,"opacity",void 0),l([W("opacity",["transparency"])],Kc.prototype,"readOpacity",null),l([J("opacity")],Kc.prototype,"writeOpacity",null),l([d({type:Number,json:{write:{isRequired:!0}}})],Kc.prototype,"value",void 0),Kc=$P=l([x("esri.renderers.visualVariables.support.OpacityStop")],Kc);const PDe=Kc;var EP;let Np=EP=class extends x0{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new EP({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};l([d({readOnly:!0})],Np.prototype,"cache",null),l([d({type:["opacity"],json:{type:["transparencyInfo"]}})],Np.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Np.prototype,"normalizationField",void 0),l([d({type:[PDe],json:{write:!0}})],Np.prototype,"stops",null),Np=EP=l([x("esri.renderers.visualVariables.OpacityVariable")],Np);const Kj=Np;var MP;let Lp=MP=class extends x0{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new MP({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};l([d({readOnly:!0})],Lp.prototype,"cache",null),l([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Lp.prototype,"axis",void 0),l([d({type:["rotation"],json:{type:["rotationInfo"]}})],Lp.prototype,"type",void 0),l([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Lp.prototype,"rotationType",void 0),Lp=MP=l([x("esri.renderers.visualVariables.RotationVariable")],Lp);const Iae=Lp;function DDe(e){return Je(e)}var AP;let ed=AP=class extends P{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new AP({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};l([d({type:String,json:{write:!0}})],ed.prototype,"label",void 0),l([d({type:Number,cast:Je,json:{write:{isRequired:!0}}})],ed.prototype,"size",void 0),l([d({type:Number,json:{write:{isRequired:!0}}})],ed.prototype,"value",void 0),l([d({type:Boolean,json:{write:!1}})],ed.prototype,"useMinValue",void 0),l([d({type:Boolean,json:{write:!1}})],ed.prototype,"useMaxValue",void 0),ed=AP=l([x("esri.renderers.visualVariables.support.SizeStop")],ed);const O$=ed;let R$=class extends Mae{constructor(){super(...arguments),this.customValues=null}};l([d({type:[Number],json:{write:!0}})],R$.prototype,"customValues",void 0),R$=l([x("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],R$);const jDe=R$;var Wu,Ui;function hg(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Dv(e){return e!=null&&!isNaN(e)&&isFinite(e)}function Cae(e){return e.valueExpression?Wu.Expression:e.field&&typeof e.field=="string"?Wu.Field:Wu.Unknown}function VDe(e,t){const i=t||Cae(e),r=e.valueUnit||"unknown";return i===Wu.Unknown?Ui.Constant:e.stops?Ui.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Ui.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Ui.Proportional:Ui.Additive:Ui.Identity:Ui.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Wu||(Wu={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Ui||(Ui={}));const Oae=()=>q.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),zI=e=>Oae().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),UI=()=>Oae().error("Use of arcade expressions requires an arcade context"),v7=new _i,F$=Math.PI,eV=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Rae(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void zI("ColorVariable");const s=typeof t=="number",n=s?null:t,o=n==null?void 0:n.attributes;let a=s?t:null;const u=r.field,{ipData:c,hasExpression:h}=r.cache;let p=r.cache.compiledFunc;if(!u&&!h){const g=r.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if((i==null?void 0:i.arcade)==null)return void UI();const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(g),w=v.createExecContext(n,b,i.timeZone);if(!p){const _=v.createSyntaxTree(r.valueExpression);p=v.createFunction(_),r.cache.compiledFunc=p}a=v.executeFunction(p,w)}else o&&(a=o[u]);const m=r.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||s||!isNaN(y)&&y!==0)){isNaN(y)||s||(a/=y);const g=tV(a,c);if(g){const v=g[0],b=g[1],w=v===b?r.stops[v].color:K.blendColors(r.stops[v].color,r.stops[b].color,g[2],i!=null?i.color:void 0);return new K(w)}}}function Fae(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void zI("OpacityVariable");const s=typeof t=="number",n=s?null:t,o=n==null?void 0:n.attributes;let a=s?t:null;const u=r.field,{ipData:c,hasExpression:h}=r.cache;let p=r.cache.compiledFunc;if(!u&&!h){const g=r.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if((i==null?void 0:i.arcade)==null)return void UI();const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(g),w=v.createExecContext(n,b,i.timeZone);if(!p){const _=v.createSyntaxTree(r.valueExpression);p=v.createFunction(_),r.cache.compiledFunc=p}a=v.executeFunction(p,w)}else o&&(a=o[u]);const m=r.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||s||!isNaN(y)&&y!==0)){isNaN(y)||s||(a/=y);const g=tV(a,c);if(g){const v=g[0],b=g[1];if(v===b)return r.stops[v].opacity;{const w=r.stops[v].opacity;return w+(r.stops[b].opacity-w)*g[2]}}}}function Nae(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(y=>y.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void zI("RotationVariable");const s=r.axis||"heading",n=s==="heading"&&r.rotationType==="arithmetic"?90:0,o=s==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,u=a==null?void 0:a.attributes,c=r.field,{hasExpression:h}=r.cache;let p=r.cache.compiledFunc,m=0;if(!c&&!h)return m;if(h){if((i==null?void 0:i.arcade)==null)return void UI();const y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},g=i.arcade.arcadeUtils,v=g.getViewInfo(y),b=g.createExecContext(a,v,i.timeZone);if(!p){const w=g.createSyntaxTree(r.valueExpression);p=g.createFunction(w),r.cache.compiledFunc=p}m=g.executeFunction(p,b)}else u&&(m=u[c]||0);return m=typeof m!="number"||isNaN(m)?null:n+o*m,m}function zDe(e,t,i){const r=typeof t=="number",s=r?null:t,n=s==null?void 0:s.attributes;let o=r?t:null;const{isScaleDriven:a}=e.cache;let u=e.cache.compiledFunc;if(a){const h=i!=null?i.scale:void 0,p=i!=null?i.view:void 0;o=h==null||p==="3d"?UDe(e):h}else if(!r)switch(e.inputValueType){case Wu.Expression:{if((i==null?void 0:i.arcade)==null)return void UI();const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},p=i.arcade.arcadeUtils,m=p.getViewInfo(h),y=p.createExecContext(s,m,i.timeZone);if(!u){const g=p.createSyntaxTree(e.valueExpression);u=p.createFunction(g),e.cache.compiledFunc=u}o=p.executeFunction(u,y);break}case Wu.Field:n&&(o=n[e.field]);break;case Wu.Unknown:o=null}if(!Dv(o))return null;if(r||!e.normalizationField)return o;const c=n?parseFloat(n[e.normalizationField]):null;return Dv(c)&&c!==0?o/c:null}function UDe(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function qI(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(n=>n.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void zI("SizeVariable");const s=kae(zDe(r,t,i),r,t,i,r.cache.ipData);return s==null||isNaN(s)?0:s}function Us(e,t,i){return e==null?null:hg(e)?qI(e,t,i):Dv(e)?e:null}function Lae(e,t,i){return Dv(i)&&e>i?i:Dv(t)&&e<t?t:e}function qDe(e,t,i,r){return e+((Us(t.minSize,i,r)||t.minDataValue)??0)}function GDe(e,t,i){const r=e.stops;let s=(r==null?void 0:r.length)&&r[0].size;return s==null&&(s=e.minSize),Us(s,t,i)}function BDe(e,t,i,r){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=Us(t.minSize,i,r),o=Us(t.maxSize,i,r),a=r!=null?r.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return o;if(n==null||o==null)return null;if(t.scaleBy==="area"&&a){const u=a==="circle",c=u?F$*(n/2)**2:n*n,h=c+s*((u?F$*(o/2)**2:o*o)-c);return u?2*Math.sqrt(h/F$):Math.sqrt(h)}return n+s*(o-n)}function HDe(e,t,i,r){const s=r!=null?r.shape:void 0,n=e/t.minDataValue,o=Us(t.minSize,i,r),a=Us(t.maxSize,i,r);let u=null;return u=s==="circle"?2*Math.sqrt(n*(o/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(n*o**2):n*o,Lae(u,o,a)}function WDe(e,t,i,r,s){var u,c,h;const[n,o,a]=tV(e,s);if(n===o)return Us((u=t.stops)==null?void 0:u[n].size,i,r);{const p=Us((c=t.stops)==null?void 0:c[n].size,i,r);return p+(Us((h=t.stops)==null?void 0:h[o].size,i,r)-p)*a}}function ZDe(e,t,i,r){const s=((r==null?void 0:r.resolution)??1)*DI[t.valueUnit],n=Us(t.minSize,i,r),o=Us(t.maxSize,i,r),{valueRepresentation:a}=t;let u=null;return u=a==="area"?2*Math.sqrt(e/F$)/s:a==="radius"||a==="distance"?2*e/s:e/s,Lae(u,n,o)}function kae(e,t,i,r,s){switch(t.transformationType){case Ui.Additive:return qDe(e,t,i,r);case Ui.Constant:return GDe(t,i,r);case Ui.ClampedLinear:return BDe(e,t,i,r);case Ui.Proportional:return HDe(e,t,i,r);case Ui.Stops:return WDe(e,t,i,r,s);case Ui.RealWorldSize:return ZDe(e,t,i,r);case Ui.Identity:return e;case Ui.Unknown:return null}}function JDe(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const s={scale:t,view:i};let n=Us(e.minSize,v7,s),o=Us(e.maxSize,v7,s);if(n!=null||o!=null){if(n>o){const a=o;o=n,n=a}return{minSize:n,maxSize:o}}}function YDe(e,t,i){if(!e.visualVariables)return;const r=[],s=[],n=[],o=[],a=[];for(const u of e.visualVariables)switch(u.type){case"color":s.push(u);break;case"opacity":n.push(u);break;case"rotation":a.push(u);break;case"size":o.push(u)}return s.forEach(u=>{const c=Rae(u,t,i);r.push({variable:u,value:c})}),n.forEach(u=>{const c=Fae(u,t,i);r.push({variable:u,value:c})}),a.forEach(u=>{const c=Nae(u,t,i);r.push({variable:u,value:c})}),o.forEach(u=>{const c=qI(u,t,i);r.push({variable:u,value:c})}),r.filter(u=>u.value!=null)}function tV(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((s,n)=>e<s?(r=n,!0):(i=n,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function QDe(e,t,i){const r=["proportional","proportional","proportional"];for(const s of e){const n=s.useSymbolValue?"symbol-value":qI(s,t,i);switch(s.axis){case"width":r[0]=n;break;case"depth":r[1]=n;break;case"height":r[2]=n;break;case"width-and-depth":r[0]=n,r[1]=n;break;case"all":case void 0:case null:r[0]=n,r[1]=n,r[2]=n;break;default:s.axis}}return r}const iV=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:QDe,getColor:Rae,getOpacity:Fae,getRotationAngle:Nae,getSize:qI,getSizeForValue:kae,getSizeFromNumberOrVariable:Us,getSizeRangeAtScale:JDe,getVisualVariableValues:YDe,viewScaleRE:eV},Symbol.toStringTag,{value:"Module"}));var IP;const O2=new be({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),CP=new be({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function w7(e){if(e!=null)return typeof e=="string"||typeof e=="number"?DDe(e):e.type==="size"?hg(e)?e:(delete(e={...e}).type,new st(e)):void 0}function b7(e,t,i){if(typeof e!="object")return e;const r=new st;return r.read(e,i),r}let st=IP=class extends x0{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&eV.test(this.valueExpression)}}set index(e){hg(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),hg(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return Cae(this)}set maxDataValue(e){e&&this.stops&&(q.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(q.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return w7(e)}readMaxSize(e,t,i){return b7(e,t,i)}set minDataValue(e){e&&this.stops&&(q.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(q.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return w7(e)}readMinSize(e,t,i){return b7(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(q.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return VDe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r!=null&&r.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new M("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?CP.read(e):null}clone(){var e,t;return new IP({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:hg(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:hg(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===Ui.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Ui.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};l([d({readOnly:!0})],st.prototype,"cache",null),l([d({type:O2.apiValues,json:{type:O2.jsonValues,origins:{"web-map":{read:!1}},read:O2.read,write:O2.write}})],st.prototype,"axis",void 0),l([d()],st.prototype,"index",null),l([d({type:String,readOnly:!0})],st.prototype,"inputValueType",null),l([d({type:jDe,json:{write:!0}})],st.prototype,"legendOptions",void 0),l([d({type:Number,value:null,json:{write:!0}})],st.prototype,"maxDataValue",null),l([d({type:Number,value:null,json:{write:!0}})],st.prototype,"maxSize",null),l([ke("maxSize")],st.prototype,"castMaxSize",null),l([W("maxSize")],st.prototype,"readMaxSize",null),l([d({type:Number,value:null,json:{write:!0}})],st.prototype,"minDataValue",null),l([d({type:Number,value:null,json:{write:!0}})],st.prototype,"minSize",null),l([ke("minSize")],st.prototype,"castMinSize",null),l([W("minSize")],st.prototype,"readMinSize",null),l([d({type:String,json:{write:!0}})],st.prototype,"normalizationField",void 0),l([d({readOnly:!0})],st.prototype,"arcadeRequired",null),l([d({type:String})],st.prototype,"scaleBy",void 0),l([d({type:[O$],value:null,json:{write:!0}})],st.prototype,"stops",null),l([d({type:["outline"],json:{write:!0}})],st.prototype,"target",void 0),l([d({type:String,readOnly:!0})],st.prototype,"transformationType",null),l([d({type:["size"],json:{type:["sizeInfo"]}})],st.prototype,"type",void 0),l([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],st.prototype,"useSymbolValue",void 0),l([d({type:String,json:{write:!0}})],st.prototype,"valueExpression",void 0),l([W("valueExpression",["valueExpression","expression"])],st.prototype,"readValueExpression",null),l([J("web-scene","valueExpression")],st.prototype,"writeValueExpressionWebScene",null),l([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],st.prototype,"valueRepresentation",void 0),l([d({type:CP.apiValues,json:{write:CP.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],st.prototype,"valueUnit",void 0),l([W("valueUnit")],st.prototype,"readValueUnit",null),st=IP=l([x("esri.renderers.visualVariables.SizeVariable")],st);const GI=st,XDe={color:Aae,size:GI,opacity:Kj,rotation:Iae},KDe=new be({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),e5e=/^\[([^\]]+)\]$/i;let N$=class extends se{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter(i=>!!i),t==null?void 0:t.length){for(const i of t)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&t.sort((i,r)=>{let s=null;return s=i.target===r.target?0:i.target?1:-1,s});for(let i=0;i<t.length;i++)t[i].index=i;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,i,r){const{rotationExpression:s,rotationType:n}=i,o=s==null?void 0:s.match(e5e),a=o==null?void 0:o[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:n,field:a})),t)return t.map(u=>{const c=KDe.read(u.type),h=XDe[c];h||(q.getLogger(this).warn(`Unknown variable type: ${c}`),r!=null&&r.messages&&r.messages.push(new bo("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:u,context:r})));const p=new h;return p.read(u,r),p})}writeVariables(t,i){const r=[];for(const s of t){const n=s.toJSON(i);n&&r.push(n)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};l([d()],N$.prototype,"visualVariables",null),N$=l([x("esri.renderers.visualVariables.VisualVariableFactory")],N$);const t5e=N$,i5e={base:x0,key:"type",typeMap:{opacity:Kj,color:Aae,rotation:Iae,size:GI}},$0=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new t5e}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,n){r[s]=this._vvFactory.writeVariables(i,n)}get arcadeRequiredForVisualVariables(){var i;return((i=this.visualVariables)==null?void 0:i.some(({arcadeRequired:r})=>r))??!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){var s;return((s=this.visualVariables)==null?void 0:s.filter(n=>n.type===i&&(typeof r=="string"?n.target===r:r!==!1||!n.target)))??[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const n of s)n&&(n.field&&ps(i,r,n.field),n.normalizationField&&ps(i,r,n.normalizationField),n.valueExpression&&(r5e(n.valueExpression,i,r)||await Wr(i,r,n.valueExpression)))}};return l([d({types:[i5e],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),l([W("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),l([J("visualVariables")],t.prototype,"writeVisualVariables",null),t=l([x("esri.renderers.mixins.VisualVariablesMixin")],t),t};function r5e(e,t,i){const r=SEe(e);return r!=null&&(ps(t,i,r),!0)}const rV=[252,146,31,255],s5e=[153,153,153,255],n5e={type:"esriSMS",style:"esriSMSCircle",size:6,color:rV,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o5e={type:"esriSLS",style:"esriSLSSolid",width:.75,color:rV},a5e={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l5e={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u5e={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c5e={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},d5e={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},ZM=El.fromJSON(n5e),sV=Rn.fromJSON(o5e),Pae=uc.fromJSON(a5e),h5e=pm.fromJSON(l5e);function Met(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return ZM;case"polyline":return sV;case"polygon":case"extent":return Pae}return null}const Aet=El.fromJSON(u5e),Iet=Rn.fromJSON(c5e),Cet=uc.fromJSON(d5e),p5e=Pu.fromSimpleMarkerSymbol(ZM),f5e=hm.fromSimpleLineSymbol(sV),m5e=Oh.fromSimpleFillSymbol(Pae),y5e=new LS({symbolLayers:new Q([new dm({material:{color:rV},edges:new Fre({size:Cn(1),color:new K(s5e)})})])}),g5e=new hm({symbolLayers:new Q([new g0({material:{color:new K([0,0,0])},size:Cn(1)})])}),v5e=new Oh({symbolLayers:new Q([new dm({outline:{color:new K([0,0,0]),size:Cn(1)}})])});function Oet(e){if(e==null)return null;switch(e.type){case"mesh":return y5e;case"point":case"multipoint":return p5e;case"polyline":return f5e;case"polygon":case"extent":return m5e}return null}const _7="#useCIMFallbackSymbology()",Fm={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function w5e(e,t=Fm){var u,c,h,p;if(!e)return{symbol:null};const{retainId:i=Fm.retainId,ignoreDrivers:r=Fm.ignoreDrivers,hasLabelingContext:s=Fm.hasLabelingContext,retainCIM:n=Fm.retainCIM,cimFallbackEnabled:o=Fm.cimFallbackEnabled}=t;let a=null;if(w0(e)||e instanceof gh)a=e.clone();else if(e.type==="cim"){const m=(c=(u=e.data)==null?void 0:u.symbol)==null?void 0:c.type;switch(m){case"CIMPointSymbol":a=n?e.clone():Pu.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(a=g5e.clone(),(h=t==null?void 0:t.logWarning)==null||h.call(t,_7,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=v5e.clone(),(p=t==null?void 0:t.logWarning)==null||p.call(t,_7,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new M("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${m||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof Rn)a=hm.fromSimpleLineSymbol(e);else if(e instanceof El)a=Pu.fromSimpleMarkerSymbol(e);else if(e instanceof kS)a=Pu.fromPictureMarkerSymbol(e);else if(e instanceof uc)a=t.geometryType&&t.geometryType==="mesh"?LS.fromSimpleFillSymbol(e):Oh.fromSimpleFillSymbol(e);else{if(!(e instanceof pm))return{error:new M("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};a=s?bI.fromTextSymbol(e):Pu.fromTextSymbol(e)}return i&&a&&a.type!=="cim"&&(a.id=e.id),!r||a.type==="cim"||a instanceof gh||a.symbolLayers.forEach(m=>m.ignoreDrivers=!0),{symbol:a}}function JM(e,t,i,r){const s=Dae(e,{},{context:r,isLabelSymbol:!1});s!=null&&(t[i]=s)}function S7(e,t,i,r){const s=Dae(e,{},{context:r,isLabelSymbol:!0});s!=null&&(t[i]=s)}function T7(e){return w0(e)||e instanceof gh}function b5e(e){return(e==null?void 0:e.type)==="polygon-3d"||(e==null?void 0:e.type)==="line-3d"}function Dae(e,t,i){var a;if(e==null)return null;const{context:r,isLabelSymbol:s}=i,n=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(n==="web-scene"&&!T7(e)){const u=w5e(e,{retainCIM:!0,hasLabelingContext:s});return u.symbol!=null?u.symbol.write(t,r):(o==null||o.push(new M("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:u.error})),null)}return TN(r==null?void 0:r.layer)&&b5e(e)?(o==null||o.push(new M("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(a=r==null?void 0:r.layer)==null?void 0:a.declaredClass}'.`,{symbol:e,context:r})),null):(n==="web-map"||n==="portal-item"&&!TN(r==null?void 0:r.layer))&&T7(e)?(o==null||o.push(new M("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function Ret(e,t){return nAe(e,null,t)}const BI={types:use,json:{write:{writer:JM},origins:{"web-scene":{types:q9,write:{writer:JM},read:{reader:s0({types:q9})}}}}},nV=D5({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},BI),oV={types:{base:$r,key:"type",typeMap:{"simple-fill":Dd.typeMap["simple-fill"],"picture-fill":Dd.typeMap["picture-fill"],"polygon-3d":Dd.typeMap["polygon-3d"],cim:Dd.typeMap.cim}},json:{write:{writer:JM},origins:{"web-scene":{type:Oh,write:{writer:JM}}}}},L$={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var OP;let kp=OP=class extends $0(dc){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new OP({description:this.description,label:this.label,symbol:R(this.symbol),visualVariables:R(this.visualVariables),authoringInfo:R(this.authoringInfo)})}};l([d({type:String,json:{write:!0}})],kp.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],kp.prototype,"label",void 0),l([d(nV)],kp.prototype,"symbol",void 0),l([ee({simple:"simple"})],kp.prototype,"type",void 0),kp=OP=l([x("esri.renderers.SimpleRenderer")],kp);const gl=kp,_5e=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function RP(e){return e instanceof se}function x7(e){return e instanceof Q?Object.keys(e.items):RP(e)?Gs(e).keys():e?Object.keys(e):[]}function R2(e,t){return e instanceof Q?e.items[t]:e[t]}function S5e(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function L_(e){return e?e.declaredClass:null}function jae(e,t){var p;const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=x7(e),s=x7(t);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||S5e(e,t))return{type:"complete",oldValue:e,newValue:t};const n=s.filter(m=>!r.includes(m)),o=r.filter(m=>!s.includes(m)),a=r.filter(m=>s.includes(m)&&R2(e,m)!==R2(t,m)).concat(n,o).sort(),u=L_(e);if(u&&_5e.has(u)&&a.length)return{type:"complete",oldValue:e,newValue:t};let c;const h=RP(e)&&RP(t);for(const m of a){const y=R2(e,m),g=R2(t,m);let v;if((h||typeof y!="function"&&typeof g!="function")&&y!==g&&(y!=null||g!=null)){if(i&&i[m]&&typeof i[m]=="function")v=(p=i[m])==null?void 0:p.call(i,y,g);else if(y instanceof Date&&g instanceof Date){if(y.getTime()===g.getTime())continue;v={type:"complete",oldValue:y,newValue:g}}else v=typeof y=="object"&&typeof g=="object"&&L_(y)===L_(g)?jae(y,g):{type:"complete",oldValue:y,newValue:g};v!=null&&(c!=null?c.diff[m]=v:c={type:"partial",diff:{[m]:v}})}}return c}function Fet(e,t){return T5e(e,t)}function T5e(e,t){if(e==null)return!1;const i=t.split(".");let r=e;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const n=r.diff[s];if(!n)return!1;r=n}}return!0}function Net(e,t){if(!e)return!1;if(e.type==="partial"){const i=Object.keys(e.diff);return i.length===1&&i[0]===t}return!1}function x5e(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&L_(e)!==L_(t)?{type:"complete",oldValue:e,newValue:t}:jae(e,t)}function F2(e){if(e==null)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const i of t.added)if(!F2(i))return!1;for(const i of t.removed)if(!F2(i))return!1;for(const i of t.changed)if(!F2(i))return!1;return!0}case"partial":for(const t in e.diff)if(!F2(e.diff[t]))return!1;return!0}}var FP;const $5e=Si()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Ab=FP=class extends _e.ClonableMixin(P){static from(e){return yS(FP,e)}constructor(e){super(e),this.title=null,this.order=null}};l([d({type:String,json:{write:!0}})],Ab.prototype,"title",void 0),l([ee($5e)],Ab.prototype,"order",void 0),Ab=FP=l([x("esri.renderers.support.RendererLegendOptions")],Ab);const HI=Ab;let Cy=class extends _e.ClonableMixin(P){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};l([d(L$)],Cy.prototype,"value",void 0),l([d(L$)],Cy.prototype,"value2",void 0),l([d(L$)],Cy.prototype,"value3",void 0),Cy=l([x("esri.renderers.support.UniqueValue")],Cy);const Vg=Cy;let td=class extends _e.ClonableMixin(P){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const i=typeof(t=Array.isArray(t)?t:[t])[0];return i==="string"||i==="number"?t.map(r=>new Vg({value:r})):i==="object"?t[0]instanceof Vg?t:t.map(r=>new Vg(r)):null}};l([d({type:String,json:{write:!0}})],td.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],td.prototype,"label",void 0),l([d(BI)],td.prototype,"symbol",void 0),l([d({type:[Vg],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new Vg({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const r of e){const s=[r.value,r.value2,r.value3].filter(Br).map(n=>n.toString());i.push(s)}t.values=i}}}})],td.prototype,"values",void 0),l([ke("values")],td.prototype,"castValues",null),td=l([x("esri.renderers.support.UniqueValueClass")],td);const Vae=td;let Ib=class extends _e.ClonableMixin(P){constructor(t){super(t),this.heading=null,this.classes=null}};l([d({type:String,json:{write:!0}})],Ib.prototype,"heading",void 0),l([d({type:[Vae],json:{write:{isRequired:!0}}})],Ib.prototype,"classes",void 0),Ib=l([x("esri.renderers.support.UniqueValueGroup")],Ib);const NP=Ib;var LP;let Pp=LP=class extends P{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new LP({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};l([d({type:String,json:{write:!0}})],Pp.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],Pp.prototype,"label",void 0),l([d(nV)],Pp.prototype,"symbol",void 0),l([d(L$)],Pp.prototype,"value",void 0),Pp=LP=l([x("esri.renderers.support.UniqueValueInfo")],Pp);const zg=Pp,$7=new Map;async function E5e(e,t){try{return{data:(await C5e(e,t)).data,baseUrl:f0e(e),styleUrl:e}}catch(i){return rl(i),null}}function M5e(e,t,i){var u;const r=t.portal!=null?t.portal:Hr.getDefault();let s;const n=`${r.url} - ${(u=r.user)==null?void 0:u.username} - ${e}`,o=$7.get(n);if(o)return o;const a=A5e(e,r,i).then(c=>(s=c,c.fetchData())).then(c=>({data:c,baseUrl:s.itemUrl??"",styleName:e}));return $7.set(n,a),a}function A5e(e,t,i){return t.load(i).then(()=>{const r=new ca({disableExtraQuery:!0,query:`owner:${E7} AND type:${M7} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{var o;let s=null;const n=e.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(((o=a.typeKeywords)==null?void 0:o.some(c=>c.toLowerCase()===n))&&a.type===M7&&a.owner===E7){s=a;break}}if(!s)throw new M("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(i)})}function I5e(e,t,i){return(e==null?void 0:e.styleUrl)!=null?E5e(e.styleUrl,i):(e==null?void 0:e.styleName)!=null?M5e(e.styleName,t,i):Promise.reject(new M("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Det(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function jet(e,t){for(const i of t)switch(i){case"cim":if(e.cimRef)return{format:i,url:encodeURI(e.cimRef)};break;case"web-gltf-basisu":{const r=CO(e,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=CO(e,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=CO(e,"gltf");if(r)return{format:"web-gltf",url:r};if(e.webRef)return{format:i,url:encodeURI(e.webRef)};break}}}function CO(e,t){var i,r;if(!D("enable-feature:force-wosr"))return(r=(i=e.formatInfos)==null?void 0:i.find(s=>s.type===t))==null?void 0:r.href}function C5e(e,t){const i={responseType:"json",query:{f:"json"},...t};return Be(yo(e),i)}const E7="esri_en",M7="Style",Vet="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Cb;const zae="esri.renderers.UniqueValueRenderer",$c=()=>q.getLogger(zae),A7="uvInfos-watcher",I7="uvGroups-watcher",O5e=",",R5e=yt(zg);function F5e(e){const{field1:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=e,a=!(!t||!i);return[{classes:(n??[]).map(u=>{var w;const{symbol:c,label:h,value:p,description:m}=u,[y,g,v]=a?((w=p==null?void 0:p.toString())==null?void 0:w.split(s||""))||[]:[p],b=[];return(t||o)&&b.push(y),i&&b.push(g),r&&b.push(v),{symbol:c,label:h,values:[b],description:m}})}]}function Nm(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let Rt=Cb=class extends $0(dc){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<i.length;n++){const o=t.find(a=>a.value===i[n].value);o?x5e(o,i[n])?(s.changed.push({type:"complete",oldValue:o,newValue:i[n]}),r=!0):s.unchanged.push({oldValue:o,newValue:i[n]}):(s.added.push(i[n]),r=!0)}for(let n=0;n<t.length;n++)i.find(o=>o.value===t[n].value)||(s.removed.push(t[n]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:mS(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r!=null&&r.messages?r.messages.push(new M("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):$c().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||Hr.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=a0(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=gS(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?$c().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?$c().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var r;if(this.styleOrigin)return void $c().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?R5e(e):new zg({value:e,symbol:cse(t)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[Nm(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void $c().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let i=0;i<t.length;i++){const r=t[i];if(String(r.value)===String(e)){delete this._valueInfoMap[Nm(e)],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await On()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void $c().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const s=await On(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this._getUniqueValueInfo(e,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}get symbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){var r;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((s,n)=>s+n.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Cb({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:R(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:R(this.visualVariables),legendOptions:R(this.legendOptions),authoringInfo:R(this.authoringInfo),backgroundFillSymbol:R(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=R(this.uniqueValueInfos),i=R(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(R(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.symbols.map(r=>r.collectRequiredFields(e,t)),Wr(e,t,this.valueExpression)];ps(e,t,this.field),ps(e,t,this.field2),ps(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return I5e(this.styleOrigin,{portal:this.portal}).then(e=>{var i;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const s=new gh({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const n=new zg({value:r.name,symbol:s});t.push(n),this._valueInfoMap[Nm(r.name)]=n}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",O5e)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[Nm(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(A7);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(G(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,A7)}}_watchUniqueValueGroups(){this.removeHandles(I7);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push(G(()=>({classes:i.classes}),(r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])t.push(G(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,I7)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!i);for(const u of n)for(const c of u.classes??[]){const{symbol:h,label:p,values:m,description:y}=c;for(const g of m??[]){const{value:v,value2:b,value3:w}=g,_=[v];i&&_.push(b),r&&_.push(w);const S=a?_.join(s||""):_[0]??void 0;e.push(new zg({symbol:h,label:p,value:S,description:y}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!t&&!r||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!i),a=n.map(c=>{var w;const{symbol:h,label:p,value:m,description:y}=c,[g,v,b]=o?((w=m==null?void 0:m.toString())==null?void 0:w.split(s||""))||[]:[m];return new Vae({symbol:h,label:p,description:y,values:[new Vg({value:g,value2:v,value3:b})]})}),u=[new NP({classes:a})];e&&Object.freeze(u),this._set("uniqueValueGroups",u),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=t??{};let a=this._cache.compiledFunc;const u=n.arcadeUtils;if(!a){const h=u.createSyntaxTree(this.valueExpression);a=u.createFunction(h),this._cache.compiledFunc=a}const c=u.executeFunction(a,u.createExecContext(e,u.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._valueInfoMap[Nm(c)]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(this.field2){const s=this.field2,n=this.field3,o=[];t&&o.push(i[t]),s&&o.push(i[s]),n&&o.push(i[n]),r=o.join(this.fieldDelimiter||"")}else t&&(r=i[t]);return this._valueInfoMap[Nm(r)]}static fromPortalStyle(e,t){const i=new Cb(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",(t==null?void 0:t.portal)||Hr.getDefault());const r=i.populateFromStyle();return r.catch(s=>{$c().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(e,t){const i=new Cb(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(s=>{$c().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};l([d({readOnly:!0})],Rt.prototype,"_cache",null),l([ee({uniqueValue:"unique-value"})],Rt.prototype,"type",void 0),l([d(oV)],Rt.prototype,"backgroundFillSymbol",void 0),l([d({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Rt.prototype,"field",null),l([ke("field")],Rt.prototype,"castField",null),l([J("field")],Rt.prototype,"writeField",null),l([d({type:String,value:null,json:{write:!0}})],Rt.prototype,"field2",null),l([d({type:String,value:null,json:{write:!0}})],Rt.prototype,"field3",null),l([d({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Rt.prototype,"orderByClassesEnabled",void 0),l([d({type:String,value:null,json:{write:!0}})],Rt.prototype,"valueExpression",null),l([d({type:String,json:{write:!0}})],Rt.prototype,"valueExpressionTitle",void 0),l([d({type:HI,json:{write:!0}})],Rt.prototype,"legendOptions",void 0),l([d({type:String,json:{write:!0}})],Rt.prototype,"defaultLabel",void 0),l([d(D5({...BI},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Rt.prototype,"defaultSymbol",null),l([d({type:String,value:null,json:{write:!0}})],Rt.prototype,"fieldDelimiter",null),l([d({type:Hr,readOnly:!0})],Rt.prototype,"portal",void 0),l([W("portal",["styleName"])],Rt.prototype,"readPortal",null),l([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Rt.prototype,"styleOrigin",void 0),l([W("styleOrigin",["styleName","styleUrl"])],Rt.prototype,"readStyleOrigin",null),l([J("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Rt.prototype,"writeStyleOrigin",null),l([d({type:[NP],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||F5e(t)).map(r=>NP.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Rt.prototype,"uniqueValueGroups",null),l([d({type:[zg],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],Rt.prototype,"uniqueValueInfos",null),Rt=Cb=l([x(zae)],Rt);const aV=Rt;var kP;let Vi=kP=class extends P{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new kP(R({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};l([d({type:[String],json:{write:!0}})],Vi.prototype,"attachmentTypes",void 0),l([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Vi.prototype,"attachmentsWhere",void 0),l([d({type:Boolean,json:{write:!0}})],Vi.prototype,"cacheHint",void 0),l([d({type:[String],json:{write:!0}})],Vi.prototype,"keywords",void 0),l([d({type:[String],json:{write:!0}})],Vi.prototype,"globalIds",void 0),l([d({json:{write:!0}})],Vi.prototype,"name",void 0),l([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Vi.prototype,"num",void 0),l([d({type:[Number],json:{write:!0}})],Vi.prototype,"objectIds",void 0),l([d({type:[String],json:{write:!0}})],Vi.prototype,"orderByFields",void 0),l([d({type:Boolean,json:{default:!1,write:!0}})],Vi.prototype,"returnMetadata",void 0),l([d({type:[Number],json:{write:!0}})],Vi.prototype,"size",void 0),l([d({type:Number,json:{read:{source:"resultOffset"}}})],Vi.prototype,"start",void 0),l([J("start"),J("num")],Vi.prototype,"writeStart",null),l([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Vi.prototype,"where",void 0),Vi=kP=l([x("esri.rest.support.AttachmentQuery")],Vi),Vi.from=yt(Vi);const PP=Vi,Uae=Si()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),C7="percent-of-total",O7="field",qae=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let i=this._get("normalizationType");const r=!!this.normalizationField,s=this.normalizationTotal!=null;return r||s?(i=r&&O7||s&&C7||null,r&&s&&q.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):i!==O7&&i!==C7||(i=null),i}set normalizationType(i){this._set("normalizationType",i)}};return l([d({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),l([d({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),l([d({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),l([d({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),l([ee(Uae,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=l([x("esri.rest.support.NormalizationBinParametersMixin")],t),t};var DP;let Vt=DP=class extends P{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new DP(R({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};l([d({type:Boolean,json:{write:!0}})],Vt.prototype,"cacheHint",void 0),l([d({type:aa,json:{write:!0}})],Vt.prototype,"dynamicDataSource",void 0),l([d({type:String,json:{write:!0}})],Vt.prototype,"gdbVersion",void 0),l([d({type:Number,json:{write:!0}})],Vt.prototype,"geometryPrecision",void 0),l([d({type:Date})],Vt.prototype,"historicMoment",void 0),l([J("historicMoment")],Vt.prototype,"_writeHistoricMoment",null),l([d({type:Number,json:{write:!0}})],Vt.prototype,"maxAllowableOffset",void 0),l([d({json:{write:!0}})],Vt.prototype,"objectIds",void 0),l([d({type:[String],json:{write:!0}})],Vt.prototype,"orderByFields",void 0),l([d({type:[String],json:{write:!0}})],Vt.prototype,"outFields",void 0),l([d({type:we,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Vt.prototype,"outSpatialReference",void 0),l([d({json:{write:!0}})],Vt.prototype,"relationshipId",void 0),l([d({type:Number,json:{read:{source:"resultOffset"}}})],Vt.prototype,"start",void 0),l([J("start"),J("num")],Vt.prototype,"writeStart",null),l([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Vt.prototype,"num",void 0),l([d({json:{write:!0}})],Vt.prototype,"returnGeometry",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Vt.prototype,"returnM",void 0),l([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Vt.prototype,"returnZ",void 0),l([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Vt.prototype,"where",void 0),Vt=DP=l([x("esri.rest.support.RelationshipQuery")],Vt),Vt.from=yt(Vt);const jv=Vt,zet=Object.freeze(Object.defineProperty({__proto__:null,default:jv},Symbol.toStringTag,{value:"Module"})),jP=new be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function N5e(e,t,i,r){const s=await Rh(e);if(await lV(e,t,r),!s.addAttachment)throw new M(r,"Layer source does not support addAttachment capability");return s.addAttachment(t,i)}function lV(e,t,i){var n,o;const{attributes:r}=t,{objectIdField:s}=e;return(o=(n=e.capabilities)==null?void 0:n.data)!=null&&o.supportsAttachment?t?r?s&&r[s]?Promise.resolve():Promise.reject(new M(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new M(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new M(i,"A feature is required to add/delete/update attachments")):Promise.reject(new M(i,"this layer doesn't support attachments"))}async function L5e(e,t,i,r,s){const n=await Rh(e);if(await lV(e,t,s),!n.updateAttachment)throw new M(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(t,i,r)}async function k5e(e,t,i){const{applyEdits:r}=await L(()=>import("./editingSupport-YV5t1_jO.js"),[]),s=await e.load();let n=i;return s.type==="feature"&&s.infoFor3D&&t.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await s4e(s,t.deleteFeatures,s.globalIdField)}),r(s,s.source,t,i)}async function P5e(e,t,i){const{uploadAssets:r}=await L(()=>import("./editingSupport-YV5t1_jO.js"),[]),s=await e.load();return r(s,s.source,t,i)}async function D5e(e,t,i,r){const s=await Rh(e);if(await lV(e,t,r),!s.deleteAttachments)throw new M(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(t,i)}async function j5e(e,t,i){const r=(await e.load({signal:t==null?void 0:t.signal})).source;if(!r.fetchRecomputedExtents)throw new M(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function V5e(e,t,i,r){var y,g,v,b;t=PP.from(t),await e.load();const s=e.source,n=e.capabilities;if(!((y=n==null?void 0:n.data)!=null&&y.supportsAttachment))throw new M(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:u,num:c,size:h,start:p,where:m}=t;if(!((g=n==null?void 0:n.operations)!=null&&g.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(u==null?void 0:u.length)>0||(h==null?void 0:h.length)>0||c||p||m))throw new M(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a!=null&&a.length||u!=null&&u.length||m))throw new M(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!s.queryAttachments)throw new M(r,"Layer source does not support queryAttachments capability",t);return!((v=n==null?void 0:n.attachment)!=null&&v.supportsOrderByFields)&&((b=t.orderByFields)!=null&&b.length)&&((t=t.clone()).orderByFields=null),s.queryAttachments(t)}async function z5e(e,t,i,r){const s=await Rh(e);if(!s.queryObjectIds)throw new M(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(xr.from(t)??e.createQuery(),i)}async function U5e(e,t,i,r){const s=await Rh(e);if(!s.queryFeatureCount)throw new M(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(xr.from(t)??e.createQuery(),i)}async function q5e(e,t,i,r){const s=await Rh(e);if(!s.queryExtent)throw new M(r,"Layer source does not support queryExtent capability");return s.queryExtent(xr.from(t)??e.createQuery(),i)}async function G5e(e,t,i,r){const s=await Rh(e);if(!s.queryRelatedFeatures)throw new M(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(jv.from(t),i)}async function B5e(e,t,i,r){const s=await Rh(e);if(!s.queryRelatedFeaturesCount)throw new M(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(jv.from(t),i)}async function H5e(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(r!=null&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await ire(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function W5e(e){var o,a;const t=new xr,i=(o=e.capabilities)==null?void 0:o.data,r=(a=e.capabilities)==null?void 0:a.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:s,timeExtent:n}=e;return t.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function Gae(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function Bae(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function Z5e(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function J5e(e,t,i,r){var u,c;const s=i==null?void 0:i.feature,n=!!((u=e.subtypes)!=null&&u.length);if(n&&!(i!=null&&i.excludeImpliedDomains)){const h=Q5e(e,t);if(h)return h}const o=n&&Y5e(e,s);if(o){const h=(c=o==null?void 0:o.domains)==null?void 0:c[t];return(h==null?void 0:h.type)==="inherited"?r:h}const a=Zae(e.types,e.typeIdField,s);if(a){const h=a.domains&&a.domains[t];if(h&&(h==null?void 0:h.type)!=="inherited")return h}if(r)return r;if(!(i!=null&&i.excludeImpliedDomains)){const h=X5e(e,t);if(h)return h}return null}function Y5e(e,t){const{subtypes:i,subtypeField:r}=e;if(!(t!=null&&t.attributes)||!(i!=null&&i.length)||!r)return null;const s=t.attributes[r];return s==null?null:i.find(n=>n.code===s)}function Q5e(e,t){var o,a;const{fieldsIndex:i,subtypeField:r}=e,{name:s,type:n}=i.get(t)??{};if(!s)return null;if((r&&((o=i.get(r))==null?void 0:o.name))===s&&((a=e.subtypes)!=null&&a.length)){const u=e.subtypes.map(c=>new jd({code:Hae(c.code,n),name:c.name}));if(u!=null&&u.length)return new PS({codedValues:u})}return null}function X5e(e,t){var n,o;const{fieldsIndex:i}=e,{name:r,type:s}=i.get(t)??{};if(!r)return null;if(("typeIdField"in e?(n=i.get(e.typeIdField))==null?void 0:n.name:null)===r&&"types"in e&&((o=e.types)!=null&&o.length)){const a=e.types.map(u=>new jd({code:Hae(u.id,s),name:u.name}));return new PS({codedValues:a})}return null}function Hae(e,t){return t?ej({type:t})&&typeof e=="number"?`${e}`:iMe({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function Rh(e){return(await e.load()).source}async function Uet(e,t){if(!Me)return;const i=Me.findCredential(e);if(i)return i.userId;let r;try{const s=await Z4(e,t);s&&(r=await Me.checkSignInStatus(`${s}/sharing`))}catch{}return r?r.userId:null}async function Wae(e,t){if(!Me||Me.findCredential(e))return;let i;try{const r=await Z4(e,t);r&&(i=await Me.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=t!=null?t.signal:null;await Me.getCredential(e,{signal:r})}catch{}}async function K5e(e,t,i){var s;const r=(s=e.parsedUrl)==null?void 0:s.path;r&&e.authenticationTriggerEvent===t&&await Wae(r,i)}async function qet(e){var i;const t=(i=e.parsedUrl)==null?void 0:i.path;t&&e4e(e)&&await Wae(t)}function e4e(e){return t4e(e)&&("serviceDefinitionExpression"in e&&YM(e.serviceDefinitionExpression)||"definitionExpression"in e&&YM(e.definitionExpression))}function t4e(e){var t;return!(!xie(e)||!((t=e.capabilities)!=null&&t.query.supportsCurrentUser))}function YM(e){return!!(e!=null&&e.toLowerCase().includes("current_user"))}function i4e(e){return!k$(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const OO=s0({types:use});function uV(e,t){var i;if(e.defaultSymbol)return(i=e.types)!=null&&i.length?new aV({defaultSymbol:OO(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(r=>({id:r.id,symbol:OO(r.symbol,r,t)}))}):new gl({symbol:OO(e.defaultSymbol,e,t)})}function r4e(e){var r,s,n;let t=(r=e.sourceJSON)==null?void 0:r.cacheMaxAge;if(!t)return!1;const i=(n=(s=e.editingInfo)==null?void 0:s.lastEditDate)==null?void 0:n.getTime();return i==null||(t*=1e3,Date.now()-i<t)}async function s4e(e,t,i){if(t==null)return null;const r=[],{objectIdField:s}=e;if(t.forEach(c=>{let h=null;if("attributes"in c){const{attributes:p}=c;h={globalId:p[i],objectId:p[s]!=null&&p[s]!==-1?p[s]:null}}else h={globalId:c.globalId,objectId:c.objectId!=null&&c.objectId!==-1?c.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||r.push(h.globalId))}),r.length===0)return null;const n=e.createQuery();n.where=r.map(c=>`${i}='${c}'`).join(" OR "),n.returnGeometry=!1,n.outFields=[s,i],n.cacheHint=!1;const o=await gve(xae(e,n));if(!o.ok)return null;const a=new Map,u=o.value.features;for(const c of u){const h=c.attributes[i],p=c.attributes[s];h!=null&&p!=null&&p!==-1&&a.set(CNe(h),p)}return a}function Zae(e,t,i){if(!t||!i||!e)return null;const r=i.getAttribute(t);return r==null?null:e.find(s=>{const{id:n}=s;return n!=null&&n.toString()===r.toString()})??null}function k$(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||n4e(e)}function n4e(e){var t,i;return!!((i=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&i.toLowerCase().split(",").map(r=>r.trim()).includes("map"))}function o4e(e,t,i){const r=t==null?void 0:t.queryAttributeBins;if(!r)throw new M(i,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new M(i,"Layer source does not support auto-interval binning");if(e.binParameters.normalizationType&&(!r.supportsNormalization||!R7(e.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new M(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new M(i,"Layer source does not support date binning");if(e.binParameters.snapToData&&!r.supportsSnapToData)throw new M(i,"Layer source does not support snapToData binning");if(e.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new M(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new M(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new M(i,"Layer source does not support fixed-interval binning");if(e.binParameters.normalizationType&&(!r.supportsNormalization||!R7(e.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new M(i,"Layer source does not support normalization binning")}if(e.binParameters.stackBy&&!r.supportsStackBy)throw new M(i,"Layer source does not support stackBy binning");if(e.binParameters.splitBy&&!r.supportsSplitBy)throw new M(i,"Layer source does not support splitBy binning");if(e.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new M(i,"Layer source does not support firstDayOfWeek binning");const s=r==null?void 0:r.supportedStatistics;if(e.outStatistics&&s){const n=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of e.outStatistics){const a=n.get(o);if(a&&!s[a])throw new M(i,`Layer source does not support ${o} statistic type`)}}}function R7(e,t){return e!=null&&!!(t!=null&&t[Uae.toJSON(e)])}let Oy=class extends _e.ClonableMixin(P){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};l([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Oy.prototype,"shapeAreaField",void 0),l([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Oy.prototype,"shapeLengthField",void 0),l([d({type:String,json:{read:e=>xwe.read(e)||$we.read(e)}})],Oy.prototype,"units",void 0),Oy=l([x("esri.layers.support.GeometryFieldsInfo")],Oy);const a4e=Oy;var VP;let Ry=VP=class extends P{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Q}clone(){return new VP({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};l([d({type:String,json:{write:{isRequired:!0}}})],Ry.prototype,"floorField",void 0),l([d({json:{read:!1,write:!1}})],Ry.prototype,"viewAllMode",void 0),l([d({json:{read:!1,write:!1}})],Ry.prototype,"viewAllLevelIds",void 0),Ry=VP=l([x("esri.layers.support.LayerFloorInfo")],Ry);const l4e=Ry,F7=new be({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),N7=new be({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let un=class extends _e.ClonableMixin(P){constructor(t){super(t),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};l([d({json:{read:F7.read,write:F7.write}})],un.prototype,"cardinality",void 0),l([d({json:{name:"catalogID"}})],un.prototype,"catalogId",void 0),l([d({json:{read:!0,write:!0}})],un.prototype,"composite",void 0),l([d({json:{read:!0,write:!0}})],un.prototype,"id",void 0),l([d({json:{read:!0,write:!0}})],un.prototype,"keyField",void 0),l([d({json:{read:!0,write:!0}})],un.prototype,"keyFieldInRelationshipTable",void 0),l([d({json:{read:!0,write:!0}})],un.prototype,"name",void 0),l([d({json:{read:!0,write:!0}})],un.prototype,"relatedTableId",void 0),l([d({json:{read:!0,write:!0}})],un.prototype,"relationshipTableId",void 0),l([d({json:{read:N7.read,write:N7.write}})],un.prototype,"role",void 0),un=l([x("esri.layers.support.Relationship")],un);const u4e=un,c4e=[["binary","application/octet-stream","bin",""]];function Het(e,t){return Xae(t.name,(e==null?void 0:e.supportedFormats)??[])!=null}function Wet(e,t){if(!e)return!1;const i=d4e(t,e.supportedFormats??[]);return i!=null&&e.editFormats.includes(i)}function Jae(e,t){return dV(m4e(e,t))}function Yae(e,t){return dV(Xae(e,t))}function Zet(e,t){return Kae(f4e(e,t))}function d4e(e,t){return Yae(e.name,t)??Jae(e.type,t)}function WI(e,t,i){return Jae(e,i)??Yae(t,i)}function Qae({supportedFormats:e}){return WI("model/gltf-binary","glb",e)}function Jet(e){const t=Qae(e);return t!=null&&e.editFormats.includes(t)}function h4e({supportedFormats:e}){return WI("model/gltf+json","gltf",e)}function p4e(e){if(!e)return null;const t=Qae(e),i=h4e(e);let r=null;for(const s of e.queryFormats){if(s===t)return s;s===i&&(r=s)}return r}function Yet({supportedFormats:e}){return WI("application/esri3do-SR_world","wld",e)}function Qet({supportedFormats:e}){return WI("application/esri3do-SR_prj","prj",e)}function cV(e){return[...c4e,...e]}function f4e(e,t){return cV(t).find(i=>dV(i)===e)}function m4e(e,t){const i=e.toLowerCase();return cV(t).find(r=>Kae(r)===i)}function Xae(e,t){const i=e.toLowerCase();return cV(t).find(r=>y4e(r).some(s=>i.endsWith(s)))}function dV(e){return e==null?void 0:e[0]}function Kae(e){return e==null?void 0:e[1].toLowerCase()}function y4e(e){return(e==null?void 0:e[2].split(",").map(t=>t.toLowerCase()))??[]}function Xet(e){var t;return(t=e.tables)==null?void 0:t.find(i=>i.role==="assetMaps")}function le(e,t,i){return!!ele(e,t,i)}function Ob(e,t,i){return ele(e,t,i)}function ele(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}const g4e={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function v4e(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function qS(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(s=>s.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}function w4e(e){var i;const t=(i=e==null?void 0:e.supportedStatisticTypes)==null?void 0:i.map(r=>r.toLowerCase());return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_continuous")),percentileDiscrete:!!(t!=null&&t.includes("percentile_discrete")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function b4e(e){var i;const t=(i=e==null?void 0:e.supportedNormalizationTypes)==null?void 0:i.map(r=>r.toLowerCase());return{field:!!(t!=null&&t.includes("field")),log:!!(t!=null&&t.includes("log")),naturalLog:!!(t!=null&&t.includes("naturallog")),percentOfTotal:!!(t!=null&&t.includes("percentoftotal")),squareRoot:!!(t!=null&&t.includes("squareroot"))}}function tle(e,t){return{analytics:_4e(e),attachment:S4e(e),data:T4e(e),metadata:x4e(e),operations:$4e(e.capabilities,e,t),query:E4e(e,t),queryAttributeBins:I4e(e),queryRelated:M4e(e),queryTopFeatures:A4e(e),editing:C4e(e)}}function _4e(e){return{supportsCacheHint:qS(e.advancedQueryCapabilities,"queryAnalytics")}}function S4e(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:qS(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:le(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:le(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const s=g4e[r.name];s&&(i[s]=!!r.isEnabled)}),i}function T4e(e){return{isVersioned:le(e,"isDataVersioned",!1),isBranchVersioned:le(e,"isDataBranchVersioned",!1),supportsAttachment:le(e,"hasAttachments",!1),supportsM:le(e,"hasM",!1),supportsZ:le(e,"hasZ",!1)}}function x4e(e){return{supportsAdvancedFieldProperties:le(e,"supportsFieldDescriptionProperty",!1)}}function $4e(e,t,i){const r=e?e.toLowerCase().split(",").map(m=>m.trim()):[],s=i?hh(i):null,n=r.includes(s!=null&&s.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!t.datesInUnknownTimezone;let a=o&&r.includes("create"),u=o&&r.includes("delete"),c=o&&r.includes("update");const h=r.includes("changetracking"),p=t.advancedQueryCapabilities;return o&&!(a||u||c)&&(a=u=c=!0),{supportsCalculate:le(t,"supportsCalculate",!1),supportsTruncate:le(t,"supportsTruncate",!1),supportsValidateSql:le(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:u,supportsEditing:o,supportsChangeTracking:h,supportsQuery:n,supportsQueryAnalytics:le(p,"supportsQueryAnalytic",!1),supportsQueryAttachments:le(p,"supportsQueryAttachments",!1),supportsQueryBins:le(p,"supportsQueryBins",!1),supportsQueryTopFeatures:le(p,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:le(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:le(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:le(t,"supportsAsyncConvert3D",!1)}}function E4e(e,t){const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,n=e.currentVersion,o=t==null?void 0:t.includes("MapServer"),a=!o||n>=D("mapserver-pbf-version-support"),u=l1(t),c=new Set((e.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:Ob(e,"maxRecordCount",void 0),maxRecordCountFactor:Ob(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:Ob(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:v4e(i),supportsCacheHint:le(i,"supportsQueryWithCacheHint",!1)||qS(i,"query"),supportsCentroid:le(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:u,supportsCurrentUser:le(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:le(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:le(i,"supportsDisjointSpatialRel",!1),supportsDistance:le(i,"supportsQueryWithDistance",!1),supportsDistinct:le(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:le(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&c.has("pbf"),supportsFullTextSearch:le(i,"supportsFullTextSearch",!1),supportsGeometryProperties:le(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:le(i,"supportsHavingClause",!1),supportsHistoricMoment:le(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:le(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:le(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:le(i,"supportsPagination",!1),supportsPercentileStatistics:le(i,"supportsPercentileStatistics",!1),supportsQuantization:le(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:le(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:le(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:le(r,"allowOthersToQuery",!0),supportsQueryGeometry:le(e,"supportsReturningQueryGeometry",!1),supportsResultType:le(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!p4e(e.infoFor3D),supportsSpatialAggregationStatistics:le(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:le(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:le(e,"useStandardizedQueries",!1),supportsStatistics:le(i,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:le(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:le(i,"supportsTrueCurve",!1),tileMaxRecordCount:Ob(e,"tileMaxRecordCount",void 0)}}function M4e(e){const t=e.advancedQueryCapabilities,i=le(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:le(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:qS(t,"queryRelated")}}function A4e(e){return{supportsCacheHint:qS(e.advancedQueryCapabilities,"queryTopFilter")}}function I4e(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:le(t,"supportsDateBin",!1),supportsFixedInterval:le(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:le(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:le(t,"supportsFixedBoundariesBin",!1),supportsStackBy:le(t,"supportsStackBy",!1),supportsSplitBy:le(t,"supportsSplitBy",!1),supportsSnapToData:le(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:le(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:le(t,"supportsFirstDayOfWeek",!1),supportsNormalization:le(t,"supportsNormalization",!1),supportedStatistics:w4e(t),supportedNormalizationTypes:b4e(t)}}function C4e(e){const t=e.ownershipBasedAccessControlForFeatures,i=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:le(e,"allowGeometryUpdates",!0),supportsGlobalId:le(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:le(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:le(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:le(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:le(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:le(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:le(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:le(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:le(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:le(i,"supportsAsyncApplyEdits",!1),zDefault:Ob(e,"zDefault",void 0)}}function Ket(e){var t;return{operations:{supportsAppend:le(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:le(e,"supportsExportClip",!1),supportsExportFrameset:le(e,"supportsExportFrameset",!1),supportsMensuration:le(e,"supportsMensuration",!1),supportsUpdate:le(e,"supportsUpdate",!1)}}}let au=class extends _e.ClonableMixin(P){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const i={};for(const r of Object.keys(t))i[r]=TI(t[r]);return i}writeDomains(t,i){var s;if(!t)return;const r={};for(const n of Object.keys(t))t[n]&&(r[n]=(s=t[n])==null?void 0:s.toJSON());i.domains=r}};l([d({type:Number,json:{write:!0}})],au.prototype,"code",void 0),l([d({type:Object,json:{write:!0}})],au.prototype,"defaultValues",void 0),l([d({json:{write:!0}})],au.prototype,"domains",void 0),l([W("domains")],au.prototype,"readDomains",null),l([J("domains")],au.prototype,"writeDomains",null),l([d({type:String,json:{write:!0}})],au.prototype,"name",void 0),au=l([x("esri.layers.support.Subtype")],au);const O4e=au,R4e=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Q.ofType(Xa)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=we.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}getFieldDomain(){throw new Error("Not implemented")}getField(i){return this.fieldsIndex.get(i)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:s,operations:n,editing:o}=i;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||n.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(YM(this.serviceDefinitionExpression)||YM(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(r4e(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r!=null&&r.creatorField||r!=null&&r.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,r){return tle(r,this.url)}readEditingInfo(i,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=R(i),{operations:s,editing:n}=r;return k$(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=n.supportsDeleteByOthers=n.supportsGeometryUpdate=n.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=n.supportsGeometryUpdate=!0),r)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(i,r){return Gae(r)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||k$(this))return!1;const{operations:r,editing:s}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:r,editing:s}=i;return k$(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return Bae(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){if(i==null)return void this._set("url",i);const r=A0e({layer:this,url:i,nonStandardUrlAllowed:!0,logger:q.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,s,n){I0e(this,i,null,r,n)}readVersion(i,r){return Z5e(r)}};return l([d({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),l([d({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),l([d({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),l([W("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),l([d(vM("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),l([d({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),l([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),l([d({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),l([d({readOnly:!0,type:$De})],t.prototype,"editFieldsInfo",void 0),l([d({readOnly:!0})],t.prototype,"editingInfo",void 0),l([W("editingInfo")],t.prototype,"readEditingInfo",null),l([d({readOnly:!0})],t.prototype,"effectiveCapabilities",null),l([d()],t.prototype,"effectiveEditingEnabled",null),l([d((()=>{const i=R(wDe),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),l([d()],t.prototype,"fieldsIndex",void 0),l([d({type:l4e,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:Pt}}})],t.prototype,"floorInfo",void 0),l([d({type:gt,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),l([d()],t.prototype,"gdbVersion",void 0),l([d({readOnly:!0,type:a4e,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),l([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:jP.read}}}})],t.prototype,"geometryType",void 0),l([d({type:String})],t.prototype,"globalIdField",void 0),l([W("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),l([d({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),l([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),l([d({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),l([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),l([d({readOnly:!0,type:ES})],t.prototype,"heightModelInfo",void 0),l([d({type:Date})],t.prototype,"historicMoment",void 0),l([d({type:Q.ofType(Xa),readOnly:!0})],t.prototype,"indexes",void 0),l([d({readOnly:!0})],t.prototype,"isTable",void 0),l([W("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),l([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),l([d(TDe)],t.prototype,"maxScale",void 0),l([W("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),l([d(SDe)],t.prototype,"minScale",void 0),l([W("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),l([d({type:String})],t.prototype,"objectIdField",void 0),l([W("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),l([d(vM("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),l([d({type:[u4e],readOnly:!0})],t.prototype,"relationships",void 0),l([d({type:Boolean})],t.prototype,"returnM",void 0),l([d({type:Boolean})],t.prototype,"returnZ",void 0),l([d({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),l([d({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),l([W("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),l([d({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),l([d()],t.prototype,"sourceJSON",void 0),l([d({type:we,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),l([d({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),l([d({type:[O4e],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),l([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),l([d(gDe)],t.prototype,"url",null),l([J("url")],t.prototype,"writeUrl",null),l([d({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),l([W("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=l([x("esri.layers.mixins.FeatureLayerBase")],t),t};let Fy=class extends _e.ClonableMixin(P){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};l([d({type:String,json:{write:!0}})],Fy.prototype,"expression",void 0),l([d({type:String,json:{write:!0}})],Fy.prototype,"title",void 0),l([d({type:String,json:{write:!0}})],Fy.prototype,"returnType",void 0),Fy=l([x("esri.layers.support.ExpressionInfo")],Fy);const Kf=Fy;var zP;let lu=zP=class extends P{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new zP({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:R(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};l([d({type:Boolean,json:{write:!0}})],lu.prototype,"isAutoGenerated",void 0),l([d({type:String,json:{write:!0}})],lu.prototype,"name",void 0),l([d({type:String,json:{write:!0}})],lu.prototype,"alias",void 0),l([d({type:String,json:{write:!0}})],lu.prototype,"onStatisticField",void 0),l([d({type:Kf,json:{write:!0}})],lu.prototype,"onStatisticExpression",void 0),l([d({type:String,json:{write:!0}})],lu.prototype,"statisticType",void 0),lu=zP=l([x("esri.layers.support.AggregateField")],lu);const xo=lu;let nh=class extends P{constructor(){super(...arguments),this.type=null}};l([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],nh.prototype,"type",void 0),nh=l([x("esri.layers.support.FeatureReduction")],nh);const hV="__begin__",pV="__end__",F4e=new RegExp(hV,"ig"),N4e=new RegExp(pV,"ig"),L7=new RegExp("^"+hV,"i"),k7=new RegExp(pV+"$","i"),QM='"',L4e=QM+" + ",k4e=" + "+QM;function P4e(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function D4e(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function fV(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=P4e(e.labelExpression),t.type="conventional"),t}function j4e(e){const t=fV(e);switch(t.type){case"conventional":return UP(t.expression);case"arcade":return t.expression}return null}function V4e(e){const t=fV(e);switch(t.type){case"conventional":return U4e(t.expression);case"arcade":return ile(t.expression)}return null}function UP(e){let t;return e?(t=ga(e,i=>hV+'$feature["'+i+'"]'+pV),t=L7.test(t)?t.replace(L7,""):QM+t,t=k7.test(t)?t.replace(k7,""):t+QM,t=t.replaceAll(F4e,L4e).replaceAll(N4e,k4e)):t='""',t}const z4e=/^\s*\{([^}]+)\}\s*$/i;function U4e(e){const t=e==null?void 0:e.match(z4e);return(t==null?void 0:t[1].trim())||null}const q4e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,G4e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,B4e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function ile(e){if(!e)return null;let t=q4e.exec(e)||G4e.exec(e);return t?t[1]||t[3]:(t=B4e.exec(e),t?t[2]:null)}var qP;let id=qP=class extends P{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?UP(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=UP(this.value)),e!=null&&(t[i]=e)}clone(){return new qP({expression:this.expression,title:this.title,value:this.value})}};l([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],id.prototype,"expression",void 0),l([W("expression",["expression","value"])],id.prototype,"readExpression",null),l([J("expression")],id.prototype,"writeExpression",null),l([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],id.prototype,"title",void 0),l([d({json:{read:!1,write:!1}})],id.prototype,"value",void 0),id=qP=l([x("esri.layers.support.LabelExpressionInfo")],id);const mV=id;var GP;const N2=new be({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function L2(e,t,i){return{enabled:!TN(i==null?void 0:i.layer)}}function rle(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function H4e(e){return(e==null?void 0:e.type)==="map-image"}function sle(e){var t,i;return!!H4e(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function W4e(e){return rle(e)||sle(e==null?void 0:e.layer)}let ni=GP=class extends P{static evaluateWhere(e,t){const i=(r,s,n)=>{switch(s){case"=":return r==n;case"<>":return r!=n;case">":return r>n;case">=":return r>=n;case"<":return r<n;case"<=":return r<=n}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const s=i(t[r[0]],r[1],r[2]),n=r[3],o=i(t[r[4]],r[5],r[6]);switch(n){case"AND":return s&&o;case"OR":return s||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=h5e,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=D4e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=ile(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&rle(r))e=new mV({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(r);s.expression&&(t[i]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return fV(this)}getLabelExpressionArcade(){return j4e(this)}getLabelExpressionSingleField(){return V4e(this)}hash(){return JSON.stringify(this)}clone(){return new GP({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:R(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:R(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};l([d({type:String,json:{write:!0}})],ni.prototype,"name",void 0),l([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:L2}}}}})],ni.prototype,"allowOverrun",void 0),l([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:L2}}}}})],ni.prototype,"deconflictionStrategy",void 0),l([d({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&sle(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],ni.prototype,"labelExpression",void 0),l([W("labelExpression")],ni.prototype,"readLabelExpression",null),l([J("labelExpression")],ni.prototype,"writeLabelExpression",null),l([d({type:mV,json:{write:{overridePolicy:(e,t,i)=>W4e(i)?{allowNull:!0}:{enabled:!1}}}})],ni.prototype,"labelExpressionInfo",void 0),l([J("labelExpressionInfo")],ni.prototype,"writeLabelExpressionInfo",null),l([d({type:N2.apiValues,json:{type:N2.jsonValues,read:N2.read,write:N2.write}})],ni.prototype,"labelPlacement",void 0),l([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],ni.prototype,"labelPosition",void 0),l([d({type:Number})],ni.prototype,"maxScale",void 0),l([J("maxScale")],ni.prototype,"writeMaxScale",null),l([d({type:Number})],ni.prototype,"minScale",void 0),l([J("minScale")],ni.prototype,"writeMinScale",null),l([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:L2}}}}})],ni.prototype,"repeatLabel",void 0),l([d({type:Number,cast:Je,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:L2}}}}})],ni.prototype,"repeatLabelDistance",void 0),l([d({types:oAe,json:{origins:{"web-scene":{types:aAe,write:S7,default:null}},write:S7,default:null}})],ni.prototype,"symbol",void 0),l([d({type:Boolean,json:{write:!0}})],ni.prototype,"useCodedValues",void 0),l([d({type:String,json:{write:!0}})],ni.prototype,"where",void 0),ni=GP=l([x("esri.layers.support.LabelClass")],ni);const E0=ni;var BP;let rd=BP=class extends P{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new BP({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};l([d({type:String,json:{write:!0}})],rd.prototype,"description",void 0),l([d({type:String,json:{write:!0}})],rd.prototype,"label",void 0),l([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],rd.prototype,"minValue",void 0),l([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],rd.prototype,"maxValue",void 0),l([d(nV)],rd.prototype,"symbol",void 0),rd=BP=l([x("esri.renderers.support.ClassBreakInfo")],rd);const XM=rd;var HP;const nle="log",P$="percent-of-total",D$="field",k2=new be({esriNormalizeByLog:nle,esriNormalizeByPercentOfTotal:P$,esriNormalizeByField:D$}),Z4e=yt(XM);let Ei=HP=class extends $0(dc){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(s=>{const n=new XM;return n.read(s,i),n.minValue==null&&(n.minValue=r),n.maxValue==null&&(n.maxValue=n.minValue),r=n.maxValue,n})}writeClassBreakInfos(e,t,i,r){const s=e.map(n=>n.write({},r));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),t[i]=s}castField(e){return e==null?e:typeof e=="function"?(q.getLogger(this).error(".field: field must be a string value"),null):mS(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&D$||i&&P$||null,t&&i&&q.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==D$&&e!==P$||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new XM({minValue:e,maxValue:t,symbol:cse(i)}):Z4e(R(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&q.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await On()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void q.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const s=await On(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new HP({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:R(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:R(this.visualVariables),legendOptions:R(this.legendOptions),authoringInfo:R(this.authoringInfo)})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.symbols.map(r=>r.collectRequiredFields(e,t)),Wr(e,t,this.valueExpression)];ps(e,t,this.field),ps(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=t??{},{valueExpression:a}=this;let u=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=n.arcadeUtils;if(!u){const p=c.createSyntaxTree(a);u=c.createFunction(p),this._compiledValueExpression.compiledFunction=u}this._compiledValueExpression.valueExpression=a;const h=c.executeFunction(u,c.createExecContext(e,c.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let s=parseFloat(i[t]);if(r){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===nle)s=Math.log(s)*Math.LOG10E;else if(r!==P$||n==null||isNaN(n)){if(r===D$&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};l([d(oV)],Ei.prototype,"backgroundFillSymbol",void 0),l([d({type:[XM],json:{write:{isRequired:!0}}})],Ei.prototype,"classBreakInfos",void 0),l([W("classBreakInfos")],Ei.prototype,"readClassBreakInfos",null),l([J("classBreakInfos")],Ei.prototype,"writeClassBreakInfos",null),l([d({type:String,json:{write:!0}})],Ei.prototype,"defaultLabel",void 0),l([d(BI)],Ei.prototype,"defaultSymbol",void 0),l([d({type:String,json:{write:!0}})],Ei.prototype,"field",void 0),l([ke("field")],Ei.prototype,"castField",null),l([d({type:Boolean})],Ei.prototype,"isMaxInclusive",void 0),l([d({type:HI,json:{write:!0}})],Ei.prototype,"legendOptions",void 0),l([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ei.prototype,"minValue",null),l([d({type:String,json:{write:!0}})],Ei.prototype,"normalizationField",void 0),l([d({type:Number,json:{write:!0}})],Ei.prototype,"normalizationTotal",void 0),l([d({type:k2.apiValues,value:null,json:{type:k2.jsonValues,read:k2.read,write:k2.write}})],Ei.prototype,"normalizationType",null),l([ee({classBreaks:"class-breaks"})],Ei.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],Ei.prototype,"valueExpression",void 0),l([d({type:String,json:{write:!0}})],Ei.prototype,"valueExpressionTitle",void 0),Ei=HP=l([x("esri.renderers.ClassBreaksRenderer")],Ei);const ole=Ei,WP=-3,J4e=WP-1;var bu;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(bu||(bu={}));let Y4e=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new bf,this._users=new bf}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,i){const r=this._db.get(t.id+i);return(r==null?void 0:r.size)??0}put(t,i,r,s,n){i=t.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,bu.ALL)),s>this._maxSize)return void this._notifyRemove(i,r,s,bu.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn(`Refusing to cache entry with size ${s} for key ${i}`),void this._notifyRemove(i,r,0,bu.ALL);const a=1+Math.max(n,J4e)-WP;this._db.set(i,new Q4e(r,s,a)),this._size+=s,t.size+=s,this._checkSize()}updateSize(t,i,r,s){i=t.id+i;const n=this._db.get(i);if(n&&n.entry===r){for(this._size-=n.size,t.size-=n.size;s>this._maxSize;){const o=this._notifyRemove(i,r,s,bu.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);s=o}n.size=s,this._size+=s,t.size+=s,this._checkSize()}}pop(t,i){i=t.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,t.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(t,i){i=t.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(t,i){const r=this._db.get(t.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const u=o.lifetime;r[u]=(r[u]||0)+o.size,this._users.forAll(c=>{const{id:h,name:p}=c;if(a.startsWith(h)){const m=i[p]||0;i[p]=m+o.size}})});const s={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const u=i[a]||0;i[a]=u,s[a]=Math.round(100*o.hitRate)+"%"}else s[a]="0%"});const n=Object.keys(i);n.sort((o,a)=>i[a]-i[o]),n.forEach(o=>t[o]=Math.round(i[o]/2**20)+"MB / "+s[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(t["Priority "+(o+WP-1)]=Math.round(a/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const i=t.id;this._db.forEach((r,s)=>{s.startsWith(i)&&(this._size-=r.size,this._db.delete(s),this._notifyRemove(s,r.entry,r.size,bu.ALL))}),t.size=0}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,t.size,bu.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r,s){let n;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const a=o[1](i,s,r);return typeof a=="number"&&(n=a),!0}return!1}),n}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const i=t??this;if(i.maxSize<0||i.size<=i.maxSize)return;const r=t==null?void 0:t.id;let s=!0;for(;s;){s=!1;for(const[n,o]of this._db)if(o.lifetime===0&&(!r||n.startsWith(r))){if(this._purgeItem(n,o,t),i.size<=.9*i.maxSize)return;s||(s=this._db.has(n))}}for(const[n,o]of this._db)if((!r||n.startsWith(r))&&(this._purgeItem(n,o,t),i.size<=.9*i.maxSize))return}_purgeItem(t,i,r=this._users.find(s=>t.startsWith(s.id))){if(this._db.delete(t),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const s=this._notifyRemove(t,i.entry,i.size,bu.SOME);s!=null&&s>0&&(this._size+=s,r&&(r.size+=s),i.lives=i.lifetime,i.size=s,this._db.set(t,i))}else--i.lives,this._db.set(t,i)}},Q4e=class{constructor(t,i,r){this.entry=t,this.size=i,this.lifetime=r,this.lives=r}},ale=class{constructor(t,i){this._storage=new Y4e,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,i,r=1){this._storage.put(this,t,i,r,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}};function X4e(e){return"timeZone"in e}function K4e(e){return"timeZone"in e}function eje(e){return"dateFieldsTimeZone"in e}const tje=new Map;let lle=class j${static fromJSON(t){return new j$(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new j$(t.fields??[],D7(t))}static fromLayerJSON(t){return new j$(t.fields??[],D7(t))}constructor(t=[],i){var s;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const n of this.fields){const o=n==null?void 0:n.name,a=P7(o);if(o&&a){const u=Zp(o);this._fieldsMap.set(o,n),this._fieldsMap.set(u,n),this._normalizedFieldsMap.set(a,n),r.push(`${u}:${n.type}:${(s=this._timeZoneByFieldName)==null?void 0:s.get(o)}`),fI(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):AS(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),L9(n)||k9(n)||(n.editable=n.editable==null||!!n.editable,n.nullable=n.nullable==null||!!n.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)L9(t)||k9(t)||t.nullable||HEe(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let i=this._fieldsMap.get(t);return i||(i=this._fieldsMap.get(Zp(t))??this._normalizedFieldsMap.get(P7(t)),i&&this._fieldsMap.set(t,i),i)}getTimeZone(t){const i=this.get(t&&typeof t!="string"?t.name:t);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(q.getLogger("esri.layers.support.FieldsIndex").errorOnce(new M("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),bl):ule.has(i.type)?Wf:null:null}getLuxonTimeZone(t){const i=this.getTimeZone(t);return i?i===Wf?ua.instance:i===bl?Oi.utcInstance:i0(tje,i,()=>Zs.create(i)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return zs(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var i;return((i=this.get(t))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(t=>P.isSerializable(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Zp(e){return e.trim().toLowerCase()}function P7(e){var t;return((t=REe(e))==null?void 0:t.toLowerCase())??""}const ule=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function D7(e){const t=new Map;if(!e.fields)return t;const i=e.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:s}=e,n=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=eje(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?Px(e.dateFieldsTimeReference):null,u=s?X4e(s)?s.timeZone??a:s.dateFieldsTimeReference?Px(s.dateFieldsTimeReference):a??bl:null,c=r?K4e(r)?r.timeZone??a:r.timeReference?Px(r.timeReference):a:null,h=new Map([[Zp((s==null?void 0:s.creationDateField)??""),u],[Zp((s==null?void 0:s.editDateField)??""),u],[Zp(n),c],[Zp(o),c]]);for(const{name:p,type:m}of e.fields)if(ule.has(m))t.set(p,Wf);else if(m!=="date"&&m!=="esriFieldTypeDate")t.set(p,null);else if(i)t.set(p,Wf);else{const y=h.get(Zp(p??""))??a;t.set(p,y)}return t}var j7,V7,z7,U7,q7,G7,B7,H7,W7,Z7,ZP,JP,J7,Y7,Q7,X7,K7,eB,tB,iB,rB,sB,nB,oB,aB,lB,uB,cB,dB,hB,pB,fB,mB,yB,gB,vB,wB,bB,_B,SB,TB,xB,$B,EB,MB,AB,IB,CB,OB,RB,FB,NB,LB,kB,PB,KM,DB,jB,VB,zB,UB,qB,GB;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(j7||(j7={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(V7||(V7={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(z7||(z7={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(U7||(U7={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(q7||(q7={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(G7||(G7={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(B7||(B7={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(H7||(H7={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(W7||(W7={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(Z7||(Z7={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(ZP||(ZP={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(JP||(JP={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(J7||(J7={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(Y7||(Y7={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(Q7||(Q7={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(X7||(X7={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(K7||(K7={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(eB||(eB={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(tB||(tB={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(iB||(iB={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(rB||(rB={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(sB||(sB={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(nB||(nB={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(oB||(oB={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(aB||(aB={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(lB||(lB={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(uB||(uB={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(cB||(cB={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(dB||(dB={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(hB||(hB={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(pB||(pB={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(fB||(fB={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(mB||(mB={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AlongLine=1]="AlongLine"}(yB||(yB={})),function(e){e[e.Auto=0]="Auto",e[e.Clockwise=1]="Clockwise",e[e.Counterclockwise=2]="Counterclockwise"}(gB||(gB={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(vB||(vB={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(wB||(wB={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(bB||(bB={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(_B||(_B={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(SB||(SB={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(TB||(TB={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(xB||(xB={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}($B||($B={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(EB||(EB={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(MB||(MB={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(AB||(AB={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(IB||(IB={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(CB||(CB={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(OB||(OB={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(RB||(RB={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(FB||(FB={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(NB||(NB={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(LB||(LB={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(kB||(kB={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(PB||(PB={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(KM||(KM={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(DB||(DB={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(jB||(jB={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(VB||(VB={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(zB||(zB={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(UB||(UB={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(qB||(qB={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(GB||(GB={}));const ije={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},YP={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:KM.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:KM.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:ZP.Loop,repeatdelay:0,easing:JP.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function rje(e){return typeof e=="function"}function ott(e,t,i,r){return rje(e)?e(t,i,r):e}function att(e){return[e.r,e.g,e.b,e.a]}const sje=` /-,
`;function BB(e){let t=e.length;for(;t--;)if(!sje.includes(e.charAt(t)))return!1;return!0}function ltt(e,t){const i=[];let r=0,s=-1;do if(s=e.indexOf("[",r),s>=r){if(s>r){const n=e.slice(r,s);i.push([n,null,BB(n)])}if(r=s+1,s=e.indexOf("]",r),s>=r){if(s>r){const n=t[e.slice(r,s)];n&&i.push([null,n,!1])}r=s+1}}while(s!==-1);if(r<e.length){const n=e.slice(r);i.push([n,null,BB(n)])}return i}function utt(e,t,i,r){let s="",n=null;for(const o of t){const[a,u,c]=o;if(a)c?n=a:(n&&(s+=n,n=null),s+=a);else{let h=u;i!=null&&(h=fle(u,i));const p=e.attributes[h];p&&(n&&(s+=n,n=null),s+=p)}}return nje(s,r)}function nje(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function ctt(e,t,i,r,s,n,o=!0){const a=t/s,u=i/n,c=Math.ceil(a/2),h=Math.ceil(u/2);for(let p=0;p<n;p++)for(let m=0;m<s;m++){const y=4*(m+(o?n-p-1:p)*s);let g=0,v=0,b=0,w=0,_=0,S=0,T=0;const E=(p+.5)*u;for(let A=Math.floor(p*u);A<(p+1)*u;A++){const C=Math.abs(E-(A+.5))/h,O=(m+.5)*a,U=C*C;for(let V=Math.floor(m*a);V<(m+1)*a;V++){let H=Math.abs(O-(V+.5))/c;const te=Math.sqrt(U+H*H);te>=-1&&te<=1&&(g=2*te*te*te-3*te*te+1,g>0&&(H=4*(V+A*t),T+=g*e[H+3],b+=g,e[H+3]<255&&(g=g*e[H+3]/250),w+=g*e[H],_+=g*e[H+1],S+=g*e[H+2],v+=g))}}r[y]=w/v,r[y+1]=_/v,r[y+2]=S/v,r[y+3]=T/b}}function cle(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function dle(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function hle(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function ple(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function dtt(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function ZI(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const htt=(e,t=0)=>e==null||isNaN(e)?t:e,ptt=(e,t)=>e??t,ftt=(e,t)=>e??t,mtt=e=>e.tintColor?cle(e.tintColor):[255,255,255,1],ytt=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function gtt(){return L(()=>import("./geometryEngineJSON-AYJgUR1P.js").then(e=>e.g),__vite__mapDeps([3,4,1]))}function vtt(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function wtt(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function btt(e){let t="normal",i="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function _tt(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function HB(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=HB(t);if(i!=null)return i}break;case"CIMTextSymbol":return HB(e.symbol);case"CIMSolidFill":return e.color}return null}function WB(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const i of t){const r=WB(i);if(r!=null)return r}break}case"CIMTextSymbol":return WB(e.symbol);case"CIMSolidStroke":return e.color}}function ZB(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=ZB(t);if(i!==void 0)return i}break;case"CIMTextSymbol":return ZB(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function Stt(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Ttt(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function xtt(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const $tt=e=>e.includes("data:image/svg+xml");function Ett(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function yV(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Mtt(e,t,i,r,s,n,o=!0){const{infos:a}=n;let u=1,c=0,h=0,p=0,m=1;for(const{absoluteAnchorPoint:v,offsetX:b,offsetY:w,rotation:_,size:S,frameHeight:T,rotateClockWise:E,scaleSymbolsProportionally:A}of a)m=v?1:u,h=YB(b,w,c,m,h),p=JB(b,w,c,m,p),T&&(A||o)&&(u*=S/T),c=QB(_,E,c);const y=YB(r,s,c,m,h),g=JB(r,s,c,m,p);return{size:e*u,rotation:QB(t,i,c),offsetX:y,offsetY:g}}function oje(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>oje(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function aje(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...ije[t]];const i=YP[e];if(!i)throw new Error(`InternalError: default value for type ${e}.`);return i[t]}function lje(e){return e.split(" ").map(t=>Number(t))}function uje(e){return typeof e=="string"?lje(e):e}function Att(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=uje(e.dashTemplate)),e}function QP(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const i of t)if(i.type==="CIMVectorMarker")return QP(i)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const i of t)if(i.symbol)return QP(i.symbol)}}return"Normal"}function Itt(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??YP.CIMVectorMarker.size;r>t&&(t=r);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>t&&(t=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&ZI(i.markerPlacement)){const r=i.size??YP.CIMVectorMarker.size;r>t&&(t=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>t&&(t=r)}}}return t}}}function fle(e,t){if(t!==null){const i=t.get(e);return i?i.name:e}return e}function Ctt(e){return e.map(t=>({...t,propertyName:yV(t.propertyName)}))}function Ott(e){const t={};for(const i in e){const r=e[i];t[yV(i)]=r}return t}function JB(e,t,i,r,s){const n=i*Math.PI/180;if(n){const o=Math.cos(n);return(Math.sin(n)*e+o*t)*r+s}return t*r+s}function YB(e,t,i,r,s){const n=i*Math.PI/180;return n?(Math.cos(n)*e-Math.sin(n)*t)*r+s:e*r+s}function QB(e,t,i){return t?i-e:i+e}function Rtt(e,t,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",s=i==="Rotation"||i==="Angle"||i==="ToRotation";let n=t[yV(i)];if(n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180)),n==null&&(n=aje(t.type,i.toLowerCase()),n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:s&&(n*=Math.PI/180))),t.primitiveName!=null){const o=e[t.primitiveName];if(o!=null){const a=o[i];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(n=a,n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180))):(n={valueExpressionInfo:a,defaultValue:n},n!=null&&(r?n={type:"Process",op:"ArcadeColor",value:n}:s&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return n}function Ftt(e,t){return Math.max(Math.min((e??t)/100,1),0)}const XB="esri.renderers.support.DictionaryLoader",cje={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let mle=class{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new ale(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){var p;let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(m){if(fi(m))return this._dictionaryPromise=null,null}const s=(p=this._dictionaryVersion)==null?void 0:p.greaterEqual(4,0),n={};if(this.fieldMap)for(const m of this._symbolFields){const y=fle(this.fieldMap[m],this._fieldIndex);if(y){const g=t.attributes[y];n[m]=s?g:g!=null?""+t.attributes[y]:""}else n[m]=""}let o=null;try{o=r==null?void 0:r(n,i)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const a=o.split(";"),u=[],c=[];for(let m=0;m<a.length;m++){const y=a[m];if(y){if(y.includes("po:")){const g=y.slice(3).split("|");if(g.length===3){const v=g[0],b=g[1];let w=g[2];const _="countrylabel";if(v===_&&b==="TextString"){if(this.fieldMap!=null){let S=this.fieldMap[_];S==null&&(S=_,this.fieldMap[S]=S),t.attributes[S]=w}continue}if(b==="DashTemplate")w=w.split(" ").map(S=>Number(S));else if(b==="Color"){const S=new K(w).toRgba();w=[S[0],S[1],S[2],255*S[3]]}else w=Number(w);c.push({primitiveName:v,propertyName:b,value:w,defaultValue:null})}}else if(y.includes("|")){for(const g of y.split("|"))if(this._itemNames.has(g)){u.push(g);break}}else if(this._itemNames.has(y))u.push(y);else if(m===0){u.length=0;let g="Invalid_P";t.geometry!=null&&(Gu(t.geometry)?g="Invalid_A":ZA(t.geometry)&&(g="Invalid_L")),u.push(g);break}}}const h=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,u,c,h,i)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void q.getLogger(XB).error("no valid URL!");const i=Be(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:r}]=await Promise.all([i,On()]);if(!r)throw this._dictionaryPromise=null,new M("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:s,dictionary_version:n,expression:o,itemsNames:a}=r,u=o;let c=!1;n&&(this._dictionaryVersion=Loe.parse(n),c=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=s.symbol;const h={};if(this.config){const y=this.config;for(const g in y)h[g]=y[g]}if(s.configuration)for(const y of s.configuration)h.hasOwnProperty(y.name)||(h[y.name]=y.value);const p=[];if(t!=null&&t.fields&&this.fieldMap)for(const y in this.fieldMap){const g=this.fieldMap[y],v=t.fields.filter(b=>b.name.toLowerCase()===(g==null?void 0:g.toLowerCase()));v.length>0&&p.push({...v[0],type:c?v[0].type:"esriFieldTypeString"})}p.length>0&&(this._fieldIndex=new lle(p));const m=IEe(u,t!=null?t.spatialReference:null,p,h).then(y=>{const g={scale:0};return(v,b)=>{if(y==null)return null;const w=y.repurposeFeature({geometry:null,attributes:v});return g.scale=b!=null?b.scale??void 0:void 0,y.evaluate({$feature:w,$view:g},y.services)}}).catch(y=>(q.getLogger(XB).error("Creating dictionary expression failed:",y),null));return this._dictionaryPromise=m,m}async _cimPartsToCIMSymbol(t,i,r,s,n){const o=new Array(i.length);for(let c=0;c<i.length;c++)o[c]=this._getSymbolPart(i[c],n);let a=await Promise.all(o);const u=this.fieldMap;if(u&&a.length>0){const{OverrideHelper:c}=await L(()=>import("./OverrideHelper-Ckd7dcDj.js").then(h=>h.O),[]);a=R(a);for(const h of a)c.applyDictionaryTextOverrides(h,t,u,this._fieldIndex,QP(h))}return new Ih({data:dje(a,r,s)})}async _getSymbolPart(t,i){const r=this._symbolCache.get(t);if(r)return r;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const s=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),n=Be(s,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,n),n.finally(()=>this._ongoingRequests.delete(t));try{const o=await n;return this._symbolCache.put(t,o.data),o.data}catch(o){throw o}}};function dje(e,t,i){if(!e||e.length===0)return null;const r={...e[0]};if(e.length>1){r.effects=null,r.symbolLayers=[];for(const s of e){const n=s;if(n.effects!=null)for(const o of n.symbolLayers)o.effects==null?o.effects=n.effects:o.effects.unshift(...n.effects);r.symbolLayers.unshift(...n.symbolLayers)}}return i&&(r.callout=cje),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}var XP;let Yo=XP=class extends $0(dc){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new mle(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new XP({config:R(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:R(this.fieldMap),url:R(this.url),visualVariables:R(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Wr(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};l([d({type:mle})],Yo.prototype,"_loader",null),l([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Yo.prototype,"config",void 0),l([d({type:Object,json:{write:!0}})],Yo.prototype,"fieldMap",void 0),l([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Yo.prototype,"scaleExpression",void 0),l([J("scaleExpression")],Yo.prototype,"writeData",null),l([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Yo.prototype,"scaleExpressionTitle",void 0),l([d({type:String,json:{write:!0}})],Yo.prototype,"url",void 0),l([J("visualVariables")],Yo.prototype,"writeVisualVariables",null),Yo=XP=l([x("esri.renderers.DictionaryRenderer")],Yo);const hje=Yo;var KP;let uu=KP=class extends P{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(q.getLogger(this).error(".field: field must be a string value"),null):mS(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new KP({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([d({type:K,json:{type:[Number],write:!0}})],uu.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],uu.prototype,"field",void 0),l([ke("field")],uu.prototype,"castField",null),l([d({type:String,json:{write:!0}})],uu.prototype,"label",void 0),l([d({type:String,json:{write:!0}})],uu.prototype,"valueExpression",void 0),l([d({type:String,json:{write:!0}})],uu.prototype,"valueExpressionTitle",void 0),uu=KP=l([x("esri.renderers.support.AttributeColorInfo")],uu);const gV=uu;var eD;let V$=eD=class extends P{constructor(){super(...arguments),this.unit=null}clone(){return new eD({unit:this.unit})}};l([d({type:String,json:{write:!0}})],V$.prototype,"unit",void 0),V$=eD=l([x("esri.renderers.support.DotDensityLegendOptions")],V$);const pje=V$;var tD;let xs=tD=class extends $0(dc){constructor(e){super(e),this.attributes=null,this.backgroundColor=new K([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Rn,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new uc({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new tD({attributes:R(this.attributes),backgroundColor:R(this.backgroundColor),dotBlendingEnabled:R(this.dotBlendingEnabled),dotShape:R(this.dotShape),dotSize:R(this.dotSize),dotValue:R(this.dotValue),legendOptions:R(this.legendOptions),outline:R(this.outline),referenceScale:R(this.referenceScale),seed:R(this.seed),visualVariables:R(this.visualVariables),authoringInfo:R(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await Wr(e,t,i.valueExpression),i.field&&e.add(i.field)}};l([d({type:[gV],json:{write:!0}})],xs.prototype,"attributes",void 0),l([d({type:K,json:{write:!0}})],xs.prototype,"backgroundColor",void 0),l([d({type:Boolean,json:{write:!0}})],xs.prototype,"dotBlendingEnabled",void 0),l([d({type:String,json:{write:!1}})],xs.prototype,"dotShape",void 0),l([d({type:Number,json:{write:!0}})],xs.prototype,"dotSize",void 0),l([d({type:pje,json:{write:!0}})],xs.prototype,"legendOptions",void 0),l([d({type:Rn,json:{default:null,write:!0}})],xs.prototype,"outline",void 0),l([d({type:Number,json:{write:!0}})],xs.prototype,"dotValue",void 0),l([d({type:Number,json:{write:!0}})],xs.prototype,"referenceScale",void 0),l([d({type:Number,json:{write:!0}})],xs.prototype,"seed",void 0),l([ee({dotDensity:"dot-density"})],xs.prototype,"type",void 0),xs=tD=l([x("esri.renderers.DotDensityRenderer")],xs);const fje=xs;var iD;let Rb=iD=class extends P{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new iD({color:this.color&&this.color.clone(),ratio:this.ratio})}};l([d({type:K,json:{type:[Le],default:null,write:{isRequired:!0}}})],Rb.prototype,"color",void 0),l([d({type:Number,json:{write:{isRequired:!0}}})],Rb.prototype,"ratio",void 0),Rb=iD=l([x("esri.renderers.support.HeatmapColorStop")],Rb);const k_=Rb;let Ny=class extends _e.ClonableMixin(P){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};l([d({type:String,json:{write:!0}})],Ny.prototype,"minLabel",void 0),l([d({type:String,json:{write:!0}})],Ny.prototype,"maxLabel",void 0),l([d({type:String,json:{write:!0}})],Ny.prototype,"title",void 0),Ny=l([x("esri.renderers.support.HeatmapLegendOptions")],Ny);function mje(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function yje(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function gje(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}function vje(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function yle(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function gle(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function vle(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function wje(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function bje(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function _je(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function Sje(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function Tje(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function xje(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function $je(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function wle(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return Math.sqrt(i*i+r*r+s*s+n*n)}function ble(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return i*i+r*r+s*s+n*n}function _le(e){const t=e[0],i=e[1],r=e[2],s=e[3];return Math.sqrt(t*t+i*i+r*r+s*s)}function Sle(e){const t=e[0],i=e[1],r=e[2],s=e[3];return t*t+i*i+r*r+s*s}function Eje(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Mje(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Aje(e,t){const i=t[0],r=t[1],s=t[2],n=t[3];let o=i*i+r*r+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=i*o,e[1]=r*o,e[2]=s*o,e[3]=n*o),e}function Ije(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Tle(e,t,i,r){const s=t[0],n=t[1],o=t[2],a=t[3];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e[2]=o+r*(i[2]-o),e[3]=a+r*(i[3]-a),e}function Cje(e,t=1){const i=dI;let r,s,n,o,a,u;do r=2*i()-1,s=2*i()-1,a=r*r+s*s;while(a>=1);do n=2*i()-1,o=2*i()-1,u=n*n+o*o;while(u>=1);const c=Math.sqrt((1-a)/u);return e[0]=t*r,e[1]=t*s,e[2]=t*n*c,e[3]=t*o*c,e}function Oje(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3];return e[0]=i[0]*r+i[4]*s+i[8]*n+i[12]*o,e[1]=i[1]*r+i[5]*s+i[9]*n+i[13]*o,e[2]=i[2]*r+i[6]*s+i[10]*n+i[14]*o,e[3]=i[3]*r+i[7]*s+i[11]*n+i[15]*o,e}function Rje(e,t,i){const r=t[0],s=t[1],n=t[2],o=i[0],a=i[1],u=i[2],c=i[3],h=c*r+a*n-u*s,p=c*s+u*r-o*n,m=c*n+o*s-a*r,y=-o*r-a*s-u*n;return e[0]=h*c+y*-o+p*-u-m*-a,e[1]=p*c+y*-a+m*-o-h*-u,e[2]=m*c+y*-u+h*-a-p*-o,e[3]=t[3],e}function Fje(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Nje(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Lje(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=t[0],a=t[1],u=t[2],c=t[3],h=hs();return Math.abs(i-o)<=h*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-u)<=h*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(n-c)<=h*Math.max(1,Math.abs(n),Math.abs(c))}const kje=yle,Pje=gle,Dje=vle,jje=wle,Vje=ble,zje=_le,Uje=Sle;Object.freeze(Object.defineProperty({__proto__:null,add:vje,ceil:wje,copy:mje,copyVec3:yje,dist:jje,distance:wle,div:Dje,divide:vle,dot:Ije,equals:Lje,exactEquals:Nje,floor:bje,inverse:Mje,len:zje,length:_le,lerp:Tle,max:Sje,min:_je,mul:Pje,multiply:gle,negate:Eje,normalize:Aje,random:Cje,round:Tje,scale:xje,scaleAndAdd:$je,set:gje,sqrDist:Vje,sqrLen:Uje,squaredDistance:ble,squaredLength:Sle,str:Fje,sub:kje,subtract:yle,transformMat4:Oje,transformQuat:Rje},Symbol.toStringTag,{value:"Module"}));function JI(){return[0,0,0,0]}function qje(e){return[e[0],e[1],e[2],e[3]]}function fm(e,t,i,r){return[e,t,i,r]}function Gje(e,t,i,r){return[e,t,i,r]}function Bje(e,t=JI()){const i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Hje(e,t){return new Float64Array(e,t,4)}function xle(){return JI()}function $le(){return fm(1,1,1,1)}function Ele(){return fm(1,0,0,0)}function Mle(){return fm(0,1,0,0)}function Ale(){return fm(0,0,1,0)}function Ile(){return fm(0,0,0,1)}const Wje=xle(),Zje=$le(),Jje=Ele(),Yje=Mle(),Qje=Ale(),Xje=Ile();Object.freeze(Object.defineProperty({__proto__:null,ONES:Zje,UNIT_W:Xje,UNIT_X:Jje,UNIT_Y:Yje,UNIT_Z:Qje,ZEROS:Wje,clone:qje,create:JI,createView:Hje,freeze:Gje,fromArray:Bje,fromValues:fm,ones:$le,unitW:Ile,unitX:Ele,unitY:Mle,unitZ:Ale,zeros:xle},Symbol.toStringTag,{value:"Module"}));const vV=2.4;function Kje(e){return Cn(e*vV)}function eVe(e){return Bp(e)/vV}function tVe(e,t,i,r){let{color:s,ratio:n}=t,{color:o,ratio:a}=i;a===n&&(a===1?n-=1e-6:a+=1e-6);const u=Ws((r-n)/(a-n),0,1);Tle(e,s.toArray(),o.toArray(),u)}function ktt(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,u)=>a.ratio-u.ratio).map(({color:a,ratio:u})=>({color:a,ratio:Math.max(u,.001)})),e.length<1)return i;let r=e[0],s=e[0],n=1;const o=JI();for(let a=0;a<512;a++){const u=(a+.5)/512;for(;u>s.ratio&&n<e.length;)r=s,s=e[n++];tVe(o,r,s,u),i.set(o,4*a)}return i}function iVe(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function rVe(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var rD;function KB(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...a}=e;return a}}return e}let er=rD=class extends dc{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new k_({ratio:0,color:new K("rgba(255, 140, 0, 0)")}),new k_({ratio:.75,color:new K("rgba(255, 140, 0, 1)")}),new k_({ratio:.9,color:new K("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return KB(e)}get blurRadius(){return eVe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Kje(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(vV**2*this.blurRadius**4)}read(e,t){e=KB(e),super.read(e,t)}getSymbol(){return new El}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&ps(e,t,i),r&&typeof r=="string"&&await Wr(e,t,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new rD({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:R(this.colorStops),field:this.field,legendOptions:R(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([d({type:Xj,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],er.prototype,"authoringInfo",void 0),l([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],er.prototype,"blurRadius",null),l([d({type:[k_],json:{write:{isRequired:!0}}})],er.prototype,"colorStops",void 0),l([d({type:String,json:{write:!0}})],er.prototype,"field",void 0),l([d({type:Ny,json:{write:!0}})],er.prototype,"legendOptions",void 0),l([d({type:Number,json:{write:!0}})],er.prototype,"maxDensity",void 0),l([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],er.prototype,"maxPixelIntensity",null),l([d({type:Number,json:{write:!0}})],er.prototype,"minDensity",void 0),l([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],er.prototype,"minPixelIntensity",null),l([d({type:Number,cast:Je,json:{write:!0}})],er.prototype,"radius",void 0),l([d({type:Number,range:{min:0},json:{default:0,write:!0}})],er.prototype,"referenceScale",void 0),l([ee({heatmap:"heatmap"})],er.prototype,"type",void 0),l([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],er.prototype,"valueExpression",void 0),l([d({type:String})],er.prototype,"valueExpressionTitle",void 0),l([d({readOnly:!0})],er.prototype,"_pixelIntensityToDensity",null),er=rD=l([x("esri.renderers.HeatmapRenderer")],er);const Cle=er;let Jp=class extends _e.ClonableMixin(P){constructor(){super(...arguments),this.color=new K([0,0,0,0]),this.label=null,this.threshold=0}};l([d({type:K,json:{write:!0}})],Jp.prototype,"color",void 0),l([d({type:String,json:{write:!0}})],Jp.prototype,"label",void 0),l([d({type:Number,range:{min:0,max:1},json:{write:!0}})],Jp.prototype,"threshold",void 0),Jp=l([x("esri.renderers.support.OthersCategory")],Jp);const sVe={base:x0,key:"type",typeMap:{size:GI,opacity:Kj}};let $s=class extends $0(_e.ClonableMixin(dc)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new K([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Jp,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new El({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Br)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((i,r)=>i+r.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((t,i)=>t+JSON.stringify(i),"")}async collectRequiredFields(t,i){await this.collectVVRequiredFields(t,i);for(const r of this.attributes)r.valueExpression&&await Wr(t,i,r.valueExpression),r.field&&t.add(r.field)}};l([d({type:[gV],json:{write:!0}})],$s.prototype,"attributes",void 0),l([d(oV)],$s.prototype,"backgroundFillSymbol",void 0),l([d({type:K,json:{write:!0}})],$s.prototype,"defaultColor",void 0),l([d({type:String,json:{write:!0}})],$s.prototype,"defaultLabel",void 0),l([d({type:Number,range:{min:0,max:1},json:{write:!0}})],$s.prototype,"holePercentage",void 0),l([d({type:Jp,json:{write:!0}})],$s.prototype,"othersCategory",void 0),l([d({type:HI,json:{write:!0}})],$s.prototype,"legendOptions",void 0),l([d({type:Rn,json:{default:null,write:!0}})],$s.prototype,"outline",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],$s.prototype,"size",void 0),l([ee({pieChart:"pie-chart"})],$s.prototype,"type",void 0),l([d({types:[sVe]})],$s.prototype,"visualVariables",void 0),$s=l([x("esri.renderers.PieChartRenderer")],$s);const Ole=$s,GS={key:"type",base:dc,typeMap:{heatmap:Cle,simple:gl,"unique-value":aV,"class-breaks":ole,"dot-density":fje,dictionary:hje,"pie-chart":Ole},errorContext:"renderer"},nVe={key:"type",base:dc,typeMap:{simple:gl,"unique-value":aV,"class-breaks":ole,heatmap:Cle},errorContext:"renderer",validate:oVe};function oVe(e){switch(e.type){case"simple":return aVe(e);case"unique-value":return lVe(e);case"class-breaks":return uVe(e);case"heatmap":return e}}function aVe(e){if(e.symbol)return e;q.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function lVe(e){const t=e.uniqueValueInfos,i=t==null?void 0:t.filter(({symbol:r,label:s},n)=>(r||q.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=i),e}function uVe(e){const t=e.classBreakInfos,i=t==null?void 0:t.filter(({symbol:r,label:s},n)=>(r||q.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=i),e}function cVe(e,t){return C1(e,null,t)}const dVe=s0({types:GS});function C1(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new bo("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):dVe(e,t,i):null}var sD;let Fr=sD=class extends nh{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Je("12px"),this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Lt(i,r,t)}readRenderer(e,t,i){var s;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return r?C1(r,t,i)??void 0:uV(t,i)}clone(){return new sD({fields:R(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:R(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:R(this.popupTemplate),renderer:R(this.renderer),binType:R(this.binType),size:this.size})}};l([ee({binning:"binning"})],Fr.prototype,"type",void 0),l([ee({geohash:"geohash",square:"square"}),d({type:["geohash","square"]})],Fr.prototype,"binType",void 0),l([d({type:Number,json:{write:!0}})],Fr.prototype,"fixedBinLevel",void 0),l([d({type:[E0],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Fr.prototype,"labelingInfo",void 0),l([d(VI)],Fr.prototype,"labelsVisible",void 0),l([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Fr.prototype,"maxScale",void 0),l([d(jI)],Fr.prototype,"popupEnabled",void 0),l([d({type:y0,json:{name:"popupInfo",write:!0}})],Fr.prototype,"popupTemplate",void 0),l([d({cast:e=>e==="auto"?e:as(Je(e))})],Fr.prototype,"size",void 0),l([d({type:[xo],json:{write:!0}})],Fr.prototype,"fields",void 0),l([J("fields")],Fr.prototype,"writeFields",null),l([d({types:GS,json:{write:{target:"drawingInfo.renderer"}}})],Fr.prototype,"renderer",void 0),l([W("renderer",["drawingInfo.renderer"])],Fr.prototype,"readRenderer",null),Fr=sD=l([x("esri.layers.support.FeatureReductionBinning")],Fr);const Rle=Fr;var nD;function eH(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let Mi=nD=class extends P{constructor(e){super(e),this.type="cluster",this.clusterRadius=Je("80px"),this.clusterMinSize=Je("12px"),this.clusterMaxSize=Je("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,i){var s,n;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return(n=r==null?void 0:r.authoringInfo)!=null&&n.isAutoGenerated?null:r?eH(r)?null:C1(r,t,i)??void 0:uV(t,i)}readSymbol(e,t,i){var s,n;const r=(s=t.drawingInfo)==null?void 0:s.renderer;if((n=r==null?void 0:r.authoringInfo)!=null&&n.isAutoGenerated)return null;if(r&&eH(r)){const o=C1(r,t,i);return o==null?void 0:o.symbol}return null}writeSymbol(e,t,i,r){var n,o;const s=(o=(n=this.renderer)==null?void 0:n.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||s){const a=new gl({symbol:e});t.drawingInfo={renderer:a.write({},r)}}}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Lt(i,r,t)}readFields(e,t,i){return e.filter(r=>!r.isAutoGenerated).map(r=>xo.fromJSON(r))}clone(){return new nD({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:R(this.labelingInfo),labelsVisible:this.labelsVisible,fields:R(this.fields),maxScale:this.maxScale,renderer:R(this.renderer),symbol:R(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:R(this.popupTemplate)})}};l([d({type:["cluster"],readOnly:!0,json:{write:!0}})],Mi.prototype,"type",void 0),l([d({cast:e=>e==="auto"?e:as(Je(e)),json:{write:!0}})],Mi.prototype,"clusterRadius",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],Mi.prototype,"clusterMinSize",void 0),l([d({type:Number,cast:Je,json:{write:!0}})],Mi.prototype,"clusterMaxSize",void 0),l([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Mi.prototype,"maxScale",void 0),l([d(jI)],Mi.prototype,"popupEnabled",void 0),l([d({type:y0,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Mi.prototype,"popupTemplate",void 0),l([d({types:GS,json:{write:{target:"drawingInfo.renderer"}}})],Mi.prototype,"renderer",void 0),l([W("renderer",["drawingInfo.renderer"])],Mi.prototype,"readRenderer",null),l([d({types:sAe})],Mi.prototype,"symbol",void 0),l([W("symbol",["drawingInfo.renderer"])],Mi.prototype,"readSymbol",null),l([J("symbol")],Mi.prototype,"writeSymbol",null),l([d({type:[E0],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Mi.prototype,"labelingInfo",void 0),l([d(VI)],Mi.prototype,"labelsVisible",void 0),l([d({type:[xo],json:{write:!0}})],Mi.prototype,"fields",void 0),l([J("fields")],Mi.prototype,"writeFields",null),l([W("fields")],Mi.prototype,"readFields",null),Mi=nD=l([x("esri.layers.support.FeatureReductionCluster")],Mi);const Fle=Mi;var oD;let z$=oD=class extends nh{constructor(e){super(e),this.type="selection"}clone(){return new oD}};l([d({type:["selection"]})],z$.prototype,"type",void 0),z$=oD=l([x("esri.layers.support.FeatureReductionSelection")],z$);const tH=z$,iH={key:"type",base:nh,typeMap:{cluster:Fle,binning:Rle}},hVe={types:{key:"type",base:nh,typeMap:{selection:tH,cluster:Fle,binning:Rle}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:iH},"portal-item":{types:iH},"web-scene":{types:{key:"type",base:nh,typeMap:{selection:tH}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Pt}}}}},Lm={Base64:0,Hex:1,String:2,Raw:3},Ug=8,Nle=(1<<Ug)-1;function zd(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function pVe(e){const t=[];for(let i=0,r=e.length*Ug;i<r;i+=Ug)t[i>>5]|=(e.charCodeAt(i/Ug)&Nle)<<i%32;return t}function fVe(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=Ug)t.push(String.fromCharCode(e[i>>5]>>>i%32&Nle));return t.join("")}function mVe(e){const t="0123456789abcdef",i=[];for(let r=0,s=4*e.length;r<s;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}function yVe(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,n=4*e.length;s<n;s+=3){const o=(e[s>>2]>>s%4*8&255)<<16|(e[s+1>>2]>>(s+1)%4*8&255)<<8|e[s+2>>2]>>(s+2)%4*8&255;for(let a=0;a<4;a++)8*s+6*a>32*e.length?r.push(t):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function gVe(e,t){return e<<t|e>>>32-t}function YI(e,t,i,r,s,n){return zd(gVe(zd(zd(t,e),zd(r,n)),s),i)}function Er(e,t,i,r,s,n,o){return YI(t&i|~t&r,e,t,s,n,o)}function Mr(e,t,i,r,s,n,o){return YI(t&r|i&~r,e,t,s,n,o)}function Ar(e,t,i,r,s,n,o){return YI(t^i^r,e,t,s,n,o)}function Ir(e,t,i,r,s,n,o){return YI(i^(t|~r),e,t,s,n,o)}function vVe(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,s=-1732584194,n=271733878;for(let o=0;o<e.length;o+=16){const a=i,u=r,c=s,h=n;i=Er(i,r,s,n,e[o],7,-680876936),n=Er(n,i,r,s,e[o+1],12,-389564586),s=Er(s,n,i,r,e[o+2],17,606105819),r=Er(r,s,n,i,e[o+3],22,-1044525330),i=Er(i,r,s,n,e[o+4],7,-176418897),n=Er(n,i,r,s,e[o+5],12,1200080426),s=Er(s,n,i,r,e[o+6],17,-1473231341),r=Er(r,s,n,i,e[o+7],22,-45705983),i=Er(i,r,s,n,e[o+8],7,1770035416),n=Er(n,i,r,s,e[o+9],12,-1958414417),s=Er(s,n,i,r,e[o+10],17,-42063),r=Er(r,s,n,i,e[o+11],22,-1990404162),i=Er(i,r,s,n,e[o+12],7,1804603682),n=Er(n,i,r,s,e[o+13],12,-40341101),s=Er(s,n,i,r,e[o+14],17,-1502002290),r=Er(r,s,n,i,e[o+15],22,1236535329),i=Mr(i,r,s,n,e[o+1],5,-165796510),n=Mr(n,i,r,s,e[o+6],9,-1069501632),s=Mr(s,n,i,r,e[o+11],14,643717713),r=Mr(r,s,n,i,e[o],20,-373897302),i=Mr(i,r,s,n,e[o+5],5,-701558691),n=Mr(n,i,r,s,e[o+10],9,38016083),s=Mr(s,n,i,r,e[o+15],14,-660478335),r=Mr(r,s,n,i,e[o+4],20,-405537848),i=Mr(i,r,s,n,e[o+9],5,568446438),n=Mr(n,i,r,s,e[o+14],9,-1019803690),s=Mr(s,n,i,r,e[o+3],14,-187363961),r=Mr(r,s,n,i,e[o+8],20,1163531501),i=Mr(i,r,s,n,e[o+13],5,-1444681467),n=Mr(n,i,r,s,e[o+2],9,-51403784),s=Mr(s,n,i,r,e[o+7],14,1735328473),r=Mr(r,s,n,i,e[o+12],20,-1926607734),i=Ar(i,r,s,n,e[o+5],4,-378558),n=Ar(n,i,r,s,e[o+8],11,-2022574463),s=Ar(s,n,i,r,e[o+11],16,1839030562),r=Ar(r,s,n,i,e[o+14],23,-35309556),i=Ar(i,r,s,n,e[o+1],4,-1530992060),n=Ar(n,i,r,s,e[o+4],11,1272893353),s=Ar(s,n,i,r,e[o+7],16,-155497632),r=Ar(r,s,n,i,e[o+10],23,-1094730640),i=Ar(i,r,s,n,e[o+13],4,681279174),n=Ar(n,i,r,s,e[o],11,-358537222),s=Ar(s,n,i,r,e[o+3],16,-722521979),r=Ar(r,s,n,i,e[o+6],23,76029189),i=Ar(i,r,s,n,e[o+9],4,-640364487),n=Ar(n,i,r,s,e[o+12],11,-421815835),s=Ar(s,n,i,r,e[o+15],16,530742520),r=Ar(r,s,n,i,e[o+2],23,-995338651),i=Ir(i,r,s,n,e[o],6,-198630844),n=Ir(n,i,r,s,e[o+7],10,1126891415),s=Ir(s,n,i,r,e[o+14],15,-1416354905),r=Ir(r,s,n,i,e[o+5],21,-57434055),i=Ir(i,r,s,n,e[o+12],6,1700485571),n=Ir(n,i,r,s,e[o+3],10,-1894986606),s=Ir(s,n,i,r,e[o+10],15,-1051523),r=Ir(r,s,n,i,e[o+1],21,-2054922799),i=Ir(i,r,s,n,e[o+8],6,1873313359),n=Ir(n,i,r,s,e[o+15],10,-30611744),s=Ir(s,n,i,r,e[o+6],15,-1560198380),r=Ir(r,s,n,i,e[o+13],21,1309151649),i=Ir(i,r,s,n,e[o+4],6,-145523070),n=Ir(n,i,r,s,e[o+11],10,-1120210379),s=Ir(s,n,i,r,e[o+2],15,718787259),r=Ir(r,s,n,i,e[o+9],21,-343485551),i=zd(i,a),r=zd(r,u),s=zd(s,c),n=zd(n,h)}return[i,r,s,n]}function wV(e,t=Lm.Hex){const i=t||Lm.Base64,r=vVe(pVe(e),e.length*Ug);switch(i){case Lm.Raw:return r;case Lm.Hex:return mVe(r);case Lm.String:return fVe(r);case Lm.Base64:return yVe(r)}}const wVe=()=>q.getLogger("esri.views.2d.layers.support.clusterUtils");D.add("esri-cluster-arcade-enabled",!0);const bVe=D("esri-cluster-arcade-enabled"),_Ve=new Set(["simple-line","simple-fill","picture-fill"]);function rH(e,t){let i=t.clone();if(!Lle(i))return i;if(t.symbols.some(r=>_Ve.has(r.type))&&(i=new gl({symbol:new El})),i.authoringInfo||(i.authoringInfo=new Xj),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(s=>s.valueExpression!=="$view.scale");r.forEach(s=>{s.type==="rotation"?s.field?s.field=qh(e,s.field,"avg_angle","number"):s.valueExpression&&(s.field=cw(e,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=qh(e,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=qh(e,s.field,"avg","number"):s.valueExpression&&(s.field=cw(e,s.valueExpression,"avg","number"),s.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=qh(e,r.field,"sum","number"):r.valueExpression&&(r.field=cw(e,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=qh(e,i.field,"mode","string"):i.valueExpression&&(i.field=cw(e,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=qh(e,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=qh(e,i.field,"avg","number"):i.valueExpression&&(i.field=cw(e,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const Lle=e=>{const t=i=>wVe().error(new M("Unsupported-renderer",i,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!bVe){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function SVe(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=i,s="field",n=t.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+wV(n)}}}function cw(e,t,i,r){const s=wV(t),n=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return e.some(o=>o.name===n)||e.push(new xo({name:n,isAutoGenerated:!0,onStatisticExpression:new Kf({expression:t,returnType:r}),statisticType:i})),n}function qh(e,t,i,r,s){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const n=SVe(i,t,s);return e.some(o=>o.name===n)||(i==="avg_norm"?e.push(new xo({name:n,isAutoGenerated:!0,onStatisticExpression:new Kf({expression:`$feature.${t} / $feature.${s}`,returnType:r}),statisticType:"avg"})):e.push(new xo({name:n,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),n}const TVe=e=>{let t=class extends e{constructor(...i){super(...i),this.addHandles(G(()=>this.renderer,()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},So))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_withClusterVariable(i,r,s){const n=i.clone();return"visualVariables"in n&&(n.visualVariables||(n.visualVariables=[]),n.visualVariables.some(o=>o.type==="size")||n.visualVariables.push(new GI({field:"cluster_count",stops:[new O$({value:1}),new O$({useMinValue:!0,size:r}),new O$({useMaxValue:!0,size:s})]}))),n}_normalizeFeatureReduction(i){var p;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),s=[new xo({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],n=(r.fields??[]).filter(m=>!m.isAutoGenerated),o=i.renderer&&!((p=i.renderer.authoringInfo)!=null&&p.isAutoGenerated),{clusterMinSize:a,clusterMaxSize:u}=r;if(o){r.fields=[...s,...n];const m=this._withClusterVariable(r.renderer,a,u);return r.effectiveFeatureRenderer=m,r.effectiveClusterRenderer=m,r}if(i.symbol){if(r.fields=[...s,...n],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const m=rH(s,this.renderer),y=this._withClusterVariable(m,a,u),g="visualVariables"in y&&y.visualVariables?y.visualVariables:[],v=new gl({symbol:i.symbol,visualVariables:g});return r.fields=[...s,...n],r.effectiveFeatureRenderer=y,r.effectiveClusterRenderer=v,r}if(!this.renderer)return i;const c=rH(s,this.renderer);r.fields=[...s,...n],r.renderer=c;const h=this._withClusterVariable(c,a,u);return r.effectiveFeatureRenderer=h,r.effectiveClusterRenderer=h,r}};return l([d(hVe)],t.prototype,"featureReduction",null),t=l([x("esri.layers.mixins.FeatureReductionLayer")],t),t},sH={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},nH={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},oH={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},xVe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":sH,"web-map/basemap":nH,"web-map/tables":oH,"link-chart/operational-layers":{...sH,LinkChartLayer:!0},"link-chart/basemap":nH,"link-chart/tables":oH,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},$Ve=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,s){var n;return((n=s==null?void 0:s.portalItem)==null?void 0:n.type)==="Group Layer"?void 0:i}writeListMode(i,r,s,n){(n&&n.layerContainerType==="ground"||i&&Dve(this,s,{},n))&&(r[s]=i)}writeOperationalLayerType(i,r,s){i&&(r[s]=i)}writeTitle(i,r){r.title=i??"Layer"}readVisibilityTimeExtent(i){return i?Ni.fromArray(i):null}writeVisibilityTimeExtent(i,r,s,n){i&&n.layerContainerType!=="tables"&&(i.isEmpty?n!=null&&n.messages&&n.messages.push(new M("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[s]=i.toArray())}read(i,r){r&&(r.layer=this),zX(this,i,s=>super.read(i,s),r)}write(i,r){var o,a;if(!this.persistenceEnabled&&!(r!=null&&r.ignorePersistenceEnabled))return null;if(r!=null&&r.origin){const u=`${r.origin}/${r.layerContainerType||"operational-layers"}`,c=xVe[u];let h=!!(c!=null&&c[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&u==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&u==="web-map/operational-layers"&&(h=!1),!h)return(o=r.messages)==null||o.push(new M("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${u}'`,{layer:this})),null}const s=super.write(i,{...r,layer:this}),n=!!r&&!!r.messages&&!!r.messages.filter(u=>u instanceof M&&u.name==="web-document-write:property-required").length;return zA(s==null?void 0:s.url)?((a=r==null?void 0:r.messages)==null||a.push(new M("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:s}beforeSave(){}};return l([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),l([W("id",["id"])],t.prototype,"readId",null),l([d(Tae)],t.prototype,"listMode",void 0),l([J("listMode")],t.prototype,"writeListMode",null),l([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Pt,isRequired:!0}}}}})],t.prototype,"operationalLayerType",void 0),l([J("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),l([d(mP)],t.prototype,"opacity",void 0),l([d({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),l([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),l([J("title"),J(["web-scene"],"title")],t.prototype,"writeTitle",null),l([d({type:Ni,json:{origins:{"web-scene":{write:{layerContainerTypes:Pt}}}}})],t.prototype,"visibilityTimeExtent",void 0),l([W("visibilityTimeExtent")],t.prototype,"readVisibilityTimeExtent",null),l([J(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Le,r0]]}})],t.prototype,"writeVisibilityTimeExtent",null),l([d({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:Pt}}})],t.prototype,"visible",void 0),t=l([x("esri.layers.mixins.OperationalLayer")],t),t};var aD;const P2=new be({asc:"ascending",desc:"descending"});let Ly=aD=class extends P{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new aD({field:this.field,valueExpression:this.valueExpression,order:this.order})}};l([d({type:String,json:{write:!0}})],Ly.prototype,"field",void 0),l([d({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ly.prototype,"valueExpression",void 0),l([d({type:P2.apiValues,json:{type:P2.jsonValues,read:P2.read,write:P2.write}})],Ly.prototype,"order",void 0),Ly=aD=l([x("esri.layers.support.OrderByInfo")],Ly);const kle=Ly;function EVe(e,t,i){if(!e)return null;const r=e.find(n=>!!n.field);if(!r)return null;const s=new kle;return s.read(r,i),[s]}function MVe(e,t,i,r){const s=e.find(n=>!!n.field);s&&Lt(i,[s.toJSON()],t)}const AVe={type:[kle],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:EVe},write:{writer:MVe}}},IVe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return l([d(AVe)],t.prototype,"orderBy",void 0),t=l([x("esri.layers.mixins.OrderedLayer")],t),t},CVe=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=St(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new yl({id:r.itemId,portal:s==null?void 0:s.portal})}writePortalItem(i,r){i!=null&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){var s;if((s=this.portalItem)!=null&&s.id)try{const{load:n}=await L(()=>import("./layersLoader-UiDGdE-6.js"),__vite__mapDeps([248,139,138,140]));return Fe(r),await n({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},r)}catch(n){throw fi(n)||q.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(rl(r),!0)))}async setUserPrivileges(i,r){if(!nt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:s,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(s){rl(s)}}async _fetchUserPrivileges(i,r){let s=this.portalItem;if(!i||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(r);const n=!(Me!=null&&Me.findCredential(this.url)),o=i===s.id;if(o&&s.portal.user)return this._getUserPrivileges(s,n);let a,u;if(o)a=s.portal.url;else try{a=await Z4(this.url,r)}catch(m){rl(m)}if(!a||!o0e(a,s.portal.url))return this._fetchFallbackUserPrivileges(r);try{const m=r!=null?r.signal:null;u=await(Me==null?void 0:Me.getCredential(`${a}/sharing`,{prompt:!1,signal:m}))}catch(m){rl(m)}const c=!0,h=!1,p=!1;if(!u)return{features:{edit:c,fullEdit:h},content:{updateItem:p}};try{if(o?await s.reload():(s=new yl({id:i,portal:{url:a}}),await s.load(r)),s.portal.user)return this._getUserPrivileges(s,n)}catch(m){rl(m)}return{features:{edit:c,fullEdit:h},content:{updateItem:p}}}_getUserPrivileges(i,r){const s=fke(i);return r&&(s.features.edit=!0),s}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(s){rl(s)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?Me==null?void 0:Me.findCredential(this.url):null;if(!r)return!0;const s=D2.credential===r?D2.user:await this._fetchEditingUser(i);return D2.credential=r,D2.user=s,(s==null?void 0:s.privileges)==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var h,p;const r=(p=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:p.user;if(r)return r;const s=Me==null?void 0:Me.findServerInfo(this.url??"");if(!(s!=null&&s.owningSystemUrl))return null;const n=`${s.owningSystemUrl}/sharing/rest`,o=Hr.getDefault();if(o&&o.loaded&&yo(o.restUrl)===yo(n))return o.user;const a=`${n}/community/self`,u=i!=null?i.signal:null,c=await DA(Be(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return c.ok?W4.fromJSON(c.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){var o;const s=r==null?void 0:r.portal,n=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||Hr.getDefault());return s&&n&&!QX(n.restUrl,s.restUrl)?(r.messages&&r.messages.push(new M("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return l([d({type:yl})],t.prototype,"portalItem",null),l([W("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),l([J("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),l([d({clonable:!1})],t.prototype,"resourceReferences",void 0),l([d({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),l([d({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),l([d({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=l([x("esri.layers.mixins.PortalLayer")],t),t},D2={credential:null,user:null};let Fb=class extends se{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};l([d()],Fb.prototype,"updating",void 0),l([d()],Fb.prototype,"status",void 0),Fb=l([x("esri.layers.support.PublishingInfo")],Fb);const OVe=Fb,RVe=Symbol(),FVe=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const s=new OVe;return this._checkPublishingStatus(s),s}_checkPublishingStatus(r){let o=0;const a=async c=>{let h;r.updating=!0;try{h=await this.fetchPublishingStatus()}catch{h="unavailable"}h!=="published"&&h!=="unavailable"||(r.status==="publishing"&&this.refresh(),u.remove()),r.status=h,r.updating=!1,u.removed||(o=setTimeout(a,c,c+125))},u={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>u.remove()),a(250),this.addHandles(u)}};return t=RVe,l([d({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=l([x("esri.layers.mixins.PublishableLayer")],i),i},Ud=new Q,P_=new WeakMap;function NVe(e){kVe(e)&&Ud.push(new WeakRef(e))}function LVe(e){const t=Ud.find(i=>i.deref()===e);t&&Ud.remove(t)}function kVe(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function Ple(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Ple(t,e%t):0}let RO=0,j2=0;function PVe(){const e=Date.now();let t=!1;for(const i of Ud){const r=i.deref();r?r.refreshInterval&&e-(P_.get(r)??0)+5>=6e4*r.refreshInterval&&(P_.set(r,e),r.refresh(e)):t=!0}if(t)for(let i=Ud.length-1;i>=0;i--)Ud.at(i).deref()||Ud.removeAt(i)}H5(()=>{const e=Date.now();let t=0;for(const i of Ud){const r=i.deref();r&&(t=Ple(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?P_.get(r)||P_.set(r,e):P_.delete(r))}if(t!==j2){if(j2=t,clearInterval(RO),j2===0)return void(RO=0);RO=setInterval(PVe,j2)}},So);const aH=.1,DVe=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=fl(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||NVe(this)},()=>{})}destroy(){LVe(this)}castRefreshInterval(i){return i>=aH?i:i<=0?0:aH}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){_n(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{q.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}get test(){}};return l([d({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Pt}}}}})],t.prototype,"refreshInterval",void 0),l([ke("refreshInterval")],t.prototype,"castRefreshInterval",null),l([d({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),l([d({readOnly:!0})],t.prototype,"refreshParameters",null),t=l([x("esri.layers.mixins.RefreshableLayer")],t),t},jVe=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&VVe(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return l([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),l([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),l([d({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=l([x("esri.layers.mixins.ScaleRangeLayer")],t),t};function VVe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}function lH(e,t){return Xf.fromJSON({value:e,unit:t})}let mr=class extends _e.ClonableMixin(P){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?Ni.fromArray(i.timeExtent):null}writeFullTimeExtent(t,i){(t==null?void 0:t.start)!=null&&t.end!=null?i.timeExtent=t.toArray():i.timeExtent=null}readInterval(t,i){return i.timeInterval&&i.timeIntervalUnits?lH(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?lH(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(t,i){i.timeInterval=(t==null?void 0:t.toJSON().value)??null,i.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};l([d({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],mr.prototype,"cumulative",void 0),l([d({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],mr.prototype,"endField",void 0),l([d({type:Ni,json:{write:{enabled:!0,allowNull:!0}}})],mr.prototype,"fullTimeExtent",void 0),l([W("fullTimeExtent",["timeExtent"])],mr.prototype,"readFullTimeExtent",null),l([J("fullTimeExtent")],mr.prototype,"writeFullTimeExtent",null),l([d({type:Boolean,json:{write:!0}})],mr.prototype,"hasLiveData",void 0),l([d({type:Xf,json:{write:{enabled:!0,allowNull:!0}}})],mr.prototype,"interval",void 0),l([W("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],mr.prototype,"readInterval",null),l([J("interval")],mr.prototype,"writeInterval",null),l([d({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],mr.prototype,"startField",void 0),l([d(vM("timeReference",!0))],mr.prototype,"timeZone",void 0),l([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],mr.prototype,"trackIdField",void 0),l([d({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],mr.prototype,"useTime",void 0),l([d({type:[Date],json:{read:!1}})],mr.prototype,"stops",void 0),mr=l([x("esri.layers.support.TimeInfo")],mr);const Dle=mr,zVe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Pt}}},UVe=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const n=s.timeOffset,o=Gj.fromJSON(s.timeOffsetUnits);return n&&o?new Xf({value:n,unit:o}):null}set timeInfo(i){cre(i,this.fieldsIndex),this._set("timeInfo",i)}};return l([d({type:Ni,json:{write:!1}})],t.prototype,"timeExtent",void 0),l([d({type:Xf})],t.prototype,"timeOffset",void 0),l([W("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),l([d({value:null,type:Dle,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),l([d(zVe)],t.prototype,"useViewTime",void 0),t=l([x("esri.layers.mixins.TemporalLayer")],t),t};let Dp=class extends _e.ClonableMixin(P){constructor(t){super(t),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};l([d({type:[E0],json:{write:!0}})],Dp.prototype,"labelingInfo",void 0),l([d(VI)],Dp.prototype,"labelsVisible",void 0),l([d({types:GS,json:{write:!0}})],Dp.prototype,"renderer",void 0),l([d({type:Boolean,json:{write:!0}})],Dp.prototype,"visible",void 0),Dp=l([x("esri.layers.support.TrackPartInfo")],Dp);const qg=Dp;let Es=class extends _e.ClonableMixin(P){constructor(t){super(t),this.enabled=!0,this.fields=[],this.latestObservations=new qg({renderer:new gl({symbol:ZM.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new qg({renderer:new gl({symbol:ZM.clone()})}),this.trackLines=new qg({renderer:new gl({symbol:sV.clone()})}),this.timeField="startTimeField"}writeFields(t,i,r){const s=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Lt(r,s,i)}};l([d({type:Boolean,json:{write:!0}})],Es.prototype,"enabled",void 0),l([d({type:[xo],json:{write:!0}})],Es.prototype,"fields",void 0),l([J("fields")],Es.prototype,"writeFields",null),l([d({type:qg,json:{write:!0}})],Es.prototype,"latestObservations",void 0),l([d({type:Xf,json:{write:!0}})],Es.prototype,"maxDisplayDuration",void 0),l([d({type:Number,json:{write:!0}})],Es.prototype,"maxDisplayObservationsPerTrack",void 0),l([d(jI)],Es.prototype,"popupEnabled",void 0),l([d({type:y0,json:{name:"popupInfo",write:!0}})],Es.prototype,"popupTemplate",void 0),l([d({type:qg,json:{write:!0}})],Es.prototype,"previousObservations",void 0),l([d({type:qg,json:{write:!0}})],Es.prototype,"trackLines",void 0),l([d({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],Es.prototype,"timeField",void 0),Es=l([x("esri.layers.support.TrackInfo")],Es);const qVe=Es,GVe=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return l([d({type:qVe})],t.prototype,"trackInfo",void 0),t=l([x("esri.layers.mixins.TrackableLayer")],t),t},uH=new be({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let sd=class extends _e.ClonableMixin(P){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};l([d({json:{write:!0}})],sd.prototype,"name",void 0),l([d({json:{write:!0}})],sd.prototype,"description",void 0),l([d({json:{read:uH.read,write:uH.write}})],sd.prototype,"drawingTool",void 0),l([d({json:{write:!0}})],sd.prototype,"prototype",void 0),l([d({json:{write:!0}})],sd.prototype,"thumbnail",void 0),sd=l([x("esri.layers.support.FeatureTemplate")],sd);const bV=sd;let cu=class extends _e.ClonableMixin(P){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const i={};for(const r of Object.keys(t))i[r]=TI(t[r]);return i}writeDomains(t,i){var s;const r={};for(const n of Object.keys(t))t[n]&&(r[n]=(s=t[n])==null?void 0:s.toJSON());i.domains=r}};l([d({json:{write:!0}})],cu.prototype,"id",void 0),l([d({json:{write:!0}})],cu.prototype,"name",void 0),l([d({json:{write:!0}})],cu.prototype,"domains",void 0),l([W("domains")],cu.prototype,"readDomains",null),l([J("domains")],cu.prototype,"writeDomains",null),l([d({type:[bV],json:{write:!0}})],cu.prototype,"templates",void 0),cu=l([x("esri.layers.support.FeatureType")],cu);const jle=cu;function BVe(){return{fields:{type:[DS],value:null,set:function(e){if(e&&D("big-integer-warning-enabled")){const t=e.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(t.length){const i=t.map(r=>`'${r.name}'`).join(", ");q.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return lle.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const i of e)((t=this.fieldsIndex)==null?void 0:t.has(i))||q.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});return pI(this.fieldsIndex,e)}}}}const FO=()=>q.getLogger("esri.layers.support.labelingInfo"),HVe=/\[([^[\]]+)\]/gi;function NO(e,t,i){return e?e.map(r=>{var n;const s=new E0;if(s.read(r,i),s.labelExpression){const o=t.fields||((n=t.layerDefinition)==null?void 0:n.fields)||this.fields;s.labelExpression=s.labelExpression.replaceAll(HVe,(a,u)=>`[${WVe(u,o)}]`)}return s}):null}function WVe(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const s=t[r].name;if(s.toLowerCase()===i)return s}return e}const ZVe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function Btt(e,t){const i=[];for(const r of e){const s=r.labelPlacement,n=ZVe[t];if(!r.symbol)return FO().warn("No ILabelClass symbol specified."),[];if(!n)return FO().error(new M("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(n.includes(s))i.push(r);else{const o=n[0];s&&FO().warn(`Found invalid label placement type ${s} for ${t}. Defaulting to ${o}`);const a=r.clone();a.labelPlacement=o,i.push(a)}}return i}const JVe="relationships/",YVe="expression/";let Kr=class extends se{constructor(t){super(t),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||ec(()=>On()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??L(()=>Promise.resolve().then(()=>Pze),void 0).then(t=>this._featureUtils=t)}get calculatedExpressions(){var i;const t=new Q;if(!this.expressionsUsedInTitle.length)return t;if(!((i=this._arcadeTask)!=null&&i.value)){for(const r of this.expressionsUsedInTitle??[])t.push({name:r.name,invalid:!0});return t}for(const r of this.expressionsUsedInTitle)try{const s=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(s.isAsync){t.push({name:r.name,invalid:!0});break}t.push({name:r.name,syntax:s,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(s,{vars:{$feature:"any"}})})}catch{t.push({name:r.name,invalid:!0});break}return t}get expressionsUsedInTitle(){var i,r,s;let t=((i=this.effectivePopupTemplate)==null?void 0:i.title)??"";return typeof t!="string"?[]:(t=t.toLowerCase(),((s=(r=this.effectivePopupTemplate)==null?void 0:r.expressionInfos)==null?void 0:s.filter(n=>t.includes(`{expression/${n.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(t=>t.invalid===!0)}get requiredFields(){var r,s;const t=new Set;if((r=this._arcadeTask)!=null&&r.value&&!this.hasBadExpressions)for(const n of((s=this.calculatedExpressions)==null?void 0:s.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(n.syntax);for(const a of o){const u=a.split("."),c=this.fieldsIndex.get(u.at(-1)??"");c&&t.add(c.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const n of i){const o=this.fieldsIndex.get(n);o&&t.add(o.name)}return t}get titleFromDisplayField(){var i,r;let t="";return this.displayField&&(t=((i=this.fieldsIndex.get(this.displayField))==null?void 0:i.name)??""),t||(t=((r=this.fieldsIndex.get(this.objectIdField))==null?void 0:r.name)??""),t?`{${t}}`:""}get workingTitle(){const t=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return t===""||t==null||this.hasBadExpressions||typeof t!="string"?this.titleFromDisplayField:t}async getTitle(t,i,r){var s;try{const{attributes:n}=i,o=(r==null?void 0:r.timeZone)??"system",[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,(s=this._arcadeTask)==null?void 0:s.promise]);if(r.fetchMissingFields&&(i=await this._checkAndReQueryGraphic(t,i)),this.workingTitle&&this.fieldInfoMap){const u=this._createFormattedAttributes(t,i,o).global;return a({attributes:n,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:u,layer:t,text:this.workingTitle})}return""}catch{}return""}async _checkAndReQueryGraphic(t,i){const r=i.getObjectId();if(r==null)return i;if(!_re(this.requiredFields,i)){const s=t.createQuery();s.where="1=1",s.outFields=[...this.requiredFields],s.objectIds=[r];const n=await t.queryFeatures(s);if((n==null?void 0:n.features.length)===1)return n.features[0]}return i}_createFieldInfoMap(t){const i=new Map;if(!t)return i;for(const r of t){if(!r.fieldName)continue;const s=this.fieldsIndex.get(r.fieldName),n=(s==null?void 0:s.name)??r.fieldName;r.fieldName=n,i.set(n.toLowerCase(),r)}return i}_createFormattedAttributes(t,i,r="system"){var a,u;const s=((a=this.effectivePopupTemplate)==null?void 0:a.fieldInfos)??[],n={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((u=this._arcadeTask)!=null&&u.value)){const c=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,t,null);for(const h of this.calculatedExpressions)try{n[`expression/${h.name}`]=h.func({vars:{$feature:c}})}catch{}}const o={...i.attributes,...n};return{global:this._featureUtils.formatAttributes({fieldInfos:s,attributes:o,graphic:i,timeZone:r,layer:t,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(t){return tj(t).filter(i=>!(i.indexOf(JVe)===0||i.indexOf(YVe)===0))}};l([d({readOnly:!0})],Kr.prototype,"_arcadeTask",null),l([d()],Kr.prototype,"_featureUtils",void 0),l([d({readOnly:!0})],Kr.prototype,"featureUtilsPromise",null),l([d({readOnly:!0})],Kr.prototype,"calculatedExpressions",null),l([d()],Kr.prototype,"displayField",void 0),l([d()],Kr.prototype,"effectivePopupTemplate",void 0),l([d()],Kr.prototype,"expressionsUsedInTitle",null),l([d()],Kr.prototype,"fieldsIndex",void 0),l([d()],Kr.prototype,"fieldInfoMap",null),l([d()],Kr.prototype,"fields",void 0),l([d()],Kr.prototype,"objectIdField",void 0),l([d()],Kr.prototype,"requiredFields",null),Kr=l([x("esri.layers.support.TitleCreator")],Kr);const QVe=Kr,ky=[];function XVe(e,t){if(l1(e.url??""))return!0;const{wkid:i}=t;for(const r of ky){if((e.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}ky.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),ky.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),ky.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),ky.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),ky.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function KVe(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await DA(r.populateFromStyle());if(Fe(i),s.ok===!1){const n=s.error;t!=null&&t.messages&&t.messages.push(new bo("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function e6e({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:s},n){if(!i)return null;const o=s6e({editFieldsInfo:t,fields:i,objectIdField:r},n);if(!o.length)return null;const a=a6e({titleBase:s,fields:i,displayField:e}),u=o6e();return new y0({title:a,content:u,fieldInfos:o})}function cH(e){var c;const{title:t,graphic:i}=e??{},{attributes:r,sourceLayer:s}=i??{},n=s&&"displayField"in s?s.displayField:null,o=n?r==null?void 0:r[n]:null,a=o!=null?JSON.stringify(o):null,u=(c=i==null?void 0:i.getObjectId())==null?void 0:c.toString();return t||a||u||""}const t6e=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):BEe(e,t);function i6e({fields:e,ignoreFieldTypes:t,sortDisabled:i}){const r=e;return t&&(e=e.filter(s=>!t.includes(s.type))),e===r&&(e=e.slice()),i!==!0&&e.sort(r6e),e}function r6e(e,t){return e.type==="oid"?-1:t.type==="oid"?1:dH(e)?-1:dH(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function s6e(e,t){const i=t==null?void 0:t.visibleFieldNames;return i6e({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||l6e,sortDisabled:t==null?void 0:t.sortDisabled}).map(r=>new IS({fieldName:r.name,isEditable:GEe(r,e),label:r.alias,format:n6e(r),visible:t6e(r,{...e,visibleFieldNames:i})}))}function n6e(e){switch(e.type){case"small-integer":case"integer":case"single":return new Wx({digitSeparator:!0,places:0});case"double":return new Wx({digitSeparator:!0,places:2});case"string":return CN(e.name)?new Wx({digitSeparator:!0,places:0}):void 0;default:return}}function o6e(){return[new Jf,new Nv]}function a6e(e){const t=LEe(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}function dH(e){var i;return(e.name&&e.name.toLowerCase())==="name"?!0:((i=e.alias)==null?void 0:i.toLowerCase())==="name"}const l6e=["geometry","blob","raster","guid","xml"],hr="FeatureLayer";function V2(e,t){return new M("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function hH(e){return e&&e instanceof Q}const LO=BVe();function kO(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let de=class extends R4e(TVe(cDe(FVe(oDe(rDe(WPe(IVe(UVe(GVe(jVe(DVe(_Pe($Ve(CVe(LI(ZPe(bPe(_e.ClonableMixin(X4))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=we.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=fl(async(t,i,r)=>{const{save:s,saveAs:n}=await L(()=>import("./featureLayerUtils-l0lPt551.js"),__vite__mapDeps([249,243,244,250,247,139]));switch(t){case ll.SAVE:return s(this,i);case ll.SAVE_AS:return n(this,r,i)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var r;const t=e!=null?e.signal:null;if((r=this.portalItem)!=null&&r.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(rl).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(t);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new M("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>K5e(this,"load",e));return this.addResolvingPromise(i),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return St(e),new QVe({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,t){return t=t.layerDefinition||t,tle(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}get effectiveEditingEnabled(){return i4e(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r!=null&&r.writeLayerSchema&&Lt(i,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return Gae(t.layerDefinition||t)}readObjectIdField(e,t){return Bae(t.layerDefinition||t)}get parsedUrl(){const e=Li(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Pf(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Pf(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){F9(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){var s;t=t.layerDefinition||t;const r=(s=t.drawingInfo)==null?void 0:s.renderer;if(r){const n=C1(r,t,i)??void 0;return n||q.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),n}return uV(t,i)}set source(e){const t=this._get("source");t!==e&&(hH(t)&&this._resetMemorySource(t),hH(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Q?new vu({layer:this,items:e}):e:null}readSource(e,t){const i=S0.fromJSON(t.featureSet);return new vu({layer:this,items:(i==null?void 0:i.features)??[]})}readTemplates(e,t){const i=t.editFieldsInfo,r=i==null?void 0:i.creatorField,s=i==null?void 0:i.editorField;return e=e==null?void 0:e.map(n=>bV.fromJSON(n)),this._fixTemplates(e,r),this._fixTemplates(e,s),e}readTitle(e,t){var s,n,o;const i=((s=t.layerDefinition)==null?void 0:s.name)??t.name,r=t.title||((n=t.layerDefinition)==null?void 0:n.title);if(i){const a=(o=this.portalItem)==null?void 0:o.title;if(this.sublayerTitleMode==="item-title")return this.url?E0e(this.url,i):i;let u=i;if(!u&&this.url){const c=hh(this.url);c!=null&&(u=c.title)}return u?(this.sublayerTitleMode==="item-title-and-service-name"&&a&&a!==u&&(u=a+" - "+u),f4(u)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){var i;return t.title||((i=t.layerDefinition)==null?void 0:i.name)}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i==null?void 0:i.creatorField,s=i==null?void 0:i.editorField;return e==null?void 0:e.map(n=>(n=jle.fromJSON(n),this._fixTemplates(n.templates,r),this._fixTemplates(n.templates,s),n))}readVisible(e,t){var i;return((i=t.layerDefinition)==null?void 0:i.defaultVisibility)!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){const i=await N5e(this,e,t,hr);return this.lastEditsEventDate=new Date,i}async updateAttachment(e,t,i){const r=await L5e(this,e,t,i,hr);return this.lastEditsEventDate=new Date,r}async applyEdits(e,t){return k5e(this,e,t)}async uploadAssets(e,t){return P5e(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return e6e(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await U5(L(()=>import("./FeatureLayerSource-HruBMUao.js"),__vite__mapDeps([251,34,41,252,253,37,79,36,80,254,255,20,13,256,257,9])),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=W5e(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=oEe(this.definitionExpression,t);return e.where=i||"1=1",e}async deleteAttachments(e,t){const i=await D5e(this,e,t,hr);return this.lastEditsEventDate=new Date,i}async fetchRecomputedExtents(e){return j5e(this,e,hr)}getFeatureTitle(e,t={timeZone:"system",fetchMissingFields:!1}){return this._titleCreator.getTitle(this,e,t)}getFeatureType(e){return Zae(this.types,this.typeIdField,e)}getFieldDomain(e,t){var i;return J5e(this,e,t,((i=this.getField(e))==null?void 0:i.domain)??null)}async queryAttachments(e,t){return V5e(this,e,t,hr)}async queryFeatures(e,t){const i=await this.load(),r=await i.source.queryFeatures(xr.from(e)??i.createQuery(),t);if(r!=null&&r.features)for(const s of r.features)s.layer=s.sourceLayer=i;return r}async queryObjectIds(e,t){return(await z5e(this,e,t,hr)).filter(I9)}async queryFeatureCount(e,t){return U5e(this,e,t,hr)}async queryExtent(e,t){return q5e(this,e,t,hr)}async queryRelatedFeatures(e,t){return G5e(this,e,t,hr)}async queryRelatedFeaturesCount(e,t){return B5e(this,e,t,hr)}async queryTopFeatures(e,t){var o;const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!((o=r==null?void 0:r.query)!=null&&o.supportsTopFeaturesQuery))throw new M(hr,"Layer source does not support queryTopFeatures capability");const s=await L(()=>import("./TopFeaturesQuery-DOu8lMvG.js"),[]),n=await i.queryTopFeatures(s.default.from(e),t);if(n!=null&&n.features)for(const a of n.features)a.layer=a.sourceLayer=this;return n}async queryAttributeBins(e,t){var o;const{source:i,capabilities:r}=await this.load();if(!i.queryAttributeBins||!((o=r==null?void 0:r.operations)!=null&&o.supportsQueryBins))throw new M(hr,"Layer source does not support queryAttributeBins capability");o4e(e,r,hr);const s=await L(()=>Promise.resolve().then(()=>n7e),void 0),n=await i.queryAttributeBins(s.default.from(e),t);if(n.features)for(const a of n.features)a.layer=a.sourceLayer=this;return n}async queryTopObjectIds(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!(r!=null&&r.query.supportsTopFeaturesQuery))throw new M(hr,"Layer source does not support queryTopObjectIds capability");const s=await L(()=>import("./TopFeaturesQuery-DOu8lMvG.js"),[]);return(await i.queryTopObjectIds(s.default.from(e),t)).filter(I9)}async queryTopFeaturesExtent(e,t){var n;const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!((n=r==null?void 0:r.query)!=null&&n.supportsTopFeaturesQuery))throw new M(hr,"Layer source does not support queryTopExtents capability");const s=await L(()=>import("./TopFeaturesQuery-DOu8lMvG.js"),[]);return i.queryTopExtents(s.default.from(e),t)}async queryTopFeatureCount(e,t){var n;const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!((n=r==null?void 0:r.query)!=null&&n.supportsTopFeaturesQuery))throw new M(hr,"Layer source does not support queryFeatureCount capability");const s=await L(()=>import("./TopFeaturesQuery-DOu8lMvG.js"),[]);return i.queryTopCount(s.default.from(e),t)}read(e,t){const i=e.featureCollection;if((i||e.type==="Feature Collection")&&(this.resourceInfo=e),i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:s}=t;if(this.dynamicDataSource)return s==null||s.push(V2(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((i==="web-map"||i==="web-scene")&&r!=="tables")return s==null||s.push(V2(this,`a table source can only be written to tables, not ${r}`)),null;if(this._hasMemorySource())return s==null||s.push(V2(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(i==="web-map"||i==="web-scene")&&r==="tables")return s==null||s.push(V2(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new M(hr,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||XVe(this,e))}async save(e){return this._debouncedSaveOperations(ll.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(ll.SAVE_AS,t,e)}_readEditingEnabled(e,t,i){var s;let r=(s=e.layerDefinition)==null?void 0:s.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){var s,n;if(!e){const o=(n=(s=this.capabilities)==null?void 0:s.operations)!=null&&n.supportsSync?"Query,Sync":"Query";Lt("layerDefinition.capabilities",o,t),i&&!(r!=null&&r.writeLayerSchema)&&(t.capabilities=o)}}_fetchFirstValidLayerId(e){return Be(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return this.findFirstValidLayerId(i)})}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),F9(this.renderer,this.fieldsIndex),cre(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),KVe(this,{origin:"service"})}async hasDataChanged(){return H5e(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,i;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(i=this.fields)!=null&&i.some(r=>r.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{var s;const r=(s=i.prototype)==null?void 0:s.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new M("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new M("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};l([d({clonable:!1,readOnly:!0})],de.prototype,"_titleCreator",null),l([d(xDe)],de.prototype,"attributeTableTemplate",void 0),l([W("service","capabilities")],de.prototype,"readCapabilities",null),l([d({json:{origins:{"web-scene":{write:!1}},write:!0}})],de.prototype,"charts",void 0),l([d({readOnly:!0})],de.prototype,"createQueryVersion",null),l([d({json:{read:{source:"layerDefinition.copyrightText"}}})],de.prototype,"copyright",void 0),l([d({json:{read:{source:"layerDefinition.displayField"}}})],de.prototype,"displayField",void 0),l([d({types:Dd,readOnly:!0})],de.prototype,"defaultSymbol",void 0),l([d({type:aa})],de.prototype,"dynamicDataSource",void 0),l([d({type:Boolean})],de.prototype,"editingEnabled",null),l([W(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],de.prototype,"readEditingEnabled",null),l([W("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],de.prototype,"readEditingEnabledFromWebMap",null),l([J(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],de.prototype,"writeEditingEnabled",null),l([J("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],de.prototype,"writeEditingEnabledToWebMap",null),l([d({readOnly:!0})],de.prototype,"effectiveEditingEnabled",null),l([d({clonable:!1,readOnly:!0})],de.prototype,"featureTitleFields",null),l([d({...LO.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:kO}}}}})],de.prototype,"fields",void 0),l([d(LO.fieldsIndex)],de.prototype,"fieldsIndex",void 0),l([d({type:mPe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],de.prototype,"formTemplate",void 0),l([d({json:{read:{source:"layerDefinition.extent"}}})],de.prototype,"fullExtent",void 0),l([d({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:kO,writer(e,t,i){const r=e?jP.toJSON(e):null;r&&Lt(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:jP.read}}})],de.prototype,"geometryType",void 0),l([d({json:{read:{source:"layerDefinition.hasM"}}})],de.prototype,"hasM",void 0),l([d({json:{read:{source:"layerDefinition.hasZ"}}})],de.prototype,"hasZ",void 0),l([d(_De)],de.prototype,"id",void 0),l([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],de.prototype,"infoFor3D",void 0),l([d({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],de.prototype,"isTable",void 0),l([W("service","isTable",["type","geometryType"]),W("isTable",["layerDefinition.type","layerDefinition.geometryType"])],de.prototype,"readIsTable",null),l([J("web-map","isTable")],de.prototype,"writeIsTable",null),l([d(VI)],de.prototype,"labelsVisible",void 0),l([d({type:[E0],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:NO,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:NO,write:{enabled:!0,layerContainerTypes:Pt}}},name:"layerDefinition.drawingInfo.labelingInfo",read:NO,write:!0}})],de.prototype,"labelingInfo",void 0),l([d((()=>{const e=R(bDe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){Lt(r,uI(t),i)}}},e})())],de.prototype,"opacity",void 0),l([d(vDe)],de.prototype,"legendEnabled",void 0),l([d({type:["show","hide"],json:(()=>{const e=R(Tae.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],de.prototype,"listMode",void 0),l([W("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],de.prototype,"readGlobalIdField",null),l([d({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:kO}}}}})],de.prototype,"objectIdField",void 0),l([W("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],de.prototype,"readObjectIdField",null),l([d({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:Pt}}})],de.prototype,"operationalLayerType",void 0),l([d(LO.outFields)],de.prototype,"outFields",void 0),l([d({readOnly:!0})],de.prototype,"parsedUrl",null),l([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],de.prototype,"path",void 0),l([d(jI)],de.prototype,"popupEnabled",void 0),l([d({type:y0,json:{name:"popupInfo",write:!0}})],de.prototype,"popupTemplate",void 0),l([d({readOnly:!0})],de.prototype,"defaultPopupTemplate",null),l([d({types:GS,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:nVe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Pt,overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],de.prototype,"renderer",null),l([W("service","renderer",["drawingInfo.renderer","defaultSymbol"]),W("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],de.prototype,"readRenderer",null),l([d()],de.prototype,"resourceInfo",void 0),l([d((()=>{const e=R(yDe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],de.prototype,"screenSizePerspectiveEnabled",void 0),l([d({clonable:!1})],de.prototype,"source",null),l([ke("source")],de.prototype,"castSource",null),l([W("portal-item","source",["featureSet"]),W("web-map","source",["featureSet"])],de.prototype,"readSource",null),l([d({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],de.prototype,"spatialReference",void 0),l([d({type:Number})],de.prototype,"subtypeCode",void 0),l([d({type:[bV]})],de.prototype,"templates",void 0),l([W("templates",["editFieldsInfo","creatorField","editorField","templates"])],de.prototype,"readTemplates",null),l([d({type:Dle})],de.prototype,"timeInfo",void 0),l([d()],de.prototype,"title",void 0),l([W("service","title",["name"]),W("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],de.prototype,"readTitle",null),l([W("web-map","title",["layerDefinition.name","title"])],de.prototype,"readTitleFromWebMap",null),l([d({type:String})],de.prototype,"sublayerTitleMode",void 0),l([d({json:{read:!1}})],de.prototype,"type",void 0),l([d({type:String})],de.prototype,"typeIdField",void 0),l([W("service","typeIdField"),W("typeIdField",["layerDefinition.typeIdField"])],de.prototype,"readTypeIdField",null),l([d({type:[jle]})],de.prototype,"types",void 0),l([W("service","types",["types"]),W("types",["layerDefinition.types"])],de.prototype,"readTypes",null),l([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],de.prototype,"visible",void 0),l([W("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],de.prototype,"readVisible",null),de=l([x("esri.layers.FeatureLayer")],de);const Vv=de,Wtt=Object.freeze(Object.defineProperty({__proto__:null,default:Vv},Symbol.toStringTag,{value:"Module"}));let du=class extends P{constructor(t){super(t),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};l([d({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?e.getTime():null}}}})],du.prototype,"moment",void 0),l([d({type:Boolean,json:{write:!0}})],du.prototype,"fullUpdate",void 0),l([d({type:Boolean,json:{write:!0}})],du.prototype,"validateErrorsCreated",void 0),l([d({type:Boolean,json:{write:!0}})],du.prototype,"exceededTransferLimit",void 0),l([d({type:[Object],json:{write:!0}})],du.prototype,"serviceEdits",void 0),l([d({type:[Object],json:{write:!0}})],du.prototype,"discoveredSubnetworks",void 0),du=l([x("esri.rest.networks.support.ValidateNetworkTopologyResult")],du);const u6e=du,c6e=Si()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let nd=class extends u6e{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const i={...t,query:{f:"json"}},{data:r}=await Be(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(t={}){const{interval:i=1e3,statusCallback:r}=t;return new Promise((s,n)=>{this._clearTimer();const o=setInterval(()=>{this._timer||n(mt()),this.checkJobStatus().then(a=>{const{status:u}=a;switch(this.status=u,u){case"job-succeeded":this._clearTimer(),s(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),n(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};l([d()],nd.prototype,"editsResolver",void 0),l([d({type:String,json:{write:!0}})],nd.prototype,"statusUrl",void 0),l([ee(c6e)],nd.prototype,"status",void 0),l([d({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],nd.prototype,"submissionTime",void 0),l([d({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],nd.prototype,"lastUpdatedTime",void 0),nd=l([x("esri.networks.support.TopologyValidationJobInfo")],nd);const d6e=nd;async function pH(e,t){if(e==="Utility Network Layer"){const{default:i}=await L(()=>Promise.resolve().then(()=>M6e),void 0);return new i({layerUrl:t})}return null}async function h6e(e){var o;let t="portalItem"in e?e:{portalItem:e};!t.portalItem||t.portalItem instanceof yl||(t={...t,portalItem:new yl(t.portalItem)});const i=t.portalItem;if(await i.load(),i.type!=="Feature Service")throw new M("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,s=await Be(r,{responseType:"json",query:{f:"json"}}),n="Network Layer";if((o=s.data.type)!=null&&o.includes(n))return pH(s.data.type,r);if(s.data.layers){const a=s.data.layers.find(u=>u.type.includes(n));if(a){const u=`${r}/${a.id}`;return pH(a.type,u)}}return null}let vi=class extends LI(In){static fromPortalItem(t){return h6e(t)}constructor(t){super(t),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:s,result:n}=i,o=r===this.featureServiceUrl,a=N_(r,s,this.gdbVersion);o&&a&&n.then(u=>{I$(r,s)&&(this.historicMoment=u.historicMoment)})},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:s,moment:n}=i,o=r===this.featureServiceUrl,a=N_(r,s,this.gdbVersion);o&&a&&(this.historicMoment=n)},this.when().then(()=>{this.addHandles([mae(this._applyEditsHandler),yae(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(t=>{fi(t)||q.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}get datasetName(){var t;return((t=this.dataElement)==null?void 0:t.name)??null}get owner(){var t;return((t=this.dataElement)==null?void 0:t.userIdentity)??null}get schemaGeneration(){var t;return((t=this.dataElement)==null?void 0:t.schemaGeneration)??null}get parsedUrl(){return Li(this.layerUrl)}get featureServiceUrl(){return hh(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return hh(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(t){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),t)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,t)),this}getLayerIdBySourceId(t){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(t);if(i!=null)return i;const r=this.dataElement.domainNetworks,s=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",t);return s>=0?s:null}getSourceIdByLayerId(t){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(t);if(i!=null)return i;const r=this.dataElement.domainNetworks,s=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",t);return s>=0?s:null}getObjectIdsFromElements(t){const i=[],r=new Map;for(const n of t){const o=this.getLayerIdBySourceId(n.networkSourceId);if(o==null)continue;let a=r.get(o);a===void 0&&(a=[]),a.push(n.objectId),r.set(o,a)}const s=this.featureServiceUrl;return r.forEach((n,o)=>i.push({layerUrl:`${s}/${o}`,objectIds:n})),i}async queryNamedTraceConfigurations(t,i){var a;const[{queryNamedTraceConfigurations:r},{default:s}]=await Promise.all([L(()=>import("./queryNamedTraceConfigurations-dmGRKYmS.js"),[]),L(()=>import("./QueryNamedTraceConfigurationsParameters-B5dmENb6.js"),[])]),n=this.networkServiceUrl,o=s.from(t);return(a=await r(n,o,{...i}))==null?void 0:a.namedTraceConfigurations}async validateTopology(t,i){var h,p,m;if(!t.validateArea)throw new M("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:s}]=await Promise.all([L(()=>import("./validateNetworkTopology-BDWyH-6p.js"),[]),L(()=>import("./ValidateNetworkTopologyParameters-LgUzTMyv.js"),[])]),n=s.from(t);I$(this.featureServiceUrl,this.gdbVersion||null)?(n.sessionID=nP,await t7(this.featureServiceUrl,this.gdbVersion,!0)):n.sessionID=null,n.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl,u=i7(a,null,this.gdbVersion,!0),c=await r(o,n,{...i});if(c!=null&&c.serviceEdits){const y=[];for(const g of c.serviceEdits){const{editedFeatures:v}=g,b=v!=null&&v.spatialReference?new we(v.spatialReference):null;y.push({layerId:g.layerId,editedFeatures:{adds:((h=v==null?void 0:v.adds)==null?void 0:h.map(w=>z2(w,b)))||[],updates:((p=v==null?void 0:v.updates)==null?void 0:p.map(w=>({original:z2(w[0],b),current:z2(w[1],b)})))||[],deletes:((m=v==null?void 0:v.deletes)==null?void 0:m.map(w=>z2(w,b)))||[],spatialReference:b}})}u.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:y,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(t,i){let r=null;if(!t.validateArea)throw new M("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const h=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await Be(h,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:s},{default:n}]=await Promise.all([L(()=>import("./validateNetworkTopology-BDWyH-6p.js"),[]),L(()=>import("./ValidateNetworkTopologyParameters-LgUzTMyv.js"),[])]),o=n.from(t);I$(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=nP,await t7(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion||r;const a=this.networkServiceUrl,u=this.featureServiceUrl?i7(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await s(a,o,{...i});return new d6e({statusUrl:c,editsResolver:u})}getSourceTypeById(t){if(!this.dataElement)return null;for(const i of this.dataElement.domainNetworks)for(const r of[i.edgeSources??[],i.junctionSources??[]])for(const s of r)if(s.sourceId===t)return r===i.edgeSources?"edge":"junction";return null}_traverseNetworkSources(t,i,r,s,n){for(const o of t)for(const a of[o.edgeSources??[],o.junctionSources??[]])for(const u of a)if(u[r]===n)return i.set(n,u[s]),u[s];return-1}async _fetchLayerMetaData(t,i){const r=await Be(t,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(t,i,r){if(this.dataElement)return;const s=await Be(`${t}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then(n=>{var o;return(o=n.data.layerDataElements)==null?void 0:o[0]});s&&this.read(s,{origin:"service"})}};function z2(e,t){return new _i({attributes:e.attributes,geometry:wa({...e.geometry,spatialReference:t})})}l([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],vi.prototype,"id",void 0),l([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],vi.prototype,"title",void 0),l([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],vi.prototype,"layerUrl",void 0),l([d({type:Object,json:{origins:{service:{read:!0}},read:!1}})],vi.prototype,"dataElement",void 0),l([d({type:gt,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],vi.prototype,"fullExtent",void 0),l([d({type:we,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],vi.prototype,"spatialReference",void 0),l([d({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],vi.prototype,"type",void 0),l([d({readOnly:!0})],vi.prototype,"datasetName",null),l([d({readOnly:!0})],vi.prototype,"owner",null),l([d({readOnly:!0})],vi.prototype,"schemaGeneration",null),l([d({readOnly:!0})],vi.prototype,"parsedUrl",null),l([d({readOnly:!0})],vi.prototype,"featureServiceUrl",null),l([d({readOnly:!0})],vi.prototype,"networkServiceUrl",null),l([d({readOnly:!0})],vi.prototype,"layerId",null),l([d()],vi.prototype,"sourceJSON",void 0),l([d({readOnly:!0})],vi.prototype,"networkSystemLayers",null),l([d()],vi.prototype,"gdbVersion",void 0),l([d({type:Date})],vi.prototype,"historicMoment",void 0),vi=l([x("esri.networks.Network")],vi);const p6e=vi;var Fs;(function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTContainment=2]="RTContainment",e[e.RTAttachment=3]="RTAttachment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(Fs||(Fs={}));const U2=new be({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),Qtt=new be({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),f6e={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},Xtt=new be({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let od=class extends P.JSONSupportMixin(In){constructor(t){super(t),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=Be}initialize(){}async load(t){const i=this.rulesLayer.load(t).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(t,i,r){return this._getWhereClauseForCompatibleFeatures(t,i,r)}getFeaturesCanAssociateWith(t,i,r){return this._getFeatureSourceLayerId(t)==null?[]:i.filter(s=>this.canAssociateFeatures(t,s,r))}canAssociateFeatures(t,i,r){const[s,n]=this._getFeatureAssetCodes(t),o=this._getFeatureSourceLayerId(t),[a,u]=this._getFeatureAssetCodes(i),c=this._getFeatureSourceLayerId(i);return o!=null&&c!=null&&r.some(h=>{const{type:p,direction:m}=h;return this._getRulesForAssociationType(p).some(y=>{const g=this._getRuleFieldValuesForAssociation(y,p,m);return g==null?void 0:g.some(v=>o===(v==null?void 0:v.ruleLayerIdForSource)&&s===(v==null?void 0:v.ruleAssetGroupCodeForSource)&&n===(v==null?void 0:v.ruleAssetTypeCodeForSource)&&c===(v==null?void 0:v.ruleLayerIdForTarget)&&a===(v==null?void 0:v.ruleAssetGroupCodeForTarget)&&u===(v==null?void 0:v.ruleAssetTypeCodeForTarget))})})}getLayersCanAssociateWith(t,i,r){return this._getFeatureSourceLayerId(t)==null?[]:i.filter(s=>this.canAssociateFeatureToLayer(t,s,r))}canAssociateFeatureToLayer(t,i,r){const s=Ds(i)?i.parent:i;if(!s)return!1;const n=s.layerId,o=Ds(i)?i.subtypeCode:null,[a,u]=this._getFeatureAssetCodes(t),c=this._getFeatureSourceLayerId(t);return c!=null&&r.some(h=>{const{type:p,direction:m}=h;return this._getRulesForAssociationType(p).some(y=>{const g=this._getRuleFieldValuesForAssociation(y,p,m);return g==null?void 0:g.some(v=>c===(v==null?void 0:v.ruleLayerIdForSource)&&a===(v==null?void 0:v.ruleAssetGroupCodeForSource)&&u===(v==null?void 0:v.ruleAssetTypeCodeForSource)&&n===(v==null?void 0:v.ruleLayerIdForTarget)&&(o==null||o===(v==null?void 0:v.ruleAssetGroupCodeForTarget)))})})}getFeatureSQL(t,i){var c,h;const r=t.layerId.toString(),s=(c=t.fieldsIndex)==null?void 0:c.normalizeFieldName("assetGroup"),n=(h=t.fieldsIndex)==null?void 0:h.normalizeFieldName("assetType"),o=s?i.attributes[s]:null,a=n?i.attributes[n]:null,u=this.rulesHash[r];if(u){const p=u.assetGroupHash[o];if(p)return p.assetTypeHash[a]||null}return null}async _initializeRulesTable(){var s,n,o,a,u,c,h,p,m,y,g;const t={};let i;(function(v){v[v.from=0]="from",v[v.to=1]="to",v[v.via=2]="via"})(i||(i={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const v of this.rules){if(v.ruleType===Fs.RTAttachment){this.rulesCategorized.attachment.push(v);continue}if(v.ruleType===Fs.RTContainment){this.rulesCategorized.containment.push(v);continue}if(v.ruleType===Fs.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(v);continue}this.rulesCategorized.connectivity.push(v);let b=[[i.from,i.to],[i.to,i.from]];v.ruleType===Fs.RTEdgeJunctionEdgeConnectivity&&(b=[[i.from,i.via],[i.via,i.from],[i.to,i.via],[i.via,i.to]]);for(const w of b){const _=w.shift(),S=w.shift();let T=!1;switch(v.ruleType){case Fs.RTEdgeJunctionEdgeConnectivity:T=_===i.from||_===i.to;break;case Fs.RTJunctionEdgeConnectivity:T=_===i.to}const E=r[_],A=((s=v[E.networkSourceId])==null?void 0:s.layerId.toString())??"",C=(o=(n=v[E.assetGroupId])==null?void 0:n.assetGroupCode)==null?void 0:o.toString(),O=v[E.assetTypeId],U=(a=O==null?void 0:O.assetTypeCode)==null?void 0:a.toString(),V=r[S],H=((u=v[V.networkSourceId])==null?void 0:u.layerId.toString())??"",te=(h=(c=v[V.assetGroupId])==null?void 0:c.assetGroupCode)==null?void 0:h.toString(),ye=v[V.assetTypeId],ce=(p=ye==null?void 0:ye.assetTypeCode)==null?void 0:p.toString(),Qe=t[A]??{assetGroupHash:{}};if(!(C&&U&&te&&ce))continue;const ie=Qe.assetGroupHash[C]??{assetTypeHash:{}},ae=ie.assetTypeHash[U]??{};if(ae[H]=ae[H]??{},T){ae[A]=ae[A]??{};const De=`(assetgroup = ${C} AND assettype = ${U})`;(ye==null?void 0:ye.connectivityPolicy)==="esriNECPEndVertex"?ae[A].endVertex=(m=ae[A])!=null&&m.endVertex?`${ae[A].endVertex}`:`${De}`:ae[A].anyVertex=ae[A].anyVertex?`${ae[A].anyVertex}`:`${De}`}const ne=`(assetgroup = ${te} AND assettype = ${ce})`;(ye==null?void 0:ye.connectivityPolicy)==="esriNECPEndVertex"?ae[H].endVertex=(y=ae[H])!=null&&y.endVertex?`${ae[H].endVertex} OR ${ne}`:`${ne}`:ae[H].anyVertex=(g=ae[H])!=null&&g.anyVertex?`${ae[H].anyVertex} OR ${ne}`:`${ne}`,ie.assetTypeHash[U]=ae,Qe.assetGroupHash[C]=ie,t[A]=Qe}}this._set("rulesHash",t)}_getRuleFieldValuesForAssociation(t,i,r="from"){var s,n,o,a,u,c,h,p,m,y,g,v,b,w,_,S,T,E,A,C,O,U,V,H,te,ye,ce,Qe,ie,ae,ne,De,Ht,Ml,Al,Il,Fn,Cl,eT,tT,iT,rT,sT,nT,oT,aT,lT,uT,cT,dT,hT,pT,fT,I0,C0,Ao,mT,yT,gT,vT;switch(i){case"attachment":case"containment":return r==="from"?[{ruleLayerIdForSource:(s=t.fromNetworkSource)==null?void 0:s.layerId,ruleAssetGroupCodeForSource:(n=t.fromAssetGroup)==null?void 0:n.assetGroupCode,ruleAssetTypeCodeForSource:(o=t.fromAssetType)==null?void 0:o.assetTypeCode,ruleLayerIdForTarget:(a=t.toNetworkSource)==null?void 0:a.layerId,ruleAssetGroupCodeForTarget:(u=t.toAssetGroup)==null?void 0:u.assetGroupCode,ruleAssetTypeCodeForTarget:(c=t.toAssetType)==null?void 0:c.assetTypeCode}]:[{ruleLayerIdForSource:(h=t.toNetworkSource)==null?void 0:h.layerId,ruleAssetGroupCodeForSource:(p=t.toAssetGroup)==null?void 0:p.assetGroupCode,ruleAssetTypeCodeForSource:(m=t.toAssetType)==null?void 0:m.assetTypeCode,ruleLayerIdForTarget:(y=t.fromNetworkSource)==null?void 0:y.layerId,ruleAssetGroupCodeForTarget:(g=t.fromAssetGroup)==null?void 0:g.assetGroupCode,ruleAssetTypeCodeForTarget:(v=t.fromAssetType)==null?void 0:v.assetTypeCode}];case"connectivity":case"junction-junction-connectivity":return[{ruleLayerIdForSource:(b=t.fromNetworkSource)==null?void 0:b.layerId,ruleAssetGroupCodeForSource:(w=t.fromAssetGroup)==null?void 0:w.assetGroupCode,ruleAssetTypeCodeForSource:(_=t.fromAssetType)==null?void 0:_.assetTypeCode,ruleLayerIdForTarget:(S=t.toNetworkSource)==null?void 0:S.layerId,ruleAssetGroupCodeForTarget:(T=t.toAssetGroup)==null?void 0:T.assetGroupCode,ruleAssetTypeCodeForTarget:(E=t.toAssetType)==null?void 0:E.assetTypeCode},{ruleLayerIdForSource:(A=t.toNetworkSource)==null?void 0:A.layerId,ruleAssetGroupCodeForSource:(C=t.toAssetGroup)==null?void 0:C.assetGroupCode,ruleAssetTypeCodeForSource:(O=t.toAssetType)==null?void 0:O.assetTypeCode,ruleLayerIdForTarget:(U=t.fromNetworkSource)==null?void 0:U.layerId,ruleAssetGroupCodeForTarget:(V=t.fromAssetGroup)==null?void 0:V.assetGroupCode,ruleAssetTypeCodeForTarget:(H=t.fromAssetType)==null?void 0:H.assetTypeCode}];case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return t.ruleType===Fs.RTEdgeJunctionEdgeConnectivity?[{ruleLayerIdForSource:(te=t.fromNetworkSource)==null?void 0:te.layerId,ruleAssetGroupCodeForSource:(ye=t.fromAssetGroup)==null?void 0:ye.assetGroupCode,ruleAssetTypeCodeForSource:(ce=t.fromAssetType)==null?void 0:ce.assetTypeCode,ruleLayerIdForTarget:(Qe=t.viaNetworkSource)==null?void 0:Qe.layerId,ruleAssetGroupCodeForTarget:(ie=t.viaAssetGroup)==null?void 0:ie.assetGroupCode,ruleAssetTypeCodeForTarget:(ae=t.viaAssetType)==null?void 0:ae.assetTypeCode},{ruleLayerIdForSource:(ne=t.viaNetworkSource)==null?void 0:ne.layerId,ruleAssetGroupCodeForSource:(De=t.viaAssetGroup)==null?void 0:De.assetGroupCode,ruleAssetTypeCodeForSource:(Ht=t.viaAssetType)==null?void 0:Ht.assetTypeCode,ruleLayerIdForTarget:(Ml=t.fromNetworkSource)==null?void 0:Ml.layerId,ruleAssetGroupCodeForTarget:(Al=t.fromAssetGroup)==null?void 0:Al.assetGroupCode,ruleAssetTypeCodeForTarget:(Il=t.fromAssetType)==null?void 0:Il.assetTypeCode},{ruleLayerIdForSource:(Fn=t.toNetworkSource)==null?void 0:Fn.layerId,ruleAssetGroupCodeForSource:(Cl=t.toAssetGroup)==null?void 0:Cl.assetGroupCode,ruleAssetTypeCodeForSource:(eT=t.toAssetType)==null?void 0:eT.assetTypeCode,ruleLayerIdForTarget:(tT=t.viaNetworkSource)==null?void 0:tT.layerId,ruleAssetGroupCodeForTarget:(iT=t.viaAssetGroup)==null?void 0:iT.assetGroupCode,ruleAssetTypeCodeForTarget:(rT=t.viaAssetType)==null?void 0:rT.assetTypeCode},{ruleLayerIdForSource:(sT=t.viaNetworkSource)==null?void 0:sT.layerId,ruleAssetGroupCodeForSource:(nT=t.viaAssetGroup)==null?void 0:nT.assetGroupCode,ruleAssetTypeCodeForSource:(oT=t.viaAssetType)==null?void 0:oT.assetTypeCode,ruleLayerIdForTarget:(aT=t.toNetworkSource)==null?void 0:aT.layerId,ruleAssetGroupCodeForTarget:(lT=t.toAssetGroup)==null?void 0:lT.assetGroupCode,ruleAssetTypeCodeForTarget:(uT=t.toAssetType)==null?void 0:uT.assetTypeCode}]:[{ruleLayerIdForSource:(cT=t.fromNetworkSource)==null?void 0:cT.layerId,ruleAssetGroupCodeForSource:(dT=t.fromAssetGroup)==null?void 0:dT.assetGroupCode,ruleAssetTypeCodeForSource:(hT=t.fromAssetType)==null?void 0:hT.assetTypeCode,ruleLayerIdForTarget:(pT=t.toNetworkSource)==null?void 0:pT.layerId,ruleAssetGroupCodeForTarget:(fT=t.toAssetGroup)==null?void 0:fT.assetGroupCode,ruleAssetTypeCodeForTarget:(I0=t.toAssetType)==null?void 0:I0.assetTypeCode},{ruleLayerIdForSource:(C0=t.toNetworkSource)==null?void 0:C0.layerId,ruleAssetGroupCodeForSource:(Ao=t.toAssetGroup)==null?void 0:Ao.assetGroupCode,ruleAssetTypeCodeForSource:(mT=t.toAssetType)==null?void 0:mT.assetTypeCode,ruleLayerIdForTarget:(yT=t.fromNetworkSource)==null?void 0:yT.layerId,ruleAssetGroupCodeForTarget:(gT=t.fromAssetGroup)==null?void 0:gT.assetGroupCode,ruleAssetTypeCodeForTarget:(vT=t.fromAssetType)==null?void 0:vT.assetTypeCode}];default:return[]}}_getWhereClauseForCompatibleFeatures(t,i,r){const s=new Map,[n,o]=this._getAssetFieldNames(t.sourceLayer),[a,u]=this._getFeatureAssetCodes(t),c=this._getFeatureSourceLayerId(t),h=Ds(i)?i.parent:i,p=Ds(i)?i.subtypeCode:null;r.forEach(y=>{const{type:g,direction:v}=y;this._getRulesForAssociationType(g).forEach(b=>{this._getRuleFieldValuesForAssociation(b,g,v).forEach(w=>{if(w.ruleAssetGroupCodeForTarget!=null&&w.ruleAssetTypeCodeForTarget!=null&&c===(w==null?void 0:w.ruleLayerIdForSource)&&a===(w==null?void 0:w.ruleAssetGroupCodeForSource)&&u===(w==null?void 0:w.ruleAssetTypeCodeForSource)&&h.layerId===(w==null?void 0:w.ruleLayerIdForTarget)&&(p==null||p===(w==null?void 0:w.ruleAssetGroupCodeForTarget))){const _=s.get(w.ruleAssetGroupCodeForTarget)??new Set;_.add(w.ruleAssetTypeCodeForTarget),s.set(w.ruleAssetGroupCodeForTarget,_)}})})});let m=[];return this._mergeAssetCodes(s).forEach((y,g)=>m.push(`${n} IN (${g}) AND ${o} IN (${Array.from(y).sort().join(", ")})`)),m.length>1&&(m=m.map(y=>`(${y})`)),m.join(" OR ")}_getRulesForAssociationType(t){const{rulesCategorized:i}=this;switch(t){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter(r=>r.ruleType===Fs.RTJunctionJunctionConnectivity);case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter(r=>r.ruleType===Fs.RTJunctionEdgeConnectivity||r.ruleType===Fs.RTEdgeJunctionEdgeConnectivity);default:return[]}}_getFeatureSourceLayerId(t){var s;const{sourceLayer:i}=t;let r;return uxe(i)?r=i.layerId:Ds(i)&&(r=(s=i.parent)==null?void 0:s.layerId),r??null}_getAssetFieldNames(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}_getFeatureAssetCodes(t){const[i,r]=this._getAssetFieldNames(t.sourceLayer);return[i?t.attributes[i]:null,r?t.attributes[r]:null]}_areSetsEqual(t,i){if(t.size!==i.size)return!1;for(const r of t)if(!i.has(r))return!1;return!0}_mergeAssetCodes(t){const i=new Map,r=new Set;for(const[s,n]of t){const o=new Set([s]);for(const[u,c]of t)s!==u&&!r.has(u)&&this._areSetsEqual(n,c)&&(o.add(u),r.add(u));const a=Array.from(o).sort().join(", ");i.set(a,n)}return i}};l([d({constructOnly:!0})],od.prototype,"rulesLayer",void 0),l([d({constructOnly:!0})],od.prototype,"rules",void 0),l([d({readOnly:!0})],od.prototype,"rulesHash",void 0),l([d()],od.prototype,"rulesCategorized",void 0),l([d({constructOnly:!0})],od.prototype,"request",void 0),od=l([x("esri.networks.RulesTable")],od);const m6e=od;let Gn=class extends P{constructor(t){super(t),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};l([d({type:[Object],json:{write:!0}})],Gn.prototype,"conditionBarriers",void 0),l([d({type:[Object],json:{write:!0}})],Gn.prototype,"outputConditions",void 0),l([d({type:[Object],json:{write:!0}})],Gn.prototype,"functions",void 0),l([d({type:[Object],json:{write:!0}})],Gn.prototype,"functionBarriers",void 0),l([d({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Gn.prototype,"traversabilityScope",void 0),l([d({type:String,json:{write:!0}})],Gn.prototype,"shortestPathNetworkAttributeName",void 0),l([d({type:Boolean,json:{write:!0}})],Gn.prototype,"includeBarriers",void 0),l([d({type:Boolean,json:{write:!0}})],Gn.prototype,"validateConsistency",void 0),l([d({type:Boolean,json:{write:!0}})],Gn.prototype,"ignoreBarriersAtStartingPoints",void 0),Gn=l([x("esri.networks.support.TraceConfiguration")],Gn);const _V=Gn;let zt=class extends _V{constructor(t){super(t),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};l([d({type:[Object],json:{write:!0}})],zt.prototype,"filterBarriers",void 0),l([d({type:String,json:{write:!0}})],zt.prototype,"arcadeExpressionBarrier",void 0),l([d({type:String,json:{write:!0}})],zt.prototype,"domainNetworkName",void 0),l([d({type:String,json:{write:!0}})],zt.prototype,"filterBitsetNetworkAttributeName",void 0),l([d({type:[Object],json:{write:!0}})],zt.prototype,"filterFunctionBarriers",void 0),l([d({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],zt.prototype,"filterScope",void 0),l([d({type:Boolean,json:{write:!0}})],zt.prototype,"includeContainers",void 0),l([d({type:Boolean,json:{write:!0}})],zt.prototype,"includeContent",void 0),l([d({type:Boolean,json:{write:!0}})],zt.prototype,"includeIsolated",void 0),l([d({type:Boolean,json:{write:!0}})],zt.prototype,"includeStructures",void 0),l([d({type:Boolean,json:{write:!0}})],zt.prototype,"allowIndeterminateFlow",void 0),l([d({type:Boolean,json:{write:!0}})],zt.prototype,"includeUpToFirstSpatialContainer",void 0),l([d({type:Object,json:{write:!0}})],zt.prototype,"nearestNeighbor",void 0),l([d({type:[Object],json:{write:!0}})],zt.prototype,"outputFilterCategories",void 0),l([d({type:[Object],json:{write:!0}})],zt.prototype,"outputFilters",void 0),l([d({type:[Object],json:{write:!0}})],zt.prototype,"propagators",void 0),l([d({type:String,json:{write:!0}})],zt.prototype,"subnetworkName",void 0),l([d({type:String,json:{write:!0}})],zt.prototype,"targetTierName",void 0),l([d({type:String,json:{write:!0}})],zt.prototype,"diagramTemplateName",void 0),l([d({type:String,json:{write:!0}})],zt.prototype,"tierName",void 0),l([d({type:Boolean,json:{write:!0}})],zt.prototype,"validateLocatability",void 0),zt=l([x("esri.networks.support.UNTraceConfiguration")],zt);const y6e=zt;let Ms=class extends xk{constructor(t){super(t),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(t,i){return t.tierName!==void 0?y6e.fromJSON(t):_V.fromJSON(t)}};l([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],Ms.prototype,"globalId",void 0),l([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],Ms.prototype,"title",void 0),l([d({type:_V,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ms.prototype,"traceConfiguration",void 0),l([W("service","traceConfiguration")],Ms.prototype,"readTraceConfiguration",null),l([d({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ms.prototype,"creationDate",void 0),l([d({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ms.prototype,"creator",void 0),l([d({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ms.prototype,"description",void 0),l([d({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],Ms.prototype,"minStartingPoints",void 0),l([d({json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ms.prototype,"resultTypes",void 0),l([d({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],Ms.prototype,"tags",void 0),l([d({type:U2.apiValues,json:{type:U2.jsonValues,origins:{service:{read:U2.read,write:U2.write}},read:!1}})],Ms.prototype,"traceType",void 0),Ms=l([x("esri.networks.support.NamedTraceConfiguration")],Ms);const g6e=Ms;function v6e(e){var y,g,v,b,w,_,S,T,E,A,C;const t=e==null?void 0:e.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",s="fromterminalid",n="tonetworksourceid",o="toglobalid",a="toterminalid",u="status",c="associationtype",h="iscontentvisible",p="percentalong",m="globalid";return{fromNetworkSourceId:((y=t==null?void 0:t.get(i))==null?void 0:y.name)??i,fromGlobalId:((g=t==null?void 0:t.get(r))==null?void 0:g.name)??r,fromTerminalId:((v=t==null?void 0:t.get(s))==null?void 0:v.name)??s,toNetworkSourceId:((b=t==null?void 0:t.get(n))==null?void 0:b.name)??n,toGlobalId:((w=t==null?void 0:t.get(o))==null?void 0:w.name)??o,toTerminalId:((_=t==null?void 0:t.get(a))==null?void 0:_.name)??a,status:((S=t==null?void 0:t.get(u))==null?void 0:S.name)??u,associationType:((T=t==null?void 0:t.get(c))==null?void 0:T.name)??c,isContentVisible:((E=t==null?void 0:t.get(h))==null?void 0:E.name)??h,percentAlong:((A=t==null?void 0:t.get(p))==null?void 0:A.name)??p,globalId:((C=t==null?void 0:t.get((e==null?void 0:e.globalIdField)??m))==null?void 0:C.name)??m}}function rit(e,t){if(t.type!=="feature"&&t.type!=="subtype-group")return[];if(!t.url)return[];const i="utilityNetworks"in e.map?e.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(t)){const s=t.fieldsIndex.get("assetgroup"),n=t.fieldsIndex.get("assettype");return[s==null?void 0:s.name,n==null?void 0:n.name].filter(o=>o!=null)}return[]}let Bn=class extends se{constructor(t){super(t),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){var t;(t=this.associationsTable)==null||t.destroy()}async loadAssociationsTable(){if(!this.associationsTable){const{associationsTableUrl:t}=this;if(!t)throw new M("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new Vv({url:t})}return await this.associationsTable.load(),this.associationsTable}};l([d({constructOnly:!0})],Bn.prototype,"rulesTableId",void 0),l([d({constructOnly:!0})],Bn.prototype,"rulesTableUrl",void 0),l([d({constructOnly:!0})],Bn.prototype,"subnetworksTableId",void 0),l([d({constructOnly:!0})],Bn.prototype,"subnetworksTableUrl",void 0),l([d({constructOnly:!0})],Bn.prototype,"dirtyAreasLayerId",void 0),l([d({constructOnly:!0})],Bn.prototype,"dirtyAreasLayerUrl",void 0),l([d()],Bn.prototype,"associationsTable",void 0),l([d({constructOnly:!0})],Bn.prototype,"associationsTableId",void 0),l([d({constructOnly:!0})],Bn.prototype,"associationsTableUrl",void 0),Bn=l([x("esri.networks.support.NetworkSystemLayers")],Bn);const w6e=Bn;let Py=class extends P{constructor(t){super(t),this.id=null,this.name=null}};l([d({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],Py.prototype,"id",void 0),l([d({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],Py.prototype,"name",void 0),l([d({type:Boolean,json:{write:!0}})],Py.prototype,"isUpstreamTerminal",void 0),Py=l([x("esri.networks.support.Terminal")],Py);const b6e=Py,q2=new be({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let ad=class extends P{constructor(t){super(t),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};l([d({type:String,json:{write:!0}})],ad.prototype,"defaultConfiguration",void 0),l([d({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],ad.prototype,"id",void 0),l([d({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],ad.prototype,"name",void 0),l([d({type:[b6e],json:{write:!0}})],ad.prototype,"terminals",void 0),l([d({type:q2.apiValues,json:{type:q2.jsonValues,read:q2.read,write:q2.write}})],ad.prototype,"traversabilityModel",void 0),ad=l([x("esri.networks.support.TerminalConfiguration")],ad);const fH=ad;let Dy=class extends P{constructor(t){super(t),this.line=null,this.multipoint=null,this.polygon=null}};l([d({type:uo,json:{write:!0},readOnly:!0})],Dy.prototype,"line",void 0),l([d({type:bS,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],Dy.prototype,"multipoint",void 0),l([d({type:To,json:{write:!0},readOnly:!0})],Dy.prototype,"polygon",void 0),Dy=l([x("esri.rest.networks.support.AggregatedGeometry")],Dy);const _6e=Dy;let jy=class extends P{constructor(t){super(t),this.functionType=null,this.networkAttributeName=null,this.result=null}};l([d({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],jy.prototype,"functionType",void 0),l([d({type:String,json:{write:!0},readOnly:!0})],jy.prototype,"networkAttributeName",void 0),l([d({type:Number,json:{write:!0},readOnly:!0})],jy.prototype,"result",void 0),jy=l([x("esri.rest.networks.support.FunctionResult")],jy);const S6e=jy;let Qo=class extends P{constructor(t){super(t),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};l([d({type:Number,json:{write:!0}})],Qo.prototype,"assetGroupCode",void 0),l([d({type:Number,json:{write:!0}})],Qo.prototype,"assetTypeCode",void 0),l([d({type:String,json:{write:!0}})],Qo.prototype,"globalId",void 0),l([d({type:Number,json:{write:!0}})],Qo.prototype,"networkSourceId",void 0),l([d({type:Number,json:{write:!0}})],Qo.prototype,"objectId",void 0),l([d({type:Number,json:{write:!0}})],Qo.prototype,"positionFrom",void 0),l([d({type:Number,json:{write:!0}})],Qo.prototype,"positionTo",void 0),l([d({type:Number,json:{write:!0}})],Qo.prototype,"terminalId",void 0),Qo=l([x("esri.rest.networks.support.NetworkElement")],Qo);const Vle=Qo;let hu=class extends P{constructor(t){super(t),this.aggregatedGeometry=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.startingPointsIgnored=!1,this.warnings=null}};l([d({type:_6e,json:{write:!0},readOnly:!0})],hu.prototype,"aggregatedGeometry",void 0),l([d({type:[Vle],json:{write:!0},readOnly:!0})],hu.prototype,"elements",void 0),l([d({type:[S6e],json:{write:!0},readOnly:!0})],hu.prototype,"globalFunctionResults",void 0),l([d({type:Boolean,json:{write:!0},readOnly:!0})],hu.prototype,"kFeaturesForKNNFound",void 0),l([d({type:Boolean,json:{write:!0},readOnly:!0})],hu.prototype,"startingPointsIgnored",void 0),l([d({type:[String],json:{write:!0},readOnly:!0})],hu.prototype,"warnings",void 0),hu=l([x("esri.rest.networks.support.TraceResult")],hu);const T6e=hu,x6e=Si()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let jp=class extends T6e{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const i={...t,query:{f:"json"}},{data:r}=await Be(this.statusUrl,i),s=r.traceResults?{...r.traceResults,...r}:r;return this.read(s),this}async waitForJobCompletion(t={}){const{interval:i=1e3,statusCallback:r}=t;return new Promise((s,n)=>{this._clearTimer();const o=setInterval(()=>{this._timer||n(mt()),this.checkJobStatus().then(a=>{const{status:u}=a;switch(this.status=u,u){case"job-succeeded":this._clearTimer(),s(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),n(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};l([d({type:String,json:{write:!0}})],jp.prototype,"statusUrl",void 0),l([ee(x6e)],jp.prototype,"status",void 0),l([d({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],jp.prototype,"submissionTime",void 0),l([d({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],jp.prototype,"lastUpdatedTime",void 0),jp=l([x("esri.networks.support.TraceJobInfo")],jp);const $6e=jp;let pu=class extends p6e{constructor(t){super(t),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map}get serviceTerritoryFeatureLayerId(){var t;return((t=this.dataElement)==null?void 0:t.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var t,i,r,s,n,o,a,u;return new w6e({rulesTableId:(t=this.sourceJSON)==null?void 0:t.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(s=this.sourceJSON)==null?void 0:s.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(n=this.sourceJSON)==null?void 0:n.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(a=this.sourceJSON)==null?void 0:a.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(u=this.sourceJSON)==null?void 0:u.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var t;return((t=this.dataElement)==null?void 0:t.terminalConfigurations.map(i=>fH.fromJSON(i)))||[]}get domainNetworkNames(){var t;return((t=this.dataElement)==null?void 0:t.domainNetworks.map(i=>i.domainNetworkName))||[]}get _utilityLayerList(){var i,r;const t=new Set;return(r=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||r.map(s=>{var n,o;(n=s==null?void 0:s.edgeSources)==null||n.map(({layerId:a,sourceId:u})=>{this._layerIdBySourceId.set(u,a),this._sourceIdByLayerId.set(a,u),t.add(a)}),(o=s==null?void 0:s.junctionSources)==null||o.map(({layerId:a,sourceId:u})=>{this._layerIdBySourceId.set(u,a),this._sourceIdByLayerId.set(a,u),t.add(a)})}),t}async load(t){return this.addResolvingPromise(super.load(t)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(t)),this}getTerminalConfiguration(t){var c,h,p,m;let i=null,r=null;const s=t.layer;let n=null;if((s==null?void 0:s.type)==="feature"){if(n=s.layerId,n===null)return null}else if((s==null?void 0:s.type)!=="subtype-sublayer"||(n=((c=s==null?void 0:s.parent)==null?void 0:c.layerId)??null,n===null))return null;const o=t.attributes;if(o==null)return null;for(const y of Object.keys(o))y.toUpperCase()==="ASSETGROUP"&&(i=t.getAttribute(y)),y.toUpperCase()==="ASSETTYPE"&&(r=t.getAttribute(y));if(!this.dataElement)return null;let a=null;const u=this.dataElement.domainNetworks;for(const y of u){const g=(h=y.junctionSources)==null?void 0:h.find(v=>v.layerId===n);if(g){const v=(p=g.assetGroups)==null?void 0:p.find(b=>b.assetGroupCode===i);if(v){const b=(m=v.assetTypes)==null?void 0:m.find(w=>w.assetTypeCode===r);if(b!=null&&b.isTerminalConfigurationSupported){a=b.terminalConfigurationId;break}}}}if(a!=null){const y=this.dataElement.terminalConfigurations,g=y==null?void 0:y.find(v=>v.terminalConfigurationId===a);return g?fH.fromJSON(g):null}return null}getTierNames(t){var r;const i=(r=this.dataElement)==null?void 0:r.domainNetworks.find(s=>s.domainNetworkName===t);return(i==null?void 0:i.tiers.map(s=>s.name))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}getTerminalById(t){if(!this.dataElement||t==null)return null;const i=this._terminalById.get(t);return i??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(s=>{this._terminalById.set(s.id,s)})}),this._terminalById.get(t))}isUtilityLayer(t){var i,r;return"layerId"in t?this._utilityLayerList.has(t==null?void 0:t.layerId)&&(((i=t.url)==null?void 0:i.startsWith(this.featureServiceUrl))??!1):!(t.type!=="subtype-sublayer"||!t.parent)&&this._utilityLayerList.has(t.parent.layerId)&&(((r=t.parent.url)==null?void 0:r.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(t,i){const[{queryAssociations:r},{default:s}]=await Promise.all([L(()=>import("./queryAssociations-DoO-v906.js"),__vite__mapDeps([258,259])),L(()=>import("./QueryAssociationsParameters-DBdrCXlI.js"),[])]),n=s.from(t);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,(await r(this.networkServiceUrl,n,i)).associations}async synthesizeAssociationGeometries(t){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([L(()=>import("./synthesizeAssociationGeometries-5mRODmyH.js"),__vite__mapDeps([260,259])),L(()=>import("./SynthesizeAssociationGeometriesParameters-DYCzOYY2.js"),[])]),s=r.from(t);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,i(this.networkServiceUrl,s)}async trace(t){const[{trace:i},{default:r}]=await Promise.all([L(()=>import("./trace-BjfS4hmE.js"),[]),L(()=>import("./TraceParameters-Vn5cVx2w.js"),[])]),s=r.from(t);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,i(this.networkServiceUrl,s)}async submitTraceJob(t){const[{submitTraceJob:i},{default:r}]=await Promise.all([L(()=>import("./trace-BjfS4hmE.js"),[]),L(()=>import("./TraceParameters-Vn5cVx2w.js"),[])]),s=r.from(t);s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment;const n=await i(this.networkServiceUrl,s);return new $6e({statusUrl:n})}async canAddAssociation(t){const i=await this.getRulesTable();if(!i)return!1;await i.load();const r=(c,h)=>c?c.terminalId===1?!(h!=null&&h.terminalId)||(h==null?void 0:h.terminalId)===c.terminalId:c.terminalId===(h==null?void 0:h.terminalId):!(h!=null&&h.terminalId),s=c=>({fromRuleElement:{networkSource:c.fromNetworkSource,assetGroup:c.fromAssetGroup,assetType:c.fromAssetType,terminal:c.fromTerminal},viaRuleElement:c.viaNetworkSource?{networkSource:c.viaNetworkSource,assetGroup:c.viaAssetGroup,assetType:c.viaAssetType,terminal:c.viaTerminal}:void 0,toRuleElement:{networkSource:c.toNetworkSource,assetGroup:c.toAssetGroup,assetType:c.toAssetType,terminal:c.toTerminal}}),n=(c,h,p=!0)=>{var m,y,g;return((m=c.networkSource)==null?void 0:m.sourceId)===h.networkSourceId&&((y=c.assetGroup)==null?void 0:y.assetGroupCode)===h.assetGroupCode&&((g=c.assetType)==null?void 0:g.assetTypeCode)===h.assetTypeCode&&(!p||r(c.terminal,h))},o=(c,h)=>{const{fromRuleElement:p,toRuleElement:m}=s(c);return n(p,h.fromNetworkElement,!1)&&n(m,h.toNetworkElement,!1)},a=(c,h)=>{const{fromRuleElement:p,toRuleElement:m}=s(c);return n(p,h.fromNetworkElement)&&n(m,h.toNetworkElement)||n(p,h.toNetworkElement)&&n(m,h.fromNetworkElement)},u=(c,h)=>{const{fromRuleElement:p,toRuleElement:m,viaRuleElement:y}=s(c);return n(p,h.fromNetworkElement)&&n(y,h.toNetworkElement)||n(p,h.toNetworkElement)&&n(y,h.fromNetworkElement)||n(y,h.fromNetworkElement)&&n(m,h.toNetworkElement)||n(y,h.toNetworkElement)&&n(m,h.fromNetworkElement)};return t.associationType==="containment"?i.rulesCategorized.containment.some(c=>o(c,t)):t.associationType==="attachment"?i.rulesCategorized.attachment.some(c=>o(c,t)):i.rulesCategorized.connectivity.some(c=>c.ruleType===Fs.RTEdgeJunctionEdgeConnectivity?u(c,t):a(c,t))}generateAddAssociations(t){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:s,fromTerminalId:n,toNetworkSourceId:o,toGlobalId:a,toTerminalId:u,associationType:c,isContentVisible:h,percentAlong:p,globalId:m}=v6e(i);return{addFeatures:t.map(y=>{var g,v,b,w,_,S;return new _i({attributes:{[r]:(g=y.fromNetworkElement)==null?void 0:g.networkSourceId,[s]:(v=y.fromNetworkElement)==null?void 0:v.globalId,[n]:(b=y.fromNetworkElement)==null?void 0:b.terminalId,[o]:(w=y.toNetworkElement)==null?void 0:w.networkSourceId,[a]:(_=y.toNetworkElement)==null?void 0:_.globalId,[u]:(S=y.toNetworkElement)==null?void 0:S.terminalId,[c]:f6e[y.associationType],[h]:y.isContentVisible==null?void 0:y.isContentVisible?1:0,[p]:y.percentAlong,[m]:y.globalId}})}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}generateDeleteAssociations(t){const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers;return{deleteFeatures:t.map(s=>({globalId:s.globalId})),id:r,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async _loadNamedTraceConfigurationsFromNetwork(t){var s;if(((s=this.sharedNamedTraceConfigurations)==null?void 0:s.length)===0)return;const i=this.sharedNamedTraceConfigurations.map(n=>n.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},t);for(const n of this.sharedNamedTraceConfigurations){const o=r==null?void 0:r.find(a=>a.globalId===n.globalId);if(o){const a=o.write({},{origin:"service"});n.read(a,{origin:"service"})}}}async _createRulesTable(){var o;const t=this.networkSystemLayers.rulesTableUrl,i=new Vv({url:t});await i.load();const r=(o=this.dataElement)==null?void 0:o.domainNetworks;if(!r)return null;const s=r.flatMap(a=>[...a.edgeSources||[],...a.junctionSources||[]]),n=(await E6e(i)).map(a=>this._hydrateRuleInfo(i,s,a));return new m6e({rulesLayer:i,rules:n})}_hydrateRuleInfo(t,i,r){const s=t.fieldsIndex,n=s.get("RULETYPE"),o=s.get("CREATIONDATE"),a=s.get("FROMNETWORKSOURCEID"),u=s.get("FROMASSETGROUP"),c=s.get("FROMASSETTYPE"),h=s.get("FROMTERMINALID"),p=s.get("TONETWORKSOURCEID"),m=s.get("TOASSETGROUP"),y=s.get("TOASSETTYPE"),g=s.get("TOTERMINALID"),v=s.get("VIANETWORKSOURCEID"),b=s.get("VIAASSETGROUP"),w=s.get("VIAASSETTYPE"),_=s.get("VIATERMINALID"),S=r.attributes[n.name],T=new Date(r.attributes[o.name]),E=[{networkSourceId:r.attributes[a.name],assetGroupId:r.attributes[u.name],assetTypeId:r.attributes[c.name],terminalId:r.attributes[h.name]},{networkSourceId:r.attributes[p.name],assetGroupId:r.attributes[m.name],assetTypeId:r.attributes[y.name],terminalId:r.attributes[g.name]},{networkSourceId:r.attributes[v.name],assetGroupId:r.attributes[b.name],assetTypeId:r.attributes[w.name],terminalId:r.attributes[_.name]}];let A;(function(O){O[O.from=0]="from",O[O.to=1]="to",O[O.via=2]="via"})(A||(A={}));const C={ruleType:S,creationDate:T};for(const O of[A.from,A.to,A.via]){if(S!==Fs.RTEdgeJunctionEdgeConnectivity&&O===A.via)continue;const U=E[O],V=i.find(Qe=>Qe.sourceId===U.networkSourceId),H=V==null?void 0:V.assetGroups.find(Qe=>Qe.assetGroupCode===U.assetGroupId),te=H==null?void 0:H.assetTypes.find(Qe=>Qe.assetTypeCode===U.assetTypeId),ye=this._getTerminal(te,U);let ce="";switch(O){case A.from:ce="from";break;case A.to:ce="to";break;case A.via:ce="via"}C[`${ce}NetworkSource`]=V,C[`${ce}AssetGroup`]=H,C[`${ce}AssetType`]=te,C[`${ce}Terminal`]=ye==null?void 0:ye.toJSON()}return C}_getTerminal(t,i){var n,o;const r=t==null?void 0:t.terminalConfigurationId,s=(n=this.terminalConfigurations)==null?void 0:n.find(a=>a.id===r);return((o=s==null?void 0:s.terminals)==null?void 0:o.find(a=>a.id===i.terminalId))??null}};async function E6e(e){const t=new xr({where:"1=1",outFields:["*"]});return(await xae(e,t)).features}l([d({type:[g6e],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],pu.prototype,"sharedNamedTraceConfigurations",void 0),l([d({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],pu.prototype,"type",void 0),l([d({readOnly:!0})],pu.prototype,"serviceTerritoryFeatureLayerId",null),l([d({readOnly:!0})],pu.prototype,"networkSystemLayers",null),l([d({readOnly:!0})],pu.prototype,"terminalConfigurations",null),l([d({readOnly:!0})],pu.prototype,"domainNetworkNames",null),pu=l([x("esri.networks.UtilityNetwork")],pu);const zle=pu,M6e=Object.freeze(Object.defineProperty({__proto__:null,default:zle},Symbol.toStringTag,{value:"Module"}));let Vy=class extends _e.ClonableMixin(P){constructor(t){super(t),this.expression=null,this.returnType="string",this.title=null}};l([d({type:String,json:{write:{isRequired:!0}}})],Vy.prototype,"expression",void 0),l([d({type:["number","string"],json:{write:!0}})],Vy.prototype,"returnType",void 0),l([d({type:String,json:{write:!0}})],Vy.prototype,"title",void 0),Vy=l([x("esri.webdoc.geotriggersInfo.ExpressionInfo")],Vy);const Ule=Vy,G2=new be({deviceLocation:"device-location"});let Nb=class extends _e.ClonableMixin(P){constructor(t){super(t),this.filterExpression=null,this.type="device-location"}};l([d({type:Ule,json:{write:!0}})],Nb.prototype,"filterExpression",void 0),l([d({type:G2.apiValues,readOnly:!0,json:{type:G2.jsonValues,read:G2.read,write:G2.write}})],Nb.prototype,"type",void 0),Nb=l([x("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],Nb);const A6e=Nb;let Lb=class extends _e.ClonableMixin(P){constructor(t){super(t),this.geometry=null,this.where=null}};l([d({types:am,json:{read:wa,write:!0}})],Lb.prototype,"geometry",void 0),l([d({type:String,json:{write:!0}})],Lb.prototype,"where",void 0),Lb=l([x("esri.webdoc.geotriggersInfo.FeatureFilter")],Lb);const I6e=Lb;let zy=class extends _e.ClonableMixin(P){constructor(t){super(t),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};l([d({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],zy.prototype,"layerId",void 0),l([d({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],zy.prototype,"layerUrl",void 0),l([ee({featureLayer:"feature-layer"},{readOnly:!0})],zy.prototype,"type",void 0),zy=l([x("esri.webdoc.geotriggersInfo.FeatureLayerSource")],zy);const C6e=zy;let Vp=class extends _e.ClonableMixin(P){constructor(t){super(t),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};l([d({type:C6e,json:{write:{isRequired:!0}}})],Vp.prototype,"fenceSource",void 0),l([d({type:I6e,json:{write:!0}})],Vp.prototype,"filter",void 0),l([d({type:Number,json:{write:!0}})],Vp.prototype,"bufferDistance",void 0),l([ee({features:"features"},{readOnly:!0})],Vp.prototype,"type",void 0),Vp=l([x("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Vp);const O6e=Vp;let U$=class extends _e.ClonableMixin(P){constructor(t){super(t),this.type="fence"}};l([ee({fence:"fence"},{readOnly:!0})],U$.prototype,"type",void 0),U$=l([x("esri.webdoc.geotriggersInfo.Geotrigger")],U$);const qle=U$;let kb=class extends _e.ClonableMixin(P){constructor(t){super(t),this.expressionInfo=null,this.requestedActions=null}};l([d({type:Ule,json:{write:!0}})],kb.prototype,"expressionInfo",void 0),l([d({type:[String],json:{write:!0}})],kb.prototype,"requestedActions",void 0),kb=l([x("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],kb);const R6e=kb,F6e=new be({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),N6e=new be({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),B2=new be({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Xo=class extends qle{constructor(t){super(t),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};l([ee(F6e)],Xo.prototype,"enterExitRule",void 0),l([d({type:A6e,json:{write:{isRequired:!0}}})],Xo.prototype,"feed",void 0),l([ee(N6e)],Xo.prototype,"feedAccuracyMode",void 0),l([d({type:B2.apiValues,json:{type:B2.jsonValues,read:B2.read,write:{writer:B2.write,isRequired:!0}}})],Xo.prototype,"fenceNotificationRule",void 0),l([d({type:O6e,json:{write:{isRequired:!0}}})],Xo.prototype,"fenceParameters",void 0),l([d({type:String,json:{write:!0}})],Xo.prototype,"name",void 0),l([d({type:R6e,json:{write:!0}})],Xo.prototype,"notificationOptions",void 0),l([ee({fence:"fence"},{readOnly:!0})],Xo.prototype,"type",void 0),Xo=l([x("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Xo);const L6e=Xo,k6e={base:qle,key:"type",typeMap:{fence:L6e}};let q$=class extends _e.ClonableMixin(P){constructor(t){super(t),this.geotriggers=null}};l([d({types:[k6e],json:{write:{isRequired:!0}}})],q$.prototype,"geotriggers",void 0),q$=l([x("esri.webdoc.GeotriggersInfo")],q$);const P6e=q$;let Uy=class extends _e.ClonableMixin(P){constructor(t){super(t),this.portalItem=null}readPortalItem(t,i,r){const{itemId:s}=i;if(s)return new yl({id:s,portal:r==null?void 0:r.portal})}writePortalItem(t,i){t!=null&&t.id&&(i.itemId=t.id)}};l([d({type:yl,json:{write:{isRequired:!0}}})],Uy.prototype,"portalItem",void 0),l([W("portalItem",["itemId"])],Uy.prototype,"readPortalItem",null),l([J("portalItem",{itemId:{type:String}})],Uy.prototype,"writePortalItem",null),Uy=l([x("esri.webdoc.ips.PositioningService")],Uy);const D6e=Uy;let G$=class extends _e.ClonableMixin(P){constructor(t){super(t),this.positioningService=null}};l([d({type:D6e,json:{write:{isRequired:!0}}})],G$.prototype,"positioningService",void 0),G$=l([x("esri.webdoc.IPSInfo")],G$);const j6e=G$,V6e={currentVersion:koe,createInitialViewProperties:()=>new HM,parseVersion:Dg.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},z6e=Q.ofType(zle);let ld=class extends Hke{constructor(t){super(t),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const t=this.utilityNetworks.removeAll();for(const i of t)i.destroy();this.utilityNetworks.destroy()}}get context(){return V6e}loadAll(){return aI(this,t=>{var i,r;t(this.ground,this.basemap,this.layers,this.tables,(r=(i=this.ipsInfo)==null?void 0:i.positioningService)==null?void 0:r.portalItem)})}static fromJSON(t){if(t)return new this({resourceInfo:t});throw new M("webmap:empty-resource","Expected a JSON resource but got nothing")}};ld.VERSION=koe,l([d({type:P6e,json:{write:!0}})],ld.prototype,"geotriggersInfo",void 0),l([d({type:j6e,json:{write:!0,name:"mapIPSInfo"}})],ld.prototype,"ipsInfo",void 0),l([d({json:{write:!0}})],ld.prototype,"presentation",void 0),l([d({type:z6e,json:{read:!0,write:!0}})],ld.prototype,"utilityNetworks",void 0),ld=l([x("esri.WebMap")],ld);const Gle=ld;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.14 */function U6e(e,t){return t===void 0||(e==null?void 0:e.targetGeometry)!==(t==null?void 0:t.targetGeometry)||(e==null?void 0:e.rotation)!==(t==null?void 0:t.rotation)||(e==null?void 0:e.scale)!==(t==null?void 0:t.scale)}function mH(e,t){return Ble(t==null?void 0:t.center,e)}function Ble(e,t){if(typeof t=="string")return Ble(e,t.split(",").map(Number));if(!e)return t;if(Array.isArray(t)){const i=t[0],r=t[1],s=t.length>2?t[2]:void 0;if(i!==e.longitude||r!==e.latitude||s!==e.z)return t}else if(t&&!(e!=null&&e.equals(t)))return t}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.14 */const q6e=Ome`@layer{arcgis-map{display:block;height:100%;.esri-view{height:100%;width:100%}}}`,G6e=vQ(Gle),B6e=vQ(lke);var oh;let H6e=(oh=class extends yQ{constructor(){super(...arguments),this._center=void 0,this._extent=void 0,this._itemId=void 0,this._scale=void 0,this._viewpoint=void 0,this._zoom=void 0,this._map=G6e(this,{editConstructorProperties:this._editMapProperties}),this.view=B6e(this,{editConstructorProperties:this._editViewProperties}),this.allLayerViews=this.view.allLayerViews,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.arcgisViewChange=Wz(),this.arcgisViewClick=dr(()=>this.view,"click"),this.arcgisViewDoubleClick=dr(()=>this.view,"double-click"),this.arcgisViewDrag=dr(()=>this.view,"drag"),this.arcgisViewHold=dr(()=>this.view,"hold"),this.arcgisViewImmediateClick=dr(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=dr(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=dr(()=>this.view,"key-down"),this.arcgisViewKeyUp=dr(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=dr(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=dr(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=dr(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=dr(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=dr(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=dr(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=dr(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=dr(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=dr(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=Wz()}get center(){return this.view.center??this._center}set center(t){const i=mH(t,this.ready?this.view:void 0);i&&(this.ready&&(this.view.center=i),this._center=i)}get extent(){return this.view.extent??this._extent}set extent(t){var i;this.view.ready||(this._extent=t),t&&!((i=this.extent)!=null&&i.equals(t))&&(this.view.extent=t)}get gamepad(){return this.ready?this.view.input.gamepad:void 0}get interacting(){return this.view.interacting}get itemId(){var t;return((t=this._map.portalItem)==null?void 0:t.id)??this._itemId}set itemId(t){this._itemId=t,this.ready?bx.reCreate(this._map,this).then(()=>{this.view.map=this._map}).catch(console.error):this.view.ready!=null&&(this._map.destroy(),this._map=new Gle(this._editMapProperties({portalItem:{id:this._itemId}})),this.view.map=this._map)}get navigating(){return this.view.navigating}get scale(){return this.view.scale??this._scale}set scale(t){this.ready&&(this.view.scale=t),this._scale=t}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint??this._viewpoint}set viewpoint(t){this.ready&&U6e(this.viewpoint,t)&&(this.view.viewpoint=t),this._viewpoint=t}get zoom(){return this.view.zoom??this._zoom}set zoom(t){this.ready&&(this.view.zoom=t),this._zoom=t}async addLayer(t,i){var r;(r=this.map)==null||r.add(t,i)}async addLayers(t,i){var r;(r=this.map)==null||r.addMany(t,i)}async addTable(t){var i;(i=this.map)==null||i.tables.add(t)}async addTables(t,i){var r;(r=this.map)==null||r.tables.addMany(t,i)}async closePopup(){var t;(t=this.view)==null||t.closePopup()}async destroy(){await this.manager.destroy()}async goTo(t,i){var r;return await((r=this.view)==null?void 0:r.goTo(t,i))}async hitTest(t,i){var r;return await((r=this.view)==null?void 0:r.hitTest(t,i))}async openPopup(t){var i;await((i=this.view)==null?void 0:i.openPopup(t))}async takeScreenshot(t){var i;return await((i=this.view)==null?void 0:i.takeScreenshot(t))}toMap(t){return this.view.toMap(t)}toScreen(t,i){return this.view.toScreen(t,i)}async tryFatalErrorRecovery(){var t;(t=this.view)==null||t.tryFatalErrorRecovery()}async whenLayerView(t){var i;return await((i=this.view)==null?void 0:i.whenLayerView(t))}load(){var t;this.el.childElem=document.createElement("div"),this.el.append(this.el.childElem),(t=this.view).container??(t.container=this.el.childElem)}loaded(){this.manager.onLifecycle(()=>[G(()=>this.view.stationary,()=>{this.arcgisViewChange.emit()},{initial:!0}),G(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}_editMapProperties(t){this.map&&(this._map=this.map),this.itemId&&(t.portalItem={id:this.itemId});const{basemap:i,...r}=t;i||(t=r);const{ground:s,...n}=t;return s||(t=n),t}async _editViewProperties(t){await this.manager.use(this._map),this.view.ui||(t.ui={components:["attribution"]}),t.map??(t.map=this._map);const i=mH(this.center,void 0);return i&&(t.center=i),this.viewpoint&&(t.viewpoint=this.viewpoint),this.scale!==void 0&&(t.scale=this.scale),this.extent&&(t.extent=this.extent),this.zoom!==void 0&&(t.zoom=this.zoom),t}},oh.properties={_map:16,view:32,allLayerViews:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:7,viewpoint:0,zoom:9},oh.shadowRootOptions=oF,oh.styles=q6e,oh);tye("arcgis-map",H6e);function O1(e,t,i,r){let s=null,n=1e3;typeof t=="number"?(n=t,r=i):(s=t??null,n=i);let o,a=0;const u=()=>{a=0,e.apply(r,o)},c=(...h)=>{s&&s.apply(r,h),o=h,n?a||(a=setTimeout(u,n)):u()};return c.remove=()=>{a&&(clearTimeout(a),a=0)},c.forceUpdate=()=>{a&&(clearTimeout(a),u())},c.hasPendingUpdates=()=>!!a,c}function lD(e){var t;switch(e==null?void 0:e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return(t=e.extent)==null?void 0:t.center;default:return null}}function W6e(e){return e?{backgroundImage:`url(${e})`}:{}}function Z6e({action:e,feature:t}){const i=t==null?void 0:t.attributes,r="image"in e?e.image:void 0;return r&&i?eo(r,i):r??""}var eA;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(eA||(eA={}));function J6e(e,t){return{type:Uf(t),value:e,unit:t}}function $it(e){return{value:e}}function Y6e(e,t){return{type:Uf(t),value:e,unit:t}}function Q6e(e,t){return{type:Uf(t),value:e,unit:t}}function QI(e,t,i="arithmetic"){return{type:Uf(t),value:e,unit:t,rotationType:i}}function Eit(e,t){const i=X6e(e,t);return e.type==="angle"?QI(i,t,e.rotationType):J6e(i,t)}function X6e(e,t){return Ye(e.value,e.unit,t)}function Mit(e,t){return e==null?t:t==null||e.value>Ye(t.value,t.unit,e.unit)?e:t}function Ait(e,t){return e==null?null:{...e,value:e.value*t}}function K6e(e,t,i){if(t===i)return e;switch(i){case"arithmetic":case"geographic":return 90-e}}const Iit=Y6e(0,"meters"),Cit=Q6e(0,"square-meters");QI(0,"radians");const Oit=QI(0,"degrees"),Rit=QI(0,"degrees","geographic");function Hle(e,t,i){return e.units[t][i]}function M0(e,t,i,r=2,s="abbr"){return`${ar(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:t>0?"never":"exceptZero"})} ${Hle(e,i,s)}`}function XI(e,t,i,r=2,s="abbr"){return`${ar(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${Hle(e,i,s)}`}function Fit(e,t,i,r=2,s="abbr"){const n=CK(t,i);return M0(e,Ye(t,i,n),n,r,s)}function Nit(e,t,i,r=2,s="abbr"){const n=CK(t,i);return XI(e,Ye(t,i,n),n,r,s)}function Lit(e,t,i,r=2,s="abbr"){const n=OK(t,i);return M0(e,Ye(t,i,n),n,r,s)}function kit(e,t,i,r=2,s="abbr"){const n=OK(t,i);return XI(e,Ye(t,i,n),n,r,s)}function Pit(e,t,i,r=2,s="abbr"){const n=RK(t,i);return M0(e,Ye(t,i,n),n,r,s)}function Dit(e,t,i,r=2,s="abbr"){const n=RK(t,i);return XI(e,Ye(t,i,n),n,r,s)}function jit(e,t,i,r=2,s="abbr"){const n=FK(t,i);return M0(e,Ye(t,i,n),n,r,s)}function Vit(e,t,i,r=2,s="abbr"){const n=FK(t,i);return XI(e,Ye(t,i,n),n,r,s)}function zit(e,t,i,r=2,s="abbr"){const n=mwe(t,i);return M0(e,Ye(t,i,n),n,r,s)}function Uit(e,t,i,r=2,s="abbr"){const n=ywe(t,i);return M0(e,Ye(t,i,n),n,r,s)}const eze=(e,t)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:e>0?"never":"exceptZero"});function qit(e,t,i,r,s,n=kX,o=!0){let a=n.normalize(K6e(Ye(e,t,"degrees"),i,r),0,o);const u=eze(a,s??2);return a=tze(a,u),ar(a,u)}const yH=new Map;function tze(e,t){const i=JSON.stringify(t);let r=yH.get(i);return r||(r=new Intl.NumberFormat("en-US",t),yH.set(i,r)),/^[-+]?360\.?0*?$/.test(r.format(e))?0:e}const gH=["B","kB","MB","GB","TB"];function ize(e,t){let i=(t=Math.round(t))===0?0:Math.floor(Math.log(t)/Math.log(eA.KILOBYTES));i=Ws(i,0,gH.length-1);const r=ar(t/eA.KILOBYTES**i,{maximumFractionDigits:2});return ga(e.units.bytes[gH[i]],{fileSize:r})}function rze(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t)return null;const s=t.find(n=>n.name===i);return s?sze({tagName:r,tags:s.tags}):null}function sze(e){const{tagName:t,tags:i}=e;if(!i)return null;const r=i.find(s=>s.name===t);return(r==null?void 0:r.value)||null}var uD;const nze={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let As=uD=class extends P{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=rze({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return nze[t]||null}clone(){return new uD({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};l([d({type:String})],As.prototype,"contentType",void 0),l([d()],As.prototype,"exifInfo",void 0),l([d({readOnly:!0})],As.prototype,"orientationInfo",null),l([d({type:Le})],As.prototype,"id",void 0),l([d({type:String})],As.prototype,"globalId",void 0),l([d({type:String})],As.prototype,"keywords",void 0),l([d({type:String})],As.prototype,"name",void 0),l([d({json:{read:!1}})],As.prototype,"parentGlobalId",void 0),l([d({json:{read:!1}})],As.prototype,"parentObjectId",void 0),l([d({type:Le})],As.prototype,"size",void 0),l([d({json:{read:!1}})],As.prototype,"url",void 0),As=uD=l([x("esri.rest.query.support.AttachmentInfo")],As);const oze=As,Ef=",",zv={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},aze="percent-of-total",lze="field",uze={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},cze=new Set(["integer","small-integer"]);let PO=null;function go(e){return fI(e)||vre(e)||wre(e)}async function Gg(e){const{field:t,field2:i,field3:r,normalizationField:s,valueExpression:n}=e;let o=[];if(n){if(!PO){const{arcadeUtils:a}=await On();PO=a}o=PO.extractFieldNames(n)}return t&&o.push(t),i&&o.push(i),r&&o.push(r),s&&o.push(s),o}function dze(e){let t=e.normalizationType;return t||(e.normalizationField?t=lze:e.normalizationTotal!=null&&(t=aze)),t??void 0}function dw(e){return String(e).padStart(2,"0")}function vH(e,t,i){let r;return t==="date"||t==="number"?(t==="number"&&(e=new Date(e)),r=`TIMESTAMP'${i?e.getFullYear():e.getUTCFullYear()}-${dw((i?e.getMonth():e.getUTCMonth())+1)}-${dw(i?e.getDate():e.getUTCDate())} ${dw(i?e.getHours():e.getUTCHours())}:${dw(i?e.getMinutes():e.getUTCMinutes())}:${dw(i?e.getSeconds():e.getUTCSeconds())}'`):r=e,r}function hze(e,t,i,r){const{hasQueryEngine:s}=e,n=`(${vH(i,wH(e,i),s)} - ${vH(t,wH(e,t),s)})`;let o=uze[r],a="/";return o<1&&(o=1/o,a="*"),{sqlExpression:o===1?n:`(${n} ${a} ${o})`,sqlWhere:null}}function wH(e,t){if(t instanceof Date)return"date";if(typeof t=="number")return"number";if(typeof t=="string"){const i=e.getField(t);if(t.toLowerCase()==="<now>")return;if(fI(i))return"field"}}function Wle(e,t=zv){for(const i in t)if(t[i].includes(e))return i}function Zle(e,t,i=!0){let r=null;return e&&(typeof e=="string"?t.includes(e)&&(r=e):r=D$e(e)),i?r||"gray":r}function Jle(e,t){const i=t&&e.getField(t);return!!i&&cze.has(i.type)}function pg(e){return`cast(${e} as float)`}function Yle(e,t){const{format:i,timeZoneOptions:r,fieldType:s}=t??{};let n,o;if(r&&({timeZone:n,timeZoneName:o}=yte(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,Hm(i||"short-date-short-time"),s)),typeof e=="string"&&isNaN(Date.parse(s==="time-only"?`1970-01-01T${e}Z`:e)))return e;switch(s){case"date-only":{const a=Hm(i||"short-date");return typeof e=="string"?tSe(e,{...a}):yn(e,{...a,timeZone:bl})}case"time-only":{const a=Hm(i||"short-time");return typeof e=="string"?iSe(e,a):yn(e,{...a,timeZone:bl})}case"timestamp-offset":{if(!n&&typeof e=="string"&&new Date(e).toISOString()!==e)return e;const a=i||r?Hm(i||"short-date-short-time"):void 0,u=a?{...a,timeZone:n,timeZoneName:o}:void 0;return typeof e=="string"?rSe(e,u):yn(e,u)}default:{const a=i||r?Hm(i||"short-date-short-time"):void 0;return yn(typeof e=="string"?new Date(e):e,a?{...a,timeZone:n,timeZoneName:o}:void 0)}}}const pze="esri.widgets.Feature.support.featureUtils",cD=()=>q.getLogger(pze),fze=/href=(""|'')/gi,mze=/(\{([^{\r\n]+)\})/g,yze=/'/g,Qle=/^\s*expression\//i,gze=/(\n)/gi,vze=/[\u00A0-\u9999<>&]/gim,wze=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,bze=/^(?:mailto:|tel:)/,Xle="relationships/",bH=Hm("short-date-short-time");function SV(e){if(e!=null)return(e.sourceLayer||e.layer)??void 0}async function R1({type:e,value:t,event:i}){try{return typeof t=="function"?t(i):await t}catch(r){return void cD().error("error",`An error occurred when calling the "${e}" function`,{error:r,graphic:i.graphic,value:t})}}function TV(e=""){if(e)return!bze.test(e.trim().toLowerCase())}function KI(e){return!!e&&Qle.test(e)}function _ze(e,t){if(!t||!KI(t)||!e)return;const i=t.replace(Qle,"").toLowerCase();return e.find(({name:r})=>r.toLowerCase()===i)}function xV(e,t){const i=_ze(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function Sze(e,t){const i=t.get(e.toLowerCase());return`{${(i==null?void 0:i.fieldName)||e}}`}function Tze(e){return e.replaceAll(fze,"")}function Uv(e,t){const i=$V(t,e);return i?i.name:e}function Kle(e,t){return e&&e.map(i=>Uv(i,t))}function $V(e,t){return e&&typeof e.getField=="function"&&t?e.getField(t)??null:null}function eue(e){return`${e}`.trim()}function qd({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:s,fieldInfoMap:n}){return r?tA({formattedAttributes:t,template:Mze(r,{...t,...s,...e},i),fieldInfoMap:n}):""}function tA({formattedAttributes:e,template:t,fieldInfoMap:i}){return eue(Tze(ga(ga(t,r=>Sze(r,i)),e)))}function xze(e,t,i=!1){const r=t[e];if(typeof r=="string"){const s="%27",n=(i?encodeURIComponent(r):r).replaceAll(yze,s);t[e]=n}}function $ze(e,t=!1){const i={...e};return Object.keys(i).forEach(r=>xze(r,i,t)),i}function Eze(e,t,i){const r=(t=eue(t))&&t[0]!=="{";return ga(e,$ze(i,r||!1))}function iA(e,t){return e.replaceAll(mze,(i,r,s)=>{const n=$V(t,s);return n?`{${n.name}}`:r})}function Mze(e,t,i){const r=iA(e,i);return r&&r.replaceAll(wze,(s,n,o)=>Eze(s,n||o,t))}function Aze(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function tue(e){return e!=null&&typeof e=="object"&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&(e.type==="feature"||e.type==="scene"||e.type==="subtype-group"||e.type==="subtype-sublayer"||e.type==="sublayer")&&"when"in e}function iue(e){return e!=null&&typeof e=="object"&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}function BS(e){return tue(e)&&iue(e)}function rue(e){return!(!(e&&typeof e=="object"&&"createQuery"in e&&"getField"in e&&"queryFeatureCount"in e&&"queryFeatures"in e&&"queryObjectIds"in e&&"capabilities"in e&&"fields"in e&&"fieldsIndex"in e&&"type"in e)||e.type!=="feature"&&e.type!=="subtype-group"&&e.type!=="subtype-sublayer"&&e.type!=="sublayer"||!("when"in e))&&(e.type==="subtype-sublayer"&&"parent"in e&&e.parent&&typeof e.parent=="object"?"globalIdField"in e.parent:"globalIdField"in e)}function Ize(e){return!!e&&typeof e=="object"&&"sourceLayer"in e&&BS(e.sourceLayer)}function sue(e,t){var h;const{fieldInfos:i,fieldName:r,preventPlacesFormatting:s,layer:n,timeZone:o}=t,a=EV(i,r),u=$V(n,r);if(a&&!CN(r)){const p=u==null?void 0:u.type,m=(h=a.format)==null?void 0:h.dateFormat;if(p==="date"||p==="date-only"||p==="time-only"||p==="timestamp-offset"||m)return Yle(e,{format:m,fieldType:p,timeZoneOptions:{layerTimeZone:n&&"preferredTimeZone"in n?n.preferredTimeZone:null,viewTimeZone:o,datesInUnknownTimezone:!(!n||!("datesInUnknownTimezone"in n))&&!!n.datesInUnknownTimezone}})}const c=a==null?void 0:a.format;return typeof e=="string"&&CN(r)&&c?Cze(e,c):typeof(e=Aze(e,c))=="string"||e==null||c==null?A0(e):ar(e,s?{...wM(c),minimumFractionDigits:0,maximumFractionDigits:20}:wM(c))}function Cze(e,t){return e=e.trim(),/\d{2}-\d{2}/.test(e)?e:e.includes(",")?DO(e,",",", ",t):e.includes(";")?DO(e,";","; ",t):e.includes(" ")?DO(e," "," ",t):ar(Number(e),wM(t))}function DO(e,t,i,r){return e.trim().split(t).map(s=>ar(Number(s),wM(r))).join(i)}function EV(e,t){if(e!=null&&e.length&&t)return e.find(i=>{var r;return((r=i.fieldName)==null?void 0:r.toLowerCase())===t.toLowerCase()})}function Oze({fieldName:e,graphic:t,layer:i}){if(ul(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const s=i.getFeatureType(t);return s?s.name:null}function Rze({fieldName:e,value:t,graphic:i,layer:r}){if(ul(e)||!r||typeof r.getFieldDomain!="function")return null;const s=i&&r.getFieldDomain(e,{feature:i,excludeImpliedDomains:D("esri-widget-legacy-field-domain-calculation")});return s&&s.type==="coded-value"?s.getName(t):null}function nue(e,t,i,r){const{creatorField:s,creationDateField:n,editorField:o,editDateField:a}=e;if(!t)return;const u=yte(r&&"preferredTimeZone"in r?r.preferredTimeZone:null,!(!r||!("datesInUnknownTimezone"in r))&&!!r.datesInUnknownTimezone,i,bH,"date"),c={...bH,...u},h=t[a];if(typeof h=="number"){const m=t[o];return{type:"edit",date:yn(h,c),user:m}}const p=t[n];if(typeof p=="number"){const m=t[s];return{type:"create",date:yn(p,c),user:m}}return null}function oue(e,t){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const s=Uv(r.fieldName,t);r.fieldName=s,i.set(s.toLowerCase(),r)}return i}function dD(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(s=>{if(s.type==="fields"){const n=s==null?void 0:s.fieldInfos;n&&t.push(...n)}}),t}function eC(e){return e.replaceAll(vze,t=>`&#${t.charCodeAt(0)};`)}function A0(e){return typeof e=="string"?e.replaceAll(gze,'<br class="esri-text-new-line" />'):e}function aue(e){var p;const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:s,layer:n,graphic:o,timeZone:a}=e;if(t==null)return"";const u=Rze({fieldName:i,value:t,graphic:o,layer:n});if(u)return u;const c=Oze({fieldName:i,graphic:o,layer:n});if(c)return c;if(s.get(i.toLowerCase()))return sue(t,{fieldInfos:r||Array.from(s.values()),fieldName:i,layer:n,timeZone:a});const h=(p=n==null?void 0:n.fieldsIndex)==null?void 0:p.get(i);return h&&(go(h)||zs(h))?Yle(t,{fieldType:h.type,timeZoneOptions:{layerTimeZone:n&&"preferredTimeZone"in n?n.preferredTimeZone:null,viewTimeZone:a,datesInUnknownTimezone:!(!n||!("datesInUnknownTimezone"in n))&&!!n.datesInUnknownTimezone}}):A0(t)}function B$({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:s,relatedInfos:n,timeZone:o}){const a={};return n==null||n.forEach(u=>Lze({attributes:a,relatedInfo:u,fieldInfoMap:s,fieldInfos:e,layer:i,timeZone:o})),t&&Object.keys(t).forEach(u=>{const c=t[u];a[u]=aue({fieldName:u,fieldInfos:e,fieldInfoMap:s,layer:i,value:c,graphic:r,timeZone:o})}),a}async function MV(e,t){var h,p;const{layer:i,graphic:r,outFields:s,objectIds:n,returnGeometry:o,spatialReference:a}=e,u=n[0];if(typeof u!="number"&&typeof u!="string"){const m="Could not query required fields for the specified feature. The feature's ID is invalid.",y={layer:i,graphic:r,objectId:u,requiredFields:s};return cD().warn(m,y),null}if(!((p=(h=$ie(i))==null?void 0:h.operations)!=null&&p.supportsQuery)){const m="The specified layer cannot be queried. The following fields will not be available.",y={layer:i,graphic:r,requiredFields:s,returnGeometry:o};return cD().warn(m,y),null}const c=i.createQuery();return c.objectIds=n,c.outFields=s!=null&&s.length?s:[i.objectIdField],c.returnGeometry=!!o,c.returnZ=!!o,c.returnM=!!o,c.outSpatialReference=a,(await i.queryFeatures(c,t)).features[0]}async function Fze(e){var r;if(!((r=e.expressionInfos)!=null&&r.length))return!1;const t=await On(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function lue({graphic:e,popupTemplate:t,layer:i,spatialReference:r},s){if(!i||!t||(typeof i.load=="function"&&await i.load(s),!e.attributes))return;const n=i.objectIdField,o=e.attributes[n];if(o==null)return;const a=[o],u=await t.getRequiredFields(i.fieldsIndex),c=_re(u,e),h=c?[]:u.includes(n)?u:[...u,n],p=t.returnGeometry||await Fze(t);if(c&&!p)return;const m=await MV({layer:i,graphic:e,outFields:h,objectIds:a,returnGeometry:p,spatialReference:r},s);m&&(m.geometry&&(e.geometry=m.geometry),m.attributes&&(e.attributes={...e.attributes,...m.attributes}))}function ul(e=""){return!!e&&e.includes(Xle)}function Nze(e){return`${Xle}${e.layerId}/${e.fieldName}`}function _H({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:s,layer:n,timeZone:o}){e&&t&&i&&Object.keys(t.attributes).forEach(a=>{const u=Nze({layerId:i.relation.id.toString(),fieldName:a}),c=t.attributes[a];e[u]=aue({fieldName:u,fieldInfos:r,fieldInfoMap:s,layer:n,value:c,graphic:t,timeZone:o})})}function Lze({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s,timeZone:n}){var o,a;e&&t&&((o=t.relatedFeatures)==null||o.forEach(u=>_H({attributes:e,graphic:u,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s,timeZone:n})),(a=t.relatedStatsFeatures)==null||a.forEach(u=>_H({attributes:e,graphic:u,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s,timeZone:n})))}const SH=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},uue=({layer:e,method:t,query:i,definitionExpression:r})=>{var o,a;if(!((a=(o=e.capabilities)==null?void 0:o.query)!=null&&a.supportsCacheHint)||t==="attachments")return;const s=i.where!=null?i.where:null,n=i.geometry!=null?i.geometry:null;SH(r)||SH(s)||(n==null?void 0:n.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},cue=({query:e,layer:t,method:i})=>{uue({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??""}`})},due=({queryPayload:e,layer:t,method:i})=>{uue({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??""}`})};function hue(e,t,i){var r,s;return e&&t&&i?t.type==="sublayer"?fg({layers:(r=t.layer)==null?void 0:r.sublayers,map:e,relatedLayer:t,relationship:i})||fg({layers:(s=t.layer)==null?void 0:s.subtables,map:e,relatedLayer:t,relationship:i}):fg({layers:e.allLayers,map:e,relatedLayer:t,relationship:i})||fg({layers:e.allTables,map:e,relatedLayer:t,relationship:i}):null}function pue(e,t){var i;return e&&"utilityNetworks"in e&&t?(i=e.utilityNetworks)==null?void 0:i.find(r=>r.isUtilityLayer(t)):null}function TH(e,t){return e==null?void 0:e.allTables.find(i=>{var r;return i.type==="feature"&&i.layerId===t.id&&i.url===((r=t.layer)==null?void 0:r.url)})}function fg({map:e,relationship:t,relationship:{relatedTableId:i},relatedLayer:r,layers:s}){var n;if(!s)return null;for(const o of s){if(o.type==="map-image"){const u=fg({layers:o.sublayers,map:e,relatedLayer:r,relationship:t})||fg({layers:o.subtables,map:e,relatedLayer:r,relationship:t});if(u)return u;continue}if(!BS(o))continue;if(r.type==="sublayer"){if(o!==r&&o.id===i)return o.isTable?TH(e,o):o;continue}const a=r.type==="scene"&&r.associatedLayer?r.associatedLayer.url:r.url;if(!a)return null;if(o.type!=="sublayer"){if(o!==r&&o.url===a&&o.layerId===i)return o}else if(o!==r&&((n=o.layer)==null?void 0:n.url)===a&&o.id===i)return o.isTable?TH(e,o):o}return null}function kze(e){const t=e.getObjectId();return t!=null?`oid:${t}`:`uid:${e.uid}`}const Pze=Object.freeze(Object.defineProperty({__proto__:null,applyTextFormattingHTML:A0,createFieldInfoMap:oue,findRelatedLayer:hue,findUtilityNetwork:pue,fixTokens:iA,formatAttributes:B$,formatEditInfo:nue,formatValueToFieldInfo:sue,getAllFieldInfos:dD,getFieldInfo:EV,getFieldInfoLabel:xV,getFixedFieldName:Uv,getFixedFieldNames:Kle,getHighlightKeyForFeature:kze,getSourceLayer:SV,graphicCallback:R1,htmlEntities:eC,isAssociatedFeatureSupportedLayer:rue,isExpressionField:KI,isFeatureSupportedLayer:tue,isGraphicForRelatableFeatureSupportedLayer:Ize,isRelatableFeatureSupportedLayer:BS,isRelatableLayer:iue,isRelatedField:ul,preLayerQueryCallback:cue,preRequestCallback:due,querySourceLayer:MV,queryUpdatedFeature:lue,shouldOpenInNewTab:TV,substituteAttributes:tA,substituteFieldsInLinksAndAttributes:qd},Symbol.toStringTag,{value:"Module"})),xH={editing:!1,operations:{add:!0,update:!0,delete:!0}},fue=Q.ofType(oze);let es=class extends se{constructor(t){super(t),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.capabilities={...xH},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new fue,this.fileInfos=new Q,this.graphic=null,this.mode="view",this.orderByFields=null,this.filesEnabled=!1,this.addHandles(G(()=>this.graphic,()=>this._graphicChanged(),xe))}destroy(){this._attachmentLayer=null,this.graphic=null}castCapabilities(t){return{...xH,...t}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:t}=this;if(!t)return!1;const i=t.layer||t.sourceLayer;return(i==null?void 0:i.loaded)&&"capabilities"in i&&i.capabilities&&"attachment"in i.capabilities&&i.capabilities.attachment&&"supportsResize"in i.capabilities.attachment&&i.capabilities.attachment.supportsResize||!1}async getAttachments(){const{_attachmentLayer:t,attachmentInfos:i,orderByFields:r}=this;if(!t||typeof t.queryAttachments!="function")throw new M("invalid-layer","getAttachments(): A valid layer is required.");const s=this._getObjectId();if(typeof s!="number")throw new M("invalid-object-id","getAttachments(): Numeric object id is required");const n=r==null?void 0:r.map(h=>`${h.field} ${h.order==="descending"?"DESC":"ASC"}`),o=new PP({objectIds:[s],returnMetadata:!0,orderByFields:n}),a=[],u=t.queryAttachments(o).then(h=>h[s]||a).catch(()=>a);this._getAttachmentsPromise=u,this.notifyChange("state");const c=await u;return i.destroyAll(),c.length&&i.addMany(c),this._getAttachmentsPromise=null,this.notifyChange("state"),c}async addAttachment(t,i=this.graphic){var u;const{_attachmentLayer:r,attachmentInfos:s,capabilities:n}=this;if(!i)throw new M("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!t)throw new M("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});if(!((u=n.operations)!=null&&u.add))throw new M("invalid-capabilities","addAttachment(): add capabilities are required.");if(!r||typeof r.addAttachment!="function")throw new M("invalid-layer","addAttachment(): A valid layer is required.");const o=r.addAttachment(i,t).then(c=>this._queryAttachment(c.objectId,i)),a=await o;return s.add(a),a}async deleteAttachment(t){var u;const{_attachmentLayer:i,attachmentInfos:r,graphic:s,capabilities:n}=this;if(!t)throw new M("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!((u=n.operations)!=null&&u.delete))throw new M("invalid-capabilities","deleteAttachment(): delete capabilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new M("invalid-layer","deleteAttachment(): A valid layer is required.");if(!s)throw new M("invalid-graphic","deleteAttachment(): A graphic is required.");const o=i.deleteAttachments(s,[t.id]).then(()=>t),a=await o;return r.remove(a),a.destroy(),a}async updateAttachment(t,i=this.activeAttachmentInfo){var h;const{_attachmentLayer:r,attachmentInfos:s,graphic:n,capabilities:o}=this;if(!t)throw new M("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});if(!i)throw new M("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!((h=o.operations)!=null&&h.update))throw new M("invalid-capabilities","updateAttachment(): Update capabilities are required.");const a=s.indexOf(i);if(!r||typeof r.updateAttachment!="function")throw new M("invalid-layer","updateAttachment(): A valid layer is required.");if(!n)throw new M("invalid-graphic","updateAttachment(): A graphic is required.");const u=r.updateAttachment(n,i.id,t).then(p=>this._queryAttachment(p.objectId)),c=await u;return s.splice(a,1,c),c}async commitFiles(){return await Promise.all(this.fileInfos.items.map(t=>this.addAttachment(t.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(t,i){if(!t||!i)return null;const r={file:t,form:i};return this.fileInfos.add(r),r}updateFile(t,i,r=this.activeFileInfo){if(!t||!i||!r)return null;const s=this.fileInfos.indexOf(r);return s>-1&&this.fileInfos.splice(s,1,{file:t,form:i}),this.fileInfos.items[s]}deleteFile(t){const i=this.fileInfos.find(r=>r.file===t);return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(t,i){const{_attachmentLayer:r}=this;if(!t||!(r!=null&&r.queryAttachments))throw new M("invalid-attachment-id","Could not query attachment.");const s=this._getObjectId(i);if(typeof s!="number")throw new M("invalid-object-id","getAttachments(): Numeric object id is required");const n=new PP({objectIds:[s],attachmentsWhere:`AttachmentId=${t}`,returnMetadata:!0});return r.queryAttachments(n).then(o=>o[s][0])}_getObjectId(t=this.graphic){return(t==null?void 0:t.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>this.attachmentInfos.destroyAll()))}_setAttachmentLayer(){const{graphic:t}=this,i=SV(t);this._attachmentLayer=i?i.type==="scene"&&i.associatedLayer!=null?i.associatedLayer:i:null}};l([d()],es.prototype,"capabilities",void 0),l([ke("capabilities")],es.prototype,"castCapabilities",null),l([d()],es.prototype,"activeAttachmentInfo",void 0),l([d()],es.prototype,"activeFileInfo",void 0),l([d({readOnly:!0,type:fue})],es.prototype,"attachmentInfos",void 0),l([d()],es.prototype,"fileInfos",void 0),l([d({type:_i})],es.prototype,"graphic",void 0),l([d()],es.prototype,"mode",void 0),l([d({type:[Sre]})],es.prototype,"orderByFields",void 0),l([d({readOnly:!0})],es.prototype,"state",null),l([d()],es.prototype,"filesEnabled",void 0),l([d({readOnly:!0})],es.prototype,"supportsResizeAttachments",null),es=l([x("esri.widgets.Attachments.AttachmentsViewModel")],es);const AV=es;function $H(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function Dze(e){const t=Yt("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}const Ou={left:"esri-icon-left",plus:"esri-icon-plus",right:"esri-icon-right",table:"esri-icon-table",trash:"esri-icon-trash",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass"},EH={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},it="esri-attachments",Ee={base:it,loaderContainer:`${it}__loader-container`,loader:`${it}__loader`,container:`${it}__container`,containerList:`${it}__container--list`,containerPreview:`${it}__container--preview`,actions:`${it}__actions`,deleteButton:`${it}__delete-button`,addAttachmentButton:`${it}__add-attachment-button`,errorMessage:`${it}__error-message`,items:`${it}__items`,item:`${it}__item`,itemButton:`${it}__item-button`,itemMask:`${it}__item-mask`,itemMaskIcon:`${it}__item-mask--icon`,itemImage:`${it}__image`,itemImageResizable:`${it}__image--resizable`,itemLabel:`${it}__label`,itemFilename:`${it}__filename`,itemChevronIcon:`${it}__item-chevron-icon`,itemLink:`${it}__item-link`,itemLinkOverlay:`${it}__item-link-overlay`,itemLinkOverlayIcon:`${it}__item-link-overlay-icon`,itemAddIcon:`${it}__item-add-icon`,formNode:`${it}__form-node`,fileFieldset:`${it}__file-fieldset`,fileLabel:`${it}__file-label`,fileName:`${it}__file-name`,fileInput:`${it}__file-input`,metadata:`${it}__metadata`,metadataFieldset:`${it}__metadata-fieldset`,progressBar:`${it}__progress-bar`},jO=window.CSS;let yr=class extends cr{constructor(t,i){super(t,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...EH},this._supportsImageOrientation=jO&&jO.supports&&jO.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}normalizeCtorArgs(t){return t!=null&&t.viewModel||(t={viewModel:new AV,...t}),t}initialize(){this.addHandles([Hs(()=>{var t;return(t=this.viewModel)==null?void 0:t.attachmentInfos},"change",()=>this.scheduleRender()),Hs(()=>{var t;return(t=this.viewModel)==null?void 0:t.fileInfos},"change",()=>this.scheduleRender()),G(()=>{var t;return(t=this.viewModel)==null?void 0:t.mode},()=>this._modeChanged(),xe)])}loadDependencies(){return Ta({icon:()=>L(()=>import("./index-BfdRwHIr.js").then(t=>t.i),__vite__mapDeps([233,234,235]))})}get capabilities(){return this.viewModel.capabilities}set capabilities(t){this.viewModel.capabilities=t}get effectiveDisplayType(){const{displayType:t}=this;return t&&t!=="auto"?t:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get icon(){return"attachment"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}castVisibleElements(t){return{...EH,...t}}addAttachment(){const{_addAttachmentForm:t,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(t).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new M("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(t){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(t).then(r=>(this._set("submitting",!1),this._set("error",null),i.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new M("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:t}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(i).then(r=>(this._set("submitting",!1),this._set("error",null),t.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new M("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}addFile(){const t=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",t}updateFile(){const{viewModel:t}=this,i=t.updateFile(this.selectedFile,this._updateAttachmentForm,t.activeFileInfo);return t.mode="view",i}deleteFile(t){var r;const i=this.viewModel.deleteFile(t||((r=this.viewModel.activeFileInfo)==null?void 0:r.file));return this.viewModel.mode="view",i}render(){const{submitting:t,viewModel:i}=this,{state:r}=i;return N("div",{class:this.classes(Ee.base,Te.widget)},t?this._renderProgressBar():null,r==="loading"?this._renderLoading():this._renderAttachments(),this._renderErrorMessage())}_renderErrorMessage(){const{error:t,visibleElements:i}=this;return t&&i.errorMessage?N("div",{class:Ee.errorMessage,key:"error-message"},t.message):null}_renderAttachments(){const{activeFileInfo:t,mode:i,activeAttachmentInfo:r}=this.viewModel;return i==="add"?this._renderAddForm():i==="edit"?this._renderDetailsForm(r||t):this._renderAttachmentContainer()}_renderLoading(){return N("div",{class:Ee.loaderContainer,key:"loader"},N("div",{class:Ee.loader}))}_renderProgressBar(){return this.visibleElements.progressBar?N("div",{class:Ee.progressBar,key:"progress-bar"}):null}_renderAddForm(){const{submitting:t,selectedFile:i}=this,r=t||!i,s=this.visibleElements.cancelAddButton?N("button",{bind:this,class:this.classes(Te.button,Te.buttonTertiary,Te.buttonSmall,Te.buttonHalf,t&&Te.buttonDisabled),disabled:t,onclick:this._cancelForm,type:"button"},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?N("button",{class:this.classes(Te.button,Te.buttonSecondary,Te.buttonSmall,Te.buttonHalf,{[Te.buttonDisabled]:r}),disabled:r,type:"submit"},this.messages.add):null,o=i?N("span",{class:Ee.fileName,key:"file-name"},i.name):null,a=N("form",{afterCreate:n9,afterRemoved:s9,bind:this,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},N("fieldset",{class:Ee.fileFieldset},o,N("label",{class:this.classes(Ee.fileLabel,Te.button,Te.buttonSecondary)},i?this.messages.changeFile:this.messages.selectFile,N("input",{bind:this,class:Ee.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))),n,s);return N("div",{class:Ee.formNode,key:"add-form-container"},a)}_renderDetailsForm(t){var T,E,A;const{visibleElements:i,viewModel:r,selectedFile:s,submitting:n}=this,{capabilities:o}=r,a=n||!s;let u,c,h,p;s?(u=s.type,c=s.name,h=s.size):t&&"file"in t?(u=t.file.type,c=t.file.name,h=t.file.size):t&&"contentType"in t&&(u=t.contentType,c=t.name,h=t.size,p=t.url);const m=o.editing&&((T=o.operations)!=null&&T.delete)&&i.deleteButton?N("button",{bind:this,class:this.classes(Te.button,Te.buttonSmall,Te.buttonTertiary,Ee.deleteButton,{[Te.buttonDisabled]:n}),disabled:n,key:"delete-button",onclick:C=>this._submitDeleteAttachment(C,t),type:"button"},this.messages.delete):void 0,y=o.editing&&((E=o.operations)!=null&&E.update)&&i.updateButton?N("button",{class:this.classes(Te.button,Te.buttonSmall,Te.buttonThird,{[Te.buttonDisabled]:a}),disabled:a,key:"update-button",type:"submit"},this.messages.update):void 0,g=this.visibleElements.cancelUpdateButton?N("button",{bind:this,class:this.classes(Te.button,Te.buttonSmall,Te.buttonTertiary,Te.buttonThird,{[Te.buttonDisabled]:n}),disabled:n,key:"cancel-button",onclick:this._cancelForm,type:"button"},this.messages.cancel):void 0,v=o.editing&&((A=o.operations)!=null&&A.update)?N("fieldset",{class:Ee.fileFieldset,key:"file"},N("span",{class:Ee.fileName,key:"file-name"},c),N("label",{class:this.classes(Ee.fileLabel,Te.button,Te.buttonSecondary)},this.messages.changeFile,N("input",{bind:this,class:Ee.fileInput,name:"attachment",onchange:this._handleFileInputChange,type:"file"}))):void 0,b=N("fieldset",{class:Ee.metadataFieldset,key:"size"},N("label",null,ize(this.messagesUnits,h??0))),w=N("fieldset",{class:Ee.metadataFieldset,key:"content-type"},N("label",null,u)),_=p!=null?N("a",{class:Ee.itemLink,href:p,rel:"noreferrer",target:"_blank"},this._renderImageMask(t,400),N("div",{class:Ee.itemLinkOverlay},N("span",{class:Ee.itemLinkOverlayIcon},N("calcite-icon",{icon:"launch"})))):this._renderImageMask(t,400),S=N("form",{afterCreate:n9,afterRemoved:s9,bind:this,"data-node-ref":"_updateAttachmentForm",onsubmit:C=>this._submitUpdateAttachment(C,t)},N("div",{class:Ee.metadata},b,w),v,N("div",{class:Ee.actions},m,g,y));return N("div",{class:Ee.formNode,key:"edit-form-container"},_,S)}_renderImageMask(t,i){return t?"file"in t?this._renderGenericImageMask(t.file.name,t.file.type):this._renderImageMaskForAttachment(t,i):null}_renderGenericImageMask(t,i){const{supportsResizeAttachments:r}=this.viewModel,s=Dze(i),n={[Ee.itemImageResizable]:r};return N("div",{class:this.classes(Ee.itemMaskIcon,Ee.itemMask),key:s},N("img",{alt:t,class:this.classes(n,Ee.itemImage),src:s,title:t}))}_renderImageMaskForAttachment(t,i){const{supportsResizeAttachments:r}=this.viewModel;if(!t)return null;const{contentType:s,name:n,url:o}=t;if(!r||!$H(s))return this._renderGenericImageMask(n,s);const a=this._getCSSTransform(t),u=a?{transform:a,"image-orientation":"none"}:{},c=`${o}${o!=null&&o.includes("?")?"&":"?"}w=${i}`,h={[Ee.itemImageResizable]:r};return N("div",{class:this.classes(Ee.itemMask),key:c},N("img",{alt:n,class:this.classes(h,Ee.itemImage),src:c,styles:u,title:n}))}_renderFile(t){const{file:i}=t;return N("li",{class:Ee.item,key:i},N("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:Ee.itemButton,key:"details-button",onclick:()=>this._startEditFile(t),title:this.messages.attachmentDetails,type:"button"},this._renderImageMask(t),N("label",{class:Ee.itemLabel},N("span",{class:Ee.itemFilename},i.name||this.messages.noTitle),N("span",{"aria-hidden":"true",class:this.classes(Ee.itemChevronIcon,al(this.container)?Ou.left:Ou.right)}))))}_renderAttachmentInfo({attachmentInfo:t,displayType:i}){const{viewModel:r,effectiveDisplayType:s}=this,{capabilities:n,supportsResizeAttachments:o}=r,{contentType:a,name:u,url:c}=t,h=this._renderImageMask(t,i==="list"?48:400),p=n.editing?N("span",{"aria-hidden":"true",class:this.classes(Ee.itemChevronIcon,al(this.container)?Ou.left:Ou.right)}):null,m=[h,s==="preview"&&o&&$H(a)?null:N("label",{class:Ee.itemLabel},N("span",{class:Ee.itemFilename},u||this.messages.noTitle),p)],y=n.editing?N("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:Ee.itemButton,"data-attachment-info-id":t.id,key:"details-button",onclick:()=>this._startEditAttachment(t),title:this.messages.attachmentDetails,type:"button"},m):N("a",{class:Ee.itemButton,href:c??void 0,key:"details-link",rel:"noreferrer",target:"_blank"},m);return N("li",{class:Ee.item,key:t},y)}_renderAttachmentContainer(){var g;const{effectiveDisplayType:t,viewModel:i,visibleElements:r}=this,{attachmentInfos:s,capabilities:n,fileInfos:o}=i,a=!!(s!=null&&s.length),u=!!(o!=null&&o.length),c={[Ee.containerList]:t!=="preview",[Ee.containerPreview]:t==="preview"},h=n.editing&&((g=n.operations)!=null&&g.add)&&r.addButton?N("button",{bind:this,class:this.classes(Te.button,Te.buttonTertiary,Ee.addAttachmentButton),onclick:()=>this._startAddAttachment(),type:"button"},N("span",{"aria-hidden":"true",class:this.classes(Ee.itemAddIcon,Ou.plus)}),this.messages.add):void 0,p=a?N("ul",{class:Ee.items,key:"attachments-list"},s.toArray().map(v=>this._renderAttachmentInfo({attachmentInfo:v,displayType:t}))):void 0,m=u?N("ul",{class:Ee.items,key:"file-list"},o.toArray().map(v=>this._renderFile(v))):void 0,y=u||a?void 0:N("div",{class:Te.empty},this.messages.noAttachments);return N("div",{class:this.classes(Ee.container,c),key:"attachments-container"},p,m,y,h)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(t){var s;const i=t.target,r=(s=i.files)==null?void 0:s.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(t,i){t.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(t){t.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(t,i){t.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(t){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=t,i.mode="edit"}_startEditFile(t){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=t,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(t){t.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(t){const{orientationInfo:i}=t;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};l([d()],yr.prototype,"capabilities",null),l([d()],yr.prototype,"displayType",void 0),l([d({readOnly:!0})],yr.prototype,"effectiveDisplayType",null),l([d()],yr.prototype,"graphic",null),l([d()],yr.prototype,"icon",null),l([d()],yr.prototype,"label",null),l([d(),Wi("esri/widgets/Attachments/t9n/Attachments")],yr.prototype,"messages",void 0),l([d(),Wi("esri/core/t9n/Units")],yr.prototype,"messagesUnits",void 0),l([d({readOnly:!0})],yr.prototype,"selectedFile",void 0),l([d({readOnly:!0})],yr.prototype,"submitting",void 0),l([d({readOnly:!0})],yr.prototype,"error",void 0),l([d({type:AV})],yr.prototype,"viewModel",void 0),l([d()],yr.prototype,"visibleElements",void 0),l([ke("visibleElements")],yr.prototype,"castVisibleElements",null),yr=l([x("esri.widgets.Attachments")],yr);const jze=yr;let Pb=class extends AV{constructor(t){super(t),this.description=null,this.title=null}};l([d()],Pb.prototype,"description",void 0),l([d()],Pb.prototype,"title",void 0),Pb=l([x("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Pb);const IV=Pb;function CV({level:e,class:t,...i},r){const s=Vze(e);return N(`h${s}`,{...i,"aria-level":String(s),class:die(Te.heading,t),role:"heading"},r)}function Vze(e){return Ws(Math.ceil(e),1,6)}const VO="esri-feature-element-info",zO={base:VO,title:`${VO}__title`,description:`${VO}__description`};let qy=class extends cr{constructor(t,i){super(t,i),this.description=null,this.headingLevel=2,this.title=null}render(){return N("div",{class:zO.base},this._renderTitle(),this._renderDescription())}_renderTitle(){const{title:t}=this;return t?N(CV,{class:zO.title,innerHTML:t,level:this.headingLevel}):null}_renderDescription(){const{description:t}=this;return t?N("div",{class:zO.description,innerHTML:t,key:"description"}):null}};l([d()],qy.prototype,"description",void 0),l([d()],qy.prototype,"headingLevel",void 0),l([d()],qy.prototype,"title",void 0),qy=l([x("esri.widgets.Feature.support.FeatureElementInfo")],qy);const HS=qy,zze={base:"esri-feature-attachments"};let Ha=class extends cr{constructor(t,i){super(t,i),this._featureElementInfo=null,this.attachmentsWidget=new jze,this.headingLevel=2,this.viewModel=new IV}initialize(){this._featureElementInfo=new HS,this.addHandles([G(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.description,(i=this.viewModel)==null?void 0:i.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),xe),G(()=>this.viewModel,t=>this.attachmentsWidget.viewModel=t,xe)])}destroy(){var t;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),(t=this._featureElementInfo)==null||t.destroy()}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get displayType(){return this.attachmentsWidget.displayType}set displayType(t){this.attachmentsWidget.displayType=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var i;const{attachmentsWidget:t}=this;return N("div",{class:zze.base},(i=this._featureElementInfo)==null?void 0:i.render(),t==null?void 0:t.render())}_setupFeatureElementInfo(){var s;const{description:t,title:i,headingLevel:r}=this;(s=this._featureElementInfo)==null||s.set({description:t,title:i,headingLevel:r})}};l([d({readOnly:!0})],Ha.prototype,"attachmentsWidget",void 0),l([d()],Ha.prototype,"description",null),l([d()],Ha.prototype,"displayType",null),l([d()],Ha.prototype,"graphic",null),l([d()],Ha.prototype,"headingLevel",void 0),l([d()],Ha.prototype,"title",null),l([d({type:IV})],Ha.prototype,"viewModel",void 0),Ha=l([x("esri.widgets.Feature.FeatureAttachments")],Ha);const Uze=Ha;let ud=class extends se{constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.addHandles(G(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},xe))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:i,destroyer:r}=this;t&&i&&(R1({type:"content",value:r,event:{graphic:i}}),this._set("created",null))}async _createContent(t){const i=this.graphic;if(!i||!t)return;const r=R1({type:"content",value:t,event:{graphic:i}});this._loadingPromise=r,this.notifyChange("state");const s=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",s))}};l([d({readOnly:!0})],ud.prototype,"created",void 0),l([d()],ud.prototype,"creator",void 0),l([d()],ud.prototype,"destroyer",void 0),l([d({type:_i})],ud.prototype,"graphic",void 0),l([d({readOnly:!0})],ud.prototype,"state",null),ud=l([x("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],ud);const rA=ud;function mue(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:qze(e);i.push(...r)}}function qze(e){return e.split(",").map(t=>t.trim())}function yue(e){return e&&typeof e.render=="function"}function Gze(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const UO="esri-feature-content",qO={base:UO,loaderContainer:`${UO}__loader-container`,loader:`${UO}__loader`};let Gy=class extends cr{constructor(t,i){super(t,i),this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(s=>{TV(s.href)&&!s.hasAttribute("target")&&s.setAttribute("target","_blank")})}}get creator(){var t;return(t=this.viewModel)==null?void 0:t.creator}set creator(t){this.viewModel&&(this.viewModel.creator=t)}get graphic(){var t;return(t=this.viewModel)==null?void 0:t.graphic}set graphic(t){this.viewModel&&(this.viewModel.graphic=t)}render(){var i;const t=(i=this.viewModel)==null?void 0:i.state;return N("div",{class:qO.base},t==="loading"?this._renderLoading():this._renderCreated())}_renderLoading(){return N("div",{class:qO.loaderContainer,key:"loader"},N("div",{class:qO.loader}))}_renderCreated(){var i;const t=(i=this.viewModel)==null?void 0:i.created;return t?t instanceof HTMLElement?N("div",{afterCreate:this._attachToNode,bind:t,key:t}):yue(t)?N("div",{key:t},!t.destroyed&&t.render()):N("div",{afterCreate:this._addTargetToAnchors,innerHTML:t,key:t}):null}_attachToNode(t){const i=this;t.appendChild(i)}};l([d()],Gy.prototype,"creator",null),l([d()],Gy.prototype,"graphic",null),l([d({type:rA})],Gy.prototype,"viewModel",void 0),Gy=l([x("esri.widgets.Feature.FeatureContent")],Gy);const H$=Gy;let fu=class extends se{constructor(t){super(t),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:t,fieldInfos:i}=this,r=[];return i==null||i.forEach(s=>{if(!(!s.hasOwnProperty("visible")||s.visible))return;const n=s.clone();n.label=xV(n,t),r.push(n)}),r}};l([d()],fu.prototype,"attributes",void 0),l([d({type:[Ore]})],fu.prototype,"expressionInfos",void 0),l([d()],fu.prototype,"description",void 0),l([d({type:[IS]})],fu.prototype,"fieldInfos",void 0),l([d({readOnly:!0})],fu.prototype,"formattedFieldInfos",null),l([d()],fu.prototype,"title",void 0),fu=l([x("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],fu);const tC=fu,Bze=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function Hze(e,t){if(typeof t!="string"||!t)return t;const i=Bze.find(u=>u.pattern.test(t));if(!i)return t;const r=t.match(i.pattern),s=r==null?void 0:r[2],n=ga(ga(i.label,{messages:e,hierPart:s}),{appName:i.appName}),o=i.target?` target="${i.target}"`:"",a=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${o} href="$1"${a}>${n}</a>`)}const H2="esri-feature-fields",W2={base:H2,fieldHeader:`${H2}__field-header`,fieldData:`${H2}__field-data`,fieldDataDate:`${H2}__field-data--date`};let Ko=class extends cr{constructor(t,i){super(t,i),this._featureElementInfo=null,this.viewModel=new tC,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new HS,this.addHandles(G(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),xe))}destroy(){var t;(t=this._featureElementInfo)==null||t.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(t){this.viewModel.expressionInfos=t}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(t){this.viewModel.fieldInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var t;return N("div",{class:W2.base},(t=this._featureElementInfo)==null?void 0:t.render(),this._renderFields())}_renderFieldInfo(t,i){var h;const{attributes:r}=this.viewModel,s=t.fieldName||"",n=t.label||s,o=r?r[s]==null?"":r[s]:"",a=!!((h=t.format)!=null&&h.dateFormat),u=typeof o=="number"&&!a?this._forceLTR(o):Hze(this.messagesURIUtils,o),c={[W2.fieldDataDate]:a};return N("tr",{key:`fields-element-info-row-${s}-${i}`},N("th",{class:W2.fieldHeader,innerHTML:n,key:`fields-element-info-row-header-${s}-${i}`}),N("td",{class:this.classes(W2.fieldData,c),innerHTML:u,key:`fields-element-info-row-data-${s}-${i}`}))}_renderFields(){const{formattedFieldInfos:t}=this.viewModel;return t!=null&&t.length?N("table",{class:Te.table,summary:this.messages.fieldsSummary},N("tbody",null,t.map((i,r)=>this._renderFieldInfo(i,r)))):null}_setupFeatureElementInfo(){var r;const{description:t,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:t,title:i})}_forceLTR(t){return`&lrm;${t}`}};l([d()],Ko.prototype,"attributes",null),l([d()],Ko.prototype,"description",null),l([d()],Ko.prototype,"expressionInfos",null),l([d()],Ko.prototype,"fieldInfos",null),l([d()],Ko.prototype,"title",null),l([d({type:tC,nonNullable:!0})],Ko.prototype,"viewModel",void 0),l([d(),Wi("esri/widgets/Feature/t9n/Feature")],Ko.prototype,"messages",void 0),l([d(),Wi("esri/widgets/support/t9n/uriUtils")],Ko.prototype,"messagesURIUtils",void 0),Ko=l([x("esri.widgets.Feature.FeatureFields")],Ko);const gue=Ko,Wze={maximumFractionDigits:20};function Zze(e){return ar(e,Wze)}function vue(e,t,i,r){if(e)if(e.type!=="CIMTextSymbol"){if(e.effects)for(const s of e.effects)MH(s,t);if(e.symbolLayers)for(const s of e.symbolLayers){switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":Jze(s,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!(r!=null&&r.preserveOutlineWidth)&&s.width&&(s.width*=t);break;case"CIMPictureFill":s.height&&(s.height*=t),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t);break;case"CIMHatchFill":vue(s.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t),s.separation&&(s.separation*=t)}if(s.effects)for(const n of s.effects)MH(n,t)}}else e.height!=null&&(e.height*=t)}function Jze(e,t,i){if(e&&(e.markerPlacement&&Yze(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size!=null?e.size*t:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||vue(r.symbol,t,!0,i)}function Yze(e,t){switch(ZI(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function MH(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const i=e.dashTemplate.map(r=>r*t);e.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function wue(e){const t=[];return hD(dle(e),t),t.length?new K(cle(t[0])):null}function hD(e,t){var s;if(!e)return;let i;i=e.type==="CIMTextSymbol"?e.symbol:e;const r=e.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const n of i.symbolLayers)if(!(n.colorLocked||r&&(ple(n)||hle(n)&&n.markerPlacement&&ZI(n.markerPlacement))))switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":n.tintColor&&AH(t,n.tintColor);break;case"CIMVectorMarker":(s=n.markerGraphics)==null||s.forEach(o=>{hD(o.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":AH(t,n.color);break;case"CIMHatchFill":hD(n.lineSymbol,t)}}}function AH(e,t){for(const i of e)if(i.join(".")===t.join("."))return;e.push(t)}function Kit(e,t,i){t instanceof K||(t=new K(t));const r=dle(e);r&&pD(r,t)}function pD(e,t,i){var n;if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const s=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked||s&&(ple(o)||hle(o)&&o.markerPlacement&&ZI(o.markerPlacement)))continue;const a=t.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=a;break;case"CIMVectorMarker":(n=o.markerGraphics)==null||n.forEach(u=>{pD(u.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":o.color=a;break;case"CIMHatchFill":pD(o.lineSymbol,t)}}}new ale(1e3);new K([128,128,128]);const Qze=new K("white");function ert(e){if(e==null||!("symbolLayers"in e)||e.symbolLayers==null)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function trt(e){var t;return((t=e.resource)==null?void 0:t.href)??""}function km(e,t){if(!e)return null;let i=null;return w0(e)?i=Xze(e):_I(e)&&(i=e.type==="cim"?wue(e):e.color?new K(e.color):null),i?F1(i,t):null}function Xze(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{var s;r.type==="object"&&((s=r.resource)!=null&&s.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new K(i):null}function F1(e,t){if(t==null||e==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new K(i)}function Kze(e,t,i){const r=e.symbolLayers;if(!r)return;const s=n=>F1(t=t??n??(i!=null?Qze:null),i);r.forEach(n=>{var o,a;if(n.type!=="object"||!((o=n.resource)!=null&&o.href)||t)if(n.type==="water")n.color=s(n.color);else{const u=n.material!=null?n.material.color:null,c=s(u);n.material==null?n.material=new Vs({color:c}):n.material.color=c,i!=null&&"outline"in n&&((a=n.outline)==null?void 0:a.color)!=null&&(n.outline.color=F1(n.outline.color,i))}})}function eUe(e,t,i){var r;(t=t??e.color)&&(e.color=F1(t,i)),i!=null&&"outline"in e&&((r=e.outline)!=null&&r.color)&&(e.outline.color=F1(e.outline.color,i))}function GO(e,t,i){e&&(t||i!=null)&&(t&&(t=new K(t)),w0(e)?Kze(e,t,i):_I(e)&&eUe(e,t,i))}async function tUe(e,t){const i=e.symbolLayers;i&&await pve(i,async r=>iUe(r,t))}async function iUe(e,t){switch(e.type){case"extrude":sUe(e,t);break;case"icon":case"line":case"text":rUe(e,t);break;case"path":oUe(e,t);break;case"object":await nUe(e,t)}}function rUe(e,t){const i=bue(t);i!=null&&(e.size=i)}function bue(e){for(const t of e)if(typeof t=="number")return t;return null}function sUe(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function nUe(e,t){const{resourceSize:i,symbolSize:r}=await aUe(e),s=_ue(t,i,r);e.width=D_(t[0],r[0],i[0],s),e.depth=D_(t[1],r[1],i[1],s),e.height=D_(t[2],r[2],i[2],s)}function oUe(e,t){const i=_ue(t,Lte,[e.width,void 0,e.height]);e.width=D_(t[0],e.width,1,i),e.height=D_(t[2],e.height,1,i)}function _ue(e,t,i){for(let r=0;r<3;r++){const s=e[r];switch(s){case"symbol-value":{const n=i[r];return n!=null?n/t[r]:1}case"proportional":break;default:if(s&&t[r])return s/t[r]}}return 1}async function aUe(e){const{computeObjectLayerResourceSize:t}=await L(()=>import("./symbolLayerUtils-BqS9W261.js"),[]),i=await t(e,10),{width:r,height:s,depth:n}=e,o=[r,n,s];let a=1;for(let u=0;u<3;u++){const c=o[u];if(c!=null){a=c/i[u];break}}for(let u=0;u<3;u++)o[u]==null&&(o[u]=i[u]*a);return{resourceSize:i,symbolSize:o}}function D_(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t??i;default:return e}}function lUe(e,t){const i=bue(t);if(i!=null)switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function uUe(e,t){if(e&&t)return w0(e)?tUe(e,t):void(_I(e)&&lUe(e,t))}function cUe(e,t,i){if(e&&t!=null)if(w0(e)){const r=e.symbolLayers;r&&r.forEach(s=>{if(s.type==="object")switch(i){case"tilt":s.tilt=(s.tilt??0)+t;break;case"roll":s.roll=(s.roll??0)+t;break;default:s.heading=(s.heading??0)+t}s.type==="icon"&&(s.angle+=t)})}else _I(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle+=t))}function irt(e){return e!=null&&e.type==="polygon-3d"&&e.symbolLayers.some(t=>t.type==="extrude")}const dUe="<",hUe=">";function pUe(e,t,i,r){let s="";return t===0?s=`${dUe} `:t===i&&(s=`${hUe} `),s+Zze(e)}const fUe=new K([64,64,64]);function mUe(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((s,n)=>i.includes(n)?pUe(s,n,r):null)}async function yUe(e,t,i){let r=!1,s=[],n=[];if(e.stops){const c=e.stops;s=c.map(h=>h.value),r=c.some(h=>!!h.label),r&&(n=c.map(h=>h.label))}const o=s[0],a=s[s.length-1];if(o==null&&a==null)return null;const u=r?null:mUe(s);return(await Promise.all(s.map(async(c,h)=>({value:c,color:e.type==="opacity"?await gUe(c,e):(await L(async()=>{const{getColor:p}=await Promise.resolve().then(()=>iV);return{getColor:p}},void 0)).getColor(e,c),label:r?n[h]:(u==null?void 0:u[h])??""})))).reverse()}async function gUe(e,t,i){const r=new K(fUe),s=(await L(async()=>{const{getOpacity:n}=await Promise.resolve().then(()=>iV);return{getOpacity:n}},void 0)).getOpacity(t,e);return s!=null&&(r.a=s),r}function vUe(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var s;return((s=r.color)==null?void 0:s.a)>0});let i=t.length-1;if(t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new k_({ratio:1,color:r.color})),i++)}return t.map((r,s)=>{var o,a;let n="";return s===0?n=((o=e.legendOptions)==null?void 0:o.minLabel)||"low":s===i&&(n=((a=e.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:r.color,label:n,ratio:r.ratio}}).reverse()}async function Ks(e,t,i){i0(e,t,()=>[]).push(...i)}async function wUe(e){var i,r;const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){for(const s of e.visualVariables)if(bUe(s)){const n=(await yUe(s)??[]).map(o=>o.color);await Ks(t,s.field||s.valueExpression,n)}}if(e.type==="heatmap"){const s=vUe(e).map(n=>n.color);await Ks(t,e.field||e.valueExpression,s)}else if(e.type==="pie-chart"){for(const s of e.attributes)await Ks(t,s.field||s.valueExpression,[s.color]);await Ks(t,"default",[(i=e==null?void 0:e.othersCategory)==null?void 0:i.color,km(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const s of e.attributes)await Ks(t,s.field||s.valueExpression,[s.color]);await Ks(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(((r=e.authoringInfo)==null?void 0:r.type)==="predominance")for(const s of e.uniqueValueInfos??[])await Ks(t,s.value.toString(),[km(s.symbol,null)]);else{const s=(e.uniqueValueInfos??[]).map(c=>km(c.symbol,null)),{field:n,field2:o,field3:a,valueExpression:u}=e;(n||u)&&await Ks(t,n||u,s),o&&await Ks(t,o,s),a&&await Ks(t,a,s)}else if(e.type==="class-breaks"){const s=e.classBreakInfos.map(a=>km(a.symbol,null)),{field:n,valueExpression:o}=e;await Ks(t,n??o,s)}else e.type==="simple"&&await Ks(t,"default",[km(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await Ks(t,"default",[km(e.defaultSymbol,null)]),t.forEach((s,n)=>{const o=IA(s.filter(Boolean),(a,u)=>JSON.stringify(a)===JSON.stringify(u));t.set(n,o)}),t}function bUe(e){return e.type==="color"}function Sue(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let s=0;s<r.length;s++)t[i][s]=Sue(r[s])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}function _Ue(e){return 32+e.length}const Tue=16;function SUe(e){if(!e)return 0;let t=FV;for(const i in e)e.hasOwnProperty(i)&&(t+=OV(e[i],!1));return t}function TUe(e){if(!e)return 0;if(typeof e[0]=="number")return RV(e);if(Array.isArray(e))return xUe(e);let t=FV;for(const i in e)e.hasOwnProperty(i)&&(t+=OV(e[i]));return t}function xUe(e){const t=e.length;if(t===0||typeof e[0]=="number")return xue(e,8);let i=$ue;for(let r=0;r<t;r++)i+=OV(e[r]);return i}function OV(e,t=!0){switch(typeof e){case"object":return t?TUe(e):FV;case"string":return _Ue(e);case"number":return Tue;case"boolean":return 4;default:return 8}}function RV(...e){return e.reduce((t,i)=>t+(i?MQ(i)?i.byteLength+$Ue:Array.isArray(i)?xue(i,Tue):0:0),0)}function xue(e,t){return $ue+e.length*t}const FV=32,$ue=16,$Ue=145;var wd;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(wd||(wd={}));const IH=4294967296,EUe=new TextDecoder("utf-8"),MUe=D("safari")||D("ios")?6:D("ff")?12:32;let fD=class W${constructor(t,i,r=0,s=t?t.byteLength:0){this._tag=0,this._dataType=wd.unknown,this._init(t,i,r,s)}_init(t,i,r,s){this._data=t,this._dataView=i,this._pos=r,this._end=s}get usedMemory(){return 64+RV(this._data)}asUnsafe(){return this}clone(){return new W$(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;if(t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return t;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*IH;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*IH;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,s){const n=this.getMessage(),o=t(n,i,r,s);return n.release(),o}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=W$.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){W$.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case wd.varint:this._decodeVarint();break;case wd.fixed64:this._skip(8);break;case wd.delimited:this._skip(this._getLength());break;case wd.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i=this._pos,r=0,s=0;if(this._end-i>=10)do{if(s=t[i++],r|=127&s,!(128&s)||(s=t[i++],r|=(127&s)<<7,!(128&s))||(s=t[i++],r|=(127&s)<<14,!(128&s))||(s=t[i++],r|=(127&s)<<21,!(128&s))||(s=t[i++],r+=268435456*(127&s),!(128&s))||(s=t[i++],r+=34359738368*(127&s),!(128&s))||(s=t[i++],r+=4398046511104*(127&s),!(128&s))||(s=t[i++],r+=562949953421312*(127&s),!(128&s))||(s=t[i++],r+=72057594037927940*(127&s),!(128&s))||(s=t[i++],r+=9223372036854776e3*(127&s),!(128&s)))break;throw new Error("Varint too long!")}while(!1);else{let n=1;for(;i!==this._end&&(s=t[i],128&s);)++i,r+=(127&s)*n,n*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*n}return this._pos=i,r}_decodeSVarint(){const t=this._data;let i,r=0,s=0;const n=1&t[this._pos];if(s=t[this._pos++],r|=127&s,!(128&s)||(s=t[this._pos++],r|=(127&s)<<7,!(128&s))||(s=t[this._pos++],r|=(127&s)<<14,!(128&s))||(s=t[this._pos++],r|=(127&s)<<21,!(128&s))||(s=t[this._pos++],r+=268435456*(127&s),!(128&s))||(s=t[this._pos++],r+=34359738368*(127&s),!(128&s))||(s=t[this._pos++],r+=4398046511104*(127&s),!(128&s)))return n?-(r+1)/2:r/2;if(i=BigInt(r),s=t[this._pos++],i+=0x2000000000000n*BigInt(127&s),!(128&s)||(s=t[this._pos++],i+=0x100000000000000n*BigInt(127&s),!(128&s))||(s=t[this._pos++],i+=0x8000000000000000n*BigInt(127&s),!(128&s)))return Number(n?-(i+1n)/2n:i/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==wd.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>MUe){const o=t.subarray(i,r);return EUe.decode(o)}let s="",n="";for(let o=i;o<r;++o){const a=t[o];128&a?n+="%"+a.toString(16):(s+=decodeURIComponent(n)+String.fromCharCode(a),n="")}return n.length&&(s+=decodeURIComponent(n)),s}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}};fD.pool=new Th(fD,void 0,e=>{e._data=null,e._dataView=null});const Gh=2;let Bg=class By{constructor(t=[],i=[]){this.lengths=t??[],this.coords=i??[]}static fromJSON(t){return new By(t.lengths,t.coords)}static fromRect(t){const[i,r,s,n]=t,o=s-i,a=n-r;return new By([5],[i,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}get usedMemory(){return 64+RV(this.lengths,this.coords)}area(){let t=0,i=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];if(s<3)continue;let n=this.coords[Gh*i],o=this.coords[Gh*i+1];for(let a=1;a<s;a+=1){const u=this.coords[Gh*(a+i)],c=this.coords[Gh*(a+i)+1];t+=-.5*(u-n)*(c+o),n=u,o=c}i+=s}return t}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let n=0;n<s;n++)t(this.coords[Gh*(n+i)],this.coords[Gh*(n+i)+1]);i+=s}}deltaDecode(){const t=this.clone(),{coords:i,lengths:r}=t;let s=0;for(const n of r){for(let o=1;o<n;o++)i[2*(s+o)]+=i[2*(s+o)-2],i[2*(s+o)+1]+=i[2*(s+o)-1];s+=n}return t}clone(t){if(this.lengths.length===0)return new By([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce((s,n)=>s+n))*Gh,r=this.coords.slice(0,i);return t?(t.set(r),new By(this.lengths,t)):new By(Array.from(this.lengths),Array.from(r))}};function NV(e,t){return e?t?4:3:t?3:2}function AUe(e,t,i,r){if(!(t!=null&&t.lengths.length))return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const s=e.coords,n=[],o=i?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:a,coords:u}=t,c=NV(i,r);let h=0;for(const p of a){const m=IUe(o,u,h,p,i,r);m&&n.push(m),h+=p*c}if(n.sort((p,m)=>{let y=p[2]-m[2];return y===0&&i&&(y=p[4]-m[4]),y}),n.length){let p=6*n[0][2];s[0]=n[0][0]/p,s[1]=n[0][1]/p,i&&(p=6*n[0][4],s[2]=p!==0?n[0][3]/p:0),(s[0]<o[0]||s[0]>o[1]||s[1]<o[2]||s[1]>o[3]||i&&(s[2]<o[4]||s[2]>o[5]))&&(s.length=0)}if(!s.length){const p=t.lengths[0]?CUe(u,0,a[0],i,r):null;if(!p)return null;s[0]=p[0],s[1]=p[1],i&&p.length>2&&(s[2]=p[2])}return e}function IUe(e,t,i,r,s,n){const o=NV(s,n);let a=i,u=i+o,c=0,h=0,p=0,m=0,y=0;for(let v=0,b=r-1;v<b;v++,a+=o,u+=o){const w=t[a],_=t[a+1],S=t[a+2],T=t[u],E=t[u+1],A=t[u+2];let C=w*E-T*_;m+=C,c+=(w+T)*C,h+=(_+E)*C,s&&(C=w*A-T*S,p+=(S+A)*C,y+=C),w<e[0]&&(e[0]=w),w>e[1]&&(e[1]=w),_<e[2]&&(e[2]=_),_>e[3]&&(e[3]=_),s&&(S<e[4]&&(e[4]=S),S>e[5]&&(e[5]=S))}if(m>0&&(m*=-1),y>0&&(y*=-1),!m)return null;const g=[c,h,.5*m];return s&&(g[3]=p,g[4]=.5*y),g}function CUe(e,t,i,r,s){const n=NV(r,s);let o=t,a=t+n,u=0,c=0,h=0,p=0;for(let m=0,y=i-1;m<y;m++,o+=n,a+=n){const g=e[o],v=e[o+1],b=e[o+2],w=e[a],_=e[a+1],S=e[a+2],T=r?RUe(g,v,b,w,_,S):OUe(g,v,w,_);if(T)if(u+=T,r){const E=NUe(g,v,b,w,_,S);c+=T*E[0],h+=T*E[1],p+=T*E[2]}else{const E=FUe(g,v,w,_);c+=T*E[0],h+=T*E[1]}}return u>0?r?[c/u,h/u,p/u]:[c/u,h/u]:i>0?r?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function OUe(e,t,i,r){const s=i-e,n=r-t;return Math.sqrt(s*s+n*n)}function RUe(e,t,i,r,s,n){const o=r-e,a=s-t,u=n-i;return Math.sqrt(o*o+a*a+u*u)}function FUe(e,t,i,r){return[e+.5*(i-e),t+.5*(r-t)]}function NUe(e,t,i,r,s,n){return[e+.5*(r-e),t+.5*(s-t),i+.5*(n-i)]}let LUe=class Z${constructor(t=null,i={},r,s,n=0){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=s,this.displayId=n}static fromJSON(t){const i=t.geometry?Bg.fromJSON(t.geometry):null,r=t.centroid?Bg.fromJSON(t.centroid):null,s=t.objectId;return new Z$(i,t.attributes,r,s)}weakClone(){const t=new Z$(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t}clone(){var r,s;const t=(r=this.geometry)==null?void 0:r.clone(),i=new Z$(t,{...this.attributes},(s=this.centroid)==null?void 0:s.clone(),this.objectId);return i.displayId=this.displayId,i}ensureCentroid(t){return this.centroid??(this.centroid=AUe(new Bg,this.geometry,t.hasZ,t.hasM)),this.centroid}get usedMemory(){var t;return 128+SUe(this.attributes)+(((t=this.geometry)==null?void 0:t.usedMemory)??0)}};function kUe(e){var t,i;return!!((i=(t=e.geometry)==null?void 0:t.coords)!=null&&i.length)}let PUe=class Eue{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new Eue;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}};const Mue=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let rrt=class{constructor(t){this._options=t,this.geometryTypes=Mue,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new PUe}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!(t!=null&&t.features)||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||ei(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=$v(this._options.sourceSpatialReference)/$v(t.spatialReference);if(i!==1)for(const r of t.features){if(!kUe(r))continue;const s=r.geometry.coords;for(let n=2;n<s.length;n+=3)s[n]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new LUe(null,{},null,0)}createSpatialReference(){return{wkid:0}}createGeometry(){return new Bg}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Bg}};const CH=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],OH=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],RH=["upperLeft","lowerLeft"];function FH(e){return e>=CH.length?null:CH[e]}function DUe(e){return e>=OH.length?null:OH[e]}function NH(e){return e>=RH.length?null:RH[e]}function LH(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function jUe(e,t,i){const s=e.asUnsafe(),n=t.createPointGeometry(i);for(;s.next();)switch(s.tag()){case 3:{const o=s.getUInt32(),a=s.pos()+o;let u=0;for(;s.pos()<a;)t.addCoordinatePoint(n,s.getSInt64(),u++);break}default:s.skip()}return n}function VUe(e,t,i){const n=e.asUnsafe(),o=t.createGeometry(i),a=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;n.next();)switch(n.tag()){case 2:{const u=n.getUInt32(),c=n.pos()+u;let h=0;for(;n.pos()<c;)t.addLength(o,n.getUInt32(),h++);break}case 3:{const u=n.getUInt32(),c=n.pos()+u;let h=0;for(t.allocateCoordinates(o);n.pos()<c;)t.addCoordinate(o,n.getSInt64(),h),h++,h===a&&(h=0);break}default:n.skip()}return o}function zUe(e){const s=e.asUnsafe(),n=new Bg;let o="esriGeometryPoint";for(;s.next();)switch(s.tag()){case 2:{const a=s.getUInt32(),u=s.pos()+a;for(;s.pos()<u;)n.lengths.push(s.getUInt32());break}case 3:{const a=s.getUInt32(),u=s.pos()+a;for(;s.pos()<u;)n.coords.push(s.getSInt64());break}case 1:o=Mue[s.getEnum()];break;default:s.skip()}return{queryGeometry:n,queryGeometryType:o}}function UUe(e){const h=e.asUnsafe();for(;h.next();)switch(h.tag()){case 1:return h.getString();case 2:return h.getFloat();case 3:return h.getDouble();case 4:return h.getSInt32();case 5:return h.getUInt32();case 6:return h.getInt64();case 7:return h.getUInt64();case 8:return h.getSInt64();case 9:return h.getBool();default:return h.skip(),null}return null}function qUe(e){const a=e.asUnsafe(),u={type:FH(0)};for(;a.next();)switch(a.tag()){case 1:u.name=a.getString();break;case 2:u.type=FH(a.getEnum());break;case 3:u.alias=a.getString();break;case 4:u.sqlType=DUe(a.getEnum());break;case 5:a.skip();break;case 6:u.defaultValue=a.getString();break;default:a.skip()}return u}function GUe(e){const r={},s=e.asUnsafe();for(;s.next();)switch(s.tag()){case 1:r.name=s.getString();break;case 2:r.isSystemMaintained=s.getBool();break;default:s.skip()}return r}function BUe(e,t,i,r){const a=t.createFeature(i);let u=0;for(;e.next();)switch(e.tag()){case 1:{const c=r[u++].name;a.attributes[c]=e.processMessage(UUe);break}case 2:a.geometry=e.processMessageWithArgs(VUe,t,i);break;case 4:a.centroid=e.processMessageWithArgs(jUe,t,i);break;default:e.skip()}return a}function HUe(e){const n=[1,1,1,1],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function WUe(e){const n=[0,0,0,0],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function ZUe(e){const s={originPosition:NH(0)},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.originPosition=NH(n.getEnum());break;case 2:s.scale=n.processMessage(HUe);break;case 3:s.translate=n.processMessage(WUe);break;default:n.skip()}return s}function JUe(e){const s={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.shapeAreaFieldName=n.getString();break;case 2:s.shapeLengthFieldName=n.getString();break;case 3:s.units=n.getString();break;default:n.skip()}return s}function YUe(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function QUe(e,t){const v=t.createFeatureResult(),b=e.asUnsafe();v.geometryType=LH(t,0);let w=!1;for(;b.next();)switch(b.tag()){case 1:v.objectIdFieldName=b.getString();break;case 3:v.globalIdFieldName=b.getString();break;case 4:v.geohashFieldName=b.getString();break;case 5:v.geometryProperties=b.processMessage(JUe);break;case 7:v.geometryType=LH(t,b.getEnum());break;case 8:v.spatialReference=b.processMessageWithArgs(YUe,t);break;case 10:v.hasZ=b.getBool();break;case 11:v.hasM=b.getBool();break;case 12:v.transform=b.processMessage(ZUe);break;case 9:v.exceededTransferLimit=b.getBool();break;case 13:t.addField(v,b.processMessage(qUe));break;case 15:w||(t.prepareFeatures(v),w=!0),t.addFeature(v,b.processMessageWithArgs(BUe,t,v,v.fields));break;case 2:v.uniqueIdField=b.processMessage(GUe);break;default:b.skip()}return t.finishFeatureResult(v),v}function XUe(e,t){const s={};let n=null;for(;e.next();)switch(e.tag()){case 4:n=e.processMessageWithArgs(zUe);break;case 1:s.featureResult=e.processMessageWithArgs(QUe,t);break;default:e.skip()}return n!=null&&s.featureResult&&t.addQueryGeometry(s,n),s}function KUe(e,t){try{const r=new fD(new Uint8Array(e),new DataView(e)),s={};for(;r.next();)r.tag()===2?s.queryResult=r.processMessageWithArgs(XUe,t):r.skip();return s}catch(i){throw new M("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function e8e(e,t){const i=KUe(e,t),r=i.queryResult.featureResult,s=i.queryResult.queryGeometry,n=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const o=r.objectIdFieldName;for(const a of r.features)a.attributes&&(a.objectId=a.attributes[o])}return r&&(r.queryGeometry=s,r.queryGeometryType=n),r}const kH="Layer does not support extent calculation.";function t8e(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function i8e(e,t){var u;const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const s=r;let n,o,a;if(i!=null&&(o=i.spatialReference,a=Tv(o),s.geometryType=l0(i),s.geometry=t8e(i,e.compactGeometryEnabled),s.inSR=a),r.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?delete s.outFields:r.outFields.includes("*")?s.outFields="*":s.outFields=r.outFields.join(","),r.outSR?(s.outSR=Tv(r.outSR),n=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(s.outSR=s.inSR,n=o),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(s.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(s.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(s.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&o!=null&&((u=e.quantizationParameters)==null?void 0:u.extent)!=null&&o.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(s.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(s.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(s.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const c=r.timeExtent,{start:h,end:p}=c;h==null&&p==null||(s.time=h===p?h:`${h??"null"},${p??"null"}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&o!=null&&n!=null&&o.equals(n)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function r8e(e,t,i,r){const s=t.timeExtent!=null&&t.timeExtent.isEmpty?{data:{features:[]}}:await WS(e,t,"json",r);return iP(t,i,s.data),s}async function nrt(e,t,i,r){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const s=await s8e(e,t,r),n=s;return n.data=e8e(s.data,i),n}function s8e(e,t,i){return WS(e,t,"pbf",i)}function ort(e,t,i){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):WS(e,t,"json",i,{returnIdsOnly:!0})}function art(e,t,i){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):WS(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}async function lrt(e,t,i){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await WS(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(kH);if(s.hasOwnProperty("count"))throw new Error(kH);return r}async function WS(e,t,i,r={},s={}){const n=typeof e=="string"?Li(e):e,o=t.geometry?[t.geometry]:[],a=await Tj(o,null,{signal:r.signal}),u=a==null?void 0:a[0];u!=null&&((t=t.clone()).geometry=u);const c=Sue({...n.query,f:i,...s,...i8e(t,s)});return Be(Pf(n.path,n8e(t,s)?"query3d":"query"),{...r,responseType:i==="pbf"?"array-buffer":"json",query:{...c,...r.query}})}function n8e(e,t){return e.formatOf3DObjects!=null&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}async function BO(e,t,i){const r=await Aue(e,t,i);return S0.fromJSON(r)}async function Aue(e,t,i){const r=MI(e),s={...i},n=xr.from(t),{data:o}=await r8e(r,n,n.sourceSpatialReference,s);return o}const o8e="esri.widgets.Feature.support.relatedFeatureUtils",PH=()=>q.getLogger(o8e),DH=new Map;function J$(e){if(!ul(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function a8e(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(s=>s.id===parseInt(e,10)&&(i=s,!0)),i}function l8e({originRelationship:e,relationships:t,layerId:i}){return t.find(({relatedTableId:r,id:s})=>`${r}`===i&&s===(e==null?void 0:e.id))??null}function u8e(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function c8e(e,t){const i=a8e(e,t);if(i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function d8e(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,s=i==null?void 0:i.value;t.relatedFeatures=s?s.features:[];const n=r==null?void 0:r.value;t.relatedStatsFeatures=n?n.features:[]}function h8e(e,t,i,r){var n;const s=new jv;return s.outFields=["*"],s.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),s.objectIds=[e.attributes[i.objectIdField]],s.gdbVersion=i.gdbVersion??null,s.historicMoment=i.historicMoment??null,((n=i.queryRelatedFeatures)==null?void 0:n.call(i,s,r))??Promise.resolve({})}function p8e(e,t,i){let r=0;const s=[];for(;r<t.length;)s.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return s.join(" OR ")}function f8e(e){return e?IA(e):void 0}function m8e(e){return e?IA(e,(t,i)=>JSON.stringify(t.toJSON())===JSON.stringify(i.toJSON())):void 0}async function y8e(e,t,i,r){const s=i.layerId.toString(),{layerInfo:n,relation:o,relatedFields:a,outStatistics:u,url:c,sourceSpatialReference:h}=t,p=f8e(a),m=m8e(u);if(!n||!o)return null;const y=l8e({originRelationship:o,relationships:n.relationships,layerId:s});if(y!=null&&y.relationshipTableId&&y.keyFieldInRelationshipTable){const v=(await h8e(e,y,i,r))[e.attributes[i.objectIdField]];if(!v)return null;const b=v.features.map(w=>w.attributes[n.objectIdField]);if(m!=null&&m.length&&n.supportsStatistics){const w=new xr;w.where=p8e(n.objectIdField,b,1e3),w.outFields=p,w.outStatistics=m,w.sourceSpatialReference=h;const _={features:Promise.resolve(v),statsFeatures:BO(c,w)};return Ku(_)}}const g=y==null?void 0:y.keyField;if(g){const v=AS(_8e(n.fields,g)),b=u8e(e.attributes,o.keyField),w=v?`${g}=${b}`:`${g}='${b}'`,_=i.historicMoment,S=i.gdbVersion,T=BO(c,new xr({where:w,outFields:p,sourceSpatialReference:h,historicMoment:_,gdbVersion:S}),r),E=m!=null&&m.length&&n.supportsStatistics?BO(c,new xr({where:w,outFields:p,outStatistics:m,sourceSpatialReference:h}),r):null,A={features:T};return E&&(A.statsFeatures=E),Ku(A)}return null}function g8e(e,t){return Be(e,{query:{f:"json"},signal:t==null?void 0:t.signal})}function v8e({relatedInfos:e,layer:t},i){const r={};return e.forEach((s,n)=>{const{relation:o}=s;if(!o){const p=new M("relation-required","A relation is required on a layer to retrieve related records.");throw PH().error(p),p}const{relatedTableId:a}=o;if(typeof a!="number"){const p=new M("A related table ID is required on a layer to retrieve related records.");throw PH().error(p),p}const u=`${t.url}/${a}`,c=DH.get(u),h=c??g8e(u);c||DH.set(u,h),r[n]=h}),U5(Ku(r),i)}function w8e({graphic:e,relatedInfos:t,layer:i},r){const s={};return t.forEach((n,o)=>{n.layerInfo&&(s[o]=y8e(e,n,i,r))}),Ku(s)}function b8e({relatedInfo:e,fieldName:t,fieldInfo:i}){var r,s;if((r=e.relatedFields)==null||r.push(t),i.statisticType){const n=new ic({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});(s=e.outStatistics)==null||s.push(n)}}function _8e(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const jH={chartAnimation:!0};let Ai=class extends se{constructor(t){super(t),this.abilities={...jH},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(t){return{...jH,...t}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(t){this._setContentElementMedia(t)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(t){const{formattedMediaInfoCount:i}=this,r=(t+i)%i;this.activeMediaInfoIndex=r}_pageContentElementMedia(t){const{activeMediaInfoIndex:i}=this,r=i+t;this._setContentElementMedia(r)}_formatMediaInfos(){const{mediaInfos:t,layer:i}=this,r=this.attributes??{},s=this.formattedAttributes??{},n=this.expressionAttributes??{},o=this.fieldInfoMap??new Map;return(t==null?void 0:t.map(a=>{const u=a==null?void 0:a.clone();return u?(u.title=qd({attributes:r,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:i,text:u.title}),u.caption=qd({attributes:r,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:i,text:u.caption}),u.altText=qd({attributes:r,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:i,text:u.altText}),u.type==="image"?u.value?(this._setImageValue({value:u.value,formattedAttributes:s,layer:i}),u.value.sourceURL?u:void 0):void 0:u.type==="pie-chart"||u.type==="line-chart"||u.type==="column-chart"||u.type==="bar-chart"?u.value?(this._setChartValue({value:u.value,chartType:u.type,attributes:r,formattedAttributes:s,layer:i,expressionAttributes:n}),u):void 0:null):null}).filter(Br))??[]}_setImageValue(t){const i=this.fieldInfoMap??new Map,{value:r,formattedAttributes:s,layer:n}=t,{linkURL:o,sourceURL:a}=r;if(a){const u=iA(a,n);r.sourceURL=tA({formattedAttributes:s,template:u,fieldInfoMap:i})}if(o){const u=iA(o,n);r.linkURL=tA({formattedAttributes:s,template:u,fieldInfoMap:i})}}_setChartValue(t){const{value:i,attributes:r,formattedAttributes:s,chartType:n,layer:o,expressionAttributes:a}=t,{popupTemplate:u,relatedInfos:c}=this,{fields:h,normalizeField:p}=i,m=o;if(i.fields=Kle(h,m),p&&(i.normalizeField=Uv(p,m)),!h.some(g=>!!(s[g]!=null||ul(g)&&(c!=null&&c.size))))return;const y=(u==null?void 0:u.fieldInfos)??[];h.forEach((g,v)=>{var _;const b=(_=i.colors)==null?void 0:_[v];if(ul(g))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:y,fieldName:g,formattedAttributes:s,chartType:n,value:i,color:b})]);const w=this._getChartOption({value:i,attributes:r,chartType:n,formattedAttributes:s,expressionAttributes:a,fieldName:g,fieldInfos:y,color:b});i.series.push(w)})}_getRelatedChartInfos(t){var g;const{fieldInfos:i,fieldName:r,formattedAttributes:s,chartType:n,value:o,color:a}=t,u=[],c=J$(r),h=c&&((g=this.relatedInfos)==null?void 0:g.get(c.layerId.toString()));if(!h)return u;const{relatedFeatures:p,relation:m}=h;if(!m||!p)return u;const{cardinality:y}=m;return p.forEach(v=>{const{attributes:b}=v;b&&Object.keys(b).forEach(w=>{w===c.fieldName&&u.push(this._getChartOption({value:o,attributes:b,formattedAttributes:s,fieldName:r,chartType:n,relatedFieldName:w,hasMultipleRelatedFeatures:(p==null?void 0:p.length)>1,fieldInfos:i,color:a}))})}),y==="one-to-many"||y==="many-to-many"?u:[u[0]]}_getTooltip({label:t,value:i,chartType:r}){return r==="pie-chart"?`${t}`:`${t}: ${i}`}_getChartOption(t){var C;const{value:i,attributes:r,formattedAttributes:s,expressionAttributes:n,fieldName:o,relatedFieldName:a,fieldInfos:u,chartType:c,hasMultipleRelatedFeatures:h,color:p}=t,m=this.layer,y=this.fieldInfoMap??new Map,{normalizeField:g,tooltipField:v}=i,b=g?ul(g)?r[J$(g).fieldName]:r[g]:null,w=KI(o)&&n&&n[o]!==void 0?n[o]:a&&r[a]!==void 0?r[a]:r[o]!==void 0?r[o]:s[o],_=new xre({fieldName:o,color:p,value:w===void 0?null:w&&b?w/b:w});if(ul(o)){const O=y.get(o.toLowerCase()),U=v&&y.get(v.toLowerCase()),V=(O==null?void 0:O.fieldName)??o,H=h&&v?J$(v).fieldName:(U==null?void 0:U.fieldName)??v,te=h&&H?r[H]:s[H]??(O==null?void 0:O.label)??(O==null?void 0:O.fieldName)??a,ye=h&&a?r[a]:s[V];return _.tooltip=this._getTooltip({label:te,value:ye,chartType:c}),_}const S=EV(u,o),T=Uv(o,m),E=v&&s[v]!==void 0?s[v]:xV(S||new IS({fieldName:T}),(C=this.popupTemplate)==null?void 0:C.expressionInfos),A=s[T];return _.tooltip=this._getTooltip({label:E,value:A,chartType:c}),_}};l([d()],Ai.prototype,"abilities",void 0),l([ke("abilities")],Ai.prototype,"castAbilities",null),l([d()],Ai.prototype,"activeMediaInfoIndex",void 0),l([d({readOnly:!0})],Ai.prototype,"activeMediaInfo",null),l([d()],Ai.prototype,"attributes",void 0),l([d()],Ai.prototype,"description",void 0),l([d()],Ai.prototype,"fieldInfoMap",void 0),l([d()],Ai.prototype,"formattedAttributes",void 0),l([d()],Ai.prototype,"expressionAttributes",void 0),l([d({readOnly:!0})],Ai.prototype,"formattedMediaInfos",null),l([d()],Ai.prototype,"isAggregate",void 0),l([d()],Ai.prototype,"layer",void 0),l([d({readOnly:!0})],Ai.prototype,"formattedMediaInfoCount",null),l([d()],Ai.prototype,"mediaInfos",void 0),l([d()],Ai.prototype,"popupTemplate",void 0),l([d()],Ai.prototype,"relatedInfos",void 0),l([d()],Ai.prototype,"title",void 0),Ai=l([x("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Ai);const nf=Ai,gs="esri-feature-media",Zr={base:gs,mediaContainer:`${gs}__container`,mediaItemContainer:`${gs}__item-container`,mediaItem:`${gs}__item`,mediaItemText:`${gs}__item-text`,mediaItemTitle:`${gs}__item-title`,mediaItemCaption:`${gs}__item-caption`,mediaNavigation:`${gs}__item-navigation`,mediaPagination:`${gs}__pagination`,mediaPaginationText:`${gs}__pagination-text`,mediaChart:`${gs}__chart`,mediaPaginationButton:`${gs}__pagination-button`,mediaPaginationIcon:`${gs}__pagination-icon`,mediaChartRendered:`${gs}__chart--rendered`},HO=15,Ec="category",hw="value",S8e="rgba(50, 50, 50, 1)",T8e=250,x8e=500,$8e=200;let ts=class extends cr{constructor(t,i){super(t,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this._chartRootMap=new WeakMap,this.viewModel=new nf,this.messages=null,this._disposeChart=r=>{var s;(s=this._chartRootMap.get(r))==null||s.dispose(),this._chartRootMap.delete(r)},this._createChart=async r=>{const{destroyed:s,viewModel:n}=this;if(s||!n||!r)return;const{createRoot:o}=await L(()=>import("./chartUtilsAm5-CNe_CkvU.js"),__vite__mapDeps([261,262,263,264])),a=await o(r);this._chartRootMap.set(r,a),this._renderChart({mediaInfo:n.activeMediaInfo,root:a})}}initialize(){this._featureElementInfo=new HS,this.addHandles([G(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.activeMediaInfo,(i=this.viewModel)==null?void 0:i.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),xe),G(()=>{var t,i;return[(t=this.viewModel)==null?void 0:t.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),xe)])}loadDependencies(){return Ta({icon:()=>L(()=>import("./index-BfdRwHIr.js").then(t=>t.i),__vite__mapDeps([233,234,235]))})}destroy(){var t;this._clearMediaRefreshTimer(),(t=this._featureElementInfo)==null||t.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(t){this.viewModel.activeMediaInfoIndex=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(t){this.viewModel.fieldInfoMap=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(t){this.viewModel.mediaInfos=t}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(t){this.viewModel.popupTemplate=t}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(t){this.viewModel.relatedInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var t;return N("div",{bind:this,class:Zr.base,onkeyup:this._handleMediaKeyup},(t=this._featureElementInfo)==null?void 0:t.render(),this._renderMedia())}_renderMedia(){const{formattedMediaInfoCount:t,activeMediaInfoIndex:i}=this.viewModel,r=this._renderMediaText();return t?N("div",{class:Zr.mediaContainer,key:"media-element-container"},this._renderMediaInfo(),N("div",{class:Zr.mediaNavigation},r,t>1?N("div",{class:Zr.mediaPagination},this._renderMediaPageButton("previous"),N("span",{class:Zr.mediaPaginationText},eo(this.messages.pageText,{index:i+1,total:t})),this._renderMediaPageButton("next")):null)):null}_renderMediaText(){const{activeMediaInfo:t}=this.viewModel;if(!t)return null;const i=t&&t.title?N("div",{class:Zr.mediaItemTitle,innerHTML:t.title,key:"media-title"}):null,r=t&&t.caption?N("div",{class:Zr.mediaItemCaption,innerHTML:t.caption,key:"media-caption"}):null;return i||r?N("div",{class:Zr.mediaItemText,key:"media-text"},i,r):null}_renderImageMediaInfo(t){if(!t.value)return null;const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:s}=this.viewModel,{value:n,refreshInterval:o,altText:a,title:u,type:c}=t,{sourceURL:h,linkURL:p}=n,m=TV(p??void 0)?"_blank":"_self",y=m==="_blank"?"noreferrer":"",g=o?i:null,v=g?g.timestamp:0,b=g?g.sourceURL:h,w=N("img",{alt:a||u,key:`media-${c}-${r}-${s}-${v}`,src:b??void 0});return(p?N("a",{href:p,rel:y,target:m,title:u},w):null)??w}_renderChartMediaInfo(t){const{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel;return N("div",{afterCreate:this._createChart,afterRemoved:this._disposeChart,bind:this,class:Zr.mediaChart,key:`media-${t.type}-${i}-${r}`})}_renderMediaInfoType(){const{activeMediaInfo:t}=this.viewModel;return t?t.type==="image"?this._renderImageMediaInfo(t):t.type.includes("chart")?this._renderChartMediaInfo(t):null:null}_renderMediaInfo(){const{activeMediaInfo:t}=this.viewModel;return t?N("div",{class:Zr.mediaItemContainer,key:"media-container"},N("div",{class:Zr.mediaItem,key:"media-item-container"},this._renderMediaInfoType())):null}_renderMediaPageButton(t){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=t==="previous",r=i?this.messages.previous:this.messages.next,s=i?"chevron-left":"chevron-right",n=i?"media-previous":"media-next",o=i?this._previous:this._next;return N("button",{"aria-label":r,bind:this,class:Zr.mediaPaginationButton,key:n,onclick:o,tabIndex:0,title:r,type:"button"},N("calcite-icon",{class:Zr.mediaPaginationIcon,icon:s,scale:"s"}))}_setupFeatureElementInfo(){var r;const{description:t,title:i}=this;(r=this._featureElementInfo)==null||r.set({description:t,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){if(!this.viewModel)return;const{isAggregate:t,layer:i}=this.viewModel;return t&&(i!=null&&i.featureReduction)&&"renderer"in i.featureReduction?i.featureReduction.renderer:i==null?void 0:i.renderer}async _getSeriesColors(t){const{colorAm5:i}=await L(()=>import("./chartCommon-BFzd5PHy.js"),__vite__mapDeps([265,262,266,263,267])),r=new Map;return t.forEach(s=>{s.color&&r.set(s,i(s.color.toCss(!0)))}),r}async _getRendererColors(){const{colorAm5:t}=await L(()=>import("./chartCommon-BFzd5PHy.js"),__vite__mapDeps([265,262,266,263,267])),i=new Map,r=this._getRenderer(),s="default";if(!r)return i;const n=await wUe(r);return n.delete(s),Array.from(n.values()).every(o=>(o==null?void 0:o.length)===1)&&Array.from(n.keys()).forEach(o=>{var u,c;const a=(c=(u=n.get(o))==null?void 0:u[0])==null?void 0:c.toCss(!0);a&&i.set(o,t(a))}),i}_handleMediaKeyup(t){const{key:i}=t;i==="ArrowLeft"&&(t.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(t.stopPropagation(),this.viewModel.next())}_canAnimateChart(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!gj()}_getChartAnimationMS(){return this._canAnimateChart()?T8e:0}_getChartSeriesAnimationMS(){return this._canAnimateChart()?x8e:0}async _renderChart(t){const{root:i,mediaInfo:r}=t,{value:s,type:n}=r,{ResponsiveThemeAm5:o,DarkThemeAm5:a,AnimatedThemeAm5:u,ColorSetAm5:c,ThemeAm5:h,esriChartColorSet:p}=await L(async()=>{const{ResponsiveThemeAm5:T,DarkThemeAm5:E,AnimatedThemeAm5:A,ColorSetAm5:C,ThemeAm5:O,esriChartColorSet:U}=await import("./chartCommon-BFzd5PHy.js");return{ResponsiveThemeAm5:T,DarkThemeAm5:E,AnimatedThemeAm5:A,ColorSetAm5:C,ThemeAm5:O,esriChartColorSet:U}},__vite__mapDeps([265,262,266,263,267])),m=h.new(i);m.rule("ColorSet").set("colors",p),m.rule("ColorSet").set("reuse",!0);const y=[o.new(i),m];coe()&&y.push(a.new(i)),this._canAnimateChart()&&y.push(u.new(i)),i.setThemes(y);const g=await this._getRendererColors(),v=await this._getSeriesColors(s.series),b=c.new(i,{}),w=v.get(s.series[0]),_=w?{lineSettings:{stroke:w}}:void 0,S=s.series.map((T,E)=>{const A=v.get(T)||g.get(T.fieldName)||b.getIndex(E);return{[Ec]:T.tooltip,[hw]:T.value,columnSettings:{fill:A,stroke:A},..._}}).filter(T=>n!=="pie-chart"||T.value!=null&&T.value>0);n==="pie-chart"?this._createPieChart(t,S):this._createXYChart(t,S)}_getDirection(){return al(this.container)?"rtl":"ltr"}async _customizeChartTooltip(t,i="horizontal"){var s;const{colorAm5:r}=await L(()=>import("./chartCommon-BFzd5PHy.js"),__vite__mapDeps([265,262,266,263,267]));t.setAll({pointerOrientation:i}),(s=t.get("background"))==null||s.setAll({stroke:r(S8e)}),t.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:$8e})}async _createPieChart(t,i){const{TooltipAm5:r}=await L(()=>import("./chartCommon-BFzd5PHy.js"),__vite__mapDeps([265,262,266,263,267])),{PieChartAm5:s,PieSeriesAm5:n}=await L(async()=>{const{PieChartAm5:v,PieSeriesAm5:b}=await import("./pieChart-CwbHcKbV.js");return{PieChartAm5:v,PieSeriesAm5:b}},__vite__mapDeps([268,269,262,267,264])),{mediaInfo:o,root:a}=t,{title:u}=o,c=5,h=(o==null?void 0:o.altText)||(o==null?void 0:o.title)||"",p=a.container.children.push(s.new(a,{ariaLabel:h,focusable:!0,paddingBottom:c,paddingTop:c,paddingLeft:c,paddingRight:c})),m=`{category}: {valuePercentTotal.formatNumber('0.00')}%
 ({value})`,y=r.new(a,{labelText:m}),g=p.series.push(n.new(a,{name:u,valueField:hw,categoryField:Ec,tooltip:y}));g.ticks.template.set("forceHidden",!0),g.labels.template.set("forceHidden",!0),g.slices.template.states.create("active",{shiftRadius:c}),this._customizeChartTooltip(y),g.slices.template.setAll({ariaLabel:m,focusable:!0,templateField:"columnSettings"}),g.data.setAll(i),g.appear(this._getChartSeriesAnimationMS()),p.appear(this._getChartAnimationMS()),p.root.dom.classList.toggle(Zr.mediaChartRendered,!0)}_getMinSeriesValue(t){let i=0;return t.forEach(r=>i=Math.min(r.value,i)),i}async _createColumnChart(t,i,r){const{TooltipAm5:s,ScrollbarAm5:n}=await L(()=>import("./chartCommon-BFzd5PHy.js"),__vite__mapDeps([265,262,266,263,267])),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:u,AxisRendererYAm5:c,ColumnSeriesAm5:h}=await L(async()=>{const{CategoryAxisAm5:T,AxisRendererXAm5:E,ValueAxisAm5:A,AxisRendererYAm5:C,ColumnSeriesAm5:O}=await import("./xyChart-Dman9EDQ.js");return{CategoryAxisAm5:T,AxisRendererXAm5:E,ValueAxisAm5:A,AxisRendererYAm5:C,ColumnSeriesAm5:O}},__vite__mapDeps([270,262,267,264,269,266])),{mediaInfo:p,root:m}=i,{value:y,title:g}=p;t.setAll({wheelX:"panX",wheelY:"zoomX"});const v=t.xAxes.push(o.new(m,{renderer:a.new(m,{inversed:al(this.container)}),categoryField:Ec}));v.get("renderer").labels.template.setAll({forceHidden:!0});const b=t.yAxes.push(u.new(m,{renderer:c.new(m,{inside:!1}),min:this._getMinSeriesValue(y.series)}));b.get("renderer").labels.template.setAll({direction:this._getDirection()});const w="{categoryX}",_=s.new(m,{labelText:w}),S=t.series.push(h.new(m,{name:g,xAxis:v,yAxis:b,valueYField:hw,categoryXField:Ec,tooltip:_}));this._customizeChartTooltip(_),S.columns.template.setAll({ariaLabel:w,focusable:!0,templateField:"columnSettings"}),y.series.length>HO&&t.set("scrollbarX",n.new(m,{orientation:"horizontal"})),v.data.setAll(r),S.data.setAll(r),S.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createBarChart(t,i,r){const{TooltipAm5:s,ScrollbarAm5:n}=await L(()=>import("./chartCommon-BFzd5PHy.js"),__vite__mapDeps([265,262,266,263,267])),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:u,AxisRendererYAm5:c,ColumnSeriesAm5:h}=await L(async()=>{const{CategoryAxisAm5:T,AxisRendererXAm5:E,ValueAxisAm5:A,AxisRendererYAm5:C,ColumnSeriesAm5:O}=await import("./xyChart-Dman9EDQ.js");return{CategoryAxisAm5:T,AxisRendererXAm5:E,ValueAxisAm5:A,AxisRendererYAm5:C,ColumnSeriesAm5:O}},__vite__mapDeps([270,262,267,264,269,266])),{mediaInfo:p,root:m}=i,{value:y,title:g}=p;t.setAll({wheelX:"panY",wheelY:"zoomY"});const v=t.yAxes.push(o.new(m,{renderer:c.new(m,{inversed:!0}),categoryField:Ec}));v.get("renderer").labels.template.setAll({forceHidden:!0});const b=t.xAxes.push(u.new(m,{renderer:a.new(m,{inside:!1,inversed:al(this.container)}),min:this._getMinSeriesValue(y.series)}));b.get("renderer").labels.template.setAll({direction:this._getDirection()});const w="{categoryY}",_=s.new(m,{labelText:w}),S=t.series.push(h.new(m,{name:g,xAxis:b,yAxis:v,valueXField:hw,categoryYField:Ec,tooltip:_}));this._customizeChartTooltip(_,"vertical"),S.columns.template.setAll({ariaLabel:w,focusable:!0,templateField:"columnSettings"}),y.series.length>HO&&t.set("scrollbarY",n.new(m,{orientation:"vertical"})),v.data.setAll(r),S.data.setAll(r),S.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createLineChart(t,i,r){var E,A,C;const{TooltipAm5:s,ScrollbarAm5:n}=await L(()=>import("./chartCommon-BFzd5PHy.js"),__vite__mapDeps([265,262,266,263,267])),{CategoryAxisAm5:o,AxisRendererXAm5:a,ValueAxisAm5:u,AxisRendererYAm5:c,LineSeriesAm5:h}=await L(async()=>{const{CategoryAxisAm5:O,AxisRendererXAm5:U,ValueAxisAm5:V,AxisRendererYAm5:H,LineSeriesAm5:te}=await import("./xyChart-Dman9EDQ.js");return{CategoryAxisAm5:O,AxisRendererXAm5:U,ValueAxisAm5:V,AxisRendererYAm5:H,LineSeriesAm5:te}},__vite__mapDeps([270,262,267,264,269,266])),{root:p,mediaInfo:m}=i,{value:y,title:g}=m;t.setAll({wheelX:"panX",wheelY:"zoomX"});const v=t.xAxes.push(o.new(p,{renderer:a.new(p,{inversed:al(this.container)}),categoryField:Ec}));v.get("renderer").labels.template.setAll({forceHidden:!0});const b=t.yAxes.push(u.new(p,{renderer:c.new(p,{inside:!1}),min:this._getMinSeriesValue(y.series)}));b.get("renderer").labels.template.setAll({direction:this._getDirection()});const w="{categoryX}",_=(A=(E=r[0])==null?void 0:E.lineSettings)==null?void 0:A.stroke,S=s.new(p,{getFillFromSprite:!_,labelText:w});_&&((C=S.get("background"))==null||C.setAll({fill:_}));const T=t.series.push(h.new(p,{name:g,xAxis:v,yAxis:b,valueYField:hw,categoryXField:Ec,tooltip:S}));T.strokes.template.setAll({templateField:"lineSettings"}),this._customizeChartTooltip(S,"vertical"),y.series.length>HO&&t.set("scrollbarX",n.new(p,{orientation:"horizontal"})),v.data.setAll(r),T.data.setAll(r),T.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS())}async _createXYChart(t,i){const{XYChartAm5:r,XYCursorAm5:s}=await L(()=>import("./xyChart-Dman9EDQ.js"),__vite__mapDeps([270,262,267,264,269,266])),{root:n,mediaInfo:o}=t,{type:a}=o,u=(o==null?void 0:o.altText)||(o==null?void 0:o.title)||"",c=n.container.children.push(r.new(n,{ariaLabel:u,focusable:!0,panX:!0,panY:!0}));c.set("cursor",s.new(n,{})),a==="column-chart"&&await this._createColumnChart(c,t,i),a==="bar-chart"&&await this._createBarChart(c,t,i),a==="line-chart"&&await this._createLineChart(c,t,i),c.root.dom.classList.toggle(Zr.mediaChartRendered,!0)}_clearMediaRefreshTimer(){const{_refreshTimer:t}=this;t&&(clearTimeout(t),this._refreshTimer=null)}_updateMediaInfoTimestamp(t){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:t&&this._getImageSource(t,i)}}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:t}=this.viewModel;(t==null?void 0:t.type)==="image"&&(t==null?void 0:t.refreshInterval)>0&&this._setRefreshTimeout(t)}_setRefreshTimeout(t){const{refreshInterval:i,value:r}=t,s=6e4*i;this._updateMediaInfoTimestamp(r.sourceURL);const n=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},s);this._refreshTimer=n}_getImageSource(t,i){const r=t.includes("?")?"&":"?",[s,n=""]=t.split("#");return`${s}${r}timestamp=${i}${n?"#":""}${n}`}};l([d()],ts.prototype,"_refreshIntervalInfo",void 0),l([d()],ts.prototype,"attributes",null),l([d()],ts.prototype,"activeMediaInfoIndex",null),l([d()],ts.prototype,"description",null),l([d()],ts.prototype,"fieldInfoMap",null),l([d()],ts.prototype,"layer",null),l([d()],ts.prototype,"mediaInfos",null),l([d()],ts.prototype,"popupTemplate",null),l([d()],ts.prototype,"relatedInfos",null),l([d()],ts.prototype,"title",null),l([d({type:nf})],ts.prototype,"viewModel",void 0),l([d(),Wi("esri/widgets/Feature/t9n/Feature")],ts.prototype,"messages",void 0),ts=l([x("esri.widgets.Feature.FeatureMedia")],ts);const Iue=ts;function VH(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let t="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(i)||[])switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"X":case"x":t+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}const zH="esri.core.sql.dateonly";let E8e=class cn{constructor(t,i,r){this._year=t,this._month=i,this._day=r,this.declaredRootClass=zH}static isDateOnly(t){return typeof t=="object"&&t!=null&&"declaredRootClass"in t&&t.declaredRootClass===zH}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(t){return cn.isDateOnly(t)&&t.day===this.day&&t.month===this.month&&t.year===this.year}clone(){return new cn(this._year,this._month,this._day)}toDateTime(t){return ue.fromObject({day:this.day,month:this.month,year:this.year},{zone:Ka(t)})}toDateTimeLuxon(t){return ue.fromObject({day:this.day,month:this.month,year:this.year},{zone:Ka(t)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(t=null,i=!0){if(t===null||t==="")return this.toString();if(i&&(t=VH(t)),!t)return"";const r=this.toDateTime("unknown");return tf.dateTimeToArcadeDate(r).toFormat(t,{locale:Gr(),numberingSystem:"latn"})}toArcadeDate(){const t=this.toDateTime("unknown");return tf.dateTimeToArcadeDate(t)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(t,i){return cn.fromDateTime(this.toUTCDateTime().plus({[t]:i}))}toUTCDateTime(){return ue.utc(this.year,this.month,this.day,0,0,0,0)}difference(t,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}static fromMilliseconds(t){const i=ue.fromMillis(t,{zone:Oi.utcInstance});return i.isValid?cn.fromParts(i.year,i.month,i.day):null}static fromSeconds(t){const i=ue.fromSeconds(t,{zone:Oi.utcInstance});return i.isValid?cn.fromParts(i.year,i.month,i.day):null}static fromReader(t){if(!t)return null;const i=t.split("-");return i.length!==3?null:new cn(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(t,i,r){const s=new cn(t,i,r);return s.isValid===!1?null:s}static fromDateJS(t){return cn.fromParts(t.getFullYear(),t.getMonth()+1,t.getDay())}static fromDateTime(t){return cn.fromParts(t.year,t.month,t.day)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,i=null){if(t===""||t===null)return null;const r=[];if(i)(i=VH(i))&&r.push(i);else if(i===null||i===""){const s=ue.fromISO(t,{setZone:!0});return s.isValid?cn.fromParts(s.year,s.month,s.day):null}for(const s of r){const n=ue.fromFormat(t,i??s);if(n.isValid)return new cn(n.year,n.month,n.day)}return null}static fromNow(t="system"){const i=ue.fromJSDate(new Date).setZone(Ka(t));return new cn(i.year,i.month,i.day)}};function drt(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new gt({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function hrt(e){if(e==null)return null;const t=e.clone();return e.cache._geVersion!==void 0&&(t.cache._geVersion=e.cache._geVersion),t}function Z2(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function UH(e){if(!e)return"";const t=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of e.match(t)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const qH="esri.core.sql.timeonly";let M8e=class Wa{constructor(t,i,r,s){this._hour=t,this._minute=i,this._second=r,this._millisecond=s,this.declaredRootClass=qH}static isTimeOnly(t){return typeof t=="object"&&t!=null&&"declaredRootClass"in t&&t.declaredRootClass===qH}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(t){return Wa.isTimeOnly(t)&&t.hour===this.hour&&t.minute===this.minute&&t.second===this.second&&t.millisecond===this.millisecond}clone(){return new Wa(this.hour,this.minute,this.second,this.millisecond)}isValid(){return Z2(this.hour)&&Z2(this.minute)&&Z2(this.second)&&Z2(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(t=null){return t===null||t===""?this.toString():(t=UH(t))?ue.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(t,{locale:Gr(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(t,i,r,s){const n=new Wa(t,i,r,s);return n.isValid()?n:null}static fromReader(t){if(!t)return null;const i=t.split(":");return i.length!==3?null:new Wa(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(t){if(t>864e5||t<0)return null;const i=Math.floor(t/1e3%60),r=Math.floor(t/6e4%60),s=Math.floor(t/36e5%24),n=Math.floor(t%1e3);return new Wa(s,r,i,n)}static fromDateJS(t){return new Wa(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}static fromDateTime(t){return new Wa(t.hour,t.minute,t.second,t.millisecond)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,i=null){if(t===""||t===null)return null;const r=[];i?(i=UH(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const s of r){const n=ue.fromFormat(t,s);if(n.isValid)return new Wa(n.hour,n.minute,n.second,n.millisecond)}return null}plus(t,i){switch(t){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return Wa.fromDateTime(this.toUTCDateTime().plus({[t]:i}))}return null}toUTCDateTime(){return ue.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(t,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}};var GH,BH;function prt(e){return DS.fromJSON(e.toJSON())}function frt(e){return e.toJSON?e.toJSON():e}function mrt(e){return e instanceof Date}function yrt(e){return e instanceof ue}function grt(e){return e instanceof tf}function vrt(e){return e instanceof E8e}function wrt(e){return e instanceof M8e}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(GH||(GH={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(BH||(BH={}));const brt=1e3,_rt={point:"point"},Srt={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},Trt={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function xrt(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function $rt(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(s=t.cmp,function(o){return function(a,u){const c={key:a,value:o[a]},h={key:u,value:o[u]};return s(c,h)}});var s;const n=[];return function o(a){if(a!=null&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let u,c;if(Array.isArray(a)){for(c="[",u=0;u<a.length;u++)u&&(c+=","),c+=o(a[u])||"null";return c+"]"}if(a===null)return"null";if(n.includes(a)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=n.push(a)-1,p=Object.keys(a).sort(r==null?void 0:r(a));for(c="",u=0;u<p.length;u++){const m=p[u],y=o(a[m]);y&&(c&&(c+=","),c+=JSON.stringify(m)+":"+y)}return n.splice(h,1),"{"+c+"}"}(e)}function A8e(e){switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"knowledge-graph-sublayer":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}function I8e(e){switch(e.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return A8e(e)}}const C8e="esri.widgets.Feature.support.arcadeFeatureUtils",WO=()=>q.getLogger(C8e);function O8e(e){return typeof e=="string"?A0(eC(e)):Array.isArray(e)?R8e(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?F8e(e):e}function R8e(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?A0(eC(t)):t}</li>`).join("")}</ul>`}function F8e(e){const t=e.keys().map(i=>{const r=e.field(i);return`<tr><th>${i}</th><td>${typeof r=="string"?A0(eC(r)):r}</td></tr>`}).join("");return`<table class="${Te.table}">${t}</table>`}async function Cue(){const[e,t]=await Promise.all([L(()=>import("./arcade-Dg4pDIel.js"),__vite__mapDeps([271,147])),L(()=>import("./arcade-CduS4V6m.js").then(i=>i.aw),__vite__mapDeps([145,146,147,19,9,11]))]);return{executor:e,syntaxUtils:t}}function N8e(e){return"createQuery"in e&&"queryFeatures"in e}async function L8e({graphic:e,view:t,options:i}){const{isAggregate:r,layer:s}=e;if(!r||!s||(t==null?void 0:t.type)!=="2d")return[];const n=await t.whenLayerView(s);if(!N8e(n))return[];const o=n.createQuery(),a=e.getObjectId();o.aggregateIds=a!=null?[a]:[];const{features:u}=await n.queryFeatures(o,i);return u}function k8e({layer:e,aggregatedFeatures:t,interceptor:i}){const{fields:r,objectIdField:s,geometryType:n,spatialReference:o,displayField:a}=e;return new Vv({fields:r,objectIdField:s,geometryType:n,spatialReference:o,displayField:a,interceptor:i,...e.type==="feature"?{templates:e.templates,typeIdField:e.typeIdField,types:e.types}:null,source:t})}function P8e(e){const t=e.declaredClass==="esri.views.3d.layers.VoxelGraphic";return e.isAggregate?"popup-feature-reduction":t?"popup-voxel":"popup"}function Oue(e){var t,i;return{scale:e==null?void 0:e.scale,timeProperties:{currentStart:(t=e==null?void 0:e.timeExtent)==null?void 0:t.start,currentEnd:(i=e==null?void 0:e.timeExtent)==null?void 0:i.end,startIncluded:!0,endIncluded:!0}}}function D8e(e){return{$voxel:e}}async function j8e(e,t,i,r,s){let n=null;if(s.has("$aggregatedfeatures")){const o=await L8e({graphic:e,view:t,options:i}),a=e.sourceLayer||e.layer;n=k8e({layer:a,aggregatedFeatures:o,interceptor:r})}return{vars:{$feature:e,$aggregatedFeatures:n,$view:Oue(t)},[Symbol.dispose]:()=>n==null?void 0:n[Symbol.dispose]()}}function V8e(e,t,i,r){var n;const s=(e.sourceLayer||e.layer)??void 0;return{$feature:e,$layer:s!=null&&I8e(s)?s:(s==null?void 0:s.type)==="scene"&&s.associatedLayer!=null?s.associatedLayer:void 0,$map:t,$datastore:s==null?void 0:s.url,$userInput:i,$graph:(s==null?void 0:s.type)==="knowledge-graph-sublayer"?(n=s==null?void 0:s.parentCompositeLayer)==null?void 0:n.knowledgeGraph:void 0,$view:Oue(r)}}async function z8e(e,{graphic:t,map:i,location:r,view:s,options:n,interceptor:o,arcadeExecutor:a}){switch(e){case"popup":return{vars:V8e(t,i,r,s),[Symbol.dispose](){}};case"popup-feature-reduction":{const u=new Set(a.variablesUsed);return await j8e(t,s,n,o,u)}case"popup-voxel":return{vars:D8e(t),[Symbol.dispose](){}};default:throw new Error(`Unexpected profile name ${e}`)}}async function Rue({expressionInfo:e,arcade:{executor:t,syntaxUtils:i},graphic:r}){const s=e==null?void 0:e.expression;if(!s)return null;const n=P8e(r),o=t.createArcadeProfile(n);let a;try{a=await t.createArcadeExecutor(s,o)}catch(c){return WO().error("arcade-executor-error",{error:c,expressionInfo:e}),null}const u=new Set;return a.variablesUsed.includes("$view")&&(i.scriptUsesViewProperties(a.syntaxTree,["scale"])&&u.add("view-scale"),i.scriptUsesViewProperties(a.syntaxTree,["timeProperties"])&&u.add("view-time-extent")),{dependencies:u,async evaluate({graphic:c,interceptor:h,location:p,map:m,options:y,spatialReference:g,view:v}){const b=await z8e(n,{graphic:c,map:m,location:p,view:v,options:y,interceptor:h,arcadeExecutor:a}),w={abortSignal:(y==null?void 0:y.signal)??void 0,interceptor:h??void 0,rawOutput:!0,spatialReference:g??void 0,timeZone:v==null?void 0:v.timeZone,console(..._){WO().info(..._)}};try{return await a.executeAsync(b.vars,w)}catch(_){return void WO().error("arcade-execution-error",{error:_,graphic:c,expressionInfo:e})}finally{b[Symbol.dispose]()}}}}async function U8e(e,t){if(!(e!=null&&e.length))return{dependencies:new Set,expressions:new Map};const i=await Cue(),r=new Set,s=new Map;for(const n of e){const o=await Rue({expressionInfo:n,arcade:i,graphic:t});s.set(`expression/${n.name}`,o),o==null||o.dependencies.forEach(a=>r.add(a))}return{dependencies:r,expressions:s}}const HH=1;let is=class extends se{constructor(t){super(t),this._compileTask=null,this._evaluateTask=null,this.expressionInfo=null,this.graphic=null,this.contentElementViewModel=null,this.interceptor=null,this.location=null,this.view=null,this._createVM=()=>{var s,n;const i=(s=this.contentElement)==null?void 0:s.type;(n=this.contentElementViewModel)==null||n.destroy();const r=i==="fields"?new tC:i==="media"?new nf:i==="text"?new rA:null;this._set("contentElementViewModel",r)},this._compileThrottled=O1(this._startCompile,()=>this.notifyChange("state"),HH,this),this._evaluateThrottled=O1(this._startEvaluate,()=>this.notifyChange("state"),HH,this),this.addHandles([G(()=>[this.expressionInfo,this.graphic],()=>this._compileThrottled(),xe),G(()=>[this.contentElement],()=>this._createVM(),xe),Fi(()=>{var s,n,o,a,u,c;if(!((s=this._compileTask)!=null&&s.finished))return null;const i=this._compileTask.value,r=i==null?void 0:i.dependencies;return[i,this.spatialReference,this.map,this.view,r!=null&&r.has("view-scale")?(n=this.view)==null?void 0:n.scale:null,r!=null&&r.has("view-time-extent")?(a=(o=this.view)==null?void 0:o.timeExtent)==null?void 0:a.start:null,r!=null&&r.has("view-time-extent")?(c=(u=this.view)==null?void 0:u.timeExtent)==null?void 0:c.end:null]},([i])=>this._evaluateThrottled(i))])}initialize(){this.addHandles([this._compileThrottled,this._evaluateThrottled])}destroy(){var t;this._compileTask=Pr(this._compileTask),this._evaluateTask=Pr(this._evaluateTask),(t=this.contentElementViewModel)==null||t.destroy(),this._set("contentElementViewModel",null)}get contentElement(){var t;return(t=this._evaluateTask)==null?void 0:t.value}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get state(){var r,s;const{contentElement:t,contentElementViewModel:i}=this;return this._compileThrottled.hasPendingUpdates()||this._evaluateThrottled.hasPendingUpdates()||!((r=this._compileTask)!=null&&r.finished)||!((s=this._evaluateTask)!=null&&s.finished)?"loading":t||i?"ready":"disabled"}get map(){var t;return((t=this.view)==null?void 0:t.map)??null}set map(t){this._override("map",t)}_startCompile(){this._evaluateTask=Pr(this._evaluateTask),this._compileTask=Pr(this._compileTask),this._compileTask=ec(async t=>{const{expressionInfo:i,graphic:r}=this;if(!i||!r)return null;const s=await Cue();Fe(t);const n=await Rue({expressionInfo:i,arcade:s,graphic:r});return Fe(t),n})}_startEvaluate(t){this._evaluateTask=Pr(this._evaluateTask),this._evaluateTask=ec(async i=>{const{graphic:r}=this;if(!t||!r)return null;const{interceptor:s,spatialReference:n,map:o,location:a,view:u}=this,c=await t.evaluate({graphic:r,interceptor:s,location:a,map:o,options:{signal:i},spatialReference:n,view:u});Fe(i);const h=c;if(!h||h.declaredClass!=="esri.arcade.Dictionary")return null;const p=await h.castAsJsonAsync(i);Fe(i);const m=p==null?void 0:p.type,y=m==="media"?Lv.fromJSON(p):m==="text"?Yf.fromJSON(p):m==="fields"?Jf.fromJSON(p):null;return y.type==="media"&&!y.mediaInfos||y.type==="fields"&&!y.fieldInfos||y.type==="text"&&!y.text?null:y})}};l([d()],is.prototype,"_compileTask",void 0),l([d()],is.prototype,"_evaluateTask",void 0),l([d({type:Tre})],is.prototype,"expressionInfo",void 0),l([d({type:_i})],is.prototype,"graphic",void 0),l([d({readOnly:!0})],is.prototype,"contentElement",null),l([d({readOnly:!0})],is.prototype,"contentElementViewModel",void 0),l([d()],is.prototype,"interceptor",void 0),l([d({type:Se})],is.prototype,"location",void 0),l([d()],is.prototype,"spatialReference",null),l([d({readOnly:!0})],is.prototype,"state",null),l([d()],is.prototype,"map",null),l([d()],is.prototype,"view",void 0),is=l([x("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],is);const LV=is,WH="esri-feature",ZH={base:`${WH}-expression`,loadingSpinnerContainer:`${WH}__loading-container`};let Y$=class extends cr{constructor(t,i){super(t,i),this._contentWidget=null,this.viewModel=new LV}initialize(){this.addHandles(G(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentElementViewModel},()=>this._setupExpressionWidget(),xe))}loadDependencies(){return Ta({loader:()=>L(()=>import("./index-BoqepOWk.js"),__vite__mapDeps([230,231,232]))})}destroy(){this._destroyContentWidget()}render(){var i;const{state:t}=this.viewModel;return N("div",{class:ZH.base},t==="loading"?this._renderLoading():t==="disabled"?null:(i=this._contentWidget)==null?void 0:i.render())}_renderLoading(){return N("div",{class:ZH.loadingSpinnerContainer,key:"loading-container"},N("calcite-loader",{inline:!0,label:""}))}_destroyContentWidget(){const{_contentWidget:t}=this;t&&(t.viewModel=null,t.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:t,contentElement:i}=this.viewModel,r=i==null?void 0:i.type;this._destroyContentWidget();const s=t?r==="fields"?new gue({viewModel:t}):r==="media"?new Iue({viewModel:t}):r==="text"?new H$({viewModel:t}):null:null;this._contentWidget=s,this.scheduleRender()}};l([d({type:LV})],Y$.prototype,"viewModel",void 0),Y$=l([x("esri.widgets.Feature.FeatureExpression")],Y$);const q8e=Y$;var JH,YH;(function(e){e.Text="text",e.Number="number",e.Date="date",e.Unsupported="unsupported"})(JH||(JH={})),function(e){e.CANNOT_BE_EMPTY="input-validation-error::cannot-be-empty",e.TOO_SHORT="length-validation-error::too-short",e.TOO_LONG="length-validation-error::too-long"}(YH||(YH={}));const G8e=e=>{var i;const t=[];if(e.formTemplate){const{description:r,title:s}=e.formTemplate;(i=e.fields)==null||i.forEach(n=>{const o=s&&sU(s,n.name),a=r&&sU(r,n.name);(o||a)&&t.push(n.name)})}return t},ZO=100;let Ue=class extends _e.ClonableMixin(ac.IdentifiableMixin(se)){constructor(t){super(t),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.activeCategory=null,this.allCategories=null,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await _n(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await _n(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await _n(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryDebounced=fl(this._queryController,ZO),this._queryFeatureCountDebounced=fl(this._queryFeatureCountController,ZO),this._queryPageDebounced=fl(this._queryPageController,ZO),this._query=async()=>{var s;const{_queryAbortController:i,relatedFeatures:r}=this;this.featureCount&&(((s=this.relatedLayer)==null?void 0:s.type)!=="subtype-group"||this.activeCategory)&&(this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.destroyAll(),this.destroyed||r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i==null?void 0:i.signal}))))},this.addHandles([G(()=>{var i;return[this.displayCount,this.graphic,this.layer,(i=this.layer)==null?void 0:i.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount,this.activeCategory]},()=>this._queryDebounced(),xe),G(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageDebounced()),G(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery,this.activeCategory],()=>this._queryFeatureCountDebounced())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.destroyAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(t){const{featuresPerPage:i,featureCount:r}=this,s=1,n=Math.ceil(r/i)||1;this._set("featurePage",Math.min(Math.max(t,s),n))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:t,relatedLayer:i}=this;return t&&(i!=null&&i.loaded)?t.map(r=>{const s=r.clone();return s.field=Uv(r.field,i),s}):t??[]}get supportsCacheHint(){var t,i,r;return!!((r=(i=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:i.queryRelated)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&this.relationshipId!=null&&typeof this.objectId=="number"}get canQuery(){var i,r;const t=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.queryRelated;return!!(this.relatedLayer&&this.relationship&&this.relationshipId!=null&&this.objectId!=null&&(t!=null&&t.supportsCount)&&(t!=null&&t.supportsPagination))}get allCategoriesCount(){var t;return((t=this.allCategories)==null?void 0:t.length)??0}get categories(){const{allCategories:t}=this;return this.showAllEnabled?t:(t==null?void 0:t.slice(0,this.displayCount))??null}set displayCount(t){this._set("displayCount",Math.min(Math.max(t??3,0),10))}get displayCount(){return this._get("displayCount")}get itemDescriptionFieldName(){var t;return((t=this.orderByFieldsFixedCasing[0])==null?void 0:t.field)||null}get objectId(){var t,i;return(this.objectIdField&&((i=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var t;return((t=this.layer)==null?void 0:t.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new Q}get relatedLayer(){const{layer:t,map:i,relationship:r}=this;if(!(t!=null&&t.loaded)||!i||!r)return null;const s=t.type==="subtype-sublayer"&&t.parent&&BS(t.parent)?t.parent:t;return hue(i,s,r)??null}get relatedLayerKeyField(){var r,s;const{relatedLayer:t,relationshipId:i}=this;return t!=null&&t.loaded&&i!=null?(s=(r=t.relationships)==null?void 0:r.find(n=>n.id===i))==null?void 0:s.keyField:null}get relatedLayerKeyFields(){var i;const{relatedLayer:t}=this;return t!=null&&t.loaded?((i=t.relationships)==null?void 0:i.map(r=>r.keyField).filter(Br))??[]:[]}get relationship(){var r;const{relationshipId:t,layer:i}=this;return t!=null&&(i!=null&&i.loaded)?((r=i.relationships)==null?void 0:r.find(({id:s})=>s===t))??null:null}get relationshipKey(){var i,r;const{relationshipKeyField:t}=this;return(t&&((r=(i=this.graphic)==null?void 0:i.attributes)==null?void 0:r[t]))??null}get relationshipKeyField(){var t;return((t=this.relationship)==null?void 0:t.keyField)||null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new Q}get state(){const{_queryAbortController:t,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:s,_loaded:n,canLoad:o}=this;return i||o&&!n?"loading":t||r?"querying":s?"ready":"disabled"}getRelatedFeatureByObjectId(t){return this.relatedFeatures.find(i=>i.getObjectId()===t)}refresh(){this._queryFeatureCountDebounced()}_destroyRelatedFeatureViewModels(){var t;(t=this.relatedFeatureViewModels)==null||t.destroyAll()}async _queryFeatureCount(){const{layer:t,relatedLayer:i}=this;await(t==null?void 0:t.load()),await(i==null?void 0:i.load());const{_queryFeatureCountAbortController:r,activeCategory:s,canQuery:n,objectId:o,relatedLayerKeyField:a,relationshipId:u,relationshipKey:c,supportsCacheHint:h}=this;if(!n||!t||!i||o==null)return this._set("featureCount",0),void this._set("allCategories",null);if((i==null?void 0:i.type)==="subtype-group"&&!s){if(this._set("featureCount",0),this._destroyRelatedFeatureViewModels(),this.featurePage=1,this.relatedFeatures.destroyAll(),a&&c!=null){const{default:v}=await L(()=>import("./uniqueValues-BJNsgpHu.js"),[]),{uniqueValueInfos:b}=await v({layer:i,sqlWhere:`${a} = '${c}'`,field:i.subtypeField,signal:r==null?void 0:r.signal}),w=b.map(({count:_,value:S})=>{var E,A;const T=(A=(E=i.subtypes)==null?void 0:E.find(C=>C.code===S))==null?void 0:A.name;return S!=null&&T?{count:_,value:S,name:T}:void 0}).filter(Br);this._set("allCategories",w)}return}const{historicMoment:p,gdbVersion:m}=t,y=new jv({cacheHint:h,gdbVersion:m,historicMoment:p,relationshipId:u,returnGeometry:!1,objectIds:[o],where:this._getRelationshipWhereClause(i)}),g=await t.queryRelatedFeaturesCount(y,{signal:r==null?void 0:r.signal});this._set("allCategories",null),this._set("featureCount",g[o]||0)}_getRelationshipWhereClause(t){const{activeCategory:i}=this,r=t.createQuery(),s="subtypeField"in t?t.subtypeField:void 0,n=i&&s?`${s} = ${i.value}`:void 0,o=r.where;return o&&n?`(${o}) AND (${n})`:o??n}_sliceFeatures(t){const{showAllEnabled:i,displayCount:r}=this;return i?t:r?t.slice(0,r):[]}async _queryPage(){var o;const{relatedFeatures:t,featurePage:i,showAllEnabled:r,_queryPageAbortController:s,featureCount:n}=this;!r||i<2||!n||((o=this.relatedLayer)==null?void 0:o.type)==="subtype-group"&&!this.activeCategory||t.addMany(await this._queryRelatedFeatures({signal:s==null?void 0:s.signal}))}async _queryRelatedFeatures(t){var V;const{displayCount:i,featureCount:r,featurePage:s,featuresPerPage:n,layer:o,orderByFieldsFixedCasing:a,relatedLayer:u,relatedLayerKeyFields:c,relationshipId:h,showAllEnabled:p,supportsCacheHint:m}=this,{canQuery:y,objectId:g}=this;if(!y||!o||!u||g==null)return[];const v=p?((s-1)*n+r)%r:0,b=p?n:i,w=u.objectIdField,_="subtypeField"in u?u.subtypeField:void 0,S=[...a.map(H=>H.field),...G8e(u),...c,w,_].filter(B8e),T=a.map(H=>`${H.field} ${H.order}`),{historicMoment:E,gdbVersion:A}=o,C=new jv({orderByFields:T,start:v,num:b,outFields:S,cacheHint:m,historicMoment:E,gdbVersion:A,relationshipId:h,returnGeometry:!1,objectIds:[g],where:this._getRelationshipWhereClause(u)}),O=await o.queryRelatedFeatures(C,{signal:t==null?void 0:t.signal}),U=((V=O[g])==null?void 0:V.features)||[];return u.type==="subtype-group"&&_?U.forEach(H=>{var ce;const te=H.attributes[_],ye=(ce=u.findSublayerForSubtypeCode)==null?void 0:ce.call(u,te);H.sourceLayer=ye,H.layer=ye}):U.forEach(H=>{H.sourceLayer=u,H.layer=u}),U}};function B8e(e){return e!=null&&e!==""}l([d()],Ue.prototype,"_loaded",void 0),l([d()],Ue.prototype,"_queryAbortController",void 0),l([d()],Ue.prototype,"_queryPageAbortController",void 0),l([d()],Ue.prototype,"_queryFeatureCountAbortController",void 0),l([d({value:1})],Ue.prototype,"featurePage",null),l([d()],Ue.prototype,"featuresPerPage",void 0),l([d({readOnly:!0})],Ue.prototype,"orderByFieldsFixedCasing",null),l([d({readOnly:!0})],Ue.prototype,"supportsCacheHint",null),l([d({readOnly:!0})],Ue.prototype,"canLoad",null),l([d({readOnly:!0})],Ue.prototype,"canQuery",null),l([d()],Ue.prototype,"activeCategory",void 0),l([d({readOnly:!0})],Ue.prototype,"allCategories",void 0),l([d({readOnly:!0})],Ue.prototype,"allCategoriesCount",null),l([d({readOnly:!0})],Ue.prototype,"categories",null),l([d()],Ue.prototype,"description",void 0),l([d({value:3})],Ue.prototype,"displayCount",null),l([d({type:_i})],Ue.prototype,"graphic",void 0),l([d({readOnly:!0})],Ue.prototype,"itemDescriptionFieldName",null),l([d()],Ue.prototype,"layer",void 0),l([d()],Ue.prototype,"map",void 0),l([d({readOnly:!0})],Ue.prototype,"objectId",null),l([d({readOnly:!0})],Ue.prototype,"objectIdField",null),l([d()],Ue.prototype,"orderByFields",void 0),l([d({readOnly:!0})],Ue.prototype,"relatedFeatures",null),l([d({readOnly:!0})],Ue.prototype,"relatedLayer",null),l([d({readOnly:!0})],Ue.prototype,"relatedLayerKeyField",null),l([d({readOnly:!0})],Ue.prototype,"relatedLayerKeyFields",null),l([d({readOnly:!0})],Ue.prototype,"relationship",null),l([d({readOnly:!0})],Ue.prototype,"relationshipKey",null),l([d({readOnly:!0})],Ue.prototype,"relationshipKeyField",null),l([d({readOnly:!0})],Ue.prototype,"featureCount",void 0),l([d({readOnly:!0})],Ue.prototype,"relatedFeatureViewModels",null),l([d()],Ue.prototype,"relationshipId",void 0),l([d()],Ue.prototype,"showAllEnabled",void 0),l([d()],Ue.prototype,"state",null),l([d()],Ue.prototype,"title",void 0),Ue=l([x("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],Ue);const kV=Ue;var Q$;const X$="esri-feature",pw=`${X$}-relationship`,zl={base:pw,listContainer:`${pw}__list`,listItem:`${pw}__list-item`,listItemHidden:`${pw}__list-item--hidden`,listContainerQuerying:`${pw}__list--querying`,featureObserver:`${X$}__feature-observer`,stickySpinnerContainer:`${X$}__sticky-loading-container`,loadingSpinnerContainer:`${X$}__loading-container`},QH={title:!0,description:!0};let tr=Q$=class extends cr{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([i])=>{i!=null&&i.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.flowItems=null,this.flowType="feature-relationship",this.headingLevel=2,this.viewModel=new kV,this.messages=null,this.messagesCommon=null,this.visibleElements={...QH},this._increaseFeaturePage=()=>{const{state:i,showAllEnabled:r,relatedFeatures:s,featuresPerPage:n,featurePage:o}=this.viewModel;i==="ready"&&r&&s.length>=n*o&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new HS,this.addHandles([G(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),xe),G(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),Hs(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Ta({chip:()=>L(()=>import("./index-ME-QAhQ9.js"),__vite__mapDeps([272,233,234,235,236,241,239,273,232])),icon:()=>L(()=>import("./index-BfdRwHIr.js").then(e=>e.i),__vite__mapDeps([233,234,235])),list:()=>L(()=>import("./index-0TAyCnuH.js"),__vite__mapDeps([274,230,231,232,275,236,235,234,276,233,277,278,237,238,239,273,240,241,279,280])),"list-item":()=>L(()=>import("./index-zXIHAONi.js"),__vite__mapDeps([281,233,234,235,282,236,283,279,231,239,273,241,284,285,230,232,286,276,287,288,289,280,290])),loader:()=>L(()=>import("./index-BoqepOWk.js"),__vite__mapDeps([230,231,232])),notice:()=>L(()=>import("./index-sDT6dSkA.js"),__vite__mapDeps([291,233,234,235,236,241,284,232]))})}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=St(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:i,state:r,allCategoriesCount:s}=this.viewModel;return!e&&r==="ready"&&(!!s&&(s>i||i===0)||!!t&&(t>i||i===0))}get displayListItems(){const{relatedFeatureViewModels:e,allCategoriesCount:t}=this.viewModel;return this.displayShowAllButton||!!e.length||!!t}get allItemsDescription(){const{messages:e}=this,{featureCount:t,allCategories:i,allCategoriesCount:r}=this.viewModel;return eo(e==null?void 0:e.numberRecords,{number:ar(i?r:t)})}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get title(){const{activeCategory:e,title:t}=this.viewModel;return(e==null?void 0:e.name)??t}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...QH,...e}}render(){var t;const{state:e}=this.viewModel;return N("div",{class:this.classes(zl.base,Te.widget)},(t=this._featureElementInfo)==null?void 0:t.render(),e==="loading"?this._renderLoading():e==="disabled"?this._renderRelationshipNotFound():this._renderRelatedFeatures())}async _selectCategory(e){const{flowItems:t,featureVisibleElements:i,viewModel:r}=this;t&&(r.activeCategory=e,r.showAllEnabled=!0,t.push(new Q$({flowItems:t,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:r})))}async _selectRecord(e){const{flowItems:t,featureVisibleElements:i}=this;if(!t)return;e.abilities={relationshipContent:!0};const{default:r}=await L(()=>Promise.resolve().then(()=>Y8e),void 0);t.push(new r({flowItems:t,flowType:this.flowType,viewModel:e,visibleElements:i}))}_showAllRecords(){const{flowItems:e}=this;if(!e)return;const{viewModel:t,featureVisibleElements:i}=this;t.showAllEnabled=!0;const r=new Q$({flowItems:e,featureVisibleElements:i,visibleElements:{title:!1,description:!1},viewModel:t});e.push(r)}_renderStickyLoading(){return this.viewModel.state==="querying"?N("div",{class:zl.stickySpinnerContainer,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return N("calcite-loader",{inline:!0,label:""})}_renderLoading(){return N("div",{class:zl.loadingSpinnerContainer,key:"loading-container"},this._renderLoadingIcon())}_renderShowAllIconNode(){return N("calcite-icon",{icon:"list",scale:"s",slot:"content-end"})}_renderChevronIconNode(){const e=al(this.container)?"chevron-left":"chevron-right";return N("calcite-icon",{icon:e,scale:"s",slot:"content-end"})}_renderCategory(e){const{count:t,name:i,value:r}=e,s=ar(t);return N("calcite-list-item",{class:zl.listItem,disabled:!t,key:r,label:i,onCalciteListItemSelect:()=>this._selectCategory(e)},N("calcite-chip",{label:s,scale:"s",slot:"content-end"},s),this._renderChevronIconNode())}_renderRelatedFeature(e){var s;const{itemDescriptionFieldName:t}=this.viewModel,i=e.title;e.description=t&&((s=e.formattedAttributes)==null?void 0:s.global[t]);const r=e.state==="loading";return N("calcite-list-item",{class:this.classes(zl.listItem,{[zl.listItemHidden]:r}),description:Lf(e.description??""),key:e.uid,label:Lf(i),onCalciteListItemSelect:()=>this._selectRecord(e)},this._renderChevronIconNode())}_renderShowAllListItem(){var e;return this.displayShowAllButton?N("calcite-list-item",{description:this.allItemsDescription,key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,onCalciteListItemSelect:()=>this._showAllRecords()},this._renderShowAllIconNode()):null}_renderNoRelatedFeaturesMessage(){var e;return N("calcite-notice",{icon:"information",key:"no-related-features-message",kind:"brand",open:!0,scale:"s",width:"full"},N("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}_renderFeatureObserver(){return N("div",{afterCreate:this._relatedFeatureIntersectionObserverCreated,bind:this,class:zl.featureObserver,key:"feature-observer"})}_renderList(){var i;const{relatedFeatureViewModels:e,categories:t}=this.viewModel;return N("calcite-list",{displayMode:"flat",label:(i=this.messages)==null?void 0:i.relatedFeaturesList},(t==null?void 0:t.map(r=>this._renderCategory(r)))??e.toArray().map(r=>this._renderRelatedFeature(r)),this._renderShowAllListItem())}_renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return N("div",{class:this.classes(zl.listContainer,{[zl.listContainerQuerying]:t==="querying"}),key:"list-container"},e?this._renderList():t==="ready"?this._renderNoRelatedFeaturesMessage():null,this._renderStickyLoading(),this._renderFeatureObserver())}_renderRelationshipNotFound(){var e;return N("calcite-notice",{icon:"exclamation-mark-triangle",key:"relationship-not-found",kind:"danger",open:!0,scale:"s",width:"full"},N("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e==null||e.forEach(i=>{this.addHandles(G(()=>[i.title,i.state],()=>this.scheduleRender(),xe),t)}),this.scheduleRender()}_setupFeatureElementInfo(){var s;const{headingLevel:e,visibleElements:t}=this,i=t.description&&this.description,r=t.title&&this.title;(s=this._featureElementInfo)==null||s.set({description:i,title:r,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await pS(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};l([d()],tr.prototype,"_relatedFeatureIntersectionObserverNode",void 0),l([d({readOnly:!0})],tr.prototype,"displayShowAllButton",null),l([d({readOnly:!0})],tr.prototype,"displayListItems",null),l([d({readOnly:!0})],tr.prototype,"allItemsDescription",null),l([d()],tr.prototype,"description",null),l([d()],tr.prototype,"featureVisibleElements",void 0),l([d()],tr.prototype,"flowItems",void 0),l([d()],tr.prototype,"flowType",void 0),l([d()],tr.prototype,"headingLevel",void 0),l([d()],tr.prototype,"title",null),l([d({type:kV})],tr.prototype,"viewModel",void 0),l([d(),Wi("esri/widgets/Feature/t9n/Feature")],tr.prototype,"messages",void 0),l([d(),Wi("esri/t9n/common")],tr.prototype,"messagesCommon",void 0),l([d()],tr.prototype,"visibleElements",void 0),l([ke("visibleElements")],tr.prototype,"castVisibleElements",null),tr=Q$=l([x("esri.widgets.Feature.FeatureRelationship")],tr);const H8e=tr;let Db=class extends se{constructor(t){super(t),this.title=!0,this.description=!0}};l([d({type:Boolean,nonNullable:!0})],Db.prototype,"title",void 0),l([d({type:Boolean,nonNullable:!0})],Db.prototype,"description",void 0),Db=l([x("esri.widgets.Feature.FeatureUtilityNetworkAssociations.VisibleElements")],Db);const Fue=Db,J2={assetGroup:"assetgroup",assetType:"assettype"},XH=100;let je=class extends _e.ClonableMixin(ac.IdentifiableMixin(se)){constructor(t){super(t),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.networkSourceIdsInUse=new Set,this.source="popup",this.description=null,this.graphic=null,this.layer=null,this.map=null,this.featureCount=0,this.associationTypes=null,this.showAllEnabled=!1,this.title=null,this.attachmentsFeatureCount=0,this.structureFeatureCount=0,this.contentFeatureCount=0,this.containerFeatureCount=0,this.connectivityFeatureCount=0,this._queryOpenAssociationType=async()=>{this.activeAssociationType&&await this._queryDebounced(this.activeAssociationType)},this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._queryController=async i=>{this._cancelQuery();const r=new AbortController;this._queryAbortController=r,await _n(this._query(i)),this._queryAbortController===r&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await _n(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryDebounced=fl(this._queryController,XH),this._queryFeatureCountDebounced=fl(this._queryFeatureCountController,XH)}initialize(){this.addHandles([G(()=>[this.graphic,this.layer,this.map,this.associationTypes,this.objectId,this.globalId,this.canQuery],()=>this.refresh(),xe),G(()=>this.activeAssociationType,t=>this._queryDebounced(t),xe)])}destroy(){this._cancelQuery(),this._cancelQueryFeatureCount(),this._destroyAssociatedFeatureViewModels()}get supportsCacheHint(){var t,i,r;return!!((r=(i=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:i.query)!=null&&r.supportsCacheHint)}get canLoad(){return!!this.map&&!!this.associationTypes&&typeof this.globalId=="string"}get canQuery(){var i,r;const t=(r=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:r.query;return!!this.associationTypes&&typeof this.globalId=="string"&&!!(t!=null&&t.supportsPagination)}set displayCount(t){this._set("displayCount",Math.max(t??3,0))}get displayCount(){return this._get("displayCount")}get objectId(){var t,i;return(this.objectIdField&&((i=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var t;return((t=this.layer)==null?void 0:t.objectIdField)||null}get globalId(){var t,i;return(this.globalIdField&&((i=(t=this.graphic)==null?void 0:t.attributes)==null?void 0:i[this.globalIdField]))??null}get globalIdField(){const{layer:t}=this;return t==null?void 0:t.globalIdField}get activeAssociationType(){return this._get("activeAssociationType")}set activeAssociationType(t){t&&!this.associationTypes.includes(t)||this._set("activeAssociationType",t)}get state(){const{_queryAbortController:t,_queryFeatureCountAbortController:i,_queryPageAbortController:r,canQuery:s,_loaded:n,canLoad:o,source:a}=this;return i||o&&!n?"loading":t||r?"querying":!s||a==="popup"&&this.featureCount===0?"disabled":"ready"}get utilityNetwork(){const{layer:t,map:i}=this;if(!(t!=null&&t.loaded)||!i)return null;const r=Ds(t)?t.parent:t;return pue(i,r)}get attachmentsAssociations(){return this._get("attachmentsAssociations")||new Q}get structureAssociations(){return this._get("structureAssociations")||new Q}get contentAssociations(){return this._get("contentAssociations")||new Q}get containerAssociations(){return this._get("containerAssociations")||new Q}get connectivityAssociations(){return this._get("connectivityAssociations")||new Q}get associationFeatures(){return this._get("associationFeatures")||new C_}get associationViewModels(){return this._get("associationViewModels")||new Map}async refresh(){await this._queryFeatureCountDebounced(),await this._queryOpenAssociationType()}getFeatureCountForAssociationType(t){switch(t){case"attachment":return this.attachmentsFeatureCount;case"structure":return this.structureFeatureCount;case"content":return this.contentFeatureCount;case"container":return this.containerFeatureCount;case"connectivity":return this.connectivityFeatureCount}}_destroyAssociatedFeatureViewModels(){this.associationViewModels.forEach(t=>t.destroyAll())}async _loadUtiltyNetworks(){var r;const t=this.map;if(!t)return;await Promise.allSettled(((r=t.utilityNetworks)==null?void 0:r.map(async s=>{await s.load()}))??[]);const i=this.utilityNetwork;if(i){const s=n=>{if("layerId"in n&&i.isUtilityLayer(n)){const o=i.getSourceIdByLayerId(n.layerId);o!==null&&this.networkSourceIdsInUse.add(o)}};this._set("networkSourceIdsInUse",new Set),t.allLayers.forEach(s),t.allTables.forEach(s)}}async _findLayersBySourceId(t){const{utilityNetwork:i,map:r}=this,s=c=>{const h=c;return c.url&&h.layerId===n?c.url.replace(/\/\d+$/,"")===(i==null?void 0:i.featureServiceUrl):!1};await(i==null?void 0:i.load());const n=i.getLayerIdBySourceId(t),o=r.allLayers.filter(s),a=r.allTables.filter(s),u=o.concat(a).toArray();return await Promise.allSettled(u.map(c=>c.load())),u}_clearAssociations(){this.attachmentsAssociations.removeAll(),this.structureAssociations.removeAll(),this.contentAssociations.removeAll(),this.containerAssociations.removeAll(),this.connectivityAssociations.removeAll()}_clearFeatures(){this.associationFeatures.forEach(t=>t.removeAll()),this.associationFeatures.clear()}_getAssociationsByType(t){switch(t){case"attachment":return this.attachmentsAssociations;case"structure":return this.structureAssociations;case"connectivity":return this.connectivityAssociations;case"container":return this.containerAssociations;case"content":return this.contentAssociations}}async _queryLayer(t,i,r,s,n){const o=t.fieldsIndex.get(J2.assetGroup),a=t.fieldsIndex.get(J2.assetType),u=r!=null,c=s!=null,h="("+i.map(v=>`'${v}'`).join(", ")+")",p=u?` AND ${o==null?void 0:o.name} = ${r}`:"",m=u&&c?` AND ${a==null?void 0:a.name} = ${s}`:"",y=`${t.globalIdField} IN ${h}`+p+m,g=new xr({outFields:["*"],cacheHint:this.supportsCacheHint,where:y});return await this._queryAll(g,t,{signal:n==null?void 0:n.signal})}async _createAssociationFeatureObjects(t,i,r,s,n,o){if(t.length===0)return[];const a=new Map;for(const[c,h]of i){const p=await this._findLayersBySourceId(c);for(const m of p)(await this._queryLayer(m,h,s,n,o)).forEach(y=>{if(this.source==="popup"?y.layer&&y.getEffectivePopupTemplate():y.layer){const g=a.get(y.attributes[m.globalIdField])??[];g.push(y),a.set(y.attributes[m.globalIdField],g)}})}const u=[];return await Promise.all(t.toArray().map(async c=>{const{fromNetworkElement:h,toNetworkElement:p}=c,m=h.globalId===r?p:h,y=a.get(m.globalId)??[];await Promise.all(y.map(async g=>{var b,w;const v=(w=(b=this.utilityNetwork)==null?void 0:b.getTerminalById(m==null?void 0:m.terminalId))==null?void 0:w.name;if(g.layer&&"getFeatureTitle"in g.layer){const _=await g.layer.getFeatureTitle(g);u.push({title:_,association:c,feature:g,terminalName:v})}else u.push({association:c,feature:g,terminalName:v})}))})),u}_parseFeatureObjects(t,i){t.forEach(r=>{const s=r==null?void 0:r.feature,n=s.layer,o=i.get(n)??new Q;o.add(r),i.set(n,o)})}async _queryAll(t,i,r){var a;const s=[];let n=0,o=!1;t.num=((a=i.sourceJSON)==null?void 0:a.maxRecordCount)??2e3;do{t.start=n;const u=await i.queryFeatures(t,r);s.push(...u.features),o=u.exceededTransferLimit,o&&(n+=u.features.length)}while(o);return s}async _queryAssociations(t){const{layer:i,globalId:r,associationTypes:s,utilityNetwork:n,canQuery:o}=this;if(await Promise.allSettled([i==null?void 0:i.load(),n==null?void 0:n.load()]),this._clearAssociations(),!(o&&i&&s&&n&&r))return;const a=Ds(i)?i.parent:i,u=new Vle({globalId:r,networkSourceId:n.getSourceIdByLayerId(a.layerId)}),c=new Set;s.forEach(g=>{switch(g.type){case"attachment":case"structure":c.add("attachment");break;case"container":case"content":c.add("containment");break;case"connectivity":c.add("connectivity"),c.add("junction-junction-connectivity"),c.add("junction-edge-from-connectivity"),c.add("junction-edge-midspan-connectivity"),c.add("junction-edge-to-connectivity")}});const h=await(n==null?void 0:n.queryAssociations({elements:[u],types:Array.from(c)},{signal:t==null?void 0:t.signal})),p=new Map,m=new Map;s.forEach(g=>{m.set(g.type,g),p.set(g.type,[])}),h.forEach(g=>{var w,_,S,T,E,A;const{toNetworkElement:v,fromNetworkElement:b}=g;switch(g.associationType){case"connectivity":case"junction-junction-connectivity":case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":if((b==null?void 0:b.globalId)===r){if(this._shouldDiscardNetworkElement(v,"connectivity",m))break;(w=p.get("connectivity"))==null||w.push(v.globalId)}else{if(this._shouldDiscardNetworkElement(b,"connectivity",m))break;(_=p.get("connectivity"))==null||_.push(b.globalId)}this.connectivityAssociations.add(g);break;case"containment":if((b==null?void 0:b.globalId)===r){if(this._shouldDiscardNetworkElement(v,"content",m))break;(S=p.get("content"))==null||S.push(v.globalId),this.contentAssociations.add(g)}else{if(this._shouldDiscardNetworkElement(b,"container",m))break;(T=p.get("container"))==null||T.push(b.globalId),this.containerAssociations.add(g)}break;case"attachment":if((b==null?void 0:b.globalId)===r){if(this._shouldDiscardNetworkElement(v,"attachment",m))break;(E=p.get("attachment"))==null||E.push(v.globalId),this.attachmentsAssociations.add(g)}else{if(this._shouldDiscardNetworkElement(b,"structure",m))break;(A=p.get("structure"))==null||A.push(b.globalId),this.structureAssociations.add(g)}}});const y=s.map(async g=>{const{associatedNetworkSourceId:v,associatedAssetGroup:b,associatedAssetType:w}=g,_=p.get(g.type),S=b!=null?await this._countAssociatedFeatures(v,_,b,w,t):_.length;switch(g.type){case"attachment":this._set("attachmentsFeatureCount",S);break;case"structure":this._set("structureFeatureCount",S);break;case"content":this._set("contentFeatureCount",S);break;case"container":this._set("containerFeatureCount",S);break;case"connectivity":this._set("connectivityFeatureCount",S)}});await Promise.allSettled(y)}async _countAssociatedFeatureCount(t,i,r,s,n){const o=t.fieldsIndex.get(J2.assetGroup),a=t.fieldsIndex.get(J2.assetType),u=s!=null,c="("+i.map(y=>`'${y}'`).join(", ")+")",h=` AND ${o==null?void 0:o.name} = ${r}`,p=u?` AND ${a==null?void 0:a.name} = ${s}`:"",m=`${t.globalIdField} IN ${c}`+h+p;return t.queryFeatureCount({where:m,outFields:["*"],returnGeometry:!1},{signal:n==null?void 0:n.signal})}async _countAssociatedFeatures(t,i,r,s,n){if(i.length===0)return 0;const o=(await this._findLayersBySourceId(t)).map(async a=>this._countAssociatedFeatureCount(a,i,r,s,n));return(await Promise.all(o)).reduce((a,u)=>a+u,0)}async _queryAssociatedFeatures(t,i){const{layer:r,globalId:s,associationTypes:n,utilityNetwork:o,canQuery:a,associationFeatures:u}=this;if(await Promise.allSettled([r==null?void 0:r.load(),o==null?void 0:o.load()]),!(a&&r&&n&&o))return;const c=this._getAssociationsByType(t.type),{associatedAssetGroup:h,associatedAssetType:p}=t,m=new Map;c.forEach(g=>{const{fromNetworkElement:v,toNetworkElement:b}=g,{networkSourceId:w,elementGlobalId:_}=v.globalId===s?{networkSourceId:b.networkSourceId,elementGlobalId:b.globalId}:{networkSourceId:v.networkSourceId,elementGlobalId:v.globalId},S=m.get(w)||[];S.push(_),m.set(w,S)});const y=await this._createAssociationFeatureObjects(c,m,s,h,p,i);this._parseFeatureObjects(y,u)}async _queryFeatureCount(){await this._loadUtiltyNetworks();const{_queryFeatureCountAbortController:t,canQuery:i}=this;i?(await this._queryAssociations(t),this._set("featureCount",this.attachmentsFeatureCount+this.structureFeatureCount+this.contentFeatureCount+this.containerFeatureCount+this.connectivityFeatureCount)):this._set("featureCount",0)}async _query(t){if(!t)return;await this._loadUtiltyNetworks();const{_queryAbortController:i}=this;this._destroyAssociatedFeatureViewModels(),this._clearFeatures(),this.featureCount!==0&&(this.destroyed||await this._queryAssociatedFeatures(t,{signal:i==null?void 0:i.signal}))}_shouldDiscardNetworkElement(t,i,r){var u;if(!t)return!1;const{networkSourceIdsInUse:s}=this,{networkSourceId:n}=t,o=(u=r.get(i))==null?void 0:u.associatedNetworkSourceId,a=s.has(n);return o!=null&&o!==n||!a}};l([d()],je.prototype,"_loaded",void 0),l([d()],je.prototype,"_queryAbortController",void 0),l([d()],je.prototype,"_queryPageAbortController",void 0),l([d()],je.prototype,"_queryFeatureCountAbortController",void 0),l([d({readOnly:!0})],je.prototype,"supportsCacheHint",null),l([d({readOnly:!0})],je.prototype,"canLoad",null),l([d({readOnly:!0})],je.prototype,"canQuery",null),l([d()],je.prototype,"networkSourceIdsInUse",void 0),l([d({constructOnly:!0})],je.prototype,"source",void 0),l([d()],je.prototype,"description",void 0),l([d({value:3})],je.prototype,"displayCount",null),l([d({type:_i})],je.prototype,"graphic",void 0),l([d()],je.prototype,"layer",void 0),l([d()],je.prototype,"map",void 0),l([d({readOnly:!0})],je.prototype,"objectId",null),l([d({readOnly:!0})],je.prototype,"objectIdField",null),l([d({readOnly:!0})],je.prototype,"globalId",null),l([d({readOnly:!0})],je.prototype,"globalIdField",null),l([d()],je.prototype,"featureCount",void 0),l([d()],je.prototype,"associationTypes",void 0),l([d()],je.prototype,"activeAssociationType",null),l([d()],je.prototype,"showAllEnabled",void 0),l([d()],je.prototype,"state",null),l([d()],je.prototype,"title",void 0),l([d({readOnly:!0})],je.prototype,"utilityNetwork",null),l([d({readOnly:!0})],je.prototype,"attachmentsFeatureCount",void 0),l([d({readOnly:!0})],je.prototype,"structureFeatureCount",void 0),l([d({readOnly:!0})],je.prototype,"attachmentsAssociations",null),l([d({readOnly:!0})],je.prototype,"structureAssociations",null),l([d({readOnly:!0})],je.prototype,"contentFeatureCount",void 0),l([d({readOnly:!0})],je.prototype,"containerFeatureCount",void 0),l([d({readOnly:!0})],je.prototype,"contentAssociations",null),l([d({readOnly:!0})],je.prototype,"containerAssociations",null),l([d({readOnly:!0})],je.prototype,"connectivityFeatureCount",void 0),l([d({readOnly:!0})],je.prototype,"connectivityAssociations",null),l([d({readOnly:!0})],je.prototype,"associationFeatures",null),l([d({readOnly:!0})],je.prototype,"associationViewModels",null),je=l([x("esri.widgets.support.UtilityNetworkAssociations.FeatureUtilityNetworkAssociationsViewModel")],je);const PV=je,mD="esri-feature-utility-network-associations",KH=`${mD}__loading-container`,Y2={base:mD,listContainer:`${mD}__list`,loadingContainer:KH,loadingContainerSticky:`${KH}--sticky`};let rs=class extends cr{constructor(t,i){super(t,i),this._featureElementInfo=null,this.onSelectAssociationType=()=>{},this.flowType="feature-utility-network-associations",this.flowItems=null,this.parentFeatureViewModel=null,this.headingLevel=5,this.viewModel=new PV,this.messages=null,this.messagesCommon=null,this.visibleElements=new Fue}initialize(){this._featureElementInfo=new HS,this.addHandles([G(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),xe)])}loadDependencies(){return Ta({icon:()=>L(()=>import("./index-BfdRwHIr.js").then(t=>t.i),__vite__mapDeps([233,234,235])),list:()=>L(()=>import("./index-0TAyCnuH.js"),__vite__mapDeps([274,230,231,232,275,236,235,234,276,233,277,278,237,238,239,273,240,241,279,280])),"list-item":()=>L(()=>import("./index-zXIHAONi.js"),__vite__mapDeps([281,233,234,235,282,236,283,279,231,239,273,241,284,285,230,232,286,276,287,288,289,280,290])),loader:()=>L(()=>import("./index-BoqepOWk.js"),__vite__mapDeps([230,231,232])),notice:()=>L(()=>import("./index-sDT6dSkA.js"),__vite__mapDeps([291,233,234,235,236,241,284,232]))})}destroy(){this._featureElementInfo=St(this._featureElementInfo)}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){var i;const{state:t}=this.viewModel;return N("div",{class:this.classes(Y2.base,Te.widget)},(i=this._featureElementInfo)==null?void 0:i.render(),t==="loading"?this._renderLoading():t==="disabled"?this._renderAssociationNotFound():this._renderContent())}_renderStickyLoading(){return this.viewModel.state==="querying"?N("div",{class:Y2.loadingContainerSticky,key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return N("calcite-loader",{inline:!0,label:this.messagesCommon.loading})}_renderLoading(){return N("div",{class:Y2.loadingContainer,key:"loading-container"},this._renderLoadingIcon())}_renderAssociationNotFound(){var t;return N("calcite-notice",{icon:"exclamation-mark-triangle",key:"association-not-found",kind:"danger",open:!0,scale:"s",width:"full"},N("div",{slot:"message"},(t=this.messages)==null?void 0:t.noAssociations))}_renderAssociationType(t){const{viewModel:i}=this,r=this._getAssociationTypeTitle(t);return N("calcite-list-item",{description:Lf(t.description),key:`association-type-${t.type}`,label:Lf(r),value:t.type,onCalciteListItemSelect:()=>this.onSelectAssociationType({viewModel:i,listType:t,title:r})},N("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderAssociations(t){const{viewModel:i}=this;return i.source==="featureForm"||i.getFeatureCountForAssociationType(t.type)>0?this._renderAssociationType(t):void 0}_renderContent(){const{messages:t,viewModel:i}=this,{state:r,associationTypes:s}=i;return N("div",{class:Y2.listContainer,key:"list-container"},r==="ready"?N("div",null,N("calcite-list",{displayMode:"flat",label:t==null?void 0:t.associationsList},s.map(n=>this._renderAssociations(n)))):null,this._renderStickyLoading())}_getAssociationTypeTitle(t){const{messages:i}=this;if(t.title)return t.title;switch(t.type){case"attachment":return i.associationsAttachments;case"connectivity":return i.associationsConnectivity;case"structure":return i.associationsStructure;case"content":return i.associationsContents;case"container":return i.associationsContainer}}_setupFeatureElementInfo(){var n;const{headingLevel:t,visibleElements:i}=this,r=i.description&&this.description,s=i.title&&this.title;(n=this._featureElementInfo)==null||n.set({description:r,title:s,headingLevel:t})}};l([d({constructOnly:!0})],rs.prototype,"onSelectAssociationType",void 0),l([d()],rs.prototype,"flowType",void 0),l([d()],rs.prototype,"flowItems",void 0),l([d()],rs.prototype,"parentFeatureViewModel",void 0),l([d()],rs.prototype,"featureVisibleElements",void 0),l([d()],rs.prototype,"description",null),l([d()],rs.prototype,"headingLevel",void 0),l([d()],rs.prototype,"title",null),l([d({type:PV})],rs.prototype,"viewModel",void 0),l([d(),Wi("esri/widgets/Feature/t9n/Feature")],rs.prototype,"messages",void 0),l([d(),Wi("esri/t9n/common")],rs.prototype,"messagesCommon",void 0),l([d({type:Fue,nonNullable:!0})],rs.prototype,"visibleElements",void 0),rs=l([x("esri.widgets.Feature.FeatureUtilityNetworkAssociations")],rs);const W8e=rs;let Z8e=class{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}};var Hy;const eW=1,tW="content-view-models",iW="relationship-view-models",J8e="association-view-models",rW={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0,utilityNetworkAssociationsContent:!0};let dt=Hy=class extends ac.IdentifiableMixin(se){constructor(e){super(e),this._error=null,this._graphicChangedTask=null,this._evaluateExpressionAttributesTask=null,this._associationVMAbortController=null,this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...rW},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.location=null,this.relatedInfos=new Map,this.title="",this.view=null,this._graphicChangedThrottled=O1(this._graphicChanged,()=>this.notifyChange("waitingForContent"),eW,this),this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&!!i.attachmentsContent||t.type==="custom"&&!!i.customContent||t.type==="fields"&&!!i.fieldsContent||t.type==="media"&&!!i.mediaContent||t.type==="text"&&!!i.textContent||t.type==="expression"&&!!i.expressionContent||t.type==="relationship"&&!!i.relationshipContent||t.type==="utility-network-associations"&&!!i.utilityNetworkAssociationsContent},this._evaluateExpressionAttributesThrottled=O1(this._evaluateExpressionAttributes,()=>this.notifyChange("waitingForContent"),eW,this),this.addHandles([G(()=>[this.graphic,this._effectivePopupTemplate,this.abilities,this.timeZone],()=>this._graphicChangedThrottled(),xe),Fi(()=>{var r,s,n,o,a,u,c;if(!((r=this._graphicChangedTask)!=null&&r.finished)||this._graphicChangedTask.value==null)return null;const t=this._graphicChangedTask.value,i=(s=t==null?void 0:t.expressionInfos)==null?void 0:s.dependencies;return[t,i!=null&&i.has("view-scale")?(n=this.view)==null?void 0:n.scale:null,i!=null&&i.has("view-time-extent")?(a=(o=this.view)==null?void 0:o.timeExtent)==null?void 0:a.start:null,i!=null&&i.has("view-time-extent")?(c=(u=this.view)==null?void 0:u.timeExtent)==null?void 0:c.end:null]},([t])=>this._evaluateExpressionAttributesThrottled(t))])}initialize(){this.addHandles([this._graphicChangedThrottled,this._evaluateExpressionAttributesThrottled])}destroy(){this._clear(),this._graphicChangedTask=Pr(this._graphicChangedTask),this._evaluateExpressionAttributesTask=Pr(this._evaluateExpressionAttributesTask),this._error=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return this.graphic!=null?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return oue(dD(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return SV(this.graphic)}castAbilities(e){return{...rW,...e}}get isTable(){var e;return((e=this._sourceLayer)==null?void 0:e.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",(e==null?void 0:e.clone())??null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get timeZone(){var e;return((e=this.view)==null?void 0:e.timeZone)??An}set timeZone(e){this._overrideIfSome("timeZone",e)}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){this._override("map",e)}get waitingForContent(){const{_graphicChangedThrottled:e,_evaluateExpressionAttributesThrottled:t,_graphicChangedTask:i,_evaluateExpressionAttributesTask:r,_associationVMAbortController:s}=this;return e.hasPendingUpdates()||t.hasPendingUpdates()||i!=null&&!i.finished||r!=null&&!r.finished||!!s}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof nf&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof nf&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof nf&&t.previous()}async updateGeometry(){var o;const{graphic:e,spatialReference:t,_sourceLayer:i}=this;await(i==null?void 0:i.load());const r=i==null?void 0:i.objectIdField;if(!r||!e||!i)return;const s=(o=e==null?void 0:e.attributes)==null?void 0:o[r];if(s==null)return;const n=[s];if(!e.geometry){const a=await MV({layer:i,graphic:e,outFields:[],objectIds:n,returnGeometry:!0,spatialReference:t}),u=a==null?void 0:a.geometry;u&&(e.geometry=u)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}_graphicChanged(){this._evaluateExpressionAttributesTask=Pr(this._evaluateExpressionAttributesTask),this._graphicChangedTask=Pr(this._graphicChangedTask),this._graphicChangedTask=ec(async e=>{this._error=null,this._clear();const{graphic:t}=this;try{if(!t)return null;const{_sourceLayer:i,_effectivePopupTemplate:r}=this,s=this.spatialReference;await lue({graphic:t,popupTemplate:r,layer:i,spatialReference:s},{signal:e});const[{value:n},{value:o}]=await Ku([this._getContent(),this._getTitle()]),[,{value:a}]=await Ku([this._checkForRelatedFeatures({signal:e}),U8e(r==null?void 0:r.expressionInfos,t)]);return{expressionInfos:a,content:n,title:o}}catch(i){throw fi(i)||(this._error=i,q.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:t,popupTemplate:this._effectivePopupTemplate})),i}})}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):e.type==="relationship"?this._compileRelationship(e,t):e.type==="utility-network-associations"?this._compileUtilityNetworkAssociation(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)).filter(Br):typeof e=="string"?this._compileText(new Yf({text:e}),0).text:e}_destroyContentViewModels(){this.removeHandles(iW),this.removeHandles(tW),this.contentViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("contentViewModels",[])}_matchesFeature(e,t){var s;const i=(s=e==null?void 0:e.graphic)==null?void 0:s.getObjectId(),r=t==null?void 0:t.getObjectId();return i!=null&&r!=null&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:e,relatedFeatures:t,map:i}){const{view:r,spatialReference:s,timeZone:n}=this;t==null||t.filter(Boolean).forEach(o=>{e.some(a=>this._matchesFeature(a,o))||e.add(new Hy({abilities:{relationshipContent:!1},map:i,view:r,spatialReference:s,timeZone:n,graphic:o}))}),e.forEach(o=>{(t==null?void 0:t.find(u=>this._matchesFeature(o,u)))||e.remove(o)})}_setExpressionContentVM(e,t){const i=this.formattedAttributes,{contentElement:r,contentElementViewModel:s}=e,n=r==null?void 0:r.type;s&&n&&(n==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createFieldsVMParams(r,t))),n==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createMediaVMParams(r,t))),n==="text"&&s.set(this._createTextVMParams(r)))}_compileRelationship(e,t){const{displayCount:i,orderByFields:r,relationshipId:s,title:n,description:o}=e,{_sourceLayer:a,graphic:u,map:c}=this;if(!BS(a))return;const h=new kV({displayCount:i,graphic:u,orderByFields:r,relationshipId:s,layer:a,map:c,...this._compileTitleAndDesc({title:n,description:o})});return this.contentViewModels[t]=h,this.addHandles(Hs(()=>h.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(h)),iW),e}_matchesGlobalFeature(e,t){const i=e==null?void 0:e.association.globalId,r=t==null?void 0:t.association.globalId;return i!=null&&r!=null&&i===r}async _setUpUtilityNetworkAssociationsViewModels(e,t,i){const{view:r,spatialReference:s,timeZone:n}=this;e.forEach((a,u)=>{const c=t.get(u);c?a.forEach(h=>{c.find(p=>this._matchesGlobalFeature(h,p))||(a.remove(h),a.length===0&&e.delete(u))}):(a.removeAll(),e.delete(u))}),t.forEach((a,u)=>{const c=e.get(u)||new Q;a==null||a.filter(Boolean).forEach(h=>{c.some(p=>this._matchesGlobalFeature(p,h))||c.add({association:h.association,featureViewModel:new Hy({abilities:{utilityNetworkAssociationsContent:!1},map:i,view:r,spatialReference:s,timeZone:n,graphic:h.feature}),terminalName:h.terminalName})}),e.set(u,c)});const o=new AbortController;this._associationVMAbortController=o,await this._sortListObjectsByTitle(e,{signal:o.signal}),this._associationVMAbortController===o&&(this._associationVMAbortController=null)}async _sortListObjectsByTitle(e,t){for(const i of e.values()){const r=i.map(s=>vl(()=>s.featureViewModel.state==="ready",t==null?void 0:t.signal));await Promise.all(r),i.sort(this._compareByFeatureTitle)}}_compareByFeatureTitle(e,t){const i=cH(e.featureViewModel),r=cH(t.featureViewModel);return i.localeCompare(r,void 0,{numeric:!0})}_compileUtilityNetworkAssociation(e,t){const{displayCount:i,title:r,description:s,associationTypes:n}=e,{_sourceLayer:o,graphic:a,map:u}=this;if(!rue(o))return;const c=new PV({graphic:a,displayCount:i,associationTypes:n,layer:o,map:u,...this._compileTitleAndDesc({title:r,description:s})});return this.contentViewModels[t]=c,this.addHandles([G(()=>c.associationFeatures.values(),()=>this._setUpUtilityNetworkAssociationsViewModels(c.associationViewModels,c.associationFeatures,c.map))],J8e),e}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:s,spatialReference:n,view:o,location:a}=this,u=new LV({expressionInfo:i,graphic:r,interceptor:Hy.interceptor,map:s,spatialReference:n,view:o,location:a});return this.contentViewModels[t]=u,this.addHandles(G(()=>u.contentElementViewModel,()=>this._setExpressionContentVM(u,t),xe),tW),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:s,orderByFields:n}=e;return this.contentViewModels[t]=new IV({graphic:i,orderByFields:n,...this._compileTitleAndDesc({title:s,description:r})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:s}=e;return this.contentViewModels[t]=new rA({graphic:i,creator:r,destroyer:s}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:s,formattedAttributes:n}=this,o=s==null?void 0:s.attributes,a=this._expressionAttributes,u=n.global;return{title:qd({attributes:o,fieldInfoMap:i,globalAttributes:u,expressionAttributes:a,layer:r,text:e}),description:qd({attributes:o,fieldInfoMap:i,globalAttributes:u,expressionAttributes:a,layer:r,text:t})}}_createFieldsVMParams(e,t){const i=this._effectivePopupTemplate,r=this.formattedAttributes,s={...r==null?void 0:r.global,...r==null?void 0:r.content[t]},n=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos),o=n==null?void 0:n.filter(({fieldName:h})=>!!h&&(KI(h)||ul(h)||s.hasOwnProperty(h))),a=i==null?void 0:i.expressionInfos,{description:u,title:c}=e;return{attributes:s,expressionInfos:a,fieldInfos:o,...this._compileTitleAndDesc({title:c,description:u})}}_compileFields(e,t){const i=e.clone(),r=new tC(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:s,_effectivePopupTemplate:n,relatedInfos:o,_sourceLayer:a,_expressionAttributes:u}=this,c=this.formattedAttributes,h=(r==null?void 0:r.attributes)??{},{description:p,mediaInfos:m,title:y}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:h,isAggregate:r==null?void 0:r.isAggregate,layer:a,fieldInfoMap:s,formattedAttributes:{...c==null?void 0:c.global,...c==null?void 0:c.content[t]},expressionAttributes:u,mediaInfos:m,popupTemplate:n,relatedInfos:o,...this._compileTitleAndDesc({title:y,description:p})}}_compileMedia(e,t){const i=e.clone(),r=new nf(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(),this.contentViewModels[t]=r,i}_createTextVMParams(e){var n;const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:s}=this;if(e&&e.text){const o=(t==null?void 0:t.attributes)??{},a=((n=this.formattedAttributes)==null?void 0:n.global)??{};e.text=qd({attributes:o,fieldInfoMap:i,globalAttributes:a,expressionAttributes:s,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new rA(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i,timeZone:r}=this;if(!e)return;const{lastEditInfoEnabled:s}=e,n=t==null?void 0:t.editFieldsInfo;return s&&n?nue(n,i==null?void 0:i.attributes,r,t):void 0}_compileTitle(e){var a;const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:s}=this,n=(r==null?void 0:r.attributes)??{},o=((a=this.formattedAttributes)==null?void 0:a.global)??{};return qd({attributes:n,fieldInfoMap:t,globalAttributes:o,expressionAttributes:s,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this;return t?R1({type:"title",value:e==null?void 0:e.title,event:{graphic:t}}):null}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this;return t?R1({type:"content",value:e==null?void 0:e.content,event:{graphic:t}}):null}_evaluateExpressionAttributes({title:e,content:t,expressionInfos:i}){this._evaluateExpressionAttributesTask=Pr(this._evaluateExpressionAttributesTask),this._evaluateExpressionAttributesTask=ec(async r=>{const{graphic:s,map:n,view:o,spatialReference:a,location:u}=this;try{if(!s)return;let c;if(i!=null){const h=[];for(const[p,m]of i.expressions.entries())m!=null?h.push(m.evaluate({graphic:s,interceptor:Hy.interceptor,location:u,map:n,options:{signal:r},spatialReference:a,view:o}).then(y=>[p,O8e(y)]).catch(()=>[p,void 0])):h.push(Promise.resolve([p,void 0]));c=Object.fromEntries(await Promise.all(h)),Fe(r)}this._expressionAttributes=c,this._graphicExpressionAttributes={...s.attributes,...c},this._set("formattedAttributes",this._createFormattedAttributes(t)),this._set("title",this._compileTitle(e)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(t)||null)}catch(c){fi(c)||(this._error=c,q.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:c,graphic:s,popupTemplate:this._effectivePopupTemplate}))}})}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:s,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:u,timeZone:c}=this;i.content[t]=B$({fieldInfos:r==null?void 0:r.fieldInfos,graphic:s,attributes:{...u,...e.attributes},layer:o,fieldInfoMap:a,relatedInfos:n,timeZone:c})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:s,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:a,timeZone:u}=this;i.content[t]=B$({fieldInfos:e.fieldInfos,graphic:r,attributes:{...a,...e.attributes},layer:n,fieldInfoMap:o,relatedInfos:s,timeZone:u})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:s,_fieldInfoMap:n,_graphicExpressionAttributes:o,timeZone:a}=this,u=t==null?void 0:t.fieldInfos,c={global:B$({fieldInfos:u,graphic:i,attributes:o,layer:s,fieldInfoMap:n,relatedInfos:r,timeZone:a}),content:[]};return Array.isArray(e)&&e.forEach((h,p)=>{h.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:h,contentElementIndex:p,formattedAttributes:c}),h.type==="media"&&this._createMediaFormattedAttributes({contentElement:h,contentElementIndex:p,formattedAttributes:c})}),c}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,dD(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:s}=this;r.clear();const n=(s==null?void 0:s.associatedLayer)!=null?await(s==null?void 0:s.associatedLayer.load(i)):s;if(!n||!e)return;const o=t.filter(c=>!!c.fieldName&&ul(c.fieldName));if(!(o!=null&&o.length))return;t.forEach(c=>this._configureRelatedInfo(c,n));const a=await v8e({relatedInfos:r,layer:n},i);Object.keys(a).forEach(c=>{var m;const h=r.get(c.toString()),p=(m=a[c])==null?void 0:m.value;h&&p&&(h.layerInfo=p.data)});const u=await w8e({graphic:e,relatedInfos:r,layer:n},i);Object.keys(u).forEach(c=>{var h;d8e((h=u[c])==null?void 0:h.value,r.get(c.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=J$(e.fieldName||"");if(!r)return;const{layerId:s,fieldName:n}=r;if(!s)return;const o=i.get(s.toString())||c8e(s,t);o&&(b8e({relatedInfo:o,fieldName:n,fieldInfo:e}),this.relatedInfos.set(s,o))}};dt.interceptor=new Z8e(cue,due),l([d()],dt.prototype,"_error",void 0),l([d()],dt.prototype,"_graphicChangedTask",void 0),l([d()],dt.prototype,"_evaluateExpressionAttributesTask",void 0),l([d()],dt.prototype,"_associationVMAbortController",void 0),l([d({readOnly:!0})],dt.prototype,"_effectivePopupTemplate",null),l([d({readOnly:!0})],dt.prototype,"_fieldInfoMap",null),l([d({readOnly:!0})],dt.prototype,"_sourceLayer",null),l([d()],dt.prototype,"abilities",void 0),l([ke("abilities")],dt.prototype,"castAbilities",null),l([d({readOnly:!0})],dt.prototype,"content",void 0),l([d({readOnly:!0})],dt.prototype,"contentViewModels",void 0),l([d()],dt.prototype,"description",void 0),l([d({type:Boolean})],dt.prototype,"defaultPopupTemplateEnabled",void 0),l([d({readOnly:!0})],dt.prototype,"isTable",null),l([d({readOnly:!0})],dt.prototype,"state",null),l([d({readOnly:!0})],dt.prototype,"formattedAttributes",void 0),l([d({type:_i,value:null})],dt.prototype,"graphic",null),l([d({readOnly:!0})],dt.prototype,"lastEditInfo",void 0),l([d({type:Se})],dt.prototype,"location",void 0),l([d({readOnly:!0})],dt.prototype,"relatedInfos",void 0),l([d({type:we})],dt.prototype,"spatialReference",null),l([d()],dt.prototype,"timeZone",null),l([d({readOnly:!0})],dt.prototype,"title",void 0),l([d()],dt.prototype,"map",null),l([d({readOnly:!0})],dt.prototype,"waitingForContent",null),l([d()],dt.prototype,"view",void 0),dt=Hy=l([x("esri.widgets.Feature.FeatureViewModel")],dt);const DV=dt,Ea="esri-feature",Jt={base:Ea,container:`${Ea}__size-container`,title:`${Ea}__title`,main:`${Ea}__main-container`,contentNode:`${Ea}__content-node`,contentNodeText:`${Ea}__content-node--text`,contentElement:`${Ea}__content-element`,text:`${Ea}__text`,lastEditedInfo:`${Ea}__last-edited-info`,loadingSpinnerContainer:`${Ea}__loading-container`},Nue=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>yue(i)&&!i.destroyed?N("div",{class:Jt.contentNode,key:i},i.render()):i instanceof HTMLElement?N("div",{afterCreate:this._attachToNode,bind:i,class:Jt.contentNode,key:i}):Gze(i)?N("div",{afterCreate:this._attachToNode,bind:i.domNode,class:Jt.contentNode,key:i}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=l([x("esri.widgets.Feature.support.FeatureContentMixin")],t),t},sW={title:!0,content:!0,lastEditedInfo:!0};let oi=class extends Nue(cr){constructor(t,i){super(t,i),this._contentWidgets=[],this.flowType="feature",this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.visibleElements={...sW},this.viewModel=new DV}initialize(){this.addHandles(G(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentViewModels},()=>this._setupContentWidgets(),xe))}loadDependencies(){return Ta({notice:()=>L(()=>import("./index-sDT6dSkA.js"),__vite__mapDeps([291,233,234,235,236,241,284,232])),loader:()=>L(()=>import("./index-BoqepOWk.js"),__vite__mapDeps([230,231,232]))})}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get isTable(){return this.viewModel.isTable}get icon(){return"polygon"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get timeZone(){return this.viewModel.timeZone}set timeZone(t){this.viewModel.timeZone=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...sW,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}setActiveMedia(t,i){return this.viewModel.setActiveMedia(t,i)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}render(){const{state:t}=this.viewModel,i=N("div",{class:Jt.container,key:"container"},this._renderTitle(),t==="error"?this._renderError():t==="loading"?this._renderLoading():this._renderContentContainer());return N("div",{class:this.classes(Jt.base,Te.widget)},i)}_renderError(){const{messagesCommon:t,messages:i,visibleElements:r}=this;return N("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,scale:"s"},r.title?N("div",{key:"error-title",slot:"title"},t.errorMessage):null,N("div",{key:"error-message",slot:"message"},i.loadingError))}_renderLoading(){return N("div",{class:Jt.loadingSpinnerContainer,key:"loading-container"},N("calcite-loader",{inline:!0,label:""}))}_renderContentContainer(){const{visibleElements:t}=this;return t.content?N("div",{class:Jt.main},[this._renderContent(),this._renderLastEditInfo()]):null}_renderTitle(){const{visibleElements:t,title:i}=this;return t.title?N(CV,{class:Jt.title,innerHTML:i,level:this.headingLevel}):null}_renderContent(){const t=this.viewModel.content,i="content";if(!t)return null;if(Array.isArray(t))return t.length?N("div",{class:Jt.contentNode,key:`${i}-content-elements`},t.map(this._renderContentElement,this)):null;if(typeof t=="string"){const r=this._contentWidgets[0];return!r||r.destroyed?null:N("div",{class:this.classes(Jt.contentNode,Jt.contentNodeText),key:`${i}-content`},r.render())}return this.renderNodeContent(t)}_renderContentElement(t,i){var s;const{visibleElements:r}=this;if(typeof r.content!="boolean"&&!((s=r.content)!=null&&s[t.type]))return null;switch(t.type){case"attachments":return this._renderAttachments(i);case"custom":return this._renderCustom(t,i);case"fields":return this._renderFields(i);case"media":return this._renderMedia(i);case"text":return this._renderText(t,i);case"expression":return this._renderExpression(i);case"relationship":return this._renderRelationship(i);case"utility-network-associations":return this._renderAssociation(i);default:return null}}_renderAttachments(t){const i=this._contentWidgets[t];if(!i||i.destroyed)return null;const{state:r,attachmentInfos:s}=i.viewModel;return r==="loading"||s.length>0?N("div",{class:this.classes(Jt.contentElement),key:this._buildKey("attachments-element",t)},i.render()):null}_renderRelationship(t){const i=this._contentWidgets[t];return i&&!i.destroyed&&this.flowItems?N("div",{class:Jt.contentElement,key:this._buildKey("relationship-element",t)},i.render()):null}_renderAssociation(t){const i=this._contentWidgets[t];return i&&!i.destroyed&&this.flowItems?N("div",{class:Jt.contentElement,key:this._buildKey("utility-network-association-element",t)},i.render()):null}_renderExpression(t){const i=this._contentWidgets[t];return i&&!i.destroyed&&i.viewModel.contentElement?N("div",{class:Jt.contentElement,key:this._buildKey("expression-element",t)},i.render()):null}_renderCustom(t,i){const{creator:r}=t,s=this._contentWidgets[i];return!s||s.destroyed?null:r?N("div",{class:Jt.contentElement,key:this._buildKey("custom-element",i)},s.render()):null}_renderFields(t){const i=this._contentWidgets[t];return!i||i.destroyed?null:N("div",{class:Jt.contentElement,key:this._buildKey("fields-element",t)},i.render())}_renderMedia(t){const i=this._contentWidgets[t];return!i||i.destroyed?null:N("div",{class:Jt.contentElement,key:this._buildKey("media-element",t)},i.render())}_renderLastEditInfo(){const{visibleElements:t,messages:i}=this,{lastEditInfo:r}=this.viewModel;if(!r||!t.lastEditedInfo)return null;const{date:s,user:n}=r,o=r.type==="edit"?n?i.lastEditedByUser:i.lastEdited:n?i.lastCreatedByUser:i.lastCreated,a=eo(o,{date:s,user:n});return N("div",{class:this.classes(Jt.lastEditedInfo,Jt.contentElement),key:"edit-info-element"},a)}_renderText(t,i){const r=t.text,s=this._contentWidgets[i];return!s||s.destroyed?null:r?N("div",{class:this.classes(Jt.contentElement,Jt.text),key:this._buildKey("text-element",i)},s.render()):null}_buildKey(t,...i){var r,s;return`${t}__${((s=(r=this.viewModel)==null?void 0:r.graphic)==null?void 0:s.uid)||"0"}-${i.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,!t.destroyed&&t.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:t,visibleElements:i,flowItems:r,viewModel:s}=this,n=s==null?void 0:s.content,{contentViewModels:o}=s;if(Array.isArray(n))n.forEach((a,u)=>{if(a.type==="attachments"&&(this._contentWidgets[u]=new Uze({displayType:a.displayType,headingLevel:i.title&&t<6?t+1:t,viewModel:o[u]})),a.type==="fields"&&(this._contentWidgets[u]=new gue({viewModel:o[u]})),a.type==="media"&&(this._contentWidgets[u]=new Iue({viewModel:o[u]})),a.type==="text"&&(this._contentWidgets[u]=new H$({viewModel:o[u]})),a.type==="custom"&&(this._contentWidgets[u]=new H$({viewModel:o[u]})),a.type==="expression"&&(this._contentWidgets[u]=new q8e({viewModel:o[u]})),a.type==="relationship"){const c=new H8e({flowItems:r,featureVisibleElements:i,viewModel:o[u]});this._contentWidgets[u]=c}if(a.type==="utility-network-associations"){const c=async p=>{const{viewModel:m,listType:y,title:g}=p;if(!r)return;m.activeAssociationType=y;const{default:v}=await L(()=>import("./FeatureUtilityNetworkAssociationList-wJ-5pXVN.js"),[]),b=new v({viewModel:m,parentFeatureViewModel:s,listType:y,title:g,featureVisibleElements:i,description:s.title,flowItems:r});r.push(b)},h=new W8e({flowItems:r,onSelectAssociationType:c,parentFeatureViewModel:s,featureVisibleElements:i,viewModel:o[u]});this._contentWidgets[u]=h}},this);else{const a=o[0];a&&!a.destroyed&&(this._contentWidgets[0]=new H$({viewModel:a}))}this.scheduleRender()}};l([d()],oi.prototype,"flowType",void 0),l([d()],oi.prototype,"graphic",null),l([d()],oi.prototype,"defaultPopupTemplateEnabled",null),l([d()],oi.prototype,"flowItems",void 0),l([d()],oi.prototype,"headingLevel",void 0),l([d({readOnly:!0})],oi.prototype,"isTable",null),l([d()],oi.prototype,"icon",null),l([d()],oi.prototype,"label",null),l([d()],oi.prototype,"location",null),l([d(),Wi("esri/widgets/Feature/t9n/Feature")],oi.prototype,"messages",void 0),l([d(),Wi("esri/t9n/common")],oi.prototype,"messagesCommon",void 0),l([d()],oi.prototype,"spatialReference",null),l([d()],oi.prototype,"timeZone",null),l([d({readOnly:!0})],oi.prototype,"title",null),l([d()],oi.prototype,"visibleElements",void 0),l([ke("visibleElements")],oi.prototype,"castVisibleElements",null),l([d()],oi.prototype,"map",null),l([d()],oi.prototype,"view",null),l([d({type:DV})],oi.prototype,"viewModel",void 0),oi=l([x("esri.widgets.Feature")],oi);const Lue=oi,Y8e=Object.freeze(Object.defineProperty({__proto__:null,default:Lue},Symbol.toStringTag,{value:"Module"}));let zp=class extends _o.EventedAccessor{constructor(t){super(t),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([Fi(()=>{const i=this.screenLocationEnabled?this.view:null;return i?[i.size,i.type==="3d"?i.camera:i.viewpoint]:null},()=>this.notifyChange("screenLocation")),G(()=>this.screenLocation,(i,r)=>{i!=null&&r!=null&&this.emit("view-change")})])}destroy(){this.view=null}get screenLocation(){const{location:t,view:i,screenLocationEnabled:r}=this,s=i==null?void 0:i.spatialReference,n=s?zte(t,s).geometry:null;return r&&n&&(i!=null&&i.ready)?i.toScreen(n):null}};l([d()],zp.prototype,"location",void 0),l([d()],zp.prototype,"screenLocation",null),l([d()],zp.prototype,"screenLocationEnabled",void 0),l([d()],zp.prototype,"view",void 0),zp=l([x("esri.widgets.support.AnchorElementViewModel")],zp);const kue=zp;let K$=class extends kue{constructor(t){super(t),this.visible=!1}};l([d()],K$.prototype,"visible",void 0),K$=l([x("esri.widgets.Spinner.SpinnerViewModel")],K$);const Pue=K$,JO="esri-spinner",YO={base:JO,spinnerStart:`${JO}--start`,spinnerFinish:`${JO}--finish`};let Up=class extends cr{constructor(t,i){super(t,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new Pue}initialize(){this.addHandles(G(()=>this.visible,t=>this._visibleChange(t)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}show(t){const{location:i,promise:r}=t??{};i&&(this.viewModel.location=i),this.visible=!0;const s=()=>this.hide();r&&r.catch(()=>{}).then(s)}hide(){this.visible=!1}render(){const{visible:t}=this,{screenLocation:i}=this.viewModel,r=!!i,s=t&&r,n=!t&&r,o={[YO.spinnerStart]:s,[YO.spinnerFinish]:n},a=this._getPositionStyles();return N("div",{class:this.classes(YO.base,o),styles:a})}_visibleChange(t){if(t)return void(this.viewModel.screenLocationEnabled=!0);const i=pS(this._animationDelay);this._animationPromise=i,i.catch(()=>{}).then(()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:t,view:i}=this.viewModel;if(i==null||t==null)return{};const{padding:r}=i;return{left:t.x-r.left+"px",top:t.y-r.top+"px"}}};l([d()],Up.prototype,"location",null),l([d()],Up.prototype,"view",null),l([d({type:Pue})],Up.prototype,"viewModel",void 0),l([d()],Up.prototype,"visible",null),Up=l([x("esri.widgets.Spinner")],Up);const Q8e=Up,pr="esri-features",wi={icon:`${pr}__icon`,actionImage:`${pr}__action-image`,base:pr,container:`${pr}__container`,contentContainer:`${pr}__content-container`,contentFeature:`${pr}__content-feature`,flowItemCollapsed:`${pr}__flow-item--collapsed`,header:`${pr}__header`,footer:`${pr}__footer`,featureMenuObserver:`${pr}__feature-menu-observer`,actionExit:`${pr}__action--exit`,loader:`${pr}__loader`,featuresHeading:`${pr}__heading`,paginationText:`${pr}__pagination-text`,paginationActionBar:`${pr}__pagination-action-bar`,paginationMenuButton:`${pr}__pagination-menu-button`,paginationPrevious:`${pr}__pagination-previous`},Mf=Q.ofType({key:"type",defaultKeyValue:"button",base:vI,typeMap:{button:m0,toggle:nj}}),Gd=new m0({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:Ou.zoomInMagnifyingGlass}),nW=new m0({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:Ou.trash}),mg=new m0({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Ou.zoomInMagnifyingGlass}),Md=new nj({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:Ou.table,value:!1}),Mc=Gd.clone();let qp=class extends cr{constructor(t,i){super(t,i),this.messages=null,this.closed=!1,this.closable=!0,this._handleOpenFeature=r=>{this.emit("open-feature",{feature:r})},this._handleZoomToFeature=r=>{this.emit("zoom-to-feature",{featureWidget:r})}}loadDependencies(){return Ta({action:()=>L(()=>import("./index-Dzq-Cn3p.js"),__vite__mapDeps([286,230,231,232,233,234,235,276,236,239,241])),"action-bar":()=>L(()=>import("./index-pu4ZAHVc.js"),__vite__mapDeps([292,230,231,232,233,234,235,286,276,236,239,241,293,283,279,284,237,294,273,295])),"action-group":()=>L(()=>import("./index-LaZv9kIs.js").then(t=>t.i),__vite__mapDeps([295,230,231,232,233,234,235,286,276,236,239,241,293,283,279,284,237,294,273])),"flow-item":()=>L(()=>import("./index-CpuGw6FZ.js"),__vite__mapDeps([296,230,231,232,233,234,235,286,276,236,239,241,293,283,279,284,237,294,273,275,297]))})}render(){const{flowItems:t}=this,i=t==null?void 0:t.toArray();return N(YLe,null,i==null?void 0:i.map((r,s)=>this._renderFlowItem(r,s===t.length-1)))}_handleCloseClick(){this.emit("close")}_handleExitClick(){this.emit("exit")}_handleDrillInBackClick(){const{flowItems:t}=this,i=t==null?void 0:t.pop();i&&("activeCategory"in i.viewModel?(i.viewModel.activeCategory=null,t.length||(i.viewModel.showAllEnabled=!1)):"showAllEnabled"in i.viewModel&&(i.viewModel.showAllEnabled=!1),i&&(i.viewModel=null,i.destroy()))}_getExitMessage(t){switch(t.flowType){case"feature":case"feature-association":return"";case"feature-relationship":return this.messages.exitRelatedRecords;case"feature-utility-network-associations":case"feature-utility-network-association-type":return this.messages.exitAssociations}}_renderFlowItem(t,i){const{messages:r,closable:s,closed:n}=this,o="graphic"in t&&!t.isTable,a=t.flowType==="feature-association",u=this._getExitMessage(t),c=r.selectFeature;return N("calcite-flow-item",{bind:this,closable:s,closed:n,description:Lf(this._getDrillInFlowItemDescription(t)??""),heading:Lf(t.title??""),key:`flow-item-${t.viewModel.uid}`,selected:i,onCalciteFlowItemBack:h=>{h.preventDefault(),this._handleDrillInBackClick()},onCalciteFlowItemClose:this._handleCloseClick},N("calcite-action",{appearance:"transparent",bind:this,class:wi.actionExit,icon:"move-up",key:"exit-action",onclick:this._handleExitClick,slot:"header-actions-start",text:u,title:u}),o?N("calcite-action",{appearance:"transparent",bind:this,icon:"zoom-to-object",key:"open-feature-action",onclick:()=>this._handleOpenFeature(t),slot:"header-actions-end",text:c,title:c}):null,a?N("calcite-action-bar",{expandDisabled:!0,expanded:!0,key:"header-action-bar",scale:"s",slot:"action-bar"},N("calcite-action-group",{overlayPositioning:"fixed",scale:"s"},this._renderDefaultActions(t))):null,N("div",{class:wi.container},t.render()))}_renderDefaultActions(t){const i=this._getActionTitle(Mc);return N("calcite-action",{active:Mc.active,appearance:"solid",bind:this,"data-action-uid":Mc.uid,disabled:Mc.disabled,icon:Mc.icon??"question",indicator:Mc.indicator,key:`action-${Mc.uid}`,loading:Mc.active,onclick:()=>this._handleZoomToFeature(t),scale:"s",text:i,textEnabled:!0,title:i})}_getActionTitle(t){const{messages:i}=this,{id:r}=t,s=t.title??"";return r==="zoom-to-feature"?eo(s,{messages:i}):s}_getDrillInFlowItemDescription(t){switch(t.flowType){case"feature":case"feature-association":case"feature-utility-network-associations":return t.viewModel.description??"";case"feature-relationship":return t.allItemsDescription;case"feature-utility-network-association-type":return t.description??""}}};l([d()],qp.prototype,"flowItems",void 0),l([d(),Wi("esri/widgets/Features/t9n/Features")],qp.prototype,"messages",void 0),l([d()],qp.prototype,"closed",void 0),l([d()],qp.prototype,"closable",void 0),qp=l([x("esri.widgets.Features.FeaturesDrillIn")],qp);const X8e=qp;let K8e=class{constructor(t){this._observable=new n0,this._set=new Set(t)}get size(){return fe(this._observable),this._set.size}add(t){const i=this._set.size;return this._set.add(t),this._set.size!==i&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(t){const i=this._set.delete(t);return i&&this._observable.notify(),i}entries(){return fe(this._observable),this._set.entries()}forEach(t,i){fe(this._observable),this._set.forEach((r,s)=>t.call(i,r,s,this),i)}has(t){return fe(this._observable),this._set.has(t)}keys(){return fe(this._observable),this._set.keys()}values(){return fe(this._observable),this._set.values()}[Symbol.iterator](){return fe(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}};const e9e="OBJECTID";var em;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(em||(em={}));function t9e(e){return"r"in e&&"g"in e&&"b"in e}function Due(e){return"h"in e&&"s"in e&&"v"in e}function jue(e){return"l"in e&&"a"in e&&"b"in e}function Vue(e){return"l"in e&&"c"in e&&"h"in e}function i9e(e){return"x"in e&&"y"in e&&"z"in e}const r9e=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],s9e=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function zue(e,t){const i=[];let r,s;if(e[0].length!==t.length)throw new Error("dimensions do not match");const n=e.length,o=e[0].length;let a=0;for(r=0;r<n;r++){for(a=0,s=0;s<o;s++)a+=e[r][s]*t[s];i.push(a)}return i}function Uue(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=zue(r9e,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function jV(e){const t=zue(s9e,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function que(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function Gue(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function n9e(e){const t=e.l,i=e.a,r=e.b,s=Math.sqrt(i*i+r*r);let n=Math.atan2(r,i);return n=n>0?n:n+2*Math.PI,{l:t,c:s,h:n}}function o9e(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function a9e(e){return que(Uue(e))}function l9e(e){return jV(Gue(e))}function u9e(e){return n9e(que(Uue(e)))}function c9e(e){return jV(Gue(o9e(e)))}function d9e(e){const t=e.r,i=e.g,r=e.b,s=Math.max(t,i,r),n=s-Math.min(t,i,r);let o=s,a=n===0?0:s===t?(i-r)/n%6:s===i?(r-t)/n+2:(t-i)/n+4,u=n===0?0:n/o;return a<0&&(a+=6),a*=60,u*=100,o*=100/255,{h:a,s:u,v:o}}function h9e(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,s=r*i,n=s*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:s,g:n,b:0};break;case 1:o={r:n,g:s,b:0};break;case 2:o={r:0,g:s,b:n};break;case 3:o={r:0,g:n,b:s};break;case 4:o={r:n,g:0,b:s};break;case 5:case 6:o={r:s,g:0,b:n};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-s),o.g=Math.round(o.g+r-s),o.b=Math.round(o.b+r-s),o}function ZS(e){return t9e(e)?e:Vue(e)?c9e(e):jue(e)?l9e(e):i9e(e)?jV(e):Due(e)?h9e(e):e}function p9e(e){return Due(e)?e:d9e(ZS(e))}function f9e(e){return jue(e)?e:a9e(ZS(e))}function jrt(e){return Vue(e)?e:u9e(ZS(e))}function m9e(e){let{r:t,g:i,b:r,a:s}=e;return s<1&&(t=Math.round(s*t+255*(1-s)),i=Math.round(s*i+255*(1-s)),r=Math.round(s*r+255*(1-s))),new K({r:t,g:i,b:r})}function y9e(e,t){const{r:i,g:r,b:s}=t!=null&&t.ignoreAlpha?e:m9e(e);return .2126*i+.7152*r+.0722*s}var yD;function Vrt(e,t=yD.High){return y9e(e,{ignoreAlpha:!0})>t?new K([0,0,0,e.a]):new K([255,255,255,e.a])}function zrt(e,t){const i=f9e(e);i.l*=1-t;const r=ZS(i),s=e.clone();return s.setColor(r),s.a=e.a,s}function Urt(e,t){const i=e.clone();return i.a*=t,i}function qrt(e,t){const i=p9e(e);i.s*=t;const r=ZS(i),s=e.clone();return s.setColor(r),s.a=e.a,s}function Grt(e){return K.toUnitRGBA(e)}function Brt(e){return fm(e[0],e[1],e[2],e.length>3?e[3]:1)}function Hrt(e,t){const i=K.toUnitRGBA(e);return i[3]*=t,i}function Bue(e,t,i={}){if(e.length===0||t<=0)return[];if((e=e.map(r=>typeof r=="string"?new K(r):r)).length===1||t===1){const r=[],s=e[0];for(let n=0;n<t;n++)r.push(s.clone());return r}if(i.shuffle&&(e=_Q(R(e),i.seed)),e.length>=t){const r=[],s=(e.length-1)/(t-1);for(let n=0;n<t;n++){const o=Math.round(n*s);r.push(e[o].clone())}return r}return g9e(e,t,i)}function g9e(e,t,i={}){const r=[],s=e.length-1,n=Math.ceil((t-e.length)/s);e:for(let o=0;o<s;o++){const a=e[o],u=e[o+1];for(let c=1;c<=n;c++){const h=c/(n+1);if(r.push(v9e(a,u,h,i)),r.length+e.length===t)break e}}return[...e.map(o=>o.clone()),..._Q(r,i.seed??1)]}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(yD||(yD={}));const QO=(e,t)=>{const i=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+i))};function v9e(e,t,i,r={}){const s=e.r,n=e.g,o=e.b,a=t.r,u=t.g,c=t.b,h=Math.round(s+(a-s)*i),p=Math.round(n+(u-n)*i),m=Math.round(o+(c-o)*i);if(!r.offset)return new K([h,p,m]);const y=F5(r.seed);return new K([QO(h,y),QO(p,y),QO(m,y)])}const oW=D("android");D("chrome")||oW&&oW>=4;vN();em.size;em.maxSize;em.maxOutlineSize;em.lineWidth;em.tallSymbolWidth;function Hue(e){return e&&"opacity"in e?e.opacity*Hue(e.parent):1}async function aW(e,t){var S;if(!e)return;const i=e.sourceLayer,r=(t!=null&&t.useSourceLayer?i:e.layer)??i,s=t!=null&&t.ignoreOpacity?1:Hue(r);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const T=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,acceptedFormats:["web","cim"],cache:t!=null?t.webStyleCache:null}):e.symbol.clone();return GO(T,null,s),T}const n=(t==null?void 0:t.renderer)??w9e(r);let o=n&&"getSymbolAsync"in n?await n.getSymbolAsync(e,t):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...t,cache:t!=null?t.webStyleCache:null}):o.clone(),!n||!("visualVariables"in n)||!((S=n.visualVariables)!=null&&S.length))return GO(o,null,s),o;if("arcadeRequiredForVisualVariables"in n&&n.arcadeRequiredForVisualVariables&&(t==null?void 0:t.arcade)==null){const T={...t};T.arcade=await On(),t=T}const{getColor:a,getOpacity:u,getAllSizes:c,getRotationAngle:h}=await L(()=>Promise.resolve().then(()=>iV),void 0),p=[],m=[],y=[],g=[];for(const T of n.visualVariables)switch(T.type){case"color":p.push(T);break;case"opacity":m.push(T);break;case"rotation":g.push(T);break;case"size":T.target||y.push(T)}const v=!!p.length&&p[p.length-1],b=v?a(v,e,t):null,w=!!m.length&&m[m.length-1];let _=w?u(w,e,t):null;if(s!=null&&(_=_!=null?_*s:s),t!=null&&t.ignoreOpacity&&(_=1),GO(o,b,_),y.length&&(t==null?void 0:t.ignoreSizeVariables)!==!0){const T=c(y,e,t);await uUe(o,T)}if((t==null?void 0:t.ignoreRotationVariables)!==!0)for(const T of g)cUe(o,h(T,e,t),T.axis);return o}function w9e(e){if(e)return"renderer"in e?e.renderer:void 0}function b9e(e){return e&&typeof e.highlight=="function"}function _9e(e,t,i){return e==null||e>=i&&(t===0||e<=t)}function Wrt(e,t){if(t&&e){const{minScale:i,maxScale:r}=e;if(S9e(i,r))return _9e(t,i,r)}return!0}function S9e(e,t){return e!=null&&e>0||t!=null&&t>0}function Zrt(e){return!(e!=null&&e.minScale)||!e.maxScale||e.minScale>=e.maxScale}const T9e="esri.widgets.Popup.PopupViewModel",sA=()=>q.getLogger(T9e),x9e=e=>{const{event:t,view:i,viewModel:r}=e,{action:s}=t;if(!s)return Promise.reject(new M("trigger-action:missing-arguments","Event has no action"));const{disabled:n,id:o}=s;if(!o)return Promise.reject(new M("trigger-action:invalid-action","action.id is missing"));if(n)return Promise.reject(new M("trigger-action:invalid-action","Action is disabled"));if(o===Gd.id)return Zue(r).catch(mF);if(o===mg.id)return E9e(r);if(o===Md.id)return r.browseClusterEnabled=!r.browseClusterEnabled,r.featureMenuOpen=r.browseClusterEnabled,Promise.resolve();if(o===nW.id){r.visible=!1;const{selectedFeature:a}=r;if(!a)return Promise.reject(new M(`trigger-action:${nW.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:u}=a;return u?u.remove(a):i==null||i.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function Wue(e){const{selectedFeature:t,location:i,view:r}=e;return r?t??i??null:null}function Yp(e){var t,i;return!!e&&e.isAggregate&&((i=(t=e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}async function $9e(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r=null;try{r=await i.whenGraphicBounds(e,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function Zue(e,t){var p,m;const{location:i,selectedFeature:r,view:s,zoomFactor:n}=e;await((p=t==null?void 0:t.viewModel)==null?void 0:p.updateGeometry());const o=t==null?void 0:t.graphic,a=o!=null&&o.geometry?o:Wue(e);if(!s||!a){const y=new M("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:a,view:s});throw sA().error(y),y}const u=s.scale/n,c=(o==null?void 0:o.geometry)??((m=e.selectedFeature)==null?void 0:m.geometry)??i,h=c!=null&&c.type==="point"&&await $9e(o??r,s);Gd.active=!0,Gd.disabled=!0;try{await e.zoomTo({target:{target:a,scale:h?u:void 0}})}catch(y){if(fi(y))return;const g=new M("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:o??r});sA().error(g)}finally{Gd.active=!1,Gd.disabled=!1,e.zoomToLocation=null,h&&(e.location=c)}}async function E9e(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const o=new M("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw sA().error(o),o}if(!t||!Yp(t)){const o=new M("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw sA().error(o),o}const[r,s]=await VV(i,t);mg.active=!0,mg.disabled=!0;const{extent:n}=await r.queryExtent(s);n&&await e.zoomTo({target:n}),mg.active=!1,mg.disabled=!1}async function M9e(e){const{view:t,selectedFeature:i}=e;if(!t||!i)return;const[r,s]=await VV(t,i),{extent:n}=await r.queryExtent(s);e.selectedClusterBoundaryFeature.geometry=n,t.graphics.add(e.selectedClusterBoundaryFeature)}async function A9e(e){const{selectedFeature:t,view:i}=e;if(!i||!t)return;const[r,s]=await VV(i,t);Md.active=!0,Md.disabled=!0;const{features:n}=await r.queryFeatures(s);Md.active=!1,Md.disabled=!1,Md.value=!0;const o={features:[t].concat(n)};(e==null?void 0:e.initialDisplayMode)==="feature"&&(o.featureMenuOpen=!0),e==null||e.open(o)}async function VV(e,t){const i=await e.whenLayerView(t.sourceLayer),r=i.createQuery(),s=t.getObjectId();return r.aggregateIds=s!=null?[s]:[],[i,r]}function I9e(e){Md.value=!1;const t=e.features.filter(i=>Yp(i));t.length&&(e.features=t)}const XO="location-scale-handle",C9e=()=>[Gd.clone()],O9e=()=>[mg.clone(),Md.clone()];let Q2=null;function R9e(e,t){return e==="building-scene"||t==="2d"&&(e==="map-image"||e==="tile"||e==="imagery"||e==="imagery-tile")}let Re=class extends Ioe(kue){constructor(t){super(t),this._pendingPromises=new K8e,this._fetchFeaturesController=null,this._highlightPromises={"highlight-active-feature":null,"highlight-selected-feature":null},this._selectedClusterFeature=null,this.actions=new Mf,this.activeFeature=null,this.autoCloseEnabled=!1,this.browseClusterEnabled=!1,this.content=null,this.defaultPopupTemplateEnabled=!1,this.featurePage=null,this.featuresPerPage=20,this.featureMenuOpen=!1,this.featureMenuTitle=null,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.initialDisplayMode="feature",this.selectedClusterBoundaryFeature=new _i({symbol:new uc({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null,this._debouncedLocationUpdate=fl(async i=>{var o,a,u,c;const{spatialReference:r}=this,s=(a=(o=this.selectedFeature)==null?void 0:o.geometry)==null?void 0:a.type,n=this.location??i;if(s&&s!=="mesh"&&r&&n&&this.selectedFeature)if(s!=="point")try{const h=this.selectedFeature;let p=h.geometry;const m=this._getHighlightLayer(h),y=h.getObjectId();if(!m||!this.view)return;if(y){const g=(u=this.view)==null?void 0:u.allLayerViews.find(w=>w.layer.uid===m.uid);if(!g||!("queryFeatures"in g))return;const v=g.createQuery();v.outSpatialReference=r,v.objectIds=[y],v.returnGeometry=!0;const{features:b}=await g.queryFeatures(v);p=(c=b[0])==null?void 0:c.geometry}if(!p||p.type==="mesh")return;if(p=oc(p,r),Q2||(Q2=await L(()=>import("./geometryEngineAsync-C_mQFDQ5.js"),[])),!await Q2.intersects(p,n)){const g=(await Q2.nearestCoordinate(p,n)).coordinate??n;this.selectedFeature===h&&(this.location=g)}}catch(h){fi(h)||q.getLogger(this).error(h)}else this.location=lD(this.selectedFeature.geometry)??n})}initialize(){this.addHandles([this.on("view-change",()=>this._autoClose()),G(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),G(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),G(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.animation)==null?void 0:i.state},t=>this._animationStateChange(t)),G(()=>this.location,t=>this._locationChange(t)),G(()=>this.selectedFeature,t=>this._selectedFeatureChange(t)),G(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),G(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),G(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",t=>x9e({event:t,viewModel:this,view:this.view})),Fi(()=>!this.waitingForResult,()=>this._waitingForResultChange(),So),G(()=>[this.features,this.map,this.spatialReference,this.timeZone],()=>this._updateFeatureVMs()),G(()=>{var t;return(t=this.view)==null?void 0:t.scale},()=>this._viewScaleChange()),Fi(()=>!this.visible,()=>this.browseClusterEnabled=!1),G(()=>this.browseClusterEnabled,t=>t?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null,this.map=null,this.spatialReference=null,this.timeZone=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const t=this._get("allActions")||new Mf;t.removeAll();const{actions:i,defaultActions:r,defaultPopupTemplateEnabled:s,includeDefaultActions:n,selectedFeature:o}=this,a=n?r.concat(i):i,u=o&&(typeof o.getEffectivePopupTemplate=="function"&&o.getEffectivePopupTemplate(s)||o.popupTemplate),c=u==null?void 0:u.actions,h=u!=null&&u.overwriteActions?c:(c==null?void 0:c.concat(a))??a;return h==null||h.filter(Boolean).forEach(p=>t.add(p)),t}get defaultActions(){const t=this._get("defaultActions")||new Mf;return t.removeAll(),t.addMany(Yp(this.selectedFeature)?O9e():C9e()),t}get featureCount(){return this.features.length}set features(t){const i=t||[];this._set("features",i);const{pendingPromisesCount:r,promiseCount:s,selectedFeatureIndex:n}=this,o=s&&i.length;this.initialDisplayMode!=="list"?o&&r&&n===-1?this.selectedFeatureIndex=0:o&&n!==-1||(this.selectedFeatureIndex=i.length?0:-1):(!o||o&&r===s)&&(this.selectedFeatureIndex=-1)}set location(t){var n,o;let i=t;const r=(n=this.spatialReference)==null?void 0:n.isWebMercator;((o=t==null?void 0:t.spatialReference)==null?void 0:o.isWGS84)&&r&&(i=qu(t)),this._set("location",i)}get map(){var t;return((t=this.view)==null?void 0:t.map)??null}set map(t){this._override("map",t)}get pendingPromisesCount(){return this._pendingPromises.size}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(t){this._pendingPromises.clear(),this.features=[],Array.isArray(t)&&t.length?(this._set("promises",t),(t=t.slice()).forEach(i=>this._pendingPromises.add(i)),t.reduce((i,r)=>i.finally(()=>r.then(s=>{this._pendingPromises.has(r)&&this._updateFeatures(s)}).finally(()=>this._pendingPromises.delete(r)).catch(()=>{})),Promise.resolve())):this._set("promises",[])}get selectedFeature(){const{features:t,selectedFeatureIndex:i}=this;return i===-1?null:t[i]||null}get selectedFeatureIndex(){const t=this._get("selectedFeatureIndex");return typeof t=="number"?t:-1}set selectedFeatureIndex(t){const{featureCount:i}=this;(isNaN(t)||t<0||!i)&&(t=-1),this.activeFeature=null,this._set("selectedFeatureIndex",t)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get state(){const{view:t,map:i}=this;return t?t.ready?"ready":"disabled":i?"ready":"disabled"}get timeZone(){var t;return((t=this.view)==null?void 0:t.timeZone)??An}set timeZone(t){this._overrideIfSome("timeZone",t)}get waitingForContents(){return this.featureViewModels.some(t=>t.waitingForContent)}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}centerAtLocation(){const{view:t}=this,i=Wue(this);return i&&t?this.callGoTo({target:{target:i,scale:t.scale}}):Promise.reject(new M("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:t}))}zoomTo(t){return this.callGoTo(t)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(t,i){var s;const{view:r}=this;if(!r||!t)throw new M("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:t,view:r});return r.fetchPopupFeatures(t,{pointerType:(s=i==null?void 0:i.event)==null?void 0:s.pointerType,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i==null?void 0:i.signal})}open(t){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...t,visible:!0},{fetchFeatures:r}=i;delete i.fetchFeatures,r&&this._setFetchFeaturesPromises(i.location);const s=["actionsMenuOpen","collapsed"];for(const n of s)delete i[n];this.set(i)}triggerAction(t){const i=this.allActions.at(t);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex=this._getRoundRobinIndex(this.selectedFeatureIndex+1,this.featureCount),this}previous(){return this.selectedFeatureIndex=this._getRoundRobinIndex(this.selectedFeatureIndex-1,this.featureCount),this}disableClusterBrowsing(){I9e(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:t,selectedFeature:i}=this;(t==null?void 0:t.type)==="2d"?Yp(i)?(await M9e(this),await A9e(this)):q.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):q.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}handleViewClick(t){this._fetchFeaturesAndOpen(t)}_getRoundRobinIndex(t,i){return(t+i)%i}_animationStateChange(t){this.zoomToLocation||(Gd.disabled=t==="waiting-for-target")}_clearBrowsedClusterGraphics(){var i,r;const t=[this.selectedClusterBoundaryFeature,this._selectedClusterFeature].filter(Br);(r=(i=this.view)==null?void 0:i.graphics)==null||r.removeMany(t),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Yp(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(t){const{selectedFeature:i,updateLocationEnabled:r,view:s}=this;s&&r&&t&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>0?Math.floor((this.selectedFeatureIndex+1)/this.featuresPerPage):null}_featureViewModelsChange(){this.featurePage=this.featureCount>0?1:null}_setGraphicOnFeatureViewModels(){const{features:t,featureCount:i,featurePage:r,featuresPerPage:s,featureViewModels:n}=this;if(r==null)return;const o=((r-1)*s+i)%i,a=o+s;n.slice(o,a).forEach((u,c)=>{u&&(u.graphic??(u.graphic=t[o+c]))})}async _selectedFeatureChange(t){var o,a;const{location:i,updateLocationEnabled:r,view:s}=this;if(!t||!s)return;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(s.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Yp(t)?void 0:(t.symbol=await aW(t),this._selectedClusterFeature=t,void s.graphics.add(this._selectedClusterFeature));const n=(o=t.sourceLayer)==null?void 0:o.type;if(n!=="map-image"&&n!=="imagery"&&n!=="imagery-tile"||(t.symbol=await aW(t)),!r&&i||!t.geometry){if(r&&!t.geometry){await this.centerAtLocation();const u=(a=s.center)==null?void 0:a.clone();u&&(this.location=u)}}else this.location=lD(t.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}async _setFetchFeaturesPromises(t){const{pendingFeatures:i}=await this._fetchFeaturesWithController({mapPoint:t});this.promises=i}_destroyFeatureVMs(){this.featureViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:t,features:i,featureViewModels:r,view:s,spatialReference:n,map:o,timeZone:a,location:u}=this;if(Yp(i[0])||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!(i!=null&&i.length))return;const c=r.slice(),h=[];i.forEach((p,m)=>{if(!p)return;let y=null;if(c.some((g,v)=>(g&&g.graphic===p&&(y=g,c.splice(v,1)),!!y)),y)h[m]=y;else{const g=new DV({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:n,graphic:p===t?p:null,location:u,map:o,view:s,timeZone:a});h[m]=g}}),c.forEach(p=>p&&!p.destroyed&&p.destroy()),this._set("featureViewModels",h)}async _getScreenPoint(t,i){const{spatialReference:r,view:s}=this;if(!s)return null;await(s==null?void 0:s.when());const n=t==null?void 0:t.spatialReference;return n&&r?(await $S(n,r,null,i),s.toScreen(t)):null}_cancelFetchingFeatures(){const t=this._fetchFeaturesController;t&&t.abort(),this._fetchFeaturesController=null}async _projectScreenPointAndFetchFeatures({mapPoint:t,screenPoint:i,event:r,signal:s}){return this.fetchFeatures(i??await this._getScreenPoint(t??this.location,{signal:s}),{signal:s,event:r})}_fetchFeaturesWithController({mapPoint:t,screenPoint:i,event:r}){this._cancelFetchingFeatures();const s=new AbortController,{signal:n}=s;this._fetchFeaturesController=s;const o=this._projectScreenPointAndFetchFeatures({mapPoint:t,screenPoint:i,signal:n,event:r});return o.catch(()=>{}).then(()=>{this._fetchFeaturesController=null}),o}async _fetchFeaturesAndOpen(t){const{mapPoint:i,screenPoint:r}=t,{view:s}=this;this.removeHandles(XO),this.addHandles([G(()=>{var o;return(o=this.view)==null?void 0:o.scale},()=>this._debouncedLocationUpdate(i).catch(o=>{fi(o)||q.getLogger(this).error(o)})),Fi(()=>!this.visible,()=>{this.removeHandles(XO)},{once:!0})],XO);const{pendingFeatures:n}=await this._fetchFeaturesWithController({mapPoint:i,screenPoint:r,event:t});s!=null&&s.popup&&"open"in s.popup&&s.popup.open({location:i??void 0,promises:n})}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(t,i){return await t.when(),t.whenLayerView(i)}_getHighlightLayer(t){const{layer:i,sourceLayer:r}=t;return r&&"layer"in r&&r.layer?r.layer:(r==null?void 0:r.type)==="map-notes"||(r==null?void 0:r.type)==="subtype-group"?r:i}_getHighlightLayerView(t,i){return i.type==="subtype-sublayer"&&i.parent&&this._mapIncludesLayer(i.parent)?this._getLayerView(t,i.parent):i&&this._mapIncludesLayer(i)?this._getLayerView(t,i):null}_getHighlightTarget(t,i,r){if(R9e(i.type,r))return t;const s=t.getObjectId();if(s!=null)return s;const n=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||e9e:null,o=t.attributes;return o&&n&&o[n]||t}_mapIncludesLayer(t){var i,r;return!!((r=(i=this.map)==null?void 0:i.allLayers)!=null&&r.includes(t))}async _highlightFeature(t,i){this.removeHandles(t);const r=this[i];if(!r)return;const{highlightEnabled:s,view:n,visible:o}=this;if(!n||!s||!o)return;const a=this._getHighlightLayer(r);if(!a)return;const u=this._getHighlightLayerView(n,a);if(!u)return;this._highlightPromises[t]=u;const c=await u;if(!(c&&b9e(c)&&this._highlightPromises[t]===u&&this[i]&&this.highlightEnabled))return;const h=c.highlight(this._getHighlightTarget(r,a,n.type));this.addHandles(h,t)}async _highlightActiveFeature(){return this._highlightFeature("highlight-active-feature","activeFeature")}async _highlightSelectedFeature(){return this._highlightFeature("highlight-selected-feature","selectedFeature")}_updateFeatures(t){const{features:i}=this,r=t.filter(s=>!i.includes(s));r!=null&&r.length&&(this.features=i.concat(r))}};l([d()],Re.prototype,"_fetchFeaturesController",void 0),l([d({type:Mf})],Re.prototype,"actions",void 0),l([d({readOnly:!0})],Re.prototype,"active",null),l([d()],Re.prototype,"activeFeature",void 0),l([d({readOnly:!0})],Re.prototype,"allActions",null),l([d()],Re.prototype,"autoCloseEnabled",void 0),l([d()],Re.prototype,"browseClusterEnabled",void 0),l([d()],Re.prototype,"content",void 0),l([d({type:Mf,readOnly:!0})],Re.prototype,"defaultActions",null),l([d({type:Boolean})],Re.prototype,"defaultPopupTemplateEnabled",void 0),l([d({readOnly:!0})],Re.prototype,"featureCount",null),l([d()],Re.prototype,"featurePage",void 0),l([d({value:[]})],Re.prototype,"features",null),l([d()],Re.prototype,"featuresPerPage",void 0),l([d()],Re.prototype,"featureMenuOpen",void 0),l([d()],Re.prototype,"featureMenuTitle",void 0),l([d()],Re.prototype,"featureViewModelAbilities",void 0),l([d({readOnly:!0})],Re.prototype,"featureViewModels",void 0),l([d()],Re.prototype,"highlightEnabled",void 0),l([d()],Re.prototype,"includeDefaultActions",void 0),l([d()],Re.prototype,"initialDisplayMode",void 0),l([d({type:Se})],Re.prototype,"location",null),l([d()],Re.prototype,"map",null),l([d({readOnly:!0})],Re.prototype,"pendingPromisesCount",null),l([d({readOnly:!0})],Re.prototype,"promiseCount",null),l([d()],Re.prototype,"promises",null),l([d({readOnly:!0})],Re.prototype,"selectedClusterBoundaryFeature",void 0),l([d({value:null,readOnly:!0})],Re.prototype,"selectedFeature",null),l([d({value:-1})],Re.prototype,"selectedFeatureIndex",null),l([d({readOnly:!0})],Re.prototype,"selectedFeatureViewModel",null),l([d({type:we})],Re.prototype,"spatialReference",null),l([d({readOnly:!0})],Re.prototype,"state",null),l([d()],Re.prototype,"timeZone",null),l([d()],Re.prototype,"title",void 0),l([d()],Re.prototype,"updateLocationEnabled",void 0),l([d()],Re.prototype,"view",void 0),l([d()],Re.prototype,"visible",void 0),l([d({readOnly:!0})],Re.prototype,"waitingForContents",null),l([d({readOnly:!0})],Re.prototype,"waitingForResult",null),l([d()],Re.prototype,"zoomFactor",void 0),l([d()],Re.prototype,"zoomToLocation",void 0),l([d()],Re.prototype,"centerAtLocation",null),Re=l([x("esri.widgets.Features.FeaturesViewModel")],Re);const iC=Re;let Hn=class extends se{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!1,this.featureMenuHeading=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.flow=!0,this.heading=!0,this.spinner=!0}};l([d({type:Boolean,nonNullable:!0})],Hn.prototype,"actionBar",void 0),l([d({type:Boolean,nonNullable:!0})],Hn.prototype,"closeButton",void 0),l([d({type:Boolean,nonNullable:!0})],Hn.prototype,"collapseButton",void 0),l([d({type:Boolean,nonNullable:!0})],Hn.prototype,"featureMenuHeading",void 0),l([d({type:Boolean,nonNullable:!0})],Hn.prototype,"featureNavigation",void 0),l([d({type:Boolean,nonNullable:!0})],Hn.prototype,"featureListLayerTitle",void 0),l([d({type:Boolean,nonNullable:!0})],Hn.prototype,"flow",void 0),l([d({type:Boolean,nonNullable:!0})],Hn.prototype,"heading",void 0),l([d({type:Boolean,nonNullable:!0})],Hn.prototype,"spinner",void 0),Hn=l([x("esri.widgets.Features.FeaturesVisibleElements")],Hn);const Jue=Hn,lW="selected-index",F9e=0,uW="features-spinner";function cW(e){return(e==null?void 0:e.declaredClass.startsWith("esri.layers."))??!1}let qe=class extends Nue(cr){constructor(t,i){super(t,i),this._featureMenuIntersectionObserverCallback=([r])=>{r!=null&&r.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._featureMenuIntersectionObserverNode=null,this._spinner=null,this._feature=null,this._focusAbortController=null,this._drillInFlowItems=new Q,this._drillInWidget=new X8e({flowItems:this._drillInFlowItems}),this._rootNode=null,this._rootFlowItemNode=null,this._featureMenuViewportNode=null,this._actionBarMenuNode=null,this.collapsed=!1,this.featureNavigationTop=!1,this.headerActions=new Mf,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.responsiveActionsEnabled=!1,this.viewModel=new iC,this.visibleElements=new Jue,this._renderAction=(r,s)=>{const n=this._getActionTitle(r),{type:o,active:a,uid:u,disabled:c,indicator:h}=r;return r.visible?N("calcite-action",{active:o==="toggle"&&r.value,appearance:"solid",bind:this,"data-action-id":r.id,"data-action-uid":u,disabled:c,icon:this._getActionIcon(r),indicator:h,key:`action-${s}`,loading:a,onclick:this._triggerAction,scale:"s",text:n,textEnabled:!this._hideActionText,title:this._hideActionText?n:void 0},this._getFallbackIcon(r)):null},this._openFeatureMenu=()=>{this.featureMenuOpen=!0,this._focusFlowItemNode()},this._closeFeatureMenu=()=>{this.featureMenuOpen=!1,this._focusFlowItemNode()},this._previousFeature=()=>{this.viewModel.previous()},this._nextFeature=()=>{this.viewModel.next()},this._handleFeatureBack=()=>{this.initialDisplayMode==="list"?(this.selectedFeatureIndex=-1,this._focusFlowItemNode()):this._openFeatureMenu()},this._handleFeatureMenuBack=()=>{this.initialDisplayMode==="list"?(this.selectedFeatureIndex=-1,this._focusFlowItemNode()):this.featureMenuOpen&&this._closeFeatureMenu()},this._storeRootNode=r=>{this._rootNode=r},this._displaySpinnerThrottled=O1(()=>this._displaySpinner(),F9e),this._addSelectedFeatureIndexHandle(),this.addHandles([this._displaySpinnerThrottled,G(()=>{var r;return(r=this.viewModel)==null?void 0:r.active},()=>this._toggleScreenLocationEnabled()),G(()=>{var r;return(r=this.viewModel)==null?void 0:r.active},r=>this._drillInWidget.closed=!r),G(()=>{var r;return(r=this.visibleElements)==null?void 0:r.closeButton},r=>this._drillInWidget.closable=r),G(()=>{var r;return(r=this.visibleElements)==null?void 0:r.spinner},r=>this._spinnerEnabledChange(r)),G(()=>{var r;return(r=this.viewModel)==null?void 0:r.view},(r,s)=>this._viewChange(r,s)),G(()=>{var r,s;return(s=(r=this.viewModel)==null?void 0:r.view)==null?void 0:s.ready},(r,s)=>this._viewReadyChange(r??!1,s??!1)),G(()=>{var r,s;return[(r=this.viewModel)==null?void 0:r.waitingForResult,(s=this.viewModel)==null?void 0:s.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),G(()=>{var r;return(r=this.viewModel)==null?void 0:r.screenLocation},()=>this._closeOpenActionMenu()),G(()=>this.selectedFeatureWidget,()=>this._destroyDrillInFlowItemWidgets()),G(()=>{var s;const r=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel;return[r==null?void 0:r.title,r==null?void 0:r.state]},()=>this._setTitleFromFeatureWidget()),G(()=>{var s;const r=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel;return[r==null?void 0:r.content,r==null?void 0:r.state]},()=>this._setContentFromFeatureWidget()),G(()=>{var r;return(r=this.viewModel)==null?void 0:r.featureViewModels},()=>this._featureMenuViewportScrollTop()),G(()=>this._drillInFlowItems.length,()=>this._focusFlowItemNode()),this._drillInWidget.on("close",()=>this.close()),this._drillInWidget.on("exit",()=>this._destroyDrillInFlowItemWidgets()),this._drillInWidget.on("open-feature",({feature:r})=>this._openRelatedFeature(r)),this._drillInWidget.on("zoom-to-feature",({featureWidget:r})=>Zue(this.viewModel,r))])}loadDependencies(){return Ta({action:()=>L(()=>import("./index-Dzq-Cn3p.js"),__vite__mapDeps([286,230,231,232,233,234,235,276,236,239,241])),"action-bar":()=>L(()=>import("./index-pu4ZAHVc.js"),__vite__mapDeps([292,230,231,232,233,234,235,286,276,236,239,241,293,283,279,284,237,294,273,295])),"action-group":()=>L(()=>import("./index-LaZv9kIs.js").then(t=>t.i),__vite__mapDeps([295,230,231,232,233,234,235,286,276,236,239,241,293,283,279,284,237,294,273])),button:()=>L(()=>import("./index-hq8MlZzV.js"),__vite__mapDeps([229,230,231,232,233,234,235,236,237,238,239,240,241])),icon:()=>L(()=>import("./index-BfdRwHIr.js").then(t=>t.i),__vite__mapDeps([233,234,235])),flow:()=>L(()=>import("./index-Cf55l1We.js"),__vite__mapDeps([298,236,235,241,234])),"flow-item":()=>L(()=>import("./index-CpuGw6FZ.js"),__vite__mapDeps([296,230,231,232,233,234,235,286,276,236,239,241,293,283,279,284,237,294,273,275,297])),list:()=>L(()=>import("./index-0TAyCnuH.js"),__vite__mapDeps([274,230,231,232,275,236,235,234,276,233,277,278,237,238,239,273,240,241,279,280])),"list-item":()=>L(()=>import("./index-zXIHAONi.js"),__vite__mapDeps([281,233,234,235,282,236,283,279,231,239,273,241,284,285,230,232,286,276,287,288,289,280,290])),"list-item-group":()=>L(()=>import("./index-BaU-fQKA.js"),__vite__mapDeps([299,239,290])),loader:()=>L(()=>import("./index-BoqepOWk.js"),__vite__mapDeps([230,231,232]))})}destroy(){var t,i,r;this._destroyDrillInFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),(i=this._drillInWidget)==null||i.destroy(),(r=this._focusAbortController)==null||r.abort()}get _hideActionText(){var i;if(!this.responsiveActionsEnabled)return!1;const t=(i=this.view)==null?void 0:i.widthBreakpoint;return t==="xsmall"||t==="small"||t==="medium"}get _featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&!!this.viewModel.selectedFeature&&this.visibleElements.featureNavigation}get _isCollapsed(){return this._collapseEnabled&&this.collapsed}get _collapseEnabled(){return this.visibleElements.collapseButton&&(this.initialDisplayMode==="list"||!!this.title&&!!this.content)}get active(){return this.viewModel.active}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get icon(){return null}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(t){this.viewModel.featureMenuOpen=t}get featureMenuTitle(){return this.viewModel.featureMenuTitle}set featureMenuTitle(t){this.viewModel.featureMenuTitle=t}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get initialDisplayMode(){return this.viewModel.initialDisplayMode}set initialDisplayMode(t){this.viewModel.initialDisplayMode=t}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){const t=Array.from(this._drillInFlowItems).at(-1);if(!t)return null;const{flowType:i}=t;return i==="feature-association"||i==="feature-relationship"?t.graphic??null:null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){const{_feature:t,headingLevel:i,_drillInFlowItems:r,timeZone:s,spatialReference:n,map:o}=this,{selectedFeatureViewModel:a}=this.viewModel,u={title:!1};return a?(t?(t.viewModel=a,t.visibleElements=u):this._feature=new Lue({flowItems:r,headingLevel:i+1,timeZone:s,spatialReference:n,map:o,viewModel:a,visibleElements:u}),this._feature):null}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get timeZone(){return this.viewModel.timeZone}set timeZone(t){this.viewModel.timeZone=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}blur(){var i;const{active:t}=this.viewModel;t?(i=this._rootFlowItemNode)==null||i.blur():q.getLogger(this).warn("Features can only be blurred when currently active.")}clear(){return this.viewModel.clear()}close(){this.viewModel.visible=!1}fetchFeatures(t,i){return this.viewModel.fetchFeatures(t,i)}focus(){const{active:t}=this.viewModel;t?this._focusFlowItemNode():q.getLogger(this).warn("Features can only be focused when currently active.")}next(){return this.viewModel.next()}open(t){this.removeHandles(lW);const i={collapsed:(t==null?void 0:t.collapsed)??!1};this.set(i),this.viewModel.open(t),this.addHandles(Fi(()=>!this.viewModel.waitingForResult,()=>this._addSelectedFeatureIndexHandle(),{once:!0}))}previous(){return this.viewModel.previous()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){return N("div",{afterCreate:this._storeRootNode,bind:this,class:this.classes(wi.base,Te.widget,Te.panel),onkeydown:this._onMainKeydown},this._renderHeader(),this._renderContentContainer())}_renderFeatureNavigation(){return[this._renderPagination(),this.initialDisplayMode==="list"?this._renderFeaturePaginationText():this._renderFeatureMenuButton()]}_renderHeader(){return this.featureNavigationTop&&this._featureNavigationVisible?N("div",{class:wi.header,key:"header-actions"},this._renderFeatureNavigation()):null}_renderFooter(){return!this.featureNavigationTop&&this._featureNavigationVisible?N("div",{class:wi.footer,key:"footer-actions",slot:"footer"},this._renderFeatureNavigation()):null}_renderFeaturePaginationText(){const{messages:t,viewModel:i}=this,{featureCount:r,selectedFeatureIndex:s}=i;return N("div",{class:wi.paginationText,key:"feature-pagination-text"},eo(t.pageText,{index:ar(s+1),total:ar(r)}))}_renderFeatureMenuButton(){const{messages:t,viewModel:i}=this,{featureCount:r,selectedFeatureIndex:s,pendingPromisesCount:n}=i;return N("calcite-action",{appearance:"solid",bind:this,class:wi.paginationMenuButton,icon:"list",key:"feature-menu-button",label:t.selectFeature,loading:n>0,onclick:this._openFeatureMenu,scale:"s",text:eo(t.pageText,{index:ar(s+1),total:ar(r)}),textEnabled:!0,title:t.selectFeature})}_renderPagination(){const{previous:t,next:i}=this.messagesCommon.pagination;return N("calcite-action-bar",{class:wi.paginationActionBar,expandDisabled:!0,key:"pagination-action-bar",layout:"horizontal",overflowActionsDisabled:!0,scale:"s"},N("calcite-action-group",{scale:"s"},N("calcite-action",{appearance:"solid",class:wi.paginationPrevious,icon:"chevron-left",iconFlipRtl:!0,label:t,onclick:this._previousFeature,scale:"s",text:t,title:t}),N("calcite-action",{appearance:"solid",icon:"chevron-right",iconFlipRtl:!0,label:i,onclick:this._nextFeature,scale:"s",text:i,title:i})))}_renderFeatureMenuItem(t){const{initialDisplayMode:i}=this,{selectedFeatureViewModel:r,featureViewModels:s}=this.viewModel,n=t===r,o=s.indexOf(t);return N("calcite-list-item",{bind:this,"data-feature-index":o,key:`feature-menu-item-${t.uid}`,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onmouseleave:this._removeActiveFeature,onmouseover:this._setActiveFeature,selected:n,onCalciteListItemSelect:this._selectFeature},N("span",{innerHTML:t.title||this.messagesCommon.untitled,slot:"content"}),i==="list"?N("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}):null)}_groupResultsByLayer(){const{featureViewModels:t}=this.viewModel,i=new Map;return t.forEach(r=>{const s=r==null?void 0:r.graphic;if(!s)return;const{layer:n,sourceLayer:o}=s,a=(cW(n)?n:null)||(cW(o)?o:null),u=i.get(a)??[];i.set(a,[...u,r])}),i}_renderFeatureMenu(){const{messages:t,viewModel:i}=this,r=this._groupResultsByLayer(),s=this.initialDisplayMode==="list"?"none":"single";return i.featureViewModels.length?N("calcite-list",{displayMode:"flat",label:t==null?void 0:t.featuresList,selectionAppearance:"icon",selectionMode:s},Array.from(r.keys(),n=>{var u;const o=(u=r.get(n))==null?void 0:u.map(c=>this._renderFeatureMenuItem(c)),a=n?n.title??this.messagesCommon.untitled:null;return this.visibleElements.featureListLayerTitle&&a!==null?N("calcite-list-item-group",{heading:a,key:(n==null?void 0:n.uid)||"map-graphics"},o):o})):null}_renderHeaderAction(t,i){const r=t.title||"";return t.visible?N("calcite-action",{active:t.type==="toggle"&&t.value,appearance:"solid",bind:this,"data-action-id":t.id,"data-action-uid":t.uid,disabled:t.disabled,icon:t.icon??void 0,indicator:t.indicator,key:`header-action-${i}`,loading:t.active,onclick:this._triggerHeaderAction,slot:"header-actions-end",text:r,title:r}):null}_renderHeaderActions(){return this.headerActions.map((t,i)=>this._renderHeaderAction(t,i)).toArray()}_renderContentFeature(){const{headingLevel:t,visibleElements:i,_isCollapsed:r,_collapseEnabled:s,featureNavigationTop:n,_drillInFlowItems:o,initialDisplayMode:a,selectedFeature:u,featureMenuOpen:c}=this,{title:h,active:p}=this.viewModel,m=i.heading&&h?h:"";if(a==="list"&&!u)return null;const y=o.length===0&&(a==="list"?!!u:!c);return N("calcite-flow-item",{afterCreate:this._storeRootFlowItemNode,bind:this,class:this.classes({[wi.contentFeature]:!0,[wi.flowItemCollapsed]:r}),closable:i.closeButton,closed:!p,collapsed:r,collapseDirection:n?"down":"up",collapsible:s,headingLevel:t,key:"root-flow-item",selected:y,onCalciteFlowItemBack:this._handleFeatureBack,onCalciteFlowItemClose:this.close,onCalciteFlowItemToggle:this._handleCollapseToggle},m?N(CV,{class:this.classes(wi.featuresHeading,Te.heading),innerHTML:m,key:"header-content",level:this.headingLevel,slot:"header-content"}):null,this._renderHeaderActions(),this._renderActionBar(),N("div",{class:this.classes(wi.container,wi.contentContainer)},this._renderContent()),this._renderFooter())}_renderFeatureMenuContainer(){const{viewModel:t,visibleElements:i,featureMenuTitle:r,messages:s,messagesCommon:n,_drillInFlowItems:o,initialDisplayMode:a,featureMenuOpen:u,selectedFeature:c,_collapseEnabled:h,_isCollapsed:p,featureNavigationTop:m,headingLevel:y}=this,{active:g,featureViewModels:v,pendingPromisesCount:b}=t,{featureMenuHeading:w}=i,_=r??s.selectFeature;if(a==="feature"&&!u)return null;const S=o.length===0&&(a==="list"?!c:u);return N("calcite-flow-item",{afterCreate:this._storeFeatureMenuFlowItemNode,bind:this,class:this.classes({[wi.flowItemCollapsed]:p}),closable:a==="list"&&i.closeButton,closed:!g,collapsed:a==="list"&&p,collapseDirection:m?"down":"up",collapsible:a==="list"&&h,description:w?eo(s.total,{total:v.length}):void 0,heading:w?_:void 0,headingLevel:y,key:"feature-menu",loading:t.waitingForContents,selected:S,onCalciteFlowItemBack:T=>{T.preventDefault(),this._handleFeatureMenuBack()},onCalciteFlowItemClose:this.close,onCalciteFlowItemToggle:this._handleCollapseToggle},a==="list"?this._renderHeaderActions():null,b>0?N("calcite-loader",{class:wi.loader,inline:!0,key:"feature-menu-loader",label:n.loading,slot:"header-actions-end"}):null,N("div",{class:wi.container},this._renderFeatureMenu()),N("div",{afterCreate:this._featureMenuIntersectionObserverCreated,bind:this,class:wi.featureMenuObserver}),a==="feature"?N("calcite-button",{appearance:"transparent",onclick:this._handleFeatureMenuBack,slot:"footer-actions",width:"full"},n.back):null)}_renderContentContainer(){const t=this.initialDisplayMode==="list"?[this._renderFeatureMenuContainer(),this._renderContentFeature(),this._drillInWidget.render()]:[this._renderContentFeature(),this._renderFeatureMenuContainer(),this._drillInWidget.render()];return this.visibleElements.flow?N("calcite-flow",{key:"content-container"},t):t}_getFallbackIcon(t){const{className:i,icon:r}=t;if(r)return null;const s=Z6e({action:t,feature:this.selectedFeature}),n={[wi.icon]:!!i,[wi.actionImage]:!!s};return i&&(n[i]=!0),s||i?N("span",{"aria-hidden":"true",class:this.classes(wi.icon,n),key:"icon",styles:W6e(s)}):null}_renderActionBar(){var t;return!this._isCollapsed&&this.visibleElements.actionBar&&((t=this.viewModel.allActions)!=null&&t.length)?N("calcite-action-bar",{expandDisabled:!0,expanded:!this._hideActionText,key:"header-action-bar",scale:"s",slot:"action-bar"},N("calcite-action-group",{afterCreate:i=>this._actionBarMenuNode=i,overlayPositioning:"fixed",scale:"s"},this._renderActions())):null}_renderActions(){return this.viewModel.allActions.toArray().map(this._renderAction)}_renderContent(){var i;const t=(i=this.viewModel)==null?void 0:i.content;return t?typeof t=="string"?N("div",{class:Jt.contentNode,innerHTML:t,key:t}):this.renderNodeContent(t):null}_handleCollapseToggle(){this.collapsed=!this.collapsed}async _openRelatedFeature(t){await t.viewModel.updateGeometry();const i=t.graphic,r=i==null?void 0:i.geometry;if(r==null||i==null)return;this._destroyDrillInFlowItemWidgets(),await this.viewModel.zoomTo({target:r});const s=lD(r);this.open({features:[i],location:s??void 0}),this._focusFlowItemNode()}async _focusFlowItemNode(){var r,s;(r=this._focusAbortController)==null||r.abort(),this._focusAbortController=new AbortController;const t=this._focusAbortController.signal;await _n(G5(t));const i=(s=this._rootNode)==null?void 0:s.querySelector("calcite-flow-item[selected]");pie(i)}_storeRootFlowItemNode(t){this._rootFlowItemNode=t}_storeFeatureMenuFlowItemNode(t){this._featureMenuViewportNode=t}_setActiveFeature(t){var s;const{viewModel:i}=this,r=t.currentTarget["data-feature-index"];i.activeFeature=((s=i.features)==null?void 0:s[r])||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_selectFeature(t){const i=t.currentTarget["data-feature-index"];isNaN(i)||(this.viewModel.selectedFeatureIndex=i),this.initialDisplayMode==="feature"?this._handleFeatureMenuBack():this._focusFlowItemNode()}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(t){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(t),this._featureMenuIntersectionObserverNode=t}_getActionIcon(t){return t.icon?t.icon:t.image||t.className?void 0:"question"}_getActionTitle(t){const{messages:i,selectedFeature:r,messagesCommon:s}=this,{id:n}=t,o=r==null?void 0:r.attributes,a=t.title??"",u=n==="zoom-to-feature"?eo(a,{messages:i}):n==="remove-selected-feature"?eo(a,{messages:s}):n==="zoom-to-clustered-features"||n==="browse-clustered-features"?eo(a,{messages:i}):t.title;return u&&o?eo(u,o):u??""}_onMainKeydown(t){const{key:i}=t;i==="ArrowLeft"&&(t.stopPropagation(),this._handleFeatureMenuBack(),this.previous()),i==="ArrowRight"&&(t.stopPropagation(),this._handleFeatureMenuBack(),this.next())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&this._featureMenuViewportNode.scrollContentTo({top:0})}_setContentFromFeatureWidget(){const{selectedFeatureWidget:t}=this;t&&(this.viewModel.content=t)}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:t,messagesCommon:i}=this,r=t==null?void 0:t.viewModel;t&&(this.viewModel.title=(r==null?void 0:r.state)==="error"?i==null?void 0:i.errorMessage:(r==null?void 0:r.title)||"")}_addSelectedFeatureIndexHandle(){const t=G(()=>{var i;return(i=this.viewModel)==null?void 0:i.selectedFeatureIndex},(i,r)=>this._selectedFeatureIndexUpdated(i,r));this.addHandles(t,lW)}_selectedFeatureIndexUpdated(t,i){const{featureCount:r}=this.viewModel;r&&t!==i&&t!==-1&&(this._destroyDrillInFlowItemWidgets(),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_triggerHeaderAction(t){const i=t.currentTarget;if(i.disabled)return;const r=i.dataset.actionUid,s=this.headerActions.find(({uid:n})=>n===r);s&&!s.disabled&&((s==null?void 0:s.type)==="toggle"&&(s.value=!s.value),this.emit("trigger-header-action",{action:s}))}_triggerAction(t){const i=t.currentTarget;if(i.disabled)return;const r=i.dataset.actionUid,{allActions:s}=this.viewModel,n=s.findIndex(a=>a.uid===r),o=s.at(n);o&&o.type==="toggle"&&(o.value=!o.value),this.viewModel.triggerAction(n)}_createSpinner(t){t&&(this._spinner=new Q8e({view:t}),t.ui.add(this._spinner,{key:uW,position:"manual",internal:!0}))}_wireUpView(t){var i;this._destroySpinner(),t&&((i=this.visibleElements)!=null&&i.spinner)&&this._createSpinner(t)}_hideSpinner(){const{_spinner:t}=this;t&&(t.location=null,t.hide())}_viewReadyChange(t,i){var r;t?this._wireUpView((r=this.viewModel)==null?void 0:r.view):i&&this.viewModel.clear()}_viewChange(t,i){t&&i&&this.viewModel.clear()}_destroySelectedFeatureWidget(){const{_feature:t}=this;t&&(t.viewModel=null,!t.destroyed&&t.destroy()),this._feature=null}_closeOpenActionMenu(){const{_actionBarMenuNode:t}=this;t&&(t.menuOpen=!1)}_destroyDrillInFlowItemWidgets(){this._drillInFlowItems.drain(t=>{"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),"activeCategory"in t.viewModel&&(t.viewModel.activeCategory=null),t.viewModel=null,t.destroy()})}_toggleScreenLocationEnabled(){const{viewModel:t}=this;t&&(t.screenLocationEnabled=t.active)}_displaySpinner(){const{_spinner:t}=this;if(!t)return;const{location:i,waitingForResult:r}=this.viewModel;r&&i?t.show({location:i}):t.hide()}_destroySpinner(){var i,r;const{_spinner:t}=this;t&&((r=(i=t.view)==null?void 0:i.ui)==null||r.remove(t,uW),t.destroy(),this._spinner=null)}_spinnerEnabledChange(t){var i;this._destroySpinner(),t&&this._createSpinner((i=this.viewModel)==null?void 0:i.view)}};l([d()],qe.prototype,"_drillInFlowItems",void 0),l([d()],qe.prototype,"_hideActionText",null),l([d()],qe.prototype,"_featureNavigationVisible",null),l([d()],qe.prototype,"_isCollapsed",null),l([d()],qe.prototype,"_collapseEnabled",null),l([d({readOnly:!0})],qe.prototype,"active",null),l([d()],qe.prototype,"collapsed",void 0),l([d()],qe.prototype,"content",null),l([d()],qe.prototype,"icon",null),l([d()],qe.prototype,"featureMenuOpen",null),l([d()],qe.prototype,"featureMenuTitle",null),l([d()],qe.prototype,"featureNavigationTop",void 0),l([d()],qe.prototype,"features",null),l([d()],qe.prototype,"goToOverride",null),l([d({type:Mf})],qe.prototype,"headerActions",void 0),l([d()],qe.prototype,"headingLevel",void 0),l([d()],qe.prototype,"initialDisplayMode",null),l([d()],qe.prototype,"location",null),l([d()],qe.prototype,"label",null),l([d()],qe.prototype,"map",null),l([d(),Wi("esri/widgets/Features/t9n/Features")],qe.prototype,"messages",void 0),l([d(),Wi("esri/t9n/common")],qe.prototype,"messagesCommon",void 0),l([d()],qe.prototype,"promises",null),l([d()],qe.prototype,"responsiveActionsEnabled",void 0),l([d({readOnly:!0})],qe.prototype,"selectedFeature",null),l([d({readOnly:!0})],qe.prototype,"selectedDrillInFeature",null),l([d()],qe.prototype,"selectedFeatureIndex",null),l([d({readOnly:!0})],qe.prototype,"selectedFeatureWidget",null),l([d()],qe.prototype,"spatialReference",null),l([d()],qe.prototype,"title",null),l([d()],qe.prototype,"timeZone",null),l([d()],qe.prototype,"updateLocationEnabled",null),l([d()],qe.prototype,"view",null),l([d({type:iC}),mue(["triggerAction","trigger-action"])],qe.prototype,"viewModel",void 0),l([d({type:Jue,nonNullable:!0})],qe.prototype,"visibleElements",void 0),l([d()],qe.prototype,"visible",null),qe=l([x("esri.widgets.Features")],qe);const N9e=qe,dn="esri-popup",Bh=`${dn}--is-docked`,yi={base:dn,baseHidden:`${dn}--hidden`,main:`${dn}__main-container`,shadow:`${dn}--shadow`,isDocked:Bh,isDockedTopLeft:`${Bh}-top-left`,isDockedTopCenter:`${Bh}-top-center`,isDockedTopRight:`${Bh}-top-right`,isDockedBottomLeft:`${Bh}-bottom-left`,isDockedBottomCenter:`${Bh}-bottom-center`,isDockedBottomRight:`${Bh}-bottom-right`,alignTopCenter:`${dn}--aligned-top-center`,alignBottomCenter:`${dn}--aligned-bottom-center`,alignTopLeft:`${dn}--aligned-top-left`,alignBottomLeft:`${dn}--aligned-bottom-left`,alignTopRight:`${dn}--aligned-top-right`,alignBottomRight:`${dn}--aligned-bottom-right`,pointer:`${dn}__pointer`,pointerDirection:`${dn}__pointer-direction`};let gD=class extends iC{constructor(t){super(t)}};gD=l([x("esri.widgets.Popup.PopupViewModel")],gD);const Yue=gD;let ea=class extends se{constructor(){super(...arguments),this.actionBar=!0,this.closeButton=!0,this.collapseButton=!0,this.featureMenuHeading=!0,this.featureNavigation=!0,this.featureListLayerTitle=!0,this.heading=!0,this.spinner=!0}};l([d({type:Boolean,nonNullable:!0})],ea.prototype,"actionBar",void 0),l([d({type:Boolean,nonNullable:!0})],ea.prototype,"closeButton",void 0),l([d({type:Boolean,nonNullable:!0})],ea.prototype,"collapseButton",void 0),l([d({type:Boolean,nonNullable:!0})],ea.prototype,"featureMenuHeading",void 0),l([d({type:Boolean,nonNullable:!0})],ea.prototype,"featureNavigation",void 0),l([d({type:Boolean,nonNullable:!0})],ea.prototype,"featureListLayerTitle",void 0),l([d({type:Boolean,nonNullable:!0})],ea.prototype,"heading",void 0),l([d({type:Boolean,nonNullable:!0})],ea.prototype,"spinner",void 0),ea=l([x("esri.widgets.Popup.PopupVisibleElements")],ea);const Que=ea,L9e=200,dW={buttonEnabled:!0,position:"auto",breakpoint:{width:544}};let He=class extends cr{constructor(t,i){super(t,i),this._dockAction=new m0({id:"popup-dock-action"}),this._featuresWidget=new N9e({responsiveActionsEnabled:!0}),this._containerNode=null,this._mainContainerNode=null,this._pointerOffsetInPx=16,this._focusAbortController=null,this.alignment="auto",this.dockEnabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new Yue,this.visibleElements=new Que}initialize(){this.addHandles([G(()=>{var t,i;return[(i=(t=this.viewModel)==null?void 0:t.view)==null?void 0:i.widthBreakpoint,this.dockEnabled]},()=>this._handleDockIcon(),xe),G(()=>{var t,i;return[this.dockEnabled,(t=this.messages)==null?void 0:t.undock,(i=this.messages)==null?void 0:i.dock]},()=>this._handleDockEnabled(),xe),G(()=>this.dockOptions,t=>{const{_dockAction:i}=this,r=this._featuresWidget.headerActions;r.remove(i),t.buttonEnabled&&r.add(i)},xe),G(()=>{var t;return(t=this.viewModel)==null?void 0:t.screenLocation},()=>this._positionContainer()),G(()=>{var t;return[(t=this.viewModel)==null?void 0:t.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),G(()=>{var t,i,r,s,n,o,a;return[(t=this.viewModel)==null?void 0:t.screenLocation,(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.size,(o=this.viewModel)==null?void 0:o.active,(a=this.viewModel)==null?void 0:a.location,this.alignment]},()=>this.reposition()),G(()=>{var t,i;return(i=(t=this.viewModel)==null?void 0:t.view)==null?void 0:i.size},(t,i)=>this._updateDockEnabledForViewSize(t,i)),G(()=>{var t;return(t=this.viewModel)==null?void 0:t.view},(t,i)=>this._viewChange(t,i)),G(()=>{var t,i;return(i=(t=this.viewModel)==null?void 0:t.view)==null?void 0:i.ready},(t,i)=>this._viewReadyChange(t??!1,i??!1)),G(()=>this.viewModel,()=>this._featuresWidget.viewModel=this.viewModel,xe),G(()=>this._featureNavigationTop,t=>this._featuresWidget.featureNavigationTop=t,xe),G(()=>this.headingLevel,t=>this._featuresWidget.headingLevel=t,xe),G(()=>this.visibleElements.actionBar,t=>this._featuresWidget.visibleElements.actionBar=!!t,xe),G(()=>this.visibleElements.closeButton,t=>this._featuresWidget.visibleElements.closeButton=!!t,xe),G(()=>this.visibleElements.collapseButton,t=>this._featuresWidget.visibleElements.collapseButton=!!t,xe),G(()=>this.visibleElements.heading,t=>this._featuresWidget.visibleElements.heading=!!t,xe),G(()=>this.visibleElements.spinner,t=>this._featuresWidget.visibleElements.spinner=!!t,xe),G(()=>this.visibleElements.featureNavigation,t=>this._featuresWidget.visibleElements.featureNavigation=!!t,xe),G(()=>this.visibleElements.featureMenuHeading,t=>this._featuresWidget.visibleElements.featureMenuHeading=!!t,xe),G(()=>this.visibleElements.featureListLayerTitle,t=>this._featuresWidget.visibleElements.featureListLayerTitle=!!t,xe),Hs(()=>this._featuresWidget,"trigger-header-action",t=>{t.action===this._dockAction&&(this.dockEnabled=!this.dockEnabled)})])}destroy(){var t;this._dockAction.destroy(),this._featuresWidget&&(this._featuresWidget.viewModel=new iC,this._featuresWidget.destroy()),(t=this._focusAbortController)==null||t.abort()}get _featureNavigationTop(){const{currentAlignment:t,currentDockPosition:i}=this;return t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right"}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}get active(){return this.viewModel.active}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(t){this.viewModel.autoCloseEnabled=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get collapsed(){return this._featuresWidget.collapsed}set collapsed(t){this._featuresWidget.collapsed=t}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||dW}set dockOptions(t){var u,c;const i={...dW},r=(c=(u=this.viewModel)==null?void 0:u.view)==null?void 0:c.breakpoints,s={};r&&(s.width=r.xsmall,s.height=r.xsmall);const n={...i,...t},o={...i.breakpoint,...s},{breakpoint:a}=n;typeof a=="object"?n.breakpoint={...o,...a}:a&&(n.breakpoint=o),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get featureMenuOpen(){return this.viewModel.featureMenuOpen}set featureMenuOpen(t){this.viewModel.featureMenuOpen=t}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(t){this.viewModel.highlightEnabled=t}get icon(){return"popup"}set icon(t){this._overrideIfSome("icon",t)}get initialDisplayMode(){return this.viewModel.initialDisplayMode}set initialDisplayMode(t){this.viewModel.initialDisplayMode=t}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedDrillInFeature(){return this._featuresWidget.selectedDrillInFeature??null}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){return this._featuresWidget.selectedFeatureWidget}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}blur(){const{active:t}=this.viewModel;t||q.getLogger(this).warn("Popup can only be blurred when currently active."),this._featuresWidget.blur()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(t,i){return this.viewModel.fetchFeatures(t,i)}focus(){const{active:t}=this.viewModel;t||q.getLogger(this).warn("Popup can only be focused when currently active."),this._handleFocus()}next(){return this.viewModel.next()}open(t){const i=!!t&&!!t.featureMenuOpen,r={collapsed:!!t&&!!t.collapsed,featureMenuOpen:i};this.set(r),this.viewModel.open(t),t!=null&&t.shouldFocus&&this._handleFocus(!0)}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){var p,m,y,g;const{dockEnabled:t,currentAlignment:i,currentDockPosition:r}=this,{active:s,screenLocation:n}=this.viewModel,o=s&&t,a=s&&!t,u=(m=(p=this.selectedFeature)==null?void 0:p.layer)==null?void 0:m.title,c=(g=(y=this.selectedFeature)==null?void 0:y.layer)==null?void 0:g.id,h={[yi.alignTopCenter]:i==="top-center",[yi.alignBottomCenter]:i==="bottom-center",[yi.alignTopLeft]:i==="top-left",[yi.alignBottomLeft]:i==="bottom-left",[yi.alignTopRight]:i==="top-right",[yi.alignBottomRight]:i==="bottom-right",[yi.isDocked]:o,[yi.shadow]:a,[yi.isDockedTopLeft]:r==="top-left",[yi.isDockedTopCenter]:r==="top-center",[yi.isDockedTopRight]:r==="top-right",[yi.isDockedBottomLeft]:r==="bottom-left",[yi.isDockedBottomCenter]:r==="bottom-center",[yi.isDockedBottomRight]:r==="bottom-right"};return N("div",{afterCreate:this._positionContainer,afterUpdate:this._positionContainer,"aria-hidden":(!s).toString(),"aria-label":Lf(this.title??""),"aria-modal":"false",bind:this,class:this.classes(yi.base,h,{[yi.baseHidden]:!n&&!t}),"data-layer-id":c,"data-layer-title":u,role:"dialog"},s?[this._renderMainContainer(),this._renderPointer()]:null)}_renderPointer(){return this.dockEnabled?null:N("div",{class:yi.pointer,key:"popup-pointer",role:"presentation"},N("div",{class:this.classes(yi.pointerDirection,yi.shadow)}))}_renderMainContainer(){const{dockEnabled:t}=this,i={[yi.shadow]:t};return N("div",{afterCreate:this._setMainContainerNode,afterUpdate:this._setMainContainerNode,bind:this,class:this.classes(yi.main,Te.widget,i)},this._featuresWidget.render())}_getAnimationDurationMS(){const{_containerNode:t}=this;return t?1e3*parseFloat(window.getComputedStyle(t).animationDuration):L9e}async _handleFocus(t=!1){var r;(r=this._focusAbortController)==null||r.abort(),this._focusAbortController=new AbortController;const i=this._focusAbortController.signal;t&&await vl(()=>{var s;return((s=this.viewModel)==null?void 0:s.active)===!0},{signal:i}),await _n(G5(i)),await _n(pS(this._getAnimationDurationMS(),i)),this._featuresWidget.focus()}_isOutsideView(t){const{popupHeight:i,popupWidth:r,screenLocation:s,side:n,view:o}=t;if(isNaN(r)||isNaN(i)||!o||!s)return!1;const a=o.padding;return n==="right"&&s.x+r/2>o.width-a.right||n==="left"&&s.x-r/2<a.left||n==="top"&&s.y-i<a.top||n==="bottom"&&s.y+i>o.height-a.bottom}_calculateAutoAlignment(t){if(t!=="auto")return t;const{_pointerOffsetInPx:i,_containerNode:r,_mainContainerNode:s,viewModel:n}=this,{screenLocation:o,view:a}=n;if(o==null||!a||!r)return"top-center";function u(T){return parseInt(T.replaceAll(/[^-\d.]/g,""),10)}const c=s?window.getComputedStyle(s,null):null,h=c?u(c.getPropertyValue("max-height")):0,p=c?u(c.getPropertyValue("height")):0,{height:m,width:y}=r.getBoundingClientRect(),g=y+i,v=Math.max(m,h,p)+i,b=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"right",view:a}),w=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"left",view:a}),_=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"top",view:a}),S=this._isOutsideView({popupHeight:v,popupWidth:g,screenLocation:o,side:"bottom",view:a});return w?_?"bottom-right":"top-right":b?_?"bottom-left":"top-left":_?S?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(t){return typeof t=="function"?t.call(this):t}_getCurrentAlignment(){const{alignment:t,dockEnabled:i}=this;return i||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(t)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(t){const i=["left","right"];return al(this.container)&&i.reverse(),t==null?void 0:t.replace(/leading/gi,i[0]).replaceAll(/trailing/gi,i[1])}_callDockPosition(t){return typeof t=="function"?t.call(this):t}_getDockPosition(){var t;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((t=this.dockOptions)==null?void 0:t.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_calculateAutoDockPosition(t){var a;if(t!=="auto")return t;const i=(a=this.viewModel)==null?void 0:a.view,r=al(this.container)?"top-left":"top-right";if(!i)return r;const s=i.padding||{left:0,right:0},n=i.width-s.left-s.right,{breakpoints:o}=i;return o&&n<=o.xsmall?"bottom-center":r}_getDockIcon(){const t=this._getDockPosition();if(this.dockEnabled)return"minimize";switch(t){case"top-left":case"bottom-left":return"dock-left";case"top-center":return"maximize";case"bottom-center":return"dock-bottom";default:return"dock-right"}}_handleDockIcon(){this._dockAction.icon=this._getDockIcon()}_handleDockEnabled(){var t,i;this._dockAction.title=this.dockEnabled?(t=this.messages)==null?void 0:t.undock:(i=this.messages)==null?void 0:i.dock}_setMainContainerNode(t){this._mainContainerNode=t}_positionContainer(t=this._containerNode){if(t&&(this._containerNode=t),!this._containerNode)return;const{screenLocation:i}=this.viewModel,{width:r}=this._containerNode.getBoundingClientRect(),s=this._calculatePositionStyle(i,r);s&&Object.assign(this._containerNode.style,s)}_calculateFullWidth(t){const{currentAlignment:i,_pointerOffsetInPx:r}=this;return i==="top-left"||i==="bottom-left"||i==="top-right"||i==="bottom-right"?t+r:t}_calculateAlignmentPosition(t,i,r,s){const{currentAlignment:n,_pointerOffsetInPx:o}=this;if(!r)return;const{padding:a}=r,u=s/2,c=r.height-i,h=r.width-t;return n==="bottom-center"?{top:i+o-a.top,left:t-u-a.left}:n==="top-left"?{bottom:c+o-a.bottom,right:h+o-a.right}:n==="bottom-left"?{top:i+o-a.top,right:h+o-a.right}:n==="top-right"?{bottom:c+o-a.bottom,left:t+o-a.left}:n==="bottom-right"?{top:i+o-a.top,left:t+o-a.left}:n==="top-center"?{bottom:c+o-a.bottom,left:t-u-a.left}:void 0}_calculatePositionStyle(t,i){const{dockEnabled:r,view:s}=this;if(!s)return;if(r)return{left:"",top:"",right:"",bottom:""};if(t==null||!i)return;const n=this._calculateFullWidth(i),o=this._calculateAlignmentPosition(t.x,t.y,s,n);return o?{top:o.top!==void 0?`${o.top}px`:"auto",left:o.left!==void 0?`${o.left}px`:"auto",bottom:o.bottom!==void 0?`${o.bottom}px`:"auto",right:o.right!==void 0?`${o.right}px`:"auto"}:void 0}_viewChange(t,i){t&&i&&(this.close(),this.clear())}_viewReadyChange(t,i){t?this._wireUpView():i&&(this.close(),this.clear())}_wireUpView(){this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(t,i,r){const[s,n]=t,[o,a]=i,{width:u=0,height:c=0}=r??{};return s<=u&&o>u||s>u&&o<=u||n<=c&&a>c||n>c&&a<=c}_updateDockEnabledForViewSize(t,i){var h,p;if(!t||!i)return;const r=((p=(h=this.viewModel)==null?void 0:h.view)==null?void 0:p.padding)||{left:0,right:0,top:0,bottom:0},s=r.left+r.right,n=r.top+r.bottom,o=[],a=[];o[0]=t[0]-s,o[1]=t[1]-n,a[0]=i[0]-s,a[1]=i[1]-n;const{dockOptions:u}=this,c=u.breakpoint;this._dockingThresholdCrossed(o,a,c)&&this._setDockEnabledForViewSize(u),this._setCurrentDockPosition()}_toggleScreenLocationEnabled(){const{dockEnabled:t,viewModel:i}=this;if(!i)return;const r=i.active&&!t;i.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(t){var u,c;const i=t.breakpoint,r=(c=(u=this.viewModel)==null?void 0:u.view)==null?void 0:c.ui;if(!r)return!1;const{width:s,height:n}=r;if(isNaN(s)||isNaN(n)||!i)return!1;const o=i.hasOwnProperty("width")&&s<=(i.width??0),a=i.hasOwnProperty("height")&&n<=(i.height??0);return o||a}_setDockEnabledForViewSize(t){t.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(t))}};l([d({readOnly:!0})],He.prototype,"_featureNavigationTop",null),l([d()],He.prototype,"actions",null),l([d({readOnly:!0})],He.prototype,"active",null),l([d()],He.prototype,"alignment",void 0),l([d()],He.prototype,"autoCloseEnabled",null),l([d()],He.prototype,"defaultPopupTemplateEnabled",null),l([d()],He.prototype,"content",null),l([d()],He.prototype,"collapsed",null),l([d({readOnly:!0})],He.prototype,"currentAlignment",null),l([d({readOnly:!0})],He.prototype,"currentDockPosition",null),l([d()],He.prototype,"dockOptions",null),l([d()],He.prototype,"dockEnabled",void 0),l([d({readOnly:!0})],He.prototype,"featureCount",null),l([d()],He.prototype,"featureMenuOpen",null),l([d()],He.prototype,"features",null),l([d()],He.prototype,"goToOverride",null),l([d()],He.prototype,"headingLevel",void 0),l([d()],He.prototype,"highlightEnabled",null),l([d()],He.prototype,"icon",null),l([d()],He.prototype,"initialDisplayMode",null),l([d()],He.prototype,"location",null),l([d()],He.prototype,"label",null),l([d(),Wi("esri/widgets/Popup/t9n/Popup")],He.prototype,"messages",void 0),l([d()],He.prototype,"promises",null),l([d({readOnly:!0})],He.prototype,"selectedFeature",null),l([d({readOnly:!0})],He.prototype,"selectedDrillInFeature",null),l([d()],He.prototype,"selectedFeatureIndex",null),l([d({readOnly:!0})],He.prototype,"selectedFeatureWidget",null),l([d()],He.prototype,"title",null),l([d()],He.prototype,"updateLocationEnabled",null),l([d()],He.prototype,"view",null),l([d({type:Yue}),mue(["triggerAction","trigger-action"])],He.prototype,"viewModel",void 0),l([d()],He.prototype,"visible",null),l([d({type:Que,nonNullable:!0})],He.prototype,"visibleElements",void 0),He=l([x("esri.widgets.Popup")],He);const Xue=He,hW=Object.freeze(Object.defineProperty({__proto__:null,default:Xue},Symbol.toStringTag,{value:"Module"})),k9e=()=>q.getLogger("esri.views.2d.engine.webgl.alignmentUtils");var nl,ao;function P9e(e){if(!e)return nl.Center;switch(e){case"Left":case"left":return nl.Left;case"Right":case"right":return nl.Right;case"Justify":return k9e().warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),nl.Center;case"Center":case"center":return nl.Center}}function D9e(e){if(!e)return ao.Center;switch(e){case"Top":case"top":return ao.Top;case"Center":case"middle":return ao.Center;case"Baseline":case"baseline":return ao.Baseline;case"Bottom":case"bottom":return ao.Bottom}}function tst(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return["right","bottom"];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return["center","bottom"];case"above-right":case"esriServerPointLabelPlacementAboveRight":return["left","bottom"];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return["right","middle"];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return["center","middle"];case"center-right":case"esriServerPointLabelPlacementCenterRight":return["left","middle"];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return["right","top"];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return["center","top"];case"below-right":case"esriServerPointLabelPlacementBelowRight":return["left","top"];default:return console.debug(`Found invalid placement type ${e}`),["center","middle"]}}function ist(e){switch(e){case nl.Right:case"right":return-1;case nl.Center:case"center":return 0;case nl.Left:case"left":return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function rst(e){switch(e){case ao.Top:case"top":return 1;case ao.Center:case"middle":return 0;case ao.Bottom:case ao.Baseline:case"baseline":case"bottom":return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}(function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"})(nl||(nl={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(ao||(ao={}));let j9e=class{constructor(t=0,i=0,r=0,s=0){this.x=t,this.y=i,this.width=r,this.height=s}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}},jb=class vD{constructor(t,i,r,s){this.transformedX=0,this.transformedY=0,this.center=Qf(t,i),this.centerT=T1(),this.halfWidth=r/2,this.halfHeight=s/2,this.width=r,this.height=s}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(t){this.center[0]=t}set y(t){this.center[1]=t}clone(){return new vD(this.x,this.y,this.width,this.height)}serialize(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}findCollisionDelta(t,i=4){const r=Math.abs(t.centerT[0]-this.centerT[0]),s=Math.abs(t.centerT[1]-this.centerT[1]),n=(t.halfWidth+this.halfWidth+i)/r,o=(t.halfHeight+this.halfHeight+i)/s,a=Math.min(n,o);return Math.log2(a)}extend(t){const i=Math.min(this.xmin,t.xmin),r=Math.min(this.ymin,t.ymin),s=Math.max(this.xmax,t.xmax)-i,n=Math.max(this.ymax,t.ymax)-r,o=i+s/2,a=r+n/2;this.width=s,this.height=n,this.halfWidth=s/2,this.halfHeight=n/2,this.x=o,this.y=a}static deserialize(t){const i=t.readF32(),r=t.readF32(),s=t.readInt32(),n=t.readInt32();return new vD(i,r,s,n)}};const Kue=22,ece=4,V9e=Kue+ece,z9e=Kue-6,pW=3,U9e=Math.PI/180,Ac=8,q9e=1.5;let tce=class{constructor(t,i,r,s){this._rotationT=xf(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const n=r.rect,o=new Float32Array(8);t*=s,i*=s;const a=r.code?n.width*s:r.metrics.width,u=r.code?n.height*s:r.metrics.height;this.width=a,this.height=u,o[0]=t,o[1]=i,o[2]=t+a,o[3]=i,o[4]=t,o[5]=i+u,o[6]=t+a,o[7]=i+u,this._data=o,this._setTextureCoords(n),this._scale=s,this._mosaic=r,this.x=t,this.y=i,this.maxOffset=Math.max(t+a,i+u)}get mosaic(){return this._mosaic}set angle(t){this._angle=t,EI(this._rotationT,-t),this._setOffsets()}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:t,width:i}=this._mosaic.metrics,r=i*this._scale,s=Math.abs(t)*this._scale,n=new Float32Array(8);n[0]=this.x,n[1]=this.y,n[2]=this.x+r,n[3]=this.y,n[4]=this.x,n[5]=this.y+s,n[6]=this.x+r,n[7]=this.y+s;const o=S1(xf(),this._rotationT,this._transform);rne(n,n,o);let a=1/0,u=1/0,c=-1/0,h=-1/0;for(let v=0;v<4;v++){const b=n[2*v],w=n[2*v+1];a=Math.min(a,b),u=Math.min(u,w),c=Math.max(c,b),h=Math.max(h,w)}const p=c-a,m=h-u,y=a+p/2,g=u+m/2;this._bounds=new jb(y,g,p,m)}return this._bounds}setTransform(t){this._transform=t,this._offsets=null}_setOffsets(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});const t=S1(xf(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],kr(this._offsets.topLeft,this._offsets.topLeft,t),kr(this._offsets.topRight,this._offsets.topRight,t),kr(this._offsets.bottomLeft,this._offsets.bottomLeft,t),kr(this._offsets.bottomRight,this._offsets.bottomRight,t)}_setTextureCoords({x:t,y:i,width:r,height:s}){this._texcoords={topLeft:[t,i],topRight:[t+r,i],bottomLeft:[t,i+s],bottomRight:[t+r,i+s]}}};const G9e=(e,t)=>({code:0,page:0,sdf:!0,rect:new j9e(0,0,11,8),textureBinding:t,metrics:{advance:0,height:4,width:e,left:0,top:0}});function fw(e,t){return e.forEach(i=>kr(i,i,t)),{topLeft:e[0],topRight:e[1],bottomLeft:e[2],bottomRight:e[3]}}let B9e=class{constructor(t,i,r){this._rotation=0,this._decorate(t,i,r),this.glyphs=t,this.bounds=this._createBounds(t),this.isMultiline=i.length>1,this._hasRotation=r.angle!==0,this._transform=this._createGlyphTransform(this.bounds,r),this._borderLineSizePx=r.borderLineSizePx,(r.borderLineSizePx||r.hasBackground)&&([this.bounds,this.textBox]=this.shapeBackground(this._transform));for(const s of t)s.setTransform(this._transform)}setRotation(t){if(t===0&&this._rotation===0)return;this._rotation=t;const i=this._transform,r=EI(xf(),t);S1(i,r,i);for(const s of this.glyphs)s.setTransform(this._transform)}_decorate(t,i,r){if(!r.decoration||r.decoration==="none"||!t.length)return;const s=r.scale,n=r.decoration==="underline"?V9e:z9e,o=t[0].textureBinding;for(const a of i){const u=a.startX*s,c=a.startY*s,h=(a.width+a.glyphWidthEnd)*s;t.push(new tce(u,c+n*s,G9e(h,o),1))}}shapeBackground(t){const i=this._borderLineSizePx||0,r=(q9e+i)/2,s=this._borderLineSizePx?r:0,{xmin:n,ymin:o,xmax:a,ymax:u,x:c,y:h,width:p,height:m}=this.bounds,y=[n-Ac,o-Ac],g=[a+Ac,o-Ac],v=[n-Ac,u+Ac],b=[a+Ac,u+Ac],w=fw([[y[0]-r,y[1]-r],[g[0]+r,g[1]-r],[y[0]+s,y[1]+s],[g[0]-s,g[1]+s]],t),_=fw([[v[0]+s,v[1]-s],[b[0]-s,b[1]-s],[v[0]-r,v[1]+r],[b[0]+r,b[1]+r]],t),S=fw([[y[0]-r,y[1]-r],[y[0]+s,y[1]+s],[v[0]-r,v[1]+r],[v[0]+s,v[1]-s]],t),T=fw([[g[0]-s,g[1]+s],[g[0]+r,g[1]-r],[b[0]-s,b[1]-s],[b[0]+r,b[1]+r]],t),E={main:fw([y,g,v,b],t),top:w,bot:_,left:S,right:T};return[new jb(c,h,p+2*r,m+2*r),E]}get boundsT(){const t=this.bounds,i=ci(T1(),t.x,t.y);if(kr(i,i,this._transform),this._hasRotation){const r=Math.max(t.width,t.height);return new jb(i[0],i[1],r,r)}return new jb(i[0],i[1],t.width,t.height)}_createBounds(t){let i=1/0,r=1/0,s=0,n=0;for(const u of t)i=Math.min(i,u.xTopLeft),r=Math.min(r,u.yTopLeft),s=Math.max(s,u.xBottomRight),n=Math.max(n,u.yBottomRight);const o=s-i,a=n-r;return new jb(i+o/2,r+a/2,o,a)}_createGlyphTransform(t,i){const r=U9e*i.angle,s=xf(),n=T1();return sh(s,s,ci(n,i.xOffset,-i.yOffset)),i.useCIMAngleBehavior?kv(s,s,r):(sh(s,s,ci(n,t.x,t.y)),kv(s,s,r),sh(s,s,ci(n,-t.x,-t.y))),s}},X2=class{constructor(t,i,r,s,n,o){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<t.length&&(this.glyphWidthEnd=t[this.end].metrics.width),this.width=s,this.yMin=n,this.yMax=o}};const wD=e=>e===10,fW=e=>e===32;function H9e(e,t,i){const r=new Array,s=1/i.scale,n=i.maxLineWidth*s,o=t?e.length-1:0,a=t?-1:e.length,u=t?-1:1;let c=o,h=0,p=0,m=c,y=m,g=0,v=1/0,b=0;for(;c!==a;){const{code:_,metrics:S}=e[c],T=Math.abs(S.top);if(wD(_)||fW(_)||(v=Math.min(v,T),b=Math.max(b,T+S.height)),wD(_))c!==o&&(r.push(new X2(e,m,c-u,h,v===1/0?0:v,b)),v=1/0,b=0),h=0,m=c+u,y=c+u,p=0;else if(fW(_))y=c+u,p=0,g=S.advance,h+=S.advance;else if(h>n){if(y!==m){const E=y-2*u;h-=g,r.push(new X2(e,m,E,h-p,v,b)),v=1/0,b=0,m=y,h=p}else r.push(new X2(e,m,c-u,h,v,b)),v=1/0,b=0,m=c,y=c,h=0;h+=S.advance,p+=S.advance}else h+=S.advance,p+=S.advance;c+=u}const w=new X2(e,m,c-u,h,v,b);return w.start>=0&&w.end<e.length&&r.push(w),r}function W9e(e,t){let i=0;for(let n=0;n<e.length;n++){const{width:o}=e[n];i=Math.max(o,i)}const r=t.decoration==="underline"?ece:0,s=e[0].yMin;return{x:0,y:s,height:e[e.length-1].yMax+t.lineHeight*(e.length-1)+r-s,width:i}}function Z9e(e,t){const i=t.scale,r=new Array,{glyphs:s,isRightToLeft:n}=e,o=H9e(s,n,t),a=o.length?W9e(o,t):{y:0,height:0},u=P9e(t.horizontalAlignment),c=D9e(t.verticalAlignment),h=c===ao.Baseline?1:0,p=h?0:c-1,m=(1-h)*-a.y+p*(a.height/2)+-22*(h?1:0);for(let y=0;y<o.length;y++){const{start:g,end:v,width:b}=o[y];let w=-1*(u+1)*(b/2)-pW;const _=(e.isRightToLeft?o.length-1-y:y)*t.lineHeight+m-pW;o[y].startX=w,o[y].startY=_;for(let S=g;S<=v;S++){const T=s[S];if(wD(T.code))continue;const E=new tce(w+T.metrics.left,_-T.metrics.top,T,i);w+=T.metrics.advance,r.push(E)}}return new B9e(r,o,t)}async function J9e(e,t,i){const r={type:"cim-rasterization-info",resource:{type:"text",textString:e.text,font:e.font}},s=t.textureManager.rasterizeItem(r,i),n=await s;return Z9e(n,{angle:e.angle??0,xOffset:Bp(e.xoffset??0),yOffset:Bp(e.yoffset??0),lineHeight:fFe*Math.max(.25,e.lineHeight),maxLineWidth:Math.max(32,Math.min(Bp(e.lineWidth),512)),decoration:e.font.decoration,scale:Math.min(Math.round(Bp(e.font.size)),127)/mFe,horizontalAlignment:"center",verticalAlignment:"middle",useCIMAngleBehavior:!1,hasBackground:!!e.backgroundColor,borderLineSizePx:Bp(e.borderLineSize)}).boundsT}let Y9e=J9e;async function Q9e(e,t,i){return Y9e(e,t.stage,i)}async function ice(e,t){await t.when();const i=e.clone();i.text="999";const r=await Q9e(i,t);return Cn(r.width)}const rce="no_dominant_category";function X9e(e){return{expression:K9e(e,{defaultValue:`'${rce}'`})}}function K9e(e,t){const{defaultValue:i,layer:r}=t,s=[];if(i){const n=e.map(o=>`${o} <= 0`).join(" AND ");s.push(`WHEN ${n} THEN ${i}`)}for(const n of e){const o=e.reduce((c,h)=>(n!==h&&c.push(`${n} > ${h}`),c),[]).join(" AND "),a=r&&Jle(r,n),u=`'${n}'`?`'${n}'`:a?pg(n):n;s.push(`WHEN ${o} THEN ${u}`)}return`CASE ${s.join(" ")} ELSE ${i||"0"} END`}function eqe(e){return e&&e.map(t=>`$feature["${t}"];`).join(`
`)+`
`||""}function tqe(e,t=!1){const i=e.map(s=>`"${s}"`);return`
  var fieldNames = [ ${i.join(", ")} ];
  var numFields = ${i.length};
  var maxValueField = null;
  var maxValue = -Infinity;
  var value, i, totalValue = null;

  for(i = 0; i < numFields; i++) {
    value = $feature[fieldNames[i]];

    if(value > 0) {
      if(value > maxValue) {
        maxValue = value;
        maxValueField = fieldNames[i];
      }
      else if (value == maxValue) {
        maxValueField = null;
      }
    }
    ${t?`
  if(value != null && value >= 0) {
    if (totalValue == null) { totalValue = 0; }
    totalValue = totalValue + value;
  }
  `:""}
  }
  `}function zV(e){const t=tqe(e);return`
  ${eqe(e)}
  ${t}
  return maxValueField;
  `}function iqe(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent!=null?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function rqe(e){return e.originPosition==="lowerLeft"&&e.scale.length===4&&e.translate.length===4}function JS(e){if(rqe(e))return e;const{originPosition:t,scale:i,translate:r}=e,s=i[0]??1,n=i[1]??1;return{originPosition:"lowerLeft",scale:[s,t==="lowerLeft"?n:-n,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function sqe({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function nqe({scale:e,translate:t},i){return Math.round((i-t[1])/e[1])}function oqe({scale:e,translate:t},i){return Math.round(((i??0)-t[2])/e[2])}function aqe({scale:e,translate:t},i){return i?Math.round((i-t[3])/e[3]):0}function YS({scale:e,translate:t},i){return i*e[0]+t[0]}function QS({scale:e,translate:t},i){return i*e[1]+t[1]}function N1({scale:e,translate:t},i){return(i??0)*e[2]+t[2]}function L1({scale:e,translate:t},i){return i?i*e[3]+t[3]:0}function UV(e,t){return e&&t?dqe:e&&!t?uqe:!e&&t?cqe:lqe}const lqe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let s=YS(e,r[0]),n=QS(e,r[1]);i[0]=[s,n];const{scale:o,originPosition:a}=e,u=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[p,m]=t[h];s+=u*p,n+=c*m,i[h]=[s,n]}return i},uqe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let s=YS(e,r[0]),n=QS(e,r[1]);i[0]=[s,n,N1(e,r[2])];const{scale:o,originPosition:a}=e,u=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[p,m,y]=t[h];s+=u*p,n+=c*m,i[h]=[s,n,N1(e,y)]}return i},cqe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let s=YS(e,r[0]),n=QS(e,r[1]);i[0]=[s,n,L1(e,r[2])];const{scale:o,originPosition:a}=e,u=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[p,m,y]=t[h];s+=u*p,n+=c*m,i[h]=[s,n,L1(e,y)]}return i},dqe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let s=YS(e,r[0]),n=QS(e,r[1]);i[0]=[s,n,N1(e,r[2]),L1(e,r[3])];const{scale:o,originPosition:a}=e,u=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[p,m,y,g]=t[h];s+=u*p,n+=c*m,i[h]=[s,n,N1(e,y),L1(e,g)]}return i};function sce(e,t,i){const r=new Array(i.length);for(let s=0;s<i.length;s++)r[s]=t(e,i[s]);return r}function hqe(e,t,i){const r=JS(e);return t.x=sqe(r,i.x),t.y=nqe(r,i.y),i.z!=null&&(t.z=oqe(r,i.z)),i.m!=null&&(t.m=aqe(r,i.m)),t}function lst(e,t,i,r=(i==null?void 0:i.hasZ)??!1,s=(i==null?void 0:i.hasM)??!1){if(i!=null){const n=JS(e);t.points=UV(r,s)(n,i.points),t.hasZ=r,t.hasM=s}return t}function ust(e,t,i,r=(i==null?void 0:i.z)!=null,s=(i==null?void 0:i.m)!=null){if(i==null)return t;const n=JS(e);return t.x=YS(n,i.x),t.y=QS(n,i.y),r&&(t.z=N1(n,i.z)),s&&(t.m=L1(n,i.m)),t}function cst(e,t,i,r=(i==null?void 0:i.hasZ)??!1,s=(i==null?void 0:i.hasM)??!1){if(i!=null){const n=JS(e);t.rings=sce(n,UV(r,s),i.rings),t.hasZ=r,t.hasM=s}return t}function dst(e,t,i,r=(i==null?void 0:i.hasZ)??!1,s=(i==null?void 0:i.hasM)??!1){if(i!=null){const n=JS(e);t.paths=sce(n,UV(r,s),i.paths),t.hasZ=r,t.hasM=s}return t}const mW=new be({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),yW=new be({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let ta=class extends P{constructor(t){super(t),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(t){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",t)}set definedInterval(t){this.classificationMethod==="defined-interval"&&this._set("definedInterval",t)}};l([ee({classBreaksDef:"class-breaks-definition"})],ta.prototype,"type",void 0),l([d({json:{write:!0}})],ta.prototype,"breakCount",void 0),l([d({json:{write:!0}})],ta.prototype,"classificationField",void 0),l([d({type:String,json:{read:mW.read,write:mW.write}})],ta.prototype,"classificationMethod",void 0),l([d({json:{write:!0}})],ta.prototype,"normalizationField",void 0),l([d({json:{read:yW.read,write:yW.write}})],ta.prototype,"normalizationType",void 0),l([d({value:null,json:{write:!0}})],ta.prototype,"standardDeviationInterval",null),l([d({value:null,json:{write:!0}})],ta.prototype,"definedInterval",null),ta=l([x("esri.rest.support.ClassBreaksDefinition")],ta);const pqe=ta,fqe=()=>q.getLogger("esri.rest.support.generateRendererUtils");function Pm(e,t){return Number(e.toFixed(t))}function mqe(e){const t=oce(e),i=[],r=t.uniqueValues.length;for(let s=0;s<r;s++){const n=t.uniqueValues[s],o=t.valueFrequency[s],a=n.toString();i.push({value:n,count:o,label:a})}return{uniqueValues:i}}function nce(e,t){const{normalizationTotal:i}=e;return{classBreaks:yqe(e,t),normalizationTotal:i}}function yqe(e,t){const i=e.definition,{classificationMethod:r,normalizationType:s,definedInterval:n}=i,o=i.breakCount??1,a=[];let u=e.values;if(u.length===0)return[];u=u.sort((p,m)=>p-m);const[c,h]=t??[u.at(0),u.at(-1)];if(r==="equal-interval")if(u.length>=o){const p=(h-c)/o;let m=c;for(let y=1;y<o;y++){const g=Pm(c+y*p,6);a.push({minValue:m,maxValue:g,label:vs(m,g,s)}),m=g}a.push({minValue:m,maxValue:h,label:vs(m,h,s)})}else u.forEach(p=>{a.push({minValue:p,maxValue:p,label:vs(p,p,s)})});else if(r==="natural-breaks"){const p=oce(u),m=e.valueFrequency||p.valueFrequency,y=gqe(p.uniqueValues,m,o);let g=c;for(let v=1;v<o;v++)if(p.uniqueValues.length>v){const b=Pm(p.uniqueValues[y[v]],6);a.push({minValue:g,maxValue:b,label:vs(g,b,s)}),g=b}a.push({minValue:g,maxValue:h,label:vs(g,h,s)})}else if(r==="quantile")if(u.length>=o&&c!==h){let p=c,m=Math.ceil(u.length/o),y=0;for(let g=1;g<o;g++){let v=m+y-1;v>u.length&&(v=u.length-1),v<0&&(v=0),a.push({minValue:p,maxValue:u[v],label:vs(p,u[v],s)}),p=u[v],y+=m,m=Math.ceil((u.length-y)/(o-g))}a.push({minValue:p,maxValue:h,label:vs(p,h,s)})}else{let p=-1;for(let m=0;m<u.length;m++){const y=u[m];y!==p&&(p=y,a.push({minValue:p,maxValue:y,label:vs(p,y,s)}),p=y)}}else if(r==="standard-deviation"){const p=bqe(u),m=_qe(u,p);if(m===0)a.push({minValue:u[0],maxValue:u[0],label:vs(u[0],u[0],s)});else{const y=wqe(c,h,o,p,m)*m;let g=0,v=c;for(let w=o;w>=1;w--){const _=Pm(p-(w-.5)*y,6);a.push({minValue:v,maxValue:_,label:vs(v,_,s)}),v=_,g++}let b=Pm(p+.5*y,6);a.push({minValue:v,maxValue:b,label:vs(v,b,s)}),v=b,g++;for(let w=1;w<=o;w++)b=g===2*o?h:Pm(p+(w+.5)*y,6),a.push({minValue:v,maxValue:b,label:vs(v,b,s)}),v=b,g++}}else if(r==="defined-interval"){if(!n)return a;const[p,m]=t??[u.at(0),u.at(-1)],y=Math.ceil((m-p)/n);let g=p;for(let v=1;v<y;v++){const b=Pm(p+v*n,6);a.push({minValue:g,maxValue:b,label:vs(g,b,s)}),g=b}a.push({minValue:g,maxValue:m,label:vs(g,m,s)})}return a}function vs(e,t,i){let r=null;return r=e===t?i&&i==="percent-of-total"?e+"%":e.toString():i&&i==="percent-of-total"?e+"% - "+t+"%":e+" - "+t,r}function oce(e){const t=[],i=[];let r=Number.MIN_VALUE,s=1,n=-1;for(let o=0;o<e.length;o++){const a=e[o];a===r?(s++,i[n]=s):a!==null&&(t.push(a),r=a,s=1,i.push(s),n++)}return{uniqueValues:t,valueFrequency:i}}function gqe(e,t,i){const r=e.length,s=[];i>r&&(i=r);for(let o=0;o<i;o++)s.push(Math.round(o*r/i-1));s.push(r-1);let n=gW(s,e,t,i);return vqe(n.mean,n.sdcm,s,e,t,i)&&(n=gW(s,e,t,i)),s}function gW(e,t,i,r){let s=[],n=[],o=[],a=0;const u=[],c=[];for(let y=0;y<r;y++){const g=yg(y,e,t,i);u.push(g.sbMean),c.push(g.sbSdcm),a+=c[y]}let h,p=a,m=!0;for(;m||a<p;){m=!1,s=[];for(let y=0;y<r;y++)s.push(e[y]);for(let y=0;y<r;y++)for(let g=e[y]+1;g<=e[y+1];g++)if(h=t[g],y>0&&g!==e[y+1]&&Math.abs(h-u[y])>Math.abs(h-u[y-1]))e[y]=g;else if(y<r-1&&e[y]!==g-1&&Math.abs(h-u[y])>Math.abs(h-u[y+1])){e[y+1]=g-1;break}p=a,a=0,n=[],o=[];for(let y=0;y<r;y++){n.push(u[y]),o.push(c[y]);const g=yg(y,e,t,i);u[y]=g.sbMean,c[y]=g.sbSdcm,a+=c[y]}}if(a>p){for(let y=0;y<r;y++)e[y]=s[y],u[y]=n[y],c[y]=o[y];a=p}return{mean:u,sdcm:c}}function vqe(e,t,i,r,s,n){let o=0,a=0,u=0,c=0,h=!0;for(let p=0;p<2&&h;p++){p===0&&(h=!1);for(let m=0;m<n-1;m++)for(;i[m+1]+1!==i[m+2];){i[m+1]=i[m+1]+1;const y=yg(m,i,r,s);u=y.sbMean,o=y.sbSdcm;const g=yg(m+1,i,r,s);if(c=g.sbMean,a=g.sbSdcm,!(o+a<t[m]+t[m+1])){i[m+1]=i[m+1]-1;break}t[m]=o,t[m+1]=a,e[m]=u,e[m+1]=c,h=!0}for(let m=n-1;m>0;m--)for(;i[m]!==i[m-1]+1;){i[m]=i[m]-1;const y=yg(m-1,i,r,s);u=y.sbMean,o=y.sbSdcm;const g=yg(m,i,r,s);if(c=g.sbMean,a=g.sbSdcm,!(o+a<t[m-1]+t[m])){i[m]=i[m]+1;break}t[m-1]=o,t[m]=a,e[m-1]=u,e[m]=c,h=!0}}return h}function wqe(e,t,i,r,s){let n=Math.max(r-e,t-r)/s/i;return n=n>=1?1:n>=.5?.5:.25,n}function bqe(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/=e.length,t}function _qe(e,t){let i=0;for(let r=0;r<e.length;r++){const s=e[r];i+=(s-t)*(s-t)}return i/=e.length,Math.sqrt(i)}function yg(e,t,i,r){let s=0,n=0;for(let u=t[e]+1;u<=t[e+1];u++){const c=r[u];s+=i[u]*c,n+=c}n<=0&&fqe().warn("Exception in Natural Breaks calculation");const o=s/n;let a=0;for(let u=t[e]+1;u<=t[e+1];u++)a+=r[u]*(i[u]-o)**2;return{sbMean:o,sbSdcm:a}}const Sqe="<Null>",Tqe="equal-interval",xqe=1,$qe=5,Eqe=10,Mqe=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,Aqe=new Set(["esriFieldTypeDate","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeOID","esriFieldTypeBigInteger"]),Iqe=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),ace=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function da(e){return e==null||typeof e=="string"&&!e?Sqe:e}function qV(e){const t=e.normalizationField!=null||e.normalizationType!=null,i=e.minValue!=null||e.maxValue!=null,r=!!e.sqlExpression&&e.supportsSQLExpression;return!t&&!i&&!r}function Cqe(e){var o,a;const{outStatisticTypes:t}=e,i=e.returnDistinct?[...new Set(e.values)]:e.values,r=i.filter(u=>u!=null).sort(),s=r.length,n={count:s,min:r[0],max:r[s-1]};return e.supportsNullCount&&(n.nullcount=i.length-s),!e.percentileParams||(o=t==null?void 0:t.include)!=null&&o.length&&!t.include.includes("median")||(a=t==null?void 0:t.exclude)!=null&&a.length&&t.exclude.includes("median")||(n.median=uce(i,e.percentileParams)),n}function lce(e){var v,b;const{values:t,useSampleStdDev:i,supportsNullCount:r,outStatisticTypes:s}=e;let n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=null,u=null,c=null,h=null,p=0;const m=e.minValue==null?-1/0:e.minValue,y=e.maxValue==null?1/0:e.maxValue;for(const w of t)Number.isFinite(w)?w>=m&&w<=y&&(a=a===null?w:a+w,n=Math.min(n,w),o=Math.max(o,w),p++):typeof w=="string"&&p++;if(p&&a!=null){u=a/p;let w=0;for(const _ of t)Number.isFinite(_)&&_>=m&&_<=y&&(w+=(_-u)**2);h=i?p>1?w/(p-1):0:p>0?w/p:0,c=Math.sqrt(h)}else n=null,o=null;const g={avg:u,count:p,max:o,min:n,stddev:c,sum:a,variance:h};return r&&(g.nullcount=t.length-p),!e.percentileParams||(v=s==null?void 0:s.include)!=null&&v.length&&!s.include.includes("median")||(b=s==null?void 0:s.exclude)!=null&&b.length&&s.exclude.includes("median")||(g.median=uce(t,e.percentileParams)),g}function uce(e,t){const{fieldType:i,value:r,orderBy:s,isDiscrete:n}=t,o=Oqe(i,s==="desc");if((e=[...e].filter(y=>y!=null).sort((y,g)=>o(y,g))).length===0)return null;if(r<=0)return e[0];if(r>=1)return e[e.length-1];const a=(e.length-1)*r,u=Math.floor(a),c=u+1,h=a%1,p=e[u],m=e[c];return c>=e.length||n||typeof p=="string"||typeof m=="string"?p:p*(1-h)+m*h}function Oqe(e,t){if(e){if(Aqe.has(e))return vW(t);if(Iqe.has(e))return KO(t,!1);if(e==="esriFieldTypeTimestampOffset")return Nqe(t);const o=KO(t,!0);if(e==="esriFieldTypeString")return o;if(e==="esriFieldTypeGUID"||e==="esriFieldTypeGlobalID")return(a,u)=>o(wW(a),wW(u))}const i=t?1:-1,r=vW(t),s=KO(t,!0),n=cce(t);return(o,a)=>typeof o=="number"&&typeof a=="number"?r(o,a):typeof o=="string"&&typeof a=="string"?s(o,a):n(o,a)??i}const rC=(e,t)=>e==null?t==null?0:1:t==null?-1:null,sC=(e,t)=>e==null?t==null?0:-1:t==null?1:null;function cce(e){return e?rC:sC}const Rqe=(e,t)=>sC(e,t)??(e===t?0:new Date(e).getTime()-new Date(t).getTime()),Fqe=(e,t)=>rC(e,t)??(e===t?0:new Date(t).getTime()-new Date(e).getTime());function Nqe(e){return e?Fqe:Rqe}const Lqe=(e,t)=>sC(e,t)??(e===t?0:e<t?-1:1),kqe=(e,t)=>rC(e,t)??(e===t?0:e<t?1:-1);function KO(e,t){if(!t)return e?kqe:Lqe;const i=cce(e);return e?(r,s)=>{const n=i(r,s);return n??((r=r.toUpperCase())>(s=s.toUpperCase())?-1:r<s?1:0)}:(r,s)=>{const n=i(r,s);return n??((r=r.toUpperCase())<(s=s.toUpperCase())?-1:r>s?1:0)}}const Pqe=(e,t)=>rC(e,t)??t-e,Dqe=(e,t)=>sC(e,t)??e-t;function vW(e){return e?Pqe:Dqe}function wW(e){return e.slice(24,36)+e.slice(19,23)+e.slice(16,18)+e.slice(14,16)+e.slice(11,13)+e.slice(9,11)+e.slice(6,8)+e.slice(4,6)+e.slice(2,4)+e.slice(0,2)}function k1(e,t,i){var s,n;let r;for(r in e)(s=t==null?void 0:t.include)!=null&&s.length&&!t.include.includes(r)||(n=t==null?void 0:t.exclude)!=null&&n.length&&t.exclude.includes(r)?delete e[r]:ace.includes(r)&&(Number.isFinite(e[r])||(e[r]=null));return i&&["avg","stddev","variance"].forEach(o=>{e[o]!=null&&(e[o]=Math.ceil(e[o]??0))}),e}function jqe(e){const t={};for(let i of e)(i==null||typeof i=="string"&&i.trim()==="")&&(i=null),t[i]==null?t[i]={count:1,data:i}:t[i].count++;return{count:t}}function eR(e){return(e==null?void 0:e.type)!=="coded-value"?[]:e.codedValues.map(t=>t.code)}function P1(e,t,i,r){const s=e.count,n=[];if(i&&t){const o=[],a=eR(t[0]);for(const u of a)if(t[1]){const c=eR(t[1]);for(const h of c)if(t[2]){const p=eR(t[2]);for(const m of p)o.push(`${da(u)}${r}${da(h)}${r}${da(m)}`)}else o.push(`${da(u)}${r}${da(h)}`)}else o.push(u);for(const u of o)s.hasOwnProperty(u)||(s[u]={data:u,count:0})}for(const o in s){const a=s[o];n.push({value:a.data,count:a.count,label:a.label})}return{uniqueValueInfos:n}}function Vqe(e,t,i,r){let s=null;switch(t){case"log":e!==0&&(s=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(r)&&r!==0&&(s=e/r*100);break;case"field":Number.isFinite(i)&&i!==0&&(s=e/i);break;case"natural-log":e>0&&(s=Math.log(e));break;case"square-root":e>0&&(s=e**.5)}return s}function dce(e,t,i){const r=GV({field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,definedInterval:t.definedInterval,breakCount:t.numClasses||$qe});return e=zqe(e,t.minValue,t.maxValue),nce({definition:r,values:e,normalizationTotal:t.normalizationTotal},i)}function zqe(e,t,i){const r=t??-1/0,s=i??1/0;return e.filter(n=>Number.isFinite(n)&&n>=r&&n<=s)}function GV(e){const{breakCount:t,field:i,normalizationField:r,normalizationType:s}=e,n=e.classificationMethod||Tqe,o=n==="standard-deviation"?e.standardDeviationInterval||xqe:void 0,a=n==="defined-interval"?e.definedInterval:void 0;return new pqe({breakCount:t,classificationField:i,classificationMethod:n,normalizationField:s==="field"?r:void 0,normalizationType:s,standardDeviationInterval:o,definedInterval:a})}function BV(e,t){var u,c;let i=e.classBreaks;const r=i.length,s=(u=i[0])==null?void 0:u.minValue,n=(c=i[r-1])==null?void 0:c.maxValue,o=t==="standard-deviation",a=Mqe;return i=i.map(h=>{const p=h.label,m={minValue:h.minValue,maxValue:h.maxValue,label:p};if(o&&p){const y=p.match(a),g=(y==null?void 0:y.map(v=>+v.trim()))??[];g.length===2?(m.minStdDev=g[0],m.maxStdDev=g[1],g[0]<0&&g[1]>0&&(m.hasAvg=!0)):g.length===1&&(p.includes("<")?(m.minStdDev=null,m.maxStdDev=g[0]):p.includes(">")&&(m.minStdDev=g[0],m.maxStdDev=null))}return m}),{minValue:s,maxValue:n,classBreakInfos:i,normalizationTotal:e.normalizationTotal}}function Uqe(e,t){const i=qqe(e,t);if(i.min==null&&i.max==null)return{bins:[],minValue:i.min,maxValue:i.max,normalizationTotal:t.normalizationTotal};const r=i.intervals,s=i.min??0,n=i.max??0,o=r.map((a,u)=>({minValue:r[u][0],maxValue:r[u][1],count:0}));for(const a of e)if(a!=null&&a>=s&&a<=n){const u=Gqe(r,a);u>-1&&o[u].count++}return{bins:o,minValue:s,maxValue:n,normalizationTotal:t.normalizationTotal}}function qqe(e,t,i=!1){var b,w;const{field:r,classificationMethod:s,standardDeviationInterval:n,definedInterval:o,normalizationType:a,normalizationField:u,normalizationTotal:c,minValue:h,maxValue:p}=t,m=t.numBins||Eqe;let y=null,g=null,v=null;if((!s||s==="equal-interval")&&!a){if(h!=null&&p!=null)y=h,g=p;else{const _=lce({values:e,minValue:h,maxValue:p,useSampleStdDev:!a,supportsNullCount:qV({normalizationType:a,normalizationField:u,minValue:h,maxValue:p})});y=_.min??null,g=_.max??null}v=nC(y??0,g??0,m)}else{const{classBreaks:_}=dce(e,{field:r,normalizationType:a,normalizationField:u,normalizationTotal:c,classificationMethod:s,standardDeviationInterval:n,definedInterval:o,minValue:h,maxValue:p,numClasses:m},h!=null&&p!=null?[h,p]:void 0);y=(b=_[0])==null?void 0:b.minValue,g=(w=_[_.length-1])==null?void 0:w.maxValue,v=_.map(S=>[S.minValue,S.maxValue])}if(i){const _=v.at(-1)[1];v.push([_,_])}return{min:y,max:g,intervals:v}}function Gqe(e,t){let i=-1;for(let r=e.length-1;r>=0;r--)if(t>=e[r][0]){i=r;break}return i}function nC(e,t,i){const r=(t-e)/i,s=[];let n,o=e;for(let a=1;a<=i;a++)n=o+r,n=Number(n.toFixed(16)),s.push([o,a===i?t:n]),o=n;return s}let Ic=null;const Bqe=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;function Hqe(e,t,i){return e.x<0?e.x+=t:e.x>i&&(e.x-=t),e}function Wqe(e,t,i,r){const s=xK(i)?qr(i):null,n=s?Math.round((s.valid[1]-s.valid[0])/t.scale[0]):null;return e.map(o=>{const a=new Se(o.geometry);return hqe(t,a,a),o.geometry=s?Hqe(a,n??0,r[0]):a,o})}function Zqe(e,t=18,i,r,s){const n=new Float64Array(r*s);t=Math.round(Bp(t));let o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;const u=rVe(i);for(const{geometry:c,attributes:h}of e){const{x:p,y:m}=c,y=Math.max(0,p-t),g=Math.max(0,m-t),v=Math.min(s,m+t),b=Math.min(r,p+t),w=+u(h);for(let _=g;_<v;_++)for(let S=y;S<b;S++){const T=_*r+S,E=iVe(S-p,_-m,t)*w,A=n[T]+=E;o=Math.min(o,A),a=Math.max(a,A)}}return{min:o,max:a}}function Jqe(e){const t=Bqe.exec(e);if(!t)return null;const{hh:i,mm:r,ss:s,ms:n}=t.groups;return Number(i)*S_.hours+Number(r)*S_.minutes+Number(s)*S_.seconds+Number(n||0)}async function qv(e,t,i=!0){if(!t)return[];const{field:r,field2:s,field3:n,fieldDelimiter:o,fieldInfos:a,timeZone:u}=e,c=r&&(a==null?void 0:a.find(A=>A.name.toLowerCase()===r.toLowerCase())),h=!!c&&zs(c),p=!!c&&go(c),m=e.valueExpression,y=e.normalizationType,g=e.normalizationField,v=e.normalizationTotal,b=[],w=e.viewInfoParams;let _=null,S=null;if(m){if(!Ic){const{arcadeUtils:A}=await On();Ic=A}Ic.hasGeometryOperations(m)&&await Ic.enableGeometryOperations(),_=Ic.createFunction(m),S=w?Ic.getViewInfo({viewingMode:w.viewingMode,scale:w.scale,spatialReference:new we(w.spatialReference)}):null}const T=e.fieldInfos,E=!(t[0]&&"declaredClass"in t[0]&&t[0].declaredClass==="esri.Graphic")&&T?{fields:T}:null;return t.forEach(A=>{const C=A.attributes;let O;if(m){const U=E?{...A,layer:E}:A,V=Ic.createExecContext(U,S,u);O=Ic.executeFunction(_,V)}else C&&(O=C[r],s?(O=`${da(O)}${o}${da(C[s])}`,n&&(O=`${O}${o}${da(C[n])}`)):typeof O=="string"&&i&&(p?O=O?new Date(O).getTime():null:h&&(O=O?Jqe(O):null)));if(y&&typeof O=="number"&&isFinite(O)){const U=C&&parseFloat(C[g]);O=Vqe(O,y,U,v)}b.push(O)}),b}function oC(e){const t=e.field,i=e.normalizationType,r=e.normalizationField;let s;return i==="field"?s="(NOT "+r+" = 0)":i!=="log"&&i!=="natural-log"&&i!=="square-root"||(s=`(${t} > 0)`),s}function nA(e,t,i){const r=t!=null?e+" >= "+t:"",s=i!=null?e+" <= "+i:"";let n="";return n=r&&s?Sr(r,s):r||s,n?"("+n+")":""}function Sr(e,t){let i=e??"";return t!=null&&t&&(i=i?"("+i+") AND ("+t+")":t),i}function pst(e,t){if(e&&e.spatialRelationship!=="intersects")return new M(t,"Only 'intersects' spatialRelationship is supported for featureFilter")}function fst(e,t,i){const r=Yqe({layer:e,fields:t});if(r.length)return new M(i,"Unknown fields: "+r.join(", ")+". You can only use fields defined in the layer schema");const s=Qqe({layer:e,fields:t});return s.length?new M(i,"Unsupported fields: "+s.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true"):void 0}function Yqe(e){const t=e.layer;return e.fields.filter(i=>!t.getField(i))}function Qqe(e){const t=e.layer;return e.fields.filter(i=>{const r=t.getFieldUsageInfo(i);return!r||!r.supportsStatistics})}const Xqe=/_value$/i,Kqe=Math.LOG10E,eGe={SECOND:1e3,MINUTE:6e4,HOUR:36e5},D1=10;function j1(e){return e.map(t=>t.toJSON())}function bW(e,t){var a;const i=[],r=e.layer,s="featureReduction"in r?r.featureReduction:null,n=(s==null?void 0:s.type)==="binning",o=s!=null&&"fields"in s?(a=s.fields)==null?void 0:a.map(u=>{var c;return(c=u.name)==null?void 0:c.toLowerCase()}).filter(Boolean):[];if(!n||!t)return i;for(const u of t)o.includes(u.toLowerCase())||i.push(u);return i}function oA(e,t,i){var s;const r=[];if(t)for(const n of t){const o=e.getField(n);o&&i&&"availableFields"in i&&!((s=i.availableFields)!=null&&s.includes(o.name))&&r.push(o.name)}return r}function HV(e,t){var n;const i=e&&e.features;if((i==null?void 0:i.length)===0)return{avg:null,count:0,max:null,median:null,min:null,nullcount:0,stddev:null,sum:null,variance:null};const r=(n=i==null?void 0:i[0])==null?void 0:n.attributes,s={};for(const o in r)s[o.replace(Xqe,"").toLowerCase()]=r[o];return s.totalcount!=null&&s.totalcount>=s.count&&(s.nullcount=s.totalcount-s.count),delete s.totalcount,s.min===s.max&&s.min!=null&&s.stddev==null&&(s.stddev=s.variance=0),t&&(["min","max","avg","stddev","sum","variance"].forEach(o=>{s[o]!=null&&(s[o]=Math.ceil(s[o]))}),s.min===s.max&&s.min!=null&&(s.avg=s.min,s.stddev=s.variance=0)),s}function tGe(e){const t=[],i=e.classBreaks,r=i[0].minValue,s=i[i.length-1].maxValue;i.forEach(o=>{t.push([o.minValue,o.maxValue])});const n={field:e.field,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,layer:e.layer};return{min:r,max:s,intervals:t,sqlExpr:Gv(n),excludeZerosExpr:e.where,normTotal:e.normalizationTotal}}function Gv(e){const{field:t,normalizationType:i,normalizationField:r,normalizationTotal:s,layer:n}=e,o=Jle(n,t);let a=t;return i==="percent-of-total"?a=`((${o?pg(t):t} / ${s}) * 100)`:i==="log"?a=`(log(${t}) * ${Kqe})`:i==="field"?a=`(${o?pg(t):t} / ${r})`:i==="natural-log"?a=`(log(${o?pg(t):t}))`:i==="square-root"&&(a=`(power(${o?pg(t):t}, 0.5))`),a}function hce(e,t){let i;if(t=t.toLowerCase(),e){for(const r in e)if(r.toLowerCase()!==t){i=e[r];break}}return i}function Vb(e,t){let i;if(t=t.toLowerCase(),e){for(const r in e)if(r.toLowerCase()===t){i=e[r];break}}return i}function pce(e,t,i,r,s){const n={},o="countOFExpr";e&&e.features&&e.features.forEach(u=>{const c=u.attributes,h=hce(c,o),p=Vb(c,o);h!=null&&p!=null&&h!==0&&(n[h]=p)});const a=[];return nC(t,i,r).forEach((u,c)=>{const h=(c+1).toString();a.push({minValue:u[0],maxValue:u[1],count:n.hasOwnProperty(h)?n[h]:0})}),{bins:a,minValue:t,maxValue:i,normalizationTotal:s}}async function WV(e,t){const i=e&&e.features,{field:r,field2:s,field3:n,fieldDelimiter:o,layer:a,view:u,signal:c,labels:h}=t,p=`countOF${(!r||!s)&&r||"Expr"}`,m={};let y=!1;for(const g of i){const v=g.attributes,b=Vb(v,p);let w=r?Vb(v,r):hce(v,p),_=s?Vb(v,s):null,S=n?Vb(v,n):null;w===null&&b===0&&(y=!0),(w==null||typeof w=="string"&&w.trim()==="")&&(w=null),s&&(_==null||typeof _=="string"&&_.trim()==="")&&(_=null),n&&(S==null||typeof S=="string"&&S.trim()==="")&&(S=null);let T=w;s&&(T=`${da(T)}${o}${da(_)}`,n&&(T=`${T}${o}${da(S)}`)),m[T]==null?m[T]={count:b,data:T}:m[T].count=m[T].count+b}if(r&&y){const g=r+" is NULL";try{const v=await a.queryFeatureCount({whereClause:g,view:u,signal:c});return m.null.count=m.null.count+v,tR(m,h)}catch{return Fe(c),tR(m,h)}}return tR(m,h)}function tR(e,t){if(t)for(const i in e)e[i].label=t[i];return{count:e}}async function iR(e,t,i){const r=e?i.getField(e):null,s=r?i.getFieldDomain(r.name):null;if(s)return s;const{uniqueValueInfos:n}=await i.uniqueValues({field:e,sqlWhere:t.sqlWhere,features:t.features,useFeaturesInView:t.useFeaturesInView,view:t.view,signal:t.signal}),o=n.map(a=>new jd({code:a.value}));return new PS({codedValues:o})}async function aC(e,t){if(!e.returnAllCodedValues)return[];const{field:i,field2:r,field3:s}=e;if(i&&!r){const o=i?t.getField(i):null,a=o?t.getFieldDomain(o.name):null;return a?[a]:[]}const n=[];return i&&(n.push(iR(i,e,t)),r&&(n.push(iR(r,e,t)),s&&n.push(iR(s,e,t)))),Promise.all(n)}function iGe(e,t){return hze(e,new Date(0),t,"milliseconds").sqlExpression}function rGe(e,t){return`EXTRACT(${t} FROM ${e}) * ${eGe[t]}`}function sGe(e){return e?pg(["HOUR","MINUTE","SECOND"].map(t=>`(${rGe(e,t)})`).join(" + ")):null}function po(e){var t;return{viewingMode:e.type==="2d"?"map":e.viewingMode,scale:e.scale,spatialReference:(t=e.spatialReference)==null?void 0:t.toJSON()}}function ZV(e,t){const i=new Set(e.map(s=>s.value)),r=t.filter(s=>!i.has(s));for(const s of r)e.push({value:s,count:0});e.sort((s,n)=>t.indexOf(s.value)-t.indexOf(n.value));for(const s of e)s.value===rce&&(s.value=null);return{predominantCategoryInfos:e}}function _W(e){const t="featureReduction"in e?e.featureReduction:null;return((t!=null&&"fields"in t?t.fields:null)??[]).map(i=>{const r=nGe(i,e.fieldsIndex);return r?new DS({type:r,name:i.name,alias:i.alias}):null}).filter(Br)}function nGe(e,t){var i,r;switch(e.statisticType){case"avg":case"avg_angle":return"double";case"count":return"integer";case"min":case"max":case"sum":return e.onStatisticField?((i=t.get(e.onStatisticField))==null?void 0:i.type)??null:e.onStatisticExpression?e.onStatisticExpression.returnType==="string"?null:"double":null;case"mode":return e.onStatisticField?((r=t.get(e.onStatisticField))==null?void 0:r.type)??null:e.onStatisticExpression?e.onStatisticExpression.returnType==="string"?"string":"double":null;default:return null}}function fce(e,t){return go(t)?iGe(e,t==null?void 0:t.name):zs(t)?sGe(t==null?void 0:t.name):null}function JV(e,t,i){const{field:r,normalizationType:s,normalizationField:n,normalizationTotal:o,minValue:a,maxValue:u,filter:c}=t,h=e.supportsSQLExpression?fce(e,i)||t.sqlExpression:null,p=Gv({field:r,normalizationType:s,normalizationField:n,normalizationTotal:o,layer:e}),m=h||p,y=m?nA(m,a,u):null,g=oC({field:r,normalizationField:n,normalizationType:s}),v=Sr(t.sqlWhere,g),b=Sr(v,y),w=qV({normalizationField:n,normalizationType:s,sqlExpression:h,supportsSQLExpression:e.supportsSQLExpression,minValue:a,maxValue:u}),_=ej(e.getField(r??void 0)),{include:S,exclude:T}=t.outStatisticTypes||{},E=ace.filter(C=>(!S||S.includes(C))&&(!T||!T.includes(C))&&(C==="nullcount"?w:!_||C==="count")),A=e.createQuery();return A.where=Sr(A.where,b),A.sqlFormat=h?"standard":null,A.outStatistics=E.map(C=>{const O=new ic;let U=null,V=null,H=`${C}_value`;if(C==="variance")U="var",V=m;else if(C==="nullcount"){const te=e.objectIdField;U="count",V=te&&e.getField(te)?te:"1",H="totalcount_value"}else C==="median"?(U="percentile-continuous",V=m,O.statisticParameters={value:.5}):(U=C,V=m);return O.statisticType=U,O.onStatisticField=V,O.outStatisticFieldName=H,O}),fo(A,c),A}function fo(e,t){t&&(e.geometry=t.geometry,e.spatialRelationship=t.spatialRelationship)}function mce(e,t){const{field:i,field2:r,field3:s,sqlExpression:n}=t,o=!(!i||!r),a=e.createQuery();return a.where=Sr(a.where,t.sqlWhere),a.sqlFormat=n?"standard":null,a.outStatistics=[oGe(o?null:i,o?"1":n)].filter(Boolean),a.groupByFieldsForStatistics=[i||n,r,s].filter(Boolean),fo(a,t.filter),a}function oGe(e,t){const i="countOF"+(e||"Expr"),r=new ic;return r.statisticType="count",r.onStatisticField=t?"1":e,r.outStatisticFieldName=i,r}function eE(e,t,i,r=D1,s,n,o){const{min:a,max:u,normTotal:c,excludeZerosExpr:h}=t,p=t.intervals||nC(a,u,r),m=t.sqlExpr||i;return aGe(e,p,m,h,s,n,o).then(y=>({bins:y.map((g,v)=>({minValue:p[v][0],maxValue:p[v][1],count:g.status==="fulfilled"?g.value:0})),minValue:a,maxValue:u,normalizationTotal:c}))}function aGe(e,t,i,r,s,n,o){const a=[],u=t.length;for(let c=0;c<u;c++){const h=Sr(r,Sr(i+" >= "+t[c][0],t[c][1]!==null?i+(c===u-1?" <= ":" < ")+t[c][1]:""));a.push(h)}return Promise.allSettled(a.map(c=>e.queryFeatureCount({whereClause:c,view:s,filter:n,signal:o})))}function lGe(e){return"hasVisualVariables"in e&&e.hasVisualVariables()?e.visualVariables.filter(t=>!eV.test(t.valueExpression)&&(!("target"in t)||t.target!=="outline")):[]}const uGe="cluster_count";function cGe(e,t){return e.split(`cluster_${t}_`).pop()}function dGe(e){if(!e)return null;const{field:t,valueExpression:i,normalizationField:r,normalizationType:s,normalizationTotal:n}=e;let o=null;if(i)o=i;else if(t){const a=dze({normalizationType:s,normalizationField:r,normalizationTotal:n});if(a){const u=a.toLowerCase();if(o=t.toLowerCase()+",norm:"+u,r)o+=","+r.toLowerCase();else if(u==="percent-of-total"){let c=n;Dv(c)&&c!==0||(c=null),o+=","+c}}}return o}function hGe(e){return wV(e)}function yce(e,t){const i=dGe(e);return`${t}_${i!=null?hGe(i):e.field}`}function pGe(e,t){return`cluster_${yce(e,t)}`}function gce(e,t){const i=t.getField(e);return i==null?void 0:i.type}function fGe(e,t){const i="field"in t?t.field:null,r=i?gce(i,e):null;return{field:i,fieldType:r??null,valueExpression:"valueExpression"in t?t.valueExpression:null,valueExpressionTitle:"valueExpressionTitle"in t?t.valueExpressionTitle:null,normalizationField:"normalizationField"in t?t.normalizationField:null,normalizationType:"normalizationType"in t?t.normalizationType:null,normalizationTotal:"normalizationTotal"in t?t.normalizationTotal:null}}function mGe(e,t){var o;const i=t.type==="rotation"?t.rotationType:null,r=(o=t.legendOptions)==null?void 0:o.title,s=t.field,n=s?gce(s,e):null;return{field:s,fieldType:n??null,rotationType:i,valueExpression:t.valueExpression,valueExpressionTitle:t.valueExpressionTitle||t.valueExpression&&r,normalizationField:"normalizationField"in t?t.normalizationField:null,vvType:t.type}}function yGe(e){return e.map(t=>`{
        "value": "${String(t.value)}",
        "label": "${vce(String(t.label))}"
      }`)}function vce(e){return e?e.replaceAll('"','\\"'):""}function wce(e,t,i){return`
  var uvInfos = [${yGe(e).join(", ")}];
  var predominantType = Text($feature["${t}"]);
  var label = "${vce(i)}";

  for (var i = 0; i < Count(uvInfos); i++) {
    if (uvInfos[i].value == predominantType) {
      label = uvInfos[i].label;
      break;
    }
  }

  return label;
  `}function gGe(e,t){const i=[yce(e,t)];return e.fieldType==="date"&&i.push(e.fieldType.toLowerCase()),e.rotationType&&i.push(e.rotationType.toLowerCase()),i.join("_")}function rR(e,t){return{statisticHash:gGe(e,t),attributeInfo:e,statisticType:t}}function vGe(e,t,i=!0){const r=[],s=fGe(e,t);t.type==="class-breaks"?r.push(rR(s,"avg")):t.type==="unique-value"&&r.push(rR(s,"type"));const n=lGe(t);for(const o of n){const a=mGe(e,o);r.push(rR(a,"avg"))}return i?IA(r,(o,a)=>o.statisticHash===a.statisticHash):r}function wGe(e,t){const i=t.featureReduction;if("fields"in i){for(const r of i.fields)if(r.name.toLowerCase()===e.toLowerCase())return r}return null}function bce(e){return`
  $feature["${e}"];
  var value = $feature["${e}"];
  var num = Count(Text(Round(value)));
  var label = When(
    num < 4, Text(value, "#.#"),
    num == 4, Text(value / Pow(10, 3), "#.0k"),
    num <= 6, Text(value / Pow(10, 3), "#k"),
    num == 7, Text(value / Pow(10, 6), "#.0m"),
    num > 7, Text(value / Pow(10, 6), "#m"),
    Text(value, "#,###")
  );
  return label;
  `}function bGe(e,t,i,r){const s=i.name;if(i.statisticType==="mode"){const n="getFieldDomain"in e?e.getFieldDomain(i.onStatisticField):null;let o=null;return(n==null?void 0:n.type)==="coded-value"?o=n.codedValues.map(a=>new zg({value:a.code,label:a.name})):(t==null?void 0:t.type)==="unique-value"&&t.field!=null&&t.field.toLowerCase()===s.toLowerCase()&&(o=(t.uniqueValueInfos??[]).map(a=>a.clone())),o?wce(o,s,r):`Text($feature["${s}"])`}return bce(s)}function _ce(e,t=!1){const i=new pm({haloColor:"#373837",haloSize:"1px",color:"#f0f0f0",font:{family:"Noto Sans",size:"12px",weight:"bold"}});return new E0({symbol:i,deconflictionStrategy:"none",labelPlacement:t?"always-horizontal":"center-center",labelExpressionInfo:new mV({expression:e})})}async function _Ge(e){const{layer:t,renderer:i,view:r}=e;await Promise.all([t.load(),r.when()]);const s=i||t.renderer;if(!Lle(s))throw new M("clusters-label-schemes:invalid-parameters","'renderer' is not valid");return{layer:t,renderer:s,view:r}}function SGe(e,t,i){const r=e.type==="unique-value"?e.uniqueValueInfos??[]:[];return wce(r,t,i)}async function SW(e){const{renderer:t,view:i,statInfo:r}=e,s=r==null?void 0:r.statisticType,n=r?pGe(r.attributeInfo,s):uGe,o=s==="type"?SGe(t,n,e.noneValueLabel):bce(n),a=_ce(o);return{name:r?`clusters-${s}-${cGe(n,s)}`:"clusters-count",labelingInfo:[a],clusterMinSize:await ice(a.symbol,i),fieldName:n}}function TGe(e){const t=new Map;for(const i of e)i.attributeInfo.vvType==="size"?t.set(i.statisticHash,i):t.has(i.statisticHash)||t.set(i.statisticHash,i);return[...t.values()]}async function xGe(e){const[{renderer:t,layer:i,view:r},s]=await Promise.all([_Ge(e),iI("esri/smartMapping/t9n/smartMapping")]),n=s.clusters.predominantNoneValue;if(!t)return null;let o=null;const a=[];if(e.field){const h=wGe(e.field,i);if(!h)throw new M("clusters-label-schemes:invalid-parameters","'field' is not a valid aggregate field");const{name:p}=h,m=bGe(i,t,h,n),y=_ce(m);return o={name:`clusters-${p}`,labelingInfo:[y],clusterMinSize:await ice(y.symbol,r),fieldName:p},{primaryScheme:o,secondarySchemes:a}}const u=TGe(vGe(i,t,!1));for(const h of u){const p=await SW({renderer:t,view:r,statInfo:h,noneValueLabel:n});h.attributeInfo.vvType==="size"?o=p:a.push(p)}const c=await SW({renderer:t,view:r});return o?a.unshift(c):o=c,{primaryScheme:o,secondarySchemes:a}}let XS=class zb{constructor(){this.connection=null}async open(t){this.connection=await Ate("statsWorker",{strategy:"distributed",signal:t})}destroy(){var t;(t=this.connection)==null||t.close()}static getInstance(){return zb.instance||(zb.instance=new zb),zb.instance}async summaryStatistics(t,i){if(!this.connection)throw new M("worker-client:summary-statistics","connection is required");return this.connection.invoke("summaryStatistics",{attribute:t,features:i})}async uniqueValues(t,i){if(!this.connection)throw new M("worker-client:unique-values","connection is required");return this.connection.invoke("uniqueValues",{attribute:t,features:i})}async classBreaks(t,i){if(!this.connection)throw new M("worker-client:class-breaks","connection is required");return this.connection.invoke("classBreaks",{attribute:t,features:i})}async histogram(t,i){if(!this.connection)throw new M("worker-client:histogram","connection is required");return this.connection.invoke("histogram",{attribute:t,features:i})}async heatmapStatistics(t,i){if(!this.connection)throw new M("worker-client:heatmap-statistics","connection is required");return this.connection.invoke("heatmapStatistics",{attribute:t,features:i})}};async function $Ge(e,t,i,r){return MGe(t,await EGe(e,t,i,r))}async function EGe(e,t,i,r){var h;const s={...r},n=AGe(t,i),o=((h=t.outStatistics)==null?void 0:h[0])!=null,a=D("featurelayer-pbf-statistics"),u=!o||a;let c;return u||(c=await Aue(e,n,s)),i==null||i.fieldsIndex,c.fields,c}async function MGe(e,t,i,r){return S0.fromJSON(t)}function AGe(e,t){let i=xr.from(e);return i.sourceSpatialReference=i.sourceSpatialReference??(t==null?void 0:t.sourceSpatialReference)??null,i}async function IGe(e,t,i,r){const s=MI(e),{source:n,checkValueRange:o}=t,{classificationDefinition:a}=i,u={...i.toJSON(),f:"json"};let c=null;if(c=(a==null?void 0:a.type)==="class-breaks-definition"?a.classificationField:a==null?void 0:a.attributeField,n){const y={source:n==null?void 0:n.toJSON()};u.layer=JSON.stringify(y)}u.classificationDef&&(u.classificationDef=JSON.stringify(u.classificationDef));let h={query:u};r&&(h={...r,...h});const p={url:s.path,field:c,checkValueRange:o},m=s.path+"/generateRenderer";return Be(m,h).then(y=>CGe(p,y))}function CGe(e,t){const{field:i,checkValueRange:r,url:s}=e,n=t==null?void 0:t.data;if(!n)return;if(!r){const c=TW(n);return Promise.resolve(c)}const o=new ic({statisticType:"min",onStatisticField:i}),a=new ic({statisticType:"max",onStatisticField:i}),u=new xr({outStatistics:[o,a]});return $Ge(s,u).then(c=>{const h=c.features[0].attributes;let p=null,m=null;for(const y in h)y.toLowerCase().indexOf("min")===0?p=h[y]:m=h[y];return TW(n,p,m)})}function TW(e,t,i){if(e.type==="classBreaks"){const s=cVe(e);return{classBreaks:s.classBreakInfos.map((n,o)=>(o===0&&t!=null&&(n.minValue=t),o===s.classBreakInfos.length-1&&i!=null&&(n.maxValue=i),{minValue:n.minValue,maxValue:n.maxValue,label:n.label})),normalizationTotal:s.normalizationTotal}}const{uniqueValueInfos:r}=e;return{uniqueValues:(r==null?void 0:r.map((s,n)=>(n===0&&t!=null&&(s.value=t),n===r.length-1&&i!=null&&(s.value=i),{count:s.count,value:s.value,label:s.label})))??[]}}let Ub=class extends P{constructor(t){super(t),this.classificationDefinition=null,this.where=null}};l([d({json:{name:"classificationDef",write:!0}})],Ub.prototype,"classificationDefinition",void 0),l([d({type:String,json:{write:!0}})],Ub.prototype,"where",void 0),Ub=l([x("esri.rest.support.GenerateRendererParameters")],Ub);const bD=Ub;let mu=class extends P{constructor(t){super(t),this.type="unique-value-definition",this.attributeField=null,this.attributeField2=null,this.attributeField3=null,this.fieldDelimiter=null}get uniqueValueFields(){const t=[];return this.attributeField&&t.push(this.attributeField),this.attributeField2&&t.push(this.attributeField2),this.attributeField3&&t.push(this.attributeField3),t}};l([ee({uniqueValueDef:"unique-value-definition"})],mu.prototype,"type",void 0),l([d()],mu.prototype,"attributeField",void 0),l([d()],mu.prototype,"attributeField2",void 0),l([d()],mu.prototype,"attributeField3",void 0),l([d({json:{write:!0}})],mu.prototype,"fieldDelimiter",void 0),l([d({json:{write:!0}})],mu.prototype,"uniqueValueFields",null),mu=l([x("esri.rest.support.UniqueValueDefinition")],mu);const OGe=mu;async function tm(e){const{attribute:t,features:i}=e,{normalizationType:r,normalizationField:s,minValue:n,maxValue:o,fieldType:a,outStatisticTypes:u}=t,c=await qv({field:t.field,valueExpression:t.valueExpression,normalizationType:r,normalizationField:s,normalizationTotal:t.normalizationTotal,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},i),h=qV({normalizationType:r,normalizationField:s,minValue:n,maxValue:o}),p={value:.5,fieldType:a},m=a==="esriFieldTypeString"?Cqe({values:c,supportsNullCount:h,percentileParams:p,outStatisticTypes:u}):lce({values:c,minValue:n,maxValue:o,useSampleStdDev:!r,supportsNullCount:h,percentileParams:p,outStatisticTypes:u});return k1(m,u,a==="esriFieldTypeDate")}async function lC(e){const{attribute:t,features:i}=e,r=await qv({field:t.field,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,valueExpression:t.valueExpression,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},i,!1),s=jqe(r);return P1(s,t.domains,t.returnAllCodedValues,t.fieldDelimiter)}async function uC(e){const{attribute:t,features:i}=e,{field:r,normalizationType:s,normalizationField:n,normalizationTotal:o,classificationMethod:a}=t,u=await qv({field:r,valueExpression:t.valueExpression,normalizationType:s,normalizationField:n,normalizationTotal:o,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},i),c=dce(u,{field:r,normalizationType:s,normalizationField:n,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:t.standardDeviationInterval,numClasses:t.numClasses,minValue:t.minValue,maxValue:t.maxValue});return BV(c,a)}async function V1(e){const{attribute:t,features:i}=e,{field:r,normalizationType:s,normalizationField:n,normalizationTotal:o,classificationMethod:a}=t,u=await qv({field:r,valueExpression:t.valueExpression,normalizationType:s,normalizationField:n,normalizationTotal:o,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},i);return Uqe(u,{field:r,normalizationType:s,normalizationField:n,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:t.standardDeviationInterval,numBins:t.numBins,minValue:t.minValue,maxValue:t.maxValue})}async function Sce(e){const{attribute:t,features:i}=e,{field:r,radius:s,transform:n,spatialReference:o}=t,a=t.size??[0,0],u=Wqe(i??[],n,o,a);return Zqe(u,s??void 0,r,a[0],a[1])}const RGe=Object.freeze(Object.defineProperty({__proto__:null,classBreaks:uC,heatmapStatistics:Sce,histogram:V1,summaryStatistics:tm,uniqueValues:lC},Symbol.toStringTag,{value:"Module"}));let Wn=class extends In{constructor(t){super(t),this.adapterName="layer-adapter"}};l([d({readOnly:!0})],Wn.prototype,"adapterName",void 0),l([d({constructOnly:!0})],Wn.prototype,"layer",void 0),l([d()],Wn.prototype,"geometryType",void 0),l([d()],Wn.prototype,"objectIdField",void 0),l([d()],Wn.prototype,"supportsSQLExpression",void 0),l([d()],Wn.prototype,"hasQueryEngine",void 0),l([d()],Wn.prototype,"minScale",void 0),l([d()],Wn.prototype,"maxScale",void 0),l([d()],Wn.prototype,"fullExtent",void 0),Wn=l([x("esri.smartMapping.support.adapters.LayerAdapter")],Wn);const YV=Wn,Tce={convertToGEGeometry:FGe,exportPoint:LGe,exportPolygon:PGe,exportPolyline:jGe,exportMultipoint:zGe,exportExtent:qGe};function FGe(e,t){return t==null?null:e.convertJSONToGeometry(t)}let NGe=class{constructor(t,i,r){this.x=t,this.y=i,this.spatialReference=r,this.z=void 0,this.m=void 0}};function LGe(e,t,i){const r=new NGe(e.getPointX(t),e.getPointY(t),i),s=e.hasZ(t),n=e.hasM(t);return s&&(r.z=e.getPointZ(t)),n&&(r.m=e.getPointM(t)),r}let kGe=class{constructor(t,i,r,s){this.rings=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}};function PGe(e,t,i){return new kGe(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}let DGe=class{constructor(t,i,r,s){this.paths=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}};function jGe(e,t,i){return new DGe(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}class VGe{constructor(t,i,r,s){this.points=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function zGe(e,t,i){return new VGe(e.exportPoints(t),i,e.hasZ(t),e.hasM(t))}let UGe=class{constructor(t,i,r,s,n){this.xmin=t,this.ymin=i,this.xmax=r,this.ymax=s,this.spatialReference=n,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}};function qGe(e,t,i){const r=e.hasZ(t),s=e.hasM(t),n=new UGe(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),i);if(r){const o=e.getZExtent(t);n.zmin=o.vmin,n.zmax=o.vmax}if(s){const o=e.getMExtent(t);n.mmin=o.vmin,n.mmax=o.vmax}return n}const sR=[0,0];function xce(e,t){if(!t)return null;if("x"in t){const i={x:0,y:0};return[i.x,i.y]=e(t.x,t.y,sR),t.z!=null&&(i.z=t.z),t.m!=null&&(i.m=t.m),i}if("xmin"in t){const i={xmin:0,ymin:0,xmax:0,ymax:0};return[i.xmin,i.ymin]=e(t.xmin,t.ymin,sR),[i.xmax,i.ymax]=e(t.xmax,t.ymax,sR),t.hasZ&&(i.zmin=t.zmin,i.zmax=t.zmax,i.hasZ=!0),t.hasM&&(i.mmin=t.mmin,i.mmax=t.mmax,i.hasM=!0),i}return"rings"in t?{rings:xW(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:xW(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:$ce(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function xW(e,t){const i=[];for(const r of e)i.push($ce(r,t));return i}function $ce(e,t){const i=[];for(const r of e){const s=t(r[0],r[1],[0,0]);i.push(s),r.length>2&&s.push(r[2]),r.length>3&&s.push(r[3])}return i}async function Ece(e,t){if(!e||!t)return;const i=Array.isArray(e)?e.map(r=>r.geometry!=null?r.geometry.spatialReference:null).filter(Br):[e];await $S(i.map(r=>({source:r,dest:t})))}const Mce=xce.bind(null,Xp),Ace=xce.bind(null,vS);function Ice(e,t,i,r){if(!e)return null;if(i||(i=t,t=e.spatialReference),!cs(t)||!cs(i)||ei(t,i))return e;if(Mg(t,i)){const s=Mn(i)?Mce(e):Ace(e);return s.spatialReference=i,s}return m1(Tce,[e],t,i,null,r)[0]}class GGe{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,i,r,s){if(!(t!=null&&t.length)||!i||!r||ei(i,r))return t;const n={geometries:t,inSpatialReference:i,outSpatialReference:r,geographicTransformation:s,resolve:Bs()};return this._jobs.push(n),this._timer??(this._timer=setTimeout(this._process,10)),n.resolve.promise}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:i,inSpatialReference:r,outSpatialReference:s,resolve:n,geographicTransformation:o}=t;Mg(r,s)?Mn(s)?n(i.map(Mce)):n(i.map(Ace)):n(m1(Tce,i,r,s,o,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const BGe=new GGe;function Sst(e,t,i,r){return BGe.push(e,t,i,r)}const _D=new be({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),$W=Object.freeze({}),HGe="frequency";async function Tst(e,t,i){var s,n;const r=e.bin;return r.onField&&(r.onField=r.onField.trim()),(s=r.onExpression)!=null&&s.value&&(r.onExpression.value=r.onExpression.value.trim()),r.splitBy&&(r.splitBy.value&&(r.splitBy.value=r.splitBy.value.trim()),r.splitBy.outAlias&&(r.splitBy.outAlias=r.splitBy.outAlias.trim())),r.stackBy&&(r.stackBy.value&&(r.stackBy.value=r.stackBy.value.trim()),r.stackBy.outAlias&&(r.stackBy.outAlias=r.stackBy.outAlias.trim())),"normalizationField"in r.parameters&&r.parameters.normalizationField&&(r.parameters.normalizationField=r.parameters.normalizationField.trim()),(n=e.outStatistics)!=null&&n.length||(e.outStatistics=[{statisticType:"count",onStatisticField:"1",outStatisticFieldName:HGe}]),WGe(e,t,i)}async function WGe(e,t,i){const{outFields:r,orderByFields:s,groupByFieldsForStatistics:n,outStatistics:o}=e;if(r)for(let a=0;a<r.length;a++)r[a]=r[a].trim();if(s)for(let a=0;a<s.length;a++)s[a]=s[a].trim();if(n)for(let a=0;a<n.length;a++)n[a]=n[a].trim();if(o)for(let a=0;a<o.length;a++)o[a].onStatisticField&&(o[a].onStatisticField=o[a].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),ZGe(e,t,i)}async function ZGe(e,t,i){var n;if(!e)return null;let{where:r}=e;if(e.where=r=r==null?void 0:r.trim(),(!r||/^1 *= *1$/.test(r)||t&&t===r)&&(e.where=null),!e.geometry)return e;let s=await YGe(e);if(e.distance=0,e.units=null,e.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:o}=e.geometry;s=vbe(s),s.spatialReference=o}if(s){await Ece(s.spatialReference,i),s=JGe(s,i);const o=(await Tj(wa(s)))[0];if(o==null)throw $W;const a="quantizationParameters"in e&&((n=e.quantizationParameters)==null?void 0:n.tolerance)||"maxAllowableOffset"in e&&e.maxAllowableOffset||0,u=a&&Cce(s,i)?{densificationStep:8*a}:void 0,c=o.toJSON(),h=Ice(c,c.spatialReference,i,u);if(!h)throw $W;h.spatialReference=i,e.geometry=h}return e}function Cce(e,t){if(!e)return!1;const i=e.spatialReference;return(WA(e)||Gu(e)||ZA(e))&&!ei(i,t)&&!_a(i,t)}function JGe(e,t){const i=e.spatialReference;return Cce(e,t)&&WA(e)?{spatialReference:i,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function YGe(e){const{distance:t,units:i}=e,r=e.geometry;if(t==null||"vertexAttributes"in r)return r;const s=r.spatialReference,n=i?_D.fromJSON(i):xh(s),o=s&&(om(s)||Mn(s))?r:await Ece(s,uM).then(()=>Ice(r,uM)),a=await L(()=>import("./geodesicBufferOperator-Dyff5OAq.js"),__vite__mapDeps([300,301,71,72]));await a.load();const u=a.execute(o,t||1,{unit:n})??void 0;if(!u||!Gu(u)||u.rings.length===0)throw new M("unsupported-query:invalid-parameters","Invalid parameters for query by distance");return u}function xst(e,t){return e==null?null:typeof e=="string"?t?new Date(`1970-01-01T${e}Z`).getTime():new Date(e).getTime():e instanceof Date?e.getTime():e}const QGe=new be({esriFieldTypeInteger:"integer",esriFieldTypeString:"string"});let el=class extends _e.ClonableMixin(P){constructor(t){super(t),this.alias=null,this.responseType=null,this.type=null,this.value=null,this.valueType=null}};l([d({type:String,json:{name:"outAlias",write:!0}})],el.prototype,"alias",void 0),l([d({type:String})],el.prototype,"responseType",void 0),l([d({type:String,json:{write:!0}})],el.prototype,"type",void 0),l([d({type:String,json:{write:!0}})],el.prototype,"value",void 0),l([ee(QGe)],el.prototype,"valueType",void 0),el=l([x("esri.rest.support.AttributeBinsGrouping")],el);const K2=el;el.from=yt(el);const XGe=new be({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeDate:"date",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"}),KGe=new be({naturalLog:"natural-log",squareRoot:"square-root"});let ia=class extends _e.ClonableMixin(P){constructor(t){super(t),this.expression=null,this.expressionValueType=null,this.field=null,this.firstDayOfWeek=null,this.hideUpperBound=null,this.splitBy=null,this.stackBy=null,this.transformation=null}};l([d({type:String,json:{name:"onExpression.value",write:!0}})],ia.prototype,"expression",void 0),l([ee(XGe,{name:"onExpression.valueType"})],ia.prototype,"expressionValueType",void 0),l([d({type:String,json:{name:"onField",write:!0}})],ia.prototype,"field",void 0),l([d({type:String,json:{write:!0}})],ia.prototype,"firstDayOfWeek",void 0),l([d({type:String,json:{write:!0}})],ia.prototype,"hideUpperBound",void 0),l([d({type:K2,json:{write:{overridePolicy(){var e,t;return{enabled:((e=this.splitBy)==null?void 0:e.value)!=null||((t=this.splitBy)==null?void 0:t.type)!=null}}}}})],ia.prototype,"splitBy",void 0),l([d({type:K2,json:{write:{target:{stackBy:{type:K2},jsonStyle:{type:String}},writer:(e,t)=>{e&&(t.stackBy=e.toJSON(),e.responseType!=null&&(t.jsonStyle=e.responseType))},overridePolicy(){var e,t;return{enabled:((e=this.stackBy)==null?void 0:e.value)!=null||((t=this.stackBy)==null?void 0:t.type)!=null}}},read:{source:["stackBy","jsonStyle"],reader:(e,t)=>K2.fromJSON({...t.stackBy,responseType:t.jsonStyle})}}})],ia.prototype,"stackBy",void 0),l([ee(KGe)],ia.prototype,"transformation",void 0),ia=l([x("esri.rest.support.BinParametersBase")],ia);const KS=ia;function EW(e,t,i){Lt(i,e instanceof Date?e.getTime():e,t)}let Tu=class extends qae(KS){constructor(t){super(t),this.numBins=null,this.end=null,this.start=null,this.type="auto-interval"}};l([d({type:Number,json:{name:"parameters.numberOfBins",write:!0}})],Tu.prototype,"numBins",void 0),l([d({json:{name:"parameters.end",write:{writer:EW}}})],Tu.prototype,"end",void 0),l([d({json:{name:"parameters.start",write:{writer:EW}}})],Tu.prototype,"start",void 0),l([ee({autoIntervalBin:"auto-interval"},{readOnly:!0})],Tu.prototype,"type",void 0),Tu=l([x("esri.rest.support.AutoIntervalBinParameters")],Tu);const Oce=Tu;Tu.from=yt(Tu);const e7e=Si()({year:"years",quarter:"quarters",month:"months",week:"weeks",day:"days",hour:"hours",minute:"minutes",second:"seconds"});let of=class extends _e.ClonableMixin(P){constructor(t){super(t),this.value=null,this.unit=null}};l([d({type:Number,json:{name:"number",write:!0}})],of.prototype,"value",void 0),l([ee(e7e)],of.prototype,"unit",void 0),of=l([x("esri.rest.support.DateBinTimeInterval")],of);const MW=of;of.from=yt(of);function AW(e,t,i){Lt(i,typeof e=="string"?e:e==null?void 0:e.getTime(),t)}function IW(e,t){const i=e.parameters[t];return i?typeof i=="string"?i:new Date(i):null}let Yn=class extends KS{constructor(t){super(t),this.end=null,this.interval=null,this.offset=null,this.returnFullIntervalBin=null,this.start=null,this.snapToData=null,this.type="date"}};l([d({cast:e=>e!=null?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.end",read:{reader:(e,t)=>IW(t,"end")},write:{writer:AW}}})],Yn.prototype,"end",void 0),l([d({type:MW,json:{name:"parameters",write:!0}})],Yn.prototype,"interval",void 0),l([d({type:MW,json:{name:"parameters.offset",write:!0}})],Yn.prototype,"offset",void 0),l([d({type:Boolean,json:{name:"parameters.returnFullIntervalBin",write:!0}})],Yn.prototype,"returnFullIntervalBin",void 0),l([d({cast:e=>e!=null?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.start",read:{reader:(e,t)=>IW(t,"start")},write:{writer:AW}}})],Yn.prototype,"start",void 0),l([d({type:String,json:{name:"parameters.snapToData",write:!0}})],Yn.prototype,"snapToData",void 0),l([ee({dateBin:"date"},{readOnly:!0})],Yn.prototype,"type",void 0),Yn=l([x("esri.rest.support.DateBinParameters")],Yn);const Rce=Yn;Yn.from=yt(Yn);function t7e(e){return e[0]instanceof Date}function i7e(e,t,i){Lt(i,e&&t7e(e)?e.map(r=>r.getTime()):e,t)}let af=class extends KS{constructor(t){super(t),this.boundaries=[],this.type="fixed-boundaries"}};l([d({json:{name:"parameters.boundaries",write:{writer:i7e}}})],af.prototype,"boundaries",void 0),l([ee({fixedBoundariesBin:"fixed-boundaries"},{readOnly:!0})],af.prototype,"type",void 0),af=l([x("esri.rest.support.FixedBoundariesBinParameters")],af);const Fce=af;af.from=yt(af);function CW(e,t,i){Lt(i,e instanceof Date?e.getTime():e,t)}let xu=class extends qae(KS){constructor(t){super(t),this.end=null,this.interval=null,this.start=null,this.type="fixed-interval"}};l([d({json:{name:"parameters.end",write:{writer:CW}}})],xu.prototype,"end",void 0),l([d({type:Number,json:{name:"parameters.interval",write:!0}})],xu.prototype,"interval",void 0),l([d({json:{name:"parameters.start",write:{writer:CW}}})],xu.prototype,"start",void 0),l([ee({fixedIntervalBin:"fixed-interval"},{readOnly:!0})],xu.prototype,"type",void 0),xu=l([x("esri.rest.support.FixedIntervalBinParameters")],xu);const Nce=xu;xu.from=yt(xu);const r7e=new be({asc:"ascending",desc:"descending"}),s7e={base:KS,key:"type",typeMap:{"auto-interval":Oce,date:Rce,"fixed-boundaries":Fce,"fixed-interval":Nce}};let ai=class extends _e.ClonableMixin(P){constructor(t){super(t),this.binParameters=null,this.binOrder="ascending",this.cacheHint=void 0,this.datumTransformation=null,this.defaultSpatialReference=null,this.distance=void 0,this.geometry=null,this.lowerBoundaryAlias=null,this.outSpatialReference=null,this.outStatistics=null,this.returnDistinctValues=null,this.spatialRelationship="intersects",this.timeExtent=null,this.upperBoundaryAlias=null,this.units=null,this.where="1=1"}set outTimeZone(t){this._set("outTimeZone",t),t&&!gte(t)&&q.getLogger(this).warn("#outTimeZone",`the parsed value '${t}' may not be a valid IANA time zone`)}};l([d({types:s7e,json:{name:"bin",write:!0}})],ai.prototype,"binParameters",void 0),l([ee(r7e)],ai.prototype,"binOrder",void 0),l([d({type:Boolean,json:{write:!0}})],ai.prototype,"cacheHint",void 0),l([d({json:{write:!0}})],ai.prototype,"datumTransformation",void 0),l([d({type:we,json:{name:"defaultSR",write:!0}})],ai.prototype,"defaultSpatialReference",void 0),l([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ai.prototype,"distance",void 0),l([d({types:am,json:{read:wa,write:!0}})],ai.prototype,"geometry",void 0),l([d({type:String,json:{write:!0}})],ai.prototype,"lowerBoundaryAlias",void 0),l([d({type:we,json:{name:"outSR",write:!0}})],ai.prototype,"outSpatialReference",void 0),l([d({type:[ic],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],ai.prototype,"outStatistics",void 0),l([d({value:null,json:{name:"outTimeReference",read:{reader:e=>e.ianaTimeZone},write:{writer:(e,t,i)=>{e&&(t[i]={ianaTimeZone:e})}}}})],ai.prototype,"outTimeZone",null),l([d({type:Boolean,json:{write:!0}})],ai.prototype,"returnDistinctValues",void 0),l([ee(mse,{name:"spatialRel"})],ai.prototype,"spatialRelationship",void 0),l([d({type:Ni,json:{write:!0}})],ai.prototype,"timeExtent",void 0),l([d({type:String,json:{write:!0}})],ai.prototype,"upperBoundaryAlias",void 0),l([d({type:String,json:{read:_D.read,write:{writer:_D.write,overridePolicy(e){return{enabled:e!=null&&this.distance!=null}}}}})],ai.prototype,"units",void 0),l([d({type:String,json:{write:!0}})],ai.prototype,"where",void 0),ai=l([x("esri.rest.support.AttributeBinsQuery")],ai);const Lce=ai;ai.from=yt(ai);const n7e=Object.freeze(Object.defineProperty({__proto__:null,default:Lce},Symbol.toStringTag,{value:"Module"})),kce="countOFExpr",o7e="lowerBoundary",a7e="upperBoundary";function Pce(e,t,i){const r=e.valueExpression||e.sqlExpression,s=e.signal;if(!r){const{field:n,normalizationType:o,normalizationField:a}=e,u=n?t.getField(n):null,c=go(u)||zs(u);return{sqlExpression:c?fce(t,u):Gv({field:n,normalizationType:o,normalizationField:a,normalizationTotal:i,layer:t}),sqlWhere:c?null:e.sqlWhere||oC({field:n,normalizationType:o,normalizationField:a}),filter:e.filter,signal:s}}return{valueExpression:e.valueExpression,sqlExpression:e.sqlExpression,sqlWhere:e.sqlWhere,filter:e.filter,signal:s}}async function SD(e,t,i){const{field:r,normalizationType:s,normalizationField:n,signal:o}=e,a=oC({field:r,normalizationType:s,normalizationField:n}),u=new bD({classificationDefinition:GV({field:r,normalizationType:s,normalizationField:n,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,definedInterval:e.definedInterval,breakCount:e.numBins||D1}),where:Sr(a,i)});return t.generateRenderer(u,o).then(c=>{const{normalizationTotal:h,classBreaks:p}=c;return tGe({field:r,normalizationType:s,normalizationField:n,normalizationTotal:h,classBreaks:p,where:a,layer:t})})}async function l7e(e,t,i,r,s){const{field:n,sqlExpression:o,normalizationField:a,classificationMethod:u,normalizationType:c}=e,h=n?t.getField(n):null,p=zs(h),m=vre(h)||p,y=e.numBins||D1;if(m){if(c||u)throw new M(`${t.adapterName}:not-supported`,"NormalizationType and classificationMethod are not supported for date-only and time-only fields");const g=(r-i)/y/1e3,v=g/86400;return new Rce({field:n,expression:o,interval:{unit:p?"seconds":"days",value:Math.ceil(p?g:v)},start:i,end:r})}if(u==="defined-interval")return new Nce({field:n,expression:o,normalizationField:a,normalizationTotal:s,normalizationType:c,interval:e.definedInterval??Math.ceil((r-i)/y),start:c?null:i,end:c?null:r,normalizationMinValue:c?i:null,normalizationMaxValue:c?r:null});if(u==="manual")throw new M(`${t.adapterName}:not-supported`,"Layer does not support manual classificationMethod");if(u==="natural-breaks"||u==="quantile"||u==="standard-deviation"){const g=Gv({field:n,normalizationField:a,normalizationTotal:s,normalizationType:c,layer:t}),v=e.minValue!==null&&e.maxValue!==null?nA(g,e.minValue,e.maxValue):void 0,b=await SD(e,t,v);if(!b.intervals)throw new M(`${t.adapterName}:invalid`,"Invalid intervals returned from generate renderer");const w=[i,...b.intervals.map(_=>_[1])];return new Fce({field:c?null:n,expression:c?g:o,boundaries:w})}return new Oce({field:n,normalizationField:a,normalizationTotal:s,normalizationType:c,expression:o,numBins:y,start:c?null:i,end:c?null:r,normalizationMinValue:c?i:null,normalizationMaxValue:c?r:null})}function Dce(e,t,i,r){return i!=null&&r!=null?Promise.resolve({min:i,max:r}):t.summaryStatistics({...e,outStatisticTypes:{include:["min","max"]}}).then(s=>({min:s.min,max:s.max}))}async function jce(e,t,i,r){const{field:s,minValue:n,maxValue:o,filter:a,view:u}=e,c=s?t.getField(s):null,h=fI(c)||wre(c),p=Pce(e,t,i),{min:m,max:y}=await Dce(p,t,n,o);if(m==null||y==null)return{query:null,min:m,max:y};const g=new ic({statisticType:"count",outStatisticFieldName:kce,onStatisticField:"1"}),v=Sr(r,p.sqlWhere),b="lowerBoundary",w="upperBoundary",_=new Lce({binParameters:await l7e(e,t,m,y,i),outStatistics:[g],binOrder:e.sortOrder,where:v,lowerBoundaryAlias:b,upperBoundaryAlias:w,outTimeZone:u!=null&&u.timeZone&&h?tI(u.timeZone):null});return fo(_,a),{query:_,min:m,max:y}}function OW(e,t=!1){return typeof e!="string"?e:(t?new Date(`1970-01-01T${e}Z`):new Date(e)).getTime()}function Vce(e,t,i){const r=zs(t);return{...i,bins:e.features.map(s=>({minValue:OW(s.attributes[o7e],r),maxValue:OW(s.attributes[a7e],r),count:s.attributes[kce]}))}}function RW(e,t,i){const{valueExpression:r,view:s}=e,{featuresJSON:n,graphics:o,fieldInfos:a}=t,u={field:e.field,valueExpression:r,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:i,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numBins:e.numBins};return r&&s&&(n||o)&&(u.viewInfoParams=po(s),u.timeZone=s.timeZone,u.fieldInfos=a),u}const u7e=5;let ex=null,qb=class extends YV{constructor(){super(...arguments),this._hasLocalSource=!1,this.adapterName="in-memory-layer-adapter"}destroy(){var e;(e=this.workerClient)==null||e.destroy()}async _waitForLayerViewUpdate(e){if(!e)throw new M(`${this.adapterName}:insufficient-data", "layerView is required to fetch the features`);const t=new AbortController,i=vl(()=>!e.updating,t.signal);await KQ(i,5e3,t).catch(r=>{throw q.getLogger(this).warn("LayerView is taking too long to update. Aborting fetch from layerView."),r})}async _fetchFeatureSetFromMemory(e,t,i){const r=this.layer;if(this._hasLocalSource&&"queryFeatures"in r)return r.queryFeatures(e);if(!t)throw new M(`${this.adapterName}:insufficient-data`,"view is required to fetch the features from layerView");const s=await t.whenLayerView(this.layer);return await this._waitForLayerViewUpdate(s),s.queryFeatures(e,{signal:i})}async _fetchFeaturesFromMemory(e,t,i,r){const s=this.layer,n=r==="json";if(this._hasLocalSource&&"queryFeatures"in s){const a=await s.queryFeatures(t);return n?j1(a.features):a.features}if(await this._waitForLayerViewUpdate(e),n&&"queryFeaturesJSON"in e&&e.queryFeaturesJSON){const{features:a}=await e.queryFeaturesJSON(t,{signal:i});return a}if(!("queryFeatures"in e))throw new M(`${this.adapterName}:not-supported`,"'queryFeatures' is not supported on the layerView");const o=await e.queryFeatures(t,{signal:i});return n?j1(o.features):o.features}_fetchFeaturesForStats(e,t){return Gg({field:e.field,field2:e.field2,field3:e.field3,normalizationField:e.normalizationField,valueExpression:e.valueExpression}).then(i=>this.getSampleFeatures({sampleSize:-1,view:e.view,returnGeometry:e.returnGeometry,filter:e.filter,requiredFields:i,signal:e.signal},t))}async _summaryStatsFromClientQuery(e,t){const{view:i,signal:r}=e,s=JV(this,e,t),n=await this._fetchFeatureSetFromMemory(s,i,r),o=HV(n,go(t)||zs(t));return k1(o,e.outStatisticTypes)}async _getNormalizationTotalFromMemory(e,t,i){const{featuresJSON:r,graphics:s,layerView:n,query:o}=t,a={include:["sum"]},u=(!r&&!s&&n&&"querySummaryStatistics"in n?await n.querySummaryStatistics(o,{field:e},{signal:i}):r?await this.workerClient.summaryStatistics({field:e,outStatisticTypes:a},r):await tm({attribute:{field:e,outStatisticTypes:a},features:s??[]})).sum;if(u==null)throw new M(`${this.adapterName}:invalid`,"invalid normalizationTotal");return u}async _summaryStatsFromMemory(e,t){const{view:i,field:r,valueExpression:s,normalizationType:n,signal:o}=e,a={field:r,valueExpression:s,normalizationType:n,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,outStatisticTypes:e.outStatisticTypes},{featuresJSON:u,graphics:c,layerView:h,query:p,fieldInfos:m}=await this._processStatsFromMemoryParams({...e,layerViewFunc:"querySummaryStatistics"});return s&&i&&(u||c)&&(a.fieldType=t!=null&&t.type?b0.toJSON(t.type):null,a.viewInfoParams=po(i),a.timeZone=i.timeZone,a.fieldInfos=m),n==="percent-of-total"&&e.normalizationTotal==null&&(a.normalizationTotal=await this._getNormalizationTotalFromMemory(r,{featuresJSON:u,graphics:c,layerView:h,query:p},o)),!u&&!c&&h&&"querySummaryStatistics"in h?h.querySummaryStatistics(p,a,{signal:o}):u?this.workerClient.summaryStatistics(a,u):tm({attribute:a,features:c})}async _getFilteredFeatures(e,t){let i=[];if((t==null?void 0:t.spatialRelationship)==="intersects"){const{intersect:r}=await L(()=>import("./geometryEngineAsync-C_mQFDQ5.js"),[]),s=t.geometry!=null?t.geometry:null;for(const n of e){const o=n.geometry!=null?n.geometry:null;o&&s&&await r(o,s)&&i.push(n)}}else i=e;return e.length&&"declaredClass"in e[0]&&e[0].declaredClass==="esri.Graphic"?{graphics:i}:{featuresJSON:i}}async _processStatsFromMemoryParams(e){const{features:t,filter:i}=e;if(t!=null&&t.length)return this._getFilteredFeatures(t,i);const{view:r,field:s,field2:n,field3:o,normalizationField:a,valueExpression:u,layerViewFunc:c,signal:h}=e;let p=e.returnGeometry;if(p==null&&u){if(!ex){const{arcadeUtils:_}=await On();ex=_}const w=ex.hasGeometryOperations(u);w&&await ex.enableGeometryOperations(),p=w}let m=null,y=null,g=null,v=null,b=null;if(r)try{const w=this.layer.type==="subtype-sublayer"?this.layer.parent:this.layer;m=await r.whenLayerView(w),y=c!=null&&c in m&&typeof m[c]=="function"}catch{y=!1}if(y)try{await this._waitForLayerViewUpdate(m);const w=await Gg({field:s,field2:n,field3:o,normalizationField:a,valueExpression:u});oA(this,w,m).length?y=!1:(g=this.layer.createQuery(),g.outFields=w,g.returnGeometry=!1,fo(g,i)),m.suspended&&(y=!1)}catch{y=!1}return y||(v=await this._fetchFeaturesForStats({field:s,field2:n,field3:o,valueExpression:u,normalizationField:a,returnGeometry:p,filter:i,view:r,signal:h},"json"),b=(await Gg({valueExpression:u})).map(w=>{var _;return(_=this.getField(w))==null?void 0:_.toJSON()}).filter(Boolean)),{layerView:m,query:g,featuresJSON:v,fieldInfos:b}}async _uvFromClientQuery(e,t){const{view:i,signal:r}=e,s=mce(this,e),n=await this._fetchFeatureSetFromMemory(s,i,r),o=await WV(n,{layer:this,field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:Ef,view:e.view,signal:e.signal});return P1(o,t,e.returnAllCodedValues,Ef)}async _uvFromMemory(e,t){const{view:i,field:r,valueExpression:s,returnAllCodedValues:n,signal:o}=e,{featuresJSON:a,graphics:u,layerView:c,query:h,fieldInfos:p}=await this._processStatsFromMemoryParams({...e,layerViewFunc:"queryUniqueValues"}),m={field:r,field2:e.field2,field3:e.field3,fieldDelimiter:Ef,valueExpression:s,domains:t,returnAllCodedValues:n};return s&&i&&(a||u)&&(m.viewInfoParams=po(i),m.timeZone=i.timeZone,m.fieldInfos=p),!a&&!u&&c&&"queryUniqueValues"in c?c.queryUniqueValues(h,m,{signal:o}):a?this.workerClient.uniqueValues(m,a):lC({attribute:m,features:u})}_histogramForField(e){let t=null;return t=e.minValue!=null&&e.maxValue!=null?Promise.resolve({min:e.minValue,max:e.maxValue}):this.summaryStatistics({...e,outStatisticTypes:{include:["min","max","count"]}}).then(i=>{if(!i.count)throw new M(`${this.adapterName}:insufficient-data`,"Either the layer has no features or none of the features have data for the field");return{min:i.min,max:i.max}}),t.then(i=>eE(this,{min:i.min,max:i.max},e.field,e.numBins??void 0,e.view,e.filter,e.signal))}async _histogramFromQueryAttributeBinsFromMemory(e){const{field:t,normalizationType:i,signal:r}=e,s=await this._processStatsFromMemoryParams({...e,layerViewFunc:"queryAttributeBins"}),{featuresJSON:n,graphics:o,layerView:a,query:u}=s,c=i==="percent-of-total"?e.normalizationTotal??await this._getNormalizationTotalFromMemory(t,s,r):void 0;if(!a||!("queryAttributeBins"in a)||n||o){const g=RW(e,s,c);return n?this.workerClient.histogram(g,n):V1({attribute:g,features:o})}const{query:h,min:p,max:m}=await jce(e,this,c,u==null?void 0:u.where);if(!h)return{bins:[],minValue:p,maxValue:m,normalizationTotal:c};const y=await a.queryAttributeBins(h,{signal:r});return Vce(y,t?this.getField(t):null,{minValue:p,maxValue:m,normalizationTotal:c})}async _histogramFromMemory(e){const{field:t,signal:i}=e,r=await this._processStatsFromMemoryParams({...e,layerViewFunc:"queryHistogram"}),{featuresJSON:s,graphics:n,layerView:o,query:a}=r,u=e.normalizationType==="percent-of-total"?e.normalizationTotal??await this._getNormalizationTotalFromMemory(t,r,i):void 0,c=RW(e,r,u);return!s&&!n&&o&&"queryHistogram"in o?o.queryHistogram(a,c,{signal:i}):s?this.workerClient.histogram(c,s):V1({attribute:c,features:n})}_classBreaksFromInterpolation(e){const{minValue:t,maxValue:i}=e,r=e.numClasses||u7e,s=[],n=(i-t)/r;for(let u=0;u<r;u++){const c=t+u*n;s.push({minValue:c,maxValue:c+n})}s[r-1].maxValue=i;const o={classBreaks:s,normalizationTotal:e.normalizationTotal},a=BV(o,e.classificationMethod);return Promise.resolve(a)}async _classBreaksFromMemory(e){const{view:t,field:i,valueExpression:r,signal:s}=e,{featuresJSON:n,graphics:o,layerView:a,query:u,fieldInfos:c}=await this._processStatsFromMemoryParams({...e,layerViewFunc:"queryClassBreaks"}),h={field:i,valueExpression:r,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numClasses:e.numClasses};return r&&t&&(n||o)&&(h.viewInfoParams=po(t),h.timeZone=t.timeZone,h.fieldInfos=c),e.normalizationType==="percent-of-total"&&e.normalizationTotal==null&&(h.normalizationTotal=await this._getNormalizationTotalFromMemory(i,{featuresJSON:n,graphics:o,layerView:a,query:u},s)),!n&&!o&&a&&"queryClassBreaks"in a?a.queryClassBreaks(u,h,{signal:s}):n?this.workerClient.classBreaks(h,n):uC({attribute:h,features:o})}async _heatmapStatsFromMemory(e){var c,h;const{view:t,field:i,radius:r,signal:s}=e;j5(t,"InMemoryLayerAdapter: must have a view");try{const p=await t.whenLayerView(this.layer);if("queryHeatmapStatistics"in p&&!p.updating&&!e.filter)return await p.queryHeatmapStatistics({field:e.field,radius:e.radius})}catch{Fe(s)}const{featuresJSON:n,graphics:o}=await this._processStatsFromMemoryParams({...e,returnGeometry:!0}),a=new mj({extent:t.extent,tolerance:t.type==="2d"?t.state.resolution:(c=t.pixelSizeAt)==null?void 0:c.call(t,t.center)}),u={field:i,radius:r,transform:iqe(a),spatialReference:(h=t.spatialReference)==null?void 0:h.toJSON(),size:t.size};return n!=null&&n.length||o!=null&&o.length?n?this.workerClient.heatmapStatistics(u,n):Sce({attribute:u,features:o}):{min:null,max:null}}getField(e=""){return this.layer.getField(e)}getFieldUsageInfo(e){return this.getField(e)?{supportsLabelingInfo:!0,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:!0,supportsStatistics:!0}:null}getFieldDomain(e,t){return this.layer.getFieldDomain(e,t)}createQuery(){return this.layer.createQuery()}async summaryStatistics(e){const{field:t,valueExpression:i,sqlExpression:r,features:s,view:n}=e,o=t?this.getField(t):null,a=!!i,u=(n==null?void 0:n.type)==="3d";if(!i&&r&&!this.supportsSQLExpression)throw new M(`${this.adapterName}:not-supported`,"Layer does not support standardized SQL expression for queries");return a||s||u?this._summaryStatsFromMemory(e,o):this._summaryStatsFromClientQuery(e,o)}async uniqueValues(e){const{valueExpression:t,sqlExpression:i,features:r,view:s}=e,n=await aC(e,this),o=!!t,a=(s==null?void 0:s.type)==="3d";if(!t&&i&&!this.supportsSQLExpression)throw new M(`${this.adapterName}:not-supported`,"Layer does not support standardized SQL expression for queries");return o||r||a?this._uvFromMemory(e,n):this._uvFromClientQuery(e,n)}async histogram(e){const{features:t,valueExpression:i,normalizationType:r,sqlExpression:s}=e,n=t||!!i;if(!i&&s&&!this.supportsSQLExpression)throw new M(`${this.adapterName}:not-supported`,"Layer does not support standardized SQL expression for queries");return n||r?this._histogramFromMemory(e):this._histogramForField(e)}async classBreaks(e){return e.analyzeData!==!1?this._classBreaksFromMemory(e):this._classBreaksFromInterpolation(e)}async queryFeatureCount(e){const{whereClause:t,view:i,signal:r}=e;if(!i)throw new M(`${this.adapterName}:insufficient-data`,"view is required to fetch the features from layerView");const s=this.layer.createQuery();s.where=Sr(s.where,t);const n=await i.whenLayerView(this.layer);return await vl(()=>!n.updating,r),n.queryFeatureCount(s,{signal:r})}async generateRenderer(e,t){throw new M(`${this.adapterName}:not-supported`,"Layer does not support generateRenderer operation")}async predominantCategories(e){const{fields:t,view:i,signal:r,filter:s}=e,n=zV(t),o=await this._uvFromMemory({valueExpression:n,view:i,signal:r,filter:s});return ZV(o.uniqueValueInfos,t)}async heatmapStatistics(e){return this._heatmapStatsFromMemory(e)}async getSampleFeatures(e,t){const{view:i,sampleSize:r,requiredFields:s,returnGeometry:n,filter:o,signal:a}=e,u=this.layer.createQuery(),c=1;if(u.outSpatialReference=i==null?void 0:i.spatialReference,u.returnGeometry=!!n,u.outFields=s,fo(u,o),!i)throw new M(`${this.adapterName}:not-supported`,"view is required to get sample features for Layer");const h=await i.whenLayerView(this.layer);if(oA(this,s,h).length)throw new M(`${this.adapterName}:not-supported`,"Required fields need to be passed in the outFields for Layer");const p=await this._fetchFeaturesFromMemory(h,u,a,t),m=r!=null&&r>0&&r<=p.length?r:p.length;return wv(p,m,c)}load(e){const t=this.layer.load(e).then(async i=>{var r,s,n;this.geometryType=i.geometryType,this.objectIdField=i.objectIdField,this.supportsSQLExpression=i.type==="stream"||!!((s=(r=i.capabilities)==null?void 0:r.query)!=null&&s.supportsSqlExpression),this.minScale=i.minScale,this.maxScale=i.maxScale,this.fullExtent="fullExtent"in i?i.fullExtent:(n=i.parent)==null?void 0:n.fullExtent,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.workerClient=XS.getInstance(),await this.workerClient.open(e.signal)});return this.addResolvingPromise(t),Promise.resolve(this)}};l([d({readOnly:!0})],qb.prototype,"adapterName",void 0),l([d({constructOnly:!0})],qb.prototype,"layer",void 0),qb=l([x("esri.smartMapping.support.adapters.InMemoryLayerAdapter")],qb);const QV=qb,FW=5,NW=2e4,c7e=4e5;let Gb=class extends QV{constructor(){super(...arguments),this.adapterName="feature-layer-adapter"}_isStatsSupportedOnService(){var t,i;const e=this.layer;if(!((i=(t=e.capabilities)==null?void 0:t.query)!=null&&i.supportsStatistics)||this.geometryType==="multipatch"&&!l1(e.url)&&e.version<10.5)throw new M(`${this.adapterName}:not-supported`,"Layer does not support statistics query");return Promise.resolve()}_fetchFeaturesFromService(e,t){return this.layer.queryFeatures(e,{signal:t}).then(i=>i.features)}_fetchFeaturesJSONFromService(e,t){return this._fetchFeaturesFromService(e,t).then(j1)}_summaryStatsFromGenRend(e){const t=e.normalizationType,i=e.normalizationField;return this.classBreaks({field:e.field,numClasses:FW,classificationMethod:"standard-deviation",standardDeviationInterval:.25,normalizationType:t,normalizationField:t==="field"?i:void 0,minValue:e.minValue,maxValue:e.maxValue,filter:e.filter,signal:e.signal}).then(r=>{var u;let s,n,o;if((u=r.classBreakInfos)==null||u.some(c=>(c.hasAvg&&(s=c),!!s)),s){const c=s.maxValue-s.minValue;n=s.minValue+c/2,o=4*c}const a={min:r.minValue,max:r.maxValue,avg:n,stddev:o};return k1(a,e.outStatisticTypes)})}async _summaryStatsFromServiceQuery(e,t){await this._isStatsSupportedOnService(),e.normalizationType==="percent-of-total"&&(e.normalizationTotal=await this._getNormalizationTotal(e.field,e.normalizationType,e.filter));const i=go(t)||zs(t),r=JV(this,e,t),s=await this.layer.queryFeatures(r,{signal:e.signal}),n=HV(s,i);return k1(n,e.outStatisticTypes)}_uvFromGenRenderer(e,t){const i=e.field??void 0,r=new OGe({attributeField:i}),s=new bD({classificationDefinition:r});return this.generateRenderer(s,e.signal).then(n=>{const o={},a=this.getField(i);return n.uniqueValues.forEach(u=>{let c=u.value;c!=null&&c!==""&&(typeof c!="string"||c.trim()!==""&&c.toLowerCase()!=="<null>")||(c=null),o[c]==null?o[c]={count:u.count,data:AS(a)&&c?Number(c):c}:o[c].count=o[c].count+u.count}),{count:o}}).then(n=>P1(n,[t],e.returnAllCodedValues))}async _uvFromServiceQuery(e,t){return this._isStatsSupportedOnService().then(()=>this.layer.queryFeatures(mce(this,e),{signal:e.signal})).then(i=>WV(i,{layer:this,field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:Ef,view:e.view,signal:e.signal})).then(i=>P1(i,t,e.returnAllCodedValues,Ef))}_getNormalizationTotal(e,t,i,r){return e&&t==="percent-of-total"?this.summaryStatistics({field:e,outStatisticTypes:{include:["sum"]},filter:i,signal:r}).then(s=>s.sum):Promise.resolve(null)}_histogramForExpr(e){return this._getNormalizationTotal(e.field,e.normalizationType,e.filter,e.signal).then(t=>{const i=Pce(e,this,t);return Dce(i,this,e.minValue,e.maxValue).then(r=>{const s=r.min,n=r.max;if(s==null||n==null)return{bins:[],minValue:s,maxValue:n,normalizationTotal:t};const o=e.numBins||D1,a=nC(s,n,o),u=d7e(i.sqlExpression,a,e.minValue!=null&&e.maxValue!=null),c=new ic({statisticType:"count",outStatisticFieldName:"countOFExpr",onStatisticField:"1"}),h=this.layer.createQuery();return h.where=Sr(h.where,i.sqlWhere),h.sqlFormat="standard",h.outStatistics=[c],h.groupByFieldsForStatistics=[u],h.orderByFields=[u],fo(h,e.filter),this._isStatsSupportedOnService().then(()=>this.layer.queryFeatures(h,{signal:i.signal})).then(p=>pce(p,s,n,o,t))})})}async _histogramFromQueryAttributeBins(e){const{field:t,normalizationType:i,filter:r,signal:s}=e,n=await this._getNormalizationTotal(t,i,r,s),o=this.layer.createQuery(),{query:a,min:u,max:c}=await jce(e,this,n,o==null?void 0:o.where);if(!a)return{bins:[],minValue:u,maxValue:c,normalizationTotal:n};const h=await this.layer.queryAttributeBins(a,{signal:s});return Vce(h,t?this.getField(t):null,{minValue:u,maxValue:c,normalizationTotal:n})}_classBreaksFromGenRend(e){const{field:t,normalizationType:i,normalizationField:r,normalizationTotal:s,signal:n}=e,o=oC({field:t,normalizationType:i,normalizationField:r}),a=Gv({field:t,normalizationType:i,normalizationField:r,normalizationTotal:s,layer:this}),u=nA(a,e.minValue,e.maxValue),c=GV({field:t,normalizationType:i,normalizationField:r,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,breakCount:e.numClasses||FW}),h=new bD({classificationDefinition:c});return h.where=Sr(o,u),this.generateRenderer(h,n).then(p=>BV(p,e.classificationMethod))}async summaryStatistics(e){const{field:t,normalizationType:i,valueExpression:r,sqlExpression:s,view:n,features:o,useFeaturesInView:a}=e,u=t?this.getField(t):null,c=go(u)||zs(u),h=r&&!(s&&this.supportsSQLExpression),p=this._hasLocalSource||o||a,m=n&&n.type==="3d";if(p||h)return h||o||a||m?this._summaryStatsFromMemory(e,u):this._summaryStatsFromClientQuery(e,u);if(!this.supportsSQLExpression&&(c||s||i==="natural-log"||i==="square-root"))throw new M(`${this.adapterName}:not-supported`,"Layer does not support standardized SQL expression for queries");return(i&&!this.supportsSQLExpression?this._summaryStatsFromGenRend(e):this._summaryStatsFromServiceQuery(e,u)).catch(()=>(Fe(e.signal),this._summaryStatsFromMemory(e,u)))}async uniqueValues(e){const{valueExpression:t,sqlExpression:i,features:r,useFeaturesInView:s,signal:n}=e,o=t&&!(i&&this.supportsSQLExpression),a=this._hasLocalSource||r||s||o,u=e.view,c=u&&u.type==="3d",h=await aC(e,this);return a?o||r||s||c?this._uvFromMemory(e,h):this._uvFromClientQuery(e,h):this._uvFromServiceQuery(e,h).catch(p=>(Fe(n),!e.field||e.field2||e.field3||e.filter?p:this._uvFromGenRenderer(e,h[0]))).catch(()=>(Fe(n),c?this._uvFromMemory(e,h):this._uvFromClientQuery(e,h)))}async histogram(e){var S,T;const{field:t,normalizationType:i,normalizationField:r,classificationMethod:s,view:n,filter:o,signal:a}=e,u=t?this.getField(t):null,c=go(u)||zs(u),h=e.valueExpression||e.sqlExpression,p=e.valueExpression&&!(e.sqlExpression&&this.supportsSQLExpression),m=this._hasLocalSource||e.features||e.useFeaturesInView||p,y=this.supportsSQLExpression,g=!s||s==="equal-interval",v=e.minValue,b=e.maxValue,w=v!=null&&b!=null,_=e.numBins||D1;if(m)return this._histogramFromMemory(e);if((T=(S=this.layer.capabilities)==null?void 0:S.operations)!=null&&T.supportsQueryBins&&e.useQueryAttributeBins)try{return await this._histogramFromQueryAttributeBins(e)}catch{return Fe(a),this._histogramFromQueryAttributeBinsFromMemory(e)}if((h||y)&&g){if(!y&&(h||i==="natural-log"||i==="square-root"))throw new M(`${this.adapterName}:not-supported`,"Layer does not support standardized SQL expression for queries");return this._histogramForExpr(e)}if(c&&g)throw new M(`${this.adapterName}:not-supported`,"Normalization and date field are not allowed when layer does not support standardized SQL expression for queries");return i||!g?SD(e,this).then(E=>{if(!w)return eE(this,E,t,_,n,o,a);if(v>E.max||b<E.min)throw new M(`${this.adapterName}:insufficient-data`,"Range defined by 'minValue' and 'maxValue' does not intersect available data range of the field");if(g)return eE(this,{min:v,max:b,sqlExpr:E.sqlExpr,excludeZerosExpr:E.excludeZerosExpr},t,_,n,o,a);{const A={field:t,normalizationType:i,normalizationField:r,normalizationTotal:E.normTotal,layer:this},C=Gv(A),O=nA(C,v,b);return SD(e,this,O).then(U=>eE(this,U,t,_,n,o,a))}}):this._histogramForField(e)}async classBreaks(e){const t=e.analyzeData!==!1,i=this._hasLocalSource||e.features||e.useFeaturesInView||e.valueExpression||e.filter;return t&&i?this._classBreaksFromMemory(e):(t?this._classBreaksFromGenRend(e):this._classBreaksFromInterpolation(e)).catch(()=>(Fe(e.signal),this._classBreaksFromMemory(e)))}async queryFeatureCount(e){if(this._hasLocalSource)throw new M(`${this.adapterName}:not-supported`,"Layer does not support count query");const t=this.layer,i=t.createQuery();return i.where=Sr(i.where,e.whereClause),fo(i,e.filter),t.queryFeatureCount(i,{signal:e.signal})}async generateRenderer(e,t){var s;const i=this.layer;if(this._hasLocalSource||i.version<10.1)throw new M(`${this.adapterName}:not-supported`,"Layer does not support generateRenderer operation (requires ArcGIS Server version 10.1+)");const r=i.createQuery();return e.where=Sr(e.where,r.where),IGe(((s=i.parsedUrl)==null?void 0:s.path)??"",{source:i.dynamicDataSource??void 0,gdbVersion:i.gdbVersion??void 0},e,{signal:t})}async predominantCategories(e){if(!this._hasLocalSource&&!this.supportsSQLExpression)throw new M(`${this.adapterName}:not-supported`,"Layer does not support advanced SQL expressions and standardized queries");const{fields:t,view:i,signal:r,filter:s}=e,n=zV(t),o=X9e(t),a=i&&this._hasLocalSource?await this._uvFromMemory({valueExpression:n,view:i,signal:r,filter:s}):await this._uvFromServiceQuery({sqlExpression:o.expression,valueExpression:n,signal:r,filter:s});return ZV(a.uniqueValueInfos,t)}async getSampleFeatures(e,t){var y,g;const{view:i,requiredFields:r,returnGeometry:s,filter:n,signal:o}=e,a=e.sampleSize;if(a==null||a===0)return[];const u=this.layer.createQuery(),c=1,h=t==="json";u.outSpatialReference=i==null?void 0:i.spatialReference,u.returnGeometry=!!s,u.outFields=r,fo(u,n);let p=[],m=!1;if(i)try{const v=await i.whenLayerView(this.layer);if(m=!oA(this,r,v).length,m){if(a>=1&&!e.filter&&"getSampleFeatures"in v){await this._waitForLayerViewUpdate(v);const b=await v.getSampleFeatures({minFeatureCount:a,sampleSize:a});if(b!=null)return h?b:b.map(w=>_i.fromJSON(w))}if(p=await this._fetchFeaturesFromMemory(v,u,o,t),p.length>=a&&a>0)return wv(p,a,c)}}catch{Fe(o)}try{if(this._hasLocalSource)return m?p:h?await this._fetchFeaturesJSONFromService(u,o):await this._fetchFeaturesFromService(u,o);const v=await this.queryFeatureCount({view:i,filter:n,signal:o}),b=this.layer.capabilities.query.maxRecordCount;let w=a===-1?v:a;if(w=b&&w>b?b:w,v<=p.length||p.length>=b)return p;if(u.maxAllowableOffset=e.resolution||(i?i.extent.width/i.width/i.scale:Ej(this.layer.spatialReference))*c7e,v<=w)return h?await this._fetchFeaturesJSONFromService(u,o):await this._fetchFeaturesFromService(u,o);if(v<=NW){const _=this.layer.createQuery();fo(_,n);const S=await this.layer.queryObjectIds();return u.objectIds=wv(S,w,c),h?await this._fetchFeaturesJSONFromService(u,o):await this._fetchFeaturesFromService(u,o)}return(g=(y=this.layer.capabilities)==null?void 0:y.query)!=null&&g.supportsPagination&&(u.num=Math.min(w,NW)),h?await this._fetchFeaturesJSONFromService(u,o):await this._fetchFeaturesFromService(u,o)}catch{return Fe(o),p}}load(e){const t=this.layer.load(e).then(async i=>{var r,s;this.geometryType=i.geometryType,this.objectIdField=i.objectIdField,this.supportsSQLExpression=(s=(r=i.capabilities)==null?void 0:r.query)==null?void 0:s.supportsSqlExpression,this._hasLocalSource=!i.url&&!!i.source,this.hasQueryEngine=this._hasLocalSource,this.minScale=i.minScale,this.maxScale=i.maxScale,this.fullExtent=i.fullExtent,this.workerClient=XS.getInstance(),await this.workerClient.open(e.signal)});return this.addResolvingPromise(t),Promise.resolve(this)}};function d7e(e,t,i){const r=[],s=t.length;return t.forEach((n,o)=>{const[a,u]=n;let c=null;c=o!==0||i?o!==s-1||i?Sr(`${e} >= ${a}`,`${e} ${o===s-1?" <= ":" < "} ${u}`):`${e} >= ${a}`:`${e} < ${u}`,r.push("WHEN ("+c+") THEN "+(o+1))}),["CASE",r.join(" "),"ELSE 0","END"].join(" ")}l([d({readOnly:!0})],Gb.prototype,"adapterName",void 0),l([d({constructOnly:!0})],Gb.prototype,"layer",void 0),Gb=l([x("esri.smartMapping.support.adapters.FeatureLayerAdapter")],Gb);const pn=Gb;let tE=class extends pn{constructor(){super(...arguments),this.adapterName="csv-layer-adapter"}async _createGenerateRendererResult(t,i,r,s,n){const o=t==null?void 0:t.features;if(!(o==null?void 0:o.length))throw new M("csv-layer-adapter:insufficient-data","No features are available to calculate statistics");const u=j1(o);let c=null;if(s==="percent-of-total"&&(c=(await this.workerClient.summaryStatistics({field:i},u)).sum,c==null))throw new M("csv-layer-adapter:invalid","invalid normalizationTotal");if((n==null?void 0:n.type)==="class-breaks-definition"){const p=(await qv({field:i,normalizationType:s,normalizationField:r,normalizationTotal:c},u)).filter(m=>Number.isFinite(m));return nce({definition:n,values:p,normalizationTotal:c})}const h=(await qv({field:i},u)).filter(p=>p!=null&&typeof p=="string"&&p.trim()!=="");return mqe(h)}generateRenderer(t,i){const r=t.classificationDefinition;let s=null,n=null,o=null;(r==null?void 0:r.type)==="class-breaks-definition"?(s=r.classificationField,n=r.normalizationField,o=r.normalizationType):s=r==null?void 0:r.attributeField;const a=this.layer;return Gg({field:s,normalizationField:n}).then(u=>{const c=a.createQuery();return c.returnGeometry=!1,c.outFields=u,c.where=Sr(c.where,t.where),a.queryFeatures(c,{signal:i}).then(h=>this._createGenerateRendererResult(h,s,n,o,r))})}load(t){const i=this.layer.load(t).then(async r=>{this.geometryType=r.geometryType,this.objectIdField=r.objectIdField,this.supportsSQLExpression=!0,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.workerClient=XS.getInstance(),await this.workerClient.open(t.signal)});return this.addResolvingPromise(i),Promise.resolve(this)}};l([d({readOnly:!0})],tE.prototype,"adapterName",void 0),tE=l([x("esri.smartMapping.support.adapters.CSVLayerAdapter")],tE);const h7e=tE;let iE=class extends pn{constructor(){super(...arguments),this.adapterName="feature-layer-binning-adapter"}async _getNormalizationTotalFromMemory(e,t,i){const{featuresJSON:r,graphics:s,layerView:n,query:o}=t,a={include:["sum"]},u=(!r&&!s&&n&&"queryAggregateSummaryStatistics"in n?await n.queryAggregateSummaryStatistics(o,{field:e,outStatisticTypes:a},{signal:i}):r?await this.workerClient.summaryStatistics({field:e},r):await tm({attribute:{field:e,outStatisticTypes:a},features:s})).sum;if(u==null)throw new M(`${this.adapterName}:invalid`,"invalid normalizationTotal");return u}async _processStatsFromMemoryParams(e){const{features:t,filter:i}=e;if(t!=null&&t.length)return this._getFilteredFeatures(t,i);const{view:r,field:s,field2:n,field3:o,normalizationField:a,valueExpression:u,returnGeometry:c,layerViewFunc:h,signal:p}=e;let m=null,y=null,g=null,v=null,b=null;if(r)try{if(m=await r.whenLayerView(this.layer),y=h!=null&&h in m&&typeof m[h]=="function",y){await this._waitForLayerViewUpdate(m);const w=await Gg({field:s,field2:n,field3:o,normalizationField:a,valueExpression:u});bW(this,w).length?y=!1:(g="createAggregateQuery"in m?m.createAggregateQuery():null,g?(g.outFields=w,g.returnGeometry=!1,fo(g,i)):y=!1),m.suspended&&(y=!1)}}catch{y=!1}if(!y&&(b=_W(this.layer).map(w=>w.toJSON()),v=await this._fetchFeaturesForStats({field:s,field2:n,field3:o,valueExpression:u,normalizationField:a,returnGeometry:c,filter:i,view:r,signal:p},"json"),!(v!=null&&v.length)))throw new M(`${this.adapterName}:insufficient-data`,"No features are available to calculate statistics");return{layerView:m,query:g,featuresJSON:v,fieldInfos:b}}async _summaryStatsFromMemory(e,t){const{view:i,field:r,valueExpression:s,normalizationType:n,signal:o}=e,a={field:r,valueExpression:s,normalizationType:n,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,outStatisticTypes:e.outStatisticTypes},{featuresJSON:u,graphics:c,layerView:h,query:p,fieldInfos:m}=await this._processStatsFromMemoryParams({...e,layerViewFunc:"queryAggregateSummaryStatistics"});return s&&i&&(u||c)&&(a.fieldType=t!=null&&t.type?b0.toJSON(t.type):null,a.viewInfoParams=po(i),a.timeZone=i.timeZone,a.fieldInfos=m),n==="percent-of-total"&&e.normalizationTotal==null&&(a.normalizationTotal=await this._getNormalizationTotalFromMemory(r,{featuresJSON:u,graphics:c,layerView:h,query:p},o)),!u&&!c&&h&&"queryAggregateSummaryStatistics"in h?h.queryAggregateSummaryStatistics(p,a,{signal:o}):u?this.workerClient.summaryStatistics(a,u):tm({attribute:a,features:c})}async _uvFromMemory(e,t){const{view:i,field:r,valueExpression:s,returnAllCodedValues:n,signal:o}=e,{featuresJSON:a,graphics:u,layerView:c,query:h,fieldInfos:p}=await this._processStatsFromMemoryParams({...e,layerViewFunc:"queryAggregateUniqueValues"}),m={field:r,field2:e.field2,field3:e.field3,fieldDelimiter:Ef,valueExpression:s,domains:t,returnAllCodedValues:n};return s&&i&&(a||u)&&(m.viewInfoParams=po(i),m.timeZone=i.timeZone,m.fieldInfos=p),!a&&!u&&c&&"queryAggregateUniqueValues"in c?c.queryAggregateUniqueValues(h,m,{signal:o}):a?this.workerClient.uniqueValues(m,a):lC({attribute:m,features:u})}async _histogramFromMemory(e){const{view:t,field:i,valueExpression:r,signal:s}=e,{featuresJSON:n,graphics:o,layerView:a,query:u,fieldInfos:c}=await this._processStatsFromMemoryParams({...e,layerViewFunc:"queryAggregateHistogram"}),h={field:i,valueExpression:r,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numBins:e.numBins};return r&&t&&(n||o)&&(h.viewInfoParams=po(t),h.timeZone=t.timeZone,h.fieldInfos=c),e.normalizationType==="percent-of-total"&&e.normalizationTotal==null&&(h.normalizationTotal=await this._getNormalizationTotalFromMemory(i,{featuresJSON:n,graphics:o,layerView:a,query:u},s)),!n&&!o&&a&&"queryAggregateHistogram"in a?a.queryAggregateHistogram(u,h,{signal:s}):n?this.workerClient.histogram(h,n):V1({attribute:h,features:o})}async _classBreaksFromMemory(e){const{view:t,field:i,valueExpression:r,signal:s}=e,{featuresJSON:n,graphics:o,layerView:a,query:u,fieldInfos:c}=await this._processStatsFromMemoryParams({...e,layerViewFunc:"queryAggregateClassBreaks"}),h={field:i,valueExpression:r,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numClasses:e.numClasses};return r&&t&&(n||o)&&(h.viewInfoParams=po(t),h.timeZone=t.timeZone,h.fieldInfos=c),e.normalizationType==="percent-of-total"&&e.normalizationTotal==null&&(h.normalizationTotal=await this._getNormalizationTotalFromMemory(i,{featuresJSON:n,graphics:o,layerView:a,query:u},s)),!n&&!o&&a&&"queryAggregateClassBreaks"in a?a.queryAggregateClassBreaks(u,h,{signal:s}):n?this.workerClient.classBreaks(h,n):uC({attribute:h,features:o})}getField(e=""){const t=_W(this.layer);return t==null?void 0:t.find(i=>i.name.toLowerCase()===(e==null?void 0:e.toLowerCase()))}getFieldUsageInfo(e){return this.getField(e)?{supportsLabelingInfo:!0,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:!1,supportsStatistics:!0}:null}getFieldDomain(e,t){return null}async summaryStatistics(e){const{field:t}=e,i=t?this.getField(t):null,r=go(i)||zs(i),s=e.sqlExpression&&!e.valueExpression&&!t;if(r||s)throw new M(`${this.adapterName}:not-supported`,"Date field and sqlExpression are not supported");return this._summaryStatsFromMemory(e,i)}async uniqueValues(e){const t=await aC(e,this);return this._uvFromMemory(e,t)}async histogram(e){const{field:t}=e,i=t?this.getField(t):null,r=go(i)||zs(i),s=e.sqlExpression&&!e.valueExpression&&!t;if(r||s)throw new M(`${this.adapterName}:not-supported`,"Date field and sqlExpression are not supported");return this._histogramFromMemory(e)}async classBreaks(e){return(e.analyzeData!==!1?this._classBreaksFromMemory(e):this._classBreaksFromInterpolation(e)).catch(()=>(Fe(e.signal),this._classBreaksFromMemory(e)))}async queryFeatureCount(e){var r;const t=await((r=e.view)==null?void 0:r.whenLayerView(this.layer));if(!t||!("queryAggregateCount"in t)||!t.queryAggregateCount)throw new M(`${this.adapterName}:not-supported`,"LayerView is not supported.");await this._waitForLayerViewUpdate(t);const i=t.createAggregateQuery();return i.where=Sr(i.where,e.whereClause),fo(i,e.filter),t.queryAggregateCount(i,{signal:e.signal})}generateRenderer(e,t){throw new M(`${this.adapterName}:not-supported`,"'generateRenderer' is not supported.")}heatmapStatistics(e){throw new M(`${this.adapterName}:not-supported`,"'heatmapStatistics' is not supported.")}async predominantCategories(e){const{fields:t,view:i,signal:r}=e,s=zV(t),n=await this._uvFromMemory({valueExpression:s,view:i,signal:r});return ZV(n.uniqueValueInfos,t)}async getSampleFeatures(e,t){const{view:i,sampleSize:r,requiredFields:s,returnGeometry:n,filter:o,signal:a}=e;if(!i)throw new M(`${this.adapterName}:not-supported`,"'view' is required to get sample features for binning.");if(i.type==="3d")throw new M(`${this.adapterName}:not-supported`,"3d 'view' is not supported to get sample features for binning.");const u=await i.whenLayerView(this.layer);if(!("queryAggregateJSON"in u&&u.queryAggregateJSON&&"queryAggregates"in u&&u.queryAggregates))throw new M(`${this.adapterName}:not-supported`,"LayerView is not supported.");if(await this._waitForLayerViewUpdate(u),bW(this,s).length)throw new M(`${this.adapterName}:insufficient-data`,"Layer does not have required fields");const c=1,h=t==="json",p=u.createAggregateQuery();p.outSpatialReference=i==null?void 0:i.spatialReference,p.returnGeometry=!!n,p.outFields=s,fo(p,o);const{features:m}=h?await u.queryAggregateJSON(p,{signal:a}):await u.queryAggregates(p,{signal:a});return m.length&&r!=null&&r>0&&r<=m.length?wv(m,r,c):m}load(e){const t=this.layer.load(e).then(async i=>{this.geometryType="polygon",this.objectIdField=null,this.supportsSQLExpression=!1,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.minScale=i.minScale,this.maxScale=i.maxScale,this.fullExtent=i.fullExtent;const r="featureReduction"in i?i.featureReduction:null;if((r==null?void 0:r.type)!=="binning"&&(r==null?void 0:r.type)!=="cluster")throw new M(`${this.adapterName}:invalid-parameters`,`Feature reduction type ${r==null?void 0:r.type} is not supported`);this.workerClient=XS.getInstance(),await this.workerClient.open(e.signal)});return this.addResolvingPromise(t),Promise.resolve(this)}};l([d({readOnly:!0})],iE.prototype,"adapterName",void 0),iE=l([x("esri.smartMapping.support.adapters.FeatureLayerBinningAdapter")],iE);const p7e=iE;let Bb=class extends YV{constructor(e){super(e),this._featureLayerAdapter=null,this.workerClient=null,this.adapterName="scene-layer-adapter"}destroy(){var e;(e=this.workerClient)==null||e.destroy()}_hasCachedStatistics(e){return this.layer.hasCachedStatistics(e)}_updateQuery(e,t=[],i=[]){if(!e||!i.length)return e;const r=this.layer.objectIdField,s=e.clone(),n=t.filter(a=>{const u=this.layer.getField(a);return!i.includes(u.name)}),o=n.some(a=>this.layer.getField(a).name===r);return s.outFields=o?n:[...n,r],s}async _fetchFeaturesFromMemory(e,t,i){if(!e)throw new M("scene-layer-adapter:insufficient-data","view is required to fetch the features from layerView");const r=await e.whenLayerView(this.layer),s=new AbortController,n=s.signal,o=vl(()=>!r.updating,n);await KQ(o,5e3,s);const a=oA(this,i,r);Fe(n);const u=this._updateQuery(t,i??[],a),c=await r.queryFeatures(u,{signal:n});Fe(n);const h=c.features;return a.length?r.whenGraphicAttributes(h,a):h}async _fetchFeaturesJSONFromMemory(e,t,i){return this._fetchFeaturesFromMemory(e,t,i).then(j1)}_fetchFeaturesForStats(e,t){return Gg({field:e.field,normalizationField:e.normalizationField,valueExpression:e.valueExpression}).then(i=>this.getSampleFeatures({sampleSize:-1,view:e.view,returnGeometry:e.returnGeometry,requiredFields:i,signal:e.signal},t))}async _processStatsFromMemoryParams(e){const t=e.features;if(t!=null&&t.length)return t.length&&"declaredClass"in t[0]&&t[0].declaredClass==="esri.Graphic"?{graphics:t}:{featuresJSON:t};const{view:i,field:r,normalizationField:s,valueExpression:n,signal:o}=e,a=await this._fetchFeaturesForStats({field:r,valueExpression:n,normalizationField:s,view:i,signal:o},null);if(!(a!=null&&a.length))throw new M("scene-layer-adapter:insufficient-data","No features are available to calculate statistics");return{graphics:a}}_getCachedStatistics(e,t){const i=this.layer;return e.valueExpression||e.sqlExpression||e.sqlWhere||e.minValue||e.maxValue?Promise.reject(new M("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression', 'sqlWhere', 'minValue' or 'maxValue' is specified")):i.queryCachedStatistics(t==null?void 0:t.name,{signal:e.signal}).then(r=>{const s=r.stats,{min:n,max:o,totalValuesCount:a}=s;let{avg:u,stddev:c,sum:h,variance:p,count:m}=s;return n===0&&o===0||(u=u===0?null:u,h=h===0?null:h,c=c===0?null:c,p=p===0?null:p,m=m===0?null:m),m==null&&(h!=null&&u!=null?m=Math.round(h/u):a!=null&&(m=a)),{avg:u,count:m,max:o,min:n,stddev:c,sum:h,variance:p}})}async _getNormalizationTotal(e,t,i){const r={include:["sum"]},s=(t?await this.workerClient.summaryStatistics({field:e,outStatisticTypes:r},t):await tm({attribute:{field:e,outStatisticTypes:r},features:i})).sum;if(s==null)throw new M("scene-layer-adapter:invalid","invalid normalizationTotal");return s}async _getSummaryStatisticsFromMemory(e,t){const{view:i,field:r,normalizationField:s,valueExpression:n}=e,{featuresJSON:o,graphics:a}=await this._processStatsFromMemoryParams(e),u={field:r,valueExpression:n,normalizationType:e.normalizationType,normalizationField:s,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,outStatisticTypes:e.outStatisticTypes};return e.valueExpression&&i&&o&&(u.fieldType=t!=null&&t.type?b0.toJSON(t.type):null,u.viewInfoParams=po(i),u.timeZone=i.timeZone),e.normalizationType==="percent-of-total"&&e.normalizationTotal==null&&(u.normalizationTotal=await this._getNormalizationTotal(r,o,a)),o?this.workerClient.summaryStatistics(u,o):tm({attribute:u,features:a})}_getCachedStatisticsForUniqueValues(e,t){const i=this.layer,r=t==null?void 0:t.name,s=t&&e.field?this.getFieldDomain(e.field):null;return e.valueExpression||e.sqlExpression||e.sqlWhere?Promise.reject(new M("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression' or 'sqlWhere' is specified")):i.queryCachedStatistics(r,{signal:e.signal}).then(n=>{var m;const o=n.stats;if(!o.mostFrequentValues)throw new Error;const a=(m=n.labels)==null?void 0:m.labels,u={},c=[],h="countOF"+r;o.mostFrequentValues.forEach(y=>{const g=new _i({attributes:{}});g.attributes[r]=t&&t.name!==i.objectIdField&&(AS(t)||go(t))?Number(y.value):y.value,g.attributes[h]=y.count,c.push(g)}),a&&a.forEach(y=>{u[y.value]=y.label});const p=new S0({features:c});return WV(p,{layer:this,field:e.field,labels:u,view:e.view,signal:e.signal})}).then(n=>P1(n,[s],e.returnAllCodedValues))}async _getUniqueValuesFromMemory(e,t){const{view:i,field:r,field2:s,field3:n,valueExpression:o,returnAllCodedValues:a}=e,u={field:r,field2:s,field3:n,fieldDelimiter:Ef,valueExpression:o,domains:t,returnAllCodedValues:a},{featuresJSON:c,graphics:h}=await this._processStatsFromMemoryParams(e);return e.valueExpression&&i&&c&&(u.viewInfoParams=po(i),u.timeZone=i.timeZone),c?this.workerClient.uniqueValues(u,c):lC({attribute:u,features:h})}_getCachedStatisticsForHistogram(e,t){const i=this.layer;return e.valueExpression||e.sqlExpression||e.sqlWhere||e.normalizationType?Promise.reject(new M("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression' or 'sqlExpression' or 'sqlWhere' or 'normalizationType' is specified")):i.queryCachedStatistics(t&&t.name,{signal:e.signal}).then(r=>{const s=r.stats,{minValue:n,maxValue:o}=e,a=n??s.min,u=o??s.max,c=e.numBins||10,h=f7e(s.histogram,a,u,c);return pce(h,a,u,c)})}async _getClassBreaksFromMemory(e){const{view:t,field:i,normalizationField:r,valueExpression:s}=e,{featuresJSON:n,graphics:o}=await this._processStatsFromMemoryParams(e),a={field:i,valueExpression:s,normalizationType:e.normalizationType,normalizationField:r,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numClasses:e.numClasses};return e.valueExpression&&t&&n&&(a.viewInfoParams=po(t),a.timeZone=t.timeZone),e.normalizationType==="percent-of-total"&&e.normalizationTotal==null&&(a.normalizationTotal=await this._getNormalizationTotal(i,n,o)),n?this.workerClient.classBreaks(a,n):uC({attribute:a,features:o})}async _getHistogramFromMemory(e){const{view:t,field:i}=e,{featuresJSON:r,graphics:s}=await this._processStatsFromMemoryParams(e),n={field:i,valueExpression:e.valueExpression,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numBins:e.numBins};return e.valueExpression&&t&&r&&(n.viewInfoParams=po(t),n.timeZone=t.timeZone),e.normalizationType==="percent-of-total"&&e.normalizationTotal==null&&(n.normalizationTotal=await this._getNormalizationTotal(i,r,s)),r?this.workerClient.histogram(n,r):V1({attribute:n,features:s})}getField(e){return this.layer.getField(e??"")}getFieldUsageInfo(e){const t=this.getField(e);if(!t)return null;const i=this.layer.getFieldUsageInfo(t.name);return{supportsLabelingInfo:i.supportsLabelingInfo,supportsPopupTemplate:i.supportsPopupTemplate,supportsRenderer:i.supportsRenderer,supportsLayerQuery:i.supportsLayerQuery,supportsStatistics:!0}}getFieldDomain(e,t){return this._featureLayerAdapter?this._featureLayerAdapter.getFieldDomain(e,t):null}createQuery(){return this.layer.createQuery()}summaryStatistics(e){const t=this.getField(e.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.summaryStatistics(e);if(e.filter)throw new M("scene-layer-adapter:not-supported","filter is not supported");return this._hasCachedStatistics(t==null?void 0:t.name)?this._getCachedStatistics(e,t).catch(()=>(Fe(e.signal),this._getSummaryStatisticsFromMemory(e,t))):this._getSummaryStatisticsFromMemory(e,t)}async uniqueValues(e){if(this._featureLayerAdapter)return this._featureLayerAdapter.uniqueValues(e);if(e.filter)throw new M("scene-layer-adapter:not-supported","filter is not supported");const t=await aC(e,this),{field:i,field2:r}=e,s=i&&r,n=this.getField(i);return!s&&n&&this._hasCachedStatistics(n.name)?this._getCachedStatisticsForUniqueValues(e,n).catch(()=>(Fe(e.signal),this._getUniqueValuesFromMemory(e,t))):this._getUniqueValuesFromMemory(e,t)}histogram(e){const t=this.getField(e.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.histogram(e);if(e.filter)throw new M("scene-layer-adapter:not-supported","filter is not supported");return t&&this._hasCachedStatistics(t.name)?this._getCachedStatisticsForHistogram(e,t).catch(()=>(Fe(e.signal),this._getHistogramFromMemory(e))):this._getHistogramFromMemory(e)}classBreaks(e){const t=this.getField(e.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.classBreaks(e);if(e.filter)throw new M("scene-layer-adapter:not-supported","filter is not supported");return this._hasCachedStatistics(t==null?void 0:t.name)?Promise.reject(new M("scene-layer-adapter:not-supported","Cached stats not supported")):this._getClassBreaksFromMemory(e)}queryFeatureCount(e){return this._featureLayerAdapter?this._featureLayerAdapter.queryFeatureCount(e):Promise.reject(new M("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support count query"))}generateRenderer(e,t){return this._featureLayerAdapter?this._featureLayerAdapter.generateRenderer(e,t):Promise.reject(new M("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support generateRenderer operation"))}heatmapStatistics(e){return this._featureLayerAdapter?this._featureLayerAdapter.heatmapStatistics(e):Promise.reject(new M("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support heatmapStatistics operation"))}async predominantCategories(e){if(this._featureLayerAdapter)return this._featureLayerAdapter.predominantCategories(e);throw new M("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support predominantCategories")}async getSampleFeatures(e,t){if(e.filter)throw new M("scene-layer-adapter:not-supported","filter is not supported");const{view:i,sampleSize:r,requiredFields:s,returnGeometry:n,signal:o}=e,a=1,u=t==="json",c=this.createQuery();c.outFields=s,c.returnGeometry=!!n,c.where=null,c.num=r;let h=[];try{if(h=u?await this._fetchFeaturesJSONFromMemory(i,c,s):await this._fetchFeaturesFromMemory(i,c,s),h.length&&r!=null&&r>0&&r<=h.length)return wv(h,r,a)}catch{Fe(o)}let p=null;if(this._featureLayerAdapter){const m={...e};delete m.view,p=await this._featureLayerAdapter.getSampleFeatures(m,t)}return p!=null&&p.length?p:wv(h,h.length,a)}load(e){const t=this.layer.load(e).then(async i=>{this.workerClient=XS.getInstance(),await this.workerClient.open(e.signal);const r=i.associatedLayer;if(this.geometryType=i.geometryType,r!=null)return this._featureLayerAdapter=new pn({layer:r}),this._featureLayerAdapter.load(e).then(()=>{this.objectIdField=this._featureLayerAdapter.objectIdField,this.supportsSQLExpression=this._featureLayerAdapter.supportsSQLExpression,this.minScale=this._featureLayerAdapter.minScale,this.maxScale=this._featureLayerAdapter.maxScale,this.fullExtent=this._featureLayerAdapter.fullExtent});this.objectIdField=i.objectIdField,this.supportsSQLExpression=!1,this.hasQueryEngine=!1,this.fullExtent=i.fullExtent});return this.addResolvingPromise(t),Promise.resolve(this)}};function f7e(e,t=e.minimum,i=e.maximum,r){const s=[];for(let c=0;c<r;c++)s[c]=0;const n=e.counts.length,o=e.minimum,a=e.maximum;for(let c=0;c<n;c++){const h=(c+.5)/n,p=((1-h)*o+h*a-t)/(i-t)*r;p>=0&&p<=r&&(s[p===r?r-1:Math.floor(p)]+=e.counts[c])}const u=[];return s.forEach((c,h)=>{const p=new _i({attributes:{}});p.attributes.EXPR_1=h+1,p.attributes.countOFExpr=c,u.push(p)}),new S0({features:u})}l([d({readOnly:!0})],Bb.prototype,"adapterName",void 0),l([d({constructOnly:!0})],Bb.prototype,"layer",void 0),Bb=l([x("esri.smartMapping.support.adapters.SceneLayerAdapter")],Bb);const zce=Bb;let rE=class extends zce{constructor(t){super(t),this.adapterName="point-cloud-layer-adapter"}getField(t){return this.layer.fieldsIndex.get(t??"")}getFieldUsageInfo(t){const i=this.getField(t);if(!i)return null;const r=this._hasCachedStatistics(i.name);return{supportsLabelingInfo:r,supportsPopupTemplate:r,supportsRenderer:r,supportsLayerQuery:!1,supportsStatistics:r}}getFieldDomain(){return null}load(t){const i=this.layer.load(t).then(()=>{this.geometryType="point",this.objectIdField=null,this.supportsSQLExpression=!1,this.hasQueryEngine=!1});return this.addResolvingPromise(i),Promise.resolve(this)}};l([d({readOnly:!0})],rE.prototype,"adapterName",void 0),rE=l([x("esri.smartMapping.support.adapters.PointCloudLayerAdapter")],rE);const m7e=rE;let sE=class extends QV{constructor(){super(...arguments),this.adapterName="stream-layer-adapter"}async _summaryStatsFromClientQuery(t,i){var u;const{signal:r,view:s}=t,n=JV(this,t,i);n.outStatistics=(u=n.outStatistics)==null?void 0:u.filter(c=>c.outStatisticFieldName!=="totalcount_value");const o=await this._fetchFeatureSetFromMemory(n,s,r),a=HV(o,go(i)||zs(i));return k1(a,t.outStatisticTypes)}};l([d({readOnly:!0})],sE.prototype,"adapterName",void 0),sE=l([x("esri.smartMapping.support.adapters.StreamLayerAdapter")],sE);const y7e=sE;var me;(function(e){e[e.CatalogLayer=0]="CatalogLayer",e[e.CatalogFootprintLayer=1]="CatalogFootprintLayer",e[e.CSVLayer=2]="CSVLayer",e[e.FeatureLayer=3]="FeatureLayer",e[e.GeoJSONLayer=4]="GeoJSONLayer",e[e.KnowledgeGraphSublayer=5]="KnowledgeGraphSublayer",e[e.OGCFeatureLayer=6]="OGCFeatureLayer",e[e.OrientedImageryLayer=7]="OrientedImageryLayer",e[e.ParquetLayer=8]="ParquetLayer",e[e.PointCloudLayer=9]="PointCloudLayer",e[e.SceneLayer=10]="SceneLayer",e[e.StreamLayer=11]="StreamLayer",e[e.SubtypeGroupLayer=12]="SubtypeGroupLayer",e[e.SubtypeSublayer=13]="SubtypeSublayer",e[e.WFSLayer=14]="WFSLayer"})(me||(me={}));const aA={[me.CatalogLayer]:{adapter:pn,type:"catalog",label:"CatalogLayer"},[me.CatalogFootprintLayer]:{adapter:pn,type:"catalog-footprint",label:"CatalogFootprintLayer"},[me.CSVLayer]:{adapter:h7e,type:"csv",label:"CSVLayer"},[me.FeatureLayer]:{adapter:pn,type:"feature",label:"FeatureLayer"},[me.GeoJSONLayer]:{adapter:pn,type:"geojson",label:"GeoJSONLayer"},[me.KnowledgeGraphSublayer]:{adapter:pn,type:"knowledge-graph-sublayer",label:"KnowledgeGraphSublayer"},[me.OGCFeatureLayer]:{adapter:QV,type:"ogc-feature",label:"OGCFeatureLayer"},[me.OrientedImageryLayer]:{adapter:pn,type:"oriented-imagery",label:"OrientedImageryLayer"},[me.ParquetLayer]:{adapter:pn,type:"parquet",label:"ParquetLayer"},[me.PointCloudLayer]:{adapter:m7e,type:"point-cloud",label:"PointCloudLayer"},[me.SceneLayer]:{adapter:zce,type:"scene",label:"SceneLayer"},[me.StreamLayer]:{adapter:y7e,type:"stream",label:"StreamLayer"},[me.SubtypeGroupLayer]:{adapter:pn,type:"subtype-group",label:"SubtypeGroupLayer"},[me.SubtypeSublayer]:{adapter:pn,type:"subtype-sublayer",label:"SubtypeSublayer"},[me.WFSLayer]:{adapter:pn,type:"wfs",label:"WFSLayer"}},Uce=[me.CatalogLayer,me.CatalogFootprintLayer,me.CSVLayer,me.FeatureLayer,me.GeoJSONLayer,me.KnowledgeGraphSublayer,me.OGCFeatureLayer,me.OrientedImageryLayer,me.ParquetLayer,me.PointCloudLayer,me.SceneLayer,me.StreamLayer,me.SubtypeGroupLayer,me.SubtypeSublayer,me.WFSLayer];me.CatalogFootprintLayer,me.CSVLayer,me.FeatureLayer,me.GeoJSONLayer,me.KnowledgeGraphSublayer,me.OGCFeatureLayer,me.OrientedImageryLayer,me.ParquetLayer,me.SceneLayer,me.StreamLayer,me.SubtypeGroupLayer,me.SubtypeSublayer,me.WFSLayer;const kst=[me.CSVLayer,me.FeatureLayer,me.GeoJSONLayer,me.OGCFeatureLayer,me.KnowledgeGraphSublayer,me.OrientedImageryLayer,me.ParquetLayer,me.StreamLayer,me.WFSLayer];function g7e(e){return e.map(t=>aA[t].label)}function v7e(e){return e.map(t=>aA[t].type)}function Pst(e,t=Uce,i){if(e instanceof YV)return e;const r=w7e(e,t);return r?i?new p7e({layer:e}):new r({layer:e}):null}function w7e(e,t=Uce){let i=null;return t.some(r=>{const s=e.type===aA[r].type;return s&&(i=aA[r].adapter),s}),i}var LW;(function(e){e.OuterRing="reference-size-outer-ring",e.InnerDot="reference-size-inner-dot"})(LW||(LW={}));const nR=new be({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let nE=class extends P{};l([d({type:nR.apiValues,readOnly:!0,nonNullable:!0,json:{type:nR.jsonValues,read:!1,write:{writer:nR.write,isRequired:!0}}})],nE.prototype,"type",void 0),nE=l([x("esri.renderers.support.pointCloud.PointSizeAlgorithm")],nE);const b7e=nE;var TD;let Hb=TD=class extends b7e{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new TD({scaleFactor:this.scaleFactor})}};l([ee({pointCloudSplatAlgorithm:"splat"})],Hb.prototype,"type",void 0),l([d({type:Number,value:1,nonNullable:!0,json:{write:{isRequired:!0}}})],Hb.prototype,"scaleFactor",void 0),Hb=TD=l([x("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],Hb);const Dst=Hb;new K([0,0,0,.4]);[...zv.light,...zv.dark];function _7e(e,t,i){let r=null,s=null;if(t&&(r=Zle(t,e,!1),r)){const n=Wle(r);n!=null&&(s=n)}return!r&&i&&(r=i==="dark"?"dark-gray":"gray",s=i),r||s||(r="gray",s="light"),{basemapId:r,basemapTheme:s}}let S7e=class{constructor(t){const{name:i,label:r,description:s,schemes:n}=t;this.name=i,this.label=r,this.description=s,this.schemes=n;const o=t.basemapGroups||zv;let a=[];Object.keys(o).forEach(u=>{a=a.concat(o[u])}),this.supportedBasemaps=a,this.basemapGroups=o}isBasemapSupported(t){const i=Zle(t,this.supportedBasemaps);return!(!i||!this.supportedBasemaps.includes(i))}getRawSchemes(t){const{basemapId:i,basemapTheme:r}=_7e(this.supportedBasemaps,t.basemap,t.basemapTheme);let s=r;if(i){const a=Wle(i,this.basemapGroups);a!=null&&(s=a)}let n=t.geometryType;n==="multipoint"?n="point":n==="mesh"&&(n="polygon");const o=this.schemes[n]||this.schemes.default;return{schemesInfo:R(o[s]),basemapId:i,basemapTheme:r}}};function qce(e){const t=e.themeDictionary,i=new Map;for(const r in t){const s=t[r];i.set(r,new S7e(s))}return i}const T7e=zv.light,x7e=zv.dark;[...T7e,...x7e];const Hg=[128,128,128,1],Wg=[128,128,128,1],Zg="4px",Jg="40px",Hh={primary:{color:[227,139,79,1],noDataColor:Hg,outline:{color:[255,255,255,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:Zg,maxSize:Jg,opacity:.8},secondary:[{color:[128,128,128,1],noDataColor:Hg,outline:{color:[255,255,255,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:Zg,maxSize:Jg,opacity:.8},{color:[255,255,255,1],noDataColor:Hg,outline:{color:[128,128,128,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:Zg,maxSize:Jg,opacity:.8}]},Wh={primary:{color:[227,139,79,1],noDataColor:Wg,outline:{color:[92,92,92,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:Zg,maxSize:Jg,opacity:.8},secondary:[{color:[178,178,178,1],noDataColor:Wg,outline:{color:[92,92,92,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:Zg,maxSize:Jg,opacity:.8},{color:[26,26,26,1],noDataColor:Wg,outline:{color:[128,128,128,.25],width:"1px"},noDataSize:"4px",size:"12px",minSize:Zg,maxSize:Jg,opacity:.8}]},Gce=[0,0,0,0],oR={color:Gce,outline:{color:[166,166,166,.25],width:"1px"}},aR={color:Gce,outline:{color:[153,153,153,.25],width:"1px"}};qce({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features by varying their size to show data.",schemes:{point:{light:Hh,dark:Wh},polyline:{light:{primary:{color:[226,119,40,1],noDataColor:Hg,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"},secondary:[{color:[77,77,77,1],noDataColor:Hg,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"},{color:[153,153,153,1],noDataColor:Hg,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"}]},dark:{primary:{color:[226,119,40,1],noDataColor:Wg,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"},secondary:[{color:[255,255,255,1],noDataColor:Wg,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"},{color:[153,153,153,1],noDataColor:Wg,noDataWidth:"1px",width:"1px",minWidth:"1px",maxWidth:"18px"}]}},polygon:{light:{primary:{marker:Hh.primary,background:aR,opacity:Hh.primary.opacity},secondary:[{marker:Hh.secondary[0],background:aR,opacity:Hh.secondary[0].opacity},{marker:Hh.secondary[1],background:aR,opacity:Hh.secondary[1].opacity}]},dark:{primary:{marker:Wh.primary,background:oR,opacity:Wh.primary.opacity},secondary:[{marker:Wh.secondary[0],background:oR,opacity:Wh.secondary[0].opacity},{marker:Wh.secondary[1],background:oR,opacity:Wh.secondary[1].opacity}]}}}}}});const tx="#aaaaaa",ix="25px",rx={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},sx=["vibrant-rainbow","cat-dark","predominant-v2","predominant-v5","predominance-race","desert-blooms","tropical-bliss","under-the-sea","ocean-bay","cat-light","predominant-v4","predominance-money","predominant-v3","predominance-race-ethnic","pastel-chalk","predominance-rainbow","predominance-sequence","cat-popup-olympic-sunset"];qce({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features using a pie chart of categories.",schemes:{point:{light:{primary:"predominant-v1",secondary:sx,common:{outline:rx.light,colorForOthersCategory:tx,size:ix}},dark:{primary:"predominant-v2",secondary:sx.map(e=>e==="predominant-v2"?"predominant-v1":e),common:{outline:rx.darker,colorForOthersCategory:tx,size:ix}}},polygon:{light:{primary:"predominant-v1",secondary:sx,common:{colorForOthersCategory:tx,outline:rx.light,size:ix}},dark:{primary:"predominant-v2",secondary:sx.map(e=>e==="predominant-v2"?"predominant-v1":e),common:{colorForOthersCategory:tx,outline:rx.dark,size:ix}}}}}}});const kW=[me.CSVLayer,me.FeatureLayer,me.GeoJSONLayer,me.KnowledgeGraphSublayer,me.OGCFeatureLayer,me.OrientedImageryLayer,me.ParquetLayer,me.StreamLayer,me.WFSLayer],$7e=new Set(["unique-value","class-breaks"]),E7e=new K("#aaaaaa"),Bce=new K("#5c5c5c"),Hce=[new K("#e60049"),new K("#0bb4ff"),new K("#50e991"),new K("#e6d800"),new K("#9b19f5"),new K("#ffa300"),new K("#dc0ab4"),new K("#b3d4ff"),new K("#00bfa0"),new K("#f0cccc")];async function M7e(e){var n;if(!e||!e.layer)throw new M("pie-chart-cluster-renderer:missing-parameters","'layer' parameter is required");const t={...e};t.shape=t.shape||"pie",t.defaultSymbolEnabled??(t.defaultSymbolEnabled=!0);const i=e.layer;if(!v7e(kW).includes(i.type))throw new M("pie-chart-cluster-renderer:invalid-parameters","'layer' must be one of these types: "+g7e(kW).join(", "));const r=t.signal!=null?{signal:t.signal}:null;if(await i.load(r),i.geometryType!=="point")throw new M("pie-chart-cluster-renderer:invalid-parameters","Cluster renderers are only supported for point layers");const s="renderer"in i?i.renderer:void 0;if(!s)throw new M("pie-chart-cluster-renderer:invalid-parameters","input layer does not have a renderer.");if(!$7e.has(s.type))throw new M("pie-chart-cluster-renderer:invalid-parameters",`Cannot create a pie chart renderer for clusters based on a ${s.type} renderer.`);if("valueExpression"in s&&s.valueExpression)throw new M("pie-chart-cluster-renderer:invalid-parameters","Cannot create a pie chart renderer for clusters from a layer whose renderer contains a valueExpression.");if(s.type==="unique-value"){if(s.field2)throw new M("pie-chart-cluster-renderer:invalid-parameters","Cannot create a pie chart renderer for clusters from a UniqueValueRenderer using more than one field.");if(s.uniqueValueInfos!=null&&s.uniqueValueInfos.length>10)throw new M("pie-chart-cluster-renderer:invalid-parameters","PieChart cluster renderer cannot be created from a UniqueValueRenderer with more than 10 unique value infos.")}if(s.type==="class-breaks"){if(s.classBreakInfos.length<2)throw new M("pie-chart-cluster-renderer:invalid-parameters","Cannot create a pie chart renderer for clusters from a layer renderer with a continuous color or size gradient.");if(s.classBreakInfos.length>10)throw new M("pie-chart-cluster-renderer:invalid-parameters","PieChart cluster renderer can not be created from a ClassBreaksRenderer with more than 10 class break infos.");if(((n=s==null?void 0:s.authoringInfo)==null?void 0:n.type)==="class-breaks-size")throw new M("pie-chart-cluster-renderer:invalid-parameters","PieChart cluster renderer can not be created from a ClassBreaksRenderer with breaks varied by size instead of color.")}return t}async function A7e(e){const t=await M7e(e),{layer:i,shape:r,defaultSymbolEnabled:s,legendOptions:n}=t,o="renderer"in i?i.renderer:void 0,a=(await iI("esri/smartMapping/t9n/smartMapping")).other;let u=[];(o==null?void 0:o.type)==="unique-value"&&(u=I7e({renderer:o,defaultSymbolEnabled:s,defaultLabelBackup:a})),(o==null?void 0:o.type)==="class-breaks"&&(u=C7e({renderer:o,defaultSymbolEnabled:s,defaultLabelBackup:a}));const c=[],h=[];for(const p of u){const{field:m,color:y}=p;c.push(m),h.push(new gV({color:y,field:m.name,label:m.alias}))}return{fields:c,renderer:new Ole({attributes:h,legendOptions:HI.from(n),holePercentage:r==="donut"?.45:0,outline:null,size:9,othersCategory:null})}}function I7e(e){const{renderer:t,defaultSymbolEnabled:i,defaultLabelBackup:r}=e,{field:s,defaultSymbol:n,defaultLabel:o}=t,a=t.uniqueValueInfos??[],u=n&&i,c=u?9:10,h=Bue(Hce,c),p=(s?a.slice(0,c).map((m,y)=>{var b;const g=m.label,v=h[y];return{field:new xo({name:lA((b=m.value)==null?void 0:b.toString()),alias:g,onStatisticExpression:new Kf({title:`Field definition - ${g}`,expression:O7e(s,m),returnType:"number"}),statisticType:"sum"}),color:uA(m.symbol,v)}}):null)??[];if(u){const m="cluster_default",y=o||r;p.push({field:new xo({name:lA(m),alias:y,onStatisticExpression:new Kf({title:`Field definition - ${y}`,expression:R7e(s,a),returnType:"number"}),statisticType:"sum"}),color:uA(n,Bce)})}return p}function C7e(e){const{renderer:t,defaultSymbolEnabled:i,defaultLabelBackup:r}=e,{field:s,classBreakInfos:n,defaultSymbol:o,defaultLabel:a}=t,u=o&&i,c=u?9:10,h=Bue(Hce,c),p=n.slice(0,c).map((m,y)=>{const g=m.label||`${m.minValue} - ${m.maxValue}`,v=h[y];return{field:new xo({name:lA(g),alias:g,onStatisticExpression:new Kf({title:`Field definition - ${g}`,expression:F7e(s,m),returnType:"number"}),statisticType:"sum"}),color:uA(m.symbol,v)}});if(u){const m="cluster_default",y=a||r;p.push({field:new xo({name:lA(m),alias:y,onStatisticExpression:new Kf({title:`Field definition - ${y}`,expression:N7e(s,n),returnType:"number"}),statisticType:"sum"}),color:uA(o,Bce)})}return p}function lA(e){return"SUM_"+(e+"").replaceAll(/[^a-zA-Z0-9_]/g,"_")}function uA(e,t){if((e==null?void 0:e.type)==="simple-marker"&&e.color)return e.color.clone();if((e==null?void 0:e.type)==="cim"){const i=wue(e);if(i)return i.clone()}return t?t.clone():E7e.clone()}function O7e(e,t){return`Number(Text($feature["${e}"]) == "${t.value+""}")`}function R7e(e,t){return`Number(!(${t.map(i=>`(Text($feature["${e}"]) == "${i.value+""}")`).join(" || ")}))`}function F7e(e,t){return`Number($feature["${e}"] >= ${t.minValue} && $feature["${e}"] < ${t.maxValue})`}function N7e(e,t){return`Number(!(${t.map(i=>`($feature["${e}"] >= ${i.minValue} && $feature["${e}"] < ${i.maxValue})`).join(" || ")}))`}const L7e="/communities-directory/";function k7e(){const[e,t]=vr.useState(null),[i,r]=vr.useState([]),[s,n]=vr.useState(),[o,a]=vr.useState([]),u=vr.useRef(null),c=vr.useRef(null),h=GY(),p=vr.useMemo(()=>h.filter(b=>b.displayOnMap),[h]);vr.useEffect(()=>{if(e){const b=new uc({outline:{cap:"round",color:[0,255,204,.3],join:"round",miterLimit:1,style:"solid",width:.5},style:"solid"}),w=new gl({symbol:b}),_=new Vv({portalItem:{id:"503ef1cb832f4e8bb4be7fc024ad9aa2"},renderer:w,effect:"bloom(1, 1px, 0.0)",popupEnabled:!1});e.map.add(_),e.whenLayerView(_).then(()=>{_.queryFeatures({f:"pbf",where:"1=1",returnGeometry:!0,outFields:["NAMEUNIT"]}).then(S=>{const T=S.features;r(T);const E=T.map(A=>({center:A.geometry.extent.center,NAMEUNIT:A.attributes.NAMEUNIT}));n(E)})})}},[e]),vr.useEffect(()=>{if(!e||i.length===0)return;c.current&&(e.map.remove(c.current),c.current.destroy());const b=p.map(T=>{const E=new Se({latitude:T.latLon.lat,longitude:T.latLon.lon}),A=new _i({geometry:E,attributes:T});return A.popupTemplate={title:T.name,content:()=>(m(T,e,E),null)},A}),w=[{name:"ObjectID",alias:"ObjectID",type:"oid"},{name:"id",alias:"id",type:"integer"},{name:"name",alias:"name",type:"string"},{name:"lastReviewed",alias:"lastReviewed",type:"date"},{name:"communityType",alias:"communityType",type:"string"},{name:"eventFormat",alias:"eventFormat",type:"string"},{name:"location",alias:"location",type:"string"},{name:"topics",alias:"topics",type:"string"},{name:"contactInfo",alias:"contactInfo",type:"string"},{name:"communityUrl",alias:"communityUrl",type:"string"},{name:"thumbnailUrl",alias:"thumbnailUrl",type:"string"}],_={type:"unique-value",field:"communityType",defaultSymbol:{type:"simple-marker",style:"circle",color:"white",size:"8px"},uniqueValueInfos:[{value:"Tech Meetup",symbol:{type:"simple-marker",style:"circle",size:"8px",color:"#ff595e"}},{value:"Conferencia",symbol:{type:"simple-marker",style:"circle",size:"8px",color:"#ffca3a"}},{value:"Grupo colaborativo",symbol:{type:"simple-marker",style:"circle",size:"8px",color:"#8ac926"}},{value:"Hacklab",symbol:{type:"simple-marker",style:"circle",size:"8px",color:"#1982c4"}}]},S=new Vv({source:b,fields:w,renderer:_});S.when().then(()=>{g(S,e).then(T=>{S.featureReduction=T})}),e.map.add(S),c.current=S,e.whenLayerView(S).then(()=>{S.queryFeatures({f:"pbf",where:"1=1",returnGeometry:!0,outFields:["*"]}).then(T=>{T.features})})},[e,i,p]);function m(b,w,_){u.current||(u.current=new Xue({view:w,alignment:"top-left",dockEnabled:!1,dockOptions:{buttonEnabled:!1}}),w.popup=u.current);const S=[{label:"Estado",value:b.status},{label:"Revisada",value:b.lastReviewed},{label:"Tipo de comunidad",value:b.communityType},{label:"Formato de evento",value:b.eventFormat},{label:"Localizacin",value:b.location},{label:"Temas",value:b.topics},{label:"Contacto",value:b.contactInfo},{label:"Website",value:b.communityUrl?`<a href="${b.communityUrl}" target="_blank">Visitar</a>`:null}].filter(E=>E.value&&E.value!=="Sin completar"&&E.value!=="").map(E=>`
      <div style="margin-bottom: 6px ">
        <span style="font-weight: 600  color: #ccc ">${E.label}:</span>
        <span style="color: #eee  margin-left: 4px ">${E.value}</span>
      </div>`).join(""),T=`<img 
                  src="${L7e}/${b.thumbnailUrl}" 
                  alt="${b.name}" 
                  style="width: 100%  border-radius: 8px  margin-bottom: 12px " 
                />`;u.current.open({location:_,title:`<span style="color: #00eaff ">${b.name}</span>`,content:`
      <div style="
        background-color: #1b1b1b 
        color: #eee 
        padding: 12px 
        border-radius: 10px 
        font-family: system-ui, sans-serif 
        max-width: 260px 
      ">

        ${T}

        ${S}
      </div>
    `})}function y(b){t(()=>b.target.view)}async function g(b,w){const{labelingInfo:_,clusterMinSize:S}=await xGe({layer:b,view:w}).then(H=>H==null?void 0:H.primaryScheme),T=_[0].symbol;T.color=[255,255,255,1],T.haloColor=[255,255,255,.3],T.font.size=10;const{renderer:E,fields:A}=await A7e({layer:b,shape:"donut"});E.holePercentage=.66;const C=A.map(H=>({fieldName:H.name,label:H.alias,format:{places:0,digitSeparator:!0}})),O=C.map(H=>H.fieldName);return{type:"cluster",popupTemplate:{title:"Comunidades",content:[{type:"text",text:"<b>{cluster_count}</b> Comunidades."},{type:"media",mediaInfos:[{type:"pie-chart",value:{fields:O}}]},{type:"text",text:`<table style="width: 100%; font-family: sans-serif; font-size: 14px; border-collapse: collapse;">
  <thead>
    <tr>
      <th style="text-align: left; padding: 6px; color: #ffff">Tipo</th>
      <th style="text-align: right; padding: 6px; color: #ffff">Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 6px;">
        <span style="display: inline-block; width: 10px; height: 10px; background-color: #ff595e; border-radius: 50%; margin-right: 6px;"></span>
        Tech Meetup
      </td>
      <td style="padding: 6px; text-align: right;"><b>{SUM_Tech_Meetup}</b></td>
    </tr>
    <tr>
      <td style="padding: 6px;">
        <span style="display: inline-block; width: 10px; height: 10px; background-color: #ffca3a; border-radius: 50%; margin-right: 6px;"></span>
        Conferencia
      </td>
      <td style="padding: 6px; text-align: right;"><b>{SUM_Conferencia}</b></td>
    </tr>
    <tr>
      <td style="padding: 6px;">
        <span style="display: inline-block; width: 10px; height: 10px; background-color: #8ac926; border-radius: 50%; margin-right: 6px;"></span>
        Grupo colaborativo
      </td>
      <td style="padding: 6px; text-align: right;"><b>{SUM_Grupo_colaborativo}</b></td>
    </tr>
    <tr>
      <td style="padding: 6px;">
        <span style="display: inline-block; width: 10px; height: 10px; background-color: #1982c4; border-radius: 50%; margin-right: 6px;"></span>
        Hacklab
      </td>
      <td style="padding: 6px; text-align: right;"><b>{SUM_Hacklab}</b></td>
    </tr>
    <tr>
      <td style="padding: 6px;">
        <span style="display: inline-block; width: 10px; height: 10px; background-color: #6a4c93; border-radius: 50%; margin-right: 6px;"></span>
        Otro
      </td>
      <td style="padding: 6px; text-align: right;"><b>{SUM_Otro}</b></td>
    </tr>
  </tbody>
</table>
`}],fieldInfos:C},labelingInfo:_,clusterMinSize:S,fields:A,renderer:E}}vr.useEffect(()=>{if(!e)return;let b;const w=()=>{b||(b=requestAnimationFrame(()=>{b=null;const S=e.extent,T=p.filter(E=>{const{lon:A,lat:C}=E.latLon;return S.contains(new Se({latitude:C,longitude:A}))});a(T)}))};w();const _=e.watch("extent",w);return()=>{_.remove(),cancelAnimationFrame(b)}},[e,p]);const v=o.length;return z.jsxs("div",{id:"map",className:"column is-two-thirds-tablet is-three-quarters-desktop is-four-fifths-widescreen is-four-fifths-fullhd",style:{display:"flex",flexDirection:"column"},children:[z.jsx("arcgis-map",{basemap:"gray",center:"-4, 40",zoom:"4",onarcgisViewReadyChange:y}),z.jsxs("div",{className:"mb-2 has-text-centered	",children:["Encontradas: ",v," comunidades en este rea"]}),z.jsx("div",{className:"communitieslist",children:o.map(b=>z.jsx(HY,{community:b},b.id))})]})}function ws({name:e="nombre",value:t="valor"}){const[i,r]=vr.useState(!1),{filterComunities:s}=BY(),n=()=>{const o=!i;r(o),s(e,o?t:rF+t)};return z.jsx("div",{className:`custom-switch ${i?"on":"off"}`,onClick:n,name:e,value:i?t:`BAJA${t}`,children:z.jsx("span",{className:"switch-slider"})})}const P7e=()=>{const e=ZY();return z.jsxs("aside",{className:`sidebar menu column is-full-mobile is-one-third-tablet is-one-quarter-desktop is-one-fifth-widescreen is-one-fifth-fullhd box sticky ${e?"is-active":"is-hidden"}`,children:[z.jsx("p",{className:"menu-label",children:"Tipo de Comunidad"}),z.jsxs("ul",{className:"menu-list",children:[z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Tech Meetup"}),z.jsx(ws,{name:"communityType",value:"Tech Meetup"})]})}),z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Conferencia"}),z.jsx(ws,{name:"communityType",value:"Conferencia"})]})}),z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Grupo Colaborativo"}),z.jsx(ws,{name:"communityType",value:"Grupo colaborativo"})]})}),z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Grupo de Ayuda Mutua"}),z.jsx(ws,{name:"communityType",value:"Grupo de ayuda mutua"})]})}),z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Hacklab"}),z.jsx(ws,{name:"communityType",value:"Hacklab"})]})}),z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Organizacin paraguas"}),z.jsx(ws,{name:"communityType",value:"Organizacin paraguas"})]})}),z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Meta comunidad"}),z.jsx(ws,{name:"communityType",value:"Meta comunidad"})]})})]}),z.jsx("p",{className:"menu-label",children:"Tipo de Eventos"}),z.jsxs("ul",{className:"menu-list",children:[z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Hbridos"}),z.jsx(ws,{name:"eventFormat",value:"Hbridos"})]})}),z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Online"}),z.jsx(ws,{name:"eventFormat",value:"Online"})]})}),z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Presencial"}),z.jsx(ws,{name:"eventFormat",value:"Presencial"})]})}),z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Desconocidos"}),z.jsx(ws,{name:"eventFormat",value:"Desconocido"})]})})]}),z.jsx("p",{className:"menu-label",children:"Estado de la comunidad"}),z.jsxs("ul",{className:"menu-list",children:[z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Activa"}),z.jsx(ws,{name:"status",value:"Activa"})]})}),z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Inactiva"}),z.jsx(ws,{name:"status",value:"Inactiva"})]})}),z.jsx("li",{className:"menu-item",children:z.jsxs("div",{className:"option-item is-size-7",children:[z.jsx("p",{children:"Desconocido"}),z.jsx(ws,{name:"status",value:"Desconocido"})]})})]})]})};function D7e(){const[e,t]=vr.useState("map"),{fetchCommunities:i}=BY();vr.useEffect(()=>{i()},[i]);const r=()=>{t(s=>s==="map"?"list":"map")};return z.jsxs(z.Fragment,{children:[z.jsx(Zfe,{view:e,toggleView:r}),z.jsxs("div",{className:"main",children:[e==="list"&&z.jsx(Gfe,{}),e==="map"&&z.jsx(k7e,{}),z.jsx(P7e,{})]}),z.jsx(Bfe,{})]})}$fe.createRoot(document.getElementById("search_app")).render(z.jsx(vr.StrictMode,{children:z.jsx(D7e,{})}));export{Fie as $,$h as A,CS as B,Hr as C,YJe as D,Woe as E,ale as F,Br as G,hke as H,Li as I,dOe as J,Fe as K,wZe as L,d4e as M,WI as N,n5e as O,Be as P,o5e as Q,a5e as R,yl as S,D as T,R as U,P as V,ASe as W,p0 as X,D4 as Y,o$e as Z,L as _,pke as a,mt as a$,b$e as a0,l as a1,d as a2,x as a3,het as a4,i7 as a5,Bs as a6,Q as a7,Tj as a8,_i as a9,vje as aA,dI as aB,P3e as aC,RX as aD,jA as aE,n$e as aF,OSe as aG,RSe as aH,FSe as aI,uOe as aJ,uee as aK,Bg as aL,Gu as aM,ZA as aN,lee as aO,V9 as aP,HJe as aQ,fWe as aR,LUe as aS,PUe as aT,j5 as aU,C_ as aV,Fv as aW,pM as aX,kt as aY,mo as aZ,z5 as a_,hxe as aa,$ie as ab,q as ac,QXe as ad,Df as ae,Jet as af,nJe as ag,om as ah,ei as ai,zf as aj,Mn as ak,hs as al,gje as am,Nje as an,Ene as ao,Aje as ap,Q3e as aq,wOe as ar,dk as as,Sle as at,xje as au,Tle as av,_le as aw,Lje as ax,Ije as ay,mje as az,CA as b,gDe as b$,fS as b0,xl as b1,rl as b2,Me as b3,hQ as b4,pQ as b5,H7e as b6,ke as b7,AQ as b8,MQ as b9,RHe as bA,Ws as bB,_e as bC,ac as bD,se as bE,W as bF,fTe as bG,fU as bH,fi as bI,Ke as bJ,SQ as bK,WPe as bL,DVe as bM,$Ve as bN,CVe as bO,jVe as bP,LI as bQ,nt as bR,X4 as bS,gt as bT,_De as bU,vDe as bV,Rn as bW,$r as bX,El as bY,kS as bZ,uc as b_,lHe as ba,_a as bb,xS as bc,y1 as bd,$S as be,we as bf,rwe as bg,qA as bh,GA as bi,g4 as bj,v4 as bk,iwe as bl,bZe as bm,JHe as bn,Ye as bo,fet as bp,ee as bq,L5 as br,k5 as bs,ds as bt,tJe as bu,pI as bv,RI as bw,DBe as bx,Ku as by,Pf as bz,Xz as c,vne as c$,To as c0,oc as c1,Eh as c2,yh as c3,$o as c4,VF as c5,Nt as c6,qr as c7,lM as c8,jF as c9,lL as cA,OWe as cB,AJe as cC,ZJe as cD,S0 as cE,cVe as cF,y0 as cG,G as cH,So as cI,Pe as cJ,zE as cK,a0 as cL,i0 as cM,J as cN,_o as cO,BJe as cP,I_ as cQ,pDe as cR,M9 as cS,MWe as cT,bf as cU,cF as cV,cBe as cW,nFe as cX,wQ as cY,be as cZ,Si as c_,UF as ca,qte as cb,pX as cc,kHe as cd,FA as ce,gS as cf,a1 as cg,Nd as ch,Tn as ci,_0e as cj,zA as ck,h4 as cl,S0e as cm,wV as cn,AHe as co,_Pe as cp,ZPe as cq,bPe as cr,wne as cs,j3e as ct,rOe as cu,G3e as cv,B3e as cw,fOe as cx,wDe as cy,u3 as cz,hh as d,sJe as d$,Ah as d0,Sne as d1,Qxe as d2,D3e as d3,Tne as d4,pOe as d5,hHe as d6,$ne as d7,hM as d8,xne as d9,Ywe as dA,js as dB,b0 as dC,lle as dD,bl as dE,BA as dF,uM as dG,REe as dH,AS as dI,rMe as dJ,aJe as dK,cs as dL,oJe as dM,ej as dN,fI as dO,fd as dP,o1 as dQ,l1 as dR,PHe as dS,V7 as dT,j7 as dU,mye as dV,aBe as dW,KX as dX,_v as dY,c4 as dZ,Abe as d_,UVe as da,ret as db,Tv as dc,Ni as dd,aI as de,XVe as df,vM as dg,Le as dh,oEe as di,net as dj,pm as dk,Vv as dl,gWe as dm,zte as dn,lbe as dp,AWe as dq,Lt as dr,DS as ds,bo as dt,WU as du,f2 as dv,WA as dw,IWe as dx,Gse as dy,sf as dz,$ke as e,Ne as e$,yS as e0,Vle as e1,Qtt as e2,Xtt as e3,On as e4,i1 as e5,M8e as e6,E8e as e7,tf as e8,Ev as e9,ZP as eA,jBe as eB,o0e as eC,vl as eD,xk as eE,og as eF,Joe as eG,Mke as eH,IZe as eI,lI as eJ,j$e as eK,jHe as eL,CZe as eM,Gr as eN,bBe as eO,f0e as eP,C5e as eQ,Det as eR,Ret as eS,w0 as eT,A_ as eU,TL as eV,I5e as eW,jet as eX,Vet as eY,tFe as eZ,CQe as e_,bS as ea,uo as eb,yK as ec,m4 as ed,Y0e as ee,MI as ef,aCe as eg,lCe as eh,T6e as ei,oG as ej,zM as ek,UXe as el,aXe as em,vFe as en,Bq as eo,Gq as ep,qq as eq,Uq as er,GWe as es,UWe as et,qWe as eu,BXe as ev,Ja as ew,Hq as ex,zq as ey,LQ as ez,Hoe as f,_1 as f$,RQe as f0,qXe as f1,Tse as f2,vh as f3,Hs as f4,Yt as f5,xe as f6,gl as f7,Fi as f8,St as f9,Sue as fA,EHe as fB,LHe as fC,oze as fD,iP as fE,dEe as fF,MS as fG,VZe as fH,nc as fI,zZe as fJ,I8e as fK,prt as fL,jZe as fM,drt as fN,Trt as fO,UZe as fP,qu as fQ,oKe as fR,Tf as fS,fl as fT,Cye as fU,ih as fV,EBe as fW,qHe as fX,GHe as fY,nBe as fZ,oBe as f_,Bne as fa,pe as fb,$1 as fc,zi as fd,jM as fe,yk as ff,VIe as fg,At as fh,Qq as fi,tc as fj,bie as fk,d1 as fl,ns as fm,u6e as fn,sBe as fo,hS as fp,ZGe as fq,Ece as fr,Ice as fs,HEe as ft,ec as fu,l0 as fv,fHe as fw,I9 as fx,OA as fy,RA as fz,gZe as g,LSe as g$,Xt as g0,Pse as g1,Ih as g2,Cn as g3,xB as g4,bB as g5,sWe as g6,Iv as g7,Iit as g8,K as g9,art as gA,ort as gB,am as gC,yt as gD,$v as gE,xJe as gF,TJe as gG,CMe as gH,BK as gI,sOe as gJ,eWe as gK,XCe as gL,mHe as gM,DCe as gN,jU as gO,SK as gP,TK as gQ,Kt as gR,pHe as gS,Gxe as gT,Rie as gU,J3e as gV,Nie as gW,K0e as gX,kSe as gY,k as gZ,Jxe as g_,Vte as ga,xj as gb,set as gc,lOe as gd,U5 as ge,sge as gf,vye as gg,irt as gh,Ett as gi,uKe as gj,pTe as gk,aTe as gl,Ux as gm,WHe as gn,FHe as go,In as gp,K5e as gq,yPe as gr,t7 as gs,I$ as gt,det as gu,nP as gv,pS as gw,Xet as gx,xr as gy,BO as gz,$0e as h,Im as h$,hI as h0,ES as h1,E0e as h2,f4 as h3,A0e as h4,I0e as h5,uBe as h6,jf as h7,IVe as h8,rDe as h9,eh as hA,m0e as hB,wl as hC,yo as hD,ga as hE,C1 as hF,uV as hG,lS as hH,TDe as hI,SDe as hJ,nWe as hK,bDe as hL,y6e as hM,U2 as hN,vwe as hO,lwe as hP,PK as hQ,pye as hR,kst as hS,Uce as hT,Pst as hU,g7e as hV,Gg as hW,fst as hX,pst as hY,pk as hZ,VM as h_,TVe as ha,cDe as hb,GVe as hc,F9 as hd,cre as he,e6e as hf,xDe as hg,BVe as hh,VI as hi,NO as hj,E0 as hk,mP as hl,jI as hm,nVe as hn,GS as ho,yDe as hp,bV as hq,rEe as hr,tEe as hs,J$e as ht,ll as hu,xN as hv,Gs as hw,Lf as hx,JU as hy,jle as hz,TG as i,tKe as i$,TQ as i0,$Q as i1,EQ as i2,pBe as i3,$Ue as i4,SBe as i5,OXe as i6,lst as i7,dst as i8,cst as i9,e0 as iA,dS as iB,lr as iC,g6e as iD,Dte as iE,$x as iF,e8e as iG,yBe as iH,nOe as iI,Z3e as iJ,jv as iK,Lce as iL,hrt as iM,Bp as iN,Met as iO,MZe as iP,FM as iQ,SZe as iR,Y6e as iS,cxe as iT,_9e as iU,uxe as iV,xve as iW,KNe as iX,eLe as iY,eKe as iZ,oLe as i_,ust as ia,Att as ib,Ott as ic,Ctt as id,xtt as ie,WZe as ig,t9e as ih,ltt as ii,utt as ij,yV as ik,mCe as il,KQe as im,YP as io,uHe as ip,dXe as iq,FV as ir,RV as is,TUe as it,qJe as iu,OJe as iv,vWe as iw,L3 as ix,_n as iy,aDe as iz,aKe as j,GO as j$,lLe as j0,HNe as j1,XXe as j2,fb as j3,KXe as j4,fKe as j5,dQ as j6,CSe as j7,MSe as j8,U3e as j9,En as jA,eHe as jB,dTe as jC,Loe as jD,FKe as jE,tle as jF,W5 as jG,ty as jH,PP as jI,Btt as jJ,l4e as jK,EVe as jL,u4e as jM,aa as jN,ci as jO,VCe as jP,Cj as jQ,UCe as jR,sne as jS,mWe as jT,s0 as jU,ole as jV,aV as jW,dc as jX,km as jY,Bue as jZ,Kit as j_,vOe as ja,bOe as jb,YCe as jc,GCe as jd,JI as je,Oje as jf,kte as jg,ewe as jh,owe as ji,RM as jj,q3e as jk,bne as jl,kle as jm,Oqe as jn,Nge as jo,mPe as jp,R4e as jq,oDe as jr,k5e as js,Zae as jt,H5e as ju,BX as jv,QX as jw,TBe as jx,eA as jy,pge as jz,rKe as k,l0e as k$,QVe as k0,W5e as k1,Q5e as k2,Pae as k3,sV as k4,ZM as k5,mDe as k6,Pt as k7,i4e as k8,N5e as k9,Gne as kA,gu as kB,p$ as kC,PYe as kD,nne as kE,rk as kF,Qf as kG,one as kH,dG as kI,Vq as kJ,Pr as kK,n4 as kL,oK as kM,rBe as kN,R_ as kO,fk as kP,Xse as kQ,Q4 as kR,Xp as kS,m1 as kT,Tce as kU,bM as kV,fm as kW,K3e as kX,Th as kY,ir as kZ,cKe as k_,L5e as ka,D5e as kb,j5e as kc,Y5e as kd,V5e as ke,z5e as kf,U5e as kg,q5e as kh,G5e as ki,B5e as kj,Dle as kk,Mye as kl,kX as km,as as kn,Ute as ko,Ket as kp,ue as kq,Oi as kr,DHe as ks,Dve as kt,$Fe as ku,mk as kv,Jq as kw,IXe as kx,Zq as ky,oo as kz,LKe as l,cr as l$,sc as l0,DA as l1,vBe as l2,wBe as l3,gBe as l4,Mit as l5,b9e as l6,kze as l7,Da as l8,Tve as l9,$ as lA,_4 as lB,Vwe as lC,ube as lD,cbe as lE,oge as lF,VBe as lG,Qet as lH,Yet as lI,Qae as lJ,Jae as lK,Zet as lL,m3e as lM,y3e as lN,_ne as lO,zIe as lP,GXe as lQ,Bje as lR,Je as lS,Pwe as lT,Gwe as lU,wS as lV,iWe as lW,UHe as lX,aS as lY,Wq as lZ,CXe as l_,lWe as la,GK as lb,nrt as lc,lrt as ld,Aue as le,p4e as lf,GE as lg,Eve as lh,M0e as li,lj,CJe as lk,MJe as ll,aae as lm,N$e as ln,L$e as lo,n0 as lp,fe as lq,jq as lr,HQe as ls,BQe as lt,GQe as lu,qQe as lv,ZQe as lw,WQe as lx,UQe as ly,zQe as lz,pi as m,$W as m$,PV as m0,Ta as m1,N as m2,eo as m3,Wi as m4,ar as m5,Fue as m6,YLe as m7,Te as m8,cH as m9,zs as mA,da as mB,Jqe as mC,Vqe as mD,qV as mE,Cqe as mF,lce as mG,k1 as mH,jqe as mI,P1 as mJ,dce as mK,BV as mL,Uqe as mM,iqe as mN,oee as mO,vbe as mP,ebe as mQ,dWe as mR,uce as mS,Gqe as mT,Nce as mU,Fce as mV,Rce as mW,Oce as mX,qqe as mY,xst as mZ,S_ as m_,Zf as ma,BCe as mb,mF as mc,VQe as md,gve as me,xWe as mf,B5 as mg,HBe as mh,BBe as mi,CNe as mj,rrt as mk,r8e as ml,vge as mm,gge as mn,bWe as mo,IA as mp,SNe as mq,pie as mr,bye as ms,MHe as mt,Wve as mu,VA as mv,NHe as mw,_x as mx,vre as my,wre as mz,Ome as n,Dst as n$,Tst as n0,Vre as n1,pne as n2,WGe as n3,Sst as n4,VHe as n5,$I as n6,wHe as n7,vHe as n8,X6e as n9,DM as nA,ZK as nB,iXe as nC,eXe as nD,tXe as nE,gFe as nF,Iet as nG,Cet as nH,Aet as nI,rh as nJ,GFe as nK,Wrt as nL,HFe as nM,WFe as nN,f0 as nO,Zrt as nP,Xxe as nQ,qxe as nR,Bxe as nS,Tw as nT,Pu as nU,Yre as nV,pj as nW,v0 as nX,QMe as nY,S3e as nZ,b7e as n_,QI as na,kse as nb,Nse as nc,gIe as nd,wIe as ne,TFe as nf,jb as ng,dKe as nh,Ore as ni,Xf as nj,J5e as nk,ZZe as nl,s4e as nm,Wet as nn,Het as no,tH as np,nh as nq,v1 as nr,zVe as ns,Dq as nt,tbe as nu,qCe as nv,fa as nw,SUe as nx,S4 as ny,T4 as nz,zKe as o,s$e as o$,HI as o0,kDe as o1,xQ as o2,eK as o3,$He as o4,$K as o5,OU as o6,aK as o7,fNe as o8,hXe as o9,yHe as oA,zCe as oB,zS as oC,xIe as oD,cHe as oE,IHe as oF,XQ as oG,Dd as oH,Lte as oI,lTe as oJ,aWe as oK,oWe as oL,OS as oM,RS as oN,FS as oO,qje as oP,Zje as oQ,Zxe as oR,Hxe as oS,Wxe as oT,C2e as oU,Vrt as oV,UIe as oW,EJe as oX,$Je as oY,l4 as oZ,a$e as o_,P9e as oa,D9e as ob,QBe as oc,EI as od,xf as oe,sh as of,kr as og,wj as oh,tk as oi,Ose as oj,VS as ok,HZe as ol,GH as om,yrt as on,mrt as oo,wrt as op,grt as oq,vrt as or,_rt as os,BH as ot,frt as ou,Srt as ov,BZe as ow,um as ox,ua as oy,xEe as oz,pKe as p,Bi as p$,Y3e as p0,r$e as p1,NMe as p2,PWe as p3,zHe as p4,Lm as p5,brt as p6,$rt as p7,ic as p8,xrt as p9,$0 as pA,Xj as pB,RDe as pC,ODe as pD,GI as pE,Iae as pF,uUe as pG,QDe as pH,cUe as pI,Nae as pJ,XM as pK,Eae as pL,zg as pM,c3e as pN,x1 as pO,x5e as pP,T5e as pQ,uYe as pR,cYe as pS,dYe as pT,pl as pU,Dxe as pV,RZe as pW,XQe as pX,aG as pY,PQe as pZ,XLe as p_,A8e as pa,Yq as pb,pNe as pc,AXe as pd,xFe as pe,tG as pf,eG as pg,jrt as ph,ZS as pi,f9e as pj,iw as pk,HCe as pl,j9e as pm,os as pn,fD as po,yet as pp,Q2e as pq,Nre as pr,get as ps,Pg as pt,hBe as pu,gye as pv,dBe as pw,NJe as px,FJe as py,RXe as pz,CHe as q,$it as q$,II as q0,Qse as q1,Kse as q2,_Ce as q3,DYe as q4,CCe as q5,jYe as q6,NM as q7,hOe as q8,MIe as q9,An as qA,Wf as qB,kUe as qC,ire as qD,_Xe as qE,Une as qF,P4e as qG,rWe as qH,KM as qI,Mtt as qJ,TXe as qK,SXe as qL,fFe as qM,Z9e as qN,ist as qO,rst as qP,mFe as qQ,z7 as qR,BIe as qS,kv as qT,Q6e as qU,YHe as qV,DIe as qW,AIe as qX,IIe as qY,cWe as qZ,Eit as q_,K6e as qa,t4 as qb,$Ie as qc,qIe as qd,pO as qe,FZe as qf,p9e as qg,LS as qh,dm as qi,vZe as qj,xBe as qk,Mh as ql,Tue as qm,AUe as qn,$ue as qo,qUe as qp,JS as qq,ZUe as qr,s8e as qs,_We as qt,JJe as qu,qZe as qv,yn as qw,Hm as qx,sqe as qy,nqe as qz,iKe as r,rJe as r$,Cit as r0,Oit as r1,jK as r2,HIe as r3,S1 as r4,hG as r5,Yne as r6,gXe as r7,vXe as r8,wXe as r9,XI as rA,kit as rB,Vit as rC,Lit as rD,jit as rE,Nit as rF,Dit as rG,zit as rH,Uit as rI,BF as rJ,DWe as rK,Hle as rL,HHe as rM,BHe as rN,fwe as rO,die as rP,gj as rQ,G5 as rR,fge as rS,al as rT,TNe as rU,_Ze as rV,zXe as rW,lDe as rX,rit as rY,aet as rZ,Uet as r_,bXe as ra,sXe as rb,oXe as rc,T1 as rd,nXe as re,BFe as rf,gwe as rg,b1 as rh,mq as ri,ZHe as rj,K8e as rk,Bu as rl,rCe as rm,bj as rn,Xwe as ro,uWe as rp,Rit as rq,H5 as rr,fIe as rs,mIe as rt,QHe as ru,cM as rv,M0 as rw,Fit as rx,Pit as ry,qit as rz,M as s,OHe as s$,YZe as s0,KZe as s1,QZe as s2,eJe as s3,XZe as s4,iJe as s5,ps as s6,_re as s7,Ui as s8,DI as s9,Ttt as sA,Stt as sB,cXe as sC,oje as sD,pXe as sE,_j as sF,uje as sG,uXe as sH,ctt as sI,RFe as sJ,lXe as sK,uG as sL,DQe as sM,jQe as sN,fXe as sO,mXe as sP,xXe as sQ,$Xe as sR,JQe as sS,EXe as sT,MXe as sU,yFe as sV,bFe as sW,rXe as sX,loe as sY,bv as sZ,yXe as s_,ktt as sa,kQe as sb,tst as sc,q7 as sd,aEe as se,DZe as sf,VXe as sg,qet as sh,tU as si,JZe as sj,Rtt as sk,JP as sl,ptt as sm,Itt as sn,att as so,cle as sp,ZI as sq,mtt as sr,htt as ss,aje as st,ftt as su,ZB as sv,HB as sw,WB as sx,_tt as sy,btt as sz,KVe as t,NWe as t$,WCe as t0,lB as t1,rB as t2,Wwe as t3,sB as t4,_B as t5,nB as t6,CWe as t7,dB as t8,IB as t9,ytt as tA,gtt as tB,$we as tC,xwe as tD,XHe as tE,mse as tF,Dge as tG,mV as tH,fh as tI,BPe as tJ,sDe as tK,nDe as tL,HPe as tM,uDe as tN,hVe as tO,AVe as tP,jSe as tQ,FIe as tR,EWe as tS,EYe as tT,Wje as tU,p$e as tV,Lse as tW,Ote as tX,rX as tY,h$e as tZ,AU as t_,CB as ta,OB as tb,hbe as tc,hWe as td,Jwe as te,YF as tf,RB as tg,pWe as th,eYe as ti,dtt as tj,$tt as tk,yWe as tl,Ftt as tm,SWe as tn,wtt as to,vtt as tp,VB as tq,eB as tr,UB as ts,jB as tt,hB as tu,W7 as tv,H7 as tw,B7 as tx,K7 as ty,wI as tz,NKe as u,bI as u$,cFe as u0,EK as u1,$We as u2,uet as u3,jbe as u4,Net as u5,Fet as u6,Pq as u7,DXe as u8,PXe as u9,ble as uA,TZe as uB,pet as uC,YDe as uD,WJe as uE,DJe as uF,KJe as uG,kJe as uH,_Be as uI,nYe as uJ,sYe as uK,mBe as uL,pve as uM,RJe as uN,wWe as uO,GJe as uP,Fm as uQ,w5e as uR,sIe as uS,FYe as uT,j2e as uU,_3e as uV,hne as uW,YBe as uX,F2 as uY,Q8 as uZ,AZe as u_,kXe as ua,UFe as ub,Jne as uc,QQe as ud,YQe as ue,jFe as uf,jXe as ug,LQe as uh,gOe as ui,cEe as uj,R0e as uk,zJe as ul,UJe as um,T$e as un,S$e as uo,QCe as up,Cte as uq,nKe as ur,hKe as us,sKe as ut,Ka as uu,ch as uv,lKe as uw,Gje as ux,u$e as uy,_$e as uz,Se as v,Oet as v0,gh as v1,WP as v2,H3e as v3,PJe as v4,Vxe as v5,IJe as v6,trt as v7,ott as v8,vue as v9,iI as vA,PQ as vB,$Be as vC,VJe as vD,Ait as vE,ert as vF,Y9 as vG,Hrt as vH,BWe as vI,WWe as vJ,HXe as vK,iV as vL,zet as vM,Wtt as vN,Y8e as vO,lg as va,QJe as vb,RMe as vc,kIe as vd,dHe as ve,_Ie as vf,OMe as vg,zBe as vh,$Ze as vi,X9 as vj,xZe as vk,TWe as vl,Q9 as vm,V4 as vn,jJe as vo,Brt as vp,e$e as vq,Urt as vr,l$e as vs,EZe as vt,Yxe as vu,qrt as vv,Grt as vw,zrt as vx,mee as vy,yD as vz,wa as w,B7e as x,Ate as y,LJe as z};
